<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Gecode: examples/colored-matrix.cpp (Revision: 14967) Source File</title>
<link href="stylesheet.css" rel="stylesheet" type="text/css">
<!--[if IE]><style type="text/css">
  @media screen {
    html, body {
      height: 100%; overflow-y: hidden;
      background:#FFFFFF url(back.png) repeat-y;
      font-family:Arial,Helvetica,sans-serif;
      color:#000000;
      margin:0;
      padding:0;
    }
    #scrollable {
      height: 100%; width: 100%; overflow: auto;
    }
  }
</style><![endif]-->
</head>

<body>

<div id="logo">
<img src='gecode-logo-100.png' alt="Gecode logo" /></div>

<div id="navigation">
  <div id="navigation2">
    <a class="navigation" href="index.html">main page</a>
    <a class="navigation" href="modules.html">modules</a>
    <a class="navigation" href="namespaces.html">namespaces</a>
    <a class="navigation" href="annotated.html">classes</a>
    <a class="navigation" href="files.html">files</a>
    <br>
    <a class="navigation" href="http://www.gecode.org/index.html">Gecode home</a>
<form action="search.php" method="get"><a class="navigation" title="Search for keywords in the entire documentation">search&nbsp;for&nbsp;<input type="text" name="query" value="" size="20" accesskey="s"/></a></form>
    </div>
</div>

<div id="footline">
<address style="text-align: right;"><small>
Generated on Wed Oct 26 12:47:24 2016 for Gecode by&nbsp;<a href="http://www.doxygen.org/index.html">doxygen</a> 1.6.3</small></address>
</div>

  <script type="text/javascript">
    function showInfo(i, show) {
      var moreinfo = "moreinfo"+i;
      var morelink = "morelink"+i;
      var lesslink = "lesslink"+i;
      var linkstyle = "inline";
      var infostyle = "block";
      if (show) {
        document.getElementById(lesslink).style.display="none";
        document.getElementById(morelink).style.display=linkstyle;
        document.getElementById(moreinfo).style.display=infostyle;
      } else {
        document.getElementById(lesslink).style.display=linkstyle;
        document.getElementById(morelink).style.display="none";
        document.getElementById(moreinfo).style.display="none";
      }
    }
  </script>


<div id="scrollable">
<div id="content">
<!-- Generated by Doxygen 1.6.3 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
  <div class="navpath"><a class="el" href="dir_d0de6c1cd476ac2824796d4541c50862.html">examples</a>
  </div>
<div class="contents">
<h1>colored-matrix.cpp</h1><a href="colored-matrix_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/* -*- mode: C++; c-basic-offset: 2; indent-tabs-mode: nil -*- */</span>
<a name="l00002"></a>00002 <span class="comment">/*</span>
<a name="l00003"></a>00003 <span class="comment"> *  Main authors:</span>
<a name="l00004"></a>00004 <span class="comment"> *     Mikael Lagerkvist &lt;lagerkvist@gecode.org&gt;</span>
<a name="l00005"></a>00005 <span class="comment"> *</span>
<a name="l00006"></a>00006 <span class="comment"> *  Copyright:</span>
<a name="l00007"></a>00007 <span class="comment"> *     Mikael Lagerkvist, 2012</span>
<a name="l00008"></a>00008 <span class="comment"> *</span>
<a name="l00009"></a>00009 <span class="comment"> *  Last modified:</span>
<a name="l00010"></a>00010 <span class="comment"> *     $Date: 2016-04-19 17:19:45 +0200 (Tue, 19 Apr 2016) $ by $Author: schulte $</span>
<a name="l00011"></a>00011 <span class="comment"> *     $Revision: 14967 $</span>
<a name="l00012"></a>00012 <span class="comment"> *</span>
<a name="l00013"></a>00013 <span class="comment"> *  This file is part of Gecode, the generic constraint</span>
<a name="l00014"></a>00014 <span class="comment"> *  development environment:</span>
<a name="l00015"></a>00015 <span class="comment"> *     http://www.gecode.org</span>
<a name="l00016"></a>00016 <span class="comment"> *</span>
<a name="l00017"></a>00017 <span class="comment"> *  Permission is hereby granted, free of charge, to any person obtaining</span>
<a name="l00018"></a>00018 <span class="comment"> *  a copy of this software and associated documentation files (the</span>
<a name="l00019"></a>00019 <span class="comment"> *  &quot;Software&quot;), to deal in the Software without restriction, including</span>
<a name="l00020"></a>00020 <span class="comment"> *  without limitation the rights to use, copy, modify, merge, publish,</span>
<a name="l00021"></a>00021 <span class="comment"> *  distribute, sublicense, and/or sell copies of the Software, and to</span>
<a name="l00022"></a>00022 <span class="comment"> *  permit persons to whom the Software is furnished to do so, subject to</span>
<a name="l00023"></a>00023 <span class="comment"> *  the following conditions:</span>
<a name="l00024"></a>00024 <span class="comment"> *</span>
<a name="l00025"></a>00025 <span class="comment"> *  The above copyright notice and this permission notice shall be</span>
<a name="l00026"></a>00026 <span class="comment"> *  included in all copies or substantial portions of the Software.</span>
<a name="l00027"></a>00027 <span class="comment"> *</span>
<a name="l00028"></a>00028 <span class="comment"> *  THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND,</span>
<a name="l00029"></a>00029 <span class="comment"> *  EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF</span>
<a name="l00030"></a>00030 <span class="comment"> *  MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND</span>
<a name="l00031"></a>00031 <span class="comment"> *  NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE</span>
<a name="l00032"></a>00032 <span class="comment"> *  LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION</span>
<a name="l00033"></a>00033 <span class="comment"> *  OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION</span>
<a name="l00034"></a>00034 <span class="comment"> *  WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</span>
<a name="l00035"></a>00035 <span class="comment"> *</span>
<a name="l00036"></a>00036 <span class="comment"> */</span>
<a name="l00037"></a>00037 
<a name="l00038"></a>00038 <span class="preprocessor">#include &lt;<a class="code" href="driver_8hh.html">gecode/driver.hh</a>&gt;</span>
<a name="l00039"></a>00039 <span class="preprocessor">#include &lt;<a class="code" href="gecode_2int_8hh.html">gecode/int.hh</a>&gt;</span>
<a name="l00040"></a>00040 <span class="preprocessor">#include &lt;<a class="code" href="minimodel_8hh.html">gecode/minimodel.hh</a>&gt;</span>
<a name="l00041"></a>00041 
<a name="l00042"></a>00042 <span class="preprocessor">#include &lt;fstream&gt;</span>
<a name="l00043"></a>00043 
<a name="l00044"></a>00044 <span class="keyword">using namespace </span>Gecode;
<a name="l00045"></a>00045 
<a name="l00050"></a><a class="code" href="classColoredMatrixOptions.html">00050</a> <span class="keyword">class </span><a class="code" href="classColoredMatrixOptions.html" title="ColoredMatrixOptions.">ColoredMatrixOptions</a> : <span class="keyword">public</span> <a class="code" href="classGecode_1_1Options.html" title="Options for scripts">Options</a> {
<a name="l00051"></a>00051 <span class="keyword">private</span>:
<a name="l00053"></a>00053   <a class="code" href="classGecode_1_1Driver_1_1UnsignedIntOption.html" title="Unsigned integer option.">Driver::UnsignedIntOption</a> _height;
<a name="l00055"></a>00055   <a class="code" href="classGecode_1_1Driver_1_1UnsignedIntOption.html" title="Unsigned integer option.">Driver::UnsignedIntOption</a> _width;
<a name="l00057"></a>00057   <a class="code" href="classGecode_1_1Driver_1_1UnsignedIntOption.html" title="Unsigned integer option.">Driver::UnsignedIntOption</a> _size;
<a name="l00059"></a>00059   <a class="code" href="classGecode_1_1Driver_1_1UnsignedIntOption.html" title="Unsigned integer option.">Driver::UnsignedIntOption</a> _colors;
<a name="l00061"></a>00061   <a class="code" href="classGecode_1_1Driver_1_1StringOption.html" title="String-valued option (integer value defined by strings).">Driver::StringOption</a> _not_all_equal;
<a name="l00063"></a>00063   <a class="code" href="classGecode_1_1Driver_1_1StringOption.html" title="String-valued option (integer value defined by strings).">Driver::StringOption</a> _same_or_0;
<a name="l00065"></a>00065   <a class="code" href="classGecode_1_1Driver_1_1StringOption.html" title="String-valued option (integer value defined by strings).">Driver::StringOption</a> _distinct_except_0;
<a name="l00067"></a>00067   <a class="code" href="classGecode_1_1Driver_1_1StringOption.html" title="String-valued option (integer value defined by strings).">Driver::StringOption</a> _no_monochrome_rectangle;
<a name="l00068"></a>00068 
<a name="l00069"></a>00069 <span class="keyword">public</span>:
<a name="l00071"></a>00071   <a class="code" href="classColoredMatrixOptions.html#ae59d9a785018290e855cd7d688a863b7" title="Initialize options for example with name n.">ColoredMatrixOptions</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="bool-expr_8cpp.html#a76f11d9a0a47b94f72c2d0e77fb32240" title="Number of negative literals for node type.">n</a>);
<a name="l00072"></a>00072 
<a name="l00074"></a><a class="code" href="classColoredMatrixOptions.html#a157efa333aee8a6625f78f63c7395d52">00074</a>   <span class="keywordtype">void</span> <a class="code" href="classColoredMatrixOptions.html#a157efa333aee8a6625f78f63c7395d52" title="Parse options from arguments argv (number is argc).">parse</a>(<span class="keywordtype">int</span>&amp; argc, <span class="keywordtype">char</span>* argv[]) {
<a name="l00075"></a>00075     <a class="code" href="classColoredMatrixOptions.html#a157efa333aee8a6625f78f63c7395d52" title="Parse options from arguments argv (number is argc).">Options::parse</a>(argc,argv);
<a name="l00076"></a>00076   }
<a name="l00077"></a>00077 
<a name="l00079"></a><a class="code" href="classColoredMatrixOptions.html#abce5d991a541bc2720fd07bd2897d269">00079</a>   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="classColoredMatrixOptions.html#abce5d991a541bc2720fd07bd2897d269" title="Return height.">height</a>(<span class="keywordtype">void</span>)<span class="keyword"> const </span>{
<a name="l00080"></a>00080     <span class="keywordflow">if</span> (_size.<a class="code" href="classGecode_1_1Driver_1_1UnsignedIntOption.html#a2696c0c2433626d871044674755ab125" title="Set default value to v.">value</a>() == 0)
<a name="l00081"></a>00081       <span class="keywordflow">return</span> _height.<a class="code" href="classGecode_1_1Driver_1_1UnsignedIntOption.html#a2696c0c2433626d871044674755ab125" title="Set default value to v.">value</a>();
<a name="l00082"></a>00082     <span class="keywordflow">else</span>
<a name="l00083"></a>00083       <span class="keywordflow">return</span> _size.<a class="code" href="classGecode_1_1Driver_1_1UnsignedIntOption.html#a2696c0c2433626d871044674755ab125" title="Set default value to v.">value</a>();
<a name="l00084"></a>00084   }
<a name="l00086"></a><a class="code" href="classColoredMatrixOptions.html#af0a2ecf6dbd53b5f622f935f6b81c3f4">00086</a>   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="classColoredMatrixOptions.html#af0a2ecf6dbd53b5f622f935f6b81c3f4" title="Return width.">width</a>(<span class="keywordtype">void</span>)<span class="keyword">  const </span>{
<a name="l00087"></a>00087     <span class="keywordflow">if</span> (_size.<a class="code" href="classGecode_1_1Driver_1_1UnsignedIntOption.html#a2696c0c2433626d871044674755ab125" title="Set default value to v.">value</a>() == 0)
<a name="l00088"></a>00088       <span class="keywordflow">return</span> _width.<a class="code" href="classGecode_1_1Driver_1_1UnsignedIntOption.html#a2696c0c2433626d871044674755ab125" title="Set default value to v.">value</a>();
<a name="l00089"></a>00089     <span class="keywordflow">else</span>
<a name="l00090"></a>00090       <span class="keywordflow">return</span> _size.<a class="code" href="classGecode_1_1Driver_1_1UnsignedIntOption.html#a2696c0c2433626d871044674755ab125" title="Set default value to v.">value</a>();
<a name="l00091"></a>00091   }
<a name="l00093"></a><a class="code" href="classColoredMatrixOptions.html#a214077b58d781ac18a1846bcfb89baf3">00093</a>   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="classColoredMatrixOptions.html#a214077b58d781ac18a1846bcfb89baf3" title="Return number of colors.">colors</a>(<span class="keywordtype">void</span>)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> _colors.<a class="code" href="classGecode_1_1Driver_1_1UnsignedIntOption.html#a2696c0c2433626d871044674755ab125" title="Set default value to v.">value</a>(); }
<a name="l00095"></a><a class="code" href="classColoredMatrixOptions.html#a983681632dec9c64ece0325e19afc8b3">00095</a>   <span class="keywordtype">int</span> <a class="code" href="classColoredMatrixOptions.html#a983681632dec9c64ece0325e19afc8b3" title="Return how to implement not all equals.">not_all_equal</a>(<span class="keywordtype">void</span>)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> _not_all_equal.<a class="code" href="classGecode_1_1Driver_1_1StringOption.html#aa878fe617c59c0a5d45aaffa585054d4" title="Set default value to v.">value</a>(); }
<a name="l00097"></a><a class="code" href="classColoredMatrixOptions.html#a439f30eeb740553e8f0806dc653f143d">00097</a>   <span class="keywordtype">int</span> <a class="code" href="classColoredMatrixOptions.html#a439f30eeb740553e8f0806dc653f143d" title="Return how to implement same or 0.">same_or_0</a>(<span class="keywordtype">void</span>)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> _same_or_0.<a class="code" href="classGecode_1_1Driver_1_1StringOption.html#aa878fe617c59c0a5d45aaffa585054d4" title="Set default value to v.">value</a>(); }
<a name="l00099"></a><a class="code" href="classColoredMatrixOptions.html#a0a11837fac6c1a98bae427a7dd271057">00099</a>   <span class="keywordtype">int</span> <a class="code" href="classColoredMatrixOptions.html#a0a11837fac6c1a98bae427a7dd271057" title="Return how to implement distinct except 0.">distinct_except_0</a>(<span class="keywordtype">void</span>)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> _distinct_except_0.<a class="code" href="classGecode_1_1Driver_1_1StringOption.html#aa878fe617c59c0a5d45aaffa585054d4" title="Set default value to v.">value</a>(); }
<a name="l00101"></a><a class="code" href="classColoredMatrixOptions.html#a714c9cc223cb2d0baae066b4f7c6e7c1">00101</a>   <span class="keywordtype">int</span> <a class="code" href="classColoredMatrixOptions.html#a714c9cc223cb2d0baae066b4f7c6e7c1" title="Return how to implement distinct except 0.">no_monochrome_rectangle</a>(<span class="keywordtype">void</span>)<span class="keyword"> const </span>{
<a name="l00102"></a>00102     <span class="keywordflow">return</span> _no_monochrome_rectangle.<a class="code" href="classGecode_1_1Driver_1_1StringOption.html#aa878fe617c59c0a5d45aaffa585054d4" title="Set default value to v.">value</a>();
<a name="l00103"></a>00103   }
<a name="l00104"></a>00104 };
<a name="l00105"></a>00105 
<a name="l00106"></a>00106 <span class="keyword">namespace </span>{
<a name="l00115"></a>00115 
<a name="l00122"></a>00122   <a class="code" href="classGecode_1_1DFA.html" title="Deterministic finite automaton (DFA).">DFA</a> <a class="code" href="classColoredMatrix.html#a6a2808e10434d091d597b3d953b4cc1d">same_or_0_dfa</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> colors);
<a name="l00123"></a>00123 
<a name="l00130"></a>00130   <a class="code" href="classGecode_1_1TupleSet.html" title="Class represeting a set of tuples.">TupleSet</a> <a class="code" href="classColoredMatrix.html#a2e20e24b71c1b8da4c89ee4f65f20d5a">same_or_0_tuple_set</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> colors);
<a name="l00131"></a>00131 
<a name="l00134"></a>00134   <a class="code" href="classGecode_1_1DFA.html" title="Deterministic finite automaton (DFA).">DFA</a> <a class="code" href="classColoredMatrix.html#a6668e0a2c5745d1011898633e0c6c1d5">distinct_except_0_dfa</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> colors);
<a name="l00135"></a>00135 
<a name="l00138"></a>00138   <a class="code" href="classGecode_1_1DFA.html" title="Deterministic finite automaton (DFA).">DFA</a> <a class="code" href="classColoredMatrix.html#ac432949382b131f300edb78519f57c6d">no_monochrome_rectangle_dfa</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> colors);
<a name="l00139"></a>00139 
<a name="l00142"></a>00142   <a class="code" href="classGecode_1_1ArgArray.html">IntSetArgs</a> <a class="code" href="classColoredMatrix.html#ad13f7de7462ca8da871dc34acf534c3f">distinct_except_0_counts</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> colors, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="group__FuncIterRangesOp.html#gac1e7e0e9cd6a70aa2e8f2975a266e3b4" title="Size of all ranges of range iterator i.">size</a>);
<a name="l00143"></a>00143 
<a name="l00146"></a>00146   <a class="code" href="classGecode_1_1DFA.html" title="Deterministic finite automaton (DFA).">DFA</a> <a class="code" href="classColoredMatrix.html#a91ff2b983666e6755f0b2330c36ff5e1">not_all_equal_dfa</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> colors);
<a name="l00147"></a>00147 
<a name="l00149"></a>00149 }
<a name="l00150"></a>00150 
<a name="l00168"></a><a class="code" href="classColoredMatrix.html">00168</a> <span class="keyword">class </span><a class="code" href="classColoredMatrix.html" title="Example: Colored matrix example.">ColoredMatrix</a> : <span class="keyword">public</span> <a class="code" href="classGecode_1_1Driver_1_1ScriptBase.html" title="Parametric base-class for scripts.">IntMinimizeScript</a> {
<a name="l00169"></a>00169 <span class="keyword">protected</span>:
<a name="l00173"></a><a class="code" href="classColoredMatrix.html#a1ef65cd28556bfd08186c93aa1a80af2">00173</a>   <span class="keyword">const</span> <a class="code" href="classColoredMatrixOptions.html" title="ColoredMatrixOptions.">ColoredMatrixOptions</a>&amp; <a class="code" href="classColoredMatrix.html#a1ef65cd28556bfd08186c93aa1a80af2" title="Options for model.">opt</a>; 
<a name="l00174"></a><a class="code" href="classColoredMatrix.html#a70c739a7485bc48e578abbb0a0d44cc3">00174</a>   <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="classColoredMatrix.html#a70c739a7485bc48e578abbb0a0d44cc3" title="Height of matrix.">height</a>;  
<a name="l00175"></a><a class="code" href="classColoredMatrix.html#ab89519480425bc2f20d72456439b0b85">00175</a>   <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="classColoredMatrix.html#ab89519480425bc2f20d72456439b0b85" title="Width of matrix.">width</a>;   
<a name="l00176"></a><a class="code" href="classColoredMatrix.html#a0bf3a3f4de5d3a0e4ef63138c3596c5e">00176</a>   <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="classColoredMatrix.html#a0bf3a3f4de5d3a0e4ef63138c3596c5e" title="Number of colors to use.">colors</a>;  
<a name="l00177"></a>00177 
<a name="l00178"></a>00178 
<a name="l00182"></a>00182 
<a name="l00183"></a><a class="code" href="classColoredMatrix.html#abd346860d7f4d0133e2b1b86260f71ca">00183</a>   <a class="code" href="classGecode_1_1IntVarArray.html" title="Integer variable array.">IntVarArray</a> <a class="code" href="classColoredMatrix.html#abd346860d7f4d0133e2b1b86260f71ca" title="Array for matrix variables.">x</a>;
<a name="l00185"></a><a class="code" href="classColoredMatrix.html#ae39db00cbf1e65ae1f15e82762346825">00185</a>   <a class="code" href="classGecode_1_1IntVar.html" title="Integer variables.">IntVar</a> <a class="code" href="classColoredMatrix.html#ae39db00cbf1e65ae1f15e82762346825" title="Maximum color used.">max_color</a>;
<a name="l00187"></a>00187 
<a name="l00190"></a><a class="code" href="classColoredMatrix.html#a09056b0d432231608c383c52763ce771">00190</a>   <a class="code" href="classGecode_1_1IntVar.html" title="Integer variables.">IntVar</a> <a class="code" href="classColoredMatrix.html#a09056b0d432231608c383c52763ce771">same_or_0</a>(<span class="keyword">const</span> <a class="code" href="classGecode_1_1IntVar.html" title="Integer variables.">IntVar</a>&amp; <a class="code" href="bool-expr_8cpp.html#a8a13baeb20373dbbf44a2474015e0a8a" title="For atomic nodes.">a</a>, <span class="keyword">const</span> <a class="code" href="classGecode_1_1IntVar.html" title="Integer variables.">IntVar</a>&amp; <a class="code" href="bool-expr_8cpp.html#a843209b8427c10e55a0946a0c20dc1e1" title="For binary nodes (and, or, eqv).">b</a>)
<a name="l00191"></a>00191   {
<a name="l00192"></a>00192     <span class="keywordflow">switch</span> (<a class="code" href="classColoredMatrix.html#a1ef65cd28556bfd08186c93aa1a80af2" title="Options for model.">opt</a>.<a class="code" href="classColoredMatrixOptions.html#a439f30eeb740553e8f0806dc653f143d" title="Return how to implement same or 0.">same_or_0</a>()) {
<a name="l00193"></a>00193     <span class="keywordflow">case</span> <a class="code" href="classColoredMatrix.html#a87a339431e00ffae46ec6d5cf193b539af78e69f054fb090618107532af0d9e1a" title="Use reification for same or 0.">SAME_OR_0_REIFIED</a>: {
<a name="l00194"></a>00194       <a class="code" href="classGecode_1_1IntVar.html" title="Integer variables.">IntVar</a> result(*<span class="keyword">this</span>, 0, <a class="code" href="classColoredMatrix.html#a0bf3a3f4de5d3a0e4ef63138c3596c5e" title="Number of colors to use.">colors</a>);
<a name="l00195"></a>00195       <a class="code" href="classGecode_1_1BoolVar.html" title="Boolean integer variables.">BoolVar</a> <a class="code" href="namespaceGecode_1_1Int_1_1BinPacking.html#ae23603340a1d27e314dc1dd5c01d9571" title="Whether two items are the same.">same</a> = <a class="code" href="group__TaskModelMiniModelPost.html#ga5ce56c4a337caf468548da9fb44534d3" title="Post Boolean expression and return its value.">expr</a>(*<span class="keyword">this</span>, (a == b));
<a name="l00196"></a>00196       <a class="code" href="group__TaskModelFloatRelFloat.html#ga5e46c82c7630132bc51178cee5259082" title="Propagates .">rel</a>(*<span class="keyword">this</span>, result, <a class="code" href="group__TaskModelInt.html#gga2a4b3317737fd8ffb4dfdf43d1bb87aaa3c531f069e207c7078f1d06f9b16af83" title="Equality ().">IRT_EQ</a>, a, same);
<a name="l00197"></a>00197       <span class="comment">// Redundant (implied by previous), but improves efficiency</span>
<a name="l00198"></a>00198       <a class="code" href="group__TaskModelFloatRelFloat.html#ga5e46c82c7630132bc51178cee5259082" title="Propagates .">rel</a>(*<span class="keyword">this</span>, result, <a class="code" href="group__TaskModelInt.html#gga2a4b3317737fd8ffb4dfdf43d1bb87aaa4f75043ce7dc5a599a6d157dd88179fb" title="Disequality ().">IRT_NQ</a>, 0, same);
<a name="l00199"></a>00199       <span class="keywordflow">return</span> result;
<a name="l00200"></a>00200     }
<a name="l00201"></a>00201     <span class="keywordflow">case</span> <a class="code" href="classColoredMatrix.html#a87a339431e00ffae46ec6d5cf193b539aba7712af42cd1d712da1938517efe71d" title="Use tuple set for same or 0.">SAME_OR_0_TUPLE_SET</a>: {
<a name="l00202"></a>00202       <span class="keyword">static</span> <a class="code" href="classGecode_1_1TupleSet.html" title="Class represeting a set of tuples.">TupleSet</a> table = <a class="code" href="classColoredMatrix.html#a2e20e24b71c1b8da4c89ee4f65f20d5a">same_or_0_tuple_set</a>(<a class="code" href="classColoredMatrix.html#a0bf3a3f4de5d3a0e4ef63138c3596c5e" title="Number of colors to use.">colors</a>);
<a name="l00203"></a>00203       <a class="code" href="classGecode_1_1IntVar.html" title="Integer variables.">IntVar</a> result(*<span class="keyword">this</span>, 0, <a class="code" href="classColoredMatrix.html#a0bf3a3f4de5d3a0e4ef63138c3596c5e" title="Number of colors to use.">colors</a>);
<a name="l00204"></a>00204       <a class="code" href="group__TaskModelIntExt.html#ga8d7535c82c78624ca3b418664391a8e2" title="Post domain consistent propagator for extensional constraint described by a DFA.">extensional</a>(*<span class="keyword">this</span>, <a class="code" href="classGecode_1_1IntVarArgs.html" title="Passing integer variables.">IntVarArgs</a>() &lt;&lt; a &lt;&lt; b &lt;&lt; result, table);
<a name="l00205"></a>00205       <span class="keywordflow">return</span> result;
<a name="l00206"></a>00206     }
<a name="l00207"></a>00207     <span class="keywordflow">case</span> <a class="code" href="classColoredMatrix.html#a87a339431e00ffae46ec6d5cf193b539a2c247d2634fdffb56baee8356f3ec4eb" title="Use dfa for same or 0.">SAME_OR_0_DFA</a>: {
<a name="l00208"></a>00208       <span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classGecode_1_1DFA.html" title="Deterministic finite automaton (DFA).">DFA</a> automaton = <a class="code" href="classColoredMatrix.html#a6a2808e10434d091d597b3d953b4cc1d">same_or_0_dfa</a>(<a class="code" href="classColoredMatrix.html#a0bf3a3f4de5d3a0e4ef63138c3596c5e" title="Number of colors to use.">colors</a>);
<a name="l00209"></a>00209       <a class="code" href="classGecode_1_1IntVar.html" title="Integer variables.">IntVar</a> result(*<span class="keyword">this</span>, 0, <a class="code" href="classColoredMatrix.html#a0bf3a3f4de5d3a0e4ef63138c3596c5e" title="Number of colors to use.">colors</a>);
<a name="l00210"></a>00210       <a class="code" href="group__TaskModelIntExt.html#ga8d7535c82c78624ca3b418664391a8e2" title="Post domain consistent propagator for extensional constraint described by a DFA.">extensional</a>(*<span class="keyword">this</span>, <a class="code" href="classGecode_1_1IntVarArgs.html" title="Passing integer variables.">IntVarArgs</a>() &lt;&lt; a &lt;&lt; b &lt;&lt; result, automaton);
<a name="l00211"></a>00211       <span class="keywordflow">return</span> result;
<a name="l00212"></a>00212     }
<a name="l00213"></a>00213     <span class="keywordflow">default</span>:
<a name="l00214"></a>00214       <a class="code" href="support_2macros_8hpp.html#a28e39a96a83a0676b5daab8e1f0e0e91" title="Assert that this command is never executed.">GECODE_NEVER</a>;
<a name="l00215"></a>00215       <span class="keywordflow">return</span> <a class="code" href="classGecode_1_1IntVar.html" title="Integer variables.">IntVar</a>(*<span class="keyword">this</span>, 0, 0);
<a name="l00216"></a>00216     }
<a name="l00217"></a>00217   }
<a name="l00218"></a>00218 
<a name="l00221"></a><a class="code" href="classColoredMatrix.html#a0f7b338caff5aedc53ef0d753296c9c3">00221</a>   <span class="keywordtype">void</span> <a class="code" href="classColoredMatrix.html#a0f7b338caff5aedc53ef0d753296c9c3">distinct_except_0</a>(<span class="keyword">const</span> <a class="code" href="classGecode_1_1IntVarArgs.html" title="Passing integer variables.">IntVarArgs</a>&amp; <a class="code" href="group__TaskTestIntDistinct.html#ga88d28911fdae6401c7fd912024898502">v</a>)
<a name="l00222"></a>00222   {
<a name="l00223"></a>00223     <span class="keywordflow">switch</span> (<a class="code" href="classColoredMatrix.html#a1ef65cd28556bfd08186c93aa1a80af2" title="Options for model.">opt</a>.<a class="code" href="classColoredMatrixOptions.html#a0a11837fac6c1a98bae427a7dd271057" title="Return how to implement distinct except 0.">distinct_except_0</a>()) {
<a name="l00224"></a>00224     <span class="keywordflow">case</span> <a class="code" href="classColoredMatrix.html#ad8e80ac561988a6ab4140a42c1f02255abbb284b0ea55b2bb21c57baaf061050b" title="Use reification for distinct except 0.">DISTINCT_EXCEPT_0_REIFIED</a>:
<a name="l00225"></a>00225       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="group__TaskTestIntBasic.html#gabad95d247d0ee9ca79d75951ab2567a4">i</a> = v.<a class="code" href="classGecode_1_1ArgArrayBase.html#ac2199052b84a2d224241aaaea11c572f" title="Return size of array (number of elements).">size</a>(); <a class="code" href="group__TaskTestIntBasic.html#gabad95d247d0ee9ca79d75951ab2567a4">i</a>--; ) {
<a name="l00226"></a>00226         <a class="code" href="classGecode_1_1BoolVar.html" title="Boolean integer variables.">BoolVar</a> viIsZero = <a class="code" href="group__TaskModelMiniModelPost.html#ga5ce56c4a337caf468548da9fb44534d3" title="Post Boolean expression and return its value.">expr</a>(*<span class="keyword">this</span>, v[<a class="code" href="group__TaskTestIntBasic.html#gabad95d247d0ee9ca79d75951ab2567a4">i</a>] == 0);
<a name="l00227"></a>00227         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = <a class="code" href="group__TaskTestIntBasic.html#gabad95d247d0ee9ca79d75951ab2567a4">i</a>; j--; ) {
<a name="l00228"></a>00228           <a class="code" href="group__TaskModelFloatRelFloat.html#ga5e46c82c7630132bc51178cee5259082" title="Propagates .">rel</a>(*<span class="keyword">this</span>, viIsZero || (v[<a class="code" href="group__TaskTestIntBasic.html#gabad95d247d0ee9ca79d75951ab2567a4">i</a>] != v[j]));
<a name="l00229"></a>00229         }
<a name="l00230"></a>00230       }
<a name="l00231"></a>00231       <span class="keywordflow">break</span>;
<a name="l00232"></a>00232     <span class="keywordflow">case</span> <a class="code" href="classColoredMatrix.html#ad8e80ac561988a6ab4140a42c1f02255a137f15ebc88244a87d3d6cd6d965449f" title="Use dfa for distinct except 0.">DISTINCT_EXCEPT_0_DFA</a>: {
<a name="l00233"></a>00233       <span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classGecode_1_1DFA.html" title="Deterministic finite automaton (DFA).">DFA</a> automaton = <a class="code" href="classColoredMatrix.html#a6668e0a2c5745d1011898633e0c6c1d5">distinct_except_0_dfa</a>(<a class="code" href="classColoredMatrix.html#a0bf3a3f4de5d3a0e4ef63138c3596c5e" title="Number of colors to use.">colors</a>);
<a name="l00234"></a>00234       <a class="code" href="group__TaskModelIntExt.html#ga8d7535c82c78624ca3b418664391a8e2" title="Post domain consistent propagator for extensional constraint described by a DFA.">extensional</a>(*<span class="keyword">this</span>, v, automaton);
<a name="l00235"></a>00235       <span class="keywordflow">break</span>;
<a name="l00236"></a>00236     }
<a name="l00237"></a>00237     <span class="keywordflow">case</span> <a class="code" href="classColoredMatrix.html#ad8e80ac561988a6ab4140a42c1f02255a8672fc6ba713a0ed6cc0277e5b18b9a2" title="Use count for distinct except 0.">DISTINCT_EXCEPT_0_COUNT</a>: {
<a name="l00238"></a>00238       <span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classGecode_1_1ArgArray.html">IntSetArgs</a> counts = <a class="code" href="classColoredMatrix.html#ad13f7de7462ca8da871dc34acf534c3f">distinct_except_0_counts</a>(<a class="code" href="classColoredMatrix.html#a0bf3a3f4de5d3a0e4ef63138c3596c5e" title="Number of colors to use.">colors</a>, <a class="code" href="namespaceGecode_1_1Float_1_1Limits.html#a1fec0e1ef9b99c2d38038abfb6586e7a" title="Largest allowed float value.">std::max</a>(<a class="code" href="classColoredMatrix.html#ab89519480425bc2f20d72456439b0b85" title="Width of matrix.">width</a>, <a class="code" href="classColoredMatrix.html#a70c739a7485bc48e578abbb0a0d44cc3" title="Height of matrix.">height</a>));
<a name="l00239"></a>00239       <a class="code" href="group__TaskModelIntCount.html#ga234712b7a1a38bffd68bbf8ee770d653" title="Post propagator for .">count</a>(*<span class="keyword">this</span>, v, counts, <a class="code" href="classColoredMatrix.html#a1ef65cd28556bfd08186c93aa1a80af2" title="Options for model.">opt</a>.<a class="code" href="classGecode_1_1Options.html#a8b94dee4ff189ef5e3ebb99d3ff1d500" title="Set default integer propagation level.">ipl</a>());
<a name="l00240"></a>00240       <span class="keywordflow">break</span>;
<a name="l00241"></a>00241     }
<a name="l00242"></a>00242     }
<a name="l00243"></a>00243   }
<a name="l00244"></a>00244 
<a name="l00247"></a><a class="code" href="classColoredMatrix.html#a4d58f5963e3c89a75248dc825c818f7f">00247</a>   <span class="keywordtype">void</span> <a class="code" href="classColoredMatrix.html#a4d58f5963e3c89a75248dc825c818f7f">not_all_equal</a>(<span class="keyword">const</span> <a class="code" href="classGecode_1_1IntVarArgs.html" title="Passing integer variables.">IntVarArgs</a>&amp; <a class="code" href="group__TaskTestIntDistinct.html#ga88d28911fdae6401c7fd912024898502">v</a>)
<a name="l00248"></a>00248   {
<a name="l00249"></a>00249     <span class="keywordflow">switch</span> (<a class="code" href="classColoredMatrix.html#a1ef65cd28556bfd08186c93aa1a80af2" title="Options for model.">opt</a>.<a class="code" href="classColoredMatrixOptions.html#a983681632dec9c64ece0325e19afc8b3" title="Return how to implement not all equals.">not_all_equal</a>()) {
<a name="l00250"></a>00250     <span class="keywordflow">case</span> <a class="code" href="classColoredMatrix.html#a6784f1f7bb2a8bd19ac054a4631b7d04a0b7dcdb4f624418eb7323e9d26359a5c" title="Use direct constraint for implemeting not all equals.">NOT_ALL_EQUAL_NQ</a>: {
<a name="l00251"></a>00251       <a class="code" href="group__TaskModelFloatRelFloat.html#ga5e46c82c7630132bc51178cee5259082" title="Propagates .">rel</a>(*<span class="keyword">this</span>, v, <a class="code" href="group__TaskModelInt.html#gga2a4b3317737fd8ffb4dfdf43d1bb87aaa4f75043ce7dc5a599a6d157dd88179fb" title="Disequality ().">IRT_NQ</a>);
<a name="l00252"></a>00252       <span class="keywordflow">break</span>;
<a name="l00253"></a>00253     }
<a name="l00254"></a>00254     <span class="keywordflow">case</span> <a class="code" href="classColoredMatrix.html#a6784f1f7bb2a8bd19ac054a4631b7d04a82e61722b0f7bb290fb6d2796b37ed63" title="Use naive reification for implemeting not all equals.">NOT_ALL_EQUAL_NAIVE</a>: {
<a name="l00255"></a>00255       <span class="comment">// At least one pair must be different.</span>
<a name="l00256"></a>00256       <span class="comment">// Bad decomposition since too many disjuncts are created.</span>
<a name="l00257"></a>00257       <a class="code" href="classGecode_1_1BoolVarArgs.html" title="Passing Boolean variables.">BoolVarArgs</a> disequalities;
<a name="l00258"></a>00258       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="group__TaskTestIntBasic.html#gabad95d247d0ee9ca79d75951ab2567a4">i</a> = v.<a class="code" href="classGecode_1_1ArgArrayBase.html#ac2199052b84a2d224241aaaea11c572f" title="Return size of array (number of elements).">size</a>(); <a class="code" href="group__TaskTestIntBasic.html#gabad95d247d0ee9ca79d75951ab2567a4">i</a>--; )
<a name="l00259"></a>00259         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = <a class="code" href="group__TaskTestIntBasic.html#gabad95d247d0ee9ca79d75951ab2567a4">i</a>; j--; )
<a name="l00260"></a>00260           disequalities &lt;&lt; <a class="code" href="group__TaskModelMiniModelPost.html#ga5ce56c4a337caf468548da9fb44534d3" title="Post Boolean expression and return its value.">expr</a>(*<span class="keyword">this</span>, v[<a class="code" href="group__TaskTestIntBasic.html#gabad95d247d0ee9ca79d75951ab2567a4">i</a>] != v[j]);
<a name="l00261"></a>00261       <a class="code" href="group__TaskModelFloatRelFloat.html#ga5e46c82c7630132bc51178cee5259082" title="Propagates .">rel</a>(*<span class="keyword">this</span>, <a class="code" href="group__TaskModelInt.html#gga90da089a2d573ef55f5f8ee3a8bd0c67a38839a059e6136d2b97776cd7cc10947" title="Disjunction.">BOT_OR</a>, disequalities, 1);
<a name="l00262"></a>00262       <span class="keywordflow">break</span>;
<a name="l00263"></a>00263     }
<a name="l00264"></a>00264     <span class="keywordflow">case</span> <a class="code" href="classColoredMatrix.html#a6784f1f7bb2a8bd19ac054a4631b7d04a342d2a4f70954b1d70585ccdda36e821" title="Use reification for implemeting not all equals.">NOT_ALL_EQUAL_REIFIED</a>: {
<a name="l00265"></a>00265       <span class="comment">// It must not be the case that all are equal</span>
<a name="l00266"></a>00266       <a class="code" href="classGecode_1_1BoolVarArgs.html" title="Passing Boolean variables.">BoolVarArgs</a> equalities;
<a name="l00267"></a>00267       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="group__TaskTestIntBasic.html#gabad95d247d0ee9ca79d75951ab2567a4">i</a> = 0; <a class="code" href="group__TaskTestIntBasic.html#gabad95d247d0ee9ca79d75951ab2567a4">i</a> &lt; v.<a class="code" href="classGecode_1_1ArgArrayBase.html#ac2199052b84a2d224241aaaea11c572f" title="Return size of array (number of elements).">size</a>()-1; ++<a class="code" href="group__TaskTestIntBasic.html#gabad95d247d0ee9ca79d75951ab2567a4">i</a>)
<a name="l00268"></a>00268         equalities &lt;&lt; <a class="code" href="group__TaskModelMiniModelPost.html#ga5ce56c4a337caf468548da9fb44534d3" title="Post Boolean expression and return its value.">expr</a>(*<span class="keyword">this</span>, v[<a class="code" href="group__TaskTestIntBasic.html#gabad95d247d0ee9ca79d75951ab2567a4">i</a>] == v[<a class="code" href="group__TaskTestIntBasic.html#gabad95d247d0ee9ca79d75951ab2567a4">i</a>+1]);
<a name="l00269"></a>00269       <a class="code" href="group__TaskModelFloatRelFloat.html#ga5e46c82c7630132bc51178cee5259082" title="Propagates .">rel</a>(*<span class="keyword">this</span>, <a class="code" href="group__TaskModelInt.html#gga90da089a2d573ef55f5f8ee3a8bd0c67ac72c9e0d123adfa3c1f81c8143a9c92a" title="Conjunction.">BOT_AND</a>, equalities, 0);
<a name="l00270"></a>00270       <span class="keywordflow">break</span>;
<a name="l00271"></a>00271     }
<a name="l00272"></a>00272     <span class="keywordflow">case</span> <a class="code" href="classColoredMatrix.html#a6784f1f7bb2a8bd19ac054a4631b7d04a5b2867cd6b07eba70bd3f58454e3fe9a" title="Use nvalues for implementing not all equals.">NOT_ALL_EQUAL_NVALUES</a>:
<a name="l00273"></a>00273       <span class="comment">// More than one number</span>
<a name="l00274"></a>00274       <a class="code" href="group__TaskModelIntNValues.html#gacd1b42e9a9c421b16dfda7bb087b0c3c" title="Post propagator for .">nvalues</a>(*<span class="keyword">this</span>, v, <a class="code" href="group__TaskModelInt.html#gga2a4b3317737fd8ffb4dfdf43d1bb87aaadcb883cd086e84f87ba3b4f4cbb1b681" title="Greater ().">IRT_GR</a>, 1);
<a name="l00275"></a>00275       <span class="keywordflow">break</span>;
<a name="l00276"></a>00276     <span class="keywordflow">case</span> <a class="code" href="classColoredMatrix.html#a6784f1f7bb2a8bd19ac054a4631b7d04ae6a625b5242d4193d9ed5fdf7d3712dc" title="Use count for implementing not all equals.">NOT_ALL_EQUAL_COUNT</a>:
<a name="l00277"></a>00277       <span class="comment">// No number in all positions</span>
<a name="l00278"></a>00278       <a class="code" href="group__TaskModelIntCount.html#ga234712b7a1a38bffd68bbf8ee770d653" title="Post propagator for .">count</a>(*<span class="keyword">this</span>, v, <a class="code" href="classGecode_1_1IntSet.html" title="Integer sets.">IntSet</a>(0, v.<a class="code" href="classGecode_1_1ArgArrayBase.html#ac2199052b84a2d224241aaaea11c572f" title="Return size of array (number of elements).">size</a>()-1), IntArgs::create(<a class="code" href="classColoredMatrix.html#a0bf3a3f4de5d3a0e4ef63138c3596c5e" title="Number of colors to use.">colors</a>, 1), <a class="code" href="classColoredMatrix.html#a1ef65cd28556bfd08186c93aa1a80af2" title="Options for model.">opt</a>.<a class="code" href="classGecode_1_1Options.html#a8b94dee4ff189ef5e3ebb99d3ff1d500" title="Set default integer propagation level.">ipl</a>());
<a name="l00279"></a>00279       <span class="keywordflow">break</span>;
<a name="l00280"></a>00280     <span class="keywordflow">case</span> <a class="code" href="classColoredMatrix.html#a6784f1f7bb2a8bd19ac054a4631b7d04af171bf713e70587615f1f3bb4d3cd9cf" title="Use dfa for implementing not all equals.">NOT_ALL_EQUAL_DFA</a>: {
<a name="l00281"></a>00281       <span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classGecode_1_1DFA.html" title="Deterministic finite automaton (DFA).">DFA</a> automaton = <a class="code" href="classColoredMatrix.html#a91ff2b983666e6755f0b2330c36ff5e1">not_all_equal_dfa</a>(<a class="code" href="classColoredMatrix.html#a0bf3a3f4de5d3a0e4ef63138c3596c5e" title="Number of colors to use.">colors</a>);
<a name="l00282"></a>00282       <a class="code" href="group__TaskModelIntExt.html#ga8d7535c82c78624ca3b418664391a8e2" title="Post domain consistent propagator for extensional constraint described by a DFA.">extensional</a>(*<span class="keyword">this</span>, v, automaton);
<a name="l00283"></a>00283       <span class="keywordflow">break</span>;
<a name="l00284"></a>00284     }
<a name="l00285"></a>00285     }
<a name="l00286"></a>00286   }
<a name="l00287"></a>00287 
<a name="l00291"></a><a class="code" href="classColoredMatrix.html#a512f90a54fa5985a12f12135d9736f4a">00291</a>   <span class="keywordtype">void</span> <a class="code" href="classColoredMatrix.html#a512f90a54fa5985a12f12135d9736f4a">no_monochrome_rectangle</a>(<a class="code" href="classGecode_1_1IntVarArgs.html" title="Passing integer variables.">IntVarArgs</a> <a class="code" href="group__TaskTestIntDistinct.html#gad95fdbe3290c704eae3c7160a853e1bb">v1</a>, <a class="code" href="classGecode_1_1IntVarArgs.html" title="Passing integer variables.">IntVarArgs</a> <a class="code" href="group__TaskTestIntDistinct.html#ga41b4e38e251b16b937188495c45fd3a5">v2</a>) {
<a name="l00292"></a>00292     <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> length = v1.<a class="code" href="classGecode_1_1ArgArrayBase.html#ac2199052b84a2d224241aaaea11c572f" title="Return size of array (number of elements).">size</a>();
<a name="l00293"></a>00293     <span class="keywordflow">switch</span> (<a class="code" href="classColoredMatrix.html#a1ef65cd28556bfd08186c93aa1a80af2" title="Options for model.">opt</a>.<a class="code" href="classColoredMatrixOptions.html#a714c9cc223cb2d0baae066b4f7c6e7c1" title="Return how to implement distinct except 0.">no_monochrome_rectangle</a>()) {
<a name="l00294"></a>00294     <span class="keywordflow">case</span> <a class="code" href="classColoredMatrix.html#a71a600eb749c244e6ddcefa4933df62aae3abb66d8674998593df7a64b9355d11" title="Use decomposition for no monochrome rectangle.">NO_MONOCHROME_DECOMPOSITION</a>: {
<a name="l00295"></a>00295       <a class="code" href="classGecode_1_1IntVarArgs.html" title="Passing integer variables.">IntVarArgs</a> z(length);
<a name="l00296"></a>00296       <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="group__TaskTestIntBasic.html#gabad95d247d0ee9ca79d75951ab2567a4">i</a> = 0; <a class="code" href="group__TaskTestIntBasic.html#gabad95d247d0ee9ca79d75951ab2567a4">i</a> &lt; length; ++<a class="code" href="group__TaskTestIntBasic.html#gabad95d247d0ee9ca79d75951ab2567a4">i</a>) {
<a name="l00297"></a>00297         z[<a class="code" href="group__TaskTestIntBasic.html#gabad95d247d0ee9ca79d75951ab2567a4">i</a>] = <a class="code" href="classColoredMatrix.html#a09056b0d432231608c383c52763ce771">same_or_0</a>(v1[<a class="code" href="group__TaskTestIntBasic.html#gabad95d247d0ee9ca79d75951ab2567a4">i</a>], v2[i]);
<a name="l00298"></a>00298       }
<a name="l00299"></a>00299       <a class="code" href="classColoredMatrix.html#a0f7b338caff5aedc53ef0d753296c9c3">distinct_except_0</a>(z);
<a name="l00300"></a>00300       <span class="keywordflow">break</span>;
<a name="l00301"></a>00301     }
<a name="l00302"></a>00302     <span class="keywordflow">case</span> <a class="code" href="classColoredMatrix.html#a71a600eb749c244e6ddcefa4933df62aa7134a7d7a2caeb132baeddea883c24ea" title="Use dfa for no monochrome rectangle.">NO_MONOCHROME_DFA</a>: {
<a name="l00303"></a>00303       <span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classGecode_1_1DFA.html" title="Deterministic finite automaton (DFA).">DFA</a> automaton = <a class="code" href="classColoredMatrix.html#ac432949382b131f300edb78519f57c6d">no_monochrome_rectangle_dfa</a>(<a class="code" href="classColoredMatrix.html#a0bf3a3f4de5d3a0e4ef63138c3596c5e" title="Number of colors to use.">colors</a>);
<a name="l00304"></a>00304       <a class="code" href="classGecode_1_1IntVarArgs.html" title="Passing integer variables.">IntVarArgs</a> z(2*length);
<a name="l00305"></a>00305       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="group__TaskTestIntBasic.html#gabad95d247d0ee9ca79d75951ab2567a4">i</a> = length; <a class="code" href="group__TaskTestIntBasic.html#gabad95d247d0ee9ca79d75951ab2567a4">i</a>--; ) {
<a name="l00306"></a>00306         z[2*<a class="code" href="group__TaskTestIntBasic.html#gabad95d247d0ee9ca79d75951ab2567a4">i</a> + 0] = v1[<a class="code" href="group__TaskTestIntBasic.html#gabad95d247d0ee9ca79d75951ab2567a4">i</a>];
<a name="l00307"></a>00307         z[2*<a class="code" href="group__TaskTestIntBasic.html#gabad95d247d0ee9ca79d75951ab2567a4">i</a> + 1] = v2[<a class="code" href="group__TaskTestIntBasic.html#gabad95d247d0ee9ca79d75951ab2567a4">i</a>];
<a name="l00308"></a>00308       }
<a name="l00309"></a>00309       <a class="code" href="group__TaskModelIntExt.html#ga8d7535c82c78624ca3b418664391a8e2" title="Post domain consistent propagator for extensional constraint described by a DFA.">extensional</a>(*<span class="keyword">this</span>, z, automaton);
<a name="l00310"></a>00310       <span class="keywordflow">break</span>;
<a name="l00311"></a>00311     }
<a name="l00312"></a>00312     }
<a name="l00313"></a>00313   }
<a name="l00314"></a>00314 
<a name="l00315"></a>00315 
<a name="l00316"></a>00316 <span class="keyword">public</span>:
<a name="l00318"></a>00318   <span class="keyword">enum</span> {
<a name="l00319"></a><a class="code" href="classColoredMatrix.html#a8610361ace3926a3422ee08fdfd6791da49b3ebb9de70358a041817cda17a5290">00319</a>     <a class="code" href="classColoredMatrix.html#a8610361ace3926a3422ee08fdfd6791da49b3ebb9de70358a041817cda17a5290" title="Find solution.">SEARCH_DFS</a>, 
<a name="l00320"></a><a class="code" href="classColoredMatrix.html#a8610361ace3926a3422ee08fdfd6791dad56ad889017f68853739bdcd5e406da1">00320</a>     <a class="code" href="classColoredMatrix.html#a8610361ace3926a3422ee08fdfd6791dad56ad889017f68853739bdcd5e406da1" title="Find optimal solution.">SEARCH_BAB</a>, 
<a name="l00321"></a>00321   };
<a name="l00323"></a>00323   <span class="keyword">enum</span> {
<a name="l00324"></a><a class="code" href="classColoredMatrix.html#a9f5867f52a3a937b7e842201bf9e4befa961d988d5b0a61fd1859e0f2d352d0ad">00324</a>     <a class="code" href="classColoredMatrix.html#a9f5867f52a3a937b7e842201bf9e4befa961d988d5b0a61fd1859e0f2d352d0ad" title="No symmetry breaking.">SYMMETRY_NONE</a>   = 0,   
<a name="l00325"></a><a class="code" href="classColoredMatrix.html#a9f5867f52a3a937b7e842201bf9e4befa24f12ba23bd9de8f8f998d4659f5547d">00325</a>     <a class="code" href="classColoredMatrix.html#a9f5867f52a3a937b7e842201bf9e4befa24f12ba23bd9de8f8f998d4659f5547d" title="Order rows and columns of matrix.">SYMMETRY_MATRIX</a> = 1, 
<a name="l00326"></a><a class="code" href="classColoredMatrix.html#a9f5867f52a3a937b7e842201bf9e4befaf557508a3f7633a1444bfed71cfd0745">00326</a>     <a class="code" href="classColoredMatrix.html#a9f5867f52a3a937b7e842201bf9e4befaf557508a3f7633a1444bfed71cfd0745" title="Order value occurences.">SYMMETRY_VALUES</a> = 2, 
<a name="l00327"></a>00327   };
<a name="l00329"></a>00329   <span class="keyword">enum</span> {
<a name="l00330"></a><a class="code" href="classColoredMatrix.html#aac0995f01b988f9c84b5b0d68da7a20fab14756dbd9fb418fcb083b133103eb60">00330</a>     <a class="code" href="classColoredMatrix.html#aac0995f01b988f9c84b5b0d68da7a20fab14756dbd9fb418fcb083b133103eb60" title="Use model on corner combinations.">MODEL_CORNERS</a> = 1,   
<a name="l00331"></a><a class="code" href="classColoredMatrix.html#aac0995f01b988f9c84b5b0d68da7a20fa960331c308662fa76392a5ad8bf4a736">00331</a>     <a class="code" href="classColoredMatrix.html#aac0995f01b988f9c84b5b0d68da7a20fa960331c308662fa76392a5ad8bf4a736" title="Use model on pairs of rows.">MODEL_ROWS</a>    = 2,      
<a name="l00332"></a><a class="code" href="classColoredMatrix.html#aac0995f01b988f9c84b5b0d68da7a20fa3d230cf4c4317bc5249f8ccdd992e282">00332</a>     <a class="code" href="classColoredMatrix.html#aac0995f01b988f9c84b5b0d68da7a20fa3d230cf4c4317bc5249f8ccdd992e282" title="Use model on pairs of columns.">MODEL_COLUMNS</a> = 4,   
<a name="l00333"></a>00333   };
<a name="l00335"></a>00335   <span class="keyword">enum</span> {
<a name="l00336"></a><a class="code" href="classColoredMatrix.html#a6784f1f7bb2a8bd19ac054a4631b7d04a0b7dcdb4f624418eb7323e9d26359a5c">00336</a>     <a class="code" href="classColoredMatrix.html#a6784f1f7bb2a8bd19ac054a4631b7d04a0b7dcdb4f624418eb7323e9d26359a5c" title="Use direct constraint for implemeting not all equals.">NOT_ALL_EQUAL_NQ</a>,      
<a name="l00337"></a><a class="code" href="classColoredMatrix.html#a6784f1f7bb2a8bd19ac054a4631b7d04a82e61722b0f7bb290fb6d2796b37ed63">00337</a>     <a class="code" href="classColoredMatrix.html#a6784f1f7bb2a8bd19ac054a4631b7d04a82e61722b0f7bb290fb6d2796b37ed63" title="Use naive reification for implemeting not all equals.">NOT_ALL_EQUAL_NAIVE</a>,   
<a name="l00338"></a><a class="code" href="classColoredMatrix.html#a6784f1f7bb2a8bd19ac054a4631b7d04a342d2a4f70954b1d70585ccdda36e821">00338</a>     <a class="code" href="classColoredMatrix.html#a6784f1f7bb2a8bd19ac054a4631b7d04a342d2a4f70954b1d70585ccdda36e821" title="Use reification for implemeting not all equals.">NOT_ALL_EQUAL_REIFIED</a>, 
<a name="l00339"></a><a class="code" href="classColoredMatrix.html#a6784f1f7bb2a8bd19ac054a4631b7d04a5b2867cd6b07eba70bd3f58454e3fe9a">00339</a>     <a class="code" href="classColoredMatrix.html#a6784f1f7bb2a8bd19ac054a4631b7d04a5b2867cd6b07eba70bd3f58454e3fe9a" title="Use nvalues for implementing not all equals.">NOT_ALL_EQUAL_NVALUES</a>, 
<a name="l00340"></a><a class="code" href="classColoredMatrix.html#a6784f1f7bb2a8bd19ac054a4631b7d04ae6a625b5242d4193d9ed5fdf7d3712dc">00340</a>     <a class="code" href="classColoredMatrix.html#a6784f1f7bb2a8bd19ac054a4631b7d04ae6a625b5242d4193d9ed5fdf7d3712dc" title="Use count for implementing not all equals.">NOT_ALL_EQUAL_COUNT</a>,   
<a name="l00341"></a><a class="code" href="classColoredMatrix.html#a6784f1f7bb2a8bd19ac054a4631b7d04af171bf713e70587615f1f3bb4d3cd9cf">00341</a>     <a class="code" href="classColoredMatrix.html#a6784f1f7bb2a8bd19ac054a4631b7d04af171bf713e70587615f1f3bb4d3cd9cf" title="Use dfa for implementing not all equals.">NOT_ALL_EQUAL_DFA</a>,     
<a name="l00342"></a>00342   };
<a name="l00344"></a>00344   <span class="keyword">enum</span> {
<a name="l00345"></a><a class="code" href="classColoredMatrix.html#a87a339431e00ffae46ec6d5cf193b539af78e69f054fb090618107532af0d9e1a">00345</a>     <a class="code" href="classColoredMatrix.html#a87a339431e00ffae46ec6d5cf193b539af78e69f054fb090618107532af0d9e1a" title="Use reification for same or 0.">SAME_OR_0_REIFIED</a>,   
<a name="l00346"></a><a class="code" href="classColoredMatrix.html#a87a339431e00ffae46ec6d5cf193b539a2c247d2634fdffb56baee8356f3ec4eb">00346</a>     <a class="code" href="classColoredMatrix.html#a87a339431e00ffae46ec6d5cf193b539a2c247d2634fdffb56baee8356f3ec4eb" title="Use dfa for same or 0.">SAME_OR_0_DFA</a>,       
<a name="l00347"></a><a class="code" href="classColoredMatrix.html#a87a339431e00ffae46ec6d5cf193b539aba7712af42cd1d712da1938517efe71d">00347</a>     <a class="code" href="classColoredMatrix.html#a87a339431e00ffae46ec6d5cf193b539aba7712af42cd1d712da1938517efe71d" title="Use tuple set for same or 0.">SAME_OR_0_TUPLE_SET</a>, 
<a name="l00348"></a>00348   };
<a name="l00350"></a>00350   <span class="keyword">enum</span> {
<a name="l00351"></a><a class="code" href="classColoredMatrix.html#ad8e80ac561988a6ab4140a42c1f02255abbb284b0ea55b2bb21c57baaf061050b">00351</a>     <a class="code" href="classColoredMatrix.html#ad8e80ac561988a6ab4140a42c1f02255abbb284b0ea55b2bb21c57baaf061050b" title="Use reification for distinct except 0.">DISTINCT_EXCEPT_0_REIFIED</a>, 
<a name="l00352"></a><a class="code" href="classColoredMatrix.html#ad8e80ac561988a6ab4140a42c1f02255a137f15ebc88244a87d3d6cd6d965449f">00352</a>     <a class="code" href="classColoredMatrix.html#ad8e80ac561988a6ab4140a42c1f02255a137f15ebc88244a87d3d6cd6d965449f" title="Use dfa for distinct except 0.">DISTINCT_EXCEPT_0_DFA</a>,     
<a name="l00353"></a><a class="code" href="classColoredMatrix.html#ad8e80ac561988a6ab4140a42c1f02255a8672fc6ba713a0ed6cc0277e5b18b9a2">00353</a>     <a class="code" href="classColoredMatrix.html#ad8e80ac561988a6ab4140a42c1f02255a8672fc6ba713a0ed6cc0277e5b18b9a2" title="Use count for distinct except 0.">DISTINCT_EXCEPT_0_COUNT</a>,   
<a name="l00354"></a>00354   };
<a name="l00356"></a>00356   <span class="keyword">enum</span> {
<a name="l00357"></a><a class="code" href="classColoredMatrix.html#a71a600eb749c244e6ddcefa4933df62aae3abb66d8674998593df7a64b9355d11">00357</a>     <a class="code" href="classColoredMatrix.html#a71a600eb749c244e6ddcefa4933df62aae3abb66d8674998593df7a64b9355d11" title="Use decomposition for no monochrome rectangle.">NO_MONOCHROME_DECOMPOSITION</a>, 
<a name="l00358"></a><a class="code" href="classColoredMatrix.html#a71a600eb749c244e6ddcefa4933df62aa7134a7d7a2caeb132baeddea883c24ea">00358</a>     <a class="code" href="classColoredMatrix.html#a71a600eb749c244e6ddcefa4933df62aa7134a7d7a2caeb132baeddea883c24ea" title="Use dfa for no monochrome rectangle.">NO_MONOCHROME_DFA</a>,           
<a name="l00359"></a>00359   };
<a name="l00360"></a>00360 
<a name="l00361"></a>00361 
<a name="l00363"></a><a class="code" href="classColoredMatrix.html#ac6f7371cbf84b37010a030bb4c404585">00363</a>   <a class="code" href="classColoredMatrix.html#ac6f7371cbf84b37010a030bb4c404585" title="Actual model.">ColoredMatrix</a>(<span class="keyword">const</span> <a class="code" href="classColoredMatrixOptions.html" title="ColoredMatrixOptions.">ColoredMatrixOptions</a>&amp; opt0)
<a name="l00364"></a>00364     : <a class="code" href="classGecode_1_1Driver_1_1ScriptBase.html" title="Parametric base-class for scripts.">IntMinimizeScript</a>(opt0),
<a name="l00365"></a>00365       <a class="code" href="classColoredMatrix.html#a1ef65cd28556bfd08186c93aa1a80af2" title="Options for model.">opt</a>(opt0), <a class="code" href="classColoredMatrix.html#a70c739a7485bc48e578abbb0a0d44cc3" title="Height of matrix.">height</a>(<a class="code" href="classColoredMatrix.html#a1ef65cd28556bfd08186c93aa1a80af2" title="Options for model.">opt</a>.<a class="code" href="classColoredMatrix.html#a70c739a7485bc48e578abbb0a0d44cc3" title="Height of matrix.">height</a>()), <a class="code" href="classColoredMatrix.html#ab89519480425bc2f20d72456439b0b85" title="Width of matrix.">width</a>(<a class="code" href="classColoredMatrix.html#a1ef65cd28556bfd08186c93aa1a80af2" title="Options for model.">opt</a>.<a class="code" href="classColoredMatrix.html#ab89519480425bc2f20d72456439b0b85" title="Width of matrix.">width</a>()), <a class="code" href="classColoredMatrix.html#a0bf3a3f4de5d3a0e4ef63138c3596c5e" title="Number of colors to use.">colors</a>(<a class="code" href="classColoredMatrix.html#a1ef65cd28556bfd08186c93aa1a80af2" title="Options for model.">opt</a>.<a class="code" href="classColoredMatrix.html#a0bf3a3f4de5d3a0e4ef63138c3596c5e" title="Number of colors to use.">colors</a>()),
<a name="l00366"></a>00366       <a class="code" href="classColoredMatrix.html#abd346860d7f4d0133e2b1b86260f71ca" title="Array for matrix variables.">x</a>(*this, <a class="code" href="classColoredMatrix.html#a70c739a7485bc48e578abbb0a0d44cc3" title="Height of matrix.">height</a>*<a class="code" href="classColoredMatrix.html#ab89519480425bc2f20d72456439b0b85" title="Width of matrix.">width</a>, 1, <a class="code" href="classColoredMatrix.html#a0bf3a3f4de5d3a0e4ef63138c3596c5e" title="Number of colors to use.">colors</a>),
<a name="l00367"></a>00367       <a class="code" href="classColoredMatrix.html#ae39db00cbf1e65ae1f15e82762346825" title="Maximum color used.">max_color</a>(*this, 1, <a class="code" href="classColoredMatrix.html#a0bf3a3f4de5d3a0e4ef63138c3596c5e" title="Number of colors to use.">colors</a>)
<a name="l00368"></a>00368   {
<a name="l00369"></a>00369 
<a name="l00370"></a>00370     <a class="code" href="namespaceGecode_1_1Float_1_1Limits.html#a1fec0e1ef9b99c2d38038abfb6586e7a" title="Largest allowed float value.">max</a>(*<span class="keyword">this</span>, <a class="code" href="classColoredMatrix.html#abd346860d7f4d0133e2b1b86260f71ca" title="Array for matrix variables.">x</a>, <a class="code" href="classColoredMatrix.html#ae39db00cbf1e65ae1f15e82762346825" title="Maximum color used.">max_color</a>);
<a name="l00371"></a>00371 
<a name="l00372"></a>00372     <a class="code" href="classGecode_1_1Matrix.html" title="Matrix-interface for arrays.">Matrix&lt;IntVarArray&gt;</a> m(<a class="code" href="classColoredMatrix.html#abd346860d7f4d0133e2b1b86260f71ca" title="Array for matrix variables.">x</a>, <a class="code" href="classColoredMatrix.html#ab89519480425bc2f20d72456439b0b85" title="Width of matrix.">width</a>, <a class="code" href="classColoredMatrix.html#a70c739a7485bc48e578abbb0a0d44cc3" title="Height of matrix.">height</a>);
<a name="l00373"></a>00373 
<a name="l00374"></a>00374     <span class="comment">// For each pair of columns and rows, the intersections may not be equal.</span>
<a name="l00375"></a>00375     <span class="keywordflow">if</span> (<a class="code" href="classColoredMatrix.html#a1ef65cd28556bfd08186c93aa1a80af2" title="Options for model.">opt</a>.<a class="code" href="classGecode_1_1Options.html#aa85cc40b94b449c2a8bea2c0f7649d9b" title="Set default model value.">model</a>() &amp; <a class="code" href="classColoredMatrix.html#aac0995f01b988f9c84b5b0d68da7a20fab14756dbd9fb418fcb083b133103eb60" title="Use model on corner combinations.">MODEL_CORNERS</a>) {
<a name="l00376"></a>00376       <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> c1 = 0; c1 &lt; <a class="code" href="classColoredMatrix.html#ab89519480425bc2f20d72456439b0b85" title="Width of matrix.">width</a>; ++c1) {
<a name="l00377"></a>00377         <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> c2 = c1+1; c2 &lt; width; ++c2) {
<a name="l00378"></a>00378           <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> r1 = 0; r1 &lt; <a class="code" href="classColoredMatrix.html#a70c739a7485bc48e578abbb0a0d44cc3" title="Height of matrix.">height</a>; ++r1) {
<a name="l00379"></a>00379             <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> r2 = r1+1; r2 &lt; height; ++r2) {
<a name="l00380"></a>00380               <a class="code" href="classColoredMatrix.html#a4d58f5963e3c89a75248dc825c818f7f">not_all_equal</a>(<a class="code" href="classGecode_1_1IntVarArgs.html" title="Passing integer variables.">IntVarArgs</a>() &lt;&lt; m(c1,r1) &lt;&lt; m(c1,r2) &lt;&lt; m(c2,r1) &lt;&lt; m(c2,r2));
<a name="l00381"></a>00381             }
<a name="l00382"></a>00382           }
<a name="l00383"></a>00383         }
<a name="l00384"></a>00384       }
<a name="l00385"></a>00385     }
<a name="l00386"></a>00386     <span class="comment">// Given two rows/columns, construct variables representing if</span>
<a name="l00387"></a>00387     <span class="comment">// the corresponding places are equal (and if so, what value).</span>
<a name="l00388"></a>00388     <span class="comment">// For the new values, no non-zero value may appear more than</span>
<a name="l00389"></a>00389     <span class="comment">// once.</span>
<a name="l00390"></a>00390     <span class="keywordflow">if</span> (<a class="code" href="classColoredMatrix.html#a1ef65cd28556bfd08186c93aa1a80af2" title="Options for model.">opt</a>.<a class="code" href="classGecode_1_1Options.html#aa85cc40b94b449c2a8bea2c0f7649d9b" title="Set default model value.">model</a>() &amp; <a class="code" href="classColoredMatrix.html#aac0995f01b988f9c84b5b0d68da7a20fa960331c308662fa76392a5ad8bf4a736" title="Use model on pairs of rows.">MODEL_ROWS</a>) {
<a name="l00391"></a>00391       <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> r1 = 0; r1 &lt; <a class="code" href="classColoredMatrix.html#a70c739a7485bc48e578abbb0a0d44cc3" title="Height of matrix.">height</a>; ++r1) {
<a name="l00392"></a>00392         <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> r2 = r1+1; r2 &lt; height; ++r2) {
<a name="l00393"></a>00393           <a class="code" href="classColoredMatrix.html#a512f90a54fa5985a12f12135d9736f4a">no_monochrome_rectangle</a>(m.<a class="code" href="classGecode_1_1Matrix.html#ae093bbbbaf763334ca23dc8f84dcfdbb" title="Access row r.">row</a>(r1), m.<a class="code" href="classGecode_1_1Matrix.html#ae093bbbbaf763334ca23dc8f84dcfdbb" title="Access row r.">row</a>(r2));
<a name="l00394"></a>00394         }
<a name="l00395"></a>00395       }
<a name="l00396"></a>00396     }
<a name="l00397"></a>00397     <span class="keywordflow">if</span> (<a class="code" href="classColoredMatrix.html#a1ef65cd28556bfd08186c93aa1a80af2" title="Options for model.">opt</a>.<a class="code" href="classGecode_1_1Options.html#aa85cc40b94b449c2a8bea2c0f7649d9b" title="Set default model value.">model</a>() &amp; <a class="code" href="classColoredMatrix.html#aac0995f01b988f9c84b5b0d68da7a20fa3d230cf4c4317bc5249f8ccdd992e282" title="Use model on pairs of columns.">MODEL_COLUMNS</a>) {
<a name="l00398"></a>00398       <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> c1 = 0; c1 &lt; <a class="code" href="classColoredMatrix.html#ab89519480425bc2f20d72456439b0b85" title="Width of matrix.">width</a>; ++c1) {
<a name="l00399"></a>00399         <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> c2 = c1+1; c2 &lt; width; ++c2) {
<a name="l00400"></a>00400           <a class="code" href="classColoredMatrix.html#a512f90a54fa5985a12f12135d9736f4a">no_monochrome_rectangle</a>(m.<a class="code" href="classGecode_1_1Matrix.html#ad387ebb66384ccdaa7ab71604e35651d" title="Access column c.">col</a>(c1), m.<a class="code" href="classGecode_1_1Matrix.html#ad387ebb66384ccdaa7ab71604e35651d" title="Access column c.">col</a>(c2));
<a name="l00401"></a>00401         }
<a name="l00402"></a>00402       }
<a name="l00403"></a>00403     }
<a name="l00404"></a>00404 
<a name="l00405"></a>00405     <span class="comment">// Symmetry breaking constraints.</span>
<a name="l00406"></a>00406     {
<a name="l00407"></a>00407       <span class="comment">// Lexical order for all columns and rows (all are interchangable)</span>
<a name="l00408"></a>00408       <span class="keywordflow">if</span> (<a class="code" href="classColoredMatrix.html#a1ef65cd28556bfd08186c93aa1a80af2" title="Options for model.">opt</a>.<a class="code" href="classGecode_1_1Options.html#a5b784e05b16ca744a6e024ed0bc8d4dc" title="Set default symmetry value.">symmetry</a>() &amp; <a class="code" href="classColoredMatrix.html#a9f5867f52a3a937b7e842201bf9e4befa24f12ba23bd9de8f8f998d4659f5547d" title="Order rows and columns of matrix.">SYMMETRY_MATRIX</a>) {
<a name="l00409"></a>00409         <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="bool-expr_8cpp.html#ad249d5ef98e6c30c655f43872c05647e" title="Right subtree.">r</a> = 0; <a class="code" href="bool-expr_8cpp.html#ad249d5ef98e6c30c655f43872c05647e" title="Right subtree.">r</a> &lt; <a class="code" href="classColoredMatrix.html#a70c739a7485bc48e578abbb0a0d44cc3" title="Height of matrix.">height</a>-1; ++<a class="code" href="bool-expr_8cpp.html#ad249d5ef98e6c30c655f43872c05647e" title="Right subtree.">r</a>) {
<a name="l00410"></a>00410           <a class="code" href="group__TaskModelFloatRelFloat.html#ga5e46c82c7630132bc51178cee5259082" title="Propagates .">rel</a>(*<span class="keyword">this</span>, m.<a class="code" href="classGecode_1_1Matrix.html#ae093bbbbaf763334ca23dc8f84dcfdbb" title="Access row r.">row</a>(<a class="code" href="bool-expr_8cpp.html#ad249d5ef98e6c30c655f43872c05647e" title="Right subtree.">r</a>), <a class="code" href="group__TaskModelInt.html#gga2a4b3317737fd8ffb4dfdf43d1bb87aaaaadd866118f747566487d23335e33db5" title="Less ().">IRT_LE</a>, m.<a class="code" href="classGecode_1_1Matrix.html#ae093bbbbaf763334ca23dc8f84dcfdbb" title="Access row r.">row</a>(<a class="code" href="bool-expr_8cpp.html#ad249d5ef98e6c30c655f43872c05647e" title="Right subtree.">r</a>+1));
<a name="l00411"></a>00411         }
<a name="l00412"></a>00412         <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="group__TaskTestFloatArithmetic.html#ga344cce338cd01063b5828d3e3cf2d161">c</a> = 0; <a class="code" href="group__TaskTestFloatArithmetic.html#ga344cce338cd01063b5828d3e3cf2d161">c</a> &lt; <a class="code" href="classColoredMatrix.html#ab89519480425bc2f20d72456439b0b85" title="Width of matrix.">width</a>-1; ++<a class="code" href="group__TaskTestFloatArithmetic.html#ga344cce338cd01063b5828d3e3cf2d161">c</a>) {
<a name="l00413"></a>00413           <a class="code" href="group__TaskModelFloatRelFloat.html#ga5e46c82c7630132bc51178cee5259082" title="Propagates .">rel</a>(*<span class="keyword">this</span>, m.<a class="code" href="classGecode_1_1Matrix.html#ad387ebb66384ccdaa7ab71604e35651d" title="Access column c.">col</a>(<a class="code" href="group__TaskTestFloatArithmetic.html#ga344cce338cd01063b5828d3e3cf2d161">c</a>), <a class="code" href="group__TaskModelInt.html#gga2a4b3317737fd8ffb4dfdf43d1bb87aaaaadd866118f747566487d23335e33db5" title="Less ().">IRT_LE</a>, m.<a class="code" href="classGecode_1_1Matrix.html#ad387ebb66384ccdaa7ab71604e35651d" title="Access column c.">col</a>(<a class="code" href="group__TaskTestFloatArithmetic.html#ga344cce338cd01063b5828d3e3cf2d161">c</a>+1));
<a name="l00414"></a>00414         }
<a name="l00415"></a>00415       }
<a name="l00416"></a>00416 
<a name="l00417"></a>00417       <span class="comment">// Value precedence. Compatible with row/column ordering</span>
<a name="l00418"></a>00418       <span class="keywordflow">if</span> (<a class="code" href="classColoredMatrix.html#a1ef65cd28556bfd08186c93aa1a80af2" title="Options for model.">opt</a>.<a class="code" href="classGecode_1_1Options.html#a5b784e05b16ca744a6e024ed0bc8d4dc" title="Set default symmetry value.">symmetry</a>() &amp; <a class="code" href="classColoredMatrix.html#a9f5867f52a3a937b7e842201bf9e4befaf557508a3f7633a1444bfed71cfd0745" title="Order value occurences.">SYMMETRY_VALUES</a>) {
<a name="l00419"></a>00419         <a class="code" href="group__TaskModelIntPrecede.html#ga1af981f5b78778a12ebaafddb6f14be0" title="Post propagator that s precedes t in x.">precede</a>(*<span class="keyword">this</span>, <a class="code" href="classColoredMatrix.html#abd346860d7f4d0133e2b1b86260f71ca" title="Array for matrix variables.">x</a>, IntArgs::create(<a class="code" href="classColoredMatrix.html#a0bf3a3f4de5d3a0e4ef63138c3596c5e" title="Number of colors to use.">colors</a>, 1));
<a name="l00420"></a>00420       }
<a name="l00421"></a>00421     }
<a name="l00422"></a>00422 
<a name="l00423"></a>00423     <a class="code" href="group__TaskModelFloatBranch.html#gae50c551006148b6a5e5b70a33a292fc3" title="Branch over x with variable selection vars and value selection vals.">branch</a>(*<span class="keyword">this</span>, <a class="code" href="classColoredMatrix.html#abd346860d7f4d0133e2b1b86260f71ca" title="Array for matrix variables.">x</a>, <a class="code" href="namespaceTest_1_1LDSB.html#a0970ea0b0ec5233862071ef8f9c787bb">tiebreak</a>(<a class="code" href="group__TaskModelIntBranchVar.html#ga182df297911cdb82e40103f9dee427f2" title="Select variable with smallest min.">INT_VAR_MIN_MIN</a>(), <a class="code" href="group__TaskModelIntBranchVar.html#ga76001af59f0b9c98e69d7b25c7b1d2e9" title="Select variable with smallest domain size.">INT_VAR_SIZE_MIN</a>()), <a class="code" href="group__TaskModelIntBranchVal.html#ga99f57de18e36ee7ea64c91a73f2e1132" title="Select smallest value.">INT_VAL_MIN</a>());
<a name="l00424"></a>00424   }
<a name="l00425"></a>00425 
<a name="l00427"></a><a class="code" href="classColoredMatrix.html#a116aee4eb166f33d4ad679d80c895eb4">00427</a>   <span class="keyword">virtual</span> <a class="code" href="classGecode_1_1IntVar.html" title="Integer variables.">IntVar</a> <a class="code" href="classColoredMatrix.html#a116aee4eb166f33d4ad679d80c895eb4" title="Return cost.">cost</a>(<span class="keywordtype">void</span>)<span class="keyword"> const </span>{
<a name="l00428"></a>00428     <span class="keywordflow">return</span> <a class="code" href="classColoredMatrix.html#ae39db00cbf1e65ae1f15e82762346825" title="Maximum color used.">max_color</a>;
<a name="l00429"></a>00429   }
<a name="l00430"></a>00430 
<a name="l00432"></a>00432   <span class="keyword">virtual</span> <span class="keywordtype">void</span>
<a name="l00433"></a><a class="code" href="classColoredMatrix.html#a163d9a5885496d30047d8ce8ac11d0e5">00433</a>   <a class="code" href="classColoredMatrix.html#a163d9a5885496d30047d8ce8ac11d0e5" title="Print solution.">print</a>(std::ostream&amp; os)<span class="keyword"> const </span>{
<a name="l00434"></a>00434     <a class="code" href="classGecode_1_1Matrix.html" title="Matrix-interface for arrays.">Matrix&lt;IntVarArray&gt;</a> m(<a class="code" href="classColoredMatrix.html#abd346860d7f4d0133e2b1b86260f71ca" title="Array for matrix variables.">x</a>, <a class="code" href="classColoredMatrix.html#ab89519480425bc2f20d72456439b0b85" title="Width of matrix.">width</a>, <a class="code" href="classColoredMatrix.html#a70c739a7485bc48e578abbb0a0d44cc3" title="Height of matrix.">height</a>);
<a name="l00435"></a>00435     <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="bool-expr_8cpp.html#ad249d5ef98e6c30c655f43872c05647e" title="Right subtree.">r</a> = 0; <a class="code" href="bool-expr_8cpp.html#ad249d5ef98e6c30c655f43872c05647e" title="Right subtree.">r</a> &lt; <a class="code" href="classColoredMatrix.html#a70c739a7485bc48e578abbb0a0d44cc3" title="Height of matrix.">height</a>; ++<a class="code" href="bool-expr_8cpp.html#ad249d5ef98e6c30c655f43872c05647e" title="Right subtree.">r</a>) {
<a name="l00436"></a>00436       os &lt;&lt; <span class="stringliteral">&quot;\t&quot;</span>;
<a name="l00437"></a>00437       <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="group__TaskTestFloatArithmetic.html#ga344cce338cd01063b5828d3e3cf2d161">c</a> = 0; <a class="code" href="group__TaskTestFloatArithmetic.html#ga344cce338cd01063b5828d3e3cf2d161">c</a> &lt; <a class="code" href="classColoredMatrix.html#ab89519480425bc2f20d72456439b0b85" title="Width of matrix.">width</a>; ++<a class="code" href="group__TaskTestFloatArithmetic.html#ga344cce338cd01063b5828d3e3cf2d161">c</a>) {
<a name="l00438"></a>00438         os &lt;&lt; m(<a class="code" href="group__TaskTestFloatArithmetic.html#ga344cce338cd01063b5828d3e3cf2d161">c</a>, <a class="code" href="bool-expr_8cpp.html#ad249d5ef98e6c30c655f43872c05647e" title="Right subtree.">r</a>) &lt;&lt; <span class="stringliteral">&quot; &quot;</span>;
<a name="l00439"></a>00439       }
<a name="l00440"></a>00440       os &lt;&lt; std::endl;
<a name="l00441"></a>00441     }
<a name="l00442"></a>00442     os &lt;&lt; std::endl;
<a name="l00443"></a>00443     os &lt;&lt; <span class="stringliteral">&quot;\tmax color: &quot;</span> &lt;&lt; <a class="code" href="classColoredMatrix.html#ae39db00cbf1e65ae1f15e82762346825" title="Maximum color used.">max_color</a> &lt;&lt; std::endl;
<a name="l00444"></a>00444     os &lt;&lt; std::endl;
<a name="l00445"></a>00445   }
<a name="l00446"></a>00446 
<a name="l00448"></a><a class="code" href="classColoredMatrix.html#af17bfcf3d142a840a76feb9626732884">00448</a>   <a class="code" href="classColoredMatrix.html#ac6f7371cbf84b37010a030bb4c404585" title="Actual model.">ColoredMatrix</a>(<span class="keywordtype">bool</span> share, <a class="code" href="classColoredMatrix.html" title="Example: Colored matrix example.">ColoredMatrix</a>&amp; s)
<a name="l00449"></a>00449     : <a class="code" href="classGecode_1_1Driver_1_1ScriptBase.html" title="Parametric base-class for scripts.">IntMinimizeScript</a>(share,s), <a class="code" href="classColoredMatrix.html#a1ef65cd28556bfd08186c93aa1a80af2" title="Options for model.">opt</a>(s.<a class="code" href="classColoredMatrix.html#a1ef65cd28556bfd08186c93aa1a80af2" title="Options for model.">opt</a>),
<a name="l00450"></a>00450       <a class="code" href="classColoredMatrix.html#a70c739a7485bc48e578abbb0a0d44cc3" title="Height of matrix.">height</a>(s.<a class="code" href="classColoredMatrix.html#a70c739a7485bc48e578abbb0a0d44cc3" title="Height of matrix.">height</a>), <a class="code" href="classColoredMatrix.html#ab89519480425bc2f20d72456439b0b85" title="Width of matrix.">width</a>(s.<a class="code" href="classColoredMatrix.html#ab89519480425bc2f20d72456439b0b85" title="Width of matrix.">width</a>), <a class="code" href="classColoredMatrix.html#a0bf3a3f4de5d3a0e4ef63138c3596c5e" title="Number of colors to use.">colors</a>(s.<a class="code" href="classColoredMatrix.html#a0bf3a3f4de5d3a0e4ef63138c3596c5e" title="Number of colors to use.">colors</a>) {
<a name="l00451"></a>00451     <a class="code" href="classColoredMatrix.html#abd346860d7f4d0133e2b1b86260f71ca" title="Array for matrix variables.">x</a>.<a class="code" href="classGecode_1_1VarArray.html#a3ce474e0097becce8ab5bb3ad69762b2" title="Update array to be a clone of array a.">update</a>(*<span class="keyword">this</span>, share, s.<a class="code" href="classColoredMatrix.html#abd346860d7f4d0133e2b1b86260f71ca" title="Array for matrix variables.">x</a>);
<a name="l00452"></a>00452     <a class="code" href="classColoredMatrix.html#ae39db00cbf1e65ae1f15e82762346825" title="Maximum color used.">max_color</a>.<a class="code" href="classGecode_1_1VarImpVar.html#aacb62f8b11b477ec9ded90f483c20848" title="Update this variable to be a clone of variable y.">update</a>(*<span class="keyword">this</span>, share, s.<a class="code" href="classColoredMatrix.html#ae39db00cbf1e65ae1f15e82762346825" title="Maximum color used.">max_color</a>);
<a name="l00453"></a>00453   }
<a name="l00455"></a>00455   <span class="keyword">virtual</span> <a class="code" href="classGecode_1_1Space.html" title="Computation spaces.">Space</a>*
<a name="l00456"></a><a class="code" href="classColoredMatrix.html#a14fbdbbcfa976fca0f725d93c6e5ac8a">00456</a>   <a class="code" href="classColoredMatrix.html#a14fbdbbcfa976fca0f725d93c6e5ac8a" title="Copy during cloning.">copy</a>(<span class="keywordtype">bool</span> share) {
<a name="l00457"></a>00457     <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classColoredMatrix.html#ac6f7371cbf84b37010a030bb4c404585" title="Actual model.">ColoredMatrix</a>(share,*<span class="keyword">this</span>);
<a name="l00458"></a>00458   }
<a name="l00459"></a>00459 };
<a name="l00460"></a>00460 
<a name="l00461"></a><a class="code" href="classColoredMatrixOptions.html#ae59d9a785018290e855cd7d688a863b7">00461</a> <a class="code" href="classColoredMatrixOptions.html#ae59d9a785018290e855cd7d688a863b7" title="Initialize options for example with name n.">ColoredMatrixOptions::ColoredMatrixOptions</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="bool-expr_8cpp.html#a76f11d9a0a47b94f72c2d0e77fb32240" title="Number of negative literals for node type.">n</a>)
<a name="l00462"></a>00462   : <a class="code" href="classGecode_1_1Options.html" title="Options for scripts">Options</a>(n),
<a name="l00463"></a>00463     _height(<span class="stringliteral">&quot;-height&quot;</span>, <span class="stringliteral">&quot;Height of matrix&quot;</span>, 8),
<a name="l00464"></a>00464     _width(<span class="stringliteral">&quot;-width&quot;</span>, <span class="stringliteral">&quot;Width of matrix&quot;</span>, 8),
<a name="l00465"></a>00465     _size(<span class="stringliteral">&quot;-size&quot;</span>, <span class="stringliteral">&quot;If different from 0, used as both width and height&quot;</span>, 0),
<a name="l00466"></a>00466     _colors(<span class="stringliteral">&quot;-colors&quot;</span>, <span class="stringliteral">&quot;Maximum number of colors&quot;</span>, 4),
<a name="l00467"></a>00467     _not_all_equal(<span class="stringliteral">&quot;-not-all-equal&quot;</span>, <span class="stringliteral">&quot;How to implement the not all equals constraint (used in corners model)&quot;</span>,
<a name="l00468"></a>00468                    <a class="code" href="classColoredMatrix.html" title="Example: Colored matrix example.">ColoredMatrix</a>::NOT_ALL_EQUAL_NQ),
<a name="l00469"></a>00469     _same_or_0(<span class="stringliteral">&quot;-same-or-0&quot;</span>, <span class="stringliteral">&quot;How to implement the same or 0 constraint (used in the decomposed no monochrome rectangle constraint)&quot;</span>,
<a name="l00470"></a>00470                <a class="code" href="classColoredMatrix.html" title="Example: Colored matrix example.">ColoredMatrix</a>::SAME_OR_0_DFA),
<a name="l00471"></a>00471     _distinct_except_0(<span class="stringliteral">&quot;-distinct-except-0&quot;</span>, <span class="stringliteral">&quot;How to implement the distinct except 0 constraint (used in the decomposed no monochrome rectangle constraint)&quot;</span>,
<a name="l00472"></a>00472                        <a class="code" href="classColoredMatrix.html" title="Example: Colored matrix example.">ColoredMatrix</a>::DISTINCT_EXCEPT_0_DFA),
<a name="l00473"></a>00473     _no_monochrome_rectangle(<span class="stringliteral">&quot;-no-monochrome-rectangle&quot;</span>, <span class="stringliteral">&quot;How to implement no monochrome rectangle (used in the rows model)&quot;</span>,
<a name="l00474"></a>00474                              <a class="code" href="classColoredMatrix.html" title="Example: Colored matrix example.">ColoredMatrix</a>::NO_MONOCHROME_DFA)
<a name="l00475"></a>00475 {
<a name="l00476"></a>00476   <a class="code" href="classGecode_1_1BaseOptions.html#a4042881bc50ab401ac8f49956c22dd0e" title="Add new option o.">add</a>(_height);
<a name="l00477"></a>00477   <a class="code" href="classGecode_1_1BaseOptions.html#a4042881bc50ab401ac8f49956c22dd0e" title="Add new option o.">add</a>(_width);
<a name="l00478"></a>00478   <a class="code" href="classGecode_1_1BaseOptions.html#a4042881bc50ab401ac8f49956c22dd0e" title="Add new option o.">add</a>(_size);
<a name="l00479"></a>00479   <a class="code" href="classGecode_1_1BaseOptions.html#a4042881bc50ab401ac8f49956c22dd0e" title="Add new option o.">add</a>(_colors);
<a name="l00480"></a>00480   <a class="code" href="classGecode_1_1BaseOptions.html#a4042881bc50ab401ac8f49956c22dd0e" title="Add new option o.">add</a>(_not_all_equal);
<a name="l00481"></a>00481   <a class="code" href="classGecode_1_1BaseOptions.html#a4042881bc50ab401ac8f49956c22dd0e" title="Add new option o.">add</a>(_same_or_0);
<a name="l00482"></a>00482   <a class="code" href="classGecode_1_1BaseOptions.html#a4042881bc50ab401ac8f49956c22dd0e" title="Add new option o.">add</a>(_distinct_except_0);
<a name="l00483"></a>00483   <a class="code" href="classGecode_1_1BaseOptions.html#a4042881bc50ab401ac8f49956c22dd0e" title="Add new option o.">add</a>(_no_monochrome_rectangle);
<a name="l00484"></a>00484 
<a name="l00485"></a>00485   <span class="comment">// Add search options</span>
<a name="l00486"></a>00486   <a class="code" href="classGecode_1_1Options.html#a6a70bab34b8f7ef96604a41554f46bd2" title="Search options.">_search</a>.<a class="code" href="classGecode_1_1Driver_1_1StringOption.html#aefb0761ac0dcf05f29f9d512d78a7c41" title="Add option value for value v, string o, and help text h.">add</a>(<a class="code" href="classColoredMatrix.html#a8610361ace3926a3422ee08fdfd6791da49b3ebb9de70358a041817cda17a5290" title="Find solution.">ColoredMatrix::SEARCH_DFS</a>,  <span class="stringliteral">&quot;dfs&quot;</span>, <span class="stringliteral">&quot;Find a solution.&quot;</span>);
<a name="l00487"></a>00487   <a class="code" href="classGecode_1_1Options.html#a6a70bab34b8f7ef96604a41554f46bd2" title="Search options.">_search</a>.<a class="code" href="classGecode_1_1Driver_1_1StringOption.html#aefb0761ac0dcf05f29f9d512d78a7c41" title="Add option value for value v, string o, and help text h.">add</a>(<a class="code" href="classColoredMatrix.html#a8610361ace3926a3422ee08fdfd6791dad56ad889017f68853739bdcd5e406da1" title="Find optimal solution.">ColoredMatrix::SEARCH_BAB</a>,  <span class="stringliteral">&quot;bab&quot;</span>, <span class="stringliteral">&quot;Find an optimal solution.&quot;</span>);
<a name="l00488"></a>00488   <a class="code" href="classGecode_1_1Options.html#a6a70bab34b8f7ef96604a41554f46bd2" title="Search options.">_search</a>.<a class="code" href="classGecode_1_1Driver_1_1StringOption.html#aa878fe617c59c0a5d45aaffa585054d4" title="Set default value to v.">value</a>(<a class="code" href="classColoredMatrix.html#a8610361ace3926a3422ee08fdfd6791da49b3ebb9de70358a041817cda17a5290" title="Find solution.">ColoredMatrix::SEARCH_DFS</a>);
<a name="l00489"></a>00489 
<a name="l00490"></a>00490   <span class="comment">// Add symmetry options</span>
<a name="l00491"></a>00491   <a class="code" href="classGecode_1_1Options.html#aba17b865dd06a5da02dbb21faca18ed5" title="General symmetry options.">_symmetry</a>.<a class="code" href="classGecode_1_1Driver_1_1StringOption.html#aefb0761ac0dcf05f29f9d512d78a7c41" title="Add option value for value v, string o, and help text h.">add</a>(<a class="code" href="classColoredMatrix.html#a9f5867f52a3a937b7e842201bf9e4befa961d988d5b0a61fd1859e0f2d352d0ad" title="No symmetry breaking.">ColoredMatrix::SYMMETRY_NONE</a>,  <span class="stringliteral">&quot;none&quot;</span>, <span class="stringliteral">&quot;Don&#39;t use symmetry breaking.&quot;</span>);
<a name="l00492"></a>00492   <a class="code" href="classGecode_1_1Options.html#aba17b865dd06a5da02dbb21faca18ed5" title="General symmetry options.">_symmetry</a>.<a class="code" href="classGecode_1_1Driver_1_1StringOption.html#aefb0761ac0dcf05f29f9d512d78a7c41" title="Add option value for value v, string o, and help text h.">add</a>(<a class="code" href="classColoredMatrix.html#a9f5867f52a3a937b7e842201bf9e4befa24f12ba23bd9de8f8f998d4659f5547d" title="Order rows and columns of matrix.">ColoredMatrix::SYMMETRY_MATRIX</a>,  <span class="stringliteral">&quot;matrix&quot;</span>, <span class="stringliteral">&quot;Order matrix rows and columns&quot;</span>);
<a name="l00493"></a>00493   <a class="code" href="classGecode_1_1Options.html#aba17b865dd06a5da02dbb21faca18ed5" title="General symmetry options.">_symmetry</a>.<a class="code" href="classGecode_1_1Driver_1_1StringOption.html#aefb0761ac0dcf05f29f9d512d78a7c41" title="Add option value for value v, string o, and help text h.">add</a>(<a class="code" href="classColoredMatrix.html#a9f5867f52a3a937b7e842201bf9e4befaf557508a3f7633a1444bfed71cfd0745" title="Order value occurences.">ColoredMatrix::SYMMETRY_VALUES</a>,  <span class="stringliteral">&quot;values&quot;</span>, <span class="stringliteral">&quot;Order values&quot;</span>);
<a name="l00494"></a>00494   <a class="code" href="classGecode_1_1Options.html#aba17b865dd06a5da02dbb21faca18ed5" title="General symmetry options.">_symmetry</a>.<a class="code" href="classGecode_1_1Driver_1_1StringOption.html#aefb0761ac0dcf05f29f9d512d78a7c41" title="Add option value for value v, string o, and help text h.">add</a>(<a class="code" href="classColoredMatrix.html#a9f5867f52a3a937b7e842201bf9e4befa24f12ba23bd9de8f8f998d4659f5547d" title="Order rows and columns of matrix.">ColoredMatrix::SYMMETRY_MATRIX</a> | <a class="code" href="classColoredMatrix.html#a9f5867f52a3a937b7e842201bf9e4befaf557508a3f7633a1444bfed71cfd0745" title="Order value occurences.">ColoredMatrix::SYMMETRY_VALUES</a>,
<a name="l00495"></a>00495                 <span class="stringliteral">&quot;both&quot;</span>, <span class="stringliteral">&quot;Order both rows/columns and values&quot;</span>);
<a name="l00496"></a>00496   <a class="code" href="classGecode_1_1Options.html#aba17b865dd06a5da02dbb21faca18ed5" title="General symmetry options.">_symmetry</a>.<a class="code" href="classGecode_1_1Driver_1_1StringOption.html#aa878fe617c59c0a5d45aaffa585054d4" title="Set default value to v.">value</a>(<a class="code" href="classColoredMatrix.html#a9f5867f52a3a937b7e842201bf9e4befa24f12ba23bd9de8f8f998d4659f5547d" title="Order rows and columns of matrix.">ColoredMatrix::SYMMETRY_MATRIX</a>);
<a name="l00497"></a>00497 
<a name="l00498"></a>00498   <span class="comment">// Add model options</span>
<a name="l00499"></a>00499   <a class="code" href="classGecode_1_1Options.html#a159330e12a455b30c4b6a695c6a330a6" title="General model options.">_model</a>.<a class="code" href="classGecode_1_1Driver_1_1StringOption.html#aefb0761ac0dcf05f29f9d512d78a7c41" title="Add option value for value v, string o, and help text h.">add</a>(<a class="code" href="classColoredMatrix.html#aac0995f01b988f9c84b5b0d68da7a20fab14756dbd9fb418fcb083b133103eb60" title="Use model on corner combinations.">ColoredMatrix::MODEL_CORNERS</a>,  <span class="stringliteral">&quot;corner&quot;</span>, <span class="stringliteral">&quot;Use direct corners model with not-all-equal constraints.&quot;</span>);
<a name="l00500"></a>00500   <a class="code" href="classGecode_1_1Options.html#a159330e12a455b30c4b6a695c6a330a6" title="General model options.">_model</a>.<a class="code" href="classGecode_1_1Driver_1_1StringOption.html#aefb0761ac0dcf05f29f9d512d78a7c41" title="Add option value for value v, string o, and help text h.">add</a>(<a class="code" href="classColoredMatrix.html#aac0995f01b988f9c84b5b0d68da7a20fa960331c308662fa76392a5ad8bf4a736" title="Use model on pairs of rows.">ColoredMatrix::MODEL_ROWS</a>,  <span class="stringliteral">&quot;rows&quot;</span>, <span class="stringliteral">&quot;Use model on pairs of rows (same_or_0 and distinct_except_0 constraints).&quot;</span>);
<a name="l00501"></a>00501   <a class="code" href="classGecode_1_1Options.html#a159330e12a455b30c4b6a695c6a330a6" title="General model options.">_model</a>.<a class="code" href="classGecode_1_1Driver_1_1StringOption.html#aefb0761ac0dcf05f29f9d512d78a7c41" title="Add option value for value v, string o, and help text h.">add</a>(<a class="code" href="classColoredMatrix.html#aac0995f01b988f9c84b5b0d68da7a20fa960331c308662fa76392a5ad8bf4a736" title="Use model on pairs of rows.">ColoredMatrix::MODEL_ROWS</a> | <a class="code" href="classColoredMatrix.html#aac0995f01b988f9c84b5b0d68da7a20fab14756dbd9fb418fcb083b133103eb60" title="Use model on corner combinations.">ColoredMatrix::MODEL_CORNERS</a>,
<a name="l00502"></a>00502              <span class="stringliteral">&quot;both&quot;</span>, <span class="stringliteral">&quot;Use both rows and corners model&quot;</span>);
<a name="l00503"></a>00503   <a class="code" href="classGecode_1_1Options.html#a159330e12a455b30c4b6a695c6a330a6" title="General model options.">_model</a>.<a class="code" href="classGecode_1_1Driver_1_1StringOption.html#aefb0761ac0dcf05f29f9d512d78a7c41" title="Add option value for value v, string o, and help text h.">add</a>(<a class="code" href="classColoredMatrix.html#aac0995f01b988f9c84b5b0d68da7a20fa3d230cf4c4317bc5249f8ccdd992e282" title="Use model on pairs of columns.">ColoredMatrix::MODEL_COLUMNS</a>,  <span class="stringliteral">&quot;columns&quot;</span>, <span class="stringliteral">&quot;Use model on pairs of columns (same_or_0 and distinct_except_0 constraints).&quot;</span>);
<a name="l00504"></a>00504   <a class="code" href="classGecode_1_1Options.html#a159330e12a455b30c4b6a695c6a330a6" title="General model options.">_model</a>.<a class="code" href="classGecode_1_1Driver_1_1StringOption.html#aefb0761ac0dcf05f29f9d512d78a7c41" title="Add option value for value v, string o, and help text h.">add</a>(<a class="code" href="classColoredMatrix.html#aac0995f01b988f9c84b5b0d68da7a20fa960331c308662fa76392a5ad8bf4a736" title="Use model on pairs of rows.">ColoredMatrix::MODEL_ROWS</a> | <a class="code" href="classColoredMatrix.html#aac0995f01b988f9c84b5b0d68da7a20fa3d230cf4c4317bc5249f8ccdd992e282" title="Use model on pairs of columns.">ColoredMatrix::MODEL_COLUMNS</a>,
<a name="l00505"></a>00505              <span class="stringliteral">&quot;matrix&quot;</span>, <span class="stringliteral">&quot;Use both rows and columns model&quot;</span>);
<a name="l00506"></a>00506   <a class="code" href="classGecode_1_1Options.html#a159330e12a455b30c4b6a695c6a330a6" title="General model options.">_model</a>.<a class="code" href="classGecode_1_1Driver_1_1StringOption.html#aa878fe617c59c0a5d45aaffa585054d4" title="Set default value to v.">value</a>(<a class="code" href="classColoredMatrix.html#aac0995f01b988f9c84b5b0d68da7a20fab14756dbd9fb418fcb083b133103eb60" title="Use model on corner combinations.">ColoredMatrix::MODEL_CORNERS</a>);
<a name="l00507"></a>00507 
<a name="l00508"></a>00508   <span class="comment">// Add not all equal variants</span>
<a name="l00509"></a>00509   _not_all_equal.<a class="code" href="classGecode_1_1Driver_1_1StringOption.html#aefb0761ac0dcf05f29f9d512d78a7c41" title="Add option value for value v, string o, and help text h.">add</a>(<a class="code" href="classColoredMatrix.html#a6784f1f7bb2a8bd19ac054a4631b7d04a0b7dcdb4f624418eb7323e9d26359a5c" title="Use direct constraint for implemeting not all equals.">ColoredMatrix::NOT_ALL_EQUAL_NQ</a>, <span class="stringliteral">&quot;nq&quot;</span>, <span class="stringliteral">&quot;Use nq constraint.&quot;</span>);
<a name="l00510"></a>00510   _not_all_equal.<a class="code" href="classGecode_1_1Driver_1_1StringOption.html#aefb0761ac0dcf05f29f9d512d78a7c41" title="Add option value for value v, string o, and help text h.">add</a>(<a class="code" href="classColoredMatrix.html#a6784f1f7bb2a8bd19ac054a4631b7d04a82e61722b0f7bb290fb6d2796b37ed63" title="Use naive reification for implemeting not all equals.">ColoredMatrix::NOT_ALL_EQUAL_NAIVE</a>, <span class="stringliteral">&quot;naive&quot;</span>, <span class="stringliteral">&quot;Use naive reified decomposition.&quot;</span>);
<a name="l00511"></a>00511   _not_all_equal.<a class="code" href="classGecode_1_1Driver_1_1StringOption.html#aefb0761ac0dcf05f29f9d512d78a7c41" title="Add option value for value v, string o, and help text h.">add</a>(<a class="code" href="classColoredMatrix.html#a6784f1f7bb2a8bd19ac054a4631b7d04a342d2a4f70954b1d70585ccdda36e821" title="Use reification for implemeting not all equals.">ColoredMatrix::NOT_ALL_EQUAL_REIFIED</a>, <span class="stringliteral">&quot;reified&quot;</span>, <span class="stringliteral">&quot;Use reified decomposition.&quot;</span>);
<a name="l00512"></a>00512   _not_all_equal.<a class="code" href="classGecode_1_1Driver_1_1StringOption.html#aefb0761ac0dcf05f29f9d512d78a7c41" title="Add option value for value v, string o, and help text h.">add</a>(<a class="code" href="classColoredMatrix.html#a6784f1f7bb2a8bd19ac054a4631b7d04a5b2867cd6b07eba70bd3f58454e3fe9a" title="Use nvalues for implementing not all equals.">ColoredMatrix::NOT_ALL_EQUAL_NVALUES</a>, <span class="stringliteral">&quot;nvalues&quot;</span>, <span class="stringliteral">&quot;Use nvalues.&quot;</span>);
<a name="l00513"></a>00513   _not_all_equal.<a class="code" href="classGecode_1_1Driver_1_1StringOption.html#aefb0761ac0dcf05f29f9d512d78a7c41" title="Add option value for value v, string o, and help text h.">add</a>(<a class="code" href="classColoredMatrix.html#a6784f1f7bb2a8bd19ac054a4631b7d04ae6a625b5242d4193d9ed5fdf7d3712dc" title="Use count for implementing not all equals.">ColoredMatrix::NOT_ALL_EQUAL_COUNT</a>, <span class="stringliteral">&quot;count&quot;</span>, <span class="stringliteral">&quot;Use count.&quot;</span>);
<a name="l00514"></a>00514   _not_all_equal.<a class="code" href="classGecode_1_1Driver_1_1StringOption.html#aefb0761ac0dcf05f29f9d512d78a7c41" title="Add option value for value v, string o, and help text h.">add</a>(<a class="code" href="classColoredMatrix.html#a6784f1f7bb2a8bd19ac054a4631b7d04af171bf713e70587615f1f3bb4d3cd9cf" title="Use dfa for implementing not all equals.">ColoredMatrix::NOT_ALL_EQUAL_DFA</a>, <span class="stringliteral">&quot;dfa&quot;</span>, <span class="stringliteral">&quot;Use dfa.&quot;</span>);
<a name="l00515"></a>00515 
<a name="l00516"></a>00516   <span class="comment">// Add same or 0 variants</span>
<a name="l00517"></a>00517   _same_or_0.<a class="code" href="classGecode_1_1Driver_1_1StringOption.html#aefb0761ac0dcf05f29f9d512d78a7c41" title="Add option value for value v, string o, and help text h.">add</a>(<a class="code" href="classColoredMatrix.html#a87a339431e00ffae46ec6d5cf193b539af78e69f054fb090618107532af0d9e1a" title="Use reification for same or 0.">ColoredMatrix::SAME_OR_0_REIFIED</a>, <span class="stringliteral">&quot;reified&quot;</span>, <span class="stringliteral">&quot;Use reified decomposition.&quot;</span>);
<a name="l00518"></a>00518   _same_or_0.<a class="code" href="classGecode_1_1Driver_1_1StringOption.html#aefb0761ac0dcf05f29f9d512d78a7c41" title="Add option value for value v, string o, and help text h.">add</a>(<a class="code" href="classColoredMatrix.html#a87a339431e00ffae46ec6d5cf193b539aba7712af42cd1d712da1938517efe71d" title="Use tuple set for same or 0.">ColoredMatrix::SAME_OR_0_TUPLE_SET</a>, <span class="stringliteral">&quot;tuple-set&quot;</span>, <span class="stringliteral">&quot;Use tuple set representation.&quot;</span>);
<a name="l00519"></a>00519   _same_or_0.<a class="code" href="classGecode_1_1Driver_1_1StringOption.html#aefb0761ac0dcf05f29f9d512d78a7c41" title="Add option value for value v, string o, and help text h.">add</a>(<a class="code" href="classColoredMatrix.html#a87a339431e00ffae46ec6d5cf193b539a2c247d2634fdffb56baee8356f3ec4eb" title="Use dfa for same or 0.">ColoredMatrix::SAME_OR_0_DFA</a>, <span class="stringliteral">&quot;dfa&quot;</span>, <span class="stringliteral">&quot;Use dfa representation.&quot;</span>);
<a name="l00520"></a>00520 
<a name="l00521"></a>00521   <span class="comment">// Add distinct except 0 variants</span>
<a name="l00522"></a>00522   _distinct_except_0.<a class="code" href="classGecode_1_1Driver_1_1StringOption.html#aefb0761ac0dcf05f29f9d512d78a7c41" title="Add option value for value v, string o, and help text h.">add</a>(<a class="code" href="classColoredMatrix.html#ad8e80ac561988a6ab4140a42c1f02255abbb284b0ea55b2bb21c57baaf061050b" title="Use reification for distinct except 0.">ColoredMatrix::DISTINCT_EXCEPT_0_REIFIED</a>, <span class="stringliteral">&quot;reified&quot;</span>, <span class="stringliteral">&quot;Use reified decomposition.&quot;</span>);
<a name="l00523"></a>00523   _distinct_except_0.<a class="code" href="classGecode_1_1Driver_1_1StringOption.html#aefb0761ac0dcf05f29f9d512d78a7c41" title="Add option value for value v, string o, and help text h.">add</a>(<a class="code" href="classColoredMatrix.html#ad8e80ac561988a6ab4140a42c1f02255a137f15ebc88244a87d3d6cd6d965449f" title="Use dfa for distinct except 0.">ColoredMatrix::DISTINCT_EXCEPT_0_DFA</a>, <span class="stringliteral">&quot;dfa&quot;</span>, <span class="stringliteral">&quot;Use dfa decomposition.&quot;</span>);
<a name="l00524"></a>00524   _distinct_except_0.<a class="code" href="classGecode_1_1Driver_1_1StringOption.html#aefb0761ac0dcf05f29f9d512d78a7c41" title="Add option value for value v, string o, and help text h.">add</a>(<a class="code" href="classColoredMatrix.html#ad8e80ac561988a6ab4140a42c1f02255a8672fc6ba713a0ed6cc0277e5b18b9a2" title="Use count for distinct except 0.">ColoredMatrix::DISTINCT_EXCEPT_0_COUNT</a>, <span class="stringliteral">&quot;count&quot;</span>, <span class="stringliteral">&quot;Use global cardinality.&quot;</span>);
<a name="l00525"></a>00525 
<a name="l00526"></a>00526   <span class="comment">// Add no monochrome rectangle variants</span>
<a name="l00527"></a>00527   _no_monochrome_rectangle.<a class="code" href="classGecode_1_1Driver_1_1StringOption.html#aefb0761ac0dcf05f29f9d512d78a7c41" title="Add option value for value v, string o, and help text h.">add</a>(<a class="code" href="classColoredMatrix.html#a71a600eb749c244e6ddcefa4933df62aae3abb66d8674998593df7a64b9355d11" title="Use decomposition for no monochrome rectangle.">ColoredMatrix::NO_MONOCHROME_DECOMPOSITION</a>,
<a name="l00528"></a>00528                                <span class="stringliteral">&quot;decompositions&quot;</span>,
<a name="l00529"></a>00529                                <span class="stringliteral">&quot;Use decompositions into same_or_0 and distinct_except_0.&quot;</span>);
<a name="l00530"></a>00530   _no_monochrome_rectangle.<a class="code" href="classGecode_1_1Driver_1_1StringOption.html#aefb0761ac0dcf05f29f9d512d78a7c41" title="Add option value for value v, string o, and help text h.">add</a>(<a class="code" href="classColoredMatrix.html#a71a600eb749c244e6ddcefa4933df62aa7134a7d7a2caeb132baeddea883c24ea" title="Use dfa for no monochrome rectangle.">ColoredMatrix::NO_MONOCHROME_DFA</a>,
<a name="l00531"></a>00531                                <span class="stringliteral">&quot;dfa&quot;</span>,
<a name="l00532"></a>00532                                <span class="stringliteral">&quot;Use DFA as direct implementation.&quot;</span>);
<a name="l00533"></a>00533 }
<a name="l00534"></a>00534 
<a name="l00538"></a>00538 <span class="keywordtype">int</span>
<a name="l00539"></a>00539 <a class="code" href="classAllInterval.html#a0ddf1224851353fc92bfbff6f499fa97" title="Main-function.">main</a>(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span>* argv[]) {
<a name="l00540"></a>00540   <a class="code" href="classColoredMatrixOptions.html" title="ColoredMatrixOptions.">ColoredMatrixOptions</a> <a class="code" href="group__TaskTestTest.html#ga7954630a7f2c6f4e33672159d0fcb73e" title="The options.">opt</a>(<span class="stringliteral">&quot;Colored matrix&quot;</span>);
<a name="l00541"></a>00541   <a class="code" href="group__TaskTestTest.html#ga7954630a7f2c6f4e33672159d0fcb73e" title="The options.">opt</a>.<a class="code" href="classGecode_1_1BaseOptions.html#afc231a23682ee38d0502e4f2798f2987" title="Parse options from arguments argv (number is argc).">parse</a>(argc,argv);
<a name="l00542"></a>00542   <span class="keywordflow">if</span> (<a class="code" href="group__TaskTestTest.html#ga7954630a7f2c6f4e33672159d0fcb73e" title="The options.">opt</a>.<a class="code" href="classGecode_1_1Options.html#a53ba9e286090f41d72944102086e994b" title="Set default search value.">search</a>() == <a class="code" href="classColoredMatrix.html#a8610361ace3926a3422ee08fdfd6791da49b3ebb9de70358a041817cda17a5290" title="Find solution.">ColoredMatrix::SEARCH_DFS</a>) {
<a name="l00543"></a>00543     Script::run&lt;ColoredMatrix,DFS,ColoredMatrixOptions&gt;(<a class="code" href="group__TaskTestTest.html#ga7954630a7f2c6f4e33672159d0fcb73e" title="The options.">opt</a>);
<a name="l00544"></a>00544   } <span class="keywordflow">else</span> {
<a name="l00545"></a>00545     Script::run&lt;ColoredMatrix,BAB,ColoredMatrixOptions&gt;(<a class="code" href="group__TaskTestTest.html#ga7954630a7f2c6f4e33672159d0fcb73e" title="The options.">opt</a>);
<a name="l00546"></a>00546   }
<a name="l00547"></a>00547   <span class="keywordflow">return</span> 0;
<a name="l00548"></a>00548 }
<a name="l00549"></a>00549 
<a name="l00550"></a>00550 
<a name="l00551"></a>00551 <span class="keyword">namespace </span>{
<a name="l00552"></a>00552   <a class="code" href="classGecode_1_1DFA.html" title="Deterministic finite automaton (DFA).">DFA</a> <a class="code" href="classColoredMatrix.html#a6a2808e10434d091d597b3d953b4cc1d">same_or_0_dfa</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> colors)
<a name="l00553"></a>00553   {
<a name="l00554"></a>00554     <span class="comment">/* DFA over variable sequences (x,y,z) where z equals x/y if x and</span>
<a name="l00555"></a>00555 <span class="comment">     * y are equal, and z equals 0 otherwise.</span>
<a name="l00556"></a>00556 <span class="comment">     *</span>
<a name="l00557"></a>00557 <span class="comment">     * DFA is constructed to contain paths</span>
<a name="l00558"></a>00558 <span class="comment">     *   start -- c --&gt; node -- c --&gt; node&#39; -- c --&gt; end</span>
<a name="l00559"></a>00559 <span class="comment">     * for all colors c representing the case when x and y</span>
<a name="l00560"></a>00560 <span class="comment">     * are equal.</span>
<a name="l00561"></a>00561 <span class="comment">     *</span>
<a name="l00562"></a>00562 <span class="comment">     * For the cases where x and y are non-equal (c and c&#39;), paths</span>
<a name="l00563"></a>00563 <span class="comment">     *   start -- c --&gt; node -- c&#39; --&gt; not-equal -- 0 --&gt; end</span>
<a name="l00564"></a>00564 <span class="comment">     * are added.</span>
<a name="l00565"></a>00565 <span class="comment">     */</span>
<a name="l00566"></a>00566 
<a name="l00567"></a>00567     <span class="keyword">const</span> <span class="keywordtype">int</span> start_state = 0;
<a name="l00568"></a>00568     <span class="keyword">const</span> <span class="keywordtype">int</span> not_equal_state = 2*colors+1;
<a name="l00569"></a>00569     <span class="keyword">const</span> <span class="keywordtype">int</span> final_state = 2*colors+2;
<a name="l00570"></a>00570 
<a name="l00571"></a>00571     <span class="keywordtype">int</span> n_transitions = colors*colors + 2*colors + 2;
<a name="l00572"></a>00572     <a class="code" href="classGecode_1_1DFA_1_1Transition.html" title="Specification of a DFA transition.">DFA::Transition</a>* trans = <span class="keyword">new</span> <a class="code" href="classGecode_1_1DFA_1_1Transition.html" title="Specification of a DFA transition.">DFA::Transition</a>[n_transitions];
<a name="l00573"></a>00573     <span class="keywordtype">int</span> current_transition = 0;
<a name="l00574"></a>00574 
<a name="l00575"></a>00575     <span class="comment">// From start state</span>
<a name="l00576"></a>00576     <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> color = 1; color &lt;= colors; ++color) {
<a name="l00577"></a>00577       trans[current_transition++] =
<a name="l00578"></a>00578         <a class="code" href="classGecode_1_1DFA_1_1Transition.html" title="Specification of a DFA transition.">DFA::Transition</a>(start_state, color, color);
<a name="l00579"></a>00579     }
<a name="l00580"></a>00580 
<a name="l00581"></a>00581     <span class="comment">// From first level states (indices [1..color])</span>
<a name="l00582"></a>00582     <span class="comment">// To second-level if same color, otherwise to not_equal_state</span>
<a name="l00583"></a>00583     <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> state = 1; state &lt;= colors; ++state) {
<a name="l00584"></a>00584       <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> color = 1; color &lt;= colors; ++color) {
<a name="l00585"></a>00585         <span class="keywordflow">if</span> (color == state) {
<a name="l00586"></a>00586           trans[current_transition++] =
<a name="l00587"></a>00587             <a class="code" href="classGecode_1_1DFA_1_1Transition.html" title="Specification of a DFA transition.">DFA::Transition</a>(state, color, colors+state);
<a name="l00588"></a>00588         } <span class="keywordflow">else</span> {
<a name="l00589"></a>00589           trans[current_transition++] =
<a name="l00590"></a>00590             <a class="code" href="classGecode_1_1DFA_1_1Transition.html" title="Specification of a DFA transition.">DFA::Transition</a>(state, color, not_equal_state);
<a name="l00591"></a>00591         }
<a name="l00592"></a>00592       }
<a name="l00593"></a>00593     }
<a name="l00594"></a>00594 
<a name="l00595"></a>00595     <span class="comment">// From second level states (indices [colors+1..colors+colors])</span>
<a name="l00596"></a>00596     <span class="comment">// To final state with the same color</span>
<a name="l00597"></a>00597     <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> color = 1; color &lt;= colors; ++color) {
<a name="l00598"></a>00598       trans[current_transition++] =
<a name="l00599"></a>00599         <a class="code" href="classGecode_1_1DFA_1_1Transition.html" title="Specification of a DFA transition.">DFA::Transition</a>(colors+color, color, final_state);
<a name="l00600"></a>00600     }
<a name="l00601"></a>00601 
<a name="l00602"></a>00602     <span class="comment">// From not equal state to final state</span>
<a name="l00603"></a>00603     trans[current_transition++] =
<a name="l00604"></a>00604       <a class="code" href="classGecode_1_1DFA_1_1Transition.html" title="Specification of a DFA transition.">DFA::Transition</a>(not_equal_state, 0, final_state);
<a name="l00605"></a>00605 
<a name="l00606"></a>00606     <span class="comment">// End sentinel</span>
<a name="l00607"></a>00607     trans[current_transition++] =
<a name="l00608"></a>00608       <a class="code" href="classGecode_1_1DFA_1_1Transition.html" title="Specification of a DFA transition.">DFA::Transition</a>(-1, 0, -1);
<a name="l00609"></a>00609 
<a name="l00610"></a>00610     <span class="keywordtype">int</span> final_states[] = {final_state, -1};
<a name="l00611"></a>00611 
<a name="l00612"></a>00612     <a class="code" href="classGecode_1_1DFA.html" title="Deterministic finite automaton (DFA).">DFA</a> result(start_state, trans, final_states, <span class="keyword">true</span>);
<a name="l00613"></a>00613 
<a name="l00614"></a>00614     <span class="keyword">delete</span>[] trans;
<a name="l00615"></a>00615 
<a name="l00616"></a>00616     <span class="keywordflow">return</span> result;
<a name="l00617"></a>00617   }
<a name="l00618"></a>00618 
<a name="l00619"></a>00619   <a class="code" href="classGecode_1_1TupleSet.html" title="Class represeting a set of tuples.">TupleSet</a> <a class="code" href="classColoredMatrix.html#a2e20e24b71c1b8da4c89ee4f65f20d5a">same_or_0_tuple_set</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> colors)
<a name="l00620"></a>00620   {
<a name="l00621"></a>00621     <a class="code" href="classGecode_1_1TupleSet.html" title="Class represeting a set of tuples.">TupleSet</a> result;
<a name="l00622"></a>00622     <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="group__TaskTestIntBasic.html#gabad95d247d0ee9ca79d75951ab2567a4">i</a> = 1; <a class="code" href="group__TaskTestIntBasic.html#gabad95d247d0ee9ca79d75951ab2567a4">i</a> &lt;= colors; ++<a class="code" href="group__TaskTestIntBasic.html#gabad95d247d0ee9ca79d75951ab2567a4">i</a>) {
<a name="l00623"></a>00623       <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> j = 1; j &lt;= colors; ++j) {
<a name="l00624"></a>00624         <span class="keywordflow">if</span> (<a class="code" href="group__TaskTestIntBasic.html#gabad95d247d0ee9ca79d75951ab2567a4">i</a> == j) {
<a name="l00625"></a>00625           result.<a class="code" href="classGecode_1_1TupleSet.html#a1c0f82d59a7f90e2aaa93408d8d519a1" title="Add tuple to tuple set.">add</a>(<a class="code" href="classGecode_1_1IntArgs.html" title="Passing integer arguments.">IntArgs</a>(3, <a class="code" href="group__TaskTestIntBasic.html#gabad95d247d0ee9ca79d75951ab2567a4">i</a>, j, <a class="code" href="group__TaskTestIntBasic.html#gabad95d247d0ee9ca79d75951ab2567a4">i</a>));
<a name="l00626"></a>00626         } <span class="keywordflow">else</span> {
<a name="l00627"></a>00627           result.<a class="code" href="classGecode_1_1TupleSet.html#a1c0f82d59a7f90e2aaa93408d8d519a1" title="Add tuple to tuple set.">add</a>(<a class="code" href="classGecode_1_1IntArgs.html" title="Passing integer arguments.">IntArgs</a>(3, <a class="code" href="group__TaskTestIntBasic.html#gabad95d247d0ee9ca79d75951ab2567a4">i</a>, j, 0));
<a name="l00628"></a>00628         }
<a name="l00629"></a>00629       }
<a name="l00630"></a>00630     }
<a name="l00631"></a>00631     result.<a class="code" href="classGecode_1_1TupleSet.html#a9ed395b9d5c60a157803a659c97445da" title="Finalize tuple set.">finalize</a>();
<a name="l00632"></a>00632     <span class="keywordflow">return</span> result;
<a name="l00633"></a>00633   }
<a name="l00634"></a>00634 
<a name="l00635"></a>00635   <a class="code" href="classGecode_1_1DFA.html" title="Deterministic finite automaton (DFA).">DFA</a> <a class="code" href="classColoredMatrix.html#a6668e0a2c5745d1011898633e0c6c1d5">distinct_except_0_dfa</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> colors)
<a name="l00636"></a>00636   {
<a name="l00637"></a>00637     <span class="comment">/* DFA for a sequence that may use each color only once (and all</span>
<a name="l00638"></a>00638 <span class="comment">     * others are zero).</span>
<a name="l00639"></a>00639 <span class="comment">     *</span>
<a name="l00640"></a>00640 <span class="comment">     * For n colors, 2^n nodes are used. For each node, if bit b is one, then</span>
<a name="l00641"></a>00641 <span class="comment">     * that color has not been used yet. All nodes have self-loops for zero, and</span>
<a name="l00642"></a>00642 <span class="comment">     * edges for still usable colors to the node with the corresponding bit un-set.</span>
<a name="l00643"></a>00643 <span class="comment">     * All nodes are final nodes.</span>
<a name="l00644"></a>00644 <span class="comment">     */</span>
<a name="l00645"></a>00645 
<a name="l00646"></a>00646     <span class="keyword">const</span> <span class="keywordtype">int</span> nstates = 1 &lt;&lt; colors;
<a name="l00647"></a>00647     <span class="keyword">const</span> <span class="keywordtype">int</span> start_state = nstates-1;
<a name="l00648"></a>00648 
<a name="l00649"></a>00649     <a class="code" href="classGecode_1_1DFA_1_1Transition.html" title="Specification of a DFA transition.">DFA::Transition</a>* trans = <span class="keyword">new</span> <a class="code" href="classGecode_1_1DFA_1_1Transition.html" title="Specification of a DFA transition.">DFA::Transition</a>[nstates*colors + 1];
<a name="l00650"></a>00650     <span class="keywordtype">int</span> current_transition = 0;
<a name="l00651"></a>00651 
<a name="l00652"></a>00652     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> state = nstates; state--; ) {
<a name="l00653"></a>00653       trans[current_transition++] = <a class="code" href="classGecode_1_1DFA_1_1Transition.html" title="Specification of a DFA transition.">DFA::Transition</a>(state, 0, state);
<a name="l00654"></a>00654 
<a name="l00655"></a>00655       <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> color = 1; color &lt;= colors; ++color) {
<a name="l00656"></a>00656         <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> color_bit = (1 &lt;&lt; (color-1));
<a name="l00657"></a>00657         <span class="keywordflow">if</span> (state &amp; color_bit) {
<a name="l00658"></a>00658           trans[current_transition++] =
<a name="l00659"></a>00659             <a class="code" href="classGecode_1_1DFA_1_1Transition.html" title="Specification of a DFA transition.">DFA::Transition</a>(state, color, state &amp; ~color_bit);
<a name="l00660"></a>00660         }
<a name="l00661"></a>00661       }
<a name="l00662"></a>00662     }
<a name="l00663"></a>00663     trans[current_transition++] = <a class="code" href="classGecode_1_1DFA_1_1Transition.html" title="Specification of a DFA transition.">DFA::Transition</a>(-1, 0, -1);
<a name="l00664"></a>00664 
<a name="l00665"></a>00665     <span class="keywordtype">int</span>* final_states = <span class="keyword">new</span> <span class="keywordtype">int</span>[nstates+1];
<a name="l00666"></a>00666     final_states[nstates] = -1;
<a name="l00667"></a>00667     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="group__TaskTestIntBasic.html#gabad95d247d0ee9ca79d75951ab2567a4">i</a> = nstates; <a class="code" href="group__TaskTestIntBasic.html#gabad95d247d0ee9ca79d75951ab2567a4">i</a>--; ) {
<a name="l00668"></a>00668       final_states[<a class="code" href="group__TaskTestIntBasic.html#gabad95d247d0ee9ca79d75951ab2567a4">i</a>] = <a class="code" href="group__TaskTestIntBasic.html#gabad95d247d0ee9ca79d75951ab2567a4">i</a>;
<a name="l00669"></a>00669     }
<a name="l00670"></a>00670 
<a name="l00671"></a>00671     <a class="code" href="classGecode_1_1DFA.html" title="Deterministic finite automaton (DFA).">DFA</a> result(start_state, trans, final_states);
<a name="l00672"></a>00672 
<a name="l00673"></a>00673     <span class="keyword">delete</span>[] trans;
<a name="l00674"></a>00674     <span class="keyword">delete</span>[] final_states;
<a name="l00675"></a>00675 
<a name="l00676"></a>00676     <span class="keywordflow">return</span> result;
<a name="l00677"></a>00677   }
<a name="l00678"></a>00678 
<a name="l00679"></a>00679   <a class="code" href="classGecode_1_1DFA.html" title="Deterministic finite automaton (DFA).">DFA</a> <a class="code" href="classColoredMatrix.html#ac432949382b131f300edb78519f57c6d">no_monochrome_rectangle_dfa</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> colors)
<a name="l00680"></a>00680   {
<a name="l00681"></a>00681     <span class="comment">/* DFA for a sequence of pairs, where each monochromatic pair may</span>
<a name="l00682"></a>00682 <span class="comment">     * only appear once.</span>
<a name="l00683"></a>00683 <span class="comment">     *</span>
<a name="l00684"></a>00684 <span class="comment">     * For n colors, there are 2^n base states representing which</span>
<a name="l00685"></a>00685 <span class="comment">     * monochromatic pairs are still available. For each base state s,</span>
<a name="l00686"></a>00686 <span class="comment">     * the color seen goes to a new intermediate state. A different</span>
<a name="l00687"></a>00687 <span class="comment">     * color will go back to state s. Seeing the same color will move</span>
<a name="l00688"></a>00688 <span class="comment">     * to the next base state with that color combination removed (if</span>
<a name="l00689"></a>00689 <span class="comment">     * it is still allowed).</span>
<a name="l00690"></a>00690 <span class="comment">     *</span>
<a name="l00691"></a>00691 <span class="comment">     * In essence, this DFA represents the combination of same_or_0</span>
<a name="l00692"></a>00692 <span class="comment">     * and distinct_except_0 as a single constraint.</span>
<a name="l00693"></a>00693 <span class="comment">     */</span>
<a name="l00694"></a>00694 
<a name="l00695"></a>00695     <span class="keyword">const</span> <span class="keywordtype">int</span> base_states = 1 &lt;&lt; colors;
<a name="l00696"></a>00696     <span class="keyword">const</span> <span class="keywordtype">int</span> start_state = base_states-1;
<a name="l00697"></a>00697     <span class="keyword">const</span> <span class="keywordtype">int</span> nstates = base_states + colors*base_states;
<a name="l00698"></a>00698 
<a name="l00699"></a>00699     <a class="code" href="classGecode_1_1DFA_1_1Transition.html" title="Specification of a DFA transition.">DFA::Transition</a>* trans = <span class="keyword">new</span> <a class="code" href="classGecode_1_1DFA_1_1Transition.html" title="Specification of a DFA transition.">DFA::Transition</a>[nstates*colors + 1];
<a name="l00700"></a>00700     <span class="keywordtype">int</span> current_transition = 0;
<a name="l00701"></a>00701 
<a name="l00702"></a>00702     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> state = base_states; state--; ) {
<a name="l00703"></a>00703       <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> color = 1; color &lt;= colors; ++color) {
<a name="l00704"></a>00704         <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> color_bit = (1 &lt;&lt; (color-1));
<a name="l00705"></a>00705         <span class="keyword">const</span> <span class="keywordtype">int</span> color_remembered_state = state + color*base_states;
<a name="l00706"></a>00706 
<a name="l00707"></a>00707         trans[current_transition++] =
<a name="l00708"></a>00708           <a class="code" href="classGecode_1_1DFA_1_1Transition.html" title="Specification of a DFA transition.">DFA::Transition</a>(state, color, color_remembered_state);
<a name="l00709"></a>00709 
<a name="l00710"></a>00710         <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> next_color = 1; next_color &lt;= colors; ++next_color) {
<a name="l00711"></a>00711           <span class="keywordflow">if</span> (next_color == color) {
<a name="l00712"></a>00712             <span class="comment">// Two equal adjacent, only transition if color still allowed</span>
<a name="l00713"></a>00713             <span class="keywordflow">if</span> (state &amp; color_bit) {
<a name="l00714"></a>00714               trans[current_transition++] =
<a name="l00715"></a>00715                 <a class="code" href="classGecode_1_1DFA_1_1Transition.html" title="Specification of a DFA transition.">DFA::Transition</a>(color_remembered_state, color, state &amp; ~color_bit);
<a name="l00716"></a>00716             }
<a name="l00717"></a>00717           } <span class="keywordflow">else</span> {
<a name="l00718"></a>00718             trans[current_transition++] =
<a name="l00719"></a>00719               <a class="code" href="classGecode_1_1DFA_1_1Transition.html" title="Specification of a DFA transition.">DFA::Transition</a>(color_remembered_state, next_color, state);
<a name="l00720"></a>00720           }
<a name="l00721"></a>00721         }
<a name="l00722"></a>00722       }
<a name="l00723"></a>00723     }
<a name="l00724"></a>00724     trans[current_transition++] = <a class="code" href="classGecode_1_1DFA_1_1Transition.html" title="Specification of a DFA transition.">DFA::Transition</a>(-1, 0, -1);
<a name="l00725"></a>00725     assert(current_transition &lt;= nstates*colors+1);
<a name="l00726"></a>00726 
<a name="l00727"></a>00727     <span class="keywordtype">int</span>* final_states = <span class="keyword">new</span> <span class="keywordtype">int</span>[base_states+1];
<a name="l00728"></a>00728     final_states[base_states] = -1;
<a name="l00729"></a>00729     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="group__TaskTestIntBasic.html#gabad95d247d0ee9ca79d75951ab2567a4">i</a> = base_states; <a class="code" href="group__TaskTestIntBasic.html#gabad95d247d0ee9ca79d75951ab2567a4">i</a>--; ) {
<a name="l00730"></a>00730       final_states[<a class="code" href="group__TaskTestIntBasic.html#gabad95d247d0ee9ca79d75951ab2567a4">i</a>] = <a class="code" href="group__TaskTestIntBasic.html#gabad95d247d0ee9ca79d75951ab2567a4">i</a>;
<a name="l00731"></a>00731     }
<a name="l00732"></a>00732 
<a name="l00733"></a>00733     <a class="code" href="classGecode_1_1DFA.html" title="Deterministic finite automaton (DFA).">DFA</a> result(start_state, trans, final_states);
<a name="l00734"></a>00734 
<a name="l00735"></a>00735     <span class="keyword">delete</span>[] trans;
<a name="l00736"></a>00736     <span class="keyword">delete</span>[] final_states;
<a name="l00737"></a>00737 
<a name="l00738"></a>00738     <span class="keywordflow">return</span> result;
<a name="l00739"></a>00739   }
<a name="l00740"></a>00740 
<a name="l00741"></a>00741   <a class="code" href="classGecode_1_1ArgArray.html">IntSetArgs</a> <a class="code" href="classColoredMatrix.html#ad13f7de7462ca8da871dc34acf534c3f">distinct_except_0_counts</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> colors, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="group__FuncIterRangesOp.html#gac1e7e0e9cd6a70aa2e8f2975a266e3b4" title="Size of all ranges of range iterator i.">size</a>)
<a name="l00742"></a>00742   {
<a name="l00743"></a>00743     <a class="code" href="classGecode_1_1ArgArray.html">IntSetArgs</a> result(colors+1);
<a name="l00744"></a>00744 
<a name="l00745"></a>00745     result[0] = <a class="code" href="classGecode_1_1IntSet.html" title="Integer sets.">IntSet</a>(0, size);
<a name="l00746"></a>00746 
<a name="l00747"></a>00747     <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="group__TaskTestIntBasic.html#gabad95d247d0ee9ca79d75951ab2567a4">i</a> = 1; <a class="code" href="group__TaskTestIntBasic.html#gabad95d247d0ee9ca79d75951ab2567a4">i</a> &lt;= colors; ++<a class="code" href="group__TaskTestIntBasic.html#gabad95d247d0ee9ca79d75951ab2567a4">i</a>) {
<a name="l00748"></a>00748       result[<a class="code" href="group__TaskTestIntBasic.html#gabad95d247d0ee9ca79d75951ab2567a4">i</a>] = <a class="code" href="classGecode_1_1IntSet.html" title="Integer sets.">IntSet</a>(0, 1);
<a name="l00749"></a>00749     }
<a name="l00750"></a>00750 
<a name="l00751"></a>00751     <span class="keywordflow">return</span> result;
<a name="l00752"></a>00752   }
<a name="l00753"></a>00753 
<a name="l00754"></a>00754 
<a name="l00755"></a>00755   <a class="code" href="classGecode_1_1DFA.html" title="Deterministic finite automaton (DFA).">DFA</a> <a class="code" href="classColoredMatrix.html#a91ff2b983666e6755f0b2330c36ff5e1">not_all_equal_dfa</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> colors)
<a name="l00756"></a>00756   {
<a name="l00757"></a>00757     <span class="comment">/* DFA for not all equal.</span>
<a name="l00758"></a>00758 <span class="comment">     *</span>
<a name="l00759"></a>00759 <span class="comment">     * From the start state, there is a transition for each color to</span>
<a name="l00760"></a>00760 <span class="comment">     * that colors state.  As long as the same color is seen, the</span>
<a name="l00761"></a>00761 <span class="comment">     * automaton stays in that state. If a different color is seen,</span>
<a name="l00762"></a>00762 <span class="comment">     * then it goes to the accepting state.</span>
<a name="l00763"></a>00763 <span class="comment">     */</span>
<a name="l00764"></a>00764 
<a name="l00765"></a>00765     <span class="keyword">const</span> <span class="keywordtype">int</span> nstates = 1 + colors + 1;
<a name="l00766"></a>00766     <span class="keyword">const</span> <span class="keywordtype">int</span> start_state = 0;
<a name="l00767"></a>00767     <span class="keyword">const</span> <span class="keywordtype">int</span> final_state = nstates-1;
<a name="l00768"></a>00768 
<a name="l00769"></a>00769     <a class="code" href="classGecode_1_1DFA_1_1Transition.html" title="Specification of a DFA transition.">DFA::Transition</a>* trans = <span class="keyword">new</span> <a class="code" href="classGecode_1_1DFA_1_1Transition.html" title="Specification of a DFA transition.">DFA::Transition</a>[2*colors + colors*colors + 1];
<a name="l00770"></a>00770     <span class="keywordtype">int</span> current_transition = 0;
<a name="l00771"></a>00771 
<a name="l00772"></a>00772     <span class="comment">// Each color to its own state</span>
<a name="l00773"></a>00773     <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> color = 1; color &lt;= colors; ++color) {
<a name="l00774"></a>00774       trans[current_transition++] = <a class="code" href="classGecode_1_1DFA_1_1Transition.html" title="Specification of a DFA transition.">DFA::Transition</a>(start_state, color, color);
<a name="l00775"></a>00775     }
<a name="l00776"></a>00776 
<a name="l00777"></a>00777     <span class="comment">// Each colors state loops on itself, and goes to final on all others</span>
<a name="l00778"></a>00778     <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> state = 1; state &lt;= colors; ++state) {
<a name="l00779"></a>00779       <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> color = 1; color &lt;= colors; ++color) {
<a name="l00780"></a>00780         <span class="keywordflow">if</span> (state == color) {
<a name="l00781"></a>00781           trans[current_transition++] = <a class="code" href="classGecode_1_1DFA_1_1Transition.html" title="Specification of a DFA transition.">DFA::Transition</a>(state, color, state);
<a name="l00782"></a>00782         } <span class="keywordflow">else</span> {
<a name="l00783"></a>00783           trans[current_transition++] = <a class="code" href="classGecode_1_1DFA_1_1Transition.html" title="Specification of a DFA transition.">DFA::Transition</a>(state, color, final_state);
<a name="l00784"></a>00784         }
<a name="l00785"></a>00785       }
<a name="l00786"></a>00786     }
<a name="l00787"></a>00787 
<a name="l00788"></a>00788     <span class="comment">// Loop on all colors in final state</span>
<a name="l00789"></a>00789     <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> color = 1; color &lt;= colors; ++color) {
<a name="l00790"></a>00790       trans[current_transition++] = <a class="code" href="classGecode_1_1DFA_1_1Transition.html" title="Specification of a DFA transition.">DFA::Transition</a>(final_state, color, final_state);
<a name="l00791"></a>00791     }
<a name="l00792"></a>00792 
<a name="l00793"></a>00793     trans[current_transition++] = <a class="code" href="classGecode_1_1DFA_1_1Transition.html" title="Specification of a DFA transition.">DFA::Transition</a>(-1, 0, -1);
<a name="l00794"></a>00794 
<a name="l00795"></a>00795     <span class="keywordtype">int</span> final_states[] = {final_state, -1};
<a name="l00796"></a>00796 
<a name="l00797"></a>00797     <a class="code" href="classGecode_1_1DFA.html" title="Deterministic finite automaton (DFA).">DFA</a> result(start_state, trans, final_states);
<a name="l00798"></a>00798 
<a name="l00799"></a>00799     <span class="keyword">delete</span>[] trans;
<a name="l00800"></a>00800 
<a name="l00801"></a>00801     <span class="keywordflow">return</span> result;
<a name="l00802"></a>00802   }
<a name="l00803"></a>00803 
<a name="l00804"></a>00804 }
<a name="l00805"></a>00805 
<a name="l00806"></a>00806 
<a name="l00807"></a>00807 <span class="comment">// STATISTICS: example-any</span>
</pre></div></div>
</div></div>
</body>
</html>
