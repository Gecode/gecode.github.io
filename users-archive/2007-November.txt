From malcolmr at cse.unsw.edu.au  Fri Nov  2 07:52:38 2007
From: malcolmr at cse.unsw.edu.au (Malcolm Ryan)
Date: Fri, 2 Nov 2007 17:52:38 +1100
Subject: [gecode-users] Gecode/J New users
Message-ID: <A9C08E9F-7CFC-4E78-9F8D-D8DECB1B4507@cse.unsw.edu.au>

Hi, I'm looking around at different Java CSP packages to find one in  
which I can work on a problem I have. Gecode/J looks nice, but  
documentation is thin. Can you please answer a few of my questions?

1) You include finite domain set variables, which I need. What  
operations are available on them?
2) Can you reify constraints as boolean variables?
3) Do you have any means to label constraints with meaningful tags  
for debugging?
4) Can I implement new constraints in Java? If so, how?

and I guess the most important question:

5) Is this project actively used and supported?

Malcolm

--
            "Cleanliness is not next to godliness nowadays,
                 for cleanliness is made an essential
               and godliness is regarded as an offence.
                                     - G.K.Chesterton, On Lying in Bed






From tack at ps.uni-sb.de  Fri Nov  2 08:50:41 2007
From: tack at ps.uni-sb.de (Guido Tack)
Date: Fri, 2 Nov 2007 08:50:41 +0100
Subject: [gecode-users] Gecode/J New users
In-Reply-To: <A9C08E9F-7CFC-4E78-9F8D-D8DECB1B4507@cse.unsw.edu.au>
References: <A9C08E9F-7CFC-4E78-9F8D-D8DECB1B4507@cse.unsw.edu.au>
Message-ID: <EE37780C-5578-4681-8371-5C64F3464AC1@ps.uni-sb.de>

Malcolm Ryan wrote:

> Hi, I'm looking around at different Java CSP packages to find one in
> which I can work on a problem I have. Gecode/J looks nice, but
> documentation is thin. Can you please answer a few of my questions?
>
> 1) You include finite domain set variables, which I need. What
> operations are available on them?

You find the propagators that are available in the current version here:
http://www.gecode.org/gecodej/doc/group__TaskIntSet.html

Maybe that's not exactly what you were looking for - what kind of  
operations do you mean?

> 2) Can you reify constraints as boolean variables?

Yes, many constraints can be reified.  E.g., have a look at
http://www.gecode.org/gecodej/doc/group__TaskIntIntEq.html
The reified versions mention something like "<=> b" in the  
documentation, where b is a BoolVar.

> 3) Do you have any means to label constraints with meaningful tags
> for debugging?

No, that's currently not possible.  What kind of information would  
you like to attach to a constraint? We are currently integrating  
reflection capabilities into the C++ base library, which might  
eventually also become available in Java.

> 4) Can I implement new constraints in Java? If so, how?

Yes, that's possible.  Have a look at the QueensJavaPropagator.java  
example file distributed with Gecode/J.  However, the interface for  
implementing propagators is pretty heavy-weight and not very  
efficient.  We currently don't encourage users to implement  
propagators that are critical for efficiency in Java, but rather to  
implement them in C++ and then interface to Java.

> and I guess the most important question:
>
> 5) Is this project actively used and supported?

Yes, it is.  It hasn't seen an update in quite a while because we are  
busy preparing the next major version (2.0.0), which should be  
available within the next month.  We are actively using it mainly for  
teaching CP courses, here at Saarland University and at KTH, and some  
other universities.

Cheers,
	Guido




From malcolmr at cse.unsw.edu.au  Fri Nov  2 09:36:07 2007
From: malcolmr at cse.unsw.edu.au (Malcolm Ryan)
Date: Fri, 2 Nov 2007 19:36:07 +1100
Subject: [gecode-users] Gecode/J New users
In-Reply-To: <EE37780C-5578-4681-8371-5C64F3464AC1@ps.uni-sb.de>
References: <A9C08E9F-7CFC-4E78-9F8D-D8DECB1B4507@cse.unsw.edu.au>
	<EE37780C-5578-4681-8371-5C64F3464AC1@ps.uni-sb.de>
Message-ID: <2F06100B-5F2C-46CA-A508-E38A3CEA7084@cse.unsw.edu.au>

Thanks Guido for you prompt reply. I'm starting to find my way  
around. I've been reading through the Gecode class, you have by far  
the most complete set of constraints that I've seen in any of the  
libraries I've looked at! Although some are a little counter-intuitive.

Am I right in thinking that if I want to say: x in s for intvar x and  
setvar s, I do:

Gecode.rel(list, x, SetRelType.SRT_SUB, s);

and if x is a constant int, I do:

Gecode.dom(this, s, SetRelType.SRT_SUP, x);

Is that right?

More below....

>> 3) Do you have any means to label constraints with meaningful tags
>> for debugging?
>
> No, that's currently not possible.  What kind of information would  
> you like to attach to a constraint? We are currently integrating  
> reflection capabilities into the C++ base library, which might  
> eventually also become available in Java.

I just want to attach strings that are names decribing the semantic  
intent of the constraint, for debugging. What kind of debugging  
support do you have? Can I trace the constraints as they propagate?

Ultimately, it would be nice to be able to attach a Java StackTrace  
to each constraint, recording the context in which it was posted. If  
these could be examined as the constraints propagated, it would be  
possible to build a tracing tool which showed _in_the_code_ which  
constraints are executing. That would enable you to build an  
interactive debugging tool much like a traditional execution tracer.

>> 5) Is this project actively used and supported?
>
> Yes, it is.  It hasn't seen an update in quite a while because we  
> are busy preparing the next major version (2.0.0), which should be  
> available within the next month.  We are actively using it mainly  
> for teaching CP courses, here at Saarland University and at KTH,  
> and some other universities.

Excellent news.

Malcolm

--
       "An inconvenience is only an adventure wrongly considered;
        an adventure is an inconvenience rightly considered."
                 - G.K.Chesterton, On Running After Ones Hat






From malcolmr at cse.unsw.edu.au  Fri Nov  2 09:37:22 2007
From: malcolmr at cse.unsw.edu.au (Malcolm Ryan)
Date: Fri, 2 Nov 2007 19:37:22 +1100
Subject: [gecode-users] Partitions
Message-ID: <73295068-575F-475E-AE9A-05D21FE6C59A@cse.unsw.edu.au>

What would be the best way to represent the constraint that {S1, ...,  
Sk} is a partition of S?

Malcolm
--
"Our age is not willing to stop with faith,
     with its miracle of turning water into wine,
         it goes further, it turns wine into water."
             -- Soren Kierkegaard, "Fear and Trembling"





From tack at ps.uni-sb.de  Fri Nov  2 10:15:21 2007
From: tack at ps.uni-sb.de (Guido Tack)
Date: Fri, 2 Nov 2007 10:15:21 +0100
Subject: [gecode-users] Gecode/J New users
In-Reply-To: <2F06100B-5F2C-46CA-A508-E38A3CEA7084@cse.unsw.edu.au>
References: <A9C08E9F-7CFC-4E78-9F8D-D8DECB1B4507@cse.unsw.edu.au>
	<EE37780C-5578-4681-8371-5C64F3464AC1@ps.uni-sb.de>
	<2F06100B-5F2C-46CA-A508-E38A3CEA7084@cse.unsw.edu.au>
Message-ID: <70AB5C7E-0204-4D5E-9C01-C9EAB2B3341D@ps.uni-sb.de>

Malcolm Ryan wrote:

> Thanks Guido for you prompt reply. I'm starting to find my way
> around. I've been reading through the Gecode class, you have by far
> the most complete set of constraints that I've seen in any of the
> libraries I've looked at! Although some are a little counter- 
> intuitive.
>
> Am I right in thinking that if I want to say: x in s for intvar x and
> setvar s, I do:
>
> Gecode.rel(list, x, SetRelType.SRT_SUB, s);
>
> and if x is a constant int, I do:
>
> Gecode.dom(this, s, SetRelType.SRT_SUP, x);
>
> Is that right?

Exactly.

> More below....
>
>>> 3) Do you have any means to label constraints with meaningful tags
>>> for debugging?
>>
>> No, that's currently not possible.  What kind of information would
>> you like to attach to a constraint? We are currently integrating
>> reflection capabilities into the C++ base library, which might
>> eventually also become available in Java.
>
> I just want to attach strings that are names decribing the semantic
> intent of the constraint, for debugging. What kind of debugging
> support do you have? Can I trace the constraints as they propagate?

Currently, you can't.  We're working on some debugging support, but  
it's not something you should expect to see in the near future, sorry.

> Ultimately, it would be nice to be able to attach a Java StackTrace
> to each constraint, recording the context in which it was posted. If
> these could be examined as the constraints propagated, it would be
> possible to build a tracing tool which showed _in_the_code_ which
> constraints are executing. That would enable you to build an
> interactive debugging tool much like a traditional execution tracer.

Sounds useful!  One of the problems I see is that often there's a  
difference between the constraints you post and the propagators that  
are actually installed in the space.  E.g., one constraint could be  
implemented by a number of propagators, or a propagator rewrites  
itself into a number of simpler propagators.  These are the typical  
issues a debugger would have to address.

Cheers,
	Guido




From tack at ps.uni-sb.de  Fri Nov  2 10:18:14 2007
From: tack at ps.uni-sb.de (Guido Tack)
Date: Fri, 2 Nov 2007 10:18:14 +0100
Subject: [gecode-users] Partitions
In-Reply-To: <73295068-575F-475E-AE9A-05D21FE6C59A@cse.unsw.edu.au>
References: <73295068-575F-475E-AE9A-05D21FE6C59A@cse.unsw.edu.au>
Message-ID: <13BC9B13-EF7F-48C7-89CB-6C4A39FC0F62@ps.uni-sb.de>

Malcolm Ryan wrote:

> What would be the best way to represent the constraint that {S1, ...,
> Sk} is a partition of S?

We call it "disjoint union", so it would be

rel(space, SOT_DUNION, s1_to_sk, s);

http://www.gecode.org/gecodej/doc/ 
group__TaskIntSetRelOp.html#g9f24705a5a8f13216bd98b10765b26a4

Guido




From Guillaume.Richaud at emn.fr  Fri Nov  2 11:05:08 2007
From: Guillaume.Richaud at emn.fr (Guillaume Richaud)
Date: Fri, 02 Nov 2007 11:05:08 +0100
Subject: [gecode-users] Gecode/J and time stability
Message-ID: <472AF654.3020001@emn.fr>

Hi,

I tried to solve some problems with Gecode/J and the time spend to solve 
the same instance seems to be quite unstable. In the example 
QueensJavaPropagator, i removed Distinct constraints. So, the solver 
just had to instantiate each variable to find a solution.
Solving 20 times the same instance:
nb vars=100, min=18ms, max=216ms, av=36ms
nb vars=500, min=371ms, max=3581ms, av=1544ms
nb vars=1000, min=2170ms, max=7333ms, av=6236ms

And i observe a strange phenomena: time variations are similar at each run.
For example with nb vars=600
           Run 1     Run2
1st:     825ms /  761ms
2nd:  1853ms / 1744ms
3rd:   1391ms / 1308ms
4th:   2890ms / 2751ms
5th:   1422ms / 1399ms
6th:   4141ms / 3963ms
7th:     963ms / 945ms
8th:   5073ms / 4775ms
9th:     903ms / 862ms
10th: 5031ms / 4415ms

Do you know what is the cause of the problem ?

Thank,
  Guillaume

ps: I also tried to force garbage collector before solving...

-------------- next part --------------
A non-text attachment was scrubbed...
Name: QueensJavaPropagator.java
Type: java/*
Size: 6640 bytes
Desc: not available
URL: <http://www.ps.uni-sb.de/pipermail/users/attachments/20071102/fc9bd452/attachment.bin>

From tack at ps.uni-sb.de  Fri Nov  2 11:37:14 2007
From: tack at ps.uni-sb.de (Guido Tack)
Date: Fri, 2 Nov 2007 11:37:14 +0100
Subject: [gecode-users] Gecode/J and time stability
In-Reply-To: <472AF654.3020001@emn.fr>
References: <472AF654.3020001@emn.fr>
Message-ID: <FAB7D986-D76E-47B8-8658-6CFD7717ADA2@ps.uni-sb.de>

Hi!

Guillaume Richaud wrote:

> I tried to solve some problems with Gecode/J and the time spend to  
> solve the same instance seems to be quite unstable. In the example  
> QueensJavaPropagator, i removed Distinct constraints. So, the  
> solver just had to instantiate each variable to find a solution.
> [...]
> ps: I also tried to force garbage collector before solving...

Did you try running it with
java -verbose:gc QueensJavaPropagator
?

That way you should see if it's due to gc.

Cheers,
	Guido

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.ps.uni-sb.de/pipermail/users/attachments/20071102/0aa1d8cd/attachment.htm>

From malcolmr at cse.unsw.edu.au  Mon Nov  5 01:47:01 2007
From: malcolmr at cse.unsw.edu.au (Malcolm Ryan)
Date: Mon, 5 Nov 2007 11:47:01 +1100
Subject: [gecode-users] Gecode/J: What is Space abstract?
Message-ID: <3553D39B-5102-4BC9-8EA0-E60CC4AFEE3B@cse.unsw.edu.au>

What is the Space class abstract in Gecode/J when it doesn't have any  
abstract methods? Is there any harm in doing:

Space space = new Space() {};

Malcolm

--
Many clever men like you have trusted to civilisation.
Many clever Babylonians, many clever Egyptians,
Many clever men at the end of Rome.
                               - G.K.Chesterton, The Napoleon of  
Notting Hill






From malcolmr at cse.unsw.edu.au  Mon Nov  5 01:57:47 2007
From: malcolmr at cse.unsw.edu.au (Malcolm Ryan)
Date: Mon, 5 Nov 2007 11:57:47 +1100
Subject: [gecode-users] Creating an empty IntSet?
Message-ID: <F0E836F8-8752-4670-9DB7-3EC4A7A785AA@cse.unsw.edu.au>

How do I create an empty IntSet, eg for the initial lower bound of a  
SetVar?

Eg, if I want 'set' to be a a subset of {1,2,3}:

	IntSet empty = ???;
	IntSet max = new IntSet(1,3);
         SetVar set = new SetVar(space, empty, max);

How do I create 'empty'?

Malcolm

--
      "The act of defending any of the cardinal virtues has today all
       the exhilaration of a vice."
                                     - G.K.Chesterton A Defense of  
Humility






From malcolmr at cse.unsw.edu.au  Mon Nov  5 02:29:52 2007
From: malcolmr at cse.unsw.edu.au (Malcolm Ryan)
Date: Mon, 5 Nov 2007 12:29:52 +1100
Subject: [gecode-users] SetVar domains
Message-ID: <693AC27C-ADA8-4609-BA8A-16CE8DF311AA@cse.unsw.edu.au>

Are there any methods for inspecting the upper and lower bounds of a  
SetVar? The only ones I can find are SetVar.glbMax(), glbMin(), lubMax 
() and lubMin(), which don't tell me everything I want to know. How  
can I get a list of exactly what is in the set?

Malcolm

--
"The modern man in revolt has become
           practically useless for all purposes of revolt.
By rebelling against everything
           he has lost his right to rebel against anything."
                                                    - G.K.Chesterton,  
Orthodoxy






From malcolmr at cse.unsw.edu.au  Mon Nov  5 02:48:08 2007
From: malcolmr at cse.unsw.edu.au (Malcolm Ryan)
Date: Mon, 5 Nov 2007 12:48:08 +1100
Subject: [gecode-users] Gecode/J: Propagation
Message-ID: <D80814BE-A326-43B0-9A92-48818BA24BF6@cse.unsw.edu.au>

When does propagation occur? Does it happen as constraints are  
created, only only when it is specifically requested? If it's the  
latter (and I hope it is) then how do I request it (in Gecode/J)?

Malcolm

--
            "Cleanliness is not next to godliness nowadays,
                 for cleanliness is made an essential
               and godliness is regarded as an offence.
                                     - G.K.Chesterton, On Lying in Bed






From malcolmr at cse.unsw.edu.au  Mon Nov  5 04:04:44 2007
From: malcolmr at cse.unsw.edu.au (Malcolm Ryan)
Date: Mon, 5 Nov 2007 14:04:44 +1100
Subject: [gecode-users] Space vs JavaSpace
Message-ID: <F4B931EF-D85C-4177-ACD3-464680023304@cse.unsw.edu.au>

Is there any reason why some of the constraints in Gecode.java expect  
a Space variable, while others expect a JavaSpace variable?

Malcolm

--
Many clever men like you have trusted to civilisation.
Many clever Babylonians, many clever Egyptians,
Many clever men at the end of Rome.
                               - G.K.Chesterton, The Napoleon of  
Notting Hill






From zayenz at gmail.com  Mon Nov  5 04:56:40 2007
From: zayenz at gmail.com (Mikael Zayenz Lagerkvist)
Date: Mon, 5 Nov 2007 04:56:40 +0100
Subject: [gecode-users] Space vs JavaSpace
In-Reply-To: <F4B931EF-D85C-4177-ACD3-464680023304@cse.unsw.edu.au>
References: <F4B931EF-D85C-4177-ACD3-464680023304@cse.unsw.edu.au>
Message-ID: <63b5c8b00711041956va4f6b1arf604eee1a2a4b937@mail.gmail.com>

On 11/5/07, Malcolm Ryan <malcolmr at cse.unsw.edu.au> wrote:
> Is there any reason why some of the constraints in Gecode.java expect
> a Space variable, while others expect a JavaSpace variable?

The constraints that take a Space argument instead of a JavaSpace
argument are hand-written instead of being generated by Swig. This
should be fixed for consistency. Thanks for pointing it out.

Cheers,
Mikael

-- 
Mikael Zayenz Lagerkvist, http://www.ict.kth.se/~zayenz/



From zayenz at gmail.com  Mon Nov  5 04:56:53 2007
From: zayenz at gmail.com (Mikael Zayenz Lagerkvist)
Date: Mon, 5 Nov 2007 04:56:53 +0100
Subject: [gecode-users] Gecode/J: Propagation
In-Reply-To: <D80814BE-A326-43B0-9A92-48818BA24BF6@cse.unsw.edu.au>
References: <D80814BE-A326-43B0-9A92-48818BA24BF6@cse.unsw.edu.au>
Message-ID: <63b5c8b00711041956k5933f686udbc36ce9738be564@mail.gmail.com>

On 11/5/07, Malcolm Ryan <malcolmr at cse.unsw.edu.au> wrote:
> When does propagation occur? Does it happen as constraints are
> created, only only when it is specifically requested? If it's the
> latter (and I hope it is) then how do I request it (in Gecode/J)?

Propagation is delayed.

See method status():
http://www.gecode.org/gecodej/doc/group__TaskSearch.html#g915af1a9b39dc9886e46e0a4981d288f

Cheers,
Mikael


-- 
Mikael Zayenz Lagerkvist, http://www.ict.kth.se/~zayenz/



From zayenz at gmail.com  Mon Nov  5 04:57:05 2007
From: zayenz at gmail.com (Mikael Zayenz Lagerkvist)
Date: Mon, 5 Nov 2007 04:57:05 +0100
Subject: [gecode-users] SetVar domains
In-Reply-To: <693AC27C-ADA8-4609-BA8A-16CE8DF311AA@cse.unsw.edu.au>
References: <693AC27C-ADA8-4609-BA8A-16CE8DF311AA@cse.unsw.edu.au>
Message-ID: <63b5c8b00711041957h7879a401lab860bce6a4b2dbd@mail.gmail.com>

On 11/5/07, Malcolm Ryan <malcolmr at cse.unsw.edu.au> wrote:
> Are there any methods for inspecting the upper and lower bounds of a
> SetVar? The only ones I can find are SetVar.glbMax(), glbMin(), lubMax
> () and lubMin(), which don't tell me everything I want to know. How
> can I get a list of exactly what is in the set?

See SetVar(Glb|Lub)Ranges:
http://www.gecode.org/gecodej/doc/group__TaskIntSetVars.html

Cheers,
Mikael

-- 
Mikael Zayenz Lagerkvist, http://www.ict.kth.se/~zayenz/



From zayenz at gmail.com  Mon Nov  5 04:57:19 2007
From: zayenz at gmail.com (Mikael Zayenz Lagerkvist)
Date: Mon, 5 Nov 2007 04:57:19 +0100
Subject: [gecode-users] Creating an empty IntSet?
In-Reply-To: <F0E836F8-8752-4670-9DB7-3EC4A7A785AA@cse.unsw.edu.au>
References: <F0E836F8-8752-4670-9DB7-3EC4A7A785AA@cse.unsw.edu.au>
Message-ID: <63b5c8b00711041957kd561437u8b14afbcc243cad1@mail.gmail.com>

On 11/5/07, Malcolm Ryan <malcolmr at cse.unsw.edu.au> wrote:
> How do I create an empty IntSet, eg for the initial lower bound of a
> SetVar?
>
> Eg, if I want 'set' to be a a subset of {1,2,3}:
>
>         IntSet empty = ???;
>         IntSet max = new IntSet(1,3);
>          SetVar set = new SetVar(space, empty, max);
>
> How do I create 'empty'?

In C++ there is a constructor for creating the empty InSet, as well as
a static member representing the empty set. Since we did not include
either in Gecode/ (an oversight), you can use the fact that, IIRC,
IntSet(1, 0) will create an empty IntSet.

Cheers,
Mikael


-- 
Mikael Zayenz Lagerkvist, http://www.ict.kth.se/~zayenz/



From zayenz at gmail.com  Mon Nov  5 04:57:32 2007
From: zayenz at gmail.com (Mikael Zayenz Lagerkvist)
Date: Mon, 5 Nov 2007 04:57:32 +0100
Subject: [gecode-users] Gecode/J: What is Space abstract?
In-Reply-To: <3553D39B-5102-4BC9-8EA0-E60CC4AFEE3B@cse.unsw.edu.au>
References: <3553D39B-5102-4BC9-8EA0-E60CC4AFEE3B@cse.unsw.edu.au>
Message-ID: <63b5c8b00711041957y789c985aof840515113bc1a17@mail.gmail.com>

On 11/5/07, Malcolm Ryan <malcolmr at cse.unsw.edu.au> wrote:
> What is the Space class abstract in Gecode/J when it doesn't have any
> abstract methods? Is there any harm in doing:
>
> Space space = new Space() {};
>

While there is no harm in doing the above (as far as I can recall at
the moment), I'm not sure I see what the point would be. The only
information you would be able to get out of a problem set up in the
space-variable would be if there are any solutions, since you can not
access the variables of the problem.

Cheers,
Mikael

-- 
Mikael Zayenz Lagerkvist, http://www.ict.kth.se/~zayenz/



From tack at ps.uni-sb.de  Mon Nov  5 08:47:52 2007
From: tack at ps.uni-sb.de (Guido Tack)
Date: Mon, 5 Nov 2007 08:47:52 +0100
Subject: [gecode-users] Creating an empty IntSet?
In-Reply-To: <63b5c8b00711041957kd561437u8b14afbcc243cad1@mail.gmail.com>
References: <F0E836F8-8752-4670-9DB7-3EC4A7A785AA@cse.unsw.edu.au>
	<63b5c8b00711041957kd561437u8b14afbcc243cad1@mail.gmail.com>
Message-ID: <267E5909-6E6F-4140-9897-B43DEF6CF2B9@ps.uni-sb.de>

Mikael Zayenz Lagerkvist wrote:

> In C++ there is a constructor for creating the empty InSet, as well as
> a static member representing the empty set. Since we did not include
> either in Gecode/ (an oversight), you can use the fact that, IIRC,
> IntSet(1, 0) will create an empty IntSet.

I'm afraid there's a bug in the current version of the IntSet  
constructor.  You can however construct the empty set using IntSet(new  
int[0]).

Guido




From Guillaume.Richaud at emn.fr  Mon Nov  5 17:09:22 2007
From: Guillaume.Richaud at emn.fr (Guillaume Richaud)
Date: Mon, 05 Nov 2007 17:09:22 +0100
Subject: [gecode-users] Gecode/J and time stability
In-Reply-To: <FAB7D986-D76E-47B8-8658-6CFD7717ADA2@ps.uni-sb.de>
References: <472AF654.3020001@emn.fr>
	<FAB7D986-D76E-47B8-8658-6CFD7717ADA2@ps.uni-sb.de>
Message-ID: <472F4032.4050305@emn.fr>

Hi,

Yes, i checked with -verbose:gc but results weren't very convincing.
So, I increased the value of the Xms parameter until the gc was not
called any more. But time was still instable  (30instances: min (431ms)
/ max (1229ms) / avg (690ms)).

Thanks,
Guillaume

Guido Tack a ?crit :
>
> Did you try running it with
> java -verbose:gc QueensJavaPropagator
> ?
>
> That way you should see if it's due to gc.
>
> Cheers,
> Guido
>






From malcolmr at cse.unsw.edu.au  Tue Nov  6 00:38:23 2007
From: malcolmr at cse.unsw.edu.au (Malcolm Ryan)
Date: Tue, 6 Nov 2007 10:38:23 +1100
Subject: [gecode-users] Gecode/J: What is Space abstract?
Message-ID: <88D8437D-D158-4553-87A4-93DE3B8FB609@cse.unsw.edu.au>

On 05/11/2007, at 2:57 PM, Mikael Zayenz Lagerkvist wrote:

> On 11/5/07, Malcolm Ryan <malcolmr at cse.unsw.edu.au> wrote:
>> What is the Space class abstract in Gecode/J when it doesn't have any
>> abstract methods? Is there any harm in doing:
>>
>> Space space = new Space() {};
>>
>
> While there is no harm in doing the above (as far as I can recall at
> the moment), I'm not sure I see what the point would be. The only
> information you would be able to get out of a problem set up in the
> space-variable would be if there are any solutions, since you can not
> access the variables of the problem.

I'm writing JUnit tests, for my code to check that the system of  
constraints I am creating are valid. I want to do something like:

Space space = new Space();

// ... create vars in space ...
IntVar x = new IntVar(space, ...)
IntVar y = new IntVar(space, ...)

// ... post constraints ...
mySystem.postConstraints(space, x, y, ...)

// propagate
space.status();

// test results
assertTrue(x.assigned());
assertEquals(0, x.val());
// etc

What is the purpose of the copy constructor in the Queens.java  
example? Should every space have such a constructor? When is it called?

Malcolm

--
      "The act of defending any of the cardinal virtues has today all
       the exhilaration of a vice."
                                     - G.K.Chesterton A Defense of  
Humility






From zayenz at gmail.com  Tue Nov  6 07:11:16 2007
From: zayenz at gmail.com (Mikael Zayenz Lagerkvist)
Date: Tue, 6 Nov 2007 07:11:16 +0100
Subject: [gecode-users] Gecode/J: What is Space abstract?
In-Reply-To: <88D8437D-D158-4553-87A4-93DE3B8FB609@cse.unsw.edu.au>
References: <88D8437D-D158-4553-87A4-93DE3B8FB609@cse.unsw.edu.au>
Message-ID: <63b5c8b00711052211l181de7d9j9051de7ac10751a1@mail.gmail.com>

On 11/6/07, Malcolm Ryan <malcolmr at cse.unsw.edu.au> wrote:
> On 05/11/2007, at 2:57 PM, Mikael Zayenz Lagerkvist wrote:
>
> > On 11/5/07, Malcolm Ryan <malcolmr at cse.unsw.edu.au> wrote:
> >> What is the Space class abstract in Gecode/J when it doesn't have any
> >> abstract methods? Is there any harm in doing:
> >>
> >> Space space = new Space() {};
> >>
> >
> > While there is no harm in doing the above (as far as I can recall at
> > the moment), I'm not sure I see what the point would be. The only
> > information you would be able to get out of a problem set up in the
> > space-variable would be if there are any solutions, since you can not
> > access the variables of the problem.
>
> I'm writing JUnit tests, for my code to check that the system of
> constraints I am creating are valid. I want to do something like:
>
> Space space = new Space();
>
> // ... create vars in space ...
> IntVar x = new IntVar(space, ...)
> IntVar y = new IntVar(space, ...)
>
> // ... post constraints ...
> mySystem.postConstraints(space, x, y, ...)
>
> // propagate
> space.status();
>
> // test results
> assertTrue(x.assigned());
> assertEquals(0, x.val());
> // etc

Ok, if you do not want to do any search, I understand how can use it.

> What is the purpose of the copy constructor in the Queens.java
> example? Should every space have such a constructor? When is it called?

It is called when copying a Space during search, so if you want to
search for a solution you need to implement it. Anything that you want
to refer to in a solution needs to be updated here.

Cheers,
Mikael

PS. if you haven't seen it before,
http://www.gecode.org/gecodej/doc/PageGlossary.html has some short
descriptions of the terms often used for Gecode(/J).

-- 
Mikael Zayenz Lagerkvist, http://www.ict.kth.se/~zayenz/



From malcolmr at cse.unsw.edu.au  Tue Nov  6 08:10:53 2007
From: malcolmr at cse.unsw.edu.au (Malcolm Ryan)
Date: Tue, 6 Nov 2007 18:10:53 +1100
Subject: [gecode-users] Gecode/J: Invalid Memory Access
Message-ID: <4B309E28-8369-476D-B4A7-7E386EBEC1AD@cse.unsw.edu.au>

I'm getting a crash in my Gecode/J program with the message:

   Invalid memory access of location 00000004 eip=0e61227c

It is happening on a call to the IntVar constructor:

   public IntVar(JavaSpace home, String name, IntSet dom) {
     this(GecodeJNI.new_IntVar__SWIG_1(JavaSpace.getCPtr(home), name,  
IntSet.getCPtr(dom)), true);
   }

The current code that generates the error is rather complex. I'll try  
to whittle it down to a simpler example, but in the meantime do you  
have any thoughts on what might be causing this?

Malcolm

--
"The modern man in revolt has become
           practically useless for all purposes of revolt.
By rebelling against everything
           he has lost his right to rebel against anything."
                                                    - G.K.Chesterton,  
Orthodoxy






From cschulte at kth.se  Tue Nov  6 09:49:27 2007
From: cschulte at kth.se (Christian Schulte)
Date: Tue, 6 Nov 2007 09:49:27 +0100
Subject: [gecode-users] Gecode/J: What is Space abstract?
In-Reply-To: <63b5c8b00711052211l181de7d9j9051de7ac10751a1@mail.gmail.com>
References: <88D8437D-D158-4553-87A4-93DE3B8FB609@cse.unsw.edu.au>
	<63b5c8b00711052211l181de7d9j9051de7ac10751a1@mail.gmail.com>
Message-ID: <000301c82051$f2148510$d63d8f30$@se>

Hi,

Just as a side comment: always write a copy constructor even if you are not
using search (currently). Future versions of Gecode might invoke copying for
garbage collection behind your back (earlier versions actually did). So
always implement!

Christian

--
Christian Schulte, http://www.imit.kth.se/~schulte/ 
-----Original Message-----
From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf
Of Mikael Zayenz Lagerkvist
Sent: Tuesday, November 06, 2007 7:11 AM
To: Malcolm Ryan
Cc: gecode list
Subject: Re: [gecode-users] Gecode/J: What is Space abstract?

On 11/6/07, Malcolm Ryan <malcolmr at cse.unsw.edu.au> wrote:
> On 05/11/2007, at 2:57 PM, Mikael Zayenz Lagerkvist wrote:
>
> > On 11/5/07, Malcolm Ryan <malcolmr at cse.unsw.edu.au> wrote:
> >> What is the Space class abstract in Gecode/J when it doesn't have any
> >> abstract methods? Is there any harm in doing:
> >>
> >> Space space = new Space() {};
> >>
> >
> > While there is no harm in doing the above (as far as I can recall at
> > the moment), I'm not sure I see what the point would be. The only
> > information you would be able to get out of a problem set up in the
> > space-variable would be if there are any solutions, since you can not
> > access the variables of the problem.
>
> I'm writing JUnit tests, for my code to check that the system of
> constraints I am creating are valid. I want to do something like:
>
> Space space = new Space();
>
> // ... create vars in space ...
> IntVar x = new IntVar(space, ...)
> IntVar y = new IntVar(space, ...)
>
> // ... post constraints ...
> mySystem.postConstraints(space, x, y, ...)
>
> // propagate
> space.status();
>
> // test results
> assertTrue(x.assigned());
> assertEquals(0, x.val());
> // etc

Ok, if you do not want to do any search, I understand how can use it.

> What is the purpose of the copy constructor in the Queens.java
> example? Should every space have such a constructor? When is it called?

It is called when copying a Space during search, so if you want to
search for a solution you need to implement it. Anything that you want
to refer to in a solution needs to be updated here.

Cheers,
Mikael

PS. if you haven't seen it before,
http://www.gecode.org/gecodej/doc/PageGlossary.html has some short
descriptions of the terms often used for Gecode(/J).

-- 
Mikael Zayenz Lagerkvist, http://www.ict.kth.se/~zayenz/

_______________________________________________
Gecode users mailing list
users at gecode.org
https://www.gecode.org/mailman/listinfo/gecode-users




From debdeep.banerjee at rsise.anu.edu.au  Tue Nov  6 13:01:13 2007
From: debdeep.banerjee at rsise.anu.edu.au (Debdeep Banerjee)
Date: Tue, 06 Nov 2007 23:01:13 +1100
Subject: [gecode-users] Reference of Gecode
Message-ID: <47305789.3000801@rsise.anu.edu.au>

Hi,
  I want to cite Gecode in my report. How do I cite Gecode ( basically 
Gecode/j) ? Is there any particular paper that describes Gecode ?

With regards
Debdeep



From trosky99 at gmail.com  Tue Nov  6 18:01:46 2007
From: trosky99 at gmail.com (Alberto Delgado)
Date: Tue, 6 Nov 2007 12:01:46 -0500
Subject: [gecode-users] complementview question
Message-ID: <e3e0e6e10711060901s9e006e1s99a2b263734abb0a@mail.gmail.com>

Hi all,

I need to implement a function that returns a variable with the complement
of a setvar given as a parameter (pretty much as FS.compl from Mozart-Oz).
I ran into complementview and i tought i could use it to get it done.  The
thing is it seems i can't initialize a setvar with a complementview,  or
even cast the complementview<setview> to a setview.  Since i don't want to
implement my own complement algorithm is there any way to get this done in
gecode?

I also like know something,  a view from a variable is a reference to the
variable,  so i can declare as many views as i need and it won't be adding
any extra stuff to the space,  am i correct??

By the way,  I'm working with the trunk version of gecode,  hope this won't
be the problem.

Regards,

Alberto Delgado
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.ps.uni-sb.de/pipermail/users/attachments/20071106/18970aae/attachment.htm>

From tack at ps.uni-sb.de  Tue Nov  6 19:38:53 2007
From: tack at ps.uni-sb.de (Guido Tack)
Date: Tue, 6 Nov 2007 19:38:53 +0100
Subject: [gecode-users] complementview question
In-Reply-To: <e3e0e6e10711060901s9e006e1s99a2b263734abb0a@mail.gmail.com>
References: <e3e0e6e10711060901s9e006e1s99a2b263734abb0a@mail.gmail.com>
Message-ID: <42855C52-542C-4F6D-A219-FF4C53A87422@ps.uni-sb.de>

Hi Alberto,

Alberto Delgado wrote:

> I need to implement a function that returns a variable with the  
> complement of a setvar given as a parameter (pretty much as FS.compl  
> from Mozart-Oz).
> I ran into complementview and i tought i could use it to get it  
> done.  The thing is it seems i can't initialize a setvar with a  
> complementview,  or even cast the complementview<setview> to a  
> setview.  Since i don't want to implement my own complement  
> algorithm is there any way to get this done in gecode?

Views in Gecode are only used inside propagators, so you can't use the  
ComplementView directly.  However, the function you describe can be  
implemented quite easily:
SetVar complement(Space* home, const SetVar& s) {
   SetVar c(home);
   rel(home, c, SRT_CMPL, s);
   return c;
}

The propagator that gets posted actually uses a ComplementView  
internally.

> I also like know something,  a view from a variable is a reference  
> to the variable,  so i can declare as many views as i need and it  
> won't be adding any extra stuff to the space,  am i correct??

Yes, both the SetVar/IntVar/BoolVar and all the views are just  
"handles" for the actual variable implementations.

> By the way,  I'm working with the trunk version of gecode,  hope  
> this won't be the problem.

The trunk is pretty stable by now, we're not far away from releasing  
it, so this should be fine.

Cheers,
	Guido




From malcolmr at cse.unsw.edu.au  Tue Nov  6 11:56:11 2007
From: malcolmr at cse.unsw.edu.au (Malcolm Ryan)
Date: Tue, 6 Nov 2007 21:56:11 +1100
Subject: [gecode-users] Gecode/J: Invalid Memory Access
In-Reply-To: <4B309E28-8369-476D-B4A7-7E386EBEC1AD@cse.unsw.edu.au>
References: <4B309E28-8369-476D-B4A7-7E386EBEC1AD@cse.unsw.edu.au>
Message-ID: <5C76ABDC-47A8-496D-9A5B-6F5A258E1618@cse.unsw.edu.au>


On 06/11/2007, at 6:10 PM, Malcolm Ryan wrote:

> I'm getting a crash in my Gecode/J program with the message:
>
>   Invalid memory access of location 00000004 eip=0e61227c

I've isolated the cause. The domain IntSet was empty.
The following code will reproduce the bug:

    Space space = new Space() {};
    IntSet empty = new IntSet(new int[0]);
    IntVar bad = new IntVar(space, empty);

Similarly the line:

    IntVar bad = new IntVar(space, 1, 0);

will produce the error:

   terminate called after throwing an instance of  
'Gecode::Int::VariableEmptyDomain'
      what():  IntVar::IntVar: Attempt to create variable with empty  
domain

which is better that a memory error, but which really should respond  
with an Exception that can be caught at the Java level.

I think the correct solution is to allow a variable to be created  
with an empty domain. This would just result in a model that is never  
satisfiable, which is nothing unusual and is quite straightforward to  
handle. I don't see any real reason to single it out as a special case.

Malcolm
--
      "Progress should mean that we are always changing the world to fit
       the vision, instead we are always changing the vision."
                - G.K.Chesterton, Orthodoxy






From malcolmr at cse.unsw.edu.au  Tue Nov  6 11:58:05 2007
From: malcolmr at cse.unsw.edu.au (Malcolm Ryan)
Date: Tue, 6 Nov 2007 21:58:05 +1100
Subject: [gecode-users] Creating an empty IntSet?
In-Reply-To: <267E5909-6E6F-4140-9897-B43DEF6CF2B9@ps.uni-sb.de>
References: <F0E836F8-8752-4670-9DB7-3EC4A7A785AA@cse.unsw.edu.au>
	<63b5c8b00711041957kd561437u8b14afbcc243cad1@mail.gmail.com>
	<267E5909-6E6F-4140-9897-B43DEF6CF2B9@ps.uni-sb.de>
Message-ID: <7B353373-5218-440C-BFA4-4DAEE96B4CCA@cse.unsw.edu.au>


On 05/11/2007, at 6:47 PM, Guido Tack wrote:

> Mikael Zayenz Lagerkvist wrote:
>
>> In C++ there is a constructor for creating the empty InSet, as  
>> well as
>> a static member representing the empty set. Since we did not include
>> either in Gecode/ (an oversight), you can use the fact that, IIRC,
>> IntSet(1, 0) will create an empty IntSet.
>
> I'm afraid there's a bug in the current version of the IntSet  
> constructor.  You can however construct the empty set using IntSet 
> (new int[0]).

It would be good if an IntSet had accessor methods to see what  
elements are in it (if any). At the moment they are totally opaque.

Malcolm

--
      "The Christian ideal has not been tried and found wanting;
       it has been found difficult and left untried."
             - G.K.Chesterton, What's Wrong With The World






From malcolmr at cse.unsw.edu.au  Wed Nov  7 02:23:13 2007
From: malcolmr at cse.unsw.edu.au (Malcolm Ryan)
Date: Wed, 7 Nov 2007 12:23:13 +1100
Subject: [gecode-users] Gecode/J: What is Space abstract?
In-Reply-To: <000301c82051$f2148510$d63d8f30$@se>
References: <88D8437D-D158-4553-87A4-93DE3B8FB609@cse.unsw.edu.au>
	<63b5c8b00711052211l181de7d9j9051de7ac10751a1@mail.gmail.com>
	<000301c82051$f2148510$d63d8f30$@se>
Message-ID: <812CA1AF-E6CA-4026-A34D-EFE3A6E553B3@cse.unsw.edu.au>


On 06/11/2007, at 7:49 PM, Christian Schulte wrote:

> Hi,
>
> Just as a side comment: always write a copy constructor even if you  
> are not
> using search (currently). Future versions of Gecode might invoke  
> copying for
> garbage collection behind your back (earlier versions actually  
> did). So
> always implement!

Wouldn't it be a good idea to add an abstract copy() function to Space 
() then, enforcing this requirement, rather than just assuming the  
copy constructor will be there? This is what you do on GecodeVar  
after all.

Malcolm

--
Many clever men like you have trusted to civilisation.
Many clever Babylonians, many clever Egyptians,
Many clever men at the end of Rome.
                               - G.K.Chesterton, The Napoleon of  
Notting Hill






From zayenz at gmail.com  Wed Nov  7 07:47:22 2007
From: zayenz at gmail.com (Mikael Zayenz Lagerkvist)
Date: Wed, 7 Nov 2007 07:47:22 +0100
Subject: [gecode-users] Gecode/J: Invalid Memory Access
In-Reply-To: <5C76ABDC-47A8-496D-9A5B-6F5A258E1618@cse.unsw.edu.au>
References: <4B309E28-8369-476D-B4A7-7E386EBEC1AD@cse.unsw.edu.au>
	<5C76ABDC-47A8-496D-9A5B-6F5A258E1618@cse.unsw.edu.au>
Message-ID: <63b5c8b00711062247h5c1e3b8dk57678d1facede064@mail.gmail.com>

On 11/6/07, Malcolm Ryan <malcolmr at cse.unsw.edu.au> wrote:
>
> On 06/11/2007, at 6:10 PM, Malcolm Ryan wrote:
>
> > I'm getting a crash in my Gecode/J program with the message:
> >
> >   Invalid memory access of location 00000004 eip=0e61227c
>
> I've isolated the cause. The domain IntSet was empty.
> The following code will reproduce the bug:
>
>     Space space = new Space() {};
>     IntSet empty = new IntSet(new int[0]);
>     IntVar bad = new IntVar(space, empty);
>
> Similarly the line:
>
>     IntVar bad = new IntVar(space, 1, 0);
>
> will produce the error:
>
>    terminate called after throwing an instance of
> 'Gecode::Int::VariableEmptyDomain'
>       what():  IntVar::IntVar: Attempt to create variable with empty
> domain
>
> which is better that a memory error, but which really should respond
> with an Exception that can be caught at the Java level.


Thanks for finding this bug for us. We haven't actually tested
creating variables with empty domains much.

Both errors should really be translated into real Java exceptions that
can be caught.


> I think the correct solution is to allow a variable to be created
> with an empty domain. This would just result in a model that is never
> satisfiable, which is nothing unusual and is quite straightforward to
> handle. I don't see any real reason to single it out as a special case.

It is a special case, since we have no representation of an empty
domain internally that respects all the invariants.


If Gecode/J makes the JVM crash again, the hs_err_pid????.log file
contains some information that may help find the problem. Attaching
the file would help us help you.


Cheers,
Mikael

-- 
Mikael Zayenz Lagerkvist, http://www.ict.kth.se/~zayenz/



From zayenz at gmail.com  Wed Nov  7 07:51:13 2007
From: zayenz at gmail.com (Mikael Zayenz Lagerkvist)
Date: Wed, 7 Nov 2007 07:51:13 +0100
Subject: [gecode-users] Creating an empty IntSet?
In-Reply-To: <7B353373-5218-440C-BFA4-4DAEE96B4CCA@cse.unsw.edu.au>
References: <F0E836F8-8752-4670-9DB7-3EC4A7A785AA@cse.unsw.edu.au>
	<63b5c8b00711041957kd561437u8b14afbcc243cad1@mail.gmail.com>
	<267E5909-6E6F-4140-9897-B43DEF6CF2B9@ps.uni-sb.de>
	<7B353373-5218-440C-BFA4-4DAEE96B4CCA@cse.unsw.edu.au>
Message-ID: <63b5c8b00711062251q5354aa82j408274600bad32a5@mail.gmail.com>

On 11/6/07, Malcolm Ryan <malcolmr at cse.unsw.edu.au> wrote:
> It would be good if an IntSet had accessor methods to see what
> elements are in it (if any). At the moment they are totally opaque.

This is an oversight from us. In C++, we have the classes IntSetRanges
and IntSetValues, which are iterators over the ranges and the values
of an IntSet.

For the next release of Gecode/J we should add these.

Cheers,
Mikael

-- 
Mikael Zayenz Lagerkvist, http://www.ict.kth.se/~zayenz/



From zayenz at gmail.com  Wed Nov  7 08:03:43 2007
From: zayenz at gmail.com (Mikael Zayenz Lagerkvist)
Date: Wed, 7 Nov 2007 08:03:43 +0100
Subject: [gecode-users] Gecode/J: What is Space abstract?
In-Reply-To: <812CA1AF-E6CA-4026-A34D-EFE3A6E553B3@cse.unsw.edu.au>
References: <88D8437D-D158-4553-87A4-93DE3B8FB609@cse.unsw.edu.au>
	<63b5c8b00711052211l181de7d9j9051de7ac10751a1@mail.gmail.com>
	<000301c82051$f2148510$d63d8f30$@se>
	<812CA1AF-E6CA-4026-A34D-EFE3A6E553B3@cse.unsw.edu.au>
Message-ID: <63b5c8b00711062303s7f96f7ddqcbf5a9f9d300123e@mail.gmail.com>

On 11/7/07, Malcolm Ryan <malcolmr at cse.unsw.edu.au> wrote:
> Wouldn't it be a good idea to add an abstract copy() function to Space
> () then, enforcing this requirement, rather than just assuming the
> copy constructor will be there? This is what you do on GecodeVar
> after all.

I don't know of a way to require statically that a constructor with a
certain signature should be available in a class. However, if the copy
function is called and there is no constructor with the right
signature, an exception will be thrown alerting you to the fact.

An abstract function in Space would only be enforced in direct
inheritance from Space. If you had your own MySpace, and then made a
class MySpecialSpace inheriting from MySpace, there would be no error
if that function was left out.


On the C++-side of Gecode, each Space must implement both a virtual
function copy, as well as a copy constructor. The virtual
copy-function is used as a polymorphic trampoline for accessing the
right copy-constructor. Since Gecode/J is geared mainly towards
teaching, we have tried to simplify the set-up for a normal model as
far as possible. Using Java reflection, we could dispense with this
function and write a generic one in the Space-class.

Cheers,
Mikael

-- 
Mikael Zayenz Lagerkvist, http://www.ict.kth.se/~zayenz/



From cschulte at kth.se  Wed Nov  7 10:06:10 2007
From: cschulte at kth.se (Christian Schulte)
Date: Wed, 7 Nov 2007 10:06:10 +0100
Subject: [gecode-users] Gecode/J: Invalid Memory Access
In-Reply-To: <5C76ABDC-47A8-496D-9A5B-6F5A258E1618@cse.unsw.edu.au>
References: <4B309E28-8369-476D-B4A7-7E386EBEC1AD@cse.unsw.edu.au>
	<5C76ABDC-47A8-496D-9A5B-6F5A258E1618@cse.unsw.edu.au>
Message-ID: <000301c8211d$7207a150$5616e3f0$@se>

Leaving the Java quirks aside (in Gecode everything works as expected), a
variable with an empty domain is very much out of the question: the
invariant that variable domains are not empty is the most fundamental
invariant in the system and can't be broken... That is true for all cp
systems I know of, actually.

Cheers
Christian

--
Christian Schulte, http://www.imit.kth.se/~schulte/ 
-----Original Message-----
From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf
Of Malcolm Ryan
Sent: Tuesday, November 06, 2007 11:56 AM
To: users at gecode.org
Subject: Re: [gecode-users] Gecode/J: Invalid Memory Access


On 06/11/2007, at 6:10 PM, Malcolm Ryan wrote:

> I'm getting a crash in my Gecode/J program with the message:
>
>   Invalid memory access of location 00000004 eip=0e61227c

I've isolated the cause. The domain IntSet was empty.
The following code will reproduce the bug:

    Space space = new Space() {};
    IntSet empty = new IntSet(new int[0]);
    IntVar bad = new IntVar(space, empty);

Similarly the line:

    IntVar bad = new IntVar(space, 1, 0);

will produce the error:

   terminate called after throwing an instance of  
'Gecode::Int::VariableEmptyDomain'
      what():  IntVar::IntVar: Attempt to create variable with empty  
domain

which is better that a memory error, but which really should respond  
with an Exception that can be caught at the Java level.

I think the correct solution is to allow a variable to be created  
with an empty domain. This would just result in a model that is never  
satisfiable, which is nothing unusual and is quite straightforward to  
handle. I don't see any real reason to single it out as a special case.

Malcolm
--
      "Progress should mean that we are always changing the world to fit
       the vision, instead we are always changing the vision."
                - G.K.Chesterton, Orthodoxy




_______________________________________________
Gecode users mailing list
users at gecode.org
https://www.gecode.org/mailman/listinfo/gecode-users




From zayenz at gmail.com  Wed Nov  7 12:55:45 2007
From: zayenz at gmail.com (Mikael Zayenz Lagerkvist)
Date: Wed, 7 Nov 2007 12:55:45 +0100
Subject: [gecode-users] Reference of Gecode
In-Reply-To: <47305789.3000801@rsise.anu.edu.au>
References: <47305789.3000801@rsise.anu.edu.au>
Message-ID: <63b5c8b00711070355n568cef21r11c98f608fb66fdc@mail.gmail.com>

Hi,

When we write papers, we use the following reference:

@Misc{gecode,
  author = "{Gecode Team}",
  title = "Gecode: Generic Constraint Development Environment",
  year = {2006},
  note = {Available from \texttt{http://www.gecode.org}},
}

Cheers,
Mikael

On 11/6/07, Debdeep Banerjee <debdeep.banerjee at rsise.anu.edu.au> wrote:
> Hi,
>   I want to cite Gecode in my report. How do I cite Gecode ( basically
> Gecode/j) ? Is there any particular paper that describes Gecode ?
>
> With regards
> Debdeep
>
> _______________________________________________
> Gecode users mailing list
> users at gecode.org
> https://www.gecode.org/mailman/listinfo/gecode-users
>


-- 
Mikael Zayenz Lagerkvist, http://www.ict.kth.se/~zayenz/



From malcolmr at cse.unsw.edu.au  Wed Nov  7 09:31:21 2007
From: malcolmr at cse.unsw.edu.au (Malcolm Ryan)
Date: Wed, 7 Nov 2007 19:31:21 +1100
Subject: [gecode-users] Propagating holes
Message-ID: <B7F34C4E-8A93-4030-B2A4-20FCE08B4FB8@cse.unsw.edu.au>

Is there anyway to express the constraint:

X = Y + c

for variables X and Y, and constant c, such that holes in Y are  
propagated to X and vice verse. The linear() constraint only seems to  
give bounds consistency.

Malcolm

--
Many clever men like you have trusted to civilisation.
Many clever Babylonians, many clever Egyptians,
Many clever men at the end of Rome.
                               - G.K.Chesterton, The Napoleon of  
Notting Hill






From zayenz at gmail.com  Thu Nov  8 06:19:33 2007
From: zayenz at gmail.com (Zayenz Lagerkvist)
Date: Thu, 8 Nov 2007 06:19:33 +0100
Subject: [gecode-users] Propagating holes
In-Reply-To: <B7F34C4E-8A93-4030-B2A4-20FCE08B4FB8@cse.unsw.edu.au>
References: <B7F34C4E-8A93-4030-B2A4-20FCE08B4FB8@cse.unsw.edu.au>
Message-ID: <A03505DB-53A9-425C-8AAB-8F56CE8F1F6E@gmail.com>

On 7 nov 2007, at 09.31, Malcolm Ryan wrote:
> Is there anyway to express the constraint:
>
> X = Y + c
>
> for variables X and Y, and constant c, such that holes in Y are
> propagated to X and vice verse. The linear() constraint only seems to
> give bounds consistency.

You can use the IntConLevel (integer consistency level) argument to  
increase the strength of propagation. See more at http:// 
www.gecode.org/gecode-doc-latest/ 
group__TaskIntInt.html#ga3e79a3496160feae2fd790c9379a319

Cheers,
Mikael

--
Mikael Zayenz Lagerkvist, http://www.it.kth.se/~zayenz




From malcolmr at cse.unsw.edu.au  Thu Nov  8 21:31:56 2007
From: malcolmr at cse.unsw.edu.au (Malcolm Ryan)
Date: Fri, 9 Nov 2007 07:31:56 +1100
Subject: [gecode-users] Graph adjacency constraint
Message-ID: <972951E9-3F9A-4FDD-8850-EFC82E5DFF7B@cse.unsw.edu.au>

Hi,

I have a graph expressed as an adjacency matrix M and I want to  
constrain IntVars X,Y such that M[X][Y] is true. Is there an easy way  
to do this in Gecode/J?

Malcolm

--
Many clever men like you have trusted to civilisation.
Many clever Babylonians, many clever Egyptians,
Many clever men at the end of Rome.
                               - G.K.Chesterton, The Napoleon of  
Notting Hill






From cschulte at kth.se  Thu Nov  8 22:36:26 2007
From: cschulte at kth.se (Christian Schulte)
Date: Thu, 8 Nov 2007 22:36:26 +0100
Subject: [gecode-users] Graph adjacency constraint
In-Reply-To: <972951E9-3F9A-4FDD-8850-EFC82E5DFF7B@cse.unsw.edu.au>
References: <972951E9-3F9A-4FDD-8850-EFC82E5DFF7B@cse.unsw.edu.au>
Message-ID: <000101c8224f$6e0bd890$4a2389b0$@se>

Please consider the element constraint. Other options are extensional table
constraints, which will be available in Gecode 2.0.0.

Unless you want to transform your graph representation to an adjacency rep
which is obviously more suited to constraint programming.

BTW, Gecode 2.0.0 will be released next Monday. Gecode/J 2.0.0 will follow
suit a little later.

Christian

-----Original Message-----
From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf
Of Malcolm Ryan
Sent: Thursday, November 08, 2007 9:32 PM
To: users at gecode.org
Subject: [gecode-users] Graph adjacency constraint

Hi,

I have a graph expressed as an adjacency matrix M and I want to  
constrain IntVars X,Y such that M[X][Y] is true. Is there an easy way  
to do this in Gecode/J?

Malcolm

--
Many clever men like you have trusted to civilisation.
Many clever Babylonians, many clever Egyptians,
Many clever men at the end of Rome.
                               - G.K.Chesterton, The Napoleon of  
Notting Hill




_______________________________________________
Gecode users mailing list
users at gecode.org
https://www.gecode.org/mailman/listinfo/gecode-users




From malcolmr at cse.unsw.edu.au  Thu Nov  8 23:15:27 2007
From: malcolmr at cse.unsw.edu.au (Malcolm Ryan)
Date: Fri, 9 Nov 2007 09:15:27 +1100
Subject: [gecode-users] Graph adjacency constraint
In-Reply-To: <000101c8224f$6e0bd890$4a2389b0$@se>
References: <972951E9-3F9A-4FDD-8850-EFC82E5DFF7B@cse.unsw.edu.au>
	<000101c8224f$6e0bd890$4a2389b0$@se>
Message-ID: <B4769170-AC4D-4CEE-B77D-7061AD77D880@cse.unsw.edu.au>


On 09/11/2007, at 8:36 AM, Christian Schulte wrote:

> Please consider the element constraint.

I don't see how the element constraint is applicable in this case.

> Unless you want to transform your graph representation to an  
> adjacency rep
> which is obviously more suited to constraint programming.

I'm not sure I understand what you mean. What kind of representation  
are you thinking of?

> Other options are extensional table
> constraints, which will be available in Gecode 2.0.0.
>
> BTW, Gecode 2.0.0 will be released next Monday. Gecode/J 2.0.0 will  
> follow
> suit a little later.

Excellent. Well I guess I can wait.

Malcolm

--
            "Cleanliness is not next to godliness nowadays,
                 for cleanliness is made an essential
               and godliness is regarded as an offence.
                                     - G.K.Chesterton, On Lying in Bed






From cschulte at kth.se  Fri Nov  9 14:37:23 2007
From: cschulte at kth.se (Christian Schulte)
Date: Fri, 9 Nov 2007 14:37:23 +0100
Subject: [gecode-users] Graph adjacency constraint
In-Reply-To: <B4769170-AC4D-4CEE-B77D-7061AD77D880@cse.unsw.edu.au>
References: <972951E9-3F9A-4FDD-8850-EFC82E5DFF7B@cse.unsw.edu.au>	<000101c8224f$6e0bd890$4a2389b0$@se>
	<B4769170-AC4D-4CEE-B77D-7061AD77D880@cse.unsw.edu.au>
Message-ID: <051201c822d5$aa080590$fe1810b0$@se>

Hi,

To use element you can map the X and Y coordinate into a single variable
(use multiplication and addition) and then use element on that variable:
basically flatten the matrix into an array.

As it comes to adjacency: have for each node i in the graph an array x of
0/1 variables, where x[j] tells you whether i is connected to j.

If you are looking for a single path in the graph (so every node has a
single node it is connected to), you can use a single variable for the node.

Christian 

--
Christian Schulte, http://www.imit.kth.se/~schulte/ 

-----Original Message-----
From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf
Of Malcolm Ryan
Sent: Thursday, November 08, 2007 11:15 PM
To: gecode list
Subject: Re: [gecode-users] Graph adjacency constraint


On 09/11/2007, at 8:36 AM, Christian Schulte wrote:

> Please consider the element constraint.

I don't see how the element constraint is applicable in this case.

> Unless you want to transform your graph representation to an  
> adjacency rep
> which is obviously more suited to constraint programming.

I'm not sure I understand what you mean. What kind of representation  
are you thinking of?

> Other options are extensional table
> constraints, which will be available in Gecode 2.0.0.
>
> BTW, Gecode 2.0.0 will be released next Monday. Gecode/J 2.0.0 will  
> follow
> suit a little later.

Excellent. Well I guess I can wait.

Malcolm

--
            "Cleanliness is not next to godliness nowadays,
                 for cleanliness is made an essential
               and godliness is regarded as an offence.
                                     - G.K.Chesterton, On Lying in Bed




_______________________________________________
Gecode users mailing list
users at gecode.org
https://www.gecode.org/mailman/listinfo/gecode-users




From malcolmr at cse.unsw.edu.au  Sun Nov 11 04:32:32 2007
From: malcolmr at cse.unsw.edu.au (Malcolm Ryan)
Date: Sun, 11 Nov 2007 14:32:32 +1100
Subject: [gecode-users] Diagnosing failures
Message-ID: <0717F637-0AAA-4CB3-BB98-2F02B5AF0E19@cse.unsw.edu.au>

My constraint system is starting to get quite complex and I'm getting  
some unexpected failures. Are there any ways to diagnose what went  
wrong? I can isolate a particle set of values which cause Space.status 
() to fail, but I don't know which constraints are responsible.

Malcolm
--
      "The act of defending any of the cardinal virtues has today all
       the exhilaration of a vice."
                                     - G.K.Chesterton A Defense of  
Humility






From cschulte at kth.se  Mon Nov 12 15:34:50 2007
From: cschulte at kth.se (Christian Schulte)
Date: Mon, 12 Nov 2007 15:34:50 +0100
Subject: [gecode-users] Diagnosing failures
In-Reply-To: <0717F637-0AAA-4CB3-BB98-2F02B5AF0E19@cse.unsw.edu.au>
References: <0717F637-0AAA-4CB3-BB98-2F02B5AF0E19@cse.unsw.edu.au>
Message-ID: <007001c82539$2ee23780$8ca6a680$@se>

Hi,

Nothing really, a part from the obvious (and painful): decompose your
problem into smaller subproblems and check that the subproblems have a
solution.

Cheers
Christian

--
Christian Schulte, http://www.imit.kth.se/~schulte/ 

-----Original Message-----
From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf
Of Malcolm Ryan
Sent: Sunday, November 11, 2007 4:33 AM
To: gecode list
Subject: [gecode-users] Diagnosing failures

My constraint system is starting to get quite complex and I'm getting  
some unexpected failures. Are there any ways to diagnose what went  
wrong? I can isolate a particle set of values which cause Space.status 
() to fail, but I don't know which constraints are responsible.

Malcolm
--
      "The act of defending any of the cardinal virtues has today all
       the exhilaration of a vice."
                                     - G.K.Chesterton A Defense of  
Humility




_______________________________________________
Gecode users mailing list
users at gecode.org
https://www.gecode.org/mailman/listinfo/gecode-users




From malcolmr at cse.unsw.edu.au  Mon Nov 12 21:08:34 2007
From: malcolmr at cse.unsw.edu.au (Malcolm Ryan)
Date: Tue, 13 Nov 2007 07:08:34 +1100
Subject: [gecode-users] Bug: Null pointer crash
Message-ID: <99F760CF-C419-4FD2-9317-5D27FC9892B6@cse.unsw.edu.au>

The following code causes Gecode/J to crash:

rel(space, var, IntRelType.GR, 1, null);

I know the null pointer is an error, but it should throw a  
NullPointerException. Instead it crashes with a memory violation:

Invalid memory access of location 00000000 eip=0e8f7e55

Malcolm

--
"If there is one thing worse than the modern weakening of major morals
    it is the modern strengthening of minor morals.
Thus it is considered more withering to accuse a man
    of bad taste than of bad ethics."    -- G.K.Chesterton, On Lying  
in Bed






From cschulte at kth.se  Mon Nov 12 21:26:30 2007
From: cschulte at kth.se (Christian Schulte)
Date: Mon, 12 Nov 2007 21:26:30 +0100
Subject: [gecode-users] Bug: Null pointer crash
In-Reply-To: <99F760CF-C419-4FD2-9317-5D27FC9892B6@cse.unsw.edu.au>
References: <99F760CF-C419-4FD2-9317-5D27FC9892B6@cse.unsw.edu.au>
Message-ID: <000a01c8256a$511179c0$f3346d40$@se>

Thanks. Would you mind reporting bugs to the bug tracking system? Thanks
again.

Christian


-----Original Message-----
From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf
Of Malcolm Ryan
Sent: Monday, November 12, 2007 9:09 PM
To: users at gecode.org
Subject: [gecode-users] Bug: Null pointer crash

The following code causes Gecode/J to crash:

rel(space, var, IntRelType.GR, 1, null);

I know the null pointer is an error, but it should throw a  
NullPointerException. Instead it crashes with a memory violation:

Invalid memory access of location 00000000 eip=0e8f7e55

Malcolm

--
"If there is one thing worse than the modern weakening of major morals
    it is the modern strengthening of minor morals.
Thus it is considered more withering to accuse a man
    of bad taste than of bad ethics."    -- G.K.Chesterton, On Lying  
in Bed




_______________________________________________
Gecode users mailing list
users at gecode.org
https://www.gecode.org/mailman/listinfo/gecode-users




From malcolmr at cse.unsw.edu.au  Tue Nov 13 06:46:14 2007
From: malcolmr at cse.unsw.edu.au (Malcolm Ryan)
Date: Tue, 13 Nov 2007 16:46:14 +1100
Subject: [gecode-users] Gecode/J: Setting boolean var
Message-ID: <75001F55-5DCD-419E-AB45-FF8B86D6B11E@cse.unsw.edu.au>

Is there a simple standard way to constraint the value of a BoolVar  
to a constant?
bool_eq() does not have a constant argument version, and eq() doesn't  
seem to
work.

Malcolm

--
"If there is one thing worse than the modern weakening of major morals
    it is the modern strengthening of minor morals.
Thus it is considered more withering to accuse a man
    of bad taste than of bad ethics."    -- G.K.Chesterton, On Lying  
in Bed






From malcolmr at cse.unsw.edu.au  Tue Nov 13 07:00:55 2007
From: malcolmr at cse.unsw.edu.au (Malcolm Ryan)
Date: Tue, 13 Nov 2007 17:00:55 +1100
Subject: [gecode-users] Diagnosing failures
In-Reply-To: <000901c8256a$240668a0$6c1339e0$@se>
References: <0717F637-0AAA-4CB3-BB98-2F02B5AF0E19@cse.unsw.edu.au>
	<007001c82539$2ee23780$8ca6a680$@se>
	<DD1731A0-C9DF-46FB-8DEC-E37FC4729920@cse.unsw.edu.au>
	<000901c8256a$240668a0$6c1339e0$@se>
Message-ID: <01F41C96-4D4F-4736-9052-8343E5F0EAD2@cse.unsw.edu.au>

On 13/11/2007, at 7:25 AM, Christian Schulte wrote:

> That's not quite an option: well known, there are too many propagator
> invocations (really, absolutely incomprehensible).

Really? I wouldn't have thought that there were so many. But then  
I've never written an engine.

> Fact is, there has been only a single idea - to my knowledge - how  
> to trace
> propagation at a sufficient level of abstraction, based on so- 
> called S-boxes
> (by Benhamou and others). However it did not make it... We intend  
> to do
> something like that but much later, as a byproduct of some ideas we  
> would
> like to explore (as we are researchers mostly and not software  
> developers,
> so anything we do must be sufficiently new and academically  
> interesting.
> Well...).

I would have thought the issue was really of critical importance to  
making CSPs a really useful programming paradigm. Of course, as an  
academic researcher myself, I realise that there are things that are  
on your research program and things that are not.

> But you have been using Gist, haven't you? That helps quite a lot to
> understand where search goes wrong in my opinion.

I haven't got into that yet. Is there any documentation or examples?

> PS: Was it intentional to have this in private? If not, could you  
> forward
> the message if you agree to that? Thanks.

No, but I think the list has the reply-to-poster flag checked, and I  
don't always remember to CC the list.

Malcolm

> -----Original Message-----
> From: Malcolm Ryan [mailto:malcoonlmr at cse.unsw.edu.au]
> Sent: Monday, November 12, 2007 9:11 PM
> To: cschulte at kth.se
> Subject: Re: [gecode-users] Diagnosing failures
>
>
> On 13/11/2007, at 1:34 AM, Christian Schulte wrote:
>
>> Nothing really, a part from the obvious (and painful):
>
> That's a shame. It would be nice to at least be able to trace the
> order of propagation of constraints.
>
>> decompose your
>> problem into smaller subproblems and check that the subproblems  
>> have a
>> solution.
>
> Fortunately, I have been designing in that fashion from the outset,
> so debugging hasn't been too painful so far. Still, better tools
> would make it easier. Do you have anything planned?
>
> Malcolm
>

--
Many clever men like you have trusted to civilisation.
Many clever Babylonians, many clever Egyptians,
Many clever men at the end of Rome.
                               - G.K.Chesterton, The Napoleon of  
Notting Hill






From daniel.araya at gmail.com  Wed Nov 14 23:41:37 2007
From: daniel.araya at gmail.com (Daniel Araya)
Date: Wed, 14 Nov 2007 22:41:37 +0000 (UTC)
Subject: [gecode-users] Gecode/J
Message-ID: <loom.20071114T222948-969@post.gmane.org>

Hi, 

I discover that Gecode/J not implemented the function "atleast" and  "atmost",
but it is easy to resolve  with the function "count" and "rel". But I have a
Question:

How I do a restriction like:

VarArray variable;
VarInt Max;

IF(variable.get(0)==1){ //THIS IS THE PROBLEM!!

 linear(this,credits,variable,IRT_LQ,Max);
}

Thanks and sorry for the newbie question!






From cschulte at kth.se  Thu Nov 15 01:18:14 2007
From: cschulte at kth.se (Christian Schulte)
Date: Thu, 15 Nov 2007 01:18:14 +0100
Subject: [gecode-users] Gecode/J: Setting boolean var
In-Reply-To: <75001F55-5DCD-419E-AB45-FF8B86D6B11E@cse.unsw.edu.au>
References: <75001F55-5DCD-419E-AB45-FF8B86D6B11E@cse.unsw.edu.au>
Message-ID: <000501c8271d$06d89050$1489b0f0$@se>

rel with IRT_EQ should work, check its docs (if not, it'll work with 2.0.0
which we finished today, hurray! More tomorrow). Maybe you want to check
some of the C++ examples that are shipped with Gecode, modeling in C++ is
sufficiently close (albeit nicer) to modeling in Java.

Christian

-----Original Message-----
From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf
Of Malcolm Ryan
Sent: Tuesday, November 13, 2007 6:46 AM
To: gecode list
Subject: [gecode-users] Gecode/J: Setting boolean var

Is there a simple standard way to constraint the value of a BoolVar  
to a constant?
bool_eq() does not have a constant argument version, and eq() doesn't  
seem to
work.

Malcolm

--
"If there is one thing worse than the modern weakening of major morals
    it is the modern strengthening of minor morals.
Thus it is considered more withering to accuse a man
    of bad taste than of bad ethics."    -- G.K.Chesterton, On Lying  
in Bed




_______________________________________________
Gecode users mailing list
users at gecode.org
https://www.gecode.org/mailman/listinfo/gecode-users




From cschulte at kth.se  Thu Nov 15 01:23:26 2007
From: cschulte at kth.se (Christian Schulte)
Date: Thu, 15 Nov 2007 01:23:26 +0100
Subject: [gecode-users] Gecode/J
In-Reply-To: <loom.20071114T222948-969@post.gmane.org>
References: <loom.20071114T222948-969@post.gmane.org>
Message-ID: <000601c8271d$bf5199b0$3df4cd10$@se>

Hi,

atleast and atmost are just aliases for count. No rel is needed (check the
docs, use IRT_LQ or IRT_GQ as relation).

You need to use reification for that unless you really want to check the
value (rather than propagating). If you really want to check the value you
might want to:
	variable.get(0).assigned() && (variable.get(0).val() == 0)

Christian

-----Original Message-----
From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf
Of Daniel Araya
Sent: Wednesday, November 14, 2007 11:42 PM
To: users at gecode.org
Subject: [gecode-users] Gecode/J

Hi, 

I discover that Gecode/J not implemented the function "atleast" and
"atmost",
but it is easy to resolve  with the function "count" and "rel". But I have a
Question:

How I do a restriction like:

VarArray variable;
VarInt Max;

IF(variable.get(0)==1){ //THIS IS THE PROBLEM!!

 linear(this,credits,variable,IRT_LQ,Max);
}

Thanks and sorry for the newbie question!




_______________________________________________
Gecode users mailing list
users at gecode.org
https://www.gecode.org/mailman/listinfo/gecode-users




From tack at ps.uni-sb.de  Thu Nov 15 15:58:06 2007
From: tack at ps.uni-sb.de (Guido Tack)
Date: Thu, 15 Nov 2007 15:58:06 +0100
Subject: [gecode-users] Gecode 2.0.0 released
Message-ID: <30918F24-8777-403E-9450-9F1A0F9236E8@ps.uni-sb.de>

We would like to announce the release of

                   Gecode 2.0.0
            http://www.gecode.org

As witnessed by the version number change, this is a major release
with too many changes, fixes, and additions to mention them all:
please consult the changelog at
http://www.gecode.org/gecode-doc-latest/PageChanges_2_0_0.html

The highlights are:

* New propagators: channeling between Integer variable and array of
   Boolean variables, circuit, table constraint (extensional),  
incremental
   regular constraint (extensional), incremental Boolean linear
   constraints
* Boolean variables have a dedicated implementation: twice as fast,
   half the memory
* Advisors for incremental propagation (see: Lagerkvist, Schulte,
   Advisors for Incremental Propagation, CP 2007)
* Many crucial performance and scalability improvements: memory
   management, memory footprint of propagators
* Many cleanups and more documentation, many new examples
* New set variables with complete domain representation (CpltSetVar)
   [experimental]
* A reflection API to query spaces about their propagators
   [experimental]

The features marked as experimental are all functional, but might be
revised in the next releases. Source packages and access to our
subversion repository is available immediately.  Binary packages for
several platforms as well as a release of Gecode/J will follow soon.

Cheers,

   The Gecode Team




From tack at ps.uni-sb.de  Thu Nov 15 16:05:58 2007
From: tack at ps.uni-sb.de (Guido Tack)
Date: Thu, 15 Nov 2007 16:05:58 +0100
Subject: [gecode-users] FlatZinc for Gecode 1.0 released
Message-ID: <58ED40C6-68BE-4136-9570-4B6BF54882E0@ps.uni-sb.de>

We would like to announce the release of

                   FlatZinc for Gecode 1.0
         http://www.gecode.org/flatzinc.html

FlatZinc is a low-level modelling language for constraint
problems. It is designed to be easily interfaceable to constraint
solvers (like Gecode). For more information on FlatZinc, please
refer to

http://www.g12.cs.mu.oz.au/minizinc/

We provide a parser that reads a FlatZinc model from a file, and
returns a Gecode Space object that represents the model. We
also provide a simple front-end, an executable program that
reads a FlatZinc model and prints the solution (if any) on the
standard output.

FlatZinc for Gecode requires the just-released Gecode 2.0.0, and
can be built and run on Windows, Linux, and Mac OS X.  We provide
source tarballs and access to our subversion repository and will add
binary packages for several platforms soon.

Cheers,
	Guido

-- 
Guido Tack
http://www.ps.uni-sb.de/~tack




From malcolmr at cse.unsw.edu.au  Fri Nov 16 00:54:29 2007
From: malcolmr at cse.unsw.edu.au (Malcolm Ryan)
Date: Fri, 16 Nov 2007 10:54:29 +1100
Subject: [gecode-users] Diagnosing failures
In-Reply-To: <01F41C96-4D4F-4736-9052-8343E5F0EAD2@cse.unsw.edu.au>
References: <0717F637-0AAA-4CB3-BB98-2F02B5AF0E19@cse.unsw.edu.au>
	<007001c82539$2ee23780$8ca6a680$@se>
	<DD1731A0-C9DF-46FB-8DEC-E37FC4729920@cse.unsw.edu.au>
	<000901c8256a$240668a0$6c1339e0$@se>
	<01F41C96-4D4F-4736-9052-8343E5F0EAD2@cse.unsw.edu.au>
Message-ID: <F6D53C83-41E2-49AC-AE26-4AA5A9FE0F1A@cse.unsw.edu.au>

On 13/11/2007, at 5:00 PM, Malcolm Ryan wrote:

> On 13/11/2007, at 7:25 AM, Christian Schulte wrote:
>
>> That's not quite an option: well known, there are too many propagator
>> invocations (really, absolutely incomprehensible).
>
> Really? I wouldn't have thought that there were so many. But then
> I've never written an engine.

I've been thinking about this some more and I'd really like to look  
into the debugging problem more deeply. I have some ideas I'd like to  
play with. When you say "too many propagator invocations", exactly  
how many are we talking about? Is there a simple mapping from a  
propagator to the constraint that created it? Is there any way I can  
access this data?

Malcolm

--
       "An inconvenience is only an adventure wrongly considered;
        an adventure is an inconvenience rightly considered."
                 - G.K.Chesterton, On Running After Ones Hat






From cschulte at kth.se  Mon Nov 19 11:34:57 2007
From: cschulte at kth.se (Christian Schulte)
Date: Mon, 19 Nov 2007 11:34:57 +0100
Subject: [gecode-users] Diagnosing failures
In-Reply-To: <F6D53C83-41E2-49AC-AE26-4AA5A9FE0F1A@cse.unsw.edu.au>
References: <0717F637-0AAA-4CB3-BB98-2F02B5AF0E19@cse.unsw.edu.au>	<007001c82539$2ee23780$8ca6a680$@se>	<DD1731A0-C9DF-46FB-8DEC-E37FC4729920@cse.unsw.edu.au>	<000901c8256a$240668a0$6c1339e0$@se>	<01F41C96-4D4F-4736-9052-8343E5F0EAD2@cse.unsw.edu.au>
	<F6D53C83-41E2-49AC-AE26-4AA5A9FE0F1A@cse.unsw.edu.au>
Message-ID: <00b801c82a97$d5fa2d30$81ee8790$@se>

Hi,

To give you an idea, take the following, rather small, examples (they are
included in Gecode).

 - Alpha, 21 propagators, 26 variables: 123 919 propagator executions
 - Golomb rulers 10, 55 variables, 46 propagators: 3 482 588 propagator
executions
 - Magic squares 7, 49 variables, 19 propagators: 9 596 013 propagator
executions

So that's quite something. And most of the propagator executions are not
really interesting. While debugging is difficult, and there is little known
how to do it, the level of abstraction of looking at a single propagator is
not really feasible.

Typically there is a pretty close mapping between a constraint and the
propagator implementing the constraint. But not always and typically not
after some propagations (propagators typically rewrite themselves).

Gecode 2.0 comes with a reflection layer that in principle allows you to get
to know everything about a space, but I do not know whether this will be
available in Gecode/J. Also, I would doubt that the amount of information is
useful.

But what helps a lot is using Gist as said. It will at least tell you the
results of propagation before branching. Just printing before and after
propagation is also not too bad.

Sorry that I cannot be more helpful than that.

Christian

--
Christian Schulte, http://www.imit.kth.se/~schulte/ 

-----Original Message-----
From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf
Of Malcolm Ryan
Sent: Friday, November 16, 2007 12:54 AM
To: gecode list
Subject: Re: [gecode-users] Diagnosing failures

On 13/11/2007, at 5:00 PM, Malcolm Ryan wrote:

> On 13/11/2007, at 7:25 AM, Christian Schulte wrote:
>
>> That's not quite an option: well known, there are too many propagator
>> invocations (really, absolutely incomprehensible).
>
> Really? I wouldn't have thought that there were so many. But then
> I've never written an engine.

I've been thinking about this some more and I'd really like to look  
into the debugging problem more deeply. I have some ideas I'd like to  
play with. When you say "too many propagator invocations", exactly  
how many are we talking about? Is there a simple mapping from a  
propagator to the constraint that created it? Is there any way I can  
access this data?

Malcolm

--
       "An inconvenience is only an adventure wrongly considered;
        an adventure is an inconvenience rightly considered."
                 - G.K.Chesterton, On Running After Ones Hat




_______________________________________________
Gecode users mailing list
users at gecode.org
https://www.gecode.org/mailman/listinfo/gecode-users




From malcolmr at cse.unsw.edu.au  Tue Nov 20 03:16:21 2007
From: malcolmr at cse.unsw.edu.au (Malcolm Ryan)
Date: Tue, 20 Nov 2007 13:16:21 +1100
Subject: [gecode-users] Gecode/J: bool_and()
Message-ID: <73975FA4-3202-4D0E-8B7E-B9C63C9F0858@cse.unsw.edu.au>

The function Gecode.bool_and(JavaSpace, VarArray<BoolVar>, BoolVar)  
acts in a way that I find counter-intuitive. If the VarArray is  
empty, this constraint will cause propagation to fail:

         VarArray<BoolVar> bools = new VarArray<BoolVar>();
         BoolVar bool = new BoolVar(space);
         Gecode.bool_and(space, bools, bool);
	System.out.println(space.status());

to my mind, the natural result would be to set 'bool' to true, i.e.  
the conjunction is true iff all the members are true. When there are  
no members, that statement is trivially satisfied.

Is there any rationale for the current operation?

Malcolm

--
Many clever men like you have trusted to civilisation.
Many clever Babylonians, many clever Egyptians,
Many clever men at the end of Rome.
                               - G.K.Chesterton, The Napoleon of  
Notting Hill






From malcolmr at cse.unsw.edu.au  Tue Nov 20 08:13:37 2007
From: malcolmr at cse.unsw.edu.au (Malcolm Ryan)
Date: Tue, 20 Nov 2007 18:13:37 +1100
Subject: [gecode-users] Detecting a complete problem
Message-ID: <94323840-BCB9-4E89-ADE9-5D90BCF89BFA@cse.unsw.edu.au>

How does Gecode/J decide that a problem is complete? I've just tried  
running Gist on a problem and it stopped at the root node and said it  
was solved, even though many variables were still unbound.

E.g:

public class Test1 extends Space {

     private VarArray<IntVar> vars;

     public Test1() {
         super();
         IntVar a = new IntVar(this, 1, 3);

         vars = new VarArray<IntVar>();
         vars.add(a);
         Gecode.branch(this, vars, BvarSel.BVAR_DEGREE_MIN,  
BvalSel.BVAL_MIN);
     }

     public Test1(Boolean share, Test1 old) {
         vars = new VarArray<IntVar>(this, share, old.vars);
     }

     public String toString() {
         return vars.toString();
     }

     public static void main(String[] args) {
         Test1 test1 = new Test1();

         Gist gist = new Gist(test1);
     }
}

--
"The modern man in revolt has become
           practically useless for all purposes of revolt.
By rebelling against everything
           he has lost his right to rebel against anything."
                                                    - G.K.Chesterton,  
Orthodoxy






From malcolmr at cse.unsw.edu.au  Wed Nov 21 00:14:31 2007
From: malcolmr at cse.unsw.edu.au (Malcolm Ryan)
Date: Wed, 21 Nov 2007 10:14:31 +1100
Subject: [gecode-users] Diagnosing failures
In-Reply-To: <00b801c82a97$d5fa2d30$81ee8790$@se>
References: <0717F637-0AAA-4CB3-BB98-2F02B5AF0E19@cse.unsw.edu.au>	<007001c82539$2ee23780$8ca6a680$@se>	<DD1731A0-C9DF-46FB-8DEC-E37FC4729920@cse.unsw.edu.au>	<000901c8256a$240668a0$6c1339e0$@se>	<01F41C96-4D4F-4736-9052-8343E5F0EAD2@cse.unsw.edu.au>
	<F6D53C83-41E2-49AC-AE26-4AA5A9FE0F1A@cse.unsw.edu.au>
	<00b801c82a97$d5fa2d30$81ee8790$@se>
Message-ID: <D24B5280-6BCD-4123-BCFE-E2C59628353E@cse.unsw.edu.au>

On 19/11/2007, at 9:34 PM, Christian Schulte wrote:

> Hi,
>
> To give you an idea, take the following, rather small, examples  
> (they are
> included in Gecode).
>
>  - Alpha, 21 propagators, 26 variables: 123 919 propagator executions
>  - Golomb rulers 10, 55 variables, 46 propagators: 3 482 588  
> propagator
> executions
>  - Magic squares 7, 49 variables, 19 propagators: 9 596 013 propagator
> executions

I see. Yes, that is a lot.

> So that's quite something. And most of the propagator executions  
> are not
> really interesting. While debugging is difficult, and there is  
> little known
> how to do it, the level of abstraction of looking at a single  
> propagator is
> not really feasible.

Clearly not. But neither do you want to inspect all the machine  
operations in a standard program. Some abstraction is necessary. The  
S-boxes idea is a good start. Grouping the variables into meaningful  
structures (i.e. objects) could also help. And then you have causal  
relations between propagator executions, don't you? Ie, propagator X  
fired, constraining variable V, which in turn caused propagator Y to  
fire. If you could visualise the causation graph at a level of  
abstraction, you'd have the beginnings of a useful tool.

> Typically there is a pretty close mapping between a constraint and the
> propagator implementing the constraint. But not always and  
> typically not
> after some propagations (propagators typically rewrite themselves).
>
> Gecode 2.0 comes with a reflection layer that in principle allows  
> you to get
> to know everything about a space, but I do not know whether this  
> will be
> available in Gecode/J. Also, I would doubt that the amount of  
> information is
> useful.
>
> But what helps a lot is using Gist as said. It will at least tell  
> you the
> results of propagation before branching. Just printing before and  
> after
> propagation is also not too bad.

Gist is great for visualising the search, but as you say, there are  
many constraint propagation steps between one search step and the next.

> Sorry that I cannot be more helpful than that.

That's okay. I appreciate that it is not a solved problem. I'm just  
throwing around some ideas. Maybe I'll try them out myself, if I find  
time.

Malcolm

--
      "The act of defending any of the cardinal virtues has today all
       the exhilaration of a vice."
                                     - G.K.Chesterton A Defense of  
Humility






From malcolmr at cse.unsw.edu.au  Wed Nov 21 00:45:22 2007
From: malcolmr at cse.unsw.edu.au (Malcolm Ryan)
Date: Wed, 21 Nov 2007 10:45:22 +1100
Subject: [gecode-users] Detecting a complete problem
Message-ID: <5F11DEB0-E7A8-4C19-8C36-54D7324E381B@cse.unsw.edu.au>

On 20/11/2007, at 6:13 PM, Malcolm Ryan wrote:
> How does Gecode/J decide that a problem is complete? I've just tried
> running Gist on a problem and it stopped at the root node and said it
> was solved, even though many variables were still unbound.

Aha, I found the problem. There's a missing line in the copy  
constructor:

>      public Test1(Boolean share, Test1 old) {
	
	super(share, old);

>          vars = new VarArray<IntVar>(this, share, old.vars);
>      }

Malcolm

--
      "Progress should mean that we are always changing the world to fit
       the vision, instead we are always changing the vision."
                - G.K.Chesterton, Orthodoxy





From malcolmr at cse.unsw.edu.au  Wed Nov 21 02:14:17 2007
From: malcolmr at cse.unsw.edu.au (Malcolm Ryan)
Date: Wed, 21 Nov 2007 12:14:17 +1100
Subject: [gecode-users] Writing a Branching
Message-ID: <119BCA17-CE16-438D-B27B-C3B11262375F@cse.unsw.edu.au>

I need to write my own Branching for my problem. Is there any  
documentation on how they work? Or are there any examples?

Malcolm

--
      "Progress should mean that we are always changing the world to fit
       the vision, instead we are always changing the vision."
                - G.K.Chesterton, Orthodoxy






From zayenz at gmail.com  Wed Nov 21 07:29:24 2007
From: zayenz at gmail.com (Mikael Zayenz Lagerkvist)
Date: Wed, 21 Nov 2007 07:29:24 +0100
Subject: [gecode-users] Detecting a complete problem
In-Reply-To: <5F11DEB0-E7A8-4C19-8C36-54D7324E381B@cse.unsw.edu.au>
References: <5F11DEB0-E7A8-4C19-8C36-54D7324E381B@cse.unsw.edu.au>
Message-ID: <63b5c8b00711202229v287c770fk2b4f2188756aaef0@mail.gmail.com>

On Nov 21, 2007 12:45 AM, Malcolm Ryan <malcolmr at cse.unsw.edu.au> wrote:
> On 20/11/2007, at 6:13 PM, Malcolm Ryan wrote:
> > How does Gecode/J decide that a problem is complete? I've just tried
> > running Gist on a problem and it stopped at the root node and said it
> > was solved, even though many variables were still unbound.

Gecode considers a Space solved when there are no more banchings left.


> Aha, I found the problem. There's a missing line in the copy
> constructor:
>
> >      public Test1(Boolean share, Test1 old) {
>
>         super(share, old);

The explanation for this is that leaving out the call to the correct
super-constructor had the effect that neither propagators nor
branchings will be copied. Thus the new Space will have no branchings,
and is therefore "solved".


Cheers,
Mikael


-- 
Mikael Zayenz Lagerkvist, http://www.ict.kth.se/~zayenz/



From zayenz at gmail.com  Wed Nov 21 07:37:59 2007
From: zayenz at gmail.com (Mikael Zayenz Lagerkvist)
Date: Wed, 21 Nov 2007 07:37:59 +0100
Subject: [gecode-users] Writing a Branching
In-Reply-To: <119BCA17-CE16-438D-B27B-C3B11262375F@cse.unsw.edu.au>
References: <119BCA17-CE16-438D-B27B-C3B11262375F@cse.unsw.edu.au>
Message-ID: <63b5c8b00711202237p4b919b31tafd564c35ac77047@mail.gmail.com>

On Nov 21, 2007 2:14 AM, Malcolm Ryan <malcolmr at cse.unsw.edu.au> wrote:
> I need to write my own Branching for my problem. Is there any
> documentation on how they work? Or are there any examples?

There is a very simple example in examples/QueensJavaPropagator.java.

The best documentation is currently the one supplied with Gecode:
http://www.gecode.org/gecode-doc-latest/classGecode_1_1Branching.html

Note that we currently do not support subclassing BranchingDesc in
Java, instead we supply a single one called JavaBranchingDesc which
has two integer memebers (accessed through pos() and val()). This will
most probably be changed for Gecode/J 2.0.0.

Hope this helps,
Mikael

-- 
Mikael Zayenz Lagerkvist, http://www.ict.kth.se/~zayenz/



From zayenz at gmail.com  Wed Nov 21 08:02:50 2007
From: zayenz at gmail.com (Mikael Zayenz Lagerkvist)
Date: Wed, 21 Nov 2007 08:02:50 +0100
Subject: [gecode-users] Diagnosing failures
In-Reply-To: <D24B5280-6BCD-4123-BCFE-E2C59628353E@cse.unsw.edu.au>
References: <0717F637-0AAA-4CB3-BB98-2F02B5AF0E19@cse.unsw.edu.au>
	<007001c82539$2ee23780$8ca6a680$@se>
	<DD1731A0-C9DF-46FB-8DEC-E37FC4729920@cse.unsw.edu.au>
	<000901c8256a$240668a0$6c1339e0$@se>
	<01F41C96-4D4F-4736-9052-8343E5F0EAD2@cse.unsw.edu.au>
	<F6D53C83-41E2-49AC-AE26-4AA5A9FE0F1A@cse.unsw.edu.au>
	<00b801c82a97$d5fa2d30$81ee8790$@se>
	<D24B5280-6BCD-4123-BCFE-E2C59628353E@cse.unsw.edu.au>
Message-ID: <63b5c8b00711202302l257eb2b4j8b948a6a4b3a418b@mail.gmail.com>

On Nov 21, 2007 12:14 AM, Malcolm Ryan <malcolmr at cse.unsw.edu.au> wrote:
> Clearly not. But neither do you want to inspect all the machine
> operations in a standard program. Some abstraction is necessary. The
> S-boxes idea is a good start. Grouping the variables into meaningful
> structures (i.e. objects) could also help. And then you have causal
> relations between propagator executions, don't you? Ie, propagator X
> fired, constraining variable V, which in turn caused propagator Y to
> fire. If you could visualise the causation graph at a level of
> abstraction, you'd have the beginnings of a useful tool.

What causes a propagator to do some propagation might not be so simple
as you describe. Typically, a propagator will have many variables it
subscribes to, and several of them might be modified. Furthermore, the
variables might be modified by different propagators, or a variable
might be modified several times by a single propagator (due to
priorities).

Even harder, even if there is only a single modification to a variable
x that makes propagator P run, it might not be the only relevant
modification for the result of the propagation of P. Here is a small
example of this.


Variables: x={1,2,3,4}, y={1,2,3,4}
Propagators: P1 (x!=3), P2 (y>=3), and P3 (y==x)
P1 and P2 are currently scheduled for execution, but P3 is not.
Furthermore, P3 is a bounds-consistent equality propagator (thus it
only reasons on the bounds of variables).

In the first step, P1 runs. This gives the domains x={1,2,4},
y={1,2,3,4}. Nothing changes in the bounds of x and y, which means
that P3 is not going to be scheduled.

In the second step, P2 runs. This gives the domains x={1,2,4},
y={3,4}, and P3 is scheduled for propagation (the bounds of y has
changed).

In the third step, P3 runs giving the domains x={4}, y={4}.

The removal of 3 from the domain of y by propagator P3 is not "caused"
by P2 in some sense, even though this is the only propagator that made
modifications that made P3 runnable. Instead it is caused by the
modifications done by P1, which -at the time they were done- were not
relevant to P3.


I hope this explains the complexity of causation a little more.

Cheers,
Mikael

-- 
Mikael Zayenz Lagerkvist, http://www.ict.kth.se/~zayenz/



From cschulte at kth.se  Wed Nov 21 10:25:54 2007
From: cschulte at kth.se (Christian Schulte)
Date: Wed, 21 Nov 2007 10:25:54 +0100
Subject: [gecode-users] Gecode/J: bool_and()
In-Reply-To: <73975FA4-3202-4D0E-8B7E-B9C63C9F0858@cse.unsw.edu.au>
References: <73975FA4-3202-4D0E-8B7E-B9C63C9F0858@cse.unsw.edu.au>
Message-ID: <015c01c82c20$858aa250$909fe6f0$@se>

Hi Malcolm,

There is no rational whatsoever: Gecode 1.* just got it wrong. For Gecode
2.0.0 the interface for Boolean constraints has been reworked and does what
logic demands ;-)

Christian

--
Christian Schulte, http://www.imit.kth.se/~schulte/ 

-----Original Message-----
From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf
Of Malcolm Ryan
Sent: Tuesday, November 20, 2007 3:16 AM
To: gecode list
Subject: [gecode-users] Gecode/J: bool_and()

The function Gecode.bool_and(JavaSpace, VarArray<BoolVar>, BoolVar)  
acts in a way that I find counter-intuitive. If the VarArray is  
empty, this constraint will cause propagation to fail:

         VarArray<BoolVar> bools = new VarArray<BoolVar>();
         BoolVar bool = new BoolVar(space);
         Gecode.bool_and(space, bools, bool);
	System.out.println(space.status());

to my mind, the natural result would be to set 'bool' to true, i.e.  
the conjunction is true iff all the members are true. When there are  
no members, that statement is trivially satisfied.

Is there any rationale for the current operation?

Malcolm

--
Many clever men like you have trusted to civilisation.
Many clever Babylonians, many clever Egyptians,
Many clever men at the end of Rome.
                               - G.K.Chesterton, The Napoleon of  
Notting Hill




_______________________________________________
Gecode users mailing list
users at gecode.org
https://www.gecode.org/mailman/listinfo/gecode-users




From malcolmr at cse.unsw.edu.au  Thu Nov 22 04:02:51 2007
From: malcolmr at cse.unsw.edu.au (Malcolm Ryan)
Date: Thu, 22 Nov 2007 14:02:51 +1100
Subject: [gecode-users] Writing a Branching
In-Reply-To: <63b5c8b00711202237p4b919b31tafd564c35ac77047@mail.gmail.com>
References: <119BCA17-CE16-438D-B27B-C3B11262375F@cse.unsw.edu.au>
	<63b5c8b00711202237p4b919b31tafd564c35ac77047@mail.gmail.com>
Message-ID: <1103B40F-17F5-4179-B723-4A22290EDC7F@cse.unsw.edu.au>


On 21/11/2007, at 5:37 PM, Mikael Zayenz Lagerkvist wrote:

> On Nov 21, 2007 2:14 AM, Malcolm Ryan <malcolmr at cse.unsw.edu.au>  
> wrote:
>> I need to write my own Branching for my problem. Is there any
>> documentation on how they work? Or are there any examples?
>
> There is a very simple example in examples/QueensJavaPropagator.java.

Thanks. It seems pretty simple. Does the Branching always have to  
copy the variables it is given when it is created? Vis:

     public Naive(Space home, VarArray<IntVar> x0) {
         x = new ViewArray<IntVarView>(home, IntVarView.class, x0);
     }

Malcolm

--
"If there is one thing worse than the modern weakening of major morals
    it is the modern strengthening of minor morals.
Thus it is considered more withering to accuse a man
    of bad taste than of bad ethics."    -- G.K.Chesterton, On Lying  
in Bed






From malcolmr at cse.unsw.edu.au  Thu Nov 22 04:18:50 2007
From: malcolmr at cse.unsw.edu.au (Malcolm Ryan)
Date: Thu, 22 Nov 2007 14:18:50 +1100
Subject: [gecode-users] Writing a Branching
In-Reply-To: <63b5c8b00711202237p4b919b31tafd564c35ac77047@mail.gmail.com>
References: <119BCA17-CE16-438D-B27B-C3B11262375F@cse.unsw.edu.au>
	<63b5c8b00711202237p4b919b31tafd564c35ac77047@mail.gmail.com>
Message-ID: <BD946019-8AD6-485E-8651-CC5894B56202@cse.unsw.edu.au>

On 21/11/2007, at 5:37 PM, Mikael Zayenz Lagerkvist wrote:

> On Nov 21, 2007 2:14 AM, Malcolm Ryan <malcolmr at cse.unsw.edu.au>  
> wrote:
>> I need to write my own Branching for my problem. Is there any
>> documentation on how they work? Or are there any examples?
>
> There is a very simple example in examples/QueensJavaPropagator.java.
>
> The best documentation is currently the one supplied with Gecode:
> http://www.gecode.org/gecode-doc-latest/classGecode_1_1Branching.html

Is there a java class which represents the built-in branching (ie the  
one used by Gecode.branching()). I'd like to make make custom  
branching delegate to the builtin in certain circumstances (on a  
particular subset of variables).

Malcolm

--
"Our age is not willing to stop with faith,
     with its miracle of turning water into wine,
         it goes further, it turns wine into water."
             -- Soren Kierkegaard, "Fear and Trembling"





From zayenz at gmail.com  Thu Nov 22 07:13:57 2007
From: zayenz at gmail.com (Mikael Zayenz Lagerkvist)
Date: Thu, 22 Nov 2007 07:13:57 +0100
Subject: [gecode-users] Writing a Branching
In-Reply-To: <BD946019-8AD6-485E-8651-CC5894B56202@cse.unsw.edu.au>
References: <119BCA17-CE16-438D-B27B-C3B11262375F@cse.unsw.edu.au>
	<63b5c8b00711202237p4b919b31tafd564c35ac77047@mail.gmail.com>
	<BD946019-8AD6-485E-8651-CC5894B56202@cse.unsw.edu.au>
Message-ID: <63b5c8b00711212213u3f127a57q50ec34c23abf4503@mail.gmail.com>

On Nov 22, 2007 4:18 AM, Malcolm Ryan <malcolmr at cse.unsw.edu.au> wrote:
> On 21/11/2007, at 5:37 PM, Mikael Zayenz Lagerkvist wrote:
>
> > On Nov 21, 2007 2:14 AM, Malcolm Ryan <malcolmr at cse.unsw.edu.au>
> > wrote:
> >> I need to write my own Branching for my problem. Is there any
> >> documentation on how they work? Or are there any examples?
> >
> > There is a very simple example in examples/QueensJavaPropagator.java.
> >
> > The best documentation is currently the one supplied with Gecode:
> > http://www.gecode.org/gecode-doc-latest/classGecode_1_1Branching.html
>
> Is there a java class which represents the built-in branching (ie the
> one used by Gecode.branching()). I'd like to make make custom
> branching delegate to the builtin in certain circumstances (on a
> particular subset of variables).

No, the standard branching class is not exposed in Java. On the other
hand, I'm not sure what you aim to do. You can have more than one
branching in a Space, so you can have a standard branching
instantiating all variables after your custom branching is finished.

Note that there is a bug in Gecode 1.3.1 that forces you to post all
branchings in the root-space.

Cheers,
Mikael


-- 
Mikael Zayenz Lagerkvist, http://www.ict.kth.se/~zayenz/



From zayenz at gmail.com  Thu Nov 22 07:15:29 2007
From: zayenz at gmail.com (Mikael Zayenz Lagerkvist)
Date: Thu, 22 Nov 2007 07:15:29 +0100
Subject: [gecode-users] Writing a Branching
In-Reply-To: <1103B40F-17F5-4179-B723-4A22290EDC7F@cse.unsw.edu.au>
References: <119BCA17-CE16-438D-B27B-C3B11262375F@cse.unsw.edu.au>
	<63b5c8b00711202237p4b919b31tafd564c35ac77047@mail.gmail.com>
	<1103B40F-17F5-4179-B723-4A22290EDC7F@cse.unsw.edu.au>
Message-ID: <63b5c8b00711212215w46d4d629lfbca99dcbc357748@mail.gmail.com>

On Nov 22, 2007 4:02 AM, Malcolm Ryan <malcolmr at cse.unsw.edu.au> wrote:
> Does the Branching always have to  copy the variables it is given when it
> is created? Vis:
>
>      public Naive(Space home, VarArray<IntVar> x0) {
>          x = new ViewArray<IntVarView>(home, IntVarView.class, x0);
>      }

Making IntVarView's out of variables does not copy them. Both IntView
and IntVarView are simple wrappers around pointers to the real
variable.

The general rule is that IntVar's are for modelling, while IntVarViews
are for actors. A view has methods for modifying the domain of a
variable, while a var lacks those methods.

Cheers,
Mikael

-- 
Mikael Zayenz Lagerkvist, http://www.ict.kth.se/~zayenz/



From malcolmr at cse.unsw.edu.au  Thu Nov 22 08:32:22 2007
From: malcolmr at cse.unsw.edu.au (Malcolm Ryan)
Date: Thu, 22 Nov 2007 18:32:22 +1100
Subject: [gecode-users] Writing a Branching
In-Reply-To: <63b5c8b00711212213u3f127a57q50ec34c23abf4503@mail.gmail.com>
References: <119BCA17-CE16-438D-B27B-C3B11262375F@cse.unsw.edu.au>
	<63b5c8b00711202237p4b919b31tafd564c35ac77047@mail.gmail.com>
	<BD946019-8AD6-485E-8651-CC5894B56202@cse.unsw.edu.au>
	<63b5c8b00711212213u3f127a57q50ec34c23abf4503@mail.gmail.com>
Message-ID: <128EC681-EB57-44CD-8E17-6F14B1B6A960@cse.unsw.edu.au>


On 22/11/2007, at 5:13 PM, Mikael Zayenz Lagerkvist wrote:

> No, the standard branching class is not exposed in Java. On the other
> hand, I'm not sure what you aim to do. You can have more than one
> branching in a Space, so you can have a standard branching
> instantiating all variables after your custom branching is finished.

I am dealing with collections of variables which represent a variable- 
length plan. So there is a "length" variable and a collection of  
"element" variables. The element variables beyond the length value  
have no significance. I do not wish to waste time choosing bindings  
for them. So essentially my Branching just looks at elements 0  
through length.min() - 1.

Having determined this set, I then want to choose one variable and  
assign it a value. I would like to experiment with a range of ways of  
choosing this variable and value, including all the standard ways. In  
would be easier if I could use an existing implementation to do this.

> Note that we currently do not support subclassing BranchingDesc in
> Java, instead we supply a single one called JavaBranchingDesc which
> has two integer memebers (accessed through pos() and val()). This will
> most probably be changed for Gecode/J 2.0.0.

I hope so. My problem is more naturally structured as a collection of  
lists. Representing a variable choice as a single integer involves a  
rather arbitrary encoding.

What is the timeframe for Gecode/J 2.0.0?

> Note that there is a bug in Gecode 1.3.1 that forces you to post all
> branchings in the root-space.

I don't understand. What would the alternative be? Can you have  
nested spaces? How?

Malcolm

--
Many clever men like you have trusted to civilisation.
Many clever Babylonians, many clever Egyptians,
Many clever men at the end of Rome.
                               - G.K.Chesterton, The Napoleon of  
Notting Hill






From zayenz at gmail.com  Thu Nov 22 08:56:52 2007
From: zayenz at gmail.com (Mikael Zayenz Lagerkvist)
Date: Thu, 22 Nov 2007 08:56:52 +0100
Subject: [gecode-users] Writing a Branching
In-Reply-To: <128EC681-EB57-44CD-8E17-6F14B1B6A960@cse.unsw.edu.au>
References: <119BCA17-CE16-438D-B27B-C3B11262375F@cse.unsw.edu.au>
	<63b5c8b00711202237p4b919b31tafd564c35ac77047@mail.gmail.com>
	<BD946019-8AD6-485E-8651-CC5894B56202@cse.unsw.edu.au>
	<63b5c8b00711212213u3f127a57q50ec34c23abf4503@mail.gmail.com>
	<128EC681-EB57-44CD-8E17-6F14B1B6A960@cse.unsw.edu.au>
Message-ID: <63b5c8b00711212356q795c5cfq1c103a8c04f31d36@mail.gmail.com>

On Nov 22, 2007 8:32 AM, Malcolm Ryan <malcolmr at cse.unsw.edu.au> wrote:
>
> On 22/11/2007, at 5:13 PM, Mikael Zayenz Lagerkvist wrote:
>
> > No, the standard branching class is not exposed in Java. On the other
> > hand, I'm not sure what you aim to do. You can have more than one
> > branching in a Space, so you can have a standard branching
> > instantiating all variables after your custom branching is finished.
>
> I am dealing with collections of variables which represent a variable-
> length plan. So there is a "length" variable and a collection of
> "element" variables. The element variables beyond the length value
> have no significance. I do not wish to waste time choosing bindings
> for them. So essentially my Branching just looks at elements 0
> through length.min() - 1.
>
> Having determined this set, I then want to choose one variable and
> assign it a value. I would like to experiment with a range of ways of
> choosing this variable and value, including all the standard ways. In
> would be easier if I could use an existing implementation to do this.

As an alternative, you could could add constraints that make the
variables after length.min()-1 be assigned some dummy value. Something
along the lines of
    for (int i = 0; i < vars.length; ++i) {
        post(this,
                new BExpr(length, IRT_LQ, i).imp(vars[i], IRT_EQ, dummy_val));
    }

With this, any branching (your or one of the standard ones) would just
operate on the variables at indexes less than length.


> What is the timeframe for Gecode/J 2.0.0?

We are currently working on it, and hope to have it finished as soon
as possible. Sorry I can't give a better answer than that.


> > Note that there is a bug in Gecode 1.3.1 that forces you to post all
> > branchings in the root-space.
>
> I don't understand. What would the alternative be?

The alternative is that additional branchings are posted as search progresses.


Cheers,
Mikael

-- 
Mikael Zayenz Lagerkvist, http://www.ict.kth.se/~zayenz/



From tack at ps.uni-sb.de  Thu Nov 22 12:48:05 2007
From: tack at ps.uni-sb.de (Guido Tack)
Date: Thu, 22 Nov 2007 12:48:05 +0100
Subject: [gecode-users] Gecode Performance Evolution
Message-ID: <DCAEBE8B-B2E1-4B9C-BC4F-A20972BA4C44@ps.uni-sb.de>

Hi everyone,

following our release, we have now updated our benchmark pages to  
reflect the changes in Gecoder version 2.0.0.  We've also updated to  
more recent versions of the solvers we compare against.

In addition, the changelog page (http://www.gecode.org/changes.html)  
now shows how Gecode performance has evolved between the different  
versions.

Cheers,
	Guido

-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 2436 bytes
Desc: not available
URL: <http://www.ps.uni-sb.de/pipermail/users/attachments/20071122/0c89583e/attachment.bin>

From mmann at informatik.uni-freiburg.de  Thu Nov 22 15:46:01 2007
From: mmann at informatik.uni-freiburg.de (Martin Mann)
Date: Thu, 22 Nov 2007 15:46:01 +0100
Subject: [gecode-users] Soft constraints ?
Message-ID: <47459629.4020109@informatik.uni-freiburg.de>


Hi,

I am sorry to ask totally unprepared about the topic but hope you 
excuse. I've no deeper knowledge about soft constraints right now and 
not checked the Gecode API seriously for that. :)

Is there direct support for soft constraints in Gecode?
If so where to start looking?
If not is there an easy workaround to enable something similar? (Maybe 
some literature to start with?)

Sorry for asking without knowing much about the things I am intrested 
in. But we are thinking about a student thesis based on soft constraints 
and would like to implement it using Gecode.

Thanks for any reply,

Martin


-- 
Martin Mann, Dipl. Bioinf.
Bioinformatics - Inst. of Computer Science
Albert-Ludwigs-University Freiburg
Tel: ++49-761-203-8259
Fax: ++49-761-203-7462
http://www.bioinf.uni-freiburg.de/~mmann/



From jpeliz at icmc.usp.br  Thu Nov 22 17:44:14 2007
From: jpeliz at icmc.usp.br (Jorge Marques Pelizzoni)
Date: Thu, 22 Nov 2007 14:44:14 -0200 (BRST)
Subject: [gecode-users] Soft constraints ?
In-Reply-To: <47459629.4020109@informatik.uni-freiburg.de>
References: <47459629.4020109@informatik.uni-freiburg.de>
Message-ID: <10514.200.158.222.67.1195749854.squirrel@mail2.icmc.usp.br>


I'm no soft constraints wiz either, but as far as I know this is how you
would approach it: all your soft constraints must be reified and used in
the concoction of a cost variable/function. Then you solve your problem by
optimizing this variable.

Cheers,

Jorge.

Martin Mann escreveu:
>
> Hi,
>
> I am sorry to ask totally unprepared about the topic but hope you
> excuse. I've no deeper knowledge about soft constraints right now and
> not checked the Gecode API seriously for that. :)
>
> Is there direct support for soft constraints in Gecode?
> If so where to start looking?
> If not is there an easy workaround to enable something similar? (Maybe
> some literature to start with?)
>
> Sorry for asking without knowing much about the things I am intrested
> in. But we are thinking about a student thesis based on soft constraints
> and would like to implement it using Gecode.
>
> Thanks for any reply,
>
> Martin
>
>
> --
> Martin Mann, Dipl. Bioinf.
> Bioinformatics - Inst. of Computer Science
> Albert-Ludwigs-University Freiburg
> Tel: ++49-761-203-8259
> Fax: ++49-761-203-7462
> http://www.bioinf.uni-freiburg.de/~mmann/
>
> _______________________________________________
> Gecode users mailing list
> users at gecode.org
> https://www.gecode.org/mailman/listinfo/gecode-users
>


Jorge M. Pelizzoni
ICMC - Universidade de S?o Paulo




From cschulte at kth.se  Thu Nov 22 19:54:48 2007
From: cschulte at kth.se (Christian Schulte)
Date: Thu, 22 Nov 2007 19:54:48 +0100
Subject: [gecode-users] Soft constraints ?
In-Reply-To: <10514.200.158.222.67.1195749854.squirrel@mail2.icmc.usp.br>
References: <47459629.4020109@informatik.uni-freiburg.de>
	<10514.200.158.222.67.1195749854.squirrel@mail2.icmc.usp.br>
Message-ID: <001001c82d39$2a989e50$7fc9daf0$@se>

There are dedicated frameworks for softconstraints being more powerful than
what Jorge mentioned.

For soft-constraints based on semirings there are some papers by Georget,
Codognet, Rossi, ... (if memory serves me right) that explain how to
implement them. But that's not far from obvious and I would not know where
to get started in Gecode.

Christian 

-----Original Message-----
From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf
Of Jorge Marques Pelizzoni
Sent: Thursday, November 22, 2007 5:44 PM
To: gecode user list
Subject: Re: [gecode-users] Soft constraints ?


I'm no soft constraints wiz either, but as far as I know this is how you
would approach it: all your soft constraints must be reified and used in
the concoction of a cost variable/function. Then you solve your problem by
optimizing this variable.

Cheers,

Jorge.

Martin Mann escreveu:
>
> Hi,
>
> I am sorry to ask totally unprepared about the topic but hope you
> excuse. I've no deeper knowledge about soft constraints right now and
> not checked the Gecode API seriously for that. :)
>
> Is there direct support for soft constraints in Gecode?
> If so where to start looking?
> If not is there an easy workaround to enable something similar? (Maybe
> some literature to start with?)
>
> Sorry for asking without knowing much about the things I am intrested
> in. But we are thinking about a student thesis based on soft constraints
> and would like to implement it using Gecode.
>
> Thanks for any reply,
>
> Martin
>
>
> --
> Martin Mann, Dipl. Bioinf.
> Bioinformatics - Inst. of Computer Science
> Albert-Ludwigs-University Freiburg
> Tel: ++49-761-203-8259
> Fax: ++49-761-203-7462
> http://www.bioinf.uni-freiburg.de/~mmann/
>
> _______________________________________________
> Gecode users mailing list
> users at gecode.org
> https://www.gecode.org/mailman/listinfo/gecode-users
>


Jorge M. Pelizzoni
ICMC - Universidade de S?o Paulo


_______________________________________________
Gecode users mailing list
users at gecode.org
https://www.gecode.org/mailman/listinfo/gecode-users




From trosky99 at gmail.com  Thu Nov 22 20:35:29 2007
From: trosky99 at gmail.com (Alberto Delgado)
Date: Thu, 22 Nov 2007 14:35:29 -0500
Subject: [gecode-users] Soft constraints ?
In-Reply-To: <001001c82d39$2a989e50$7fc9daf0$@se>
References: <47459629.4020109@informatik.uni-freiburg.de>
	<10514.200.158.222.67.1195749854.squirrel@mail2.icmc.usp.br>
	<001001c82d39$2a989e50$7fc9daf0$@se>
Message-ID: <e3e0e6e10711221135h4f0332d7o13cabb2806b8ddd7@mail.gmail.com>

This might help you :

http://cic.puj.edu.co/~adelgado/files/CLEISoft.pdf

Regards,

Alberto

On Nov 22, 2007 1:54 PM, Christian Schulte <cschulte at kth.se> wrote:

> There are dedicated frameworks for softconstraints being more powerful
> than
> what Jorge mentioned.
>
> For soft-constraints based on semirings there are some papers by Georget,
> Codognet, Rossi, ... (if memory serves me right) that explain how to
> implement them. But that's not far from obvious and I would not know where
> to get started in Gecode.
>
> Christian
>
> -----Original Message-----
> From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf
> Of Jorge Marques Pelizzoni
> Sent: Thursday, November 22, 2007 5:44 PM
> To: gecode user list
> Subject: Re: [gecode-users] Soft constraints ?
>
>
> I'm no soft constraints wiz either, but as far as I know this is how you
> would approach it: all your soft constraints must be reified and used in
> the concoction of a cost variable/function. Then you solve your problem by
> optimizing this variable.
>
> Cheers,
>
> Jorge.
>
> Martin Mann escreveu:
> >
> > Hi,
> >
> > I am sorry to ask totally unprepared about the topic but hope you
> > excuse. I've no deeper knowledge about soft constraints right now and
> > not checked the Gecode API seriously for that. :)
> >
> > Is there direct support for soft constraints in Gecode?
> > If so where to start looking?
> > If not is there an easy workaround to enable something similar? (Maybe
> > some literature to start with?)
> >
> > Sorry for asking without knowing much about the things I am intrested
> > in. But we are thinking about a student thesis based on soft constraints
> > and would like to implement it using Gecode.
> >
> > Thanks for any reply,
> >
> > Martin
> >
> >
> > --
> > Martin Mann, Dipl. Bioinf.
> > Bioinformatics - Inst. of Computer Science
> > Albert-Ludwigs-University Freiburg
> > Tel: ++49-761-203-8259
> > Fax: ++49-761-203-7462
> > http://www.bioinf.uni-freiburg.de/~mmann/<http://www.bioinf.uni-freiburg.de/%7Emmann/>
> >
> > _______________________________________________
> > Gecode users mailing list
> > users at gecode.org
> > https://www.gecode.org/mailman/listinfo/gecode-users
> >
>
>
> Jorge M. Pelizzoni
> ICMC - Universidade de S?o Paulo
>
>
> _______________________________________________
> Gecode users mailing list
> users at gecode.org
> https://www.gecode.org/mailman/listinfo/gecode-users
>
>
> _______________________________________________
> Gecode users mailing list
> users at gecode.org
> https://www.gecode.org/mailman/listinfo/gecode-users
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.ps.uni-sb.de/pipermail/users/attachments/20071122/8904e255/attachment.htm>

From mmann at informatik.uni-freiburg.de  Thu Nov 22 21:19:15 2007
From: mmann at informatik.uni-freiburg.de (Martin Mann)
Date: Thu, 22 Nov 2007 21:19:15 +0100
Subject: [gecode-users] Soft constraints ?
In-Reply-To: <e3e0e6e10711221135h4f0332d7o13cabb2806b8ddd7@mail.gmail.com>
References: <47459629.4020109@informatik.uni-freiburg.de>	<10514.200.158.222.67.1195749854.squirrel@mail2.icmc.usp.br>	<001001c82d39$2a989e50$7fc9daf0$@se>
	<e3e0e6e10711221135h4f0332d7o13cabb2806b8ddd7@mail.gmail.com>
Message-ID: <4745E443.8030409@informatik.uni-freiburg.de>

Wow,

thanks a lot for your various response! This will give me an entry point 
to start from.

Regards,

Martin


Alberto Delgado schrieb:
> This might help you :
> 
> http://cic.puj.edu.co/~adelgado/files/CLEISoft.pdf
> 
> Regards,
> 
> Alberto
> 
> On Nov 22, 2007 1:54 PM, Christian Schulte <cschulte at kth.se> wrote:
> 
>> There are dedicated frameworks for softconstraints being more powerful
>> than
>> what Jorge mentioned.
>>
>> For soft-constraints based on semirings there are some papers by Georget,
>> Codognet, Rossi, ... (if memory serves me right) that explain how to
>> implement them. But that's not far from obvious and I would not know where
>> to get started in Gecode.
>>
>> Christian
>>
>> -----Original Message-----
>> From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf
>> Of Jorge Marques Pelizzoni
>> Sent: Thursday, November 22, 2007 5:44 PM
>> To: gecode user list
>> Subject: Re: [gecode-users] Soft constraints ?
>>
>>
>> I'm no soft constraints wiz either, but as far as I know this is how you
>> would approach it: all your soft constraints must be reified and used in
>> the concoction of a cost variable/function. Then you solve your problem by
>> optimizing this variable.
>>
>> Cheers,
>>
>> Jorge.
>>
>> Martin Mann escreveu:
>>> Hi,
>>>
>>> I am sorry to ask totally unprepared about the topic but hope you
>>> excuse. I've no deeper knowledge about soft constraints right now and
>>> not checked the Gecode API seriously for that. :)
>>>
>>> Is there direct support for soft constraints in Gecode?
>>> If so where to start looking?
>>> If not is there an easy workaround to enable something similar? (Maybe
>>> some literature to start with?)
>>>
>>> Sorry for asking without knowing much about the things I am intrested
>>> in. But we are thinking about a student thesis based on soft constraints
>>> and would like to implement it using Gecode.
>>>
>>> Thanks for any reply,
>>>
>>> Martin
>>>
>>>
>>> --
>>> Martin Mann, Dipl. Bioinf.
>>> Bioinformatics - Inst. of Computer Science
>>> Albert-Ludwigs-University Freiburg
>>> Tel: ++49-761-203-8259
>>> Fax: ++49-761-203-7462
>>> http://www.bioinf.uni-freiburg.de/~mmann/<http://www.bioinf.uni-freiburg.de/%7Emmann/>
>>>
>>> _______________________________________________
>>> Gecode users mailing list
>>> users at gecode.org
>>> https://www.gecode.org/mailman/listinfo/gecode-users
>>>
>>
>> Jorge M. Pelizzoni
>> ICMC - Universidade de S?o Paulo
>>
>>
>> _______________________________________________
>> Gecode users mailing list
>> users at gecode.org
>> https://www.gecode.org/mailman/listinfo/gecode-users
>>
>>
>> _______________________________________________
>> Gecode users mailing list
>> users at gecode.org
>> https://www.gecode.org/mailman/listinfo/gecode-users
>>
> 
> 
> ------------------------------------------------------------------------
> 
> _______________________________________________
> Gecode users mailing list
> users at gecode.org
> https://www.gecode.org/mailman/listinfo/gecode-users

-- 
Martin Mann, Dipl. Bioinf.
Bioinformatics - Inst. of Computer Science
Albert-Ludwigs-University Freiburg
Tel: ++49-761-203-8259
Fax: ++49-761-203-7462
http://www.bioinf.uni-freiburg.de/~mmann/



From pierre.schaus at uclouvain.be  Fri Nov 23 08:58:21 2007
From: pierre.schaus at uclouvain.be (Pierre Schaus)
Date: Fri, 23 Nov 2007 08:58:21 +0100
Subject: [gecode-users] Soft constraints
In-Reply-To: <mailman.1574.1195762988.1380.gecode-users@gecode.org>
References: <mailman.1574.1195762988.1380.gecode-users@gecode.org>
Message-ID: <4746881D.6080801@uclouvain.be>

I Martin,

Using semiring-based and other framework dedicated to soft constraints 
is not the only possibility.
Thierry Petit and JC-R?gin have also worked on a representation of soft 
constraints by hard constraints so
that it can be used in existing software such as Gecode.
The web page of Thierry Petit is http://www.emn.fr/x-info/tpetit/
The idea is to add a variable to the hard constraint representing the 
violation of the constraint.
Willem has also worked on this subject 
(http://www.andrew.cmu.edu/user/vanhoeve/) with his famous soft alldiff 
with decomposition based violation measures.
Currently we also have a MS Student (Didier Loiseau) in Louvain -la 
-Neuve  who is currently implementing
the various softalldiff versions for Gecode. His email is didier.loiseau 
[at] student.uclouvain.be
I personally also work on soft statistical constraints such (Deviation 
and Spread) which can be very usefull for balancing
the violations among the soft constraints of your CSP.
Hope this help,

Pierre.









>
>
> Hi,
>
> I am sorry to ask totally unprepared about the topic but hope you 
> excuse. I've no deeper knowledge about soft constraints right now and 
> not checked the Gecode API seriously for that. :)
>
> Is there direct support for soft constraints in Gecode?
> If so where to start looking?
> If not is there an easy workaround to enable something similar? (Maybe 
> some literature to start with?)
>
> Sorry for asking without knowing much about the things I am intrested 
> in. But we are thinking about a student thesis based on soft constraints 
> and would like to implement it using Gecode.
>
> Thanks for any reply,
>
> Martin
>
>
>   




From malcolmr at cse.unsw.edu.au  Fri Nov 23 04:35:23 2007
From: malcolmr at cse.unsw.edu.au (Malcolm Ryan)
Date: Fri, 23 Nov 2007 14:35:23 +1100
Subject: [gecode-users] Getting the domain size
Message-ID: <F9769CBC-249F-4EF1-ADD7-E34EF490D108@cse.unsw.edu.au>

Is there any efficient way of getting the domain size of an IntVarView?

Currently, I'm doing:

int min = view.min();
int max = view.max();
int size = 0;
for (int i = min; i <= max; i++) {
	if (view.in(i)) size++;
}

Also, could you please add a toString() method to IntVarView? It  
would make debugging easier.

Malcolm

--
      "Progress should mean that we are always changing the world to fit
       the vision, instead we are always changing the vision."
                - G.K.Chesterton, Orthodoxy






From malcolmr at cse.unsw.edu.au  Fri Nov 23 08:49:24 2007
From: malcolmr at cse.unsw.edu.au (Malcolm Ryan)
Date: Fri, 23 Nov 2007 18:49:24 +1100
Subject: [gecode-users] Independent subproblems
Message-ID: <6351D6DC-2AC8-4F89-B239-90794005BC69@cse.unsw.edu.au>

Do you happen to know if anyone has done any work on splitting a  
problem into independent subproblems? Eg, if I have two problems  
which share a single variable X, then after I assign a value to X, I  
am able to solve each of the two subproblems in isolation so it would  
make sense to search them individually, so that failures in one don't  
undo variable bindings in the other.

My problem domain has this feature and I am trying to exploit it. It  
seems to me that a structural analysis of the constraint graph could  
uncover this kind of feature in general problems. I don't imagine  
this is an original idea. Has there been any work in the area?

Malcolm

--
      "Progress should mean that we are always changing the world to fit
       the vision, instead we are always changing the vision."
                - G.K.Chesterton, Orthodoxy






From tack at ps.uni-sb.de  Fri Nov 23 10:25:45 2007
From: tack at ps.uni-sb.de (Guido Tack)
Date: Fri, 23 Nov 2007 10:25:45 +0100
Subject: [gecode-users] Getting the domain size
In-Reply-To: <F9769CBC-249F-4EF1-ADD7-E34EF490D108@cse.unsw.edu.au>
References: <F9769CBC-249F-4EF1-ADD7-E34EF490D108@cse.unsw.edu.au>
Message-ID: <8C4481F2-3514-4D85-A265-9AA2A53191C6@ps.uni-sb.de>

Malcolm Ryan wrote:

> Is there any efficient way of getting the domain size of an  
> IntVarView?
>
> Currently, I'm doing:
>
> int min = view.min();
> int max = view.max();
> int size = 0;
> for (int i = min; i <= max; i++) {
> 	if (view.in(i)) size++;
> }

You could use an IntViewRanges iterator, that would be more  
efficient.  Version 2.0.0 will include a method size() for IntViews.

> Also, could you please add a toString() method to IntVarView? It
> would make debugging easier.

Yes, that will also be available in the next version.

Guido




From tack at ps.uni-sb.de  Fri Nov 23 10:35:42 2007
From: tack at ps.uni-sb.de (Guido Tack)
Date: Fri, 23 Nov 2007 10:35:42 +0100
Subject: [gecode-users] Independent subproblems
In-Reply-To: <6351D6DC-2AC8-4F89-B239-90794005BC69@cse.unsw.edu.au>
References: <6351D6DC-2AC8-4F89-B239-90794005BC69@cse.unsw.edu.au>
Message-ID: <A50CF5BE-4604-4B40-A3F9-54493859140B@ps.uni-sb.de>

Malcolm Ryan wrote:

> Do you happen to know if anyone has done any work on splitting a
> problem into independent subproblems? Eg, if I have two problems
> which share a single variable X, then after I assign a value to X, I
> am able to solve each of the two subproblems in isolation so it would
> make sense to search them individually, so that failures in one don't
> undo variable bindings in the other.

We're working on it, you will be able to download a paper on it soon.   
We have a prototype implementation for the C++ version of Gecode.  In  
theory, what you describe is exactly AND/OR tree search.  The AI  
journal paper by Dechter and Mateescu (http://www.ics.uci.edu/%7Ecsp/r126.pdf 
) should give a sufficient overview, but little detail as it comes to  
implementing the ideas in a real CP system.

> My problem domain has this feature and I am trying to exploit it. It
> seems to me that a structural analysis of the constraint graph could
> uncover this kind of feature in general problems. I don't imagine
> this is an original idea. Has there been any work in the area?

I am not aware of any actual system that implements this.  It is  
possible to write your own search engine in Gecode that is aware of  
your problem structure and solves subproblems independently, but to  
have a fully general solution, it's necessary to get some basic  
support from the solver.

Cheers,
	Guido




From debdeep.banerjee at rsise.anu.edu.au  Fri Nov 23 12:53:48 2007
From: debdeep.banerjee at rsise.anu.edu.au (Debdeep)
Date: Fri, 23 Nov 2007 22:53:48 +1100
Subject: [gecode-users] How to install Gecode installed the Gecode/J using
	cygwin
Message-ID: <4746BF4C.3050007@rsise.anu.edu.au>

hi,
 I was trying to install Gecode-1.3.1 msi, but i have got an error 
message saying "Can't find interface 1". So i was trying to install 
using cygwin. but where is the package-config folder ? I have compiled 
the Gecode-1.3.1 when i tried to install Gecode/J it complaning about 
the package config path. Any idea how to install it ?

With regrads
Debdeep



From tack at ps.uni-sb.de  Fri Nov 23 14:39:35 2007
From: tack at ps.uni-sb.de (Guido Tack)
Date: Fri, 23 Nov 2007 14:39:35 +0100
Subject: [gecode-users] How to install Gecode installed the Gecode/J
	using cygwin
In-Reply-To: <4746BF4C.3050007@rsise.anu.edu.au>
References: <4746BF4C.3050007@rsise.anu.edu.au>
Message-ID: <25F57E0D-CA82-4872-A50E-85AA72362D81@ps.uni-sb.de>

Debdeep wrote:

> hi,
> I was trying to install Gecode-1.3.1 msi, but i have got an error
> message saying "Can't find interface 1". So i was trying to install
> using cygwin. but where is the package-config folder ? I have compiled
> the Gecode-1.3.1 when i tried to install Gecode/J it complaning about
> the package config path. Any idea how to install it ?

You have to have pkg-config installed when you configure Gecode 1.3.1  
(you can get it from cygwin).  Then configure will detect that pkg- 
config is present and generate the necessary files, which will be  
installed in <prefix>/lib/pkgconfig upon make install.  You should  
then set the PKG_CONFIG_PATH to include that directory.  After these  
steps, the Gecode/J configure should find the files.

Cheers,
	Guido

-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 2436 bytes
Desc: not available
URL: <http://www.ps.uni-sb.de/pipermail/users/attachments/20071123/3695adf7/attachment.bin>

From ggutierrez at cic.puj.edu.co  Fri Nov 23 22:18:38 2007
From: ggutierrez at cic.puj.edu.co (Gustavo Gutierrez)
Date: Fri, 23 Nov 2007 16:18:38 -0500
Subject: [gecode-users] Views and serialization
Message-ID: <e7b0e5a40711231318v1bad0376i55002192ac4f8451@mail.gmail.com>

Hi all,

I am working on merging a space SC in a S. For this to work i need to
create all actors available in SC into S. This is fine as the Space
class has method to return an iterator on space actors. I think the
following code will do the job (SC is the source and S is the target):

---- inside the queens class

 VarMap * exportVars(void) {
    VarMap *vmp = new VarMap();
    Support::Symbol symb("root",true);
    //vmp->registerArray(this,q,symb);
    vmp->putArray(this,q,symb);
    return vmp;
  }
----

--- outside the class
void merge(Queens *target, Queens *source) {
  // Print some useful information
  std::cout << "Number of propagators in trget " <<
target->propagators() << std::endl;
  std::cout << "Number of propagators in source " <<
source->propagators() << std::endl;

  // Ask source to build a Map of its variables
  VarMap *vmp = target->exportVars();

  // Create an iterator over home's actors
  Reflection::SpecIter si = source->actorSpecs(*vmp);

  Gecode::Serialization::Deserializer *ds = new Deserializer(target, *vmp);

  while (si()) {
    ds->post(si.actor());
    ++si;
  }

  // Test the number of actors in target
  std::cout << "Number of propagators in trget " <<
target->propagators() << std::endl;
}
----

Is it right or did i miss something?


The other step is to create all variables in SC in S. For this part i
have reading the documenttion and found that IntView and SetView
classes have a method called spec that returns an specification of a
variable. For the Queens problem this would be fine as all variables
are IntVars so creating IntView is easy. The problem raises when i
have a collection of variables of different types (an array of
VarBase*) and need to get the specification for each one. Is there any
way to do this?. Note that i don't know each variable's type so
creating the corresponding view is not possible.

I prefer to ask this before doing some changes to my design, so sorry
if my question sounds a little lazy.By the way, is there some example
that use space serialization or reflection mechanisms?

Thanks in advance,

-- 
Gustavo Gutierrez



From tack at ps.uni-sb.de  Fri Nov 23 23:04:56 2007
From: tack at ps.uni-sb.de (Guido Tack)
Date: Fri, 23 Nov 2007 23:04:56 +0100
Subject: [gecode-users] Views and serialization
In-Reply-To: <e7b0e5a40711231318v1bad0376i55002192ac4f8451@mail.gmail.com>
References: <e7b0e5a40711231318v1bad0376i55002192ac4f8451@mail.gmail.com>
Message-ID: <C003ACA6-6851-47EC-9297-67E020F1323A@ps.uni-sb.de>

Hi Gustavo,

Gustavo Gutierrez wrote:

> I am working on merging a space SC in a S. For this to work i need to
> create all actors available in SC into S. This is fine as the Space
> class has method to return an iterator on space actors.

Now that's an application of reflection that I hadn't thought of yet.   
Nice.

> I think the
> following code will do the job (SC is the source and S is the target):
>
> ---- inside the queens class
>
> VarMap * exportVars(void) {
>    VarMap *vmp = new VarMap();
>    Support::Symbol symb("root",true);
>    //vmp->registerArray(this,q,symb);
>    vmp->putArray(this,q,symb);
>    return vmp;
>  }
> ----
>
> --- outside the class
> void merge(Queens *target, Queens *source) {
>  // Print some useful information
>  std::cout << "Number of propagators in trget " <<
> target->propagators() << std::endl;
>  std::cout << "Number of propagators in source " <<
> source->propagators() << std::endl;
>
>  // Ask source to build a Map of its variables
>  VarMap *vmp = target->exportVars();
>
>  // Create an iterator over home's actors
>  Reflection::SpecIter si = source->actorSpecs(*vmp);
>
>  Gecode::Serialization::Deserializer *ds = new Deserializer(target,  
> *vmp);
>
>  while (si()) {
>    ds->post(si.actor());
>    ++si;
>  }
>
>  // Test the number of actors in target
>  std::cout << "Number of propagators in trget " <<
> target->propagators() << std::endl;
> }
> ----
>
> Is it right or did i miss something?

It's nearly right.  You need a fresh VarMap for the Deserializer.  The  
idea is that the correspondence between variables in source and target  
is purely by name.  So the code could look like this:

void merge(Queens *target, Queens *source) {
   VarMap *vmp = target->exportVars();
   Reflection::SpecIter si = source->actorSpecs(*vmp);

   VarMap vm_target;
   Gecode::Serialization::Deserializer ds(target, vm_target);

   while (si()) {
     ds.post(si.actor());
     ++si;
   }
}

> The other step is to create all variables in SC in S. For this part i
> have reading the documenttion and found that IntView and SetView
> classes have a method called spec that returns an specification of a
> variable. For the Queens problem this would be fine as all variables
> are IntVars so creating IntView is easy. The problem raises when i
> have a collection of variables of different types (an array of
> VarBase*) and need to get the specification for each one. Is there any
> way to do this?. Note that i don't know each variable's type so
> creating the corresponding view is not possible.

After iterating all the actors, vmp will contain all variables in  
source, and you can iterate them using a VarMapIter.  For each  
variable, you get a VarSpec that tells you what type the variable  
has.  Furthermore, you can use the spec you get to recreate the  
variable in target:

for (VarMapIter vmi(*vmp); vmi(); ++vmi) {
   ds.var(vmi.var());
}

If you want to link the variables you create to existing variables in  
target, you just have to put the variables from target into vm_target  
before iterating vmp.  Remember, variables are only identified by the  
name you give them.

> I prefer to ask this before doing some changes to my design, so sorry
> if my question sounds a little lazy.By the way, is there some example
> that use space serialization or reflection mechanisms?

You can have a look at the file test/int.cc, the cloneWithReflection  
function might help you.  Please keep in mind that the reflection API  
is still experimental, the interface might change.  In fact, if you  
find things that don't work as you expect, or would like to have  
additional functionality, please let us know!

Cheers,
	Guido

-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 2436 bytes
Desc: not available
URL: <http://www.ps.uni-sb.de/pipermail/users/attachments/20071123/2ff47e9c/attachment.bin>

From debdeep.banerjee at rsise.anu.edu.au  Sat Nov 24 01:39:56 2007
From: debdeep.banerjee at rsise.anu.edu.au (Debdeep)
Date: Sat, 24 Nov 2007 11:39:56 +1100
Subject: [gecode-users] How to install Gecode installed the Gecode/J
 using cygwin
In-Reply-To: <25F57E0D-CA82-4872-A50E-85AA72362D81@ps.uni-sb.de>
References: <4746BF4C.3050007@rsise.anu.edu.au>
	<25F57E0D-CA82-4872-A50E-85AA72362D81@ps.uni-sb.de>
Message-ID: <474772DC.2010201@rsise.anu.edu.au>

hi,

Guido Tack wrote:
> You have to have pkg-config installed when you configure Gecode 1.3.1 
> (you can get it from cygwin).  Then configure will detect that 
> pkg-config is present and generate the necessary files, which will be 
> installed in <prefix>/lib/pkgconfig upon make install.  You should 
> then set the PKG_CONFIG_PATH to include that directory.  After these 
> steps, the Gecode/J configure should find the files.
>
After compiling I have got the following files and directories under the 
GECODE directory
===========================================================
 LICENSE
Makefile
Makefile.contribs
Makefile.dep
Makefile.in
changelog.in
config.log
config.status
configure
configure.ac
configure.ac.in
contribs
doxygen.conf
doxygen.conf.in
doxygen.hh
doxygen.hh.in
examples
gecode
gecode.m4
install-sh
libgecodeint.dll
libgecodekernel.dll
libgecodeminimodel.dll
libgecodesearch.dll
libgecodeset.dll
misc
test
==================================================
I could not find the /lib/pkg-config directory.

I have attached the config.log file, if it can help.

With regards
Debdeep
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: config.log
URL: <http://www.ps.uni-sb.de/pipermail/users/attachments/20071124/43eaef3c/attachment.asc>

From ggutierrez at cic.puj.edu.co  Sat Nov 24 06:40:09 2007
From: ggutierrez at cic.puj.edu.co (Gustavo Gutierrez)
Date: Sat, 24 Nov 2007 00:40:09 -0500
Subject: [gecode-users] Views and serialization
In-Reply-To: <C003ACA6-6851-47EC-9297-67E020F1323A@ps.uni-sb.de>
References: <e7b0e5a40711231318v1bad0376i55002192ac4f8451@mail.gmail.com>
	<C003ACA6-6851-47EC-9297-67E020F1323A@ps.uni-sb.de>
Message-ID: <e7b0e5a40711232140r1e2659c9tc33438ec51f5a46a@mail.gmail.com>

On Nov 23, 2007 5:04 PM, Guido Tack <tack at ps.uni-sb.de> wrote:

> It's nearly right.  You need a fresh VarMap for the Deserializer.  The
> idea is that the correspondence between variables in source and target
> is purely by name.  So the code could look like this:
>
> void merge(Queens *target, Queens *source) {
>    VarMap *vmp = target->exportVars();
>    Reflection::SpecIter si = source->actorSpecs(*vmp);
>
>    VarMap vm_target;
>    Gecode::Serialization::Deserializer ds(target, vm_target);
>
>    while (si()) {
>      ds.post(si.actor());
>      ++si;
>    }
> }
>

I am getting some memory errors after the suggested modification. I
get a "bus error" which is, IMO, the equivalent to segmentation fault
in linux. It seems that the fresh VarMap, vm_target, is causing the
problem. After looking at test/int.cc i see that before using the
fresh VarMap the array of variables is registered. Then i have the
following question: What is registerArray intended for?, and what is
the difference with putArray?. I try to call this method before actor
iteration but the error is still there.

Cheers,
-- 
Gustavo Gutierrez



From tack at ps.uni-sb.de  Sat Nov 24 08:35:53 2007
From: tack at ps.uni-sb.de (Guido Tack)
Date: Sat, 24 Nov 2007 08:35:53 +0100
Subject: [gecode-users] Views and serialization
In-Reply-To: <e7b0e5a40711232140r1e2659c9tc33438ec51f5a46a@mail.gmail.com>
References: <e7b0e5a40711231318v1bad0376i55002192ac4f8451@mail.gmail.com>
	<C003ACA6-6851-47EC-9297-67E020F1323A@ps.uni-sb.de>
	<e7b0e5a40711232140r1e2659c9tc33438ec51f5a46a@mail.gmail.com>
Message-ID: <B24FBC6A-BC29-4F3E-BB5F-B4FAAA6F1DCC@ps.uni-sb.de>

Gustavo Gutierrez wrote:

> I am getting some memory errors after the suggested modification. I
> get a "bus error" which is, IMO, the equivalent to segmentation fault
> in linux. It seems that the fresh VarMap, vm_target, is causing the
> problem. After looking at test/int.cc i see that before using the
> fresh VarMap the array of variables is registered. Then i have the
> following question: What is registerArray intended for?, and what is
> the difference with putArray?. I try to call this method before actor
> iteration but the error is still there.

The difference between putArray and registerArray is that  
registerArray just introduces the name->VarBase* mapping into the  
VarMap, whereas putArray also assigns an integer index to the  
variable.  All references to variables (e.g. in the ActorSpecs) are by  
index only.  If you used putArray in vm_target, all the variables  
would already get assigned these indexes, but their indexes would not  
necessarily be the same as in vmp.

Another thing I just noticed now is that vmp should come from the  
source, not the target:

void merge(Queens *target, Queens *source) {
   VarMap *vmp = source->exportVars();
   Reflection::SpecIter si = source->actorSpecs(*vmp);

   VarMap vm_target;
   Gecode::Serialization::Deserializer ds(target, vm_target);

   while (si()) {
     ds.post(si.actor());
     ++si;
   }
}

I'm not sure that explains the crash.  One thing that might explain it  
is a bug that I found this week, which may make VarMaps crash under  
certain conditions.  It's fixed in the Gecode trunk, but didn't make  
it into 2.0.0.
If you can't get it to work, please send me the complete source code  
that crashes (by private email), I'll have a look.

Cheers,
	Guido




From zpengyu at gmail.com  Mon Nov 26 01:07:23 2007
From: zpengyu at gmail.com (Pengyu Zhao)
Date: Mon, 26 Nov 2007 01:07:23 +0100
Subject: [gecode-users] questions in integer n-ary linear with advisor
Message-ID: <1196035643.19772.31.camel@zpy-laptop>

hi,

I have a question about "advisor".

I am writing an advisor for n-ary linear equation.

In n-ary Eq(trunk/gecode/int/linear.hh), the template class definition
is:
	template<class Val, class P, class N>
	class Eq : public Lin<Val,P,N,PC_INT_BND> {......}
"P" represented for position view array.
"N" represented for negative view array or NoView.
Then, I added a council to this propagator, like,
	Council<LinearAdvisor<V>> council;
I added a "LinearAdvisor" class which derived from "ViewAdvisor<V>",like
	template<class V>
	class LinearAdvisor : public ViewAdvisor<V> {......}
when constructing, the council and Advisors of variables only accept ONE
template parameter like P or N. But, the type of views in a propagator
may different, is there another way to set an advisor to a view
dynamically? How can I make a council accept different kinds of
advisors?
I have tried to set V to DoubleView, it's ok but coefficient can only
accept 1 or -1.
Also, the propagator only accept one Council.

Thank you very much.


-- 
Best Regards,
Pengyu ZHAO

pengyu(a)kth.se
+46(0)762 319 744




From malcolmr at cse.unsw.edu.au  Mon Nov 26 01:15:25 2007
From: malcolmr at cse.unsw.edu.au (Malcolm Ryan)
Date: Mon, 26 Nov 2007 11:15:25 +1100
Subject: [gecode-users] Independent subproblems
In-Reply-To: <A50CF5BE-4604-4B40-A3F9-54493859140B@ps.uni-sb.de>
References: <6351D6DC-2AC8-4F89-B239-90794005BC69@cse.unsw.edu.au>
	<A50CF5BE-4604-4B40-A3F9-54493859140B@ps.uni-sb.de>
Message-ID: <FAAF61B1-6CA0-463F-9CA1-479E36E3A179@cse.unsw.edu.au>

On 23/11/2007, at 8:35 PM, Guido Tack wrote:

> Malcolm Ryan wrote:
>
>> Do you happen to know if anyone has done any work on splitting a
>> problem into independent subproblems? Eg, if I have two problems
>> which share a single variable X, then after I assign a value to X, I
>> am able to solve each of the two subproblems in isolation so it would
>> make sense to search them individually, so that failures in one don't
>> undo variable bindings in the other.
>
> We're working on it, you will be able to download a paper on it  
> soon.  We have a prototype implementation for the C++ version of  
> Gecode.  In theory, what you describe is exactly AND/OR tree  
> search.  The AI journal paper by Dechter and Mateescu (http:// 
> www.ics.uci.edu/%7Ecsp/r126.pdf) should give a sufficient overview,  
> but little detail as it comes to implementing the ideas in a real  
> CP system.

Thanks. I've been reading the Handbook of Constraint Programming some  
more. I saw it suggested somewhere in there (I've lost the reference)  
that conflict-directed backjumping (Prosser 1993) is particularly  
effective on problems of this sort. Does Gecode implement any kind of  
backjumping? Or least-discrepancy search?

Malcolm

--
Many clever men like you have trusted to civilisation.
Many clever Babylonians, many clever Egyptians,
Many clever men at the end of Rome.
                               - G.K.Chesterton, The Napoleon of  
Notting Hill






From malcolmr at cse.unsw.edu.au  Mon Nov 26 06:58:59 2007
From: malcolmr at cse.unsw.edu.au (Malcolm Ryan)
Date: Mon, 26 Nov 2007 16:58:59 +1100
Subject: [gecode-users] reified distinct()?
Message-ID: <0D832525-73AF-4F9D-B29D-E0CB053BFE6B@cse.unsw.edu.au>

I'm looking for a reified version of Gecode.distinct() but there  
doesn't appear to be one. Can anyone suggest a reasonable alternative?

Malcolm

--
"The modern man in revolt has become
           practically useless for all purposes of revolt.
By rebelling against everything
           he has lost his right to rebel against anything."
                                                    - G.K.Chesterton,  
Orthodoxy






From zayenz at gmail.com  Mon Nov 26 09:14:15 2007
From: zayenz at gmail.com (Mikael Zayenz Lagerkvist)
Date: Mon, 26 Nov 2007 09:14:15 +0100
Subject: [gecode-users] reified distinct()?
In-Reply-To: <0D832525-73AF-4F9D-B29D-E0CB053BFE6B@cse.unsw.edu.au>
References: <0D832525-73AF-4F9D-B29D-E0CB053BFE6B@cse.unsw.edu.au>
Message-ID: <63b5c8b00711260014y665f4f0fxfa1ce533f2f8b5e3@mail.gmail.com>

On Nov 26, 2007 6:58 AM, Malcolm Ryan <malcolmr at cse.unsw.edu.au> wrote:
> I'm looking for a reified version of Gecode.distinct() but there
> doesn't appear to be one. Can anyone suggest a reasonable alternative?

As you already found out, there is no reified version of distinct in
Gecode. What kind of application did you have in mind for it?

The most direct model would probably be a reified decomposition into
not-equals constraints. However, this will only give the same pruning
when distinctness should hold as using ICL_VAL.

Another possibility would be to write a simple propagator that checks
whether the constraint should hold. If so, it can re-write itself into
a distinct-propagator. However, there is no way to re-write
propagators directly in Java, you'd have to post a propagator using
the modelling-interface instead.

As a side-note, there are other global constraints, not currently in
Gecode, which might be interesting to know about. Nvalue constrains a
sequence to take a specific number of values. It is easy to model a
reified distinct using nvalue by reifing whether the number of values
are equal to the number of variables, or less.


Cheers,
Mikael

-- 
Mikael Zayenz Lagerkvist, http://www.ict.kth.se/~zayenz/



From zayenz at gmail.com  Mon Nov 26 09:19:05 2007
From: zayenz at gmail.com (Mikael Zayenz Lagerkvist)
Date: Mon, 26 Nov 2007 09:19:05 +0100
Subject: [gecode-users] Independent subproblems
In-Reply-To: <FAAF61B1-6CA0-463F-9CA1-479E36E3A179@cse.unsw.edu.au>
References: <6351D6DC-2AC8-4F89-B239-90794005BC69@cse.unsw.edu.au>
	<A50CF5BE-4604-4B40-A3F9-54493859140B@ps.uni-sb.de>
	<FAAF61B1-6CA0-463F-9CA1-479E36E3A179@cse.unsw.edu.au>
Message-ID: <63b5c8b00711260019r39668affvf88cddda538978e3@mail.gmail.com>

On Nov 26, 2007 1:15 AM, Malcolm Ryan <malcolmr at cse.unsw.edu.au> wrote:
> Thanks. I've been reading the Handbook of Constraint Programming some
> more. I saw it suggested somewhere in there (I've lost the reference)
> that conflict-directed backjumping (Prosser 1993) is particularly
> effective on problems of this sort.

My guess would be that a direct approach like the one Guido has been
working on is probably the best thing for these kinds of problems.


> Does Gecode implement any kind of backjumping?

No.


> Or least-discrepancy search?

Limited discrepancy search is implemented in Gecode, but we haven't
included it in Gecode/J. Maybe we should do that.


Cheers,
Mikael


-- 
Mikael Zayenz Lagerkvist, http://www.ict.kth.se/~zayenz/



From zayenz at gmail.com  Mon Nov 26 09:31:37 2007
From: zayenz at gmail.com (Mikael Zayenz Lagerkvist)
Date: Mon, 26 Nov 2007 09:31:37 +0100
Subject: [gecode-users] questions in integer n-ary linear with advisor
In-Reply-To: <1196035643.19772.31.camel@zpy-laptop>
References: <1196035643.19772.31.camel@zpy-laptop>
Message-ID: <63b5c8b00711260031g7aabbe23g4c5e6c7a652bf341@mail.gmail.com>

On Nov 26, 2007 1:07 AM, Pengyu Zhao <zpengyu at gmail.com> wrote:
> I have a question about "advisor".
>
> I am writing an advisor for n-ary linear equation.
>
> In n-ary Eq(trunk/gecode/int/linear.hh), the template class definition
> is:
>        template<class Val, class P, class N>
>        class Eq : public Lin<Val,P,N,PC_INT_BND> {......}
> "P" represented for position view array.
> "N" represented for negative view array or NoView.
> Then, I added a council to this propagator, like,
>        Council<LinearAdvisor<V>> council;
> I added a "LinearAdvisor" class which derived from "ViewAdvisor<V>",like
>        template<class V>
>        class LinearAdvisor : public ViewAdvisor<V> {......}
> when constructing, the council and Advisors of variables only accept ONE
> template parameter like P or N. But, the type of views in a propagator
> may different, is there another way to set an advisor to a view
> dynamically? How can I make a council accept different kinds of
> advisors?
> I have tried to set V to DoubleView, it's ok but coefficient can only
> accept 1 or -1.
> Also, the propagator only accept one Council.

Since most propagators only need one type of advisor, we simplified
the system by only allowing a single type of advisor for a propagator.
When more than one type is needed, one has to program this explicitly.
Essentially, you need to distinguish the type of the advisor in the
advise-function. This can be done with either sub-types or tagging.

For sub-typing, you would have a class hierarchy something like:
    class PorNAdvisor : public Advisor { ... }
    class PAdvisor : public PorNAdvisor { ... }
    class NAdvisor : public PorNAdvisor { ... }
In the advise-function you could then use RTTI or polymorphism to find
the right function.

For tagging, you can just add a field in your advisor as follows
    class PorNAdvisor : public Advisor {
        ...
        bool isP; ///< Advisor for positive views
        ....
    }
In the advise-function you can then check this field to determine what
needs to be done.


Cheers,
Mikael

-- 
Mikael Zayenz Lagerkvist, http://www.ict.kth.se/~zayenz/



From ggutierrez at cic.puj.edu.co  Mon Nov 26 05:34:05 2007
From: ggutierrez at cic.puj.edu.co (Gustavo Gutierrez)
Date: Sun, 25 Nov 2007 23:34:05 -0500
Subject: [gecode-users] Views and serialization
In-Reply-To: <C003ACA6-6851-47EC-9297-67E020F1323A@ps.uni-sb.de>
References: <e7b0e5a40711231318v1bad0376i55002192ac4f8451@mail.gmail.com>
	<C003ACA6-6851-47EC-9297-67E020F1323A@ps.uni-sb.de>
Message-ID: <e7b0e5a40711252034w341a1c0en4a5a39ccb512271e@mail.gmail.com>

On Nov 23, 2007 5:04 PM, Guido Tack <tack at ps.uni-sb.de> wrote:
> After iterating all the actors, vmp will contain all variables in
> source, and you can iterate them using a VarMapIter.  For each
> variable, you get a VarSpec that tells you what type the variable
> has.  Furthermore, you can use the spec you get to recreate the
> variable in target:

Does this mean that creating a VarMap is not only achieved by putting
the VarArray but also by iterating all the actors?.
I mean, for the queens problem for instance, the following two codes
do the same in which respects to filling a VarMap?

code 1:

  VarMap * exportVars(void) {
    VarMap *vmp = new VarMap();
    Support::Symbol symb("root",true);
    vmp->putArray(this,q,symb);
    return vmp;
  }


code 2:

VarMap * exportVars2(void) {
    VarMap *vmp = new VarMap();
    SpecIter si = actorSpecs(*vmp);
   while (si())
    ++si;
   return vmp;
  }

If that is true i find the second a more general approach, since it
automatically collects only variables related to constraints.

Cheers,
-- 
Gustavo Gutierrez



From tack at ps.uni-sb.de  Mon Nov 26 10:02:05 2007
From: tack at ps.uni-sb.de (Guido Tack)
Date: Mon, 26 Nov 2007 10:02:05 +0100
Subject: [gecode-users] Views and serialization
In-Reply-To: <e7b0e5a40711252034w341a1c0en4a5a39ccb512271e@mail.gmail.com>
References: <e7b0e5a40711231318v1bad0376i55002192ac4f8451@mail.gmail.com>
	<C003ACA6-6851-47EC-9297-67E020F1323A@ps.uni-sb.de>
	<e7b0e5a40711252034w341a1c0en4a5a39ccb512271e@mail.gmail.com>
Message-ID: <A662BEA2-C506-4AE5-AB47-1D00F83A9737@ps.uni-sb.de>

Gustavo Gutierrez wrote:

> On Nov 23, 2007 5:04 PM, Guido Tack <tack at ps.uni-sb.de> wrote:
>> After iterating all the actors, vmp will contain all variables in
>> source, and you can iterate them using a VarMapIter.  For each
>> variable, you get a VarSpec that tells you what type the variable
>> has.  Furthermore, you can use the spec you get to recreate the
>> variable in target:
>
> Does this mean that creating a VarMap is not only achieved by putting
> the VarArray but also by iterating all the actors?.

Yes, with the difference that you don't know the identity of variables  
that were put in by iterating the actors.

> I mean, for the queens problem for instance, the following two codes
> do the same in which respects to filling a VarMap?
>
> code 1:
>
>  VarMap * exportVars(void) {
>    VarMap *vmp = new VarMap();
>    Support::Symbol symb("root",true);
>    vmp->putArray(this,q,symb);
>    return vmp;
>  }
>
>
> code 2:
>
> VarMap * exportVars2(void) {
>    VarMap *vmp = new VarMap();
>    SpecIter si = actorSpecs(*vmp);
>   while (si())
>    ++si;
>   return vmp;
>  }
>
> If that is true i find the second a more general approach, since it
> automatically collects only variables related to constraints.

In realistic examples, you probably need both.  The logic is exactly  
the same as for copying:  You copy the variables that make up your  
solution explicitly, so that they are available in the copy.  All  
other variables are copied if needed (i.e., referenced by propagators  
or branchings) and discarded otherwise.

Cheers,
	Guido

-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 2436 bytes
Desc: not available
URL: <http://www.ps.uni-sb.de/pipermail/users/attachments/20071126/8c0daffb/attachment.bin>

From filip.konvicka at logis.cz  Mon Nov 26 15:36:47 2007
From: filip.konvicka at logis.cz (=?UTF-8?B?RmlsaXAgS29udmnEjWth?=)
Date: Mon, 26 Nov 2007 15:36:47 +0100
Subject: [gecode-users] svn: bug in sudoku.cc
Message-ID: <474AD9FF.3070007@logis.cz>

Hi,

trying to compile trunk with MSVC 9, I got an error compiling sudoku.cc, 
can be probably fixed with

Index: C:/cygwin/tmp/gecode_build/gecode_trunk/examples/sudoku.cc
===================================================================
--- C:/cygwin/tmp/gecode_build/gecode_trunk/examples/sudoku.cc    
(revision 5423)
+++ C:/cygwin/tmp/gecode_build/gecode_trunk/examples/sudoku.cc    
(working copy)
@@ -495,7 +495,7 @@
   }
  
   /// Print solution
-  virtual void print(void) { SudokuInt::print(); }
+  virtual void print(std::ostream& os) { SudokuInt::print(os); }
  
 };
 
Otherwise, compilation went extremely smooth with a fresh install of 
MSVC 9 Express Edition, with the following commands under cygwin:

export PATH="/cygdrive/c/Program Files/Microsoft Visual Studio 
9.0/Common7/IDE:$PATH"
export PATH="/cygdrive/c/Program Files/Microsoft Visual Studio 
9.0/VC/bin:$PATH"
export INCLUDE='C:\Program Files\Microsoft Visual Studio 
9.0\VC\include;C:\Program Files\Microsoft SDKs\Windows\v6.0A\include'
export LIB='C:\Program Files\Microsoft Visual Studio 
9.0\VC\lib;C:\Program Files\Microsoft SDKs\Windows\v6.0A\lib'
./configure CC=cl CXX=cl
make

Trying to build outside of the source tree failed somehow, though. 
Nevermind, excellent!

Cheers,
Filip




From tack at ps.uni-sb.de  Mon Nov 26 16:05:10 2007
From: tack at ps.uni-sb.de (Guido Tack)
Date: Mon, 26 Nov 2007 16:05:10 +0100
Subject: [gecode-users] svn: bug in sudoku.cc
In-Reply-To: <474AD9FF.3070007@logis.cz>
References: <474AD9FF.3070007@logis.cz>
Message-ID: <BA61F874-32AE-44AA-836A-DAB60B37D83A@ps.uni-sb.de>

Filip Konvi?ka wrote:
> trying to compile trunk with MSVC 9, I got an error compiling  
> sudoku.cc,
> can be probably fixed with [...]

You checked out the trunk while it was in an inconsistent state, it  
should be fixed now.

> Otherwise, compilation went extremely smooth with a fresh install of
> MSVC 9 Express Edition, with the following commands under cygwin:
>
> export PATH="/cygdrive/c/Program Files/Microsoft Visual Studio
> 9.0/Common7/IDE:$PATH"
> export PATH="/cygdrive/c/Program Files/Microsoft Visual Studio
> 9.0/VC/bin:$PATH"
> export INCLUDE='C:\Program Files\Microsoft Visual Studio
> 9.0\VC\include;C:\Program Files\Microsoft SDKs\Windows\v6.0A\include'
> export LIB='C:\Program Files\Microsoft Visual Studio
> 9.0\VC\lib;C:\Program Files\Microsoft SDKs\Windows\v6.0A\lib'
> ./configure CC=cl CXX=cl
> make
>
> Trying to build outside of the source tree failed somehow, though.

Again, this might have been due to the bogus state of the svn, it  
currently compiles without problems for me (using MSVC 2005, though).

> Nevermind, excellent!

It will get even better :-)  We're currently integrating Gist, our Qt- 
based visual search tool, into the main Gecode tree - you may have  
seen the check-ins in the trunk.

Cheers,
	Guido
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 2436 bytes
Desc: not available
URL: <http://www.ps.uni-sb.de/pipermail/users/attachments/20071126/5dfa3c7d/attachment.bin>

From filip.konvicka at logis.cz  Mon Nov 26 17:17:59 2007
From: filip.konvicka at logis.cz (=?UTF-8?B?RmlsaXAgS29udmnEjWth?=)
Date: Mon, 26 Nov 2007 17:17:59 +0100
Subject: [gecode-users] svn: bug in sudoku.cc
In-Reply-To: <BA61F874-32AE-44AA-836A-DAB60B37D83A@ps.uni-sb.de>
References: <474AD9FF.3070007@logis.cz>
	<BA61F874-32AE-44AA-836A-DAB60B37D83A@ps.uni-sb.de>
Message-ID: <474AF1B7.7000908@logis.cz>


>> trying to compile trunk with MSVC 9, I got an error compiling sudoku.cc,
>> can be probably fixed with [...]
>
> You checked out the trunk while it was in an inconsistent state, it 
> should be fixed now.
Yes, probably.
>> MSVC 9 Express Edition, with the following commands under cygwin:
>>
>> export PATH="/cygdrive/c/Program Files/Microsoft Visual Studio
>> 9.0/Common7/IDE:$PATH"
>> export PATH="/cygdrive/c/Program Files/Microsoft Visual Studio
>> 9.0/VC/bin:$PATH"
>> export INCLUDE='C:\Program Files\Microsoft Visual Studio
>> 9.0\VC\include;C:\Program Files\Microsoft SDKs\Windows\v6.0A\include'
>> export LIB='C:\Program Files\Microsoft Visual Studio
>> 9.0\VC\lib;C:\Program Files\Microsoft SDKs\Windows\v6.0A\lib'
>> ./configure CC=cl CXX=cl
>> make
>>
>> Trying to build outside of the source tree failed somehow, though.
> Otherwise, compilation went extremely smooth with a fresh install of
>
> Again, this might have been due to the bogus state of the svn, it 
> currently compiles without problems for me (using MSVC 2005, though).
>
This was no problem report, just a reference for anyone trying to 
compile on Cygwin (it's always rather complicated to get INCLUDE, LIB 
and PATH point to the right directories). Actually, this was the main 
reason of my post.
>> Nevermind, excellent!
>
> It will get even better :-)  We're currently integrating Gist, our 
> Qt-based visual search tool, into the main Gecode tree - you may have 
> seen the check-ins in the trunk.
Yes, I noticed :-) Cool.

So now I'm ready to explore the new worlds :-)

Cheers,
Filip




From tack at ps.uni-sb.de  Mon Nov 26 17:58:29 2007
From: tack at ps.uni-sb.de (Guido Tack)
Date: Mon, 26 Nov 2007 17:58:29 +0100
Subject: [gecode-users] svn: bug in sudoku.cc
In-Reply-To: <474AF1B7.7000908@logis.cz>
References: <474AD9FF.3070007@logis.cz>
	<BA61F874-32AE-44AA-836A-DAB60B37D83A@ps.uni-sb.de>
	<474AF1B7.7000908@logis.cz>
Message-ID: <8988B2A3-CB14-41F3-8A5A-8055935698FC@ps.uni-sb.de>

Filip Konvi?ka wrote:

>>> Trying to build outside of the source tree failed somehow, though.
>> Otherwise, compilation went extremely smooth with a fresh install of
>>
>> Again, this might have been due to the bogus state of the svn, it
>> currently compiles without problems for me (using MSVC 2005, though).
>>
> This was no problem report, just a reference for anyone trying to
> compile on Cygwin (it's always rather complicated to get INCLUDE, LIB
> and PATH point to the right directories). Actually, this was the main
> reason of my post.

Yes, right, that is really appreciated.  I was just referring to the  
fact that it didn't build in a separate directory, which should be  
fixed now (I think).  Another way to define the variables is to start  
the "Visual Studio Command Prompt" (from the start menu).  This will  
open a Windows console with all the paths set up.  From there, you  
just type something like "c:\cygwin\bin\bash -login", and everything  
should work.

Cheers,
	Guido

-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 2436 bytes
Desc: not available
URL: <http://www.ps.uni-sb.de/pipermail/users/attachments/20071126/46999872/attachment.bin>

From ggutierrez at cic.puj.edu.co  Tue Nov 27 01:17:22 2007
From: ggutierrez at cic.puj.edu.co (Gustavo Gutierrez)
Date: Mon, 26 Nov 2007 19:17:22 -0500
Subject: [gecode-users] Views and serialization
In-Reply-To: <C003ACA6-6851-47EC-9297-67E020F1323A@ps.uni-sb.de>
References: <e7b0e5a40711231318v1bad0376i55002192ac4f8451@mail.gmail.com>
	<C003ACA6-6851-47EC-9297-67E020F1323A@ps.uni-sb.de>
Message-ID: <e7b0e5a40711261617m5386c770w662a3a3c8174d936@mail.gmail.com>

Hi Guido,

On Nov 23, 2007 5:04 PM, Guido Tack <tack at ps.uni-sb.de> wrote:

> You can have a look at the file test/int.cc, the cloneWithReflection
> function might help you.  Please keep in mind that the reflection API
> is still experimental, the interface might change.  In fact, if you
> find things that don't work as you expect, or would like to have
> additional functionality, please let us know!
>

What i need now is to put some references to the newly added variables
in a "root" array. For instance, after merging the money problem space
into a queens of size 5 problem space i expect to have 8 more
variables. Also i need to have references to that variables from the q
IntVarArray (for instance, to post new constraints).

I have a question about the VarMap or VarMapIter. Is it possible to
know how many variables a VarMap stores, or to access VarBase objects
through VarMapIter?.  My idea is to iterate on the VarMap and to add
the VarBase corresponding objects to the q array. The problem is that
i don't find a method to get the size of the map to use it in a for
loop. The VarMapIter only provides access to variable specifications
but not to VarBase objects.


Cheers,
-- 
Gustavo Gutierrez



From filip.konvicka at logis.cz  Tue Nov 27 08:03:07 2007
From: filip.konvicka at logis.cz (=?UTF-8?B?RmlsaXAgS29udmnEjWth?=)
Date: Tue, 27 Nov 2007 08:03:07 +0100
Subject: [gecode-users] svn: bug in sudoku.cc
In-Reply-To: <8988B2A3-CB14-41F3-8A5A-8055935698FC@ps.uni-sb.de>
References: <474AD9FF.3070007@logis.cz>
	<BA61F874-32AE-44AA-836A-DAB60B37D83A@ps.uni-sb.de>
	<474AF1B7.7000908@logis.cz>
	<8988B2A3-CB14-41F3-8A5A-8055935698FC@ps.uni-sb.de>
Message-ID: <474BC12B.7060709@logis.cz>


>>>> Trying to build outside of the source tree failed somehow, though.
>>> Otherwise, compilation went extremely smooth with a fresh install of
>>>
>>> Again, this might have been due to the bogus state of the svn, it
>>> currently compiles without problems for me (using MSVC 2005, though).
>>>
>> This was no problem report, just a reference for anyone trying to
>> compile on Cygwin (it's always rather complicated to get INCLUDE, LIB
>> and PATH point to the right directories). Actually, this was the main
>> reason of my post.
>
> Yes, right, that is really appreciated.  I was just referring to the 
> fact that it didn't build in a separate directory, which should be 
> fixed now (I think).  Another way to define the variables is to start 
> the "Visual Studio Command Prompt" (from the start menu).  This will 
> open a Windows console with all the paths set up.  From there, you 
> just type something like "c:\cygwin\bin\bash -login", and everything 
> should work.

Ah, that's nice. I should have realized.... So, I'm off to find out 
where's my SharedArray gone :-)

Cheers,
Filip




From zayenz at gmail.com  Tue Nov 27 08:46:38 2007
From: zayenz at gmail.com (Mikael Zayenz Lagerkvist)
Date: Tue, 27 Nov 2007 08:46:38 +0100
Subject: [gecode-users] svn: bug in sudoku.cc
In-Reply-To: <474BC12B.7060709@logis.cz>
References: <474AD9FF.3070007@logis.cz>
	<BA61F874-32AE-44AA-836A-DAB60B37D83A@ps.uni-sb.de>
	<474AF1B7.7000908@logis.cz>
	<8988B2A3-CB14-41F3-8A5A-8055935698FC@ps.uni-sb.de>
	<474BC12B.7060709@logis.cz>
Message-ID: <63b5c8b00711262346o681eb9b1s3b219b114ad6f703@mail.gmail.com>

On Nov 27, 2007 8:03 AM, Filip Konvi?ka <filip.konvicka at logis.cz> wrote:
> Ah, that's nice. I should have realized.... So, I'm off to find out
> where's my SharedArray gone :-)

From the changelog
(http://www.gecode.org/gecode-doc-latest/PageChanges_2_0_0.html):
  * Other changes
    * Shared arrays are now available in the kernel (where they
properly belong).
      This entails that they are available in the Gecode namespace and not in
      Gecode::Support. (minor)

Cheers,
Mikael

-- 
Mikael Zayenz Lagerkvist, http://www.ict.kth.se/~zayenz/

From tack at ps.uni-sb.de  Tue Nov 27 10:24:24 2007
From: tack at ps.uni-sb.de (Guido Tack)
Date: Tue, 27 Nov 2007 10:24:24 +0100
Subject: [gecode-users] Views and serialization
In-Reply-To: <e7b0e5a40711261617m5386c770w662a3a3c8174d936@mail.gmail.com>
References: <e7b0e5a40711231318v1bad0376i55002192ac4f8451@mail.gmail.com>
	<C003ACA6-6851-47EC-9297-67E020F1323A@ps.uni-sb.de>
	<e7b0e5a40711261617m5386c770w662a3a3c8174d936@mail.gmail.com>
Message-ID: <3A2146E8-F236-4289-8FDB-2301A63DC29F@ps.uni-sb.de>

Gustavo Gutierrez wrote:

> I have a question about the VarMap or VarMapIter. Is it possible to
> know how many variables a VarMap stores, or to access VarBase objects
> through VarMapIter?

No, that functionality was missing.  It's now available in the Gecode  
trunk.

> .  My idea is to iterate on the VarMap and to add
> the VarBase corresponding objects to the q array. The problem is that
> i don't find a method to get the size of the map to use it in a for
> loop. The VarMapIter only provides access to variable specifications
> but not to VarBase objects.

With the added size method, you can implement the iteration yourself  
(using the VarBase* var(int i) const; method).  If you not only want  
to fill an array of VarBase*, but an array of IntVars, BoolVars, or  
SetVars, you'll have to cast the VarBase* to the corresponding  
variable type.  You can do that through the views:

IntVar iv(Int::IntView(static_cast<Int::IntVarImp*>(vm.var(0))))
would create an IntVar from entry 0 of the VarMap vm.  You can use the  
VarSpec to query the variable type.  Currently, vm.spec(0).vti() may  
return "VTI_INT", "VTI_BOOL", or "VTI_SET".

Cheers,
	Guido

-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 2436 bytes
Desc: not available
URL: <http://www.ps.uni-sb.de/pipermail/users/attachments/20071127/687b3722/attachment.bin>

From malcolmr at cse.unsw.EDU.AU  Tue Nov 27 03:52:53 2007
From: malcolmr at cse.unsw.EDU.AU (Malcolm Ryan)
Date: Tue, 27 Nov 2007 13:52:53 +1100
Subject: [gecode-users] Partial sums
Message-ID: <87DCFB23-82A1-4006-A1C5-541C7D15615C@cse.unsw.EDU.AU>

If I have integer variables v1 ... vn and I want to compute the  
partial sums:

s1 = v1
s2 = v1 + v2
s3 = v1 + v2 + v3
...
sn = v1 + ... + vn

What is the best way to express the constraints? As above (using  
linear() constraints) or as:

si = si-1 + vi

Or is there another, better way? Or does it not make any difference?

Malcolm

--
      "Progress should mean that we are always changing the world to fit
       the vision, instead we are always changing the vision."
                - G.K.Chesterton, Orthodoxy






From malcolmr at cse.unsw.edu.au  Tue Nov 27 03:55:50 2007
From: malcolmr at cse.unsw.edu.au (Malcolm Ryan)
Date: Tue, 27 Nov 2007 13:55:50 +1100
Subject: [gecode-users] Duplicate constraints
Message-ID: <3467108C-1EBE-47D2-8745-35EBAF40389D@cse.unsw.edu.au>

If I post the same constraint twice, does Gecode prune the duplicate?

Malcolm

--
"Our age is not willing to stop with faith,
     with its miracle of turning water into wine,
         it goes further, it turns wine into water."
             -- Soren Kierkegaard, "Fear and Trembling"





From malcolmr at cse.unsw.edu.au  Tue Nov 27 07:18:11 2007
From: malcolmr at cse.unsw.edu.au (Malcolm Ryan)
Date: Tue, 27 Nov 2007 17:18:11 +1100
Subject: [gecode-users] Writing a Branching
In-Reply-To: <63b5c8b00711212356q795c5cfq1c103a8c04f31d36@mail.gmail.com>
References: <119BCA17-CE16-438D-B27B-C3B11262375F@cse.unsw.edu.au>
	<63b5c8b00711202237p4b919b31tafd564c35ac77047@mail.gmail.com>
	<BD946019-8AD6-485E-8651-CC5894B56202@cse.unsw.edu.au>
	<63b5c8b00711212213u3f127a57q50ec34c23abf4503@mail.gmail.com>
	<128EC681-EB57-44CD-8E17-6F14B1B6A960@cse.unsw.edu.au>
	<63b5c8b00711212356q795c5cfq1c103a8c04f31d36@mail.gmail.com>
Message-ID: <8C3DABB1-8652-4D05-8458-FD5A0A4B2D46@cse.unsw.edu.au>

On 22/11/2007, at 5:13 PM, Mikael Zayenz Lagerkvist wrote:

> No, the standard branching class is not exposed in Java. On the other
> hand, I'm not sure what you aim to do. You can have more than one
> branching in a Space, so you can have a standard branching
> instantiating all variables after your custom branching is finished.

If the standard branching isn't exposed, is there any way to compute  
the degree of a variable choice?

Malcolm

--
"If there is one thing worse than the modern weakening of major morals
    it is the modern strengthening of minor morals.
Thus it is considered more withering to accuse a man
    of bad taste than of bad ethics."    -- G.K.Chesterton, On Lying  
in Bed






From zayenz at gmail.com  Wed Nov 28 07:25:00 2007
From: zayenz at gmail.com (Mikael Zayenz Lagerkvist)
Date: Wed, 28 Nov 2007 07:25:00 +0100
Subject: [gecode-users] Duplicate constraints
In-Reply-To: <3467108C-1EBE-47D2-8745-35EBAF40389D@cse.unsw.edu.au>
References: <3467108C-1EBE-47D2-8745-35EBAF40389D@cse.unsw.edu.au>
Message-ID: <63b5c8b00711272225wfe8309brf72a1e46d33bdd0e@mail.gmail.com>

On Nov 27, 2007 3:55 AM, Malcolm Ryan <malcolmr at cse.unsw.edu.au> wrote:
> If I post the same constraint twice, does Gecode prune the duplicate?

If you post a constraint twice, then you will add twice the number of
propagators to your Space. The result will be the same, but you will
use more memory and time,

Cheers,
Mikael

-- 
Mikael Zayenz Lagerkvist, http://www.ict.kth.se/~zayenz/



From zayenz at gmail.com  Wed Nov 28 07:28:39 2007
From: zayenz at gmail.com (Mikael Zayenz Lagerkvist)
Date: Wed, 28 Nov 2007 07:28:39 +0100
Subject: [gecode-users] Writing a Branching
In-Reply-To: <8C3DABB1-8652-4D05-8458-FD5A0A4B2D46@cse.unsw.edu.au>
References: <119BCA17-CE16-438D-B27B-C3B11262375F@cse.unsw.edu.au>
	<63b5c8b00711202237p4b919b31tafd564c35ac77047@mail.gmail.com>
	<BD946019-8AD6-485E-8651-CC5894B56202@cse.unsw.edu.au>
	<63b5c8b00711212213u3f127a57q50ec34c23abf4503@mail.gmail.com>
	<128EC681-EB57-44CD-8E17-6F14B1B6A960@cse.unsw.edu.au>
	<63b5c8b00711212356q795c5cfq1c103a8c04f31d36@mail.gmail.com>
	<8C3DABB1-8652-4D05-8458-FD5A0A4B2D46@cse.unsw.edu.au>
Message-ID: <63b5c8b00711272228v65157179jdd8e829399e8b0b7@mail.gmail.com>

On Nov 27, 2007 7:18 AM, Malcolm Ryan <malcolmr at cse.unsw.edu.au> wrote:
> On 22/11/2007, at 5:13 PM, Mikael Zayenz Lagerkvist wrote:
>
> > No, the standard branching class is not exposed in Java. On the other
> > hand, I'm not sure what you aim to do. You can have more than one
> > branching in a Space, so you can have a standard branching
> > instantiating all variables after your custom branching is finished.
>
> If the standard branching isn't exposed, is there any way to compute
> the degree of a variable choice?

Again this is something that was apparently missing in Gecode/J,
thanks for finding it for us. In Gecode, views have a member function
degree to get this information.

Cheers,
Mikael


-- 
Mikael Zayenz Lagerkvist, http://www.ict.kth.se/~zayenz/



From cschulte at kth.se  Wed Nov 28 16:16:12 2007
From: cschulte at kth.se (Christian Schulte)
Date: Wed, 28 Nov 2007 16:16:12 +0100
Subject: [gecode-users] Partial sums
In-Reply-To: <87DCFB23-82A1-4006-A1C5-541C7D15615C@cse.unsw.EDU.AU>
References: <87DCFB23-82A1-4006-A1C5-541C7D15615C@cse.unsw.EDU.AU>
Message-ID: <00c101c831d1$9d98ecb0$d8cac610$@se>

Hi Malcolm,

Nice question! First, after some thinking I would say that both provide the
same strength of propagation for both bounds and domain consistency (that is
not obvious, actually). If the terms in the sum had non-unary coefficients
propagation would be different, with the ternary constraints having weaker
propagation.

Then, the number of propagation steps required for version (1) should be
lower than those for (2). However, the propagators for (1) are more costly. 

So, I would just try it out, trying (2) first. How many variables are we
talking by the way? Tens? Hundreds? Thousands?

Cheers
Christian

--
Christian Schulte, www.ict.kth.se/~schulte/ 


-----Original Message-----
From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf
Of Malcolm Ryan
Sent: Tuesday, November 27, 2007 3:53 AM
To: gecode list
Subject: [gecode-users] Partial sums

If I have integer variables v1 ... vn and I want to compute the  
partial sums:

s1 = v1
s2 = v1 + v2
s3 = v1 + v2 + v3
...
sn = v1 + ... + vn

What is the best way to express the constraints? As above (using  
linear() constraints) or as:

si = si-1 + vi

Or is there another, better way? Or does it not make any difference?

Malcolm

--
      "Progress should mean that we are always changing the world to fit
       the vision, instead we are always changing the vision."
                - G.K.Chesterton, Orthodoxy




_______________________________________________
Gecode users mailing list
users at gecode.org
https://www.gecode.org/mailman/listinfo/gecode-users




From cschulte at kth.se  Thu Nov 29 16:25:09 2007
From: cschulte at kth.se (Christian Schulte)
Date: Thu, 29 Nov 2007 16:25:09 +0100
Subject: [gecode-users] Partial sums
In-Reply-To: <40CECAFB-EB51-40B0-9240-C5D8EA4B3E38@cse.unsw.edu.au>
References: <87DCFB23-82A1-4006-A1C5-541C7D15615C@cse.unsw.EDU.AU>
	<00c101c831d1$9d98ecb0$d8cac610$@se>
	<40CECAFB-EB51-40B0-9240-C5D8EA4B3E38@cse.unsw.edu.au>
Message-ID: <003e01c8329c$08d2aa50$1a77fef0$@se>

Hmm, maybe there is a compromise between the two encodings for partial sums.

Let me just sketch the idea: break up in a tree shaped fashion rather than
either in a chain or diagonal fashion. So as an example, consider the
partial sums:
 s_0 = x_0
 s_1 = x_0 + x_1
 s_2 = x_0 + x_2 + x_3
 s_3 = x_0 + x_2 + x_3 + x_4

Then you could rewrite to
 s_0 = x_0
 s_1 = x_0 + x_1
 s_2 = s_1 + x_2
 s_3 = s_1 + x_2 + x_3

That would prevent the disadvantages of the chain encoding (propagation
between x_0 and x_{n-1} taking n steps) and the diagonal encoding of O(n)
propagators with O(n^2) variables. It should give O(log n) steps between x_0
and x_n and O(n log n) variables in all propagators when generalized to
arbitrary n.

Cheers
Christian 

--
Christian Schulte, www.ict.kth.se/~cschulte/ 


-----Original Message-----
From: Malcolm Ryan [mailto:malcolmr at cse.unsw.edu.au] 
Sent: Thursday, November 29, 2007 12:21 AM
To: cschulte at kth.se
Subject: Re: [gecode-users] Partial sums


On 29/11/2007, at 2:16 AM, Christian Schulte wrote:

> Hi Malcolm,
>
> Nice question! First, after some thinking I would say that both  
> provide the
> same strength of propagation for both bounds and domain consistency  
> (that is
> not obvious, actually). If the terms in the sum had non-unary  
> coefficients
> propagation would be different, with the ternary constraints having  
> weaker
> propagation.
>
> Then, the number of propagation steps required for version (1)  
> should be
> lower than those for (2). However, the propagators for (1) are more  
> costly.
>
> So, I would just try it out, trying (2) first. How many variables  
> are we
> talking by the way? Tens? Hundreds? Thousands?

Well, it depends on the scale of the problem, but probably tens or  
hundreds, not thousands.

Malcolm

--
      "The Christian ideal has not been tried and found wanting;
       it has been found difficult and left untried."
             - G.K.Chesterton, What's Wrong With The World







