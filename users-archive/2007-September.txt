From debdeep.banerjee at rsise.anu.edu.au  Mon Sep  3 11:27:15 2007
From: debdeep.banerjee at rsise.anu.edu.au (Debdeep Banerjee)
Date: Mon, 03 Sep 2007 19:27:15 +1000
Subject: [gecode-users] Posting constraints/ propagating after variable
	assignment
Message-ID: <46DBD373.4050400@rsise.anu.edu.au>

hi,
I need to do post some constraint after an assignment of a variable. For 
example if  X is my variable, after setting X = a, I need to remove some 
possible values from other variables' domains. How to implement this in 
Gecode/J ?

With regards
Debdeep




From debdeep.banerjee at rsise.anu.edu.au  Mon Sep  3 11:00:26 2007
From: debdeep.banerjee at rsise.anu.edu.au (Debdeep Banerjee)
Date: Mon, 03 Sep 2007 19:00:26 +1000
Subject: [gecode-users] Posting constraints/ propagating after variable
	assignment
Message-ID: <46DBCD2A.2090000@rsise.anu.edu.au>

hi,
I need to do post some constraint after an assignment of a variable. for 
example if  X is my variable, after setting X = a, I need to remove some 
possible values from other variables' domains. How to implement this in 
Gecode/J ?

With regards
Debdeep



From filip.konvicka at logis.cz  Tue Sep  4 15:32:48 2007
From: filip.konvicka at logis.cz (=?UTF-8?B?RmlsaXAgS29udmnEjWth?=)
Date: Tue, 04 Sep 2007 15:32:48 +0200
Subject: [gecode-users] status of Space* in Branching::copy
Message-ID: <46DD5E80.6070501@logis.cz>

Hi,

one thing that keeps me occupied: when a branching or propagator is 
cloned, the space instance it is passed is just partially constructed. 
This makes it difficult to make references to any data inside the space 
(which is simply not there yet in e.g. Branching::copy). Is there no 
other way? I understand that the branching/propagator cloning takes 
place in Space copy ctor, but it would be far more convenient for me to 
get a fully-constructed space in Branching::copy. (For example, I'm 
unable to construct some non-trivial references to space's data in my 
branching, as this initialization can't be moved out of the constructor.)

Cheers,
Filip




From jeremie.vautard at laposte.net  Tue Sep  4 17:15:25 2007
From: jeremie.vautard at laposte.net (=?ISO-8859-1?Q?J=E9r=E9mie_Vautard?=)
Date: Tue, 4 Sep 2007 17:15:25 +0200
Subject: [gecode-users] Building an intset with an int[][2]
Message-ID: <C734C1F2-D4C4-44BC-B167-A0F536F6270C@laposte.net>

Hi !

I have a problem concerning the use of the IntSet(int[][2],int)  
constructor : I have a function which builds the array of ranges with  
a code which looks like :
{
int** ret = new int*[length_of_array]
for (int i=0;i<length_of_array;i++) ret[i] = new int[2];
return ret;
}

In another class, I want to build the IntSet using the array given by  
my function. However, if I do :
int** myRanges = my_function(parameters);
Intset mySet(myRanges,the_length);

XCode answers me : Invalid conversion from int** to int.

Obviously, it tries to use the wrong constructor ( IntSet(min,max) ),  
but then, that means it considers there is a difference between int[] 
[] and int** types.
Do you have an idea of how to make it use the right constructor ?

Cheers,

Jeremie



From tack at ps.uni-sb.de  Wed Sep  5 20:53:52 2007
From: tack at ps.uni-sb.de (Guido Tack)
Date: Wed, 5 Sep 2007 20:53:52 +0200
Subject: [gecode-users] Building an intset with an int[][2]
In-Reply-To: <C734C1F2-D4C4-44BC-B167-A0F536F6270C@laposte.net>
References: <C734C1F2-D4C4-44BC-B167-A0F536F6270C@laposte.net>
Message-ID: <C25552EE-00A7-4843-8CAE-567E56D12D15@ps.uni-sb.de>

J?r?mie Vautard wrote:

> I have a problem concerning the use of the IntSet(int[][2],int)
> constructor : I have a function which builds the array of ranges with
> a code which looks like :
> {
> int** ret = new int*[length_of_array]
> for (int i=0;i<length_of_array;i++) ret[i] = new int[2];
> return ret;
> }
>
> In another class, I want to build the IntSet using the array given by
> my function. However, if I do :
> int** myRanges = my_function(parameters);
> Intset mySet(myRanges,the_length);

There's a big difference between int[][2] and int**! The latter is an  
array of arrays, whereas the first is a multidimensional array.  Your  
code has to look as follows (not tested ;-) ):

{
int (*ret)[2] = new int[length_of_array][2];
return ret;
}

... returning a pointer to a two-dimensional array. And then

int (*myRanges)[2] = my_function(parameters);
IntSet mySet(myRanges,the_length);

Cheers,
	Guido




From tack at ps.uni-sb.de  Wed Sep  5 21:10:15 2007
From: tack at ps.uni-sb.de (Guido Tack)
Date: Wed, 5 Sep 2007 21:10:15 +0200
Subject: [gecode-users] status of Space* in Branching::copy
In-Reply-To: <46DD5E80.6070501@logis.cz>
References: <46DD5E80.6070501@logis.cz>
Message-ID: <CBA1269A-E919-403C-88A7-98D4E71F31E9@ps.uni-sb.de>

Filip Konvi?ka wrote:

> one thing that keeps me occupied: when a branching or propagator is
> cloned, the space instance it is passed is just partially constructed.
> This makes it difficult to make references to any data inside the  
> space
> (which is simply not there yet in e.g. Branching::copy). Is there no
> other way? I understand that the branching/propagator cloning takes
> place in Space copy ctor, but it would be far more convenient for  
> me to
> get a fully-constructed space in Branching::copy. (For example, I'm
> unable to construct some non-trivial references to space's data in my
> branching, as this initialization can't be moved out of the  
> constructor.)

That's just not possible in the current architecture.  If I  
understand you correctly, you need to make sure that some object is  
cloned before all actors (propagators & branchings) are. That way,  
you can be sure that that object is initialized when your  
Branching::copy is called.  I have something like that in a private  
branch, I'll dig a bit and let you know.

Cheers,
	Guido




From filip.konvicka at logis.cz  Thu Sep  6 10:09:41 2007
From: filip.konvicka at logis.cz (=?UTF-8?B?RmlsaXAgS29udmnEjWth?=)
Date: Thu, 06 Sep 2007 10:09:41 +0200
Subject: [gecode-users] status of Space* in Branching::copy
In-Reply-To: <CBA1269A-E919-403C-88A7-98D4E71F31E9@ps.uni-sb.de>
References: <46DD5E80.6070501@logis.cz>
	<CBA1269A-E919-403C-88A7-98D4E71F31E9@ps.uni-sb.de>
Message-ID: <46DFB5C5.5030109@logis.cz>

Guido Tack (5.9.2007 21:10):
> Filip Konvi?ka wrote:
>
>> one thing that keeps me occupied: when a branching or propagator is
>> cloned, the space instance it is passed is just partially constructed.
>> This makes it difficult to make references to any data inside the space
>> (which is simply not there yet in e.g. Branching::copy). Is there no
>> other way? I understand that the branching/propagator cloning takes
>> place in Space copy ctor, but it would be far more convenient for me to
>> get a fully-constructed space in Branching::copy. (For example, I'm
>> unable to construct some non-trivial references to space's data in my
>> branching, as this initialization can't be moved out of the 
>> constructor.)
>
> That's just not possible in the current architecture.  If I understand 
> you correctly, you need to make sure that some object is cloned before 
> all actors (propagators & branchings) are. That way, you can be sure 
> that that object is initialized when your Branching::copy is called.  
> I have something like that in a private branch, I'll dig a bit and let 
> you know.
Thanks!

The thing is that the cloning of actors is (my guess) done in 
Space::Space. So say that I have derived my own space class Space2. My 
actors are passed, during cloning, a pointer to the new clone of Space2, 
but since the cloning of the actors is done in Space::Space, the Space2 
object is not fully initialized yet and I can not static_cast it to 
Space2 there.

Note that in the Space2::Space2() constructor (when creating the root 
space), I can make sure that the needed parts of Space2 are already 
constructed before posting the actor. So it came as a surprise to me 
that I got a runtime error in cloning, because things worked just fine 
for the root space. The space I saw being passed to the actor looked 
invalid, and it was not immediately obvious what was happening.

One way that I think this could be handled is cloning in 2 steps: first 
create a copy of the space, then re-create the actors. Since, from the 
user's point of view, a space does not have explicit access to its 
actors (yet :-)), I don't see how this could be a problem (maybe just 
that it should be explicitly prohibited to create actors during 
cloning). The only thing is, who and how would trigger the cloning of 
the actors. Maybe Space::clone() could be "protected" and renamed to 
"getClone", and there could be a public non-virtual

Space* Space::clone() const {
  Space *pClone=getClone();
  pClone->copyActorsFrom(this);
  return pClone;
}

That's many maybes :-) Just wanted to explain what problems I am facing. 
But there are workarounds, so nothing serious.

Otherwise, the library works extremely well, bravo!

Cheers,
Filip




From cschulte at kth.se  Thu Sep  6 11:39:26 2007
From: cschulte at kth.se (Christian Schulte)
Date: Thu, 6 Sep 2007 11:39:26 +0200
Subject: [gecode-users] status of Space* in Branching::copy
In-Reply-To: <46DFB5C5.5030109@logis.cz>
Message-ID: <002501c7f069$d093d4d0$acd4ed82@beule>

Hmmm, actually the copying is already a two stage process (and a extremly
delicate one). One of the key invariants in the process is that no new
actors (actually, no new anything) can be created during cloning!

It is already now the case that when the constructor Space::Space is
finished, the space is not yet fully initialized, however all data
structures in the newly created space can be inspected (with const member
functions). When moving things around the way you suggest that would not
work an? longer. Some const member functions would be not allowed (as they
just would segfault). I really would like to keep this invariant: everything
can be inspected but nothing can be changed. Even though this only matters
for constructors.

So, the idea to store the data in the space does not look that good after
all. We kind of know what to do but as we have no example we could use to
shape the right abstractions I don't know what to do. If you yourself want
to experiment, we could tell you how to massage the code for copying to hack
around.

Christian

--
Christian Schulte, http://www.imit.kth.se/~schulte/ 

-----Original Message-----
From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf
Of Filip Konvicka
Sent: Thursday, September 06, 2007 10:10 AM
To: Guido Tack
Cc: users at gecode.org
Subject: Re: [gecode-users] status of Space* in Branching::copy


Guido Tack (5.9.2007 21:10):
> Filip Konvi?ka wrote:
>
>> one thing that keeps me occupied: when a branching or propagator is 
>> cloned, the space instance it is passed is just partially 
>> constructed. This makes it difficult to make references to any data 
>> inside the space (which is simply not there yet in e.g. 
>> Branching::copy). Is there no other way? I understand that the 
>> branching/propagator cloning takes place in Space copy ctor, but it 
>> would be far more convenient for me to get a fully-constructed space 
>> in Branching::copy. (For example, I'm unable to construct some 
>> non-trivial references to space's data in my branching, as this 
>> initialization can't be moved out of the
>> constructor.)
>
> That's just not possible in the current architecture.  If I understand
> you correctly, you need to make sure that some object is cloned before 
> all actors (propagators & branchings) are. That way, you can be sure 
> that that object is initialized when your Branching::copy is called.  
> I have something like that in a private branch, I'll dig a bit and let 
> you know.
Thanks!

The thing is that the cloning of actors is (my guess) done in 
Space::Space. So say that I have derived my own space class Space2. My 
actors are passed, during cloning, a pointer to the new clone of Space2, 
but since the cloning of the actors is done in Space::Space, the Space2 
object is not fully initialized yet and I can not static_cast it to 
Space2 there.

Note that in the Space2::Space2() constructor (when creating the root 
space), I can make sure that the needed parts of Space2 are already 
constructed before posting the actor. So it came as a surprise to me 
that I got a runtime error in cloning, because things worked just fine 
for the root space. The space I saw being passed to the actor looked 
invalid, and it was not immediately obvious what was happening.

One way that I think this could be handled is cloning in 2 steps: first 
create a copy of the space, then re-create the actors. Since, from the 
user's point of view, a space does not have explicit access to its 
actors (yet :-)), I don't see how this could be a problem (maybe just 
that it should be explicitly prohibited to create actors during 
cloning). The only thing is, who and how would trigger the cloning of 
the actors. Maybe Space::clone() could be "protected" and renamed to 
"getClone", and there could be a public non-virtual

Space* Space::clone() const {
  Space *pClone=getClone();
  pClone->copyActorsFrom(this);
  return pClone;
}

That's many maybes :-) Just wanted to explain what problems I am facing. 
But there are workarounds, so nothing serious.

Otherwise, the library works extremely well, bravo!

Cheers,
Filip


_______________________________________________
Gecode users mailing list
users at gecode.org
https://www.gecode.org/mailman/listinfo/gecode-users




From filip.konvicka at logis.cz  Thu Sep  6 12:57:31 2007
From: filip.konvicka at logis.cz (=?UTF-8?B?RmlsaXAgS29udmnEjWth?=)
Date: Thu, 06 Sep 2007 12:57:31 +0200
Subject: [gecode-users] status of Space* in Branching::copy
In-Reply-To: <002501c7f069$d093d4d0$acd4ed82@beule>
References: <002501c7f069$d093d4d0$acd4ed82@beule>
Message-ID: <46DFDD1B.90500@logis.cz>

Well, as I said, there were too many maybes in my suggestion, and I 
should have looked at the code before suggesting anything in the first 
place. The last thing I'd want is breaking invariants.

Accessing space's data from an actor works fine, one just must avoid 
accessing it during cloning. This implies that sometimes you need to 
have a pointer instead of a reference to the data (you can initialize 
the pointer later, but you can't do the same with a reference). This is 
no performance killer, either (one more "if"...). Maybe put a note to 
Actor::copy docs stating that the space being passed to it is in fact 
just a space embryo.

Cheers,
Filip

> Hmmm, actually the copying is already a two stage process (and a extremly
> delicate one). One of the key invariants in the process is that no new
> actors (actually, no new anything) can be created during cloning!
>
> It is already now the case that when the constructor Space::Space is
> finished, the space is not yet fully initialized, however all data
> structures in the newly created space can be inspected (with const member
> functions). When moving things around the way you suggest that would not
> work an? longer. Some const member functions would be not allowed (as they
> just would segfault). I really would like to keep this invariant: everything
> can be inspected but nothing can be changed. Even though this only matters
> for constructors.
>
> So, the idea to store the data in the space does not look that good after
> all. We kind of know what to do but as we have no example we could use to
> shape the right abstractions I don't know what to do. If you yourself want
> to experiment, we could tell you how to massage the code for copying to hack
> around.
>
> Christian
>
> --
> Christian Schulte, http://www.imit.kth.se/~schulte/ 
>
> -----Original Message-----
> From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf
> Of Filip Konvicka
> Sent: Thursday, September 06, 2007 10:10 AM
> To: Guido Tack
> Cc: users at gecode.org
> Subject: Re: [gecode-users] status of Space* in Branching::copy
>
>
> Guido Tack (5.9.2007 21:10):
>   
>> Filip Konvi?ka wrote:
>>
>>     
>>> one thing that keeps me occupied: when a branching or propagator is 
>>> cloned, the space instance it is passed is just partially 
>>> constructed. This makes it difficult to make references to any data 
>>> inside the space (which is simply not there yet in e.g. 
>>> Branching::copy). Is there no other way? I understand that the 
>>> branching/propagator cloning takes place in Space copy ctor, but it 
>>> would be far more convenient for me to get a fully-constructed space 
>>> in Branching::copy. (For example, I'm unable to construct some 
>>> non-trivial references to space's data in my branching, as this 
>>> initialization can't be moved out of the
>>> constructor.)
>>>       
>> That's just not possible in the current architecture.  If I understand
>> you correctly, you need to make sure that some object is cloned before 
>> all actors (propagators & branchings) are. That way, you can be sure 
>> that that object is initialized when your Branching::copy is called.  
>> I have something like that in a private branch, I'll dig a bit and let 
>> you know.
>>     
> Thanks!
>
> The thing is that the cloning of actors is (my guess) done in 
> Space::Space. So say that I have derived my own space class Space2. My 
> actors are passed, during cloning, a pointer to the new clone of Space2, 
> but since the cloning of the actors is done in Space::Space, the Space2 
> object is not fully initialized yet and I can not static_cast it to 
> Space2 there.
>
> Note that in the Space2::Space2() constructor (when creating the root 
> space), I can make sure that the needed parts of Space2 are already 
> constructed before posting the actor. So it came as a surprise to me 
> that I got a runtime error in cloning, because things worked just fine 
> for the root space. The space I saw being passed to the actor looked 
> invalid, and it was not immediately obvious what was happening.
>
> One way that I think this could be handled is cloning in 2 steps: first 
> create a copy of the space, then re-create the actors. Since, from the 
> user's point of view, a space does not have explicit access to its 
> actors (yet :-)), I don't see how this could be a problem (maybe just 
> that it should be explicitly prohibited to create actors during 
> cloning). The only thing is, who and how would trigger the cloning of 
> the actors. Maybe Space::clone() could be "protected" and renamed to 
> "getClone", and there could be a public non-virtual
>
> Space* Space::clone() const {
>   Space *pClone=getClone();
>   pClone->copyActorsFrom(this);
>   return pClone;
> }
>
> That's many maybes :-) Just wanted to explain what problems I am facing. 
> But there are workarounds, so nothing serious.
>
> Otherwise, the library works extremely well, bravo!
>
> Cheers,
> Filip
>
>
> _______________________________________________
> Gecode users mailing list
> users at gecode.org
> https://www.gecode.org/mailman/listinfo/gecode-users
>
>   




From debdeep.banerjee at rsise.anu.edu.au  Fri Sep  7 05:01:38 2007
From: debdeep.banerjee at rsise.anu.edu.au (Debdeep Banerjee)
Date: Fri, 07 Sep 2007 13:01:38 +1000
Subject: [gecode-users] branching priority
Message-ID: <46E0BF12.9080100@rsise.anu.edu.au>

hi,
  I need to assign the variables in a particular order. I have three 
disjoint set of variable, say, S1, S2, S3. I need to tell the solver 
that first assign the variables from S1, then S2 and then S3. How can i 
do it in Gecode/J ?
What I did was using three different branching statements
branch( this, S1, BVAR, BVAL)
branch( this, S2, BVAR, BVAL)
branch( this, S3, BVAR, BVAL)

Is this the correct way of achieving above ?

With regards
Debdeep



From tack at ps.uni-sb.de  Fri Sep  7 07:46:41 2007
From: tack at ps.uni-sb.de (Guido Tack)
Date: Fri, 7 Sep 2007 07:46:41 +0200
Subject: [gecode-users] branching priority
In-Reply-To: <46E0BF12.9080100@rsise.anu.edu.au>
References: <46E0BF12.9080100@rsise.anu.edu.au>
Message-ID: <96BB0FD8-B5F6-46B0-9FC7-9DAD27414E16@ps.uni-sb.de>

Debdeep Banerjee wrote:
> I need to assign the variables in a particular order. I have three
> disjoint set of variable, say, S1, S2, S3. I need to tell the solver
> that first assign the variables from S1, then S2 and then S3. How  
> can i
> do it in Gecode/J ?
> What I did was using three different branching statements
> branch( this, S1, BVAR, BVAL)
> branch( this, S2, BVAR, BVAL)
> branch( this, S3, BVAR, BVAL)
>
> Is this the correct way of achieving above ?

Yes.  And you can easily verify this in Gist (you're using Gecode/J,  
right?).

Cheers,
	Guido




From volpadri at alice.it  Tue Sep 18 21:33:42 2007
From: volpadri at alice.it (volpadri at alice.it)
Date: Tue, 18 Sep 2007 21:33:42 +0200
Subject: [gecode-users] newbie's question about distribution
Message-ID: <FBCMMO03rIQiruiKjJi0000eadd@FBCMMO03.fbc.local>

Hi to you all,

I am playing with the Eclipse + Jython environment and setup the simple
problem:

==================================================================

from org.gecode import *

class MySpace(Space):
    def __init__(self):
        self.vars = VarArray()
    def copy(self,share):
        new = MySpace()
        new.vars = VarArray(new,share,self.vars)
        return new
    def intVar(self, fromto):
        v = IntVar(self, fromto[0], fromto[1])
        self.vars.add(v)
        return v
    def intVarList(self,n,fromto):
        lst = map(lambda i:  self.intVar(fromto), range(n))
        return lst
    def linear_eq(self,vlst,term):
        varray = VarArray(vlst)
        Gecode.linear(self,varray,IntRelType.IRT_EQ,term)
    def dom(self,v,lo,hi):
        Gecode.dom(self,v,lo,hi)

###############################################################################

if __name__ == "__main__":
    s = MySpace()
    v1 = s.intVar((0,9))
    v2 = s.intVar((0,9))
    s.linear_eq([v1,v2],2 )        # v1 + v2 := 2
    s.dom(v1,1,2)
    search = DFSSearch(s)
    sol = search.next()
    while sol:
        print sol.vars
        sol = search.next()

==================================================================
the result is:

>>> [[1..2],[0..1]]

but at this point I can't understand how to distribute on the vars.

Can you help me?

Thanks,

Adriano Volpones 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.ps.uni-sb.de/pipermail/users/attachments/20070918/1a735e95/attachment.htm>

From cschulte at kth.se  Tue Sep 18 22:04:56 2007
From: cschulte at kth.se (Christian Schulte)
Date: Tue, 18 Sep 2007 22:04:56 +0200
Subject: [gecode-users] newbie's question about distribution
In-Reply-To: <FBCMMO03rIQiruiKjJi0000eadd@FBCMMO03.fbc.local>
Message-ID: <000001c7fa2f$30961ea0$0401a8c0@tiny>

Dear Adriano,
 
thanks for the nice deduction puzzle... You don't say which language or
version you use. Apparently, you are using an interface to Gecode we have no
knowledge (well I can have an educated guess) about and that we do not
support.
 
Please contact the people who did that interface.
 
People who did the interface: please clarify the relation to Gecode. Either
get in  touch with us to host your interface or put up a clarification of
your interface to Gecode proper. Thanks.
 
Christian

--
Christian Schulte, www.ict.kth.se/~schulte/ 

-----Original Message-----
From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf
Of volpadri at alice.it
Sent: Tuesday, September 18, 2007 9:34 PM
To: users at gecode.org
Subject: [gecode-users] newbie's question about distribution



Hi to you all,

I am playing with the Eclipse + Jython environment and setup the simple
problem:

==================================================================

from org.gecode import *

class MySpace(Space):
    def __init__(self):
        self.vars = VarArray()
    def copy(self,share):
        new = MySpace()
        new.vars = VarArray(new,share,self.vars)
        return new
    def intVar(self, fromto):
        v = IntVar(self, fromto[0], fromto[1])
        self.vars.add(v)
        return v
    def intVarList(self,n,fromto):
        lst = map(lambda i:  self.intVar(fromto), range(n))
        return lst
    def linear_eq(self,vlst,term):
        varray = VarArray(vlst)
        Gecode.linear(self,varray,IntRelType.IRT_EQ,term)
    def dom(self,v,lo,hi):
        Gecode.dom(self,v,lo,hi)

############################################################################
###

if __name__ == "__main__":
    s = MySpace()
    v1 = s.intVar((0,9))
    v2 = s.intVar((0,9))
    s.linear_eq([v1,v2],2 )        # v1 + v2 := 2
    s.dom(v1,1,2)
    search = DFSSearch(s)
    sol = search.next()
    while sol:
        print sol.vars
        sol = search.next()

==================================================================
the result is:

>>> [[1..2],[0..1]]

but at this point I can't understand how to distribute on the vars.

Can you help me?

Thanks,

Adriano Volpones 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.ps.uni-sb.de/pipermail/users/attachments/20070918/e9be480f/attachment.htm>

From tack at ps.uni-sb.de  Wed Sep 19 08:09:57 2007
From: tack at ps.uni-sb.de (Guido Tack)
Date: Wed, 19 Sep 2007 08:09:57 +0200
Subject: [gecode-users] newbie's question about distribution
In-Reply-To: <FBCMMO03rIQiruiKjJi0000eadd@FBCMMO03.fbc.local>
References: <FBCMMO03rIQiruiKjJi0000eadd@FBCMMO03.fbc.local>
Message-ID: <5652D609-C739-4591-9053-042239EA4088@ps.uni-sb.de>

Hi.
> I am playing with the Eclipse + Jython environment and setup the  
> simple
> problem:
>
If I'm not mistaken, Jython allows you to access arbitrary Java  
classes from within Python, right?  So I guess you just installed  
Gecode/J and use it through the Jython wrapper.  While we can't help  
you with the syntax, you should have a look at the examples that come  
with Gecode/J and extrapolate from there.  For distributing on the  
variables, you want to have a look at the "branch" functions in  
particular.

Cheers,
	Guido


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.ps.uni-sb.de/pipermail/users/attachments/20070919/013d6db8/attachment.htm>

From debdeep.banerjee at rsise.anu.edu.au  Wed Sep 19 11:12:41 2007
From: debdeep.banerjee at rsise.anu.edu.au (Debdeep Banerjee)
Date: Wed, 19 Sep 2007 19:12:41 +1000
Subject: [gecode-users] Value assignment
Message-ID: <46F0E809.2000309@rsise.anu.edu.au>

hi,
  In some cases when I know my problem is solved, I want to assign all 
non-assigned variables to -1 ( -1 is included in their domain). I wrote 
a custom branching. when i know I have assigned all the variable that 
should be in the solution, I know I am done. The what i did is post 
constraint like following

for (  int i = 0; i < transitions.size(); ++i)
{
      IntVarView tr = transitions.get(i);
      if ( !tr.assigned())
      {
           IntVar v = transitionsVars.get(i);
           eq(home, v, CSPOrderBasedEnc2.NOT_IN_PLAN);
      }
}

and return null from my "JavaBranchingDesc description(Space home)" 
method. But I am getting a JVM error.......
what I am doing wrong....or what is the best way to do it?

Any help will be highly appreciated.

With regards
Debdeep



From zayenz at gmail.com  Wed Sep 19 11:26:29 2007
From: zayenz at gmail.com (Mikael Zayenz Lagerkvist)
Date: Wed, 19 Sep 2007 11:26:29 +0200
Subject: [gecode-users] Value assignment
In-Reply-To: <46F0E809.2000309@rsise.anu.edu.au>
References: <46F0E809.2000309@rsise.anu.edu.au>
Message-ID: <63b5c8b00709190226h1f98ca68r1192ba7e44fcc0a7@mail.gmail.com>

To assign the remaining variables, you can use the assign-method. See
[1] for documentation.

If you still want to write your own branching, you can follow the
example in QueensJavaPropagator [2]. For example, it is not ok to
return null from description. Also, you should use IntViews and not
IntVars in a branching.

Cheers,
Mikael

[1] http://www.gecode.org/gecodej/doc/group__TaskIntIntBranch.html#g71b2d36daa7163d5e3c1bd0230fb0be5
[2] http://www-gecode.org/gecodej/doc/QueensJavaPropagator_8java-source.html#l00148

On 9/19/07, Debdeep Banerjee <debdeep.banerjee at rsise.anu.edu.au> wrote:
> hi,
>   In some cases when I know my problem is solved, I want to assign all
> non-assigned variables to -1 ( -1 is included in their domain). I wrote
> a custom branching. when i know I have assigned all the variable that
> should be in the solution, I know I am done. The what i did is post
> constraint like following
>
> for (  int i = 0; i < transitions.size(); ++i)
> {
>       IntVarView tr = transitions.get(i);
>       if ( !tr.assigned())
>       {
>            IntVar v = transitionsVars.get(i);
>            eq(home, v, CSPOrderBasedEnc2.NOT_IN_PLAN);
>       }
> }
>
> and return null from my "JavaBranchingDesc description(Space home)"
> method. But I am getting a JVM error.......
> what I am doing wrong....or what is the best way to do it?
>
> Any help will be highly appreciated.
>
> With regards
> Debdeep
>
> _______________________________________________
> Gecode users mailing list
> users at gecode.org
> https://www.gecode.org/mailman/listinfo/gecode-users
>


-- 
Mikael Zayenz Lagerkvist, http://www.ict.kth.se/~zayenz/



From volpadri at alice.it  Wed Sep 19 13:05:30 2007
From: volpadri at alice.it (volpadri at alice.it)
Date: Wed, 19 Sep 2007 13:05:30 +0200
Subject: [gecode-users] newbie's question about distribution
Message-ID: <FBCMMO01zscE8NpqhNP000154c5@FBCMMO01.fbc.local>

Hi,

sorry (Christian) for the "puzzle", I'll try to explain 
from the ground up.

I used Oz for a while and so I supposed the same strategy
was valid for Gecode:
- declare variables
- post constraints
- distribute
- search the solution(s)

Now I make heavy use of Jython as main language of development
with the advantages of beautiful (personally) sintax as in Python
and an easy link to the world of Java.

So probably the right question would be : 
"is the glue code from Gecode to Jython correct ?"
Let me investigate further and translate in Jython some basic 
puzzle like "money" and then repost the question (if necessary).

Thanks,

Adriano
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.ps.uni-sb.de/pipermail/users/attachments/20070919/8083f682/attachment.htm>

From filip.konvicka at logis.cz  Wed Sep 19 15:44:56 2007
From: filip.konvicka at logis.cz (=?UTF-8?B?RmlsaXAgS29udmnEjWth?=)
Date: Wed, 19 Sep 2007 15:44:56 +0200
Subject: [gecode-users] Actor::dispose
Message-ID: <46F127D8.2060504@logis.cz>

Dear Gecode gurus,

I'm currently tracking down some memory leaks that occur when I'm using 
Gecode. I have custom propagators and branchings, and both have some 
non-trivial members (vectors and other data structures). What surprised 
me was that nobody calls the destructors of the vectors, and what's 
more, not even the destructors of the actors. Then I remembered seeing 
something about dispose() in Gecode 1.2.0 changelog. I ended up calling 
the members' destructors explicitly in dispose(). Is this the correct 
approach, or am I missing something?

Thanks,
Filip




From cschulte at kth.se  Wed Sep 19 15:54:14 2007
From: cschulte at kth.se (Christian Schulte)
Date: Wed, 19 Sep 2007 15:54:14 +0200
Subject: [gecode-users] Actor::dispose
In-Reply-To: <46F127D8.2060504@logis.cz>
Message-ID: <001d01c7fac4$908f8f90$0401a8c0@tiny>

Yes, that is correct. The reason why we do not use destructors is because
destructors do not support arguments: however, as you might have experienced
yourself already, during destruction the home space is typically needed.

There is one other catch: when a space is destructed (for example after it
has failed), only dispose member functions for actors are called that have
registered by calling force (please check the doc). Or check some examples
(eg. regular/dom.icc). The reason for this: most propagators do not use any
external resources, they just use space-allocated memory. In that case there
is no reason to call dispose...

Good luck!
Christian

--
Christian Schulte, www.ict.kth.se/~schulte/ 

-----Original Message-----
From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf
Of Filip Konvicka
Sent: Wednesday, September 19, 2007 3:45 PM
To: users at gecode.org
Subject: [gecode-users] Actor::dispose


Dear Gecode gurus,

I'm currently tracking down some memory leaks that occur when I'm using 
Gecode. I have custom propagators and branchings, and both have some 
non-trivial members (vectors and other data structures). What surprised 
me was that nobody calls the destructors of the vectors, and what's 
more, not even the destructors of the actors. Then I remembered seeing 
something about dispose() in Gecode 1.2.0 changelog. I ended up calling 
the members' destructors explicitly in dispose(). Is this the correct 
approach, or am I missing something?

Thanks,
Filip


_______________________________________________
Gecode users mailing list
users at gecode.org https://www.gecode.org/mailman/listinfo/gecode-users




From filip.konvicka at logis.cz  Wed Sep 19 18:24:00 2007
From: filip.konvicka at logis.cz (=?UTF-8?B?RmlsaXAgS29udmnEjWth?=)
Date: Wed, 19 Sep 2007 18:24:00 +0200
Subject: [gecode-users] Actor::dispose
In-Reply-To: <001d01c7fac4$908f8f90$0401a8c0@tiny>
References: <001d01c7fac4$908f8f90$0401a8c0@tiny>
Message-ID: <46F14D20.40602@logis.cz>

Christian Schulte 19.9.2007 15:54:
> Yes, that is correct. The reason why we do not use destructors is because
> destructors do not support arguments: however, as you might have experienced
> yourself already, during destruction the home space is typically needed.
>
> There is one other catch: when a space is destructed (for example after it
> has failed), only dispose member functions for actors are called that have
> registered by calling force (please check the doc). Or check some examples
> (eg. regular/dom.icc). The reason for this: most propagators do not use any
> external resources, they just use space-allocated memory. In that case there
> is no reason to call dispose...
>
> Good luck!
>   
Christian, thanks for the ultra-fast response :-) Actually, it was so 
fast that I did not notice until after an hour!

What's more, it solved the last one of the leaks, so now my solver runs 
fine. What I learned is
- pass IntArgs from Space to Actor::post, not SharedArray<int>
- use boost::noncopyable with branchings&propagators (this was in fact a 
boost-related problem, as I was mistakenly using "*this" instead of 
"this" with boost::bind, causing unwanted copies of my actors).
- "fd" is not related to "finite domain" as I was probably thinking when 
I originally used the default in my branching constructor, but "force 
dispose()"

Cheers,
Filip




From george.rudolph at citadel.edu  Thu Sep 20 16:58:27 2007
From: george.rudolph at citadel.edu (George Rudolph)
Date: Thu, 20 Sep 2007 10:58:27 -0400
Subject: [gecode-users] Help with count method in script
In-Reply-To: <46F14D20.40602@logis.cz>
Message-ID: <99CC4F739DCD4244957775EF32358A9D013EDF97@EVS01.nation.citadel.edu>

I would like help with the following Gecode/J script.
As indicated below, when I uncomment the calls to count
and run the script, it fails--but I am expecting two results.
What am I doing incorrectly?
(Note: For those it may interest, I am using Gecode/J with Eclipse.)

--------- begin code -----------

package citadel;

import static org.gecode.Gecode.*;
import static org.gecode.GecodeEnumConstants.*;

import org.gecode.*;

/**
*   Script for computing 2-class association schemes,
*   modified from the Queens example, and uses the example.Options class
*   unchanged.
*   The goal of this script is to generate (v-1)-length sequences
*   with the following properties:
*   1. v is prime and v=4t+1, t >=0.
*   2. each sequence has n1 occurrences of lambda1 and n2 occurrences of
lambda2.
*   3. the sequence is a palindrome:
*      element 0 and element v-2 have the same value,
*      element 1 and element v-3 have the same value,
*      element 2 and element 4-4 have the same value, 
*      etc.
*   
*   @author George Rudolph
*   @version 1.0 Sep 20, 2007
*/
public class AssociationScheme extends Space {
  public int v;
  public int n1;
  public int n2;
  public int lambda1;
  public int lambda2;
  public VarArray<IntVar> schemeCount;

  /**
 * @param opt Convenience object containing options 
 * @see citadel.Options#toString()
 */
public AssociationScheme(Options opt) {
    super();
    v = opt.size;
    n1= (v-1)/2;
    n2 = (v-1)/2;
    lambda1 = 1;
    lambda2 = 2;
    schemeCount = new VarArray<IntVar>(this, v-1, IntVar.class, 1, 2);
       
    //in the difference vector, constrain it so that
    //the value of position i is the same as the value at position v-i
    //for a (v-1)-length array starting at (conceptual) index 1
    //TODO: simplify the indexing in this constraint
    for (int i=1; i<=v-1; i++)
    {
      rel(this, schemeCount.get(i-1), IRT_EQ, schemeCount.get(v-1-i),
opt.icl);
    }
    /** need help with these -- when I uncomment these constraints 
     * and run, I get a failed space, but I am expecting two results:
     * [1,2,2,1] and [2,1,1,2]
     * What have I done incorrectly?
     */
    //n1 slots have the value lambda1, n2 slots have the value lambda2
    // what I want to say is "exactly n1 elements have the value lambda1
in q"
    // for example.
    //count(this, q, n1, IRT_EQ, lambda1, opt.icl );
    //count(this, q, n2, IRT_EQ, lambda2, opt.icl );
    
    branch(this, schemeCount, BVAR_SIZE_MIN, BVAL_MIN);
  }

  /**
   * Copy constructor.
 * @param share
 * @param scheme
 */
public AssociationScheme(Boolean share, AssociationScheme scheme) {
    super(share, scheme);
    v = scheme.v;
    n1= (v-1)/2;
    n2 = (v-1)/2;
    lambda1 = 1;
    lambda2 = 2;
    schemeCount = new VarArray<IntVar>(this, share, scheme.schemeCount);
  }

  /**
 *
 * @see org.gecode.Space#toString()
 */
public String toString() {
    
    return schemeCount.toString();
  }

  /**
   * Application startup
 * @param args
 */
public static void main(String[] args) {
    Options opt = new Options();
    opt.size = 5;
    opt.gui = true;
    opt.parse(args);
    opt.name = "" + opt.size + "-Schemes";

    AssociationScheme schemes = new AssociationScheme(opt);
    opt.doSearch(schemes);
  }
}
--------- end code   -----------

--------------------
George Rudolph
Assistant Professor
Thompson Hall 225
Math & Computer Science Dept.
The Citadel
171 Moultrie St.
Charleston, SC 29409



From zayenz at gmail.com  Thu Sep 20 17:50:46 2007
From: zayenz at gmail.com (Mikael Zayenz Lagerkvist)
Date: Thu, 20 Sep 2007 17:50:46 +0200
Subject: [gecode-users] Help with count method in script
In-Reply-To: <99CC4F739DCD4244957775EF32358A9D013EDF97@EVS01.nation.citadel.edu>
References: <46F14D20.40602@logis.cz>
	<99CC4F739DCD4244957775EF32358A9D013EDF97@EVS01.nation.citadel.edu>
Message-ID: <63b5c8b00709200850v1433e18as881963f467812e7a@mail.gmail.com>

On 9/20/07, George Rudolph <george.rudolph at citadel.edu> wrote:
> I would like help with the following Gecode/J script.
> As indicated below, when I uncomment the calls to count
> and run the script, it fails--but I am expecting two results.
> What am I doing incorrectly?
> (Note: For those it may interest, I am using Gecode/J with Eclipse.)
>
> --------- begin code -----------
>     /** need help with these -- when I uncomment these constraints
>      * and run, I get a failed space, but I am expecting two results:
>      * [1,2,2,1] and [2,1,1,2]
>      * What have I done incorrectly?
>      */
>     //n1 slots have the value lambda1, n2 slots have the value lambda2
>     // what I want to say is "exactly n1 elements have the value lambda1
> in q"
>     // for example.
>     //count(this, q, n1, IRT_EQ, lambda1, opt.icl );
>     //count(this, q, n2, IRT_EQ, lambda2, opt.icl );
> --------- end code   -----------


The first constraint says that lambda1 of the variables in q should
equal n1, and similarly for the second. See more in the documentation
for count:
http://www.gecode.org/gecodej/doc/group__TaskIntIntCard.html


Cheers,
Mikael

-- 
Mikael Zayenz Lagerkvist, http://www.ict.kth.se/~zayenz/



From george.rudolph at citadel.edu  Thu Sep 20 19:20:02 2007
From: george.rudolph at citadel.edu (George Rudolph)
Date: Thu, 20 Sep 2007 13:20:02 -0400
Subject: [gecode-users] Help with count method in script
In-Reply-To: <63b5c8b00709200850v1433e18as881963f467812e7a@mail.gmail.com>
Message-ID: <99CC4F739DCD4244957775EF32358A9D013EE156@EVS01.nation.citadel.edu>

Thanks Mikael!
I thought I had the parameters in the correct order,
but obviously I did not.
I made the change, and it works as expected.
BTW, in the commented code, the reference to "q" should be "schemeCount"
as well.  :)


--------------------
George Rudolph
Assistant Professor
Thompson Hall 225
Math & Computer Science Dept.
The Citadel
171 Moultrie St.
Charleston, SC 29409

> -----Original Message-----
> From: Mikael Zayenz Lagerkvist [mailto:zayenz at gmail.com]
> Sent: Thursday, September 20, 2007 11:51 AM
> To: George Rudolph
> Cc: users at gecode.org
> Subject: Re: [gecode-users] Help with count method in script
> 
> On 9/20/07, George Rudolph <george.rudolph at citadel.edu> wrote:
> > I would like help with the following Gecode/J script.
> > As indicated below, when I uncomment the calls to count
> > and run the script, it fails--but I am expecting two results.
> > What am I doing incorrectly?
> > (Note: For those it may interest, I am using Gecode/J with Eclipse.)
> >
> > --------- begin code -----------
> >     /** need help with these -- when I uncomment these constraints
> >      * and run, I get a failed space, but I am expecting two
results:
> >      * [1,2,2,1] and [2,1,1,2]
> >      * What have I done incorrectly?
> >      */
> >     //n1 slots have the value lambda1, n2 slots have the value
lambda2
> >     // what I want to say is "exactly n1 elements have the value
lambda1
> > in q"
> >     // for example.
> >     //count(this, q, n1, IRT_EQ, lambda1, opt.icl );
> >     //count(this, q, n2, IRT_EQ, lambda2, opt.icl );
> > --------- end code   -----------
> 
> 
> The first constraint says that lambda1 of the variables in q should
> equal n1, and similarly for the second. See more in the documentation
> for count:
> http://www.gecode.org/gecodej/doc/group__TaskIntIntCard.html
> 
> 
> Cheers,
> Mikael
> 
> --
> Mikael Zayenz Lagerkvist, http://www.ict.kth.se/~zayenz/



From filip.konvicka at logis.cz  Thu Sep 20 21:24:37 2007
From: filip.konvicka at logis.cz (=?ISO-8859-2?Q?Filip_Konvi=E8ka?=)
Date: Thu, 20 Sep 2007 21:24:37 +0200
Subject: [gecode-users] pdb files
Message-ID: <46F2C8F5.9060204@logis.cz>

Hi,

today I encountered a problem which I have not solved yet, and I'm not 
sure if the problem is in Gecode or in my code. In disassembly code, I 
saw what seemed as a quite tight infinite loop somewhere in 
GecodeKernel.dll. What I would like is to get a pdb file so that the 
Visual C++ debugger correctly sees the call stack. Is there a 
recommended way of obtaining the pdb files? I think that it's necessary 
to pass "/DEBUG /PDB:"GecodeKernel.pdb" to link.exe for the release 
build. (This IMHO does not change the dll files themselves, it just 
creates appropriate pdbs and thus enables debugging.)

Thanks,
Filip




From tack at ps.uni-sb.de  Fri Sep 21 07:55:33 2007
From: tack at ps.uni-sb.de (Guido Tack)
Date: Fri, 21 Sep 2007 07:55:33 +0200
Subject: [gecode-users] pdb files
In-Reply-To: <46F2C8F5.9060204@logis.cz>
References: <46F2C8F5.9060204@logis.cz>
Message-ID: <DDE30D0C-1FE3-44B6-8851-A6CEA3D94876@ps.uni-sb.de>

Filip Konvi?ka wrote:
>  Is there a
> recommended way of obtaining the pdb files? I think that it's  
> necessary
> to pass "/DEBUG /PDB:"GecodeKernel.pdb" to link.exe for the release
> build. (This IMHO does not change the dll files themselves, it just
> creates appropriate pdbs and thus enables debugging.)

You can configure Gecode using

./configure --enable-debug CC=cl CXX=cl

(and any other options you want).  Then build it (as detailed in the  
documentation).  This will create the pdb files.

Cheers,
	Guido



From filip.konvicka at logis.cz  Fri Sep 21 15:24:00 2007
From: filip.konvicka at logis.cz (=?UTF-8?B?RmlsaXAgS29udmnEjWth?=)
Date: Fri, 21 Sep 2007 15:24:00 +0200
Subject: [gecode-users] pdb files
In-Reply-To: <DDE30D0C-1FE3-44B6-8851-A6CEA3D94876@ps.uni-sb.de>
References: <46F2C8F5.9060204@logis.cz>
	<DDE30D0C-1FE3-44B6-8851-A6CEA3D94876@ps.uni-sb.de>
Message-ID: <46F3C5F0.9030500@logis.cz>

Guido Tack (21.9.2007 7:55):
> Filip Konvi?ka wrote:
>>  Is there a
>> recommended way of obtaining the pdb files? I think that it's necessary
>> to pass "/DEBUG /PDB:"GecodeKernel.pdb" to link.exe for the release
>> build. (This IMHO does not change the dll files themselves, it just
>> creates appropriate pdbs and thus enables debugging.)
>
> You can configure Gecode using
>
> ./configure --enable-debug CC=cl CXX=cl
>
> (and any other options you want).  Then build it (as detailed in the 
> documentation).  This will create the pdb files.

Hm, not exactly what I want. To give you the whole funny story, I'll 
start at the beginning :-) First, I installed cygwin, then added the 
things that configure complained about. I'm using MSVC 8, so I executed 
the following:

export PATH=/cygdrive/c/Program\ Files/Microsoft\ Visual\ Studio\ 
8/Common7/IDE:/cygdrive/c/Program\ Files/Microsoft\ Visual\ Studio\ 
8/VC/BIN:/cygdrive/c/Program\ Files/Microsoft\ Visual\ Studio\ 
8/Common7/Tools:/cygdrive/c/Program\ Files/Microsoft\ Visual\ Studio\ 
8/Common7/Tools/bin:/cygdrive/c/Program\ Files/Microsoft\ Visual\ 
Studio\ 8/VC/PlatformSDK/bin:/cygdrive/c/Program\ Files/Microsoft\ 
Visual\ Studio\ 8/SDK/v2.0/bin:/cygdrive/c/Program\ Files/Microsoft\ 
Visual\ Studio\ 8/VC/VCPackages:$PATH
export INCLUDE='C:\Program Files\Microsoft Visual Studio 
8\VC\ATLMFC\INCLUDE;C:\Program Files\Microsoft Visual Studio 
8\VC\INCLUDE;C:\Program Files\Microsoft Visual Studio 
8\VC\PlatformSDK\include;C:\Program Files\Microsoft Visual Studio 
8\SDK\v2.0\include'
export LIB='C:\Program Files\Microsoft Visual Studio 
8\VC\ATLMFC\LIB;C:\Program Files\Microsoft Visual Studio 
8\VC\LIB;C:\Program Files\Microsoft Visual Studio 
8\VC\PlatformSDK\lib;C:\Program Files\Microsoft Visual Studio 
8\SDK\v2.0\lib'
export LIBPATH=

which is probably worth mentioning in the docs, as everybody probably 
needs this and it is tiresome to reinvent (all of this comes from 
vcvars32.bat somewhere in VC8 dirs). Anyway, configure went fine, so I 
ran "make". I think I had to install "diff" and "make", which configure 
did not check, and then make started complaining about missing perl. So 
I installed that, but this time things got a bit worse, since compile 
failed in gecode/int/int-set.cc (I think), complaining that (at 
gecode\int\var.icc line 40) "IntVarImpBase" was not a base class. I 
found out, after a while, that the defining include file 
"gecode\int\var\imp-hdr.icc" was empty, probably cause of the previous 
perl absence (which created it, zero-size, and failed, so subsequent 
make attempts did not bother to re-create the file). The problem is that 
the generated icc files are not deleted by "make veryclean".

OK, then I finally succeeded compiling everything with "configure CC=cl 
CXX=cl", so I tried --enable-debug, which does not work:

cl -nologo -EHsc -Zi -LDd MDd gecode/kernel/exception.obj 
gecode/kernel/core.obj gecode/kernel/memory-manager.obj \
                -FeGecodeKernel.dll
cl : Command line warning D9024 : unrecognized source file type 'MDd', 
object file assumed
LINK : fatal error LNK1181: cannot open input file 'MDd.obj'

Clearly, it tries to pass "MDd" instead of "/MDd" to cl.exe. Never mind, 
this is not what I want anyway, as it uses "-Zi -LDd" instead of "-Ox". 
In other words, I wanted to generate release-mode dlls and the 
corresponding pdb files (so that I have full-performance gecode with 
external symbols that enable call-stack decryption).

After some research, I found out that the easiest way is to invoke

export LINK="/DEBUG /OPT:REF /OPT:ICF"

before running make. The generated dlls are essentially same as the 
distributed ones (only some header bits are changed to indicate that 
symbols exist somewhere, AFAICT), and I have a set of pdb files so that 
I can see the call stack while debugging my actors. If it's not too 
complicated, I suggest that you build and distribute the pdb files in an 
installer package - maybe as an optional download, it's a 1,4 MB 7-zip 
(one floppy, rememer? :-)). It makes debugging in MSVC much easier.

Cheers,
Filip




From cschulte at kth.se  Fri Sep 21 16:19:46 2007
From: cschulte at kth.se (Christian Schulte)
Date: Fri, 21 Sep 2007 16:19:46 +0200
Subject: [gecode-users] pdb files
In-Reply-To: <46F3C5F0.9030500@logis.cz>
Message-ID: <002301c7fc5a$76906820$acd4ed82@beule>

Interesting,

as I am myself developing Gecode on Windows with cygwin and MSVC (same
version) I can reassure you that enable-debug does work. Also, you just add
the variables once to your .bashrc file. Or, if you are really lazy: start
bash and run vcvars.bat in it. That's it.

As it comes to shipping the pdb files, I think that's a good idea. Will do
for Gecode 2.0.0.

BTW: We intend to release 31. October 2007. The system is ready apart from
minor cleanups and major platform fiddling (on different platform we have
different issues). If you are curious, you can already get it from svn.

Christian

--
Christian Schulte, http://www.imit.kth.se/~schulte/ 

-----Original Message-----
From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf
Of Filip Konvicka
Sent: Friday, September 21, 2007 3:24 PM
To: Guido Tack
Cc: users at gecode.org
Subject: Re: [gecode-users] pdb files


Guido Tack (21.9.2007 7:55):
> Filip Konvi?ka wrote:
>>  Is there a
>> recommended way of obtaining the pdb files? I think that it's 
>> necessary to pass "/DEBUG /PDB:"GecodeKernel.pdb" to link.exe for the 
>> release build. (This IMHO does not change the dll files themselves, 
>> it just creates appropriate pdbs and thus enables debugging.)
>
> You can configure Gecode using
>
> ./configure --enable-debug CC=cl CXX=cl
>
> (and any other options you want).  Then build it (as detailed in the
> documentation).  This will create the pdb files.

Hm, not exactly what I want. To give you the whole funny story, I'll 
start at the beginning :-) First, I installed cygwin, then added the 
things that configure complained about. I'm using MSVC 8, so I executed 
the following:

export PATH=/cygdrive/c/Program\ Files/Microsoft\ Visual\ Studio\ 
8/Common7/IDE:/cygdrive/c/Program\ Files/Microsoft\ Visual\ Studio\ 
8/VC/BIN:/cygdrive/c/Program\ Files/Microsoft\ Visual\ Studio\ 
8/Common7/Tools:/cygdrive/c/Program\ Files/Microsoft\ Visual\ Studio\ 
8/Common7/Tools/bin:/cygdrive/c/Program\ Files/Microsoft\ Visual\ 
Studio\ 8/VC/PlatformSDK/bin:/cygdrive/c/Program\ Files/Microsoft\ 
Visual\ Studio\ 8/SDK/v2.0/bin:/cygdrive/c/Program\ Files/Microsoft\ 
Visual\ Studio\ 8/VC/VCPackages:$PATH
export INCLUDE='C:\Program Files\Microsoft Visual Studio 
8\VC\ATLMFC\INCLUDE;C:\Program Files\Microsoft Visual Studio 
8\VC\INCLUDE;C:\Program Files\Microsoft Visual Studio 
8\VC\PlatformSDK\include;C:\Program Files\Microsoft Visual Studio 
8\SDK\v2.0\include'
export LIB='C:\Program Files\Microsoft Visual Studio 
8\VC\ATLMFC\LIB;C:\Program Files\Microsoft Visual Studio 
8\VC\LIB;C:\Program Files\Microsoft Visual Studio 
8\VC\PlatformSDK\lib;C:\Program Files\Microsoft Visual Studio 
8\SDK\v2.0\lib'
export LIBPATH=

which is probably worth mentioning in the docs, as everybody probably 
needs this and it is tiresome to reinvent (all of this comes from 
vcvars32.bat somewhere in VC8 dirs). Anyway, configure went fine, so I 
ran "make". I think I had to install "diff" and "make", which configure 
did not check, and then make started complaining about missing perl. So 
I installed that, but this time things got a bit worse, since compile 
failed in gecode/int/int-set.cc (I think), complaining that (at 
gecode\int\var.icc line 40) "IntVarImpBase" was not a base class. I 
found out, after a while, that the defining include file 
"gecode\int\var\imp-hdr.icc" was empty, probably cause of the previous 
perl absence (which created it, zero-size, and failed, so subsequent 
make attempts did not bother to re-create the file). The problem is that 
the generated icc files are not deleted by "make veryclean".

OK, then I finally succeeded compiling everything with "configure CC=cl 
CXX=cl", so I tried --enable-debug, which does not work:

cl -nologo -EHsc -Zi -LDd MDd gecode/kernel/exception.obj 
gecode/kernel/core.obj gecode/kernel/memory-manager.obj \
                -FeGecodeKernel.dll
cl : Command line warning D9024 : unrecognized source file type 'MDd', 
object file assumed
LINK : fatal error LNK1181: cannot open input file 'MDd.obj'

Clearly, it tries to pass "MDd" instead of "/MDd" to cl.exe. Never mind, 
this is not what I want anyway, as it uses "-Zi -LDd" instead of "-Ox". 
In other words, I wanted to generate release-mode dlls and the 
corresponding pdb files (so that I have full-performance gecode with 
external symbols that enable call-stack decryption).

After some research, I found out that the easiest way is to invoke

export LINK="/DEBUG /OPT:REF /OPT:ICF"

before running make. The generated dlls are essentially same as the 
distributed ones (only some header bits are changed to indicate that 
symbols exist somewhere, AFAICT), and I have a set of pdb files so that 
I can see the call stack while debugging my actors. If it's not too 
complicated, I suggest that you build and distribute the pdb files in an 
installer package - maybe as an optional download, it's a 1,4 MB 7-zip 
(one floppy, rememer? :-)). It makes debugging in MSVC much easier.

Cheers,
Filip


_______________________________________________
Gecode users mailing list
users at gecode.org https://www.gecode.org/mailman/listinfo/gecode-users




From filip.konvicka at logis.cz  Fri Sep 21 22:04:33 2007
From: filip.konvicka at logis.cz (=?ISO-8859-2?Q?Filip_Konvi=E8ka?=)
Date: Fri, 21 Sep 2007 22:04:33 +0200
Subject: [gecode-users] pdb files
In-Reply-To: <002301c7fc5a$76906820$acd4ed82@beule>
References: <002301c7fc5a$76906820$acd4ed82@beule>
Message-ID: <46F423D1.2090203@logis.cz>


> as I am myself developing Gecode on Windows with cygwin and MSVC (same
> version) I can reassure you that enable-debug does work. Also, you just add
> the variables once to your .bashrc file. Or, if you are really lazy: start
> bash and run vcvars.bat in it. That's it.
>   

I'm using VC++ 2005 Standard SP1 and I downloaded a fresh install of
cygwin (the default set + perl, diff and make). As for calling
vcvars.bat directly, I did not try this as my first attempt somehow failed.

I tried again at my home PC, and it did the same thing. VC++ 2005 Pro,
fresh cygwin (default + perl, diff and make), I did just

export PATH="C:\Program Files\Microsoft Visual Studio
8\Common7\IDE:C:\Program Files\Microsoft Visual Studio
8\VC\BIN:C:\Program Files\Microsoft Visual Studio
8\Common7\Tools:C:\Program Files\Microsoft Visual Studio
8\Common7\Tools\bin:C:\Program Files\Microsoft Visual Studio
8\VC\PlatformSDK\bin:C:\Program Files\Microsoft Visual Studio
8\SDK\v2.0\bin:C:\WINNT\Microsoft.NET\Framework\v2.0.50727:C:\Program
Files\Microsoft Visual Studio 8\VC\VCPackages:$PATH"
export INCLUDE='C:\Program Files\Microsoft Visual Studio
8\VC\INCLUDE;C:\Program Files\Microsoft Visual Studio
8\VC\PlatformSDK\include'
export LIB='C:\Program Files\Microsoft Visual Studio
8\VC\ATLMFC\LIB;C:\Program Files\Microsoft Visual Studio
8\VC\LIB;C:\Program Files\Microsoft Visual Studio
8\VC\PlatformSDK\lib;C:\Program Files\Microsoft Visual Studio
8\SDK\v2.0\lib'

./configure CC=cl CXX=cl --enable-debug
make

cl -nologo -EHsc -Zi -LDd MDd gecode/kernel/exception.obj
gecode/kernel/core.obj gecode/kernel/memory-manager.obj \
                -FeGecodeKernel.dll
cl : Command line warning D9024 : unrecognized source file type 'MDd',
object file assumed
LINK : fatal error LNK1181: cannot open input file 'MDd.obj'
make[1]: *** [GecodeKernel.dll] Error 2
make[1]: Leaving directory `/tmp/gecode'
make: *** [compilelib] Error 2

So does it use "/MDd" on your box? With gecode/tags/release-1.3.1? I
found the following in configure:


microsoft)
    cat >>confdefs.h <<\_ACEOF
#define forceinline __forceinline
_ACEOF

  CXXFLAGS="${CXXFLAGS}${CXXFLAGS:+ }-nologo"
  CXXFLAGS="${CXXFLAGS}${CXXFLAGS:+ }-EHsc"
  cat >>confdefs.h <<\_ACEOF
#define GECODE_MEMORY_ALIGNMENT 4
_ACEOF


  if test "${enable_debug:-no}" = "no"; then
        CXXFLAGS="${CXXFLAGS}${CXXFLAGS:+ }-Ox -fp:fast"

        DLLFLAGS="${DLLFLAGS}${DLLFLAGS:+ }${CXXFLAGS} -LD -MD"
  else
        CXXFLAGS="${CXXFLAGS}${CXXFLAGS:+ }-Zi"

        DLLFLAGS="${DLLFLAGS}${DLLFLAGS:+ }${CXXFLAGS} -LDd MDd"
  fi


This is in the svn, so I guess that it must use "MDd" everywhere instead
of "/MDd".
> As it comes to shipping the pdb files, I think that's a good idea. Will do
> for Gecode 2.0.0.
>   

Thanks. I think I've already seen several libraries (even programs)
shipped with pdb files.
> BTW: We intend to release 31. October 2007. The system is ready apart from
> minor cleanups and major platform fiddling (on different platform we have
> different issues). If you are curious, you can already get it from svn.
>   

That's perfect - of course I am curious! Good luck with platform testing.

Cheers,
Filip





From raffaele.cipriano at dimi.uniud.it  Fri Sep 28 09:54:24 2007
From: raffaele.cipriano at dimi.uniud.it (Raffaele Cipriano)
Date: Fri, 28 Sep 2007 09:54:24 +0200
Subject: [gecode-users] Flatzinc/Gecode
Message-ID: <46FCB330.50405@dimi.uniud.it>

Dear Gecode developers and users,
I'm trying to install the Flatzinc package on my Cygwin environment, 
where Gecode 1.3.1, flex 2.5.4 and bison 2.3 are correctly installed 
(and PKG_CONFIG_PATH is properly set).
Invoking "make" I get this error:

flex -oflatzinc.yy.c flatzinc.lxx
"flatzinc.lxx", line 23: unrecognized %option: reentrant
"flatzinc.lxx", line 24: unrecognized %option: bison-bridge
make: ***[flatzinc.yy.c] Error 1

I tried to comment line 23 and 24 from the flatzinc.lxx file, but I get 
a lots of other error messages.

What can I do? The current version of Flatzinc can be installed under 
Cygwin?

Thank you

Raffaele Cipriano





From tack at ps.uni-sb.de  Fri Sep 28 13:05:12 2007
From: tack at ps.uni-sb.de (Guido Tack)
Date: Fri, 28 Sep 2007 13:05:12 +0200 (CEST)
Subject: [gecode-users] Flatzinc/Gecode
In-Reply-To: <46FCB330.50405@dimi.uniud.it>
References: <46FCB330.50405@dimi.uniud.it>
Message-ID: <49895.72.255.8.217.1190977512.squirrel@www.ps.uni-sb.de>

Hi.

> I'm trying to install the Flatzinc package on my Cygwin environment,
> where Gecode 1.3.1, flex 2.5.4 and bison 2.3 are correctly installed
> (and PKG_CONFIG_PATH is properly set).
> Invoking "make" I get this error:
>
> flex -oflatzinc.yy.c flatzinc.lxx
> "flatzinc.lxx", line 23: unrecognized %option: reentrant
> "flatzinc.lxx", line 24: unrecognized %option: bison-bridge
> make: ***[flatzinc.yy.c] Error 1

As noted on the Gecode/FlatZinc pages, you will need at least version
2.5.33 of flex.  We haven't tried to compile the FlatZinc interface on
Windows yet, so this may or may not work.  The current plan is to release
a full version of the FlatZinc interface together with the next version of
Gecode, and that version will then be fully tested under Windows (and
remove the dependency on flex/bison by providing pre-generated files).

Cheers,
   Guido

-- 
Guido Tack
http://www.ps.uni-sb.de/~tack





From debdeep.banerjee at rsise.anu.edu.au  Fri Sep 28 12:53:24 2007
From: debdeep.banerjee at rsise.anu.edu.au (Debdeep Banerjee)
Date: Fri, 28 Sep 2007 20:53:24 +1000
Subject: [gecode-users] How to Order different propagator
Message-ID: <46FCDD24.8070607@rsise.anu.edu.au>

hi,
  I have three different propagator ( all are implemented by me, not the 
standard ones ) and I want to call them in a certain order. How can I 
achieve the ordering ?

With regards
Debdeep



From debdeep.banerjee at rsise.anu.edu.au  Sun Sep 30 10:58:41 2007
From: debdeep.banerjee at rsise.anu.edu.au (Debdeep Banerjee)
Date: Sun, 30 Sep 2007 18:58:41 +1000
Subject: [gecode-users] Meaning of exception
Message-ID: <46FF6541.8090104@rsise.anu.edu.au>

hi,
 I am getting the following exception

terminate called after throwing an instance of 'Gecode::SpaceFailed'
  what():  Space::clone: Attempt to invoke operation on failed space
Aborted


What is the meaning of this error? Where it could occur ?  ( for example 
in search, or propagators or in Branching ? )

With regards
Debdeep



