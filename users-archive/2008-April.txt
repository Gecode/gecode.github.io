From malcolmr at cse.unsw.edu.au  Tue Apr  1 02:26:37 2008
From: malcolmr at cse.unsw.edu.au (Malcolm Ryan)
Date: Tue, 1 Apr 2008 11:26:37 +1100
Subject: [gecode-users] Controlling memory use
In-Reply-To: <C4167847.B27%cschulte@kth.se>
References: <C4167847.B27%cschulte@kth.se>
Message-ID: <278F180D-2403-4101-916F-01020A4BB68A@cse.unsw.edu.au>

On 31/03/2008, at 8:15 PM, Christian Schulte wrote:
> What contributes to memory consumption are:
> ...



Is there any way to simply ask Gecode how large a space is?

Malcolm



From zayenz at gmail.com  Tue Apr  1 08:00:07 2008
From: zayenz at gmail.com (Mikael Zayenz Lagerkvist)
Date: Tue, 1 Apr 2008 08:00:07 +0200
Subject: [gecode-users] Controlling memory use
In-Reply-To: <278F180D-2403-4101-916F-01020A4BB68A@cse.unsw.edu.au>
References: <C4167847.B27%cschulte@kth.se>
	<278F180D-2403-4101-916F-01020A4BB68A@cse.unsw.edu.au>
Message-ID: <63b5c8b00803312300s7abf7633scc9a7d177d23db89@mail.gmail.com>

On Tue, Apr 1, 2008 at 2:26 AM, Malcolm Ryan <malcolmr at cse.unsw.edu.au> wrote:
> On 31/03/2008, at 8:15 PM, Christian Schulte wrote:
>  > What contributes to memory consumption are:
>  > ...
>
>  Is there any way to simply ask Gecode how large a space is?

The reported memory consumption is accurate for Gecode (i.e., for the
C++ side). To get the size of a Gecode::Space, there is a member
function called allocated, that returns the amount of heap memory the
Space has allocated.

For Gecode/J the situation is not as simple. A org.gecode.Space object
is created for all the instances of the underlying C++ Gecode::Space
created when searching, and these instances will contain references to
other Java objects such as variables. AFAIK there is no accurate,
portable way of obtaining the size of a Java object for client code,
let alone for the connected graph of references that a Java object is
the root of. The most common technique seems to be creating a lot of
instances of something, and measuring total memory use before and
after. Thus, the overhead of using Gecode/J memory-wise is very hard
to compute exactly - even OS tools like top or the Task Manager are
not good enough due to the way a JVM manages memory.

To know anything more about why your particular problem runs out of
memory, you need to look at Christian's suggestions and questions. If
it turns out that available memory is a bottleneck for your
application, I would strongly suggest that you switch to plain Gecode.

Cheers,
Mikael

-- 
Mikael Zayenz Lagerkvist, http://www.ict.kth.se/~zayenz/



From sbrand at csse.unimelb.edu.au  Tue Apr  1 09:16:30 2008
From: sbrand at csse.unimelb.edu.au (Sebastian Brand)
Date: Tue, 1 Apr 2008 18:16:30 +1100
Subject: [gecode-users] CP 2008: Abstract deadline extension
Message-ID: <20080401071630.GC25289@mulga.csse.unimelb.edu.au>

_____________________ Abstract deadline extension _____________________

                              CP 2008

                    14th International Conference
                                 on
          Principles and Practice of Constraint Programming

      14-18 September 2008                  Sydney,  Australia

                http://www.csse.unimelb.edu.au/cp2008/


  The paper abstract submission deadline has been slightly extended
  to better accommodate authors of AAAI papers still awaiting results:


    Paper abstracts due:    3 April, 11 pm, Eastern Samoan Time
                           (4 April, 10 am, GMT)


  (The deadline for papers remains unchanged: 7 April)
_____________________________________________________________________



From Vincent.Barichard at univ-angers.fr  Wed Apr  2 16:08:00 2008
From: Vincent.Barichard at univ-angers.fr (Vincent Barichard)
Date: Wed, 2 Apr 2008 16:08:00 +0200
Subject: [gecode-users] Extending Integer Variable
Message-ID: <200804021608.00188.Vincent.Barichard@univ-angers.fr>

Hi,

I am trying to extend IntVar in order to use it in my self(-made algorithms.
I would like to use an unaltered Gecode, but I need to add an "int" member in 
the IntVar implementation. I don't want to make my own Integer Variable class 
because I also need to use the algorithms designed in Gecode.
Is there a clean way to extend this class (by inheritance maybe ....) and add 
a member without altering Gecode ?

Thank you for your assistance.
Best regards,

Vincent
-- 
Vincent Barichard ? ? ? ?Universit? d'Angers (LERIA)
Tel: 02 41 73 52 06 ? ? ?D?partement Informatique
Fax: 02 41 73 50 73 ? ? ?H203



From cschulte at kth.se  Thu Apr  3 10:14:25 2008
From: cschulte at kth.se (Christian Schulte)
Date: Thu, 3 Apr 2008 10:14:25 +0200
Subject: [gecode-users] Extending Integer Variable
In-Reply-To: <200804021608.00188.Vincent.Barichard@univ-angers.fr>
References: <200804021608.00188.Vincent.Barichard@univ-angers.fr>
Message-ID: <000601c89562$bbc124b0$33436e10$@se>

Dear Vincent,

let me first elaborate a little bit how Gecode's variables and propagators
are structured before I actually attempt to give an answer.

Gecode has three important concepts regarding variables:
 - variables: they are used for modeling, and the only operations they
provide are good for modeling. In particular,
   variables to not provide operations to update their domain. Examples are
IntVar, BoolVar, etc. Variables are
   hence provide nothing but an interface to variable implementations
(actually, variables are implemented as
   a pointer to variable implementations).
 - variable implementations: they are the real objects storing the domain
and which propagators and advisors must be
   executed when the domain changes. They themselves are constructed in two
steps: a domain independent stub that is 
   automatically generated from a simple description (just a few lines). The
stub is concerned with events, how
   propagators can be subscribed to, and linking the variable
implementations to the Gecode kernel etc. The real 
   variable implementation then inherits from the generated stub and adds
the variable domain and so on.
 - views: like variables they are nothing but an interface for variable
implementations. However, views are used
   by propagators and branching and provide operations to update variable
domains, subscribe propagators to changes,
   and so on. More importantly, for the same variable implementation several
views exist: a MinusView for a variable
   implementation x, for example, provides an interface that behaves as if
the operations on the MinusView are executed
   on -x rather than x. Examples are IntView, BoolView, MinusView,
OffsetView, ... For more on views there is paper
   on the Gecode webpage.

Propagators themselves have two parts: a post function and the actual
propagator. A post function (such as rel, distinct, linear, etc.) is used
for modeling and hence takes variables as arguments. It then chooses the
right propagator and the right views (converting variables to views by
passing the underlying reference to the variable implementation).

Propagators are typically parametric (as templates in C++) with respect to
the view they are using: for example, the Max propagator is instantiated for
the max posting function with an IntView whereas it is also instantiated
with a MinusView for the min posting function.

Sorry for the long blurb, let's move to the answer: as Gecode is designed,
you can reuse propagators provided that you implement: a variable
implementation by yourself (that's what you want to do), variables for them
(so that you can model), and views for them (so that you can reuse the
propagators), post functions (because they talk about your variables).

This is a lot of effort! If you want to make something that is used (rather
than an experiment), then one could also make views and variables parametric
wrt the variable implementation used. That is easy but requires intimate
Gecode knowledge. Then, in principal, one could also make the post functions
parametric but this is almost impossible in reality as they should provide
simple static linkage as they constitute the basic interface to Gecode.

So it really depends on what you want to do. For an experiment, hack the
variable implementation. For something, first do the experiment ;-)

What do you want to do? Do you think it me be generally useful to be
included in Gecode anyway?

All the best
Christian

--
Christian Schulte, www.ict.kth.se/~cschulte/


-----Original Message-----
From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf
Of Vincent Barichard
Sent: Wednesday, April 02, 2008 4:08 PM
To: gecode list
Subject: [gecode-users] Extending Integer Variable

Hi,

I am trying to extend IntVar in order to use it in my self(-made algorithms.
I would like to use an unaltered Gecode, but I need to add an "int" member
in 
the IntVar implementation. I don't want to make my own Integer Variable
class 
because I also need to use the algorithms designed in Gecode.
Is there a clean way to extend this class (by inheritance maybe ....) and
add 
a member without altering Gecode ?

Thank you for your assistance.
Best regards,

Vincent
-- 
Vincent Barichard ? ? ? ?Universit? d'Angers (LERIA)
Tel: 02 41 73 52 06 ? ? ?D?partement Informatique
Fax: 02 41 73 50 73 ? ? ?H203

_______________________________________________
Gecode users mailing list
users at gecode.org
https://www.gecode.org/mailman/listinfo/gecode-users




From davidrijsman at gmail.com  Thu Apr  3 12:50:28 2008
From: davidrijsman at gmail.com (David Rijsman)
Date: Thu, 3 Apr 2008 12:50:28 +0200
Subject: [gecode-users] Branch specification of ValSplitMin incorrect?
Message-ID: <823281170804030350y25694373t109bb2a74e73a202@mail.gmail.com>

I am using the reflection functionality and I think the specification
of the branch for integer value selection for splitting domain lower
half first seems to be incorrect (void
ValSplitMin<View>::branchingSpec). The first alternative is specified
as "=" and the second alternative as ">". I think it should be "<" and
">="? The value and variable specification seem to be ok.

David Rijsman



From stanio at cs.tu-berlin.de  Thu Apr  3 12:54:22 2008
From: stanio at cs.tu-berlin.de (stanio at cs.tu-berlin.de)
Date: Thu, 3 Apr 2008 12:54:22 +0200
Subject: [gecode-users] FAQ/Documentation
In-Reply-To: <000601c89562$bbc124b0$33436e10$@se>
References: <mailman.3.1207216802.3125.gecode-users@gecode.org>
Message-ID: <20080403105422.GA15361@fiesta.cs.tu-berlin.de>

> let me first elaborate a little bit how Gecode's variables and propagators
> are structured before I actually attempt to give an answer.
> 
> Gecode has three important concepts regarding variables:
>  - variables: they are used for modeling, and the only operations they
> provide are good for modeling. In particular,
>    variables to not provide operations to update their domain. Examples are
> IntVar, BoolVar, etc. Variables are
>    hence provide nothing but an interface to variable implementations
> (actually, variables are implemented as
>    a pointer to variable implementations).
>  - variable implementations: they are the real objects storing the domain
> and which propagators and advisors must be
>    executed when the domain changes. They themselves are constructed in two
> steps: a domain independent stub that is 
>    automatically generated from a simple description (just a few lines). The
> stub is concerned with events, how
>    propagators can be subscribed to, and linking the variable
> implementations to the Gecode kernel etc. The real 
>    variable implementation then inherits from the generated stub and adds
> the variable domain and so on.
>  - views: like variables they are nothing but an interface for variable
> implementations. However, views are used
>    by propagators and branching and provide operations to update variable
> domains, subscribe propagators to changes,
>    and so on. More importantly, for the same variable implementation several
> views exist: a MinusView for a variable
>    implementation x, for example, provides an interface that behaves as if
> the operations on the MinusView are executed
>    on -x rather than x. Examples are IntView, BoolView, MinusView,
> OffsetView, ... For more on views there is paper
>    on the Gecode webpage.
> 
> Propagators themselves have two parts: a post function and the actual
> propagator. A post function (such as rel, distinct, linear, etc.) is used
> for modeling and hence takes variables as arguments. It then chooses the
> right propagator and the right views (converting variables to views by
> passing the underlying reference to the variable implementation).
> 
> Propagators are typically parametric (as templates in C++) with respect to
> the view they are using: for example, the Max propagator is instantiated for
> the max posting function with an IntView whereas it is also instantiated
> with a MinusView for the min posting function.

> Sorry for the long blurb,
> [...]

I find such _blurb_ very useful, even only as a user. When
one knows more about the design of the system, this can
prevent many conceptual mistakes. I don't remember to have
read these explanations on the Gecode website. You might
save a bit of your time, if you put things like that in
kind of FAQ. (Or does it exist?)

Certainly all this can be extracted from the publications
referred from gecode.org, from the doxygen docs and from the
sources, but I find the above condensed manner of
presentation very suitable for a plain text in a FAQ or
similar.

:o)
Have a nice day.

-- 
 cheers
 stanio_



From davidrijsman at gmail.com  Thu Apr  3 12:57:17 2008
From: davidrijsman at gmail.com (David Rijsman)
Date: Thu, 3 Apr 2008 12:57:17 +0200
Subject: [gecode-users] Branch specification of ValSplitMin incorrect?
In-Reply-To: <823281170804030350y25694373t109bb2a74e73a202@mail.gmail.com>
References: <823281170804030350y25694373t109bb2a74e73a202@mail.gmail.com>
Message-ID: <823281170804030357p45dc9d20ufcf5fa030a00efb9@mail.gmail.com>

Small correction, I think it should be "<=" and ">"

On Thu, Apr 3, 2008 at 12:50 PM, David Rijsman <davidrijsman at gmail.com> wrote:
> I am using the reflection functionality and I think the specification
> of the branch for integer value selection for splitting domain lower
> half first seems to be incorrect (void
> ValSplitMin<View>::branchingSpec). The first alternative is specified
> as "=" and the second alternative as ">". I think it should be "<" and
> ">="? The value and variable specification seem to be ok.
>
> David Rijsman
>



From tack at ps.uni-sb.de  Thu Apr  3 13:11:29 2008
From: tack at ps.uni-sb.de (Guido Tack)
Date: Thu, 3 Apr 2008 13:11:29 +0200
Subject: [gecode-users] Branch specification of ValSplitMin incorrect?
In-Reply-To: <823281170804030357p45dc9d20ufcf5fa030a00efb9@mail.gmail.com>
References: <823281170804030350y25694373t109bb2a74e73a202@mail.gmail.com>
	<823281170804030357p45dc9d20ufcf5fa030a00efb9@mail.gmail.com>
Message-ID: <B351E31D-D018-49D4-B3B6-C209B50B146B@ps.uni-sb.de>

David Rijsman wrote:

> Small correction, I think it should be "<=" and ">"
>
> On Thu, Apr 3, 2008 at 12:50 PM, David Rijsman  
> <davidrijsman at gmail.com> wrote:
>> I am using the reflection functionality and I think the specification
>> of the branch for integer value selection for splitting domain lower
>> half first seems to be incorrect (void
>> ValSplitMin<View>::branchingSpec). The first alternative is specified
>> as "=" and the second alternative as ">". I think it should be "<"  
>> and
>> ">="? The value and variable specification seem to be ok.

Thanks!  Yes, it should be <= and >.  I've fixed it in the svn.

Cheers,
	Guido




From cschulte at kth.se  Thu Apr  3 13:14:03 2008
From: cschulte at kth.se (Christian Schulte)
Date: Thu, 03 Apr 2008 13:14:03 +0200
Subject: [gecode-users] FAQ/Documentation
In-Reply-To: <20080403105422.GA15361@fiesta.cs.tu-berlin.de>
Message-ID: <C41A889B.BB0%cschulte@kth.se>

Stanio, not only are you right, I think you even know that you are right ;-)

We are still collecting material for some documentation. We are also
planning to write a whitepaper that is more concerned with the design ideas.

But time is really the issue.

Christian


On 4/3/08 12:54 PM, "stanio at cs.tu-berlin.de" <stanio at cs.tu-berlin.de> wrote:

>> let me first elaborate a little bit how Gecode's variables and propagators
>> are structured before I actually attempt to give an answer.
>> 
>> Gecode has three important concepts regarding variables:
>>  - variables: they are used for modeling, and the only operations they
>> provide are good for modeling. In particular,
>>    variables to not provide operations to update their domain. Examples are
>> IntVar, BoolVar, etc. Variables are
>>    hence provide nothing but an interface to variable implementations
>> (actually, variables are implemented as
>>    a pointer to variable implementations).
>>  - variable implementations: they are the real objects storing the domain
>> and which propagators and advisors must be
>>    executed when the domain changes. They themselves are constructed in two
>> steps: a domain independent stub that is
>>    automatically generated from a simple description (just a few lines). The
>> stub is concerned with events, how
>>    propagators can be subscribed to, and linking the variable
>> implementations to the Gecode kernel etc. The real
>>    variable implementation then inherits from the generated stub and adds
>> the variable domain and so on.
>>  - views: like variables they are nothing but an interface for variable
>> implementations. However, views are used
>>    by propagators and branching and provide operations to update variable
>> domains, subscribe propagators to changes,
>>    and so on. More importantly, for the same variable implementation several
>> views exist: a MinusView for a variable
>>    implementation x, for example, provides an interface that behaves as if
>> the operations on the MinusView are executed
>>    on -x rather than x. Examples are IntView, BoolView, MinusView,
>> OffsetView, ... For more on views there is paper
>>    on the Gecode webpage.
>> 
>> Propagators themselves have two parts: a post function and the actual
>> propagator. A post function (such as rel, distinct, linear, etc.) is used
>> for modeling and hence takes variables as arguments. It then chooses the
>> right propagator and the right views (converting variables to views by
>> passing the underlying reference to the variable implementation).
>> 
>> Propagators are typically parametric (as templates in C++) with respect to
>> the view they are using: for example, the Max propagator is instantiated for
>> the max posting function with an IntView whereas it is also instantiated
>> with a MinusView for the min posting function.
> 
>> Sorry for the long blurb,
>> [...]
> 
> I find such _blurb_ very useful, even only as a user. When
> one knows more about the design of the system, this can
> prevent many conceptual mistakes. I don't remember to have
> read these explanations on the Gecode website. You might
> save a bit of your time, if you put things like that in
> kind of FAQ. (Or does it exist?)
> 
> Certainly all this can be extracted from the publications
> referred from gecode.org, from the doxygen docs and from the
> sources, but I find the above condensed manner of
> presentation very suitable for a plain text in a FAQ or
> similar.
> 
> :o)
> Have a nice day.

--
Christian Schulte, web.ict.kth.se/~cschulte/








From mauriciotorob at gmail.com  Thu Apr  3 17:29:52 2008
From: mauriciotorob at gmail.com (Mauricio Toro)
Date: Thu, 3 Apr 2008 17:29:52 +0200
Subject: [gecode-users] Version of gecode
Message-ID: <a6b4b44a0804030829ja89452fv57acfb02fe01bb99@mail.gmail.com>

How can I know which version of Gecode I have installed?
Right know I am checking if the library filenames end up with 10, 9 10.0
but it is kind of messy.

Thanks

-- 
Mauricio Toro Bermudez
Estudiante de Ingenier?a de Sistemas
Pontificia Universidad Javeriana, Colombia

Stagiare ? l'Ircam
1, place Igor-Stravinsky 75004 Paris,
France de 2008 ? 2009



From tack at ps.uni-sb.de  Thu Apr  3 17:45:22 2008
From: tack at ps.uni-sb.de (Guido Tack)
Date: Thu, 3 Apr 2008 17:45:22 +0200
Subject: [gecode-users] Version of gecode
In-Reply-To: <a6b4b44a0804030829ja89452fv57acfb02fe01bb99@mail.gmail.com>
References: <a6b4b44a0804030829ja89452fv57acfb02fe01bb99@mail.gmail.com>
Message-ID: <30892076-9B63-4D20-9E0C-2F966AD1E774@ps.uni-sb.de>

Mauricio Toro wrote:

> How can I know which version of Gecode I have installed?
> Right know I am checking if the library filenames end up with 10, 9  
> 10.0
> but it is kind of messy.

You can use pkg-config.  E.g.,

pkg-config --modversion gecode

will print the version to stdout (provided that Gecode is installed  
somewhere on the PKG_CONFIG_PATH).  You can also use pkg-config to  
check that a certain version is available, e.g.

pkg-config --exact-version=2.1.1 gecode

will succeed if the version is found and fail otherwise.  See the pkg- 
config man page for more options.

Cheers,
	Guido




From mauriciotorob at gmail.com  Thu Apr  3 18:02:04 2008
From: mauriciotorob at gmail.com (Mauricio Toro)
Date: Thu, 3 Apr 2008 18:02:04 +0200
Subject: [gecode-users] Version of gecode
In-Reply-To: <30892076-9B63-4D20-9E0C-2F966AD1E774@ps.uni-sb.de>
References: <a6b4b44a0804030829ja89452fv57acfb02fe01bb99@mail.gmail.com>
	<30892076-9B63-4D20-9E0C-2F966AD1E774@ps.uni-sb.de>
Message-ID: <a6b4b44a0804030902l65b82e75r51d2f3509b66ef82@mail.gmail.com>

Is there other way without pkg-config?

pkg-config can be installed in mac os X,
but it is not installed by default. Then
it would be required to install pkg-config
before running the installer of Gecol.

Thanks

2008/4/3, Guido Tack <tack at ps.uni-sb.de>:
> Mauricio Toro wrote:
>
>
> > How can I know which version of Gecode I have installed?
> > Right know I am checking if the library filenames end up with 10, 9 10.0
> > but it is kind of messy.
> >
>
>  You can use pkg-config.  E.g.,
>
>  pkg-config --modversion gecode
>
>  will print the version to stdout (provided that Gecode is installed
> somewhere on the PKG_CONFIG_PATH).  You can also use pkg-config to check
> that a certain version is available, e.g.
>
>  pkg-config --exact-version=2.1.1 gecode
>
>  will succeed if the version is found and fail otherwise.  See the
> pkg-config man page for more options.
>
>  Cheers,
>         Guido
>
>


-- 
Mauricio Toro Bermudez
Estudiante de Ingenier?a de Sistemas
Pontificia Universidad Javeriana, Colombia

Stagiare ? l'Ircam
1, place Igor-Stravinsky 75004 Paris,
France de 2008 ? 2009



From tack at ps.uni-sb.de  Thu Apr  3 19:08:00 2008
From: tack at ps.uni-sb.de (Guido Tack)
Date: Thu, 3 Apr 2008 19:08:00 +0200
Subject: [gecode-users] Version of gecode
In-Reply-To: <a6b4b44a0804030902l65b82e75r51d2f3509b66ef82@mail.gmail.com>
References: <a6b4b44a0804030829ja89452fv57acfb02fe01bb99@mail.gmail.com>
	<30892076-9B63-4D20-9E0C-2F966AD1E774@ps.uni-sb.de>
	<a6b4b44a0804030902l65b82e75r51d2f3509b66ef82@mail.gmail.com>
Message-ID: <EDADBA1B-5ED6-42C6-8F76-FA234F635C7B@ps.uni-sb.de>

Mauricio Toro wrote:

> Is there other way without pkg-config?
>
> pkg-config can be installed in mac os X,
> but it is not installed by default. Then
> it would be required to install pkg-config
> before running the installer of Gecol.

That depends on how you install Gecode.  If the pkg-config files for  
Gecode are installed with it, you can just parse them yourself (the  
main file is called gecode.pc and is installed in <prefix>/lib/ 
pkgconfig).  If you use the dmg installer packages on Mac OS, however,  
they are not installed, and the library compatibility version (i.e. 12  
for Gecode 2.1.1) is the only hint you have.

Cheers,
	Guido




From mum.jmlejnek at post.cz  Thu Apr  3 19:49:30 2008
From: mum.jmlejnek at post.cz (Jaroslav Mlejnek)
Date: Thu, 3 Apr 2008 19:49:30 +0200
Subject: [gecode-users] sqrt function
Message-ID: <7B730DD719D848A3B70C54576CD5913B@JComp>

Hi!

I am using C++ Gecode Library in my school project and I am very satisfied with it. But I would like to use an arithmetic function "sqrt" and I think it doesn't work well. In code:
 
 
defining CSP (x is class global, y is constructor local):
 
IntVar x (this, 0, Int::Limits::max), y (this, 0, Int::Limits::max);
rel(this, y, IRT_EQ, 25);
rel(this, x, IRT_EQ, Gecode::sqrt(this, y));
 
 
printing solution (like Gecode examples):
cout << x.val() << endl;
 
 
There is in printing solution method an assert (debug) error instead of solution number 5. But when I use "similar" function "sqr", it works fine (or as I expect), so the solution is 625.
 
Is this bug in sqrt function or sqrt function has some special way how to use it? I am using Gecode since version 1.1.0, my current version is the newest  2.1.1.
 
Thanks a lot for your answer,
 
Jaroslav Mlejnek
Faculty of Mathematics and Physics
Charles University, Prague
Czech Republic
 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.ps.uni-sb.de/pipermail/users/attachments/20080403/badab527/attachment.htm>

From cschulte at kth.se  Thu Apr  3 23:15:21 2008
From: cschulte at kth.se (Christian Schulte)
Date: Thu, 3 Apr 2008 23:15:21 +0200
Subject: [gecode-users] sqrt function
In-Reply-To: <7B730DD719D848A3B70C54576CD5913B@JComp>
References: <7B730DD719D848A3B70C54576CD5913B@JComp>
Message-ID: <000901c895cf$d3bf07e0$7b3d17a0$@se>

Hi Jaroslav,

 

I checked: it is a bug in sqrt (it was not incorrect but too weak)! So what
it does for sqrt(25) is that it  believes that it is between 4..5 ;-(

 

Unluckily, both the propagator and its test was buggy and cancelled each
other out;-) That's why this one escaped us.

 

The assertion you see is that you use val() on a variable not yet assigned
due to the bug.

 

I fixed it in the trunk.

 

Thank you!

Christian

 

--

Christian Schulte, www.ict.kth.se/~cschulte/

 

From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf
Of Jaroslav Mlejnek
Sent: Thursday, April 03, 2008 7:50 PM
To: users at gecode.org
Subject: [gecode-users] sqrt function

 

Hi!

 

I am using C++ Gecode Library in my school project and I am very satisfied
with it. But I would like to use an arithmetic function "sqrt" and I think
it doesn't work well. In code:

 

 

defining CSP (x is class global, y is constructor local):

 

IntVar x (this, 0, Int::Limits::max), y (this, 0, Int::Limits::max);

rel(this, y, IRT_EQ, 25);

rel(this, x, IRT_EQ, Gecode::sqrt(this, y));

 

 

printing solution (like Gecode examples):

cout << x.val() << endl;

 

 

There is in printing solution method an assert (debug) error instead of
solution number 5. But when I use "similar" function "sqr", it works fine
(or as I expect), so the solution is 625.

 

Is this bug in sqrt function or sqrt function has some special way how to
use it? I am using Gecode since version 1.1.0, my current version is the
newest  2.1.1.

 

Thanks a lot for your answer,

 

Jaroslav Mlejnek

Faculty of Mathematics and Physics

Charles University, Prague

Czech Republic

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.ps.uni-sb.de/pipermail/users/attachments/20080403/ab6d8adb/attachment.htm>

From mum.jmlejnek at post.cz  Fri Apr  4 00:09:38 2008
From: mum.jmlejnek at post.cz (Jaroslav Mlejnek)
Date: Fri, 4 Apr 2008 00:09:38 +0200
Subject: [gecode-users] sqrt function
In-Reply-To: <000901c895cf$d3bf07e0$7b3d17a0$@se>
References: <7B730DD719D848A3B70C54576CD5913B@JComp>
	<000901c895cf$d3bf07e0$7b3d17a0$@se>
Message-ID: <4FF8E434B71342D7A9E0ECA50FB0A444@JComp>

You are welcome :-)

Can you tell me a date when will be new release of Gecode with this function 
fixed? Or can I download fixed files from (for example) some svn? Sqrt 
function is very important in computing my objective function.

Thanks a lot, I have a great regard for your work.

Jarda

----- Original Message ----- 
From: Christian Schulte
To: 'Jaroslav Mlejnek' ; users at gecode.org
Sent: Thursday, April 03, 2008 11:15 PM
Subject: RE: [gecode-users] sqrt function


Hi Jaroslav,
I checked: it is a bug in sqrt (it was not incorrect but too weak)! So what 
it does for sqrt(25) is that it  believes that it is between 4..5 ;-(
Unluckily, both the propagator and its test was buggy and cancelled each 
other out;-) That's why this one escaped us.
The assertion you see is that you use val() on a variable not yet assigned 
due to the bug.
I fixed it in the trunk.

Thank you!
Christian

--
Christian Schulte, www.ict.kth.se/~cschulte/

From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf 
Of Jaroslav Mlejnek
Sent: Thursday, April 03, 2008 7:50 PM
To: users at gecode.org
Subject: [gecode-users] sqrt function

Hi!

I am using C++ Gecode Library in my school project and I am very satisfied 
with it. But I would like to use an arithmetic function "sqrt" and I think 
it doesn't work well. In code:


defining CSP (x is class global, y is constructor local):

IntVar x (this, 0, Int::Limits::max), y (this, 0, Int::Limits::max);
rel(this, y, IRT_EQ, 25);
rel(this, x, IRT_EQ, Gecode::sqrt(this, y));


printing solution (like Gecode examples):
cout << x.val() << endl;


There is in printing solution method an assert (debug) error instead of 
solution number 5. But when I use "similar" function "sqr", it works fine 
(or as I expect), so the solution is 625.

Is this bug in sqrt function or sqrt function has some special way how to 
use it? I am using Gecode since version 1.1.0, my current version is the 
newest  2.1.1.

Thanks a lot for your answer,

Jaroslav Mlejnek
Faculty of Mathematics and Physics
Charles University, Prague
Czech Republic
 




From malcolmr at cse.unsw.edu.au  Fri Apr  4 05:35:00 2008
From: malcolmr at cse.unsw.edu.au (Malcolm Ryan)
Date: Fri, 4 Apr 2008 14:35:00 +1100
Subject: [gecode-users] Gist suggestion
Message-ID: <BEB14C53-6E9D-465C-997C-05875C435F2F@cse.unsw.edu.au>

Could you please add an option to Gist which does "run until failure"?  
It would be useful in debugging.

Malcolm



From malcolmr at cse.unsw.edu.au  Fri Apr  4 06:01:21 2008
From: malcolmr at cse.unsw.edu.au (Malcolm Ryan)
Date: Fri, 4 Apr 2008 15:01:21 +1100
Subject: [gecode-users] Gist suggestion
In-Reply-To: <BEB14C53-6E9D-465C-997C-05875C435F2F@cse.unsw.edu.au>
References: <BEB14C53-6E9D-465C-997C-05875C435F2F@cse.unsw.edu.au>
Message-ID: <1B364A88-CDB5-464F-B81F-ADD43A7C8DA1@cse.unsw.edu.au>


On 04/04/2008, at 2:35 PM, Malcolm Ryan wrote:
> Could you please add an option to Gist which does "run until failure"?
> It would be useful in debugging.

Another thing that would be good would be to force the recomputation  
of a particular branch. So that I could put breakpoints in the  
branching code and examine selected calls to desc() by recomputing  
particular spots in the tree.

Malcolm



From zayenz at gmail.com  Fri Apr  4 08:14:02 2008
From: zayenz at gmail.com (Mikael Zayenz Lagerkvist)
Date: Fri, 4 Apr 2008 08:14:02 +0200
Subject: [gecode-users] Gist suggestion
In-Reply-To: <1B364A88-CDB5-464F-B81F-ADD43A7C8DA1@cse.unsw.edu.au>
References: <BEB14C53-6E9D-465C-997C-05875C435F2F@cse.unsw.edu.au>
	<1B364A88-CDB5-464F-B81F-ADD43A7C8DA1@cse.unsw.edu.au>
Message-ID: <63b5c8b00804032314t5451cf8j4b6f870e5998a153@mail.gmail.com>

On Fri, Apr 4, 2008 at 6:01 AM, Malcolm Ryan <malcolmr at cse.unsw.edu.au> wrote:
>
>  On 04/04/2008, at 2:35 PM, Malcolm Ryan wrote:
>  > Could you please add an option to Gist which does "run until failure"?
>  > It would be useful in debugging.

The functionality is probably best handled by a Stop-object.
Unfortunately, Gecode/J Gist does not accept Stop objects currently.
We'll see if it seems reasonable to do for the next release.

Otherwise, it shouldn't be too hard to add yourself.

>  Another thing that would be good would be to force the recomputation
>  of a particular branch. So that I could put breakpoints in the
>  branching code and examine selected calls to desc() by recomputing
>  particular spots in the tree.

I'm not sure if this is a generally useful feature, but it shouldn't
be to hard to do yourself. Essentially, what you would need is to add
a function to clear all saved copies from the tree apart from the root
node. Accessing any node would after this need to do a recomputation
from the root.

Cheers,
Mikael

-- 
Mikael Zayenz Lagerkvist, http://www.ict.kth.se/~zayenz/



From Vincent.Barichard at univ-angers.fr  Fri Apr  4 09:23:03 2008
From: Vincent.Barichard at univ-angers.fr (Vincent Barichard)
Date: Fri, 4 Apr 2008 09:23:03 +0200
Subject: [gecode-users] Extending Integer Variable
In-Reply-To: <000601c89562$bbc124b0$33436e10$@se>
References: <200804021608.00188.Vincent.Barichard@univ-angers.fr>
	<000601c89562$bbc124b0$33436e10$@se>
Message-ID: <200804040923.03540.Vincent.Barichard@univ-angers.fr>

Dear Christian,

Thank you very much for your useful information and advices.

My purpose is to design some search algorithms which deal with values and 
domains. In fact, I need at the same time the _min and _max value of the 
variable domain and the _current value that I try to instantiate.
As In Gecode, an instantiation makes the domain to reduce  to a single value 
(_min == _max), I need another "int" member to store the _current value 
without reducing the domain.

I am not sure that other people will absolutely need that, but It can be 
usefull to add its own data structure to an existing Gecode variable. Maybe a 
pointer to an object (NULL by default) given to the constructor. If a user 
wants to deal with this object, he must design a View which tackles the 
object.

As a conclusion, I will follow your advice and do the experiment first :-)

Thank you again,

Cheers,
Vincent

Le jeudi 3 avril 2008, Christian Schulte a ?crit?:
> Dear Vincent,
>
> let me first elaborate a little bit how Gecode's variables and propagators
> are structured before I actually attempt to give an answer.
>
> Gecode has three important concepts regarding variables:
>  - variables: they are used for modeling, and the only operations they
> provide are good for modeling. In particular,
>    variables to not provide operations to update their domain. Examples are
> IntVar, BoolVar, etc. Variables are
>    hence provide nothing but an interface to variable implementations
> (actually, variables are implemented as
>    a pointer to variable implementations).
>  - variable implementations: they are the real objects storing the domain
> and which propagators and advisors must be
>    executed when the domain changes. They themselves are constructed in two
> steps: a domain independent stub that is
>    automatically generated from a simple description (just a few lines).
> The stub is concerned with events, how
>    propagators can be subscribed to, and linking the variable
> implementations to the Gecode kernel etc. The real
>    variable implementation then inherits from the generated stub and adds
> the variable domain and so on.
>  - views: like variables they are nothing but an interface for variable
> implementations. However, views are used
>    by propagators and branching and provide operations to update variable
> domains, subscribe propagators to changes,
>    and so on. More importantly, for the same variable implementation
> several views exist: a MinusView for a variable
>    implementation x, for example, provides an interface that behaves as if
> the operations on the MinusView are executed
>    on -x rather than x. Examples are IntView, BoolView, MinusView,
> OffsetView, ... For more on views there is paper
>    on the Gecode webpage.
>
> Propagators themselves have two parts: a post function and the actual
> propagator. A post function (such as rel, distinct, linear, etc.) is used
> for modeling and hence takes variables as arguments. It then chooses the
> right propagator and the right views (converting variables to views by
> passing the underlying reference to the variable implementation).
>
> Propagators are typically parametric (as templates in C++) with respect to
> the view they are using: for example, the Max propagator is instantiated
> for the max posting function with an IntView whereas it is also
> instantiated with a MinusView for the min posting function.
>
> Sorry for the long blurb, let's move to the answer: as Gecode is designed,
> you can reuse propagators provided that you implement: a variable
> implementation by yourself (that's what you want to do), variables for them
> (so that you can model), and views for them (so that you can reuse the
> propagators), post functions (because they talk about your variables).
>
> This is a lot of effort! If you want to make something that is used (rather
> than an experiment), then one could also make views and variables
> parametric wrt the variable implementation used. That is easy but requires
> intimate Gecode knowledge. Then, in principal, one could also make the post
> functions parametric but this is almost impossible in reality as they
> should provide simple static linkage as they constitute the basic interface
> to Gecode.
>
> So it really depends on what you want to do. For an experiment, hack the
> variable implementation. For something, first do the experiment ;-)
>
> What do you want to do? Do you think it me be generally useful to be
> included in Gecode anyway?
>
> All the best
> Christian
>
> --
> Christian Schulte, www.ict.kth.se/~cschulte/
>
>
> -----Original Message-----
> From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf
> Of Vincent Barichard
> Sent: Wednesday, April 02, 2008 4:08 PM
> To: gecode list
> Subject: [gecode-users] Extending Integer Variable
>
> Hi,
>
> I am trying to extend IntVar in order to use it in my self(-made
> algorithms. I would like to use an unaltered Gecode, but I need to add an
> "int" member in
> the IntVar implementation. I don't want to make my own Integer Variable
> class
> because I also need to use the algorithms designed in Gecode.
> Is there a clean way to extend this class (by inheritance maybe ....) and
> add
> a member without altering Gecode ?
>
> Thank you for your assistance.
> Best regards,
>
> Vincent



-- 
Vincent Barichard        Universit? d'Angers (LERIA)
Tel: 02 41 73 52 06      D?partement Informatique
Fax: 02 41 73 50 73      H203



From tack at ps.uni-sb.de  Fri Apr  4 10:27:57 2008
From: tack at ps.uni-sb.de (Guido Tack)
Date: Fri, 4 Apr 2008 10:27:57 +0200
Subject: [gecode-users] Server maintenance today
Message-ID: <56A8A18B-7A18-4EB6-A89A-CD26F860808B@ps.uni-sb.de>

Dear Gecode users,

our servers are scheduled for maintenance today, approximately between  
16:00 and 21:00 CEST.  The Gecode web pages, mailing lists, and svn  
will not be available.

Cheers,
	Guido




From banerjed at rsise.anu.edu.au  Fri Apr  4 12:46:17 2008
From: banerjed at rsise.anu.edu.au (Debdeep Banerjee)
Date: Fri, 04 Apr 2008 21:46:17 +1100
Subject: [gecode-users] How to iterate over a integer view's domain
Message-ID: <47F606F9.5050200@rsise.anu.edu.au>

hi,
 I want to iterate over the current domain of a integer view 
(Gecode::Int::IntView). How can I do that ? Is this domain current ?
I want to implement my own variable and value selection. That's why I 
need to access the current domain of the variable. Is there any good way 
to do it ?

With regards
Debdeep

-- 
Debdeep Banerjee
PhD Candidate
CSL/RSISE/NICTA
Australian National University
Email: debdeep.banerjee at rsise.anu.edu.au
Web:http://rsise.anu.edu.au/~banerjed





From tack at ps.uni-sb.de  Fri Apr  4 12:59:21 2008
From: tack at ps.uni-sb.de (Guido Tack)
Date: Fri, 4 Apr 2008 12:59:21 +0200
Subject: [gecode-users] How to iterate over a integer view's domain
In-Reply-To: <47F606F9.5050200@rsise.anu.edu.au>
References: <47F606F9.5050200@rsise.anu.edu.au>
Message-ID: <F4589021-92BE-494A-B54E-BB96E78373AD@ps.uni-sb.de>

Debdeep Banerjee wrote:
> I want to iterate over the current domain of a integer view
> (Gecode::Int::IntView). How can I do that ? Is this domain current ?
> I want to implement my own variable and value selection. That's why I
> need to access the current domain of the variable. Is there any good  
> way
> to do it ?

Yes, using ViewRanges<IntView>:
http://www.gecode.org/gecode-doc-latest/classGecode_1_1Int_1_1ViewRanges.html

What do you mean by current?  The domain of a variable is always  
current, in the sense that if it's modified, iteration over the domain  
will reflect the modification.

Cheers,
	Guido



From banerjed at rsise.anu.edu.au  Fri Apr  4 13:13:45 2008
From: banerjed at rsise.anu.edu.au (Debdeep Banerjee)
Date: Fri, 04 Apr 2008 22:13:45 +1100
Subject: [gecode-users] How to iterate over a integer view's domain
In-Reply-To: <F4589021-92BE-494A-B54E-BB96E78373AD@ps.uni-sb.de>
References: <47F606F9.5050200@rsise.anu.edu.au>
	<F4589021-92BE-494A-B54E-BB96E78373AD@ps.uni-sb.de>
Message-ID: <47F60D69.4040406@rsise.anu.edu.au>

Guido Tack wrote:
> Debdeep Banerjee wrote:
>> I want to iterate over the current domain of a integer view
>> (Gecode::Int::IntView). How can I do that ? Is this domain current ?
>> I want to implement my own variable and value selection. That's why I
>> need to access the current domain of the variable. Is there any good way
>> to do it ?
>
> Yes, using ViewRanges<IntView>:
> http://www.gecode.org/gecode-doc-latest/classGecode_1_1Int_1_1ViewRanges.html 
>

Is this going to give me the ranges or it will iterate over all values 
in the domain ?
For example: if the domain of a variable X is Dom(X):{1,4,5,6,9,10,11,15}
Which output will be given by ViewRanges ?
Option 1: 4 ranges
                   R1: 1
                   R2: 4..6
                   R3: 9..11
                   R4: 15

Option 2: It will iterate through all the values of the domain.

May be it is a silly question, but I don't understand what is the 
advantage of the range.


With regards
Debdeep
>
> What do you mean by current?  The domain of a variable is always 
> current, in the sense that if it's modified, iteration over the domain 
> will reflect the modification.
>
> Cheers,
>     Guido


-- 
Debdeep Banerjee
PhD Candidate
CSL/RSISE/NICTA
Australian National University
Email: debdeep.banerjee at rsise.anu.edu.au
Web:http://rsise.anu.edu.au/~banerjed





From tack at ps.uni-sb.de  Fri Apr  4 13:33:34 2008
From: tack at ps.uni-sb.de (Guido Tack)
Date: Fri, 4 Apr 2008 13:33:34 +0200
Subject: [gecode-users] How to iterate over a integer view's domain
In-Reply-To: <47F60D69.4040406@rsise.anu.edu.au>
References: <47F606F9.5050200@rsise.anu.edu.au>
	<F4589021-92BE-494A-B54E-BB96E78373AD@ps.uni-sb.de>
	<47F60D69.4040406@rsise.anu.edu.au>
Message-ID: <976060F9-4BB5-4707-A880-D07FE8F8A528@ps.uni-sb.de>

Debdeep Banerjee wrote:

> Guido Tack wrote:
>> Debdeep Banerjee wrote:
>>> I want to iterate over the current domain of a integer view
>>> (Gecode::Int::IntView). How can I do that ? Is this domain current ?
>>> I want to implement my own variable and value selection. That's  
>>> why I
>>> need to access the current domain of the variable. Is there any  
>>> good way
>>> to do it ?
>>
>> Yes, using ViewRanges<IntView>:
>> http://www.gecode.org/gecode-doc-latest/classGecode_1_1Int_1_1ViewRanges.html
>>
>
> Is this going to give me the ranges or it will iterate over all values
> in the domain ?
> For example: if the domain of a variable X is Dom(X): 
> {1,4,5,6,9,10,11,15}
> Which output will be given by ViewRanges ?
> Option 1: 4 ranges
>                   R1: 1
>                   R2: 4..6
>                   R3: 9..11
>                   R4: 15

This one.  That's why it's called ViewRanges.

> Option 2: It will iterate through all the values of the domain.

If you need that, use a ViewValues iterator.

> May be it is a silly question, but I don't understand what is the
> advantage of the range.

It potentially needs less memory (you store only the endpoints) and  
less run time.  E.g., computing the intersection of two domains is  
linear in the number of ranges, not values, which can be a huge  
difference.

Cheers,
	Guido




From cschulte at kth.se  Sat Apr  5 00:39:55 2008
From: cschulte at kth.se (Christian Schulte)
Date: Sat, 5 Apr 2008 00:39:55 +0200
Subject: [gecode-users] Extending Integer Variable
In-Reply-To: <200804040923.03540.Vincent.Barichard@univ-angers.fr>
References: <200804021608.00188.Vincent.Barichard@univ-angers.fr>
	<000601c89562$bbc124b0$33436e10$@se>
	<200804040923.03540.Vincent.Barichard@univ-angers.fr>
Message-ID: <002301c896a4$ce4fac30$6aef0490$@se>

Hi Vincent,

the idea of having something extra by default is interesting. But not that
clear to me how it would work (just the though of one extra pointer makes me
shiver, of course). 

Good luck with the experiments
Christian

--
Christian Schulte, www.ict.kth.se/~cschulte/


-----Original Message-----
From: Vincent Barichard [mailto:Vincent.Barichard at univ-angers.fr] 
Sent: Friday, April 04, 2008 9:23 AM
To: gecode-users at gecode.org; cschulte at kth.se
Subject: Re: [gecode-users] Extending Integer Variable

Dear Christian,

Thank you very much for your useful information and advices.

My purpose is to design some search algorithms which deal with values and 
domains. In fact, I need at the same time the _min and _max value of the 
variable domain and the _current value that I try to instantiate.
As In Gecode, an instantiation makes the domain to reduce  to a single value

(_min == _max), I need another "int" member to store the _current value 
without reducing the domain.

I am not sure that other people will absolutely need that, but It can be 
usefull to add its own data structure to an existing Gecode variable. Maybe
a 
pointer to an object (NULL by default) given to the constructor. If a user 
wants to deal with this object, he must design a View which tackles the 
object.

As a conclusion, I will follow your advice and do the experiment first :-)

Thank you again,

Cheers,
Vincent

Le jeudi 3 avril 2008, Christian Schulte a ?crit?:
> Dear Vincent,
>
> let me first elaborate a little bit how Gecode's variables and propagators
> are structured before I actually attempt to give an answer.
>
> Gecode has three important concepts regarding variables:
>  - variables: they are used for modeling, and the only operations they
> provide are good for modeling. In particular,
>    variables to not provide operations to update their domain. Examples
are
> IntVar, BoolVar, etc. Variables are
>    hence provide nothing but an interface to variable implementations
> (actually, variables are implemented as
>    a pointer to variable implementations).
>  - variable implementations: they are the real objects storing the domain
> and which propagators and advisors must be
>    executed when the domain changes. They themselves are constructed in
two
> steps: a domain independent stub that is
>    automatically generated from a simple description (just a few lines).
> The stub is concerned with events, how
>    propagators can be subscribed to, and linking the variable
> implementations to the Gecode kernel etc. The real
>    variable implementation then inherits from the generated stub and adds
> the variable domain and so on.
>  - views: like variables they are nothing but an interface for variable
> implementations. However, views are used
>    by propagators and branching and provide operations to update variable
> domains, subscribe propagators to changes,
>    and so on. More importantly, for the same variable implementation
> several views exist: a MinusView for a variable
>    implementation x, for example, provides an interface that behaves as if
> the operations on the MinusView are executed
>    on -x rather than x. Examples are IntView, BoolView, MinusView,
> OffsetView, ... For more on views there is paper
>    on the Gecode webpage.
>
> Propagators themselves have two parts: a post function and the actual
> propagator. A post function (such as rel, distinct, linear, etc.) is used
> for modeling and hence takes variables as arguments. It then chooses the
> right propagator and the right views (converting variables to views by
> passing the underlying reference to the variable implementation).
>
> Propagators are typically parametric (as templates in C++) with respect to
> the view they are using: for example, the Max propagator is instantiated
> for the max posting function with an IntView whereas it is also
> instantiated with a MinusView for the min posting function.
>
> Sorry for the long blurb, let's move to the answer: as Gecode is designed,
> you can reuse propagators provided that you implement: a variable
> implementation by yourself (that's what you want to do), variables for
them
> (so that you can model), and views for them (so that you can reuse the
> propagators), post functions (because they talk about your variables).
>
> This is a lot of effort! If you want to make something that is used
(rather
> than an experiment), then one could also make views and variables
> parametric wrt the variable implementation used. That is easy but requires
> intimate Gecode knowledge. Then, in principal, one could also make the
post
> functions parametric but this is almost impossible in reality as they
> should provide simple static linkage as they constitute the basic
interface
> to Gecode.
>
> So it really depends on what you want to do. For an experiment, hack the
> variable implementation. For something, first do the experiment ;-)
>
> What do you want to do? Do you think it me be generally useful to be
> included in Gecode anyway?
>
> All the best
> Christian
>
> --
> Christian Schulte, www.ict.kth.se/~cschulte/
>
>
> -----Original Message-----
> From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf
> Of Vincent Barichard
> Sent: Wednesday, April 02, 2008 4:08 PM
> To: gecode list
> Subject: [gecode-users] Extending Integer Variable
>
> Hi,
>
> I am trying to extend IntVar in order to use it in my self(-made
> algorithms. I would like to use an unaltered Gecode, but I need to add an
> "int" member in
> the IntVar implementation. I don't want to make my own Integer Variable
> class
> because I also need to use the algorithms designed in Gecode.
> Is there a clean way to extend this class (by inheritance maybe ....) and
> add
> a member without altering Gecode ?
>
> Thank you for your assistance.
> Best regards,
>
> Vincent



-- 
Vincent Barichard        Universit? d'Angers (LERIA)
Tel: 02 41 73 52 06      D?partement Informatique
Fax: 02 41 73 50 73      H203




From cschulte at kth.se  Sat Apr  5 00:37:03 2008
From: cschulte at kth.se (Christian Schulte)
Date: Sat, 5 Apr 2008 00:37:03 +0200
Subject: [gecode-users] sqrt function
In-Reply-To: <4FF8E434B71342D7A9E0ECA50FB0A444@JComp>
References: <7B730DD719D848A3B70C54576CD5913B@JComp>
	<000901c895cf$d3bf07e0$7b3d17a0$@se>
	<4FF8E434B71342D7A9E0ECA50FB0A444@JComp>
Message-ID: <002001c896a4$6a28c980$3e7a5c80$@se>

Jarda,

Hmmm, we have no real plan for the next release yet (honestly, there is
currently a mismatch between the docs and the code, for once in a lifetime
the docs jumping ahead).

But, as said, it is in the trunk: the trunk is available in svn and - if
memory serves me right - there is even some blurb on the webpages you to get
it.

If you just want to have a patch to 2.1.1 source I code send you that.

Thanks!
Christian

--
Christian Schulte, www.ict.kth.se/~cschulte/

-----Original Message-----
From: Jaroslav Mlejnek [mailto:mum.jmlejnek at post.cz] 
Sent: Friday, April 04, 2008 12:10 AM
To: cschulte at kth.se; users at gecode.org
Subject: Re: [gecode-users] sqrt function

You are welcome :-)

Can you tell me a date when will be new release of Gecode with this function

fixed? Or can I download fixed files from (for example) some svn? Sqrt 
function is very important in computing my objective function.

Thanks a lot, I have a great regard for your work.

Jarda

----- Original Message ----- 
From: Christian Schulte
To: 'Jaroslav Mlejnek' ; users at gecode.org
Sent: Thursday, April 03, 2008 11:15 PM
Subject: RE: [gecode-users] sqrt function


Hi Jaroslav,
I checked: it is a bug in sqrt (it was not incorrect but too weak)! So what 
it does for sqrt(25) is that it  believes that it is between 4..5 ;-(
Unluckily, both the propagator and its test was buggy and cancelled each 
other out;-) That's why this one escaped us.
The assertion you see is that you use val() on a variable not yet assigned 
due to the bug.
I fixed it in the trunk.

Thank you!
Christian

--
Christian Schulte, www.ict.kth.se/~cschulte/

From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf 
Of Jaroslav Mlejnek
Sent: Thursday, April 03, 2008 7:50 PM
To: users at gecode.org
Subject: [gecode-users] sqrt function

Hi!

I am using C++ Gecode Library in my school project and I am very satisfied 
with it. But I would like to use an arithmetic function "sqrt" and I think 
it doesn't work well. In code:


defining CSP (x is class global, y is constructor local):

IntVar x (this, 0, Int::Limits::max), y (this, 0, Int::Limits::max);
rel(this, y, IRT_EQ, 25);
rel(this, x, IRT_EQ, Gecode::sqrt(this, y));


printing solution (like Gecode examples):
cout << x.val() << endl;


There is in printing solution method an assert (debug) error instead of 
solution number 5. But when I use "similar" function "sqr", it works fine 
(or as I expect), so the solution is 625.

Is this bug in sqrt function or sqrt function has some special way how to 
use it? I am using Gecode since version 1.1.0, my current version is the 
newest  2.1.1.

Thanks a lot for your answer,

Jaroslav Mlejnek
Faculty of Mathematics and Physics
Charles University, Prague
Czech Republic
 





From banerjed at rsise.anu.edu.au  Sat Apr  5 07:18:38 2008
From: banerjed at rsise.anu.edu.au (Debdeep Banerjee)
Date: Sat, 05 Apr 2008 16:18:38 +1100
Subject: [gecode-users] Custom branching and Custom Propagator
Message-ID: <47F70BAE.1020907@rsise.anu.edu.au>

Hi,
 I am using my own propagator and branching. But when I am using my 
branching ( via post()  method) the propagator is not working. But if I 
use the gecode branching method ( branch() ) then the propagator works. 
I have checked the custom branching.....the methods ( status, 
description , commit ) are called from the DFS Search engine, but the 
propagator did not propagate.

What would be the reason ?

With regards
Debdeep

-- 
Debdeep Banerjee
PhD Candidate
CSL/RSISE/NICTA
Australian National University
Email: debdeep.banerjee at rsise.anu.edu.au
Web:http://rsise.anu.edu.au/~banerjed





From tack at ps.uni-sb.de  Sat Apr  5 07:40:00 2008
From: tack at ps.uni-sb.de (Guido Tack)
Date: Sat, 5 Apr 2008 07:40:00 +0200
Subject: [gecode-users] Custom branching and Custom Propagator
In-Reply-To: <47F70BAE.1020907@rsise.anu.edu.au>
References: <47F70BAE.1020907@rsise.anu.edu.au>
Message-ID: <C63B4654-BDED-4873-8AC3-7A94E88E2DB4@ps.uni-sb.de>

Debdeep Banerjee wrote:

> Hi,
> I am using my own propagator and branching. But when I am using my
> branching ( via post()  method) the propagator is not working. But  
> if I
> use the gecode branching method ( branch() ) then the propagator  
> works.
> I have checked the custom branching.....the methods ( status,
> description , commit ) are called from the DFS Search engine, but the
> propagator did not propagate.
>
> What would be the reason ?

Perhaps your propagator does not respond to the modification events  
generated by your custom branching, but to those from the standard  
branchings.  E.g., the standard INT_VAL_MIN branching always assigns a  
variable on the left branch, and that triggers propagators registered  
for the PC_INT_VAL propagation condition.  If you registered for  
PC_INT_VAL, but your branching does not assign variables (it might  
only partition the domain, for instance), then your propagator won't  
be.  That's just a guess, of course.

Guido

-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 2436 bytes
Desc: not available
URL: <http://www.ps.uni-sb.de/pipermail/users/attachments/20080405/8551765d/attachment.bin>

From mum.jmlejnek at post.cz  Sat Apr  5 16:17:30 2008
From: mum.jmlejnek at post.cz (Jaroslav Mlejnek)
Date: Sat, 5 Apr 2008 16:17:30 +0200
Subject: [gecode-users] sqrt function
In-Reply-To: <002001c896a4$6a28c980$3e7a5c80$@se>
References: <7B730DD719D848A3B70C54576CD5913B@JComp>
	<000901c895cf$d3bf07e0$7b3d17a0$@se>
	<4FF8E434B71342D7A9E0ECA50FB0A444@JComp>
	<002001c896a4$6a28c980$3e7a5c80$@se>
Message-ID: <CAAEFF4BB24C408FAF98E4E47A325393@JComp>

I tried compile Gecode source codes from svn but without any success. I am 
using Windows, MSVS 2008 & Cygwin and as you write on your website 
http://www.gecode.org/gecode-doc-latest/PageComp.html, there is no way how 
to make DLLs? But I am using DLLs and header files now, so is there any MSVS 
project which can do this? Or exists some more "talkaktive" how to?

If you have time can you send me patched header files and compiled DLL/lib 
libraries? I am very sorry, but this things under Windows is a little bit 
"taboos" for me and I can't use my linux because of project specification.

Jarda

----- Original Message ----- 
From: "Christian Schulte" <cschulte at kth.se>
To: "'Jaroslav Mlejnek'" <mum.jmlejnek at post.cz>; <users at gecode.org>
Sent: Saturday, April 05, 2008 12:37 AM
Subject: RE: [gecode-users] sqrt function


> Jarda,
>
> Hmmm, we have no real plan for the next release yet (honestly, there is
> currently a mismatch between the docs and the code, for once in a lifetime
> the docs jumping ahead).
>
> But, as said, it is in the trunk: the trunk is available in svn and - if
> memory serves me right - there is even some blurb on the webpages you to 
> get
> it.
>
> If you just want to have a patch to 2.1.1 source I code send you that.
>
> Thanks!
> Christian
>
> --
> Christian Schulte, www.ict.kth.se/~cschulte/
>
> -----Original Message-----
> From: Jaroslav Mlejnek [mailto:mum.jmlejnek at post.cz]
> Sent: Friday, April 04, 2008 12:10 AM
> To: cschulte at kth.se; users at gecode.org
> Subject: Re: [gecode-users] sqrt function
>
> You are welcome :-)
>
> Can you tell me a date when will be new release of Gecode with this 
> function
>
> fixed? Or can I download fixed files from (for example) some svn? Sqrt
> function is very important in computing my objective function.
>
> Thanks a lot, I have a great regard for your work.
>
> Jarda
>
> ----- Original Message ----- 
> From: Christian Schulte
> To: 'Jaroslav Mlejnek' ; users at gecode.org
> Sent: Thursday, April 03, 2008 11:15 PM
> Subject: RE: [gecode-users] sqrt function
>
>
> Hi Jaroslav,
> I checked: it is a bug in sqrt (it was not incorrect but too weak)! So 
> what
> it does for sqrt(25) is that it  believes that it is between 4..5 ;-(
> Unluckily, both the propagator and its test was buggy and cancelled each
> other out;-) That's why this one escaped us.
> The assertion you see is that you use val() on a variable not yet assigned
> due to the bug.
> I fixed it in the trunk.
>
> Thank you!
> Christian
>
> --
> Christian Schulte, www.ict.kth.se/~cschulte/
>
> From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf
> Of Jaroslav Mlejnek
> Sent: Thursday, April 03, 2008 7:50 PM
> To: users at gecode.org
> Subject: [gecode-users] sqrt function
>
> Hi!
>
> I am using C++ Gecode Library in my school project and I am very satisfied
> with it. But I would like to use an arithmetic function "sqrt" and I think
> it doesn't work well. In code:
>
>
> defining CSP (x is class global, y is constructor local):
>
> IntVar x (this, 0, Int::Limits::max), y (this, 0, Int::Limits::max);
> rel(this, y, IRT_EQ, 25);
> rel(this, x, IRT_EQ, Gecode::sqrt(this, y));
>
>
> printing solution (like Gecode examples):
> cout << x.val() << endl;
>
>
> There is in printing solution method an assert (debug) error instead of
> solution number 5. But when I use "similar" function "sqr", it works fine
> (or as I expect), so the solution is 625.
>
> Is this bug in sqrt function or sqrt function has some special way how to
> use it? I am using Gecode since version 1.1.0, my current version is the
> newest  2.1.1.
>
> Thanks a lot for your answer,
>
> Jaroslav Mlejnek
> Faculty of Mathematics and Physics
> Charles University, Prague
> Czech Republic
>
>
> 




From cschulte at kth.se  Sat Apr  5 17:40:00 2008
From: cschulte at kth.se (Christian Schulte)
Date: Sat, 5 Apr 2008 17:40:00 +0200
Subject: [gecode-users] sqrt function
In-Reply-To: <CAAEFF4BB24C408FAF98E4E47A325393@JComp>
References: <7B730DD719D848A3B70C54576CD5913B@JComp>
	<000901c895cf$d3bf07e0$7b3d17a0$@se>
	<4FF8E434B71342D7A9E0ECA50FB0A444@JComp>
	<002001c896a4$6a28c980$3e7a5c80$@se>
	<CAAEFF4BB24C408FAF98E4E47A325393@JComp>
Message-ID: <001c01c89733$5597b0f0$00c712d0$@se>

Hi, there is an old message in this thread that explains how to get MSVC
2008 working for Gecode. Please check. It is easy enough. We do not use the
IDE and project files.

Christian


--
Christian Schulte, www.ict.kth.se/~cschulte/


-----Original Message-----
From: Jaroslav Mlejnek [mailto:mum.jmlejnek at post.cz] 
Sent: Saturday, April 05, 2008 4:18 PM
To: cschulte at kth.se; users at gecode.org
Subject: Re: [gecode-users] sqrt function

I tried compile Gecode source codes from svn but without any success. I am 
using Windows, MSVS 2008 & Cygwin and as you write on your website 
http://www.gecode.org/gecode-doc-latest/PageComp.html, there is no way how 
to make DLLs? But I am using DLLs and header files now, so is there any MSVS

project which can do this? Or exists some more "talkaktive" how to?

If you have time can you send me patched header files and compiled DLL/lib 
libraries? I am very sorry, but this things under Windows is a little bit 
"taboos" for me and I can't use my linux because of project specification.

Jarda

----- Original Message ----- 
From: "Christian Schulte" <cschulte at kth.se>
To: "'Jaroslav Mlejnek'" <mum.jmlejnek at post.cz>; <users at gecode.org>
Sent: Saturday, April 05, 2008 12:37 AM
Subject: RE: [gecode-users] sqrt function


> Jarda,
>
> Hmmm, we have no real plan for the next release yet (honestly, there is
> currently a mismatch between the docs and the code, for once in a lifetime
> the docs jumping ahead).
>
> But, as said, it is in the trunk: the trunk is available in svn and - if
> memory serves me right - there is even some blurb on the webpages you to 
> get
> it.
>
> If you just want to have a patch to 2.1.1 source I code send you that.
>
> Thanks!
> Christian
>
> --
> Christian Schulte, www.ict.kth.se/~cschulte/
>
> -----Original Message-----
> From: Jaroslav Mlejnek [mailto:mum.jmlejnek at post.cz]
> Sent: Friday, April 04, 2008 12:10 AM
> To: cschulte at kth.se; users at gecode.org
> Subject: Re: [gecode-users] sqrt function
>
> You are welcome :-)
>
> Can you tell me a date when will be new release of Gecode with this 
> function
>
> fixed? Or can I download fixed files from (for example) some svn? Sqrt
> function is very important in computing my objective function.
>
> Thanks a lot, I have a great regard for your work.
>
> Jarda
>
> ----- Original Message ----- 
> From: Christian Schulte
> To: 'Jaroslav Mlejnek' ; users at gecode.org
> Sent: Thursday, April 03, 2008 11:15 PM
> Subject: RE: [gecode-users] sqrt function
>
>
> Hi Jaroslav,
> I checked: it is a bug in sqrt (it was not incorrect but too weak)! So 
> what
> it does for sqrt(25) is that it  believes that it is between 4..5 ;-(
> Unluckily, both the propagator and its test was buggy and cancelled each
> other out;-) That's why this one escaped us.
> The assertion you see is that you use val() on a variable not yet assigned
> due to the bug.
> I fixed it in the trunk.
>
> Thank you!
> Christian
>
> --
> Christian Schulte, www.ict.kth.se/~cschulte/
>
> From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf
> Of Jaroslav Mlejnek
> Sent: Thursday, April 03, 2008 7:50 PM
> To: users at gecode.org
> Subject: [gecode-users] sqrt function
>
> Hi!
>
> I am using C++ Gecode Library in my school project and I am very satisfied
> with it. But I would like to use an arithmetic function "sqrt" and I think
> it doesn't work well. In code:
>
>
> defining CSP (x is class global, y is constructor local):
>
> IntVar x (this, 0, Int::Limits::max), y (this, 0, Int::Limits::max);
> rel(this, y, IRT_EQ, 25);
> rel(this, x, IRT_EQ, Gecode::sqrt(this, y));
>
>
> printing solution (like Gecode examples):
> cout << x.val() << endl;
>
>
> There is in printing solution method an assert (debug) error instead of
> solution number 5. But when I use "similar" function "sqr", it works fine
> (or as I expect), so the solution is 625.
>
> Is this bug in sqrt function or sqrt function has some special way how to
> use it? I am using Gecode since version 1.1.0, my current version is the
> newest  2.1.1.
>
> Thanks a lot for your answer,
>
> Jaroslav Mlejnek
> Faculty of Mathematics and Physics
> Charles University, Prague
> Czech Republic
>
>
> 





From mum.jmlejnek at post.cz  Sat Apr  5 19:01:38 2008
From: mum.jmlejnek at post.cz (Jaroslav Mlejnek)
Date: Sat, 5 Apr 2008 19:01:38 +0200
Subject: [gecode-users] sqrt function
In-Reply-To: <001c01c89733$5597b0f0$00c712d0$@se>
References: <7B730DD719D848A3B70C54576CD5913B@JComp>
	<000901c895cf$d3bf07e0$7b3d17a0$@se>
	<4FF8E434B71342D7A9E0ECA50FB0A444@JComp>
	<002001c896a4$6a28c980$3e7a5c80$@se>
	<CAAEFF4BB24C408FAF98E4E47A325393@JComp>
	<001c01c89733$5597b0f0$00c712d0$@se>
Message-ID: <0CB8432E6A1444F289C5B4B288178FA1@JComp>

Dear Christian,

thanks a lot for your time! As you said I found a thread in e-mail archive 
and both compilation and sqrt function work perfectly.

Jarda

----- Original Message ----- 
From: "Christian Schulte" <cschulte at kth.se>
To: "'Jaroslav Mlejnek'" <mum.jmlejnek at post.cz>; <users at gecode.org>
Sent: Saturday, April 05, 2008 5:40 PM
Subject: RE: [gecode-users] sqrt function


> Hi, there is an old message in this thread that explains how to get MSVC
> 2008 working for Gecode. Please check. It is easy enough. We do not use 
> the
> IDE and project files.
>
> Christian
>
>
> --
> Christian Schulte, www.ict.kth.se/~cschulte/
>
>
> -----Original Message-----
> From: Jaroslav Mlejnek [mailto:mum.jmlejnek at post.cz]
> Sent: Saturday, April 05, 2008 4:18 PM
> To: cschulte at kth.se; users at gecode.org
> Subject: Re: [gecode-users] sqrt function
>
> I tried compile Gecode source codes from svn but without any success. I am
> using Windows, MSVS 2008 & Cygwin and as you write on your website
> http://www.gecode.org/gecode-doc-latest/PageComp.html, there is no way how
> to make DLLs? But I am using DLLs and header files now, so is there any 
> MSVS
>
> project which can do this? Or exists some more "talkaktive" how to?
>
> If you have time can you send me patched header files and compiled DLL/lib
> libraries? I am very sorry, but this things under Windows is a little bit
> "taboos" for me and I can't use my linux because of project specification.
>
> Jarda
>
> ----- Original Message ----- 
> From: "Christian Schulte" <cschulte at kth.se>
> To: "'Jaroslav Mlejnek'" <mum.jmlejnek at post.cz>; <users at gecode.org>
> Sent: Saturday, April 05, 2008 12:37 AM
> Subject: RE: [gecode-users] sqrt function
>
>
>> Jarda,
>>
>> Hmmm, we have no real plan for the next release yet (honestly, there is
>> currently a mismatch between the docs and the code, for once in a 
>> lifetime
>> the docs jumping ahead).
>>
>> But, as said, it is in the trunk: the trunk is available in svn and - if
>> memory serves me right - there is even some blurb on the webpages you to
>> get
>> it.
>>
>> If you just want to have a patch to 2.1.1 source I code send you that.
>>
>> Thanks!
>> Christian
>>
>> --
>> Christian Schulte, www.ict.kth.se/~cschulte/
>>
>> -----Original Message-----
>> From: Jaroslav Mlejnek [mailto:mum.jmlejnek at post.cz]
>> Sent: Friday, April 04, 2008 12:10 AM
>> To: cschulte at kth.se; users at gecode.org
>> Subject: Re: [gecode-users] sqrt function
>>
>> You are welcome :-)
>>
>> Can you tell me a date when will be new release of Gecode with this
>> function
>>
>> fixed? Or can I download fixed files from (for example) some svn? Sqrt
>> function is very important in computing my objective function.
>>
>> Thanks a lot, I have a great regard for your work.
>>
>> Jarda
>>
>> ----- Original Message ----- 
>> From: Christian Schulte
>> To: 'Jaroslav Mlejnek' ; users at gecode.org
>> Sent: Thursday, April 03, 2008 11:15 PM
>> Subject: RE: [gecode-users] sqrt function
>>
>>
>> Hi Jaroslav,
>> I checked: it is a bug in sqrt (it was not incorrect but too weak)! So
>> what
>> it does for sqrt(25) is that it  believes that it is between 4..5 ;-(
>> Unluckily, both the propagator and its test was buggy and cancelled each
>> other out;-) That's why this one escaped us.
>> The assertion you see is that you use val() on a variable not yet 
>> assigned
>> due to the bug.
>> I fixed it in the trunk.
>>
>> Thank you!
>> Christian
>>
>> --
>> Christian Schulte, www.ict.kth.se/~cschulte/
>>
>> From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On 
>> Behalf
>> Of Jaroslav Mlejnek
>> Sent: Thursday, April 03, 2008 7:50 PM
>> To: users at gecode.org
>> Subject: [gecode-users] sqrt function
>>
>> Hi!
>>
>> I am using C++ Gecode Library in my school project and I am very 
>> satisfied
>> with it. But I would like to use an arithmetic function "sqrt" and I 
>> think
>> it doesn't work well. In code:
>>
>>
>> defining CSP (x is class global, y is constructor local):
>>
>> IntVar x (this, 0, Int::Limits::max), y (this, 0, Int::Limits::max);
>> rel(this, y, IRT_EQ, 25);
>> rel(this, x, IRT_EQ, Gecode::sqrt(this, y));
>>
>>
>> printing solution (like Gecode examples):
>> cout << x.val() << endl;
>>
>>
>> There is in printing solution method an assert (debug) error instead of
>> solution number 5. But when I use "similar" function "sqr", it works fine
>> (or as I expect), so the solution is 625.
>>
>> Is this bug in sqrt function or sqrt function has some special way how to
>> use it? I am using Gecode since version 1.1.0, my current version is the
>> newest  2.1.1.
>>
>> Thanks a lot for your answer,
>>
>> Jaroslav Mlejnek
>> Faculty of Mathematics and Physics
>> Charles University, Prague
>> Czech Republic
>>
>>
>>
>
> 




From cschulte at kth.se  Sat Apr  5 20:11:43 2008
From: cschulte at kth.se (Christian Schulte)
Date: Sat, 5 Apr 2008 20:11:43 +0200
Subject: [gecode-users] sqrt function
In-Reply-To: <0CB8432E6A1444F289C5B4B288178FA1@JComp>
References: <7B730DD719D848A3B70C54576CD5913B@JComp>
	<000901c895cf$d3bf07e0$7b3d17a0$@se>
	<4FF8E434B71342D7A9E0ECA50FB0A444@JComp>
	<002001c896a4$6a28c980$3e7a5c80$@se>
	<CAAEFF4BB24C408FAF98E4E47A325393@JComp>
	<001c01c89733$5597b0f0$00c712d0$@se>
	<0CB8432E6A1444F289C5B4B288178FA1@JComp>
Message-ID: <000001c89748$874e1520$95ea3f60$@se>

Great! All well, that spells WEEKEND! Christian

--
Christian Schulte, www.ict.kth.se/~cschulte/

-----Original Message-----
From: Jaroslav Mlejnek [mailto:mum.jmlejnek at post.cz] 
Sent: Saturday, April 05, 2008 7:02 PM
To: cschulte at kth.se; users at gecode.org
Subject: Re: [gecode-users] sqrt function

Dear Christian,

thanks a lot for your time! As you said I found a thread in e-mail archive 
and both compilation and sqrt function work perfectly.

Jarda

----- Original Message ----- 
From: "Christian Schulte" <cschulte at kth.se>
To: "'Jaroslav Mlejnek'" <mum.jmlejnek at post.cz>; <users at gecode.org>
Sent: Saturday, April 05, 2008 5:40 PM
Subject: RE: [gecode-users] sqrt function


> Hi, there is an old message in this thread that explains how to get MSVC
> 2008 working for Gecode. Please check. It is easy enough. We do not use 
> the
> IDE and project files.
>
> Christian
>
>
> --
> Christian Schulte, www.ict.kth.se/~cschulte/
>
>
> -----Original Message-----
> From: Jaroslav Mlejnek [mailto:mum.jmlejnek at post.cz]
> Sent: Saturday, April 05, 2008 4:18 PM
> To: cschulte at kth.se; users at gecode.org
> Subject: Re: [gecode-users] sqrt function
>
> I tried compile Gecode source codes from svn but without any success. I am
> using Windows, MSVS 2008 & Cygwin and as you write on your website
> http://www.gecode.org/gecode-doc-latest/PageComp.html, there is no way how
> to make DLLs? But I am using DLLs and header files now, so is there any 
> MSVS
>
> project which can do this? Or exists some more "talkaktive" how to?
>
> If you have time can you send me patched header files and compiled DLL/lib
> libraries? I am very sorry, but this things under Windows is a little bit
> "taboos" for me and I can't use my linux because of project specification.
>
> Jarda
>
> ----- Original Message ----- 
> From: "Christian Schulte" <cschulte at kth.se>
> To: "'Jaroslav Mlejnek'" <mum.jmlejnek at post.cz>; <users at gecode.org>
> Sent: Saturday, April 05, 2008 12:37 AM
> Subject: RE: [gecode-users] sqrt function
>
>
>> Jarda,
>>
>> Hmmm, we have no real plan for the next release yet (honestly, there is
>> currently a mismatch between the docs and the code, for once in a 
>> lifetime
>> the docs jumping ahead).
>>
>> But, as said, it is in the trunk: the trunk is available in svn and - if
>> memory serves me right - there is even some blurb on the webpages you to
>> get
>> it.
>>
>> If you just want to have a patch to 2.1.1 source I code send you that.
>>
>> Thanks!
>> Christian
>>
>> --
>> Christian Schulte, www.ict.kth.se/~cschulte/
>>
>> -----Original Message-----
>> From: Jaroslav Mlejnek [mailto:mum.jmlejnek at post.cz]
>> Sent: Friday, April 04, 2008 12:10 AM
>> To: cschulte at kth.se; users at gecode.org
>> Subject: Re: [gecode-users] sqrt function
>>
>> You are welcome :-)
>>
>> Can you tell me a date when will be new release of Gecode with this
>> function
>>
>> fixed? Or can I download fixed files from (for example) some svn? Sqrt
>> function is very important in computing my objective function.
>>
>> Thanks a lot, I have a great regard for your work.
>>
>> Jarda
>>
>> ----- Original Message ----- 
>> From: Christian Schulte
>> To: 'Jaroslav Mlejnek' ; users at gecode.org
>> Sent: Thursday, April 03, 2008 11:15 PM
>> Subject: RE: [gecode-users] sqrt function
>>
>>
>> Hi Jaroslav,
>> I checked: it is a bug in sqrt (it was not incorrect but too weak)! So
>> what
>> it does for sqrt(25) is that it  believes that it is between 4..5 ;-(
>> Unluckily, both the propagator and its test was buggy and cancelled each
>> other out;-) That's why this one escaped us.
>> The assertion you see is that you use val() on a variable not yet 
>> assigned
>> due to the bug.
>> I fixed it in the trunk.
>>
>> Thank you!
>> Christian
>>
>> --
>> Christian Schulte, www.ict.kth.se/~cschulte/
>>
>> From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On 
>> Behalf
>> Of Jaroslav Mlejnek
>> Sent: Thursday, April 03, 2008 7:50 PM
>> To: users at gecode.org
>> Subject: [gecode-users] sqrt function
>>
>> Hi!
>>
>> I am using C++ Gecode Library in my school project and I am very 
>> satisfied
>> with it. But I would like to use an arithmetic function "sqrt" and I 
>> think
>> it doesn't work well. In code:
>>
>>
>> defining CSP (x is class global, y is constructor local):
>>
>> IntVar x (this, 0, Int::Limits::max), y (this, 0, Int::Limits::max);
>> rel(this, y, IRT_EQ, 25);
>> rel(this, x, IRT_EQ, Gecode::sqrt(this, y));
>>
>>
>> printing solution (like Gecode examples):
>> cout << x.val() << endl;
>>
>>
>> There is in printing solution method an assert (debug) error instead of
>> solution number 5. But when I use "similar" function "sqr", it works fine
>> (or as I expect), so the solution is 625.
>>
>> Is this bug in sqrt function or sqrt function has some special way how to
>> use it? I am using Gecode since version 1.1.0, my current version is the
>> newest  2.1.1.
>>
>> Thanks a lot for your answer,
>>
>> Jaroslav Mlejnek
>> Faculty of Mathematics and Physics
>> Charles University, Prague
>> Czech Republic
>>
>>
>>
>
> 





From banerjed at rsise.anu.edu.au  Sat Apr  5 15:18:38 2008
From: banerjed at rsise.anu.edu.au (Debdeep Banerjee)
Date: Sun, 06 Apr 2008 00:18:38 +1100
Subject: [gecode-users] Custom branching and Custom Propagator
In-Reply-To: <C63B4654-BDED-4873-8AC3-7A94E88E2DB4@ps.uni-sb.de>
References: <47F70BAE.1020907@rsise.anu.edu.au>
	<C63B4654-BDED-4873-8AC3-7A94E88E2DB4@ps.uni-sb.de>
Message-ID: <47F77C2E.4030803@rsise.anu.edu.au>

Guido Tack wrote:
> Debdeep Banerjee wrote:
>
>> Hi,
>> I am using my own propagator and branching. But when I am using my
>> branching ( via post()  method) the propagator is not working. But if I
>> use the gecode branching method ( branch() ) then the propagator works.
>> I have checked the custom branching.....the methods ( status,
>> description , commit ) are called from the DFS Search engine, but the
>> propagator did not propagate.
>>
>> What would be the reason ?
>
> Perhaps your propagator does not respond to the modification events 
> generated by your custom branching, but to those from the standard 
> branchings.  E.g., the standard INT_VAL_MIN branching always assigns a 
> variable on the left branch, and that triggers propagators registered 
> for the PC_INT_VAL propagation condition.  If you registered for 
> PC_INT_VAL, but your branching does not assign variables (it might 
> only partition the domain, for instance), then your propagator won't 
> be.  That's just a guess, of course.
>
> Guido
>
Hi,
  I still couldn't able to find out the problem. So I will give some 
details of my code.


My propagator looks like the following

CSPPropagator::CSPPropagator(Gecode::Space* home, ViewIntArray& arr)
  : Gecode::NaryPropagator< Gecode::Int::IntView, 
Gecode::Int::PC_INT_VAL>(home, arr)

Where  ==> typedef Gecode::ViewArray<Gecode::Int::IntView> *ViewIntArray*;

My Branching looks like

CSPBranch::CSPBranch(Gecode::Space* home, ViewIntArray& xv)
      : Gecode::Branching(home)
      , x(xv)
      , pos(-1)
      , val(-1)
    {  }

The commit method looks like

 Gecode::ExecStatus CSPBranch::commit(Gecode::Space* home, const 
Gecode::BranchingDesc* b, unsigned int a)
  {
   
    const Gecode::PosValDesc<int,2>* desc = static_cast <const 
Gecode::PosValDesc<int,2>* > (b);
   
     
    if (a)
      return Gecode::me_failed(x[desc->pos()].nq(home, desc->val())) ? 
Gecode::ES_FAILED : Gecode::ES_OK;
    else
      return Gecode::me_failed(x[desc->pos()].eq(home, desc->val())) ? 
Gecode::ES_FAILED : Gecode::ES_OK;
  }

I have a class called " CSPInstance" which extends the Gecode::Space 
class. The code inside the constructor has the following line in the 
respective order

 Gecode::IntVarArgs arg_array(transitions); [ transitions == > 
Gecode::IntVarArray ]

 Gecode::ViewArray<Gecode::Int::IntView> trans_array(this, arg_array);
   
 CSPPropagator::post(this, trans_array);
      
 CSPBranch::post(this, trans_array);


After commit, the propagators are not propagating.

I have attached the three main files with this email. Any help will be 
greatly appreciated.

-- 
Debdeep Banerjee
PhD Candidate
CSL/RSISE/NICTA
Australian National University
Email: debdeep.banerjee at rsise.anu.edu.au
Web:http://rsise.anu.edu.au/~banerjed


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.ps.uni-sb.de/pipermail/users/attachments/20080406/99ea4cd3/attachment.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: cspbranch.cc
Type: text/x-c++src
Size: 3229 bytes
Desc: not available
URL: <http://www.ps.uni-sb.de/pipermail/users/attachments/20080406/99ea4cd3/attachment.cc>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: cspinstance.cc
Type: text/x-c++src
Size: 2444 bytes
Desc: not available
URL: <http://www.ps.uni-sb.de/pipermail/users/attachments/20080406/99ea4cd3/attachment-0001.cc>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: csppropagator.cc
Type: text/x-c++src
Size: 16313 bytes
Desc: not available
URL: <http://www.ps.uni-sb.de/pipermail/users/attachments/20080406/99ea4cd3/attachment-0002.cc>

From banerjed at rsise.anu.edu.au  Sun Apr  6 14:37:54 2008
From: banerjed at rsise.anu.edu.au (Debdeep Banerjee)
Date: Sun, 06 Apr 2008 22:37:54 +1000
Subject: [gecode-users] Please discard my last message
Message-ID: <47F8C422.7060703@rsise.anu.edu.au>

hi,
 Please discard my last message. I have fixed the problem.....:)

With regards
Debdeep

-- 
Debdeep Banerjee
PhD Candidate
CSL/RSISE/NICTA
Australian National University
Email: debdeep.banerjee at rsise.anu.edu.au
Web:http://rsise.anu.edu.au/~banerjed





From cschulte at kth.se  Sun Apr  6 21:57:56 2008
From: cschulte at kth.se (Christian Schulte)
Date: Sun, 6 Apr 2008 21:57:56 +0200
Subject: [gecode-users] Custom branching and Custom Propagator
In-Reply-To: <47F77C2E.4030803@rsise.anu.edu.au>
References: <47F70BAE.1020907@rsise.anu.edu.au>	<C63B4654-BDED-4873-8AC3-7A94E88E2DB4@ps.uni-sb.de>
	<47F77C2E.4030803@rsise.anu.edu.au>
Message-ID: <002001c89820$82f4b5f0$88de21d0$@se>

Did you execute status()? Propagation in Gecode is lazy, only if you execute
status() the propagators will actually run.

 

Christian

 

--

Christian Schulte, www.ict.kth.se/~cschulte/

 

From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf
Of Debdeep Banerjee
Sent: Saturday, April 05, 2008 3:19 PM
To: Guido Tack
Cc: users at gecode.org
Subject: Re: [gecode-users] Custom branching and Custom Propagator

 

Guido Tack wrote: 

Debdeep Banerjee wrote: 




Hi, 
I am using my own propagator and branching. But when I am using my 
branching ( via post()  method) the propagator is not working. But if I 
use the gecode branching method ( branch() ) then the propagator works. 
I have checked the custom branching.....the methods ( status, 
description , commit ) are called from the DFS Search engine, but the 
propagator did not propagate. 

What would be the reason ? 


Perhaps your propagator does not respond to the modification events
generated by your custom branching, but to those from the standard
branchings.  E.g., the standard INT_VAL_MIN branching always assigns a
variable on the left branch, and that triggers propagators registered for
the PC_INT_VAL propagation condition.  If you registered for PC_INT_VAL, but
your branching does not assign variables (it might only partition the
domain, for instance), then your propagator won't be.  That's just a guess,
of course. 

Guido 

Hi,
  I still couldn't able to find out the problem. So I will give some details
of my code.


My propagator looks like the following

CSPPropagator::CSPPropagator(Gecode::Space* home, ViewIntArray& arr)
  : Gecode::NaryPropagator< Gecode::Int::IntView,
Gecode::Int::PC_INT_VAL>(home, arr)

Where  ==> typedef Gecode::ViewArray<Gecode::Int::IntView> ViewIntArray;

My Branching looks like

CSPBranch::CSPBranch(Gecode::Space* home, ViewIntArray& xv)
      : Gecode::Branching(home)
      , x(xv)
      , pos(-1)
      , val(-1)
    {  }

The commit method looks like

 Gecode::ExecStatus CSPBranch::commit(Gecode::Space* home, const
Gecode::BranchingDesc* b, unsigned int a)
  {
    
    const Gecode::PosValDesc<int,2>* desc = static_cast <const
Gecode::PosValDesc<int,2>* > (b);
    
      
    if (a)
      return Gecode::me_failed(x[desc->pos()].nq(home, desc->val())) ?
Gecode::ES_FAILED : Gecode::ES_OK;
    else
      return Gecode::me_failed(x[desc->pos()].eq(home, desc->val())) ?
Gecode::ES_FAILED : Gecode::ES_OK;
  }

I have a class called " CSPInstance" which extends the Gecode::Space class.
The code inside the constructor has the following line in the respective
order

 Gecode::IntVarArgs arg_array(transitions); [ transitions == >
Gecode::IntVarArray ]

 Gecode::ViewArray<Gecode::Int::IntView> trans_array(this, arg_array);
    
 CSPPropagator::post(this, trans_array);
       
 CSPBranch::post(this, trans_array);


After commit, the propagators are not propagating.

I have attached the three main files with this email. Any help will be
greatly appreciated.



-- 
Debdeep Banerjee
PhD Candidate
CSL/RSISE/NICTA
Australian National University
Email: debdeep.banerjee at rsise.anu.edu.au
Web:http://rsise.anu.edu.au/~banerjed
 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.ps.uni-sb.de/pipermail/users/attachments/20080406/a713d3af/attachment.htm>

From malcolmr at cse.unsw.edu.au  Mon Apr  7 06:53:29 2008
From: malcolmr at cse.unsw.edu.au (Malcolm Ryan)
Date: Mon, 7 Apr 2008 14:53:29 +1000
Subject: [gecode-users] Controlling memory use
In-Reply-To: <000001c893c5$ab50d1a0$01f274e0$@se>
References: <C4167847.B27%cschulte@kth.se>
	<CF188298-D10C-443F-A2F0-93935852787D@cse.unsw.edu.au>
	<000001c893c5$ab50d1a0$01f274e0$@se>
Message-ID: <DEE8FEFB-B5BE-4286-8DB8-CAE85E073F8B@cse.unsw.edu.au>


On 01/04/2008, at 5:57 PM, Christian Schulte wrote:
> Yes, as said only copy the variables you consider important for your
> solution, the other variables are managed automatically and will  
> kept only
> if needed.

Can I do the reverse and only add variables to the space as they  
become relevant?

> If the tree is deep and there is little failure, be aggressive with  
> the
> copying recomputation (called c_d): try fifty or more for you  
> example. This
> controls how often a copy is created (so every c_d search steps). To  
> protect
> from pathological behavior you can set the adaptive recomputation  
> distance
> (called a_d): try ten or so. This controls behavior when failure  
> occurs:
> when a space fails it will create intermediate copies to speed up  
> further
> failures (it is likely that when search fails once it will fail  
> often, as
> most likely not the last branch is wrong but some branch higher up  
> in the
> tree).

I've tried this and managed to bring the sizes down a bit. After  
making a couple of changes to prune unnecessary variables, I now have  
the following results for a 'small' problem with 1273 variables:

Clones: 43
Commits: 326
Fails: 1
Propagates: 658217

C_d    A_d    Memory (Mb)
8      2      210.6
50     10      45.1
100    10      30.1
200    10      21.9

This seems to improve things quite a bit, but I'm still somewhat  
disturbed by the size. I suspect that a lot of it may be accounted for  
by a large number of BExprs, which I believe create 'implicit'  
variables. Is that correct?

> For your particular example, I would really suspect some other  
> memory leak
> in Gecode/J: not only has your problem no search but it also has  
> almost no
> propagation.

I agree that the crash I experienced was probably due to a memory  
leak, but the memory figures I quote above are those returned by  
Statistics.getMemory()? Am I right in thinking that they represent  
just the usage of the C++ engine?

With this memory usage being so large, there is no way I would be able  
to solve a 'large' instance of my problem. Do you have any guidelines  
for most efficient memory use?

Malcolm




From filip.konvicka at logis.cz  Mon Apr  7 08:22:19 2008
From: filip.konvicka at logis.cz (=?UTF-8?B?RmlsaXAgS29udmnEjWth?=)
Date: Mon, 07 Apr 2008 08:22:19 +0200
Subject: [gecode-users] Extending Integer Variable
In-Reply-To: <000601c89562$bbc124b0$33436e10$@se>
References: <200804021608.00188.Vincent.Barichard@univ-angers.fr>
	<000601c89562$bbc124b0$33436e10$@se>
Message-ID: <ftceis$nd8$1@ger.gmane.org>

> let me first elaborate a little bit how Gecode's variables and propagators
> are structured before I actually attempt to give an answer.
...
> What do you want to do? Do you think it me be generally useful to be
> included in Gecode anyway?

Hi,

I am currently thinking of implementing floating-point-based variables 
(maybe based on Boost.Interval), so thanks for the summary :-)

Anyway, before I decided that I need floating-point numbers, I was 
thinking why you can't have "long long"-based variables when you already 
have IntVars. On 64bit platforms, long long might be an interesting 
choice IMO. But I realize that if that should be a part of Gecode, it 
would probably mean adding template parameters to many classes/functions 
and maybe it would make things less understandable. But then, if it's 
only restricted to integral types, who knows.... the point is that 
there's a lot of work done for the IntVars, so it'd be great to reuse it.

Regards,
Filip




From cschulte at kth.se  Mon Apr  7 21:52:55 2008
From: cschulte at kth.se (Christian Schulte)
Date: Mon, 7 Apr 2008 21:52:55 +0200
Subject: [gecode-users] Controlling memory use
In-Reply-To: <DEE8FEFB-B5BE-4286-8DB8-CAE85E073F8B@cse.unsw.edu.au>
References: <C4167847.B27%cschulte@kth.se>	<CF188298-D10C-443F-A2F0-93935852787D@cse.unsw.edu.au>	<000001c893c5$ab50d1a0$01f274e0$@se>
	<DEE8FEFB-B5BE-4286-8DB8-CAE85E073F8B@cse.unsw.edu.au>
Message-ID: <000301c898e8$fa993b80$efcbb280$@se>

As I have no idea what's inside your model I can't say a thing. Do you store
BExpr somewhere? What other datastructures do you use? How many and which
propagators?

Yes, Statistics.getMemory() refers to the C++ memory.

Christian

--
Christian Schulte, www.ict.kth.se/~cschulte/


-----Original Message-----
From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf
Of Malcolm Ryan
Sent: Monday, April 07, 2008 6:53 AM
To: gecode list
Subject: Re: [gecode-users] Controlling memory use


On 01/04/2008, at 5:57 PM, Christian Schulte wrote:
> Yes, as said only copy the variables you consider important for your
> solution, the other variables are managed automatically and will  
> kept only
> if needed.

Can I do the reverse and only add variables to the space as they  
become relevant?

> If the tree is deep and there is little failure, be aggressive with  
> the
> copying recomputation (called c_d): try fifty or more for you  
> example. This
> controls how often a copy is created (so every c_d search steps). To  
> protect
> from pathological behavior you can set the adaptive recomputation  
> distance
> (called a_d): try ten or so. This controls behavior when failure  
> occurs:
> when a space fails it will create intermediate copies to speed up  
> further
> failures (it is likely that when search fails once it will fail  
> often, as
> most likely not the last branch is wrong but some branch higher up  
> in the
> tree).

I've tried this and managed to bring the sizes down a bit. After  
making a couple of changes to prune unnecessary variables, I now have  
the following results for a 'small' problem with 1273 variables:

Clones: 43
Commits: 326
Fails: 1
Propagates: 658217

C_d    A_d    Memory (Mb)
8      2      210.6
50     10      45.1
100    10      30.1
200    10      21.9

This seems to improve things quite a bit, but I'm still somewhat  
disturbed by the size. I suspect that a lot of it may be accounted for  
by a large number of BExprs, which I believe create 'implicit'  
variables. Is that correct?

> For your particular example, I would really suspect some other  
> memory leak
> in Gecode/J: not only has your problem no search but it also has  
> almost no
> propagation.

I agree that the crash I experienced was probably due to a memory  
leak, but the memory figures I quote above are those returned by  
Statistics.getMemory()? Am I right in thinking that they represent  
just the usage of the C++ engine?

With this memory usage being so large, there is no way I would be able  
to solve a 'large' instance of my problem. Do you have any guidelines  
for most efficient memory use?

Malcolm


_______________________________________________
Gecode users mailing list
users at gecode.org
https://www.gecode.org/mailman/listinfo/gecode-users




From cschulte at kth.se  Mon Apr  7 21:56:12 2008
From: cschulte at kth.se (Christian Schulte)
Date: Mon, 7 Apr 2008 21:56:12 +0200
Subject: [gecode-users] Extending Integer Variable
In-Reply-To: <ftceis$nd8$1@ger.gmane.org>
References: <200804021608.00188.Vincent.Barichard@univ-angers.fr>	<000601c89562$bbc124b0$33436e10$@se>
	<ftceis$nd8$1@ger.gmane.org>
Message-ID: <000601c898e9$6efb8b40$4cf2a1c0$@se>

Yes, you are right. Also IntVars with unlimited precision using gmp... All
doable, the only thing is that we sort out which occurrence of "int" refers
to variables and which refer to other occurrences.

The problem with 64 bit integers, though is that we have to have a datatype
that is bigger than the data type of variables. Now we use double for that
purpose. With 64 bit integers we might resort to 128 bit integers...

If you implement FloatVars, please keep us posted. If you want to contribute
to Gecode we would be more than happy to help!

All the best
Christian

--
Christian Schulte, www.ict.kth.se/~cschulte/


-----Original Message-----
From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf
Of Filip Konvicka
Sent: Monday, April 07, 2008 8:22 AM
To: users at gecode.org
Subject: Re: [gecode-users] Extending Integer Variable

> let me first elaborate a little bit how Gecode's variables and propagators
> are structured before I actually attempt to give an answer.
...
> What do you want to do? Do you think it me be generally useful to be
> included in Gecode anyway?

Hi,

I am currently thinking of implementing floating-point-based variables 
(maybe based on Boost.Interval), so thanks for the summary :-)

Anyway, before I decided that I need floating-point numbers, I was 
thinking why you can't have "long long"-based variables when you already 
have IntVars. On 64bit platforms, long long might be an interesting 
choice IMO. But I realize that if that should be a part of Gecode, it 
would probably mean adding template parameters to many classes/functions 
and maybe it would make things less understandable. But then, if it's 
only restricted to integral types, who knows.... the point is that 
there's a lot of work done for the IntVars, so it'd be great to reuse it.

Regards,
Filip


_______________________________________________
Gecode users mailing list
users at gecode.org
https://www.gecode.org/mailman/listinfo/gecode-users




From filip.konvicka at logis.cz  Tue Apr  8 00:10:40 2008
From: filip.konvicka at logis.cz (=?ISO-8859-2?Q?Filip_Konvi=E8ka?=)
Date: Tue, 08 Apr 2008 00:10:40 +0200
Subject: [gecode-users] Extending Integer Variable
In-Reply-To: <000601c898e9$6efb8b40$4cf2a1c0$@se>
References: <200804021608.00188.Vincent.Barichard@univ-angers.fr>	<000601c89562$bbc124b0$33436e10$@se>
	<ftceis$nd8$1@ger.gmane.org> <000601c898e9$6efb8b40$4cf2a1c0$@se>
Message-ID: <47FA9BE0.1090500@logis.cz>


> Yes, you are right. Also IntVars with unlimited precision using gmp... All
> doable, the only thing is that we sort out which occurrence of "int" refers
> to variables and which refer to other occurrences.
>   
Sure, but IMHO that is the easy part. Keeping the templates reasonably 
understandable and yet still working together is more of a challenge in 
my experience... :-)
> The problem with 64 bit integers, though is that we have to have a datatype
> that is bigger than the data type of variables. Now we use double for that
> purpose. With 64 bit integers we might resort to 128 bit integers...
>   
I can almost recall seeing "double" being used for arithmetics in 
integer constraint filters - are you referring to that? It was a bit 
surprising to see that - I'd expect to see long long used instead (but, 
in terms of portability, double is perhaps a safer choice). I did not 
make any measurements, but I'd expect long long to be much faster. In 
fact, I'm using long long for int-based fixed-point arithmetics. For 
long long-based fixed-point arithmetics (I need both these), I'm doing 
"in-place" multiplication, still using long long for products, but done 
"per partes" (it's a bit tricky with fixed-point arithmetics, but much 
easier with integers).

Anyway, is there a 128-bit integer available somewhere? I think that on 
x64, the only C type that changes size is "long int" - from 32 to 64 
bits. "int" stays 32bit, and "long long" stays 64bit.
> If you implement FloatVars, please keep us posted. If you want to contribute
> to Gecode we would be more than happy to help!
>   
I'm happy to hear that. I do not have a precise plan yet, but I do need 
such variables. (I'm using IntVars now, but the model has some 
limitations because of that.) I first need to make some experiments with 
Boost.Intervals, because I think I'll need some rounding-error 
propagation - so it would be nice to reuse some existing work....and I 
already use Boost, so that would be the ideal choice. My intention is to 
do some simple implementation of FloatVars and some very basic 
propagators for addition, multiplication and relations (I need to be 
able to model basic arithmetic constraints).

Cheers,
Filip

> All the best
> Christian
>
> --
> Christian Schulte, www.ict.kth.se/~cschulte/
>
>
> -----Original Message-----
> From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf
> Of Filip Konvicka
> Sent: Monday, April 07, 2008 8:22 AM
> To: users at gecode.org
> Subject: Re: [gecode-users] Extending Integer Variable
>
>   
>> let me first elaborate a little bit how Gecode's variables and propagators
>> are structured before I actually attempt to give an answer.
>>     
> ...
>   
>> What do you want to do? Do you think it me be generally useful to be
>> included in Gecode anyway?
>>     
>
> Hi,
>
> I am currently thinking of implementing floating-point-based variables 
> (maybe based on Boost.Interval), so thanks for the summary :-)
>
> Anyway, before I decided that I need floating-point numbers, I was 
> thinking why you can't have "long long"-based variables when you already 
> have IntVars. On 64bit platforms, long long might be an interesting 
> choice IMO. But I realize that if that should be a part of Gecode, it 
> would probably mean adding template parameters to many classes/functions 
> and maybe it would make things less understandable. But then, if it's 
> only restricted to integral types, who knows.... the point is that 
> there's a lot of work done for the IntVars, so it'd be great to reuse it.
>
> Regards,
> Filip
>
>
> _______________________________________________
> Gecode users mailing list
> users at gecode.org
> https://www.gecode.org/mailman/listinfo/gecode-users
>
>   




From cschulte at kth.se  Tue Apr  8 00:31:23 2008
From: cschulte at kth.se (Christian Schulte)
Date: Tue, 8 Apr 2008 00:31:23 +0200
Subject: [gecode-users] Extending Integer Variable
In-Reply-To: <47FA9BE0.1090500@logis.cz>
References: <200804021608.00188.Vincent.Barichard@univ-angers.fr>	<000601c89562$bbc124b0$33436e10$@se>
	<ftceis$nd8$1@ger.gmane.org> <000601c898e9$6efb8b40$4cf2a1c0$@se>
	<47FA9BE0.1090500@logis.cz>
Message-ID: <000001c898ff$1cd73f10$5685bd30$@se>

Well, nothing is easy ;-)

As it comes to double one should keep in mind that most CPUs have parallel
functional units for floats: so, that just runs in parallel to the integer
and address arithmetic. I once did a little profiling to see what effect it
has for double and it was considerably less than what I had expected. The
big problem with doubles start if you store them in memory, bandwidth and
alignment are the typical problems. But for intermediate results that should
be okay. But I agree, 64 bit should also be fine. The reason why we didn't
go for that is that I looked at the assembly code that was generated by gcc
at that time (maybe three years ago)... It just made me cry. As soon as long
long becomes C++ standard (maybe relying on the de-facto C++0x standard -
most likely C++09 - would already be good enough) we will go for 64 bits.
The main motivation for us is that we use double only for integers which
limits precision to 48 bits.

128 bits can be tinkered okay. Either rely on compiler extensions and if
they are not available hack it yourself. 

Yes, however small the set of propagators might be, we will be interested. I
would believe that much of the IntVar stuff can serve as a good starting
point for you. If one gets really serious about float intervals, it becomes
tricky: it requires symbolic representation of the arithmetic expressions as
well as variable centered propagation. Quite different.

Watch out: for some x64 it is still that long is 32 bits (Windows). On
others it is 64 (MacOS, Linux?). Only long long is 64 at least.

Cheers
Christian

--
Christian Schulte, www.ict.kth.se/~cschulte/

-----Original Message-----
From: Filip Konvi?ka [mailto:filip.konvicka at logis.cz] 
Sent: Tuesday, April 08, 2008 12:11 AM
To: cschulte at kth.se
Cc: users at gecode.org
Subject: Re: [gecode-users] Extending Integer Variable


> Yes, you are right. Also IntVars with unlimited precision using gmp... All
> doable, the only thing is that we sort out which occurrence of "int"
refers
> to variables and which refer to other occurrences.
>   
Sure, but IMHO that is the easy part. Keeping the templates reasonably 
understandable and yet still working together is more of a challenge in 
my experience... :-)
> The problem with 64 bit integers, though is that we have to have a
datatype
> that is bigger than the data type of variables. Now we use double for that
> purpose. With 64 bit integers we might resort to 128 bit integers...
>   
I can almost recall seeing "double" being used for arithmetics in 
integer constraint filters - are you referring to that? It was a bit 
surprising to see that - I'd expect to see long long used instead (but, 
in terms of portability, double is perhaps a safer choice). I did not 
make any measurements, but I'd expect long long to be much faster. In 
fact, I'm using long long for int-based fixed-point arithmetics. For 
long long-based fixed-point arithmetics (I need both these), I'm doing 
"in-place" multiplication, still using long long for products, but done 
"per partes" (it's a bit tricky with fixed-point arithmetics, but much 
easier with integers).

Anyway, is there a 128-bit integer available somewhere? I think that on 
x64, the only C type that changes size is "long int" - from 32 to 64 
bits. "int" stays 32bit, and "long long" stays 64bit.
> If you implement FloatVars, please keep us posted. If you want to
contribute
> to Gecode we would be more than happy to help!
>   
I'm happy to hear that. I do not have a precise plan yet, but I do need 
such variables. (I'm using IntVars now, but the model has some 
limitations because of that.) I first need to make some experiments with 
Boost.Intervals, because I think I'll need some rounding-error 
propagation - so it would be nice to reuse some existing work....and I 
already use Boost, so that would be the ideal choice. My intention is to 
do some simple implementation of FloatVars and some very basic 
propagators for addition, multiplication and relations (I need to be 
able to model basic arithmetic constraints).

Cheers,
Filip

> All the best
> Christian
>
> --
> Christian Schulte, www.ict.kth.se/~cschulte/
>
>
> -----Original Message-----
> From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf
> Of Filip Konvicka
> Sent: Monday, April 07, 2008 8:22 AM
> To: users at gecode.org
> Subject: Re: [gecode-users] Extending Integer Variable
>
>   
>> let me first elaborate a little bit how Gecode's variables and
propagators
>> are structured before I actually attempt to give an answer.
>>     
> ...
>   
>> What do you want to do? Do you think it me be generally useful to be
>> included in Gecode anyway?
>>     
>
> Hi,
>
> I am currently thinking of implementing floating-point-based variables 
> (maybe based on Boost.Interval), so thanks for the summary :-)
>
> Anyway, before I decided that I need floating-point numbers, I was 
> thinking why you can't have "long long"-based variables when you already 
> have IntVars. On 64bit platforms, long long might be an interesting 
> choice IMO. But I realize that if that should be a part of Gecode, it 
> would probably mean adding template parameters to many classes/functions 
> and maybe it would make things less understandable. But then, if it's 
> only restricted to integral types, who knows.... the point is that 
> there's a lot of work done for the IntVars, so it'd be great to reuse it.
>
> Regards,
> Filip
>
>
> _______________________________________________
> Gecode users mailing list
> users at gecode.org
> https://www.gecode.org/mailman/listinfo/gecode-users
>
>   





From malcolmr at cse.unsw.edu.au  Tue Apr  8 02:45:11 2008
From: malcolmr at cse.unsw.edu.au (Malcolm Ryan)
Date: Tue, 8 Apr 2008 10:45:11 +1000
Subject: [gecode-users] independent subproblems
Message-ID: <D8F391C5-0A6E-4BA3-96B2-619469695572@cse.unsw.edu.au>

At a certain stage in my search the problem can be split into several  
independent sub-problems. If I try to solve them sequentially, then a  
failure in one of the later ones will cause fruitless backtracking in  
the earlier ones (when it really needs to jump all the way back to the  
first phase of the search). Does Gecode provide any kind of mechanism  
for handling this situation?

Thanks,

Malcolm



From malcolmr at cse.unsw.edu.au  Tue Apr  8 04:30:34 2008
From: malcolmr at cse.unsw.edu.au (Malcolm Ryan)
Date: Tue, 8 Apr 2008 12:30:34 +1000
Subject: [gecode-users] Subclassing JavaBrancingDesc
Message-ID: <D30C59AE-07AD-46D0-AA8E-1D30C58F7C6E@cse.unsw.edu.au>

Is there any reason why JavaBranchingDesc is final in Gecode/J? My  
problem naturally has a number of different kinds of branch  
descriptions depending on what variable they apply to. It is annoying  
to have to encode this into some arbitrary integer and then decode it  
again when I commit. It would be much nice to have a collection of  
different BranchingDesc classes each with their own commit method.

Malcolm



From Vincent.Barichard at univ-angers.fr  Tue Apr  8 09:03:46 2008
From: Vincent.Barichard at univ-angers.fr (Vincent Barichard)
Date: Tue, 8 Apr 2008 09:03:46 +0200
Subject: [gecode-users] Extending Integer Variable
In-Reply-To: <47FA9BE0.1090500@logis.cz>
References: <200804021608.00188.Vincent.Barichard@univ-angers.fr>
	<000601c898e9$6efb8b40$4cf2a1c0$@se> <47FA9BE0.1090500@logis.cz>
Message-ID: <200804080903.46499.Vincent.Barichard@univ-angers.fr>

Hi all,

Le mardi 8 avril 2008, Filip Konvi?ka a ?crit?:
>
> > If you implement FloatVars, please keep us posted. If you want to
> > contribute to Gecode we would be more than happy to help!
>
> I'm happy to hear that. I do not have a precise plan yet, but I do need
> such variables. (I'm using IntVars now, but the model has some
> limitations because of that.) I first need to make some experiments with
> Boost.Intervals, because I think I'll need some rounding-error
> propagation - so it would be nice to reuse some existing work....and I
> already use Boost, so that would be the ideal choice. My intention is to
> do some simple implementation of FloatVars and some very basic
> propagators for addition, multiplication and relations (I need to be
> able to model basic arithmetic constraints).
>

I am also interested in implementing FloatVars. I already built a solver which 
works on floating variables using the MPFR library (http://www.mpfr.org/). I 
designed some propagators 
(+,-,*,/,max,min,cos,acos,sin,atan,asin,exp,log,sqr,sqrt) which work quite 
well on my benchmarks. 
I came to GeCode recently because of all the work done for the integer and set 
variables, but I will be glad to share my code with anyone who is interested 
in implementing FloatVars in GeCode.

Cheers,
Vincent

-- 
Vincent Barichard ? ? ? ?Universit? d'Angers (LERIA)
Tel: 02 41 73 52 06 ? ? ?D?partement Informatique
Fax: 02 41 73 50 73 ? ? ?H203



From filip.konvicka at logis.cz  Tue Apr  8 09:52:54 2008
From: filip.konvicka at logis.cz (=?UTF-8?B?RmlsaXAgS29udmnEjWth?=)
Date: Tue, 08 Apr 2008 09:52:54 +0200
Subject: [gecode-users] Extending Integer Variable
In-Reply-To: <200804080903.46499.Vincent.Barichard@univ-angers.fr>
References: <200804021608.00188.Vincent.Barichard@univ-angers.fr>	<000601c898e9$6efb8b40$4cf2a1c0$@se>
	<47FA9BE0.1090500@logis.cz>
	<200804080903.46499.Vincent.Barichard@univ-angers.fr>
Message-ID: <47FB2456.3060508@logis.cz>

> I am also interested in implementing FloatVars. I already built a solver which 
> works on floating variables using the MPFR library (http://www.mpfr.org/). I 
> designed some propagators 
> (+,-,*,/,max,min,cos,acos,sin,atan,asin,exp,log,sqr,sqrt) which work quite 
> well on my benchmarks. 
> I came to GeCode recently because of all the work done for the integer and set 
> variables, but I will be glad to share my code with anyone who is interested 
> in implementing FloatVars in GeCode.

MPFR is nice, but unfortunately it is licensed under LGPL, which I'm 
trying to avoid. I think that for my purposes Boost.Intervals operating 
on 'double' should be sufficient.

But let's not waste effort on implementing FloatVar twice! I have 
limited time for all this myself, but with the help of my colleagues I 
think we can try to do some initial sketch implementation, while we'll 
try to make the domain implementation part parametrized, so we can 
switch between Boost.Interval, MPFR, CUDA :-D or whatever.

Personally, I am all for contributing and sharing code. From our 
company's point of view, however, we must be sure that we can actually 
benefit from that - and basing our work on LGPL code is more risky (and 
uncomfortable) for us. That's why I prefer the MIT-style licenses.

Cheers,
Filip




From filip.konvicka at logis.cz  Tue Apr  8 10:13:07 2008
From: filip.konvicka at logis.cz (=?UTF-8?B?RmlsaXAgS29udmnEjWth?=)
Date: Tue, 08 Apr 2008 10:13:07 +0200
Subject: [gecode-users] Extending Integer Variable
In-Reply-To: <000001c898ff$1cd73f10$5685bd30$@se>
References: <200804021608.00188.Vincent.Barichard@univ-angers.fr>	<000601c89562$bbc124b0$33436e10$@se>	<ftceis$nd8$1@ger.gmane.org>
	<000601c898e9$6efb8b40$4cf2a1c0$@se>	<47FA9BE0.1090500@logis.cz>
	<000001c898ff$1cd73f10$5685bd30$@se>
Message-ID: <ftf9en$rc4$1@ger.gmane.org>


> Well, nothing is easy ;-)
> 
> As it comes to double one should keep in mind that most CPUs have parallel
> functional units for floats: so, that just runs in parallel to the integer
> and address arithmetic. I once did a little profiling to see what effect it
> has for double and it was considerably less than what I had expected. The
> big problem with doubles start if you store them in memory, bandwidth and
> alignment are the typical problems. But for intermediate results that should
> be okay. But I agree, 64 bit should also be fine. The reason why we didn't
> go for that is that I looked at the assembly code that was generated by gcc
> at that time (maybe three years ago)... It just made me cry. As soon as long
> long becomes C++ standard (maybe relying on the de-facto C++0x standard -
> most likely C++09 - would already be good enough) we will go for 64 bits.
> The main motivation for us is that we use double only for integers which
> limits precision to 48 bits.

:-) I think I've seen some discussions on the gcc mailing lists 
concerning long long arithmetics, maybe some year ago or so...so maybe 
it is better now.

> 128 bits can be tinkered okay. Either rely on compiler extensions and if
> they are not available hack it yourself. 
> 
> Yes, however small the set of propagators might be, we will be interested. I
> would believe that much of the IntVar stuff can serve as a good starting
> point for you. If one gets really serious about float intervals, it becomes
> tricky: it requires symbolic representation of the arithmetic expressions as
> well as variable centered propagation. Quite different.

That's interesting. (Read: I don't understand that :-)) What is 
variable-centered propagation? Do you have any papers about the matter? 
The only implementation of floatvars I've seen so far is the XRI library 
for Mozart, so I was not thinking about doing anything special yet.

I can see that symbolic representation can be useful, but it depends on 
what quality/performance ratio you target. Personally I target 
performance (the tradeoff I see here is that I might not get bit-precise 
filtering).

> Watch out: for some x64 it is still that long is 32 bits (Windows). On
> others it is 64 (MacOS, Linux?). Only long long is 64 at least.

Yes, I was referring to gcc. On Windows things tend to be 
backwards-compatible as *long* as possible :-D

Cheers,
Filip




From ggutierrez at cic.puj.edu.co  Tue Apr  8 15:46:18 2008
From: ggutierrez at cic.puj.edu.co (Gustavo Gutierrez)
Date: Tue, 8 Apr 2008 08:46:18 -0500
Subject: [gecode-users] Extending Integer Variable
In-Reply-To: <47FB2456.3060508@logis.cz>
References: <200804021608.00188.Vincent.Barichard@univ-angers.fr>
	<000601c898e9$6efb8b40$4cf2a1c0$@se> <47FA9BE0.1090500@logis.cz>
	<200804080903.46499.Vincent.Barichard@univ-angers.fr>
	<47FB2456.3060508@logis.cz>
Message-ID: <e7b0e5a40804080646k7f5570c5xa698b84e6f747b6b@mail.gmail.com>

On Tue, Apr 8, 2008 at 2:52 AM, Filip Konvi?ka <filip.konvicka at logis.cz>
wrote:

> > I am also interested in implementing FloatVars. I already built a solver
> which
> > works on floating variables using the MPFR library (http://www.mpfr.org/).
> I
> > designed some propagators
> > (+,-,*,/,max,min,cos,acos,sin,atan,asin,exp,log,sqr,sqrt) which work
> quite
> > well on my benchmarks.
> > I came to GeCode recently because of all the work done for the integer
> and set
> > variables, but I will be glad to share my code with anyone who is
> interested
> > in implementing FloatVars in GeCode.
>
> MPFR is nice, but unfortunately it is licensed under LGPL, which I'm
> trying to avoid. I think that for my purposes Boost.Intervals operating
> on 'double' should be sufficient.
>
> But let's not waste effort on implementing FloatVar twice! I have
> limited time for all this myself, but with the help of my colleagues I
> think we can try to do some initial sketch implementation, while we'll
> try to make the domain implementation part parametrized, so we can
> switch between Boost.Interval, MPFR, CUDA :-D or whatever.
>


There are some other implementations that may result useful. One is the
interval library that comes with boost (already mentioned), also there is an
implementation by T. Hickey called smath (
http://interval.sourceforge.net/interval/prolog/clip/clip/smath/README.html)
and a complete solver for continous domains called elisa (
http://sourceforge.net/projects/elisa/).

Smath provides a wide set of narrowing operator implementations and claims
to be correct, i have used it before and its quite good. Elisa comes with
different representations for constraints on continous domains (natural
interval form, newton interval form, etc.) and that makes it promising.
Boost.interval is the one that best deal with portability which is a matter
when dealing with floating point numbers.

I think there are very good sources  of information (papers and
implementations) and gecode could benefit of all of them.


>
> Personally, I am all for contributing and sharing code. From our
> company's point of view, however, we must be sure that we can actually
> benefit from that - and basing our work on LGPL code is more risky (and
> uncomfortable) for us. That's why I prefer the MIT-style licenses.
>
> Cheers,
> Filip
>
>
> _______________________________________________
> Gecode users mailing list
> users at gecode.org
> https://www.gecode.org/mailman/listinfo/gecode-users
>



-- 
Gustavo Gutierrez
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.ps.uni-sb.de/pipermail/users/attachments/20080408/d26dfed8/attachment.htm>

From cschulte at kth.se  Tue Apr  8 17:54:52 2008
From: cschulte at kth.se (Christian Schulte)
Date: Tue, 08 Apr 2008 17:54:52 +0200
Subject: [gecode-users] Extending Integer Variable
In-Reply-To: <ftf9en$rc4$1@ger.gmane.org>
Message-ID: <C42161EC.BF9%cschulte@kth.se>

A good overview is provided by the chapter "Continous and Interval
Constraints" by Benhamou and Granvilliers in the Handbook of Constraint
Programming. Maybe you can find the chapter online.

Cheers
Christian


On 4/8/08 10:13 AM, "Filip Konvi?ka" <filip.konvicka at logis.cz> wrote:

> 
>> Well, nothing is easy ;-)
>> 
>> As it comes to double one should keep in mind that most CPUs have parallel
>> functional units for floats: so, that just runs in parallel to the integer
>> and address arithmetic. I once did a little profiling to see what effect it
>> has for double and it was considerably less than what I had expected. The
>> big problem with doubles start if you store them in memory, bandwidth and
>> alignment are the typical problems. But for intermediate results that should
>> be okay. But I agree, 64 bit should also be fine. The reason why we didn't
>> go for that is that I looked at the assembly code that was generated by gcc
>> at that time (maybe three years ago)... It just made me cry. As soon as long
>> long becomes C++ standard (maybe relying on the de-facto C++0x standard -
>> most likely C++09 - would already be good enough) we will go for 64 bits.
>> The main motivation for us is that we use double only for integers which
>> limits precision to 48 bits.
> 
> :-) I think I've seen some discussions on the gcc mailing lists
> concerning long long arithmetics, maybe some year ago or so...so maybe
> it is better now.
> 
>> 128 bits can be tinkered okay. Either rely on compiler extensions and if
>> they are not available hack it yourself.
>> 
>> Yes, however small the set of propagators might be, we will be interested. I
>> would believe that much of the IntVar stuff can serve as a good starting
>> point for you. If one gets really serious about float intervals, it becomes
>> tricky: it requires symbolic representation of the arithmetic expressions as
>> well as variable centered propagation. Quite different.
> 
> That's interesting. (Read: I don't understand that :-)) What is
> variable-centered propagation? Do you have any papers about the matter?
> The only implementation of floatvars I've seen so far is the XRI library
> for Mozart, so I was not thinking about doing anything special yet.
> 
> I can see that symbolic representation can be useful, but it depends on
> what quality/performance ratio you target. Personally I target
> performance (the tradeoff I see here is that I might not get bit-precise
> filtering).
> 
>> Watch out: for some x64 it is still that long is 32 bits (Windows). On
>> others it is 64 (MacOS, Linux?). Only long long is 64 at least.
> 
> Yes, I was referring to gcc. On Windows things tend to be
> backwards-compatible as *long* as possible :-D
> 
> Cheers,
> Filip
> 
> 
> _______________________________________________
> Gecode users mailing list
> users at gecode.org
> https://www.gecode.org/mailman/listinfo/gecode-users

--
Christian Schulte, web.ict.kth.se/~cschulte/








From cschulte at kth.se  Tue Apr  8 17:56:40 2008
From: cschulte at kth.se (Christian Schulte)
Date: Tue, 08 Apr 2008 17:56:40 +0200
Subject: [gecode-users] Extending Integer Variable
In-Reply-To: <47FB2456.3060508@logis.cz>
Message-ID: <C4216258.BFA%cschulte@kth.se>

Same here, if possible we try to go for MIT style as I am not inclined to do
software where I insist what people do with it as I feel this to be
incompatible with the very idea of research.

Christian


On 4/8/08 9:52 AM, "Filip Konvi?ka" <filip.konvicka at logis.cz> wrote:

>> I am also interested in implementing FloatVars. I already built a solver
>> which 
>> works on floating variables using the MPFR library (http://www.mpfr.org/). I
>> designed some propagators
>> (+,-,*,/,max,min,cos,acos,sin,atan,asin,exp,log,sqr,sqrt) which work quite
>> well on my benchmarks.
>> I came to GeCode recently because of all the work done for the integer and
>> set 
>> variables, but I will be glad to share my code with anyone who is interested
>> in implementing FloatVars in GeCode.
> 
> MPFR is nice, but unfortunately it is licensed under LGPL, which I'm
> trying to avoid. I think that for my purposes Boost.Intervals operating
> on 'double' should be sufficient.
> 
> But let's not waste effort on implementing FloatVar twice! I have
> limited time for all this myself, but with the help of my colleagues I
> think we can try to do some initial sketch implementation, while we'll
> try to make the domain implementation part parametrized, so we can
> switch between Boost.Interval, MPFR, CUDA :-D or whatever.
> 
> Personally, I am all for contributing and sharing code. From our
> company's point of view, however, we must be sure that we can actually
> benefit from that - and basing our work on LGPL code is more risky (and
> uncomfortable) for us. That's why I prefer the MIT-style licenses.
> 
> Cheers,
> Filip
> 
> 
> _______________________________________________
> Gecode users mailing list
> users at gecode.org
> https://www.gecode.org/mailman/listinfo/gecode-users

--
Christian Schulte, web.ict.kth.se/~cschulte/








From cschulte at kth.se  Tue Apr  8 18:04:22 2008
From: cschulte at kth.se (Christian Schulte)
Date: Tue, 08 Apr 2008 18:04:22 +0200
Subject: [gecode-users] Subclassing JavaBrancingDesc
In-Reply-To: <D30C59AE-07AD-46D0-AA8E-1D30C58F7C6E@cse.unsw.edu.au>
Message-ID: <C4216426.C00%cschulte@kth.se>

The big issue is whether Gecode/J is really the right thing to use for you.
Yes, it is fairly open but no match to Gecode. All requests can be instantly
satisified for Gecode or do not even arise.

I know that C++ sounds less appealing but Gecode is first and foremost
geared to be good as a C++ library.

Gecode/J is a bastard between something that is just a Java interface to
Gecode and something that can be extended. Here the extension mechanisms had
been designed to be good enough for classroom use.

We are not really clear ourselves what the future of Gecode/J will be. I
myself plan to use Gecode directly in the next run of the CP course I teach
(this year I did not have enough time to rework the course material) as it
is actually more accessible and less trouble to install than Gecode/J. And,
it has a version of Gist that is way better than the one which ships with
Gecode/J.

The most popular route might be to castrate Gecode/J that it just becomes an
ordinary Java interface to Gecode but that functionality for writing
propagators in Java, etc will be removed.

Christian

On 4/8/08 4:30 AM, "Malcolm Ryan" <malcolmr at cse.unsw.edu.au> wrote:

> Is there any reason why JavaBranchingDesc is final in Gecode/J? My
> problem naturally has a number of different kinds of branch
> descriptions depending on what variable they apply to. It is annoying
> to have to encode this into some arbitrary integer and then decode it
> again when I commit. It would be much nice to have a collection of
> different BranchingDesc classes each with their own commit method.
> 
> Malcolm
> 
> _______________________________________________
> Gecode users mailing list
> users at gecode.org
> https://www.gecode.org/mailman/listinfo/gecode-users

--
Christian Schulte, web.ict.kth.se/~cschulte/








From tack at ps.uni-sb.de  Tue Apr  8 16:26:02 2008
From: tack at ps.uni-sb.de (Guido Tack)
Date: Tue, 8 Apr 2008 16:26:02 +0200
Subject: [gecode-users] independent subproblems
In-Reply-To: <D8F391C5-0A6E-4BA3-96B2-619469695572@cse.unsw.edu.au>
References: <D8F391C5-0A6E-4BA3-96B2-619469695572@cse.unsw.edu.au>
Message-ID: <0BAA8330-78D5-418B-ADF3-B7D82AE146C5@ps.uni-sb.de>

Malcolm,

we have been working on this kind of decomposition, you can find a  
preliminary technical report at
http://arxiv.org/abs/0712.2389

The resulting system needs some extensions to Gecode, so it is  
currently not available in Gecode directly.

Cheers,
	Guido

Malcolm Ryan wrote:

> At a certain stage in my search the problem can be split into several
> independent sub-problems. If I try to solve them sequentially, then a
> failure in one of the later ones will cause fruitless backtracking in
> the earlier ones (when it really needs to jump all the way back to the
> first phase of the search). Does Gecode provide any kind of mechanism
> for handling this situation?
>
> Thanks,
>
> Malcolm
>
> _______________________________________________
> Gecode users mailing list
> users at gecode.org
> https://www.gecode.org/mailman/listinfo/gecode-users




From malcolmr at cse.unsw.edu.au  Wed Apr  9 02:14:32 2008
From: malcolmr at cse.unsw.edu.au (Malcolm Ryan)
Date: Wed, 9 Apr 2008 10:14:32 +1000
Subject: [gecode-users] Controlling memory use
In-Reply-To: <C4216298.BFB%cschulte@kth.se>
References: <C4216298.BFB%cschulte@kth.se>
Message-ID: <E30601CF-396B-4F31-9B2D-20FD88159F9E@cse.unsw.edu.au>

On 09/04/2008, at 1:57 AM, Christian Schulte wrote:
> Malcolm,
>
> That's a lot of constraints!

Is it? I have no idea what constitutes "a lot" in this area.

Many of the constraints are actually redundant and are only used to  
improve propagation. The whole problem could just be expressed as a  
concrete plan with only the first four constraints, but this would  
require a lot more search to solve.

> But what is n?

Typical values:

Nv	100-1000
Ns	50-100
Nr	20 or more (the more we can handle the better)

Nb and Lmax depend on the problem. I usually start Nb small (around 5)  
and increase it if this value fails. Lmax depends on the size and  
types of subgraphs. I'm currently working with Lmax = 40.

I have found that I am getting much better memory usage by setting C_d  
very large (around 200). What am I trading off in this case? I presume  
this means that failures are more expensive in terms of computation  
time. Is that right?

> Is it intentional to just send
> it to me? Normally I do not reply to personal messages on Gecode.

Sorry, my mail program doesn't have a "reply to list" option, and I  
don't always remember to change the 'To' field.

Malcolm

> On 4/8/08 9:08 AM, "Malcolm Ryan" <malcolmr at cse.unsw.edu.au> wrote:
>
>> On 08/04/2008, at 5:52 AM, Christian Schulte wrote:
>>> As I have no idea what's inside your model I can't say a thing. Do
>>> you store
>>> BExpr somewhere? What other datastructures do you use? How many and
>>> which
>>> propagators?
>>
>> I've outlined the problem description below. All the boolean
>> expressions are constructed from BExprs. The only ones that are
>> expressly reified as BoolVars are those noted in the Variables
>> section. These are created because there is no BExpr which tests set
>> membership.
>>
>> Constants:
>> G = (V, E)  graph   The map
>> V   {1, Nv}   The vertices are numbered
>> E   in V^2   The edges are stored as a table
>> Nr    # robots  The number of robots
>> Ns   # subgraphs  The number of subgraphs
>> Si    subset of V, Subgraphs are sets of consecutive vertices
>> Si_min <= v <= Si_max
>> ES   in {1..Ns}^2 The adjacency betweem subgraphs as a table
>> Nb   # subplans  The size of the abstract plan
>> Lmax  maximum plan length
>>
>> Variables
>> ---------
>>
>> Concrete plans:
>> P[b][r][t] in V   The position of robot r at time t in subplan b
>> L[b]  {1, Lmax}  The length of subplan b
>>
>> Abstract Plan:
>> A[b][r]  in {1,Ns}  The subgraph occupied by robot r in subplan b
>> L_total  {1, Lmax * Nb} The total length of the plan
>>
>> In[b][r][i] bool   True if robot r is in subgraph i in subplan b
>> Pop[b][i] {0, |Si|}  The number of robots in subgraph i in subplan b
>>
>> IsHall[b][r] bool  True if robot r is in a hall subgraph in subplan b
>> HOrd[b][ri][rj] {-1, 0, 1} The ordering of ri and rj in the hall in
>> subplan b
>>
>> IsRing[b][r] bool  True if robot r is in a ring subgraph in subplan b
>> ROrd[b][ri][rj][rk] {-1,0,1} The ordering or ri, rj, rk in the ring
>> in subplan b
>>
>> Constraints
>> -----------
>>
>> Concrete plans: for all b:
>>
>> * No two robots can occupy the same vertex at the same time:
>> distinct(P[b][1][t], P[b][2][t], ..., P[b][Nr][t]) for all t
>>
>> * No two robots can occupy the same vertex on subsequent time steps:
>> distinct(P[b][1][t], ..., P[b][r][t+1], ... P[b][Nr][t]) for allt,r
>>
>> * Robots can only move between adjacent positions
>> (P[b][r][t], P[b][r][t+1]) \in E or P[b][r][t] == P[b][r][t+1]
>>
>> * No-ops can only occur at the end of the plan
>> (L[b] > t <=> \exists r : P[b][r][t-1] == Pos[b][r][t])
>>
>> Abstract plans:
>> ---------------
>>
>> for all b (except b=0 or b=Nb where appropriate)
>>
>> * Robots can only transition between adjacent subgraphs
>> (A[b][r], A[b+1][r]) \in ES
>>
>> * No-ops can only occur at the end of the plan
>> \exists r A[b+1][r] != A[b][r] --> \exists r A[b][r] != A[b-1][r]
>>
>> * Subplans are linked
>> (P[b][r][Lmax], P[b+1][r][1]) \in E or P[b][r][Lmax] == P[b+1][r][1]
>>
>> * No two robots can occupy the same vertex on subsequent time steps:
>> distinct(P[b][1][Lmax], ..., P[b+1][r][1], ... P[b][Nr][Lmax]) for
>> all r
>>
>> * The abstract plan step constrains the domain of the corresponding
>> subplan
>> (A[b][r] == i) <=> (P[b][r][t] \in Si)
>>
>> * When a subgraph is full, none of its inhabitants can move
>> Pop[b][s] == count(r, A[b][r] == s)
>> Pop[b][s] = |Si| and A[b][r] == s --> P[b][r][t] == P[b][r][0]
>>
>> * Robots in halls must maintain their ordering
>> A[b][ri] == A[b][rj] && isHall(A[b][ri]) <=> HOrd[b][ri][rj] != 0
>> HOrd[b][ri][rj] == -1 --> P[b][ri][t] < P[b][rj][t] for all t
>> HOrd[b][ri][rj] ==  1 --> P[b][ri][t] > P[b][rj][t] for all t
>>
>> * Hall orderings persist across subplans if neither robot  
>> transitions.
>> A[b-1][ri] == A[b][ri] && A[b-1][rj] == A[b][rj]
>> --> HOrd[b-1][ri][rj] == HOrd[b][ri][rj]
>>
>> * Robots in rings must maintain their ordering (clockwise or
>> anticlockwise)
>> A[b][ri] == A[b][rj] && A[b][ri] == A[b][rk] && isRing(A[b][ri])
>> <=> Ord[b][ri][rj][rk] != 0
>>
>> Ord[b][ri][rj] == -1 => RingOrder(rk, rj, ri) for all t
>> Ord[b][ri][rj] ==  1 => RingOrder(ri, rj, rk) for all t
>>
>> where:
>> RingOrder(ri, rj, rk) <=> (ri < rj && rj < rk)
>> or (rk < ri && ri < rj)
>> or (rj < rk && rk < ri)
>>
>> * Ring orderings persist across subplans if neither robot  
>> transitions.
>> A[b-1][ri] == A[b][ri]  && A[b-1][rj] == A[b][rj] && A[b-1][rk] ==
>> A[b][rk]
>> --> Ord[b-1][ri][rj][rk] == Ord[b][ri][rj][rk]
>>
>
> --
> Christian Schulte, web.ict.kth.se/~cschulte/
>
>
>
>




From malcolmr at cse.unsw.edu.au  Wed Apr  9 02:17:59 2008
From: malcolmr at cse.unsw.edu.au (Malcolm Ryan)
Date: Wed, 9 Apr 2008 10:17:59 +1000
Subject: [gecode-users] Subclassing JavaBrancingDesc
In-Reply-To: <C4216426.C00%cschulte@kth.se>
References: <C4216426.C00%cschulte@kth.se>
Message-ID: <2B9EC12A-9469-4FC5-9682-D3C29A1627C0@cse.unsw.edu.au>


On 09/04/2008, at 2:04 AM, Christian Schulte wrote:
> The big issue is whether Gecode/J is really the right thing to use  
> for you.
> Yes, it is fairly open but no match to Gecode. All requests can be  
> instantly
> satisified for Gecode or do not even arise.
>
> I know that C++ sounds less appealing but Gecode is first and foremost
> geared to be good as a C++ library.

Yes. I guess I have to bite the bullet and move to C++.

Malcolm



From malcolmr at cse.unsw.edu.au  Wed Apr  9 02:50:44 2008
From: malcolmr at cse.unsw.edu.au (Malcolm Ryan)
Date: Wed, 9 Apr 2008 10:50:44 +1000
Subject: [gecode-users] independent subproblems
In-Reply-To: <0BAA8330-78D5-418B-ADF3-B7D82AE146C5@ps.uni-sb.de>
References: <D8F391C5-0A6E-4BA3-96B2-619469695572@cse.unsw.edu.au>
	<0BAA8330-78D5-418B-ADF3-B7D82AE146C5@ps.uni-sb.de>
Message-ID: <4EB0C9E1-338B-4A5B-BC76-610589ABE67B@cse.unsw.edu.au>

Reading your paper that sounds like exactly what I'm looking for. It's  
still at the experimental stage, I take it? Any plans to integrate it?

Malcolm

On 09/04/2008, at 12:26 AM, Guido Tack wrote:
> Malcolm,
>
> we have been working on this kind of decomposition, you can find a  
> preliminary technical report at
> http://arxiv.org/abs/0712.2389
>
> The resulting system needs some extensions to Gecode, so it is  
> currently not available in Gecode directly.
>
> Cheers,
> 	Guido
>
> Malcolm Ryan wrote:
>
>> At a certain stage in my search the problem can be split into several
>> independent sub-problems. If I try to solve them sequentially, then a
>> failure in one of the later ones will cause fruitless backtracking in
>> the earlier ones (when it really needs to jump all the way back to  
>> the
>> first phase of the search). Does Gecode provide any kind of mechanism
>> for handling this situation?
>>
>> Thanks,
>>
>> Malcolm
>>
>> _______________________________________________
>> Gecode users mailing list
>> users at gecode.org
>> https://www.gecode.org/mailman/listinfo/gecode-users




From zayenz at gmail.com  Wed Apr  9 08:23:55 2008
From: zayenz at gmail.com (Mikael Zayenz Lagerkvist)
Date: Wed, 9 Apr 2008 08:23:55 +0200
Subject: [gecode-users] Subclassing JavaBrancingDesc
In-Reply-To: <2B9EC12A-9469-4FC5-9682-D3C29A1627C0@cse.unsw.edu.au>
References: <C4216426.C00%cschulte@kth.se>
	<2B9EC12A-9469-4FC5-9682-D3C29A1627C0@cse.unsw.edu.au>
Message-ID: <63b5c8b00804082323q215f6380o468309d04d035c44@mail.gmail.com>

On Wed, Apr 9, 2008 at 2:17 AM, Malcolm Ryan <malcolmr at cse.unsw.edu.au> wrote:
>  On 09/04/2008, at 2:04 AM, Christian Schulte wrote:
>  > I know that C++ sounds less appealing but Gecode is first and foremost
>  > geared to be good as a C++ library.
>
>  Yes. I guess I have to bite the bullet and move to C++.

One very good thing about using Gecode instead of Gecode/J is that
there is operator overloading in C++, leading to much more readable
models. For example, a quite common expression like (s1+d1>=s2 or
s2+d2>=s1) is hard to read and cumbersome in Java
    post(this, new BExpr(new Expr(s1).plus(d1), IRT_GQ, s2).or(new
Expr(s2).plus(d2), IRT_GQ, s1);
while it is quite straightforward in C++
    post(this, tt(~(s1+d1>=s2) || ~(s2+d2>=s1)));
where ~ is used as a reification operator, and tt indicates that the
expression should hold.

Cheers,
Mikael


-- 
Mikael Zayenz Lagerkvist, http://www.ict.kth.se/~zayenz/



From zayenz at gmail.com  Wed Apr  9 08:52:04 2008
From: zayenz at gmail.com (Mikael Zayenz Lagerkvist)
Date: Wed, 9 Apr 2008 08:52:04 +0200
Subject: [gecode-users] Controlling memory use
In-Reply-To: <E30601CF-396B-4F31-9B2D-20FD88159F9E@cse.unsw.edu.au>
References: <C4216298.BFB%cschulte@kth.se>
	<E30601CF-396B-4F31-9B2D-20FD88159F9E@cse.unsw.edu.au>
Message-ID: <63b5c8b00804082352p90d8d6w5247b942d2b90fa7@mail.gmail.com>

On Wed, Apr 9, 2008 at 2:14 AM, Malcolm Ryan <malcolmr at cse.unsw.edu.au> wrote:
> On 09/04/2008, at 1:57 AM, Christian Schulte wrote:
>  > Malcolm,
>  >
>  > That's a lot of constraints!
>
>  Is it? I have no idea what constitutes "a lot" in this area.

Lets look at the following small part of your model to evaluate the
number of constraints.

>  >> Constants:
>  >> G = (V, E)  graph   The map
>  >> V   {1, Nv}   The vertices are numbered
>  >> E   in V^2   The edges are stored as a table
>  >> Nr    # robots  The number of robots
>  >> Ns   # subgraphs  The number of subgraphs
>  >> Si    subset of V, Subgraphs are sets of consecutive vertices
>  >> Si_min <= v <= Si_max
>  >> ES   in {1..Ns}^2 The adjacency betweem subgraphs as a table
>  >> Nb   # subplans  The size of the abstract plan
>  >> Lmax  maximum plan length
>  >>
>  >> Concrete plans:
>  >> P[b][r][t] in V   The position of robot r at time t in subplan b
>
>  Typical values:
>
>  Nv      100-1000
>  Ns      50-100
>  Nr      20 or more (the more we can handle the better)
>
>  Nb and Lmax depend on the problem. I usually start Nb small (around 5)
>  and increase it if this value fails. Lmax depends on the size and
>  types of subgraphs. I'm currently working with Lmax = 40.
>
>  >> Concrete plans: for all b:
>  >>
>  >> * No two robots can occupy the same vertex at the same time:
>  >> distinct(P[b][1][t], P[b][2][t], ..., P[b][Nr][t]) for all t

This will give rise to Nb*Lmax (=200) distinct-constraints. Depending
on wheter you use naive, bounds consistent, or domain consistent
propagation, this will take varying amounts of memory.

The worst case occurs if you use domain-consistent pruning on these
(ICL_DOM). For each propagator a variable-value graph (a bipartite
graph with the variables on one side and the values on the other) is
maintained. These graphs have O(Nv+Nr) nodes and O(Nv*Nr) edges. This
means that for just this set of distinct propagators might have graphs
with O(Nb*Lmax*Nv*Nr) edges in total, or up to 4000000 edges.

Given the discrepancy between the number of variables and values (~20
vs. ~1000), I would guess that domain-consistent pruning does not help
very much, it is usually more important when then number of variables
and values are of similar size.

Using naive propagation takes much less memory (on the order of the
number of variables per propagator, saving a factor of Nr), while
bounds propagation takes slightly more memory, but only by a constant
factor.


>  >> I've outlined the problem description below. All the boolean
>  >> expressions are constructed from BExprs. The only ones that are
>  >> expressly reified as BoolVars are those noted in the Variables
>  >> section. These are created because there is no BExpr which tests set
>  >> membership.

As a general rule, you might want to cache Boolean reification
variables if they occur more than once (not sure if this is the case
for you), since it is quite wasteful to create them and their
propagators several times through a modeling interface.


Cheers,
Mikael

-- 
Mikael Zayenz Lagerkvist, http://www.ict.kth.se/~zayenz/



From filip.konvicka at logis.cz  Wed Apr  9 10:47:00 2008
From: filip.konvicka at logis.cz (=?UTF-8?B?RmlsaXAgS29udmnEjWth?=)
Date: Wed, 09 Apr 2008 10:47:00 +0200
Subject: [gecode-users] Extending Integer Variable
In-Reply-To: <e7b0e5a40804080646k7f5570c5xa698b84e6f747b6b@mail.gmail.com>
References: <200804021608.00188.Vincent.Barichard@univ-angers.fr>	<000601c898e9$6efb8b40$4cf2a1c0$@se>
	<47FA9BE0.1090500@logis.cz>	<200804080903.46499.Vincent.Barichard@univ-angers.fr>	<47FB2456.3060508@logis.cz>
	<e7b0e5a40804080646k7f5570c5xa698b84e6f747b6b@mail.gmail.com>
Message-ID: <fthvq3$o3$1@ger.gmane.org>

Hi Gustavo,

> There are some other implementations that may result useful. One is the
> interval library that comes with boost (already mentioned), also there is an
> implementation by T. Hickey called smath (
> http://interval.sourceforge.net/interval/prolog/clip/clip/smath/README.html)
> and a complete solver for continous domains called elisa (
> http://sourceforge.net/projects/elisa/).
> 
> Smath provides a wide set of narrowing operator implementations and claims
> to be correct, i have used it before and its quite good. Elisa comes with
> different representations for constraints on continous domains (natural
> interval form, newton interval form, etc.) and that makes it promising.
> Boost.interval is the one that best deal with portability which is a matter
> when dealing with floating point numbers.

Again, these are interesting (I know you use smath in XRI), but my 
greatest concerns are portability and licensing. That said, an ideal 
templatized implementation of FloatVars should allow the user to choose 
their favorite arithmetics implementation, because these concerns are 
not universal.

Cheers,
Filip




From filip.konvicka at logis.cz  Wed Apr  9 10:53:19 2008
From: filip.konvicka at logis.cz (=?UTF-8?B?RmlsaXAgS29udmnEjWth?=)
Date: Wed, 09 Apr 2008 10:53:19 +0200
Subject: [gecode-users] FloatVar implementation
Message-ID: <47FC83FF.2000401@logis.cz>

Hi,

my colleague has started implementing FloatVar and things are fine so 
far. Looking over his shoulder, I noticed that all variable types are 
required to appear in the Gecode kernel sources, namely in the 
Space::update function. Is that really necessary? Is this needed 
somewhere else too?

I originally thought that adding a new variable type does not 
necessarily require recompiling Gecode.

Cheers,
Filip




From cschulte at kth.se  Wed Apr  9 14:25:17 2008
From: cschulte at kth.se (Christian Schulte)
Date: Wed, 09 Apr 2008 14:25:17 +0200
Subject: [gecode-users] FloatVar implementation
In-Reply-To: <47FC83FF.2000401@logis.cz>
Message-ID: <C422824D.C41%cschulte@kth.se>

Dear Filip,

Yes, that's true and has always been the case (more or less). It used to be
that one had to have a reserved identifier known by the kernel.

Then, in the end we decided it does not make a difference in practice and
just include the stubs for variable types into the kernel. Note it is just
type information about stubs, no information about how variables are
implemented go into the kernel.

One, of course, could do a dynamic architecture. But's just painful will
degrade performance and is not very useful: the number of different variable
types will be pretty limited.

The only thing that is a little odd, is that the specification file from
which the stubs are generated must be mentioned in the variables.vsl file.
But cleaning this up we can do if you decide to either contribute your code
to Gecode directly (;-), so it can just be listed there) or as a separate
contribution. Please get in touch with us then and we revive the contribs
configuration again.

Cheers
Christian


On 4/9/08 10:53 AM, "Filip Konvi?ka" <filip.konvicka at logis.cz> wrote:

> Hi,
> 
> my colleague has started implementing FloatVar and things are fine so
> far. Looking over his shoulder, I noticed that all variable types are
> required to appear in the Gecode kernel sources, namely in the
> Space::update function. Is that really necessary? Is this needed
> somewhere else too?
> 
> I originally thought that adding a new variable type does not
> necessarily require recompiling Gecode.
> 
> Cheers,
> Filip
> 
> 
> _______________________________________________
> Gecode users mailing list
> users at gecode.org
> https://www.gecode.org/mailman/listinfo/gecode-users

--
Christian Schulte, web.ict.kth.se/~cschulte/








From filip.konvicka at logis.cz  Wed Apr  9 13:47:20 2008
From: filip.konvicka at logis.cz (=?UTF-8?B?RmlsaXAgS29udmnEjWth?=)
Date: Wed, 09 Apr 2008 13:47:20 +0200
Subject: [gecode-users] FloatVar implementation
In-Reply-To: <C422824D.C41%cschulte@kth.se>
References: <47FC83FF.2000401@logis.cz> <C422824D.C41%cschulte@kth.se>
Message-ID: <47FCACC8.5060701@logis.cz>


> Yes, that's true and has always been the case (more or less). It used to be
> that one had to have a reserved identifier known by the kernel.
> 
> Then, in the end we decided it does not make a difference in practice and
> just include the stubs for variable types into the kernel. Note it is just
> type information about stubs, no information about how variables are
> implemented go into the kernel.
> 
> One, of course, could do a dynamic architecture. But's just painful will
> degrade performance and is not very useful: the number of different variable
> types will be pretty limited.
> 
> The only thing that is a little odd, is that the specification file from
> which the stubs are generated must be mentioned in the variables.vsl file.
> But cleaning this up we can do if you decide to either contribute your code
> to Gecode directly (;-), so it can just be listed there) or as a separate
> contribution. Please get in touch with us then and we revive the contribs
> configuration again.

I'll have to take a closer look at what kernel actually does with these. 
But our implementation, already in its current state, can generate 
multiple variable classes. For example, one may choose to use either 
boost::numeric::interval<float> or boost::numeric::interval<double> (or 
even <long double>) - and the domain implementation code will be reused.

Similarly, I think that many views and constraints can be generic. If 
the implementation is designed carefully, it should be quite independent 
on whether we use boost.interval or whatever else.

But when we let the users instantiate their own FloatVars by supplying 
their FP-arithmetics library of choice, we don't have the variable type 
in advance and can't expose it to the kernel at Gecode compile time. Or 
can we? Is it sufficient that all the variables have a common base 
class? (Even with the restriction that there is just one instantiation 
of FloatVar in a program?)

But I'm afraid that I'm guessing too much here, I really need to look 
into the kernel...

Cheers,
Filip




From tack at ps.uni-sb.de  Wed Apr  9 14:28:08 2008
From: tack at ps.uni-sb.de (Guido Tack)
Date: Wed, 9 Apr 2008 14:28:08 +0200
Subject: [gecode-users] FloatVar implementation
In-Reply-To: <47FCACC8.5060701@logis.cz>
References: <47FC83FF.2000401@logis.cz> <C422824D.C41%cschulte@kth.se>
	<47FCACC8.5060701@logis.cz>
Message-ID: <9205CA19-1A3B-46F8-81C8-ECE00403B28F@ps.uni-sb.de>

Filip Konvi?ka wrote:
> I'll have to take a closer look at what kernel actually does with  
> these.
> But our implementation, already in its current state, can generate
> multiple variable classes. For example, one may choose to use either
> boost::numeric::interval<float> or boost::numeric::interval<double>  
> (or
> even <long double>) - and the domain implementation code will be  
> reused.
>
> Similarly, I think that many views and constraints can be generic. If
> the implementation is designed carefully, it should be quite  
> independent
> on whether we use boost.interval or whatever else.
>
> But when we let the users instantiate their own FloatVars by supplying
> their FP-arithmetics library of choice, we don't have the variable  
> type
> in advance and can't expose it to the kernel at Gecode compile time.  
> Or
> can we? Is it sufficient that all the variables have a common base
> class? (Even with the restriction that there is just one instantiation
> of FloatVar in a program?)

The kernel only needs to know about the modification events and  
propagation conditions for a variable type.  You could therefore add a  
generic FloatVar to the kernel, and let the user decide which domain  
representation to use (as long as the domain representation has no  
impact on the kind of events that are needed).  However, this assumes  
that the resulting system always only uses a single instance of  
FloatVar (you can't mix e.g. variables based on float and double).

Cheers,
	Guido




From cschulte at kth.se  Wed Apr  9 16:56:14 2008
From: cschulte at kth.se (Christian Schulte)
Date: Wed, 09 Apr 2008 16:56:14 +0200
Subject: [gecode-users] FloatVar implementation
In-Reply-To: <9205CA19-1A3B-46F8-81C8-ECE00403B28F@ps.uni-sb.de>
Message-ID: <C422A5AE.C49%cschulte@kth.se>

Hmm, I am not so sure that Guido is telling the truth here ;-) I just had a
chat with him and he agrees ;-)

The kernel only knows about a base class that contains no information
whatsoever about how the domain of a variable is implemented.

What is perfectly possible is to have variables of different types in the
system that share the same baseclass: the kernel is only concerned with what
is in the baseclass and not with how the variables are implemented. The key
aspect is that variable implementations are only refered to by propagators
and branchings: they statically know the real type so that the right
operations are performed, so no need for virtual etc.

Look to the generated baseclass IntVarImpBase and how IntVarImp inherits
from it: IntVarImpBase is what the kernel deals with, while IntVarImp is the
real implementation of integer variables.

Having said all that, I would first attempt to get everything up for a
single implementation. You can go crazy later ;-)

Cheers
Christian

On 4/9/08 2:28 PM, "Guido Tack" <tack at ps.uni-sb.de> wrote:

> Filip Konvi?ka wrote:
> I'll have to take a closer look at what kernel
> actually does with  
> these.
> But our implementation, already in its current
> state, can generate
> multiple variable classes. For example, one may choose
> to use either
> boost::numeric::interval<float> or
> boost::numeric::interval<double>  
> (or
> even <long double>) - and the
> domain implementation code will be  
> reused.
>
> Similarly, I think that
> many views and constraints can be generic. If
> the implementation is designed
> carefully, it should be quite  
> independent
> on whether we use
> boost.interval or whatever else.
>
> But when we let the users instantiate
> their own FloatVars by supplying
> their FP-arithmetics library of choice, we
> don't have the variable  
> type
> in advance and can't expose it to the
> kernel at Gecode compile time.  
> Or
> can we? Is it sufficient that all the
> variables have a common base
> class? (Even with the restriction that there is
> just one instantiation
> of FloatVar in a program?)

The kernel only needs to
> know about the modification events and  
propagation conditions for a variable
> type.  You could therefore add a  
generic FloatVar to the kernel, and let the
> user decide which domain  
representation to use (as long as the domain
> representation has no  
impact on the kind of events that are needed).
> However, this assumes  
that the resulting system always only uses a single
> instance of  
FloatVar (you can't mix e.g. variables based on float and
> double).

Cheers,
 Guido


_______________________________________________
Gec
> ode users mailing
> list
users at gecode.org
https://www.gecode.org/mailman/listinfo/gecode-users


--
Christian Schulte, web.ict.kth.se/~cschulte/








From tack at ps.uni-sb.de  Wed Apr  9 15:12:57 2008
From: tack at ps.uni-sb.de (Guido Tack)
Date: Wed, 9 Apr 2008 15:12:57 +0200
Subject: [gecode-users] independent subproblems
In-Reply-To: <4EB0C9E1-338B-4A5B-BC76-610589ABE67B@cse.unsw.edu.au>
References: <D8F391C5-0A6E-4BA3-96B2-619469695572@cse.unsw.edu.au>
	<0BAA8330-78D5-418B-ADF3-B7D82AE146C5@ps.uni-sb.de>
	<4EB0C9E1-338B-4A5B-BC76-610589ABE67B@cse.unsw.edu.au>
Message-ID: <28808544-1C95-48E7-9091-72A9EF0EB931@ps.uni-sb.de>

Malcolm Ryan wrote:

> Reading your paper that sounds like exactly what I'm looking for. It's
> still at the experimental stage, I take it? Any plans to integrate it?

Plans, yes, time to do it, no ;-)  No, seriously, we do have plans to  
at least ship it as a contribution that you could download and try  
out, but I can't make any promises when that's going to happen.

Cheers,
	Guido




From filip.konvicka at logis.cz  Wed Apr  9 15:52:45 2008
From: filip.konvicka at logis.cz (=?UTF-8?B?RmlsaXAgS29udmnEjWth?=)
Date: Wed, 09 Apr 2008 15:52:45 +0200
Subject: [gecode-users] FloatVar implementation
In-Reply-To: <C422A5AE.C49%cschulte@kth.se>
References: <C422A5AE.C49%cschulte@kth.se>
Message-ID: <47FCCA2D.2090800@logis.cz>


> Hmm, I am not so sure that Guido is telling the truth here ;-) I just had a
> chat with him and he agrees ;-)
>   
I hope I didn't start any fight :-)
> The kernel only knows about a base class that contains no information
> whatsoever about how the domain of a variable is implemented.
>
> What is perfectly possible is to have variables of different types in the
> system that share the same baseclass: the kernel is only concerned with what
> is in the baseclass and not with how the variables are implemented. The key
> aspect is that variable implementations are only refered to by propagators
> and branchings: they statically know the real type so that the right
> operations are performed, so no need for virtual etc.
>
> Look to the generated baseclass IntVarImpBase and how IntVarImp inherits
> from it: IntVarImpBase is what the kernel deals with, while IntVarImp is the
> real implementation of integer variables.
>   
I've seen that, but what I need to understand is why you need distinct 
*VarImpBases for Int, Bool, etc., why not just one. The difference I've 
seen in kernel is that the classes report their own "event id" or 
whatever, so I guess you use this for speeding up actor filtering. 
Again, I'm just guessing and will need to look into this.

[...some time passes...]

OK, we've added float.vis and recompiled Gecode, so now it seems we have 
our own bunch of ModEvents and also a FloatVarImpBase, which is cool, so 
we'll come back with a status report (or more questions) soon :-)

> Having said all that, I would first attempt to get everything up for a
> single implementation. You can go crazy later ;-)
>   
I guess I'm crazy enough already - nothing ever stops me from making 
things more generic. Even if it takes 5 minutes to compile... :-))

Cheers,
Filip




From cschulte at kth.se  Wed Apr  9 18:48:24 2008
From: cschulte at kth.se (Christian Schulte)
Date: Wed, 09 Apr 2008 18:48:24 +0200
Subject: [gecode-users] FloatVar implementation
In-Reply-To: <47FCCA2D.2090800@logis.cz>
Message-ID: <C422BFF8.C68%cschulte@kth.se>

Filip,

If you check the stubs for all the different variable types you will see
that there are two aspects in which they differ. Both of which depend on the
variable implementation specification you deliver:

 - Propagation conditions: a stub class allocates one slot for each
   propagation condition you specify. This is used to find all propagators
   with a particular propagation condition.

   As cloning is controlled by the kernel, the kernel needs to know
   how many slots a variable has so that all of its slots are copied.

 - Modification events: a modification event on a variable determines
   what are the propagators that must be propagated. For example, for
   integer variables, if the the min or max of a variable changes, this
   results in a ME_INT_BND modification event (one of the bounds changed).
   The specification contains the information that all propagators
   for that variable with conditions PC_INT_DOM (run if anything changes)
   and PC_INT_BND (run if the bounds change) must be run.

   The code that runs (actually schedules propagators for later execution)
   is generated from the specification as, again, this is done in the
   kernel. Moreover, the code is super optimized (really with number
   of assembly instructions in mind) as it is at the core of the kernel.

There is one more thing that happens (computing an optimal bit layout for
modification event deltas) but I won't go into that.

So you see, generating the stuff is somewhat less powerful (you need to
recompile) but has a great return if investment as it comes to speed.

Moreover, a kernel that has been compiled with a particular variable type
enabled can still be used without linking your programs to code that
implements the variable proper.

Christian

On 4/9/08 3:52 PM, "Filip Konvi?ka" <filip.konvicka at logis.cz> wrote:

> 
>> Hmm, I am not so sure that Guido is telling the truth here ;-) I just had a
>> chat with him and he agrees ;-)
>>   
> I hope I didn't start any fight :-)
>> The kernel only knows about a base class that contains no information
>> whatsoever about how the domain of a variable is implemented.
>> 
>> What is perfectly possible is to have variables of different types in the
>> system that share the same baseclass: the kernel is only concerned with what
>> is in the baseclass and not with how the variables are implemented. The key
>> aspect is that variable implementations are only refered to by propagators
>> and branchings: they statically know the real type so that the right
>> operations are performed, so no need for virtual etc.
>> 
>> Look to the generated baseclass IntVarImpBase and how IntVarImp inherits
>> from it: IntVarImpBase is what the kernel deals with, while IntVarImp is the
>> real implementation of integer variables.
>>   
> I've seen that, but what I need to understand is why you need distinct
> *VarImpBases for Int, Bool, etc., why not just one. The difference I've
> seen in kernel is that the classes report their own "event id" or
> whatever, so I guess you use this for speeding up actor filtering.
> Again, I'm just guessing and will need to look into this.
> 
> [...some time passes...]
> 
> OK, we've added float.vis and recompiled Gecode, so now it seems we have
> our own bunch of ModEvents and also a FloatVarImpBase, which is cool, so
> we'll come back with a status report (or more questions) soon :-)
> 
>> Having said all that, I would first attempt to get everything up for a
>> single implementation. You can go crazy later ;-)
>>   
> I guess I'm crazy enough already - nothing ever stops me from making
> things more generic. Even if it takes 5 minutes to compile... :-))
> 
> Cheers,
> Filip
> 

--
Christian Schulte, web.ict.kth.se/~cschulte/








From filip.konvicka at logis.cz  Wed Apr  9 17:36:04 2008
From: filip.konvicka at logis.cz (=?UTF-8?B?RmlsaXAgS29udmnEjWth?=)
Date: Wed, 09 Apr 2008 17:36:04 +0200
Subject: [gecode-users] FloatVar implementation
In-Reply-To: <C422BFF8.C68%cschulte@kth.se>
References: <C422BFF8.C68%cschulte@kth.se>
Message-ID: <47FCE264.6010405@logis.cz>


> If you check the stubs for all the different variable types you will see
> that there are two aspects in which they differ. Both of which depend on the
> variable implementation specification you deliver:
>
>  - Propagation conditions: a stub class allocates one slot for each
>    propagation condition you specify. This is used to find all propagators
>    with a particular propagation condition.
>
>    As cloning is controlled by the kernel, the kernel needs to know
>    how many slots a variable has so that all of its slots are copied.
>
>  - Modification events: a modification event on a variable determines
>    what are the propagators that must be propagated. For example, for
>    integer variables, if the the min or max of a variable changes, this
>    results in a ME_INT_BND modification event (one of the bounds changed).
>    The specification contains the information that all propagators
>    for that variable with conditions PC_INT_DOM (run if anything changes)
>    and PC_INT_BND (run if the bounds change) must be run.
>
>    The code that runs (actually schedules propagators for later execution)
>    is generated from the specification as, again, this is done in the
>    kernel. Moreover, the code is super optimized (really with number
>    of assembly instructions in mind) as it is at the core of the kernel.
>
> There is one more thing that happens (computing an optimal bit layout for
> modification event deltas) but I won't go into that.
>   
I see. No problem, as I said, we already added float.vis to generate 
this stuff into the kernel. As I understand it, if we later choose to 
use the specs for multiple variable implementations, they'll share some 
behavior, like - as you describe - modification event triggering 
specific kinds of propagators. But IMHO that should be of little concern 
since a FloatVar is still a FloatVar regardless of the internal domain 
representation.

(This makes me believe we could even use IntVarImplBase & Int ModEvents 
for floats if we find out that they share these properties.)
> So you see, generating the stuff is somewhat less powerful (you need to
> recompile) but has a great return if investment as it comes to speed.
>   
I agree, after all I've done a consistency engine for my runtime system 
so I do appreciate your compile-time efforts. (And I thought that I'd 
never use topological sort in real life!)
> Moreover, a kernel that has been compiled with a particular variable type
> enabled can still be used without linking your programs to code that
> implements the variable proper.
>   
My intention is releasing our implementation as a part of Gecode or as a 
contribution, depending on what you like more. (I'll have to get an 
approval for this but I think I'll get it.) Our current plan is to do a 
template FloatVar and an identity view, a template FloatVarImp 
parametrized by domain representation, provide an implementation of 
FloatVarImp for Boost.Interval, and some basic arithmetic propagators 
(add, mul, min, max, relational, reified relational).

Christian, thanks for all the information, it's very helpful. And the 
code we've been dealing with is all documented very well, nice work!

Cheers,
Filip




From cschulte at kth.se  Wed Apr  9 20:39:24 2008
From: cschulte at kth.se (Christian Schulte)
Date: Wed, 09 Apr 2008 20:39:24 +0200
Subject: [gecode-users] FloatVar implementation
In-Reply-To: <47FCE264.6010405@logis.cz>
Message-ID: <C422D9FC.C80%cschulte@kth.se>

What you intend to do sounds very reasonable.

As it comes to integration versus contribution: we would wish integration
but we might have to settle for contribution. We can or want to integrate
only if:
 - The code is not tainted by a too restricted license, so only MIT.
 - The code is of high quality such that it is well tested, well
   documented, useful for many people, and realistic as it comes to
   performance. We will not integrate code that we can not fix or port
   ourselves.
 - The code must be portable and conform to the C++ standard.

I believe that you should make it for all three criteria. But let's see. We
can first go for contribution and later promote to integration.

Cheers
Christian

On 4/9/08 5:36 PM, "Filip Konvi?ka" <filip.konvicka at logis.cz> wrote:

> 
>> If you check the stubs for all the different variable types you will see
>> that there are two aspects in which they differ. Both of which depend on the
>> variable implementation specification you deliver:
>> 
>>  - Propagation conditions: a stub class allocates one slot for each
>>    propagation condition you specify. This is used to find all propagators
>>    with a particular propagation condition.
>> 
>>    As cloning is controlled by the kernel, the kernel needs to know
>>    how many slots a variable has so that all of its slots are copied.
>> 
>>  - Modification events: a modification event on a variable determines
>>    what are the propagators that must be propagated. For example, for
>>    integer variables, if the the min or max of a variable changes, this
>>    results in a ME_INT_BND modification event (one of the bounds changed).
>>    The specification contains the information that all propagators
>>    for that variable with conditions PC_INT_DOM (run if anything changes)
>>    and PC_INT_BND (run if the bounds change) must be run.
>> 
>>    The code that runs (actually schedules propagators for later execution)
>>    is generated from the specification as, again, this is done in the
>>    kernel. Moreover, the code is super optimized (really with number
>>    of assembly instructions in mind) as it is at the core of the kernel.
>> 
>> There is one more thing that happens (computing an optimal bit layout for
>> modification event deltas) but I won't go into that.
>>   
> I see. No problem, as I said, we already added float.vis to generate
> this stuff into the kernel. As I understand it, if we later choose to
> use the specs for multiple variable implementations, they'll share some
> behavior, like - as you describe - modification event triggering
> specific kinds of propagators. But IMHO that should be of little concern
> since a FloatVar is still a FloatVar regardless of the internal domain
> representation.
> 
> (This makes me believe we could even use IntVarImplBase & Int ModEvents
> for floats if we find out that they share these properties.)
>> So you see, generating the stuff is somewhat less powerful (you need to
>> recompile) but has a great return if investment as it comes to speed.
>>   
> I agree, after all I've done a consistency engine for my runtime system
> so I do appreciate your compile-time efforts. (And I thought that I'd
> never use topological sort in real life!)
>> Moreover, a kernel that has been compiled with a particular variable type
>> enabled can still be used without linking your programs to code that
>> implements the variable proper.
>>   
> My intention is releasing our implementation as a part of Gecode or as a
> contribution, depending on what you like more. (I'll have to get an
> approval for this but I think I'll get it.) Our current plan is to do a
> template FloatVar and an identity view, a template FloatVarImp
> parametrized by domain representation, provide an implementation of
> FloatVarImp for Boost.Interval, and some basic arithmetic propagators
> (add, mul, min, max, relational, reified relational).
> 
> Christian, thanks for all the information, it's very helpful. And the
> code we've been dealing with is all documented very well, nice work!
> 
> Cheers,
> Filip
> 

--
Christian Schulte, web.ict.kth.se/~cschulte/








From ggutierrez at atlas.puj.edu.co  Wed Apr  9 18:40:36 2008
From: ggutierrez at atlas.puj.edu.co (Gustavo Gutierrez)
Date: Wed, 9 Apr 2008 11:40:36 -0500
Subject: [gecode-users] Extending Integer Variable
In-Reply-To: <fthvq3$o3$1@ger.gmane.org>
References: <200804021608.00188.Vincent.Barichard@univ-angers.fr>
	<000601c898e9$6efb8b40$4cf2a1c0$@se> <47FA9BE0.1090500@logis.cz>
	<200804080903.46499.Vincent.Barichard@univ-angers.fr>
	<47FB2456.3060508@logis.cz>
	<e7b0e5a40804080646k7f5570c5xa698b84e6f747b6b@mail.gmail.com>
	<fthvq3$o3$1@ger.gmane.org>
Message-ID: <e7b0e5a40804090940l340991c1rfb75247d006efec5@mail.gmail.com>

On Wed, Apr 9, 2008 at 3:47 AM, Filip Konvi?ka <filip.konvicka at logis.cz>
wrote:

> Hi Gustavo,
>
> > There are some other implementations that may result useful. One is the
> > interval library that comes with boost (already mentioned), also there
> is an
> > implementation by T. Hickey called smath (
> >
> http://interval.sourceforge.net/interval/prolog/clip/clip/smath/README.html
> )
> > and a complete solver for continous domains called elisa (
> > http://sourceforge.net/projects/elisa/).
> >
> > Smath provides a wide set of narrowing operator implementations and
> claims
> > to be correct, i have used it before and its quite good. Elisa comes
> with
> > different representations for constraints on continous domains (natural
> > interval form, newton interval form, etc.) and that makes it promising.
> > Boost.interval is the one that best deal with portability which is a
> matter
> > when dealing with floating point numbers.
>
> Again, these are interesting (I know you use smath in XRI), but my
> greatest concerns are portability and licensing. That said, an ideal
> templatized implementation of FloatVars should allow the user to choose
> their favorite arithmetics implementation, because these concerns are
> not universal.
>

Sure, portability is a real concern with floating point arithmetic and boost
interval seems to be the best choice for several reasons: very good design;
voice and vote of some peple in the c++ standard comitee . However, we can
get the best fom the three implementations. I think havng carefuly designed
implementations of FloatVars is the first step, then we can imprve the api
of propgators provided. If there is something i can contribute with just
tell me and i will be happy to participate.

 Cheers,
Gustavo.


> Cheers,
> Filip
>
>
> _______________________________________________
> Gecode users mailing list
> users at gecode.org
> https://www.gecode.org/mailman/listinfo/gecode-users
>



-- 
Gustavo Gutierrez
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.ps.uni-sb.de/pipermail/users/attachments/20080409/8c5f7155/attachment.htm>

From filip.konvicka at logis.cz  Wed Apr  9 21:59:35 2008
From: filip.konvicka at logis.cz (=?ISO-8859-2?Q?Filip_Konvi=E8ka?=)
Date: Wed, 09 Apr 2008 21:59:35 +0200
Subject: [gecode-users] FloatVar implementation
In-Reply-To: <C422D9FC.C80%cschulte@kth.se>
References: <C422D9FC.C80%cschulte@kth.se>
Message-ID: <47FD2027.9050703@logis.cz>


> What you intend to do sounds very reasonable.
>   

I would prefer spending more time on analysis and design, but as I said 
we have limited time for this. So we'll try to do "as little as we need" 
but keep things generic so others can easily extend our work.

> As it comes to integration versus contribution: we would wish integration
> but we might have to settle for contribution. We can or want to integrate
> only if:
>  - The code is not tainted by a too restricted license, so only MIT.
>   

I got the approval, and we can use that license. :-)

>  - The code is of high quality such that it is well tested, well
>    documented, useful for many people, and realistic as it comes to
>    performance. We will not integrate code that we can not fix or port
>    ourselves.
>   

I think that the initial version should be quite small. We're used to 
making tests and generating doxygen docs, so that should be fine. We'll 
try to stick to your code style (ours is very similar).

>  - The code must be portable and conform to the C++ standard.
>   

Dtto. We need our code work at least with MSVC 2008 and gcc 4.3.0, and 
we try to stick to the C++ standard.

> I believe that you should make it for all three criteria. But let's see. We
> can first go for contribution and later promote to integration.
>   

That would be perfect. I prefer contribution for start, and when things 
get stable we can integrate, in a year or so. We'll also see how many 
people are actually interested in this, but I think at least it could be 
used for GeOz, and maybe packaged with GecodeJ.

Cheers,
Filip




From filip.konvicka at logis.cz  Wed Apr  9 22:09:05 2008
From: filip.konvicka at logis.cz (=?ISO-8859-2?Q?Filip_Konvi=E8ka?=)
Date: Wed, 09 Apr 2008 22:09:05 +0200
Subject: [gecode-users] Extending Integer Variable
In-Reply-To: <e7b0e5a40804090940l340991c1rfb75247d006efec5@mail.gmail.com>
References: <200804021608.00188.Vincent.Barichard@univ-angers.fr>	
	<000601c898e9$6efb8b40$4cf2a1c0$@se> <47FA9BE0.1090500@logis.cz>	
	<200804080903.46499.Vincent.Barichard@univ-angers.fr>	
	<47FB2456.3060508@logis.cz>	
	<e7b0e5a40804080646k7f5570c5xa698b84e6f747b6b@mail.gmail.com>	
	<fthvq3$o3$1@ger.gmane.org>
	<e7b0e5a40804090940l340991c1rfb75247d006efec5@mail.gmail.com>
Message-ID: <47FD2261.2020804@logis.cz>


>     Again, these are interesting (I know you use smath in XRI), but my
>     greatest concerns are portability and licensing. That said, an ideal
>     templatized implementation of FloatVars should allow the user to
>     choose
>     their favorite arithmetics implementation, because these concerns are
>     not universal.
>
>
> Sure, portability is a real concern with floating point arithmetic and 
> boost interval seems to be the best choice for several reasons: very 
> good design; voice and vote of some peple in the c++ standard comitee 
> . However, we can get the best fom the three implementations. I think 
> havng carefuly designed implementations of FloatVars is the first 
> step, then we can imprve the api of propgators provided. If there is 
> something i can contribute with just tell me and i will be happy to 
> participate.

Your experience is highly welcome, Gustavo. Let's wait until we have 
some initial working version, and let's discuss the design, 
extensibility, performance when we see it. We think that the initial 
version should not require much effort, so once we have it we can afford 
changing it until we all agree that it's well-designed and that it's 
reasonable to continue in extending it.

Cheers,
Filip




From malcolmr at cse.unsw.edu.au  Thu Apr 10 04:48:43 2008
From: malcolmr at cse.unsw.edu.au (Malcolm Ryan)
Date: Thu, 10 Apr 2008 12:48:43 +1000
Subject: [gecode-users] independent subproblems
In-Reply-To: <28808544-1C95-48E7-9091-72A9EF0EB931@ps.uni-sb.de>
References: <D8F391C5-0A6E-4BA3-96B2-619469695572@cse.unsw.edu.au>
	<0BAA8330-78D5-418B-ADF3-B7D82AE146C5@ps.uni-sb.de>
	<4EB0C9E1-338B-4A5B-BC76-610589ABE67B@cse.unsw.edu.au>
	<28808544-1C95-48E7-9091-72A9EF0EB931@ps.uni-sb.de>
Message-ID: <975131F0-B1CF-4AF8-AA3A-C4B902472773@cse.unsw.edu.au>

On 09/04/2008, at 11:12 PM, Guido Tack wrote:
> Malcolm Ryan wrote:
>
>> Reading your paper that sounds like exactly what I'm looking for.  
>> It's
>> still at the experimental stage, I take it? Any plans to integrate  
>> it?
>
> Plans, yes, time to do it, no ;-)  No, seriously, we do have plans  
> to at least ship it as a contribution that you could download and  
> try out, but I can't make any promises when that's going to happen.

So the line in the paper saying "The source code ... is available from  
the authors upon request."?

Malcolm




From tack at ps.uni-sb.de  Thu Apr 10 07:24:32 2008
From: tack at ps.uni-sb.de (Guido Tack)
Date: Thu, 10 Apr 2008 07:24:32 +0200
Subject: [gecode-users] independent subproblems
In-Reply-To: <975131F0-B1CF-4AF8-AA3A-C4B902472773@cse.unsw.edu.au>
References: <D8F391C5-0A6E-4BA3-96B2-619469695572@cse.unsw.edu.au>
	<0BAA8330-78D5-418B-ADF3-B7D82AE146C5@ps.uni-sb.de>
	<4EB0C9E1-338B-4A5B-BC76-610589ABE67B@cse.unsw.edu.au>
	<28808544-1C95-48E7-9091-72A9EF0EB931@ps.uni-sb.de>
	<975131F0-B1CF-4AF8-AA3A-C4B902472773@cse.unsw.edu.au>
Message-ID: <FBA629B9-757C-492B-91BB-E31ED5D94E59@ps.uni-sb.de>

Malcolm Ryan wrote:

> On 09/04/2008, at 11:12 PM, Guido Tack wrote:
>> Malcolm Ryan wrote:
>>
>>> Reading your paper that sounds like exactly what I'm looking for.
>>> It's
>>> still at the experimental stage, I take it? Any plans to integrate
>>> it?
>>
>> Plans, yes, time to do it, no ;-)  No, seriously, we do have plans
>> to at least ship it as a contribution that you could download and
>> try out, but I can't make any promises when that's going to happen.
>
> So the line in the paper saying "The source code ... is available from
> the authors upon request."?

That's of course no problem!  But it's not integrated into the latest  
Gecode, that's how I understood your question.  It uses an older  
version and is not as generic as we could do it now.  And it does not  
work with Gecode/J.

Cheers,
	Guido

-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 2436 bytes
Desc: not available
URL: <http://www.ps.uni-sb.de/pipermail/users/attachments/20080410/770b4ff0/attachment.bin>

From malcolmr at cse.unsw.edu.au  Thu Apr 10 08:30:44 2008
From: malcolmr at cse.unsw.edu.au (Malcolm Ryan)
Date: Thu, 10 Apr 2008 16:30:44 +1000
Subject: [gecode-users] independent subproblems
In-Reply-To: <FBA629B9-757C-492B-91BB-E31ED5D94E59@ps.uni-sb.de>
References: <D8F391C5-0A6E-4BA3-96B2-619469695572@cse.unsw.edu.au>
	<0BAA8330-78D5-418B-ADF3-B7D82AE146C5@ps.uni-sb.de>
	<4EB0C9E1-338B-4A5B-BC76-610589ABE67B@cse.unsw.edu.au>
	<28808544-1C95-48E7-9091-72A9EF0EB931@ps.uni-sb.de>
	<975131F0-B1CF-4AF8-AA3A-C4B902472773@cse.unsw.edu.au>
	<FBA629B9-757C-492B-91BB-E31ED5D94E59@ps.uni-sb.de>
Message-ID: <DC4CBE8C-9807-421E-9344-630F4B2AC778@cse.unsw.edu.au>

Which version does it work with? I was planning on changing to the C++  
version anyway. The only feature of 2.1.0 that I use is the  
extensional() constraint.

Malcolm

On 10/04/2008, at 3:24 PM, Guido Tack wrote:
> Malcolm Ryan wrote:
>
>> On 09/04/2008, at 11:12 PM, Guido Tack wrote:
>>> Malcolm Ryan wrote:
>>>
>>>> Reading your paper that sounds like exactly what I'm looking for.
>>>> It's
>>>> still at the experimental stage, I take it? Any plans to integrate
>>>> it?
>>>
>>> Plans, yes, time to do it, no ;-)  No, seriously, we do have plans
>>> to at least ship it as a contribution that you could download and
>>> try out, but I can't make any promises when that's going to happen.
>>
>> So the line in the paper saying "The source code ... is available  
>> from
>> the authors upon request."?
>
> That's of course no problem!  But it's not integrated into the  
> latest Gecode, that's how I understood your question.  It uses an  
> older version and is not as generic as we could do it now.  And it  
> does not work with Gecode/J.
>
> Cheers,
> 	Guido
>




From Dhananjay.Thiruvady at infotech.monash.edu.au  Fri Apr 11 04:00:12 2008
From: Dhananjay.Thiruvady at infotech.monash.edu.au (Dhananjay Thiruvady)
Date: Fri, 11 Apr 2008 12:00:12 +1000
Subject: [gecode-users] Branching question
Message-ID: <130.194.72.94.1207879091@my.monash.edu.au>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <http://www.ps.uni-sb.de/pipermail/users/attachments/20080411/b6b0039c/attachment.txt>

From banerjed at rsise.anu.edu.au  Fri Apr 11 05:51:04 2008
From: banerjed at rsise.anu.edu.au (Debdeep Banerjee)
Date: Fri, 11 Apr 2008 13:51:04 +1000
Subject: [gecode-users] How does Gecode works ?
Message-ID: <47FEE028.6020106@rsise.anu.edu.au>

Hi,
  I am just wondering how gecode works. What I think is the following

1. We create the variables and domains
2. Then we post constraints
3. Then we define the branching
4. We start searching. ( I am here referring to the DFS search)
       1. the search will do the propagation, if any inconsistency found 
then fail immediately
       2. then branching will produce a variable-value pair through the 
description() method
       3. then commit() will produce a binary branching
             a. variable = value , left
             b. variable != value. right
       4. the search will continue picking up the left branch and call 
the propagation method, if failed, it will try the right branch.

Is this correct ?

My questions are
1. When we post constraints, for example  
    rel <cid:part1.05040408.08010402 at rsise.anu.edu.au>(Space 
<cid:part2.09030509.04060200 at rsise.anu.edu.au>* home, IntVar 
<cid:part3.07050402.03060701 at rsise.anu.edu.au> x0, IntRelType 
<cid:part4.09080505.00030106 at rsise.anu.edu.au> r 
<cid:part5.06050303.09070201 at rsise.anu.edu.au>, int n 
<cid:part6.06090502.08060905 at rsise.anu.edu.au>, IntConLevel 
<cid:part7.01060008.08080700 at rsise.anu.edu.au>, PropKind 
<cid:part8.07080100.00090002 at rsise.anu.edu.au>)
    Does gecode create any propagator for this ? I have looked at the 
rel.cc file the implementation, but it seems like it doesn't create any 
propagator. How does it get called from space->status() ??

2. When I execute the following code      
    x.eq <cid:part9.00000207.03050104 at rsise.anu.edu.au>(home,n) ==> x is 
IntView and n is an Integer.
    is the variable ( IntVar ) that the x refers to, is assigned to 'n' 
immediately ? or it will be assigned when space->status() method is called ?

I am sorry if these questions are too basic. I am trying to understand 
how gecode works a bit more thoroughly.

With regards
Debdeep

-- 
Debdeep Banerjee
PhD Candidate
CSL/RSISE/NICTA
Australian National University
Email: debdeep.banerjee at rsise.anu.edu.au
Web:http://rsise.anu.edu.au/~banerjed





From tack at ps.uni-sb.de  Fri Apr 11 08:55:53 2008
From: tack at ps.uni-sb.de (Guido Tack)
Date: Fri, 11 Apr 2008 08:55:53 +0200
Subject: [gecode-users] How does Gecode works ?
In-Reply-To: <47FEE028.6020106@rsise.anu.edu.au>
References: <47FEE028.6020106@rsise.anu.edu.au>
Message-ID: <9CCE5C2B-78A5-4C69-91AF-6AE8AF30AA9A@ps.uni-sb.de>

Debdeep Banerjee wrote:

> Hi,
>  I am just wondering how gecode works. What I think is the following
>
> 1. We create the variables and domains
> 2. Then we post constraints
> 3. Then we define the branching
> 4. We start searching. ( I am here referring to the DFS search)
>       1. the search will do the propagation, if any inconsistency  
> found
> then fail immediately
>       2. then branching will produce a variable-value pair through the
> description() method
>       3. then commit() will produce a binary branching
>             a. variable = value , left
>             b. variable != value. right
>       4. the search will continue picking up the left branch and call
> the propagation method, if failed, it will try the right branch.
>
> Is this correct ?

Yes, that's the overall picture.

> My questions are
> 1. When we post constraints, for example
>    rel <cid:part1.05040408.08010402 at rsise.anu.edu.au>(Space
> <cid:part2.09030509.04060200 at rsise.anu.edu.au>* home, IntVar
> <cid:part3.07050402.03060701 at rsise.anu.edu.au> x0, IntRelType
> <cid:part4.09080505.00030106 at rsise.anu.edu.au> r
> <cid:part5.06050303.09070201 at rsise.anu.edu.au>, int n
> <cid:part6.06090502.08060905 at rsise.anu.edu.au>, IntConLevel
> <cid:part7.01060008.08080700 at rsise.anu.edu.au>, PropKind
> <cid:part8.07080100.00090002 at rsise.anu.edu.au>)
>    Does gecode create any propagator for this ? I have looked at the
> rel.cc file the implementation, but it seems like it doesn't create  
> any
> propagator. How does it get called from space->status() ??

Basic constraints that can be immediately represented in the variable  
domains are not implemented as propagators.  You can observe the  
difference easily: when you do post(this, x >= 4), all values less  
than 4 will be immediately removed, even without calling status.

> 2. When I execute the following code
>    x.eq <cid:part9.00000207.03050104 at rsise.anu.edu.au>(home,n) ==> x  
> is
> IntView and n is an Integer.
>    is the variable ( IntVar ) that the x refers to, is assigned to 'n'
> immediately ? or it will be assigned when space->status() method is  
> called ?

It is assigned immediately.  In fact, all operations on views have an  
immediate effect on the domains, they never post propagators.  Note  
that eq returns a ModEvent, which tells you what kind of modification  
happened.  You have to check this, and if it signals failure, you are  
responsible for reporting that failure.  That's why these operations  
are only available for views, which are used in propagators and  
branchings.  The variables you use for modelling do not have these  
domain update operations, but you have to call them through the  
appropriate post functions (like rel), which handle failure correctly.

> I am sorry if these questions are too basic. I am trying to understand
> how gecode works a bit more thoroughly.

No problem, you're very welcome to ask basic questions.

Cheers,
	Guido




From cschulte at kth.se  Fri Apr 11 08:57:33 2008
From: cschulte at kth.se (Christian Schulte)
Date: Fri, 11 Apr 2008 08:57:33 +0200
Subject: [gecode-users] Branching question
In-Reply-To: <130.194.72.94.1207879091@my.monash.edu.au>
References: <130.194.72.94.1207879091@my.monash.edu.au>
Message-ID: <000301c89ba1$520f3f30$f62dbd90$@se>

Best solution search is independent of branching. Instead, the model must
have a method

void constrain(Space* s) { ... }

which implements the objective function as follows: The space on which the
method is run (this) must be constrained with respect to the so-far best
solution passed as argument s.

For examples, please see golomb-ruler, photo, tsp, ... in the example
subdirectory.

Christian



--
Christian Schulte, www.ict.kth.se/~cschulte/


-----Original Message-----
From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf
Of Dhananjay Thiruvady
Sent: Friday, April 11, 2008 4:00 AM
To: users at gecode.org
Subject: [gecode-users] Branching question

Hi,

I want to know how I could use branch with minimization of an objective
function?

Thanks,

Dhananjay

_______________________________________________
Gecode users mailing list
users at gecode.org
https://www.gecode.org/mailman/listinfo/gecode-users




From tack at ps.uni-sb.de  Fri Apr 11 08:59:05 2008
From: tack at ps.uni-sb.de (Guido Tack)
Date: Fri, 11 Apr 2008 08:59:05 +0200
Subject: [gecode-users] Branching question
In-Reply-To: <130.194.72.94.1207879091@my.monash.edu.au>
References: <130.194.72.94.1207879091@my.monash.edu.au>
Message-ID: <E6AD51F9-9651-43B1-88F1-80EF6C88953B@ps.uni-sb.de>

Dhananjay Thiruvady wrote:
> I want to know how I could use branch with minimization of an  
> objective function?

If you mean branch and bound, have a look at one of our examples, like  
golomb-ruler.  You typically constrain one variable to be the result  
of the objective function, and then use the constrain method to  
minimize it.  The constrain method is responsible for posting a  
constraint that the next solution that is found must be better than  
the previous one.

Cheers,
	Guido




From tack at ps.uni-sb.de  Fri Apr 11 14:42:42 2008
From: tack at ps.uni-sb.de (Guido Tack)
Date: Fri, 11 Apr 2008 14:42:42 +0200
Subject: [gecode-users] independent subproblems
In-Reply-To: <DC4CBE8C-9807-421E-9344-630F4B2AC778@cse.unsw.edu.au>
References: <D8F391C5-0A6E-4BA3-96B2-619469695572@cse.unsw.edu.au>
	<0BAA8330-78D5-418B-ADF3-B7D82AE146C5@ps.uni-sb.de>
	<4EB0C9E1-338B-4A5B-BC76-610589ABE67B@cse.unsw.edu.au>
	<28808544-1C95-48E7-9091-72A9EF0EB931@ps.uni-sb.de>
	<975131F0-B1CF-4AF8-AA3A-C4B902472773@cse.unsw.edu.au>
	<FBA629B9-757C-492B-91BB-E31ED5D94E59@ps.uni-sb.de>
	<DC4CBE8C-9807-421E-9344-630F4B2AC778@cse.unsw.edu.au>
Message-ID: <1BAE283A-C5A0-47EB-A30E-A9E321EB68F9@ps.uni-sb.de>

Hi everyone,

Decomposition during search (DDS) is now part of the Gecode trunk.  If  
you want to try it out, check out the trunk and configure with the -- 
with-boost-include switch so that the boost graph library is found.

To use DDS in your own models, just replace the call to branch with a  
call to decomposingBranch (with the same arguments).  Then you can use  
Gist as the search engine, which will display decompositions as  
specially marked nodes.  Or you use the countDDS engine provided in  
the search module.

Current limitations (things I haven't ported yet):

  * Global constraints (like distinct) are not decomposed
  * The decomposing branching must come last and cover all variables  
not covered by any earlier branching
  * No search engine that enumerates full solutions yet
  * Only IntVars and BoolVars
  * Probably still buggy ;-)

I'm interested in your feedback!

Cheers,
	Guido

Malcolm Ryan wrote:

> Which version does it work with? I was planning on changing to the C++
> version anyway. The only feature of 2.1.0 that I use is the
> extensional() constraint.
>
> Malcolm
>
> On 10/04/2008, at 3:24 PM, Guido Tack wrote:
>> Malcolm Ryan wrote:
>>
>>> On 09/04/2008, at 11:12 PM, Guido Tack wrote:
>>>> Malcolm Ryan wrote:
>>>>
>>>>> Reading your paper that sounds like exactly what I'm looking for.
>>>>> It's
>>>>> still at the experimental stage, I take it? Any plans to integrate
>>>>> it?
>>>>
>>>> Plans, yes, time to do it, no ;-)  No, seriously, we do have plans
>>>> to at least ship it as a contribution that you could download and
>>>> try out, but I can't make any promises when that's going to happen.
>>>
>>> So the line in the paper saying "The source code ... is available
>>> from
>>> the authors upon request."?
>>
>> That's of course no problem!  But it's not integrated into the
>> latest Gecode, that's how I understood your question.  It uses an
>> older version and is not as generic as we could do it now.  And it
>> does not work with Gecode/J.
>>
>> Cheers,
>> 	Guido
>>
>
>
> _______________________________________________
> Gecode users mailing list
> users at gecode.org
> https://www.gecode.org/mailman/listinfo/gecode-users




From tack at ps.uni-sb.de  Fri Apr 11 16:55:30 2008
From: tack at ps.uni-sb.de (Guido Tack)
Date: Fri, 11 Apr 2008 16:55:30 +0200
Subject: [gecode-users] independent subproblems
In-Reply-To: <1BAE283A-C5A0-47EB-A30E-A9E321EB68F9@ps.uni-sb.de>
References: <D8F391C5-0A6E-4BA3-96B2-619469695572@cse.unsw.edu.au>
	<0BAA8330-78D5-418B-ADF3-B7D82AE146C5@ps.uni-sb.de>
	<4EB0C9E1-338B-4A5B-BC76-610589ABE67B@cse.unsw.edu.au>
	<28808544-1C95-48E7-9091-72A9EF0EB931@ps.uni-sb.de>
	<975131F0-B1CF-4AF8-AA3A-C4B902472773@cse.unsw.edu.au>
	<FBA629B9-757C-492B-91BB-E31ED5D94E59@ps.uni-sb.de>
	<DC4CBE8C-9807-421E-9344-630F4B2AC778@cse.unsw.edu.au>
	<1BAE283A-C5A0-47EB-A30E-A9E321EB68F9@ps.uni-sb.de>
Message-ID: <6BD29A64-C210-496D-90C9-02A593F0EB4B@ps.uni-sb.de>

I wrote earlier today:
> Decomposition during search (DDS) is now part of the Gecode trunk.  If
> you want to try it out, check out the trunk and configure with the --
> with-boost-include switch so that the boost graph library is found.

The boost graph library is now no longer required.

Cheers,
	Guido




From joe.porter at gmail.com  Fri Apr 11 18:26:32 2008
From: joe.porter at gmail.com (Joe Porter)
Date: Fri, 11 Apr 2008 11:26:32 -0500
Subject: [gecode-users] Introductions
Message-ID: <8032a5cd0804110926l7b6de4a6wed41cedc31c31f4d@mail.gmail.com>

Two quick questions for a newcomer to constraint programming:

What is the best overall introduction?

Where can I find a concise description of behavior of Gecode
propagators/search with regards to different consistency levels?

Thanks,
-Joe Porter
ISIS, Vanderbilt University
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.ps.uni-sb.de/pipermail/users/attachments/20080411/7517df22/attachment.htm>

From mmann at informatik.uni-freiburg.de  Fri Apr 11 18:40:59 2008
From: mmann at informatik.uni-freiburg.de (Martin Mann)
Date: Fri, 11 Apr 2008 18:40:59 +0200
Subject: [gecode-users] Introductions
In-Reply-To: <8032a5cd0804110926l7b6de4a6wed41cedc31c31f4d@mail.gmail.com>
References: <8032a5cd0804110926l7b6de4a6wed41cedc31c31f4d@mail.gmail.com>
Message-ID: <47FF949B.8050801@informatik.uni-freiburg.de>


Hi Joe,

I found the "Online Guide to Constraint Programming" by Roman Bartak 
quite usefull for an introduction.
http://kti.mff.cuni.cz/~bartak/constraints/

But it doesnt correspond to all details of the Gecode architecture and 
is a general introduction into constraint programming terms and 
algorithms. But knowing this it should be easy to solve your own 
constraint problems using the Gecode libs.

Unfortunatly, up to now there exists no general introduction into the 
Gecode propagation and search stuff. But as far as I know it is in 
preparation.
Maybe the publications will help you:
http://www.gecode.org/publications.html

Hope that's what you are looking for,

Martin



Joe Porter schrieb:
> Two quick questions for a newcomer to constraint programming:
> 
> What is the best overall introduction?
> 
> Where can I find a concise description of behavior of Gecode
> propagators/search with regards to different consistency levels?
> 
> Thanks,
> -Joe Porter
> ISIS, Vanderbilt University
> 
> 
> 
> ------------------------------------------------------------------------
> 
> _______________________________________________
> Gecode users mailing list
> users at gecode.org
> https://www.gecode.org/mailman/listinfo/gecode-users

-- 
Martin Mann, Dipl. Bioinf.
Bioinformatics - Inst. of Computer Science
Albert-Ludwigs-University Freiburg
Tel: ++49-761-203-8259
Fax: ++49-761-203-7462
http://www.bioinf.uni-freiburg.de/~mmann/



From stanio at cs.tu-berlin.de  Fri Apr 11 19:37:35 2008
From: stanio at cs.tu-berlin.de (stanio at cs.tu-berlin.de)
Date: Fri, 11 Apr 2008 19:37:35 +0200
Subject: [gecode-users] Introductions
In-Reply-To: <47FF949B.8050801@informatik.uni-freiburg.de>
References: <8032a5cd0804110926l7b6de4a6wed41cedc31c31f4d@mail.gmail.com>
	<47FF949B.8050801@informatik.uni-freiburg.de>
Message-ID: <20080411173735.GA23800@fiesta.cs.tu-berlin.de>

Hi, 

* Martin Mann <mmann at informatik.uni-freiburg.de> [2008-04-11 19:12]:
> I found the "Online Guide to Constraint Programming" by Roman Bartak 
> quite usefull for an introduction.
> http://kti.mff.cuni.cz/~bartak/constraints/
> 
> But it doesnt correspond to all details of the Gecode architecture and 

Parallel to reading Bartak, you may want to keep an eye on the practical
side. If you are C++ user, you might never come to the Gecode/J
introduction page  http://www.gecode.org/gecodej/doc/PageIntro.html , which
I found useful as starting point.

-- 
 cheers
 stanio_



From Chris.vanBuskirk at vanderbilt.edu  Fri Apr 11 20:20:57 2008
From: Chris.vanBuskirk at vanderbilt.edu (Chris vanBuskirk)
Date: Fri, 11 Apr 2008 13:20:57 -0500
Subject: [gecode-users] Introductions
In-Reply-To: <20080411173735.GA23800@fiesta.cs.tu-berlin.de>
References: <8032a5cd0804110926l7b6de4a6wed41cedc31c31f4d@mail.gmail.com><47FF949B.8050801@informatik.uni-freiburg.de>
	<20080411173735.GA23800@fiesta.cs.tu-berlin.de>
Message-ID: <013701c89c00$ca264d60$ab813b81@isis.vanderbilt.edu>

Joe,

> Parallel to reading Bartak
>
See http://kti.mff.cuni.cz/~bartak/constraints/ for example.  


In my opinion, Marriott and Stucky's __Programming_with_Constraints__ is a
decent introductory text.  

I also have copies of 

-o- __Essentials_of_Constraint_Programming__ 
    Fruhwirth & Abdennadher
    ~100pgs

-o- __Constraint_Processing__
    Rina Dechter
    Nice theoretical perspectives

-o- __Constraint-Based_Scheduling__ 
    Baptiste, Le Pape & Nuijten
    Bridges the gap between AI and linear programming;     
    * This might be the one you're after, based on your email

If this is the Joe Porter that I think it is, you may borrow them if you
want to walk over here.  ;-)


--
Chris

Chris.vanBuskirk at vanderbilt.edu
Institute for Software Integrated Systems
Vanderbilt University





From Chris.vanBuskirk at vanderbilt.edu  Fri Apr 11 20:32:48 2008
From: Chris.vanBuskirk at vanderbilt.edu (Chris vanBuskirk)
Date: Fri, 11 Apr 2008 13:32:48 -0500
Subject: [gecode-users] Introductions
References: <8032a5cd0804110926l7b6de4a6wed41cedc31c31f4d@mail.gmail.com><47FF949B.8050801@informatik.uni-freiburg.de>
	<20080411173735.GA23800@fiesta.cs.tu-berlin.de> 
Message-ID: <013801c89c02$717d16b0$ab813b81@isis.vanderbilt.edu>

Ooops, I forgot Christian's book (which is freely available as a PDF):

  __Programming_Constraint_Services__ 

But, that might be a little dated.  I think Gecode is more focused on the
practial implementation of efficient propagation and less about the concept
of Spaces, which that book concentrates on.  I *believe* there's an expert
lurking around on this list that might be in a better position to offer an
opinion on that, though ... 


Regards,
  Chris





From banerjed at rsise.anu.edu.au  Sat Apr 12 00:57:01 2008
From: banerjed at rsise.anu.edu.au (Debdeep Banerjee)
Date: Sat, 12 Apr 2008 08:57:01 +1000
Subject: [gecode-users] Introductions
In-Reply-To: <8032a5cd0804110926l7b6de4a6wed41cedc31c31f4d@mail.gmail.com>
References: <8032a5cd0804110926l7b6de4a6wed41cedc31c31f4d@mail.gmail.com>
Message-ID: <47FFECBD.7020805@rsise.anu.edu.au>

Joe Porter wrote:
>
> What is the best overall introduction?
Try this, it may give you a good start
http://www.math.unipd.it/~frossi/chapter4.pdf


With regards
Debdeep

-- 
Debdeep Banerjee
PhD Candidate
CSL/RSISE/NICTA
Australian National University
Email: debdeep.banerjee at rsise.anu.edu.au
Web:http://rsise.anu.edu.au/~banerjed





From katya.alahverdzhieva at gmail.com  Sun Apr 13 17:33:13 2008
From: katya.alahverdzhieva at gmail.com (Katya Alahverdzhieva)
Date: Sun, 13 Apr 2008 17:33:13 +0200
Subject: [gecode-users] Installation problems on CygWin
Message-ID: <dc06bbe10804130833g27903969hb386553e68fcb8e6@mail.gmail.com>

Hello Gecoders,

I'm trying to run an application (Tulipa) which uses Gecode/J. I'm using
Cygwin on Windows XP (SP2, German). I get the error message which is posted
at the bottom of this email. Here is a summary of what I did:

 - Gecode-2.1.1.msi doesn't work for me
    - reports that I don't have enough disk space
       - that's obviously wrong, I have GBs of free space
       - Google tells me others have had that problem
    - I decided to compile manually

 - installed gecode-2.1.1.tar.gz
    - so, in a Cygwin shell:
       - ./configure CC="gcc -mno-cygwin" CXX="g++ -mno-cygwin"
       - make
       - make install
    - this created a bunch of .a libraries in /usr/local/lib

 - installed gecodej-2.1.1.tar.gz
    - again from a Cygwin shell:
       - ./configure CC="gcc -mno-cygwin" CXX="g++ -mno-cygwin"
       - make
       - make install
    - this placed the GecodeJ.jar file in
C:\Programme\Java\jdk1.6.0_05\jre\lib\ext
    - and also the libgecodej.dll in Cygwin's /usr/local/bin (which is
c:\Cygwin\usr\local\bin)

 - now I try to my application:
    - java -Xmx512m -jar TuLiPA-1.0.7.jar

    - whether I run it in the Cygwin shell or the native Windows shell, I
get this error message:
       - "no gecodej in java.library.path"
    - if I fix the path to point to libgecodej.dll:
       - java -Djava.library.path=c:\cygwin\usr\local\bin -Xmx512m -jar
TuLiPA-1.0.7.jar
       - it still doesn't work
    - but if I rename c:\cygwin\usr\local\bin\libgecodej.dll to
"gecodej.dll", I get this:

JarClassLoader: Warning: Unable to load native library:
java.lang.NullPointerException
Exception in thread "main" java.lang.reflect.InvocationTargetException
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
        at java.lang.reflect.Method.invoke(Unknown Source)
        at com.simontuffs.onejar.Boot.run(Boot.java:306)
        at com.simontuffs.onejar.Boot.main(Boot.java:159)
Caused by: java.lang.UnsatisfiedLinkError:
org.gecode.GecodeJNI.swig_module_init()V
        at org.gecode.GecodeJNI.swig_module_init(Native Method)
[ ... and so on ... ]


... and from here I'm lost. It seems the DLL is found, but can't be loaded?
I'm confused.

I compiled the .dll within Cygwin, Java is a native Windows app, so the .dll
is loaded outside the Cygwin environment. I did compile it with -mno-cygwin
though...

Any thoughts? Hints?

thanks a lot in advance,
Katya
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.ps.uni-sb.de/pipermail/users/attachments/20080413/b312e66d/attachment.htm>

From tack at ps.uni-sb.de  Sun Apr 13 18:41:22 2008
From: tack at ps.uni-sb.de (Guido Tack)
Date: Sun, 13 Apr 2008 18:41:22 +0200
Subject: [gecode-users] Installation problems on CygWin
In-Reply-To: <dc06bbe10804130833g27903969hb386553e68fcb8e6@mail.gmail.com>
References: <dc06bbe10804130833g27903969hb386553e68fcb8e6@mail.gmail.com>
Message-ID: <13F545D2-90A0-43A9-BD4B-26D8BF4B0BF2@ps.uni-sb.de>

Katya Alahverdzhieva wrote:

> Hello Gecoders,
>
> I'm trying to run an application (Tulipa) which uses Gecode/J. I'm  
> using Cygwin on Windows XP (SP2, German). I get the error message  
> which is posted at the bottom of this email. Here is a summary of  
> what I did:
>
>  - Gecode-2.1.1.msi doesn't work for me
>     - reports that I don't have enough disk space
>        - that's obviously wrong, I have GBs of free space
>        - Google tells me others have had that problem
>     - I decided to compile manually
>
>  - installed gecode-2.1.1.tar.gz
>     - so, in a Cygwin shell:
>        - ./configure CC="gcc -mno-cygwin" CXX="g++ -mno-cygwin"

I guess the libraries generated with gcc (even with -mno-cygwin) don't  
work with Java.  It seems the library can be loaded, but the symbol  
names don't match.

We have not been able to get this setup running, either (I remember  
trying this a while ago), but only support the (freely available)  
Microsoft C++ compiler for Gecode/J on Window.  Please try that  
compiler, it should work without problems.

Cheers,
	Guido
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.ps.uni-sb.de/pipermail/users/attachments/20080413/a2eaa617/attachment.htm>

From filip.konvicka at logis.cz  Mon Apr 14 14:28:03 2008
From: filip.konvicka at logis.cz (=?UTF-8?B?RmlsaXAgS29udmnEjWth?=)
Date: Mon, 14 Apr 2008 14:28:03 +0200
Subject: [gecode-users] kernel issues
Message-ID: <48034DD3.7040801@logis.cz>

Hi,

so Lubos started working on the FloatVar implementation and he's 
discovered something that looks like a bug in Gecode. Initially, we just 
copied "integer.vis" to "float.vis" and renamed the identifiers so we 
got "_FLOAT_" instead of "_INT_" everywhere. (Later on, we'll probably 
at least remove the "DOM" modification event and propagation condition.)

So in short:

[General]
Name:		Float
Ifdef:		GECODE_HAS_FLOAT_VARS
Namespace:	Gecode::Float

and the rest goes exactly the same as with IntVar.

Then we tried posting a propagator on a FloatVar, but unexpectedly 
nothing happened. Lubos tracked this down to the following code fragment 
  in kernel/var-type.icc:

case ME_FLOAT_BND:
      {
        static const Gecode::ModEvent me_c = (
          ((ME_FLOAT_NONE ^ ME_FLOAT_BND ) <<  0) |
          ((ME_FLOAT_VAL  ^ ME_FLOAT_VAL ) <<  4) |
          ((ME_FLOAT_BND  ^ ME_FLOAT_BND ) <<  8) |
          ((ME_FLOAT_DOM  ^ ME_FLOAT_BND ) << 12)
        );
        Gecode::ModEvent me_o = (med & med_mask) >> med_fst;
        Gecode::ModEvent me_n = (me_c >> (me_o << 2)) & med_mask;
        if (me_n == 0)
          return false;
        med ^= me_n << med_fst;
        break;
      }

This is similar to what is generated for IntVars (ME_INT_BND), but it 
seems that the condition (me_n == 0) always evaluates to true for 
FloatVars, and so nothing ever happens.

Lubos fixed this by changing the appropriate line to

  Gecode::ModEvent me_n = (me_c >> (me_o << 2)) & (med_mask >> med_fst);

This seems logical to me. Do you know what script to fix in order to get 
it generated this way?

Thanks,
Filip




From malcolmr at cse.unsw.edu.au  Mon Apr 14 06:40:30 2008
From: malcolmr at cse.unsw.edu.au (Malcolm Ryan)
Date: Mon, 14 Apr 2008 14:40:30 +1000
Subject: [gecode-users] Tracing propagation
Message-ID: <613311F2-F743-4A29-B16D-1A13A957E1A9@cse.unsw.edu.au>

It would be really handy if there was some way to trace the constraint  
propagation process. I am currently facing a problem which is failing  
for reasons I cannot work out. I can trace it in Gist as far as the  
relevant choice, but I don't understand why it is causing a failure.  
If I could trace the constraint propagation between the branch and the  
failure I might be able to see what is going wrong. As it stands, I am  
left simulating the propagation by hand, which is very tedious.

I realise that identifying particular constraints is difficult, but  
even if you could just have a list of the variables that are affected  
and the way in which there domain changed, it would be something.

Malcolm



From malcolmr at cse.unsw.edu.au  Mon Apr 14 11:01:31 2008
From: malcolmr at cse.unsw.edu.au (Malcolm Ryan)
Date: Mon, 14 Apr 2008 19:01:31 +1000
Subject: [gecode-users] Bugs in Gecode/J
Message-ID: <66C23557-17D2-43EA-A090-FC9009595BE4@cse.unsw.edu.au>

My Gecode/J constraint program is occasionally crashing with the  
message:

pure virtual method called
terminate called without an active exception

and occasionally with:

Invalid memory access of location 00000000 eip=00000000

I can't say for sure, but I don't think they are happening in my code.  
I'm having trouble tracking down where in the code this is happening  
(as they are not proper Java exceptions and can't be caught). I added  
some debug  printfs and the errors changed. Go figure.

Any suggestions?

Malcolm



From zayenz at gmail.com  Tue Apr 15 08:07:11 2008
From: zayenz at gmail.com (Mikael Zayenz Lagerkvist)
Date: Tue, 15 Apr 2008 08:07:11 +0200
Subject: [gecode-users] Bugs in Gecode/J
In-Reply-To: <66C23557-17D2-43EA-A090-FC9009595BE4@cse.unsw.edu.au>
References: <66C23557-17D2-43EA-A090-FC9009595BE4@cse.unsw.edu.au>
Message-ID: <63b5c8b00804142307v5489737ch6e308c7bc1045628@mail.gmail.com>

Hi,

When the JVM crashes it leaves a file called hs_err_pid????.log
(replace ???? by some string of numbers), which contains a lot of very
interesting information. In particular, it contains the current stack
of the JVM, as well as as much of the current native stack as
possible. To debug what has happened, these are the files to look at.
If you need help with a particular error, then you should attach such
a file.

Cheers,
Mikael

On Mon, Apr 14, 2008 at 11:01 AM, Malcolm Ryan <malcolmr at cse.unsw.edu.au> wrote:
> My Gecode/J constraint program is occasionally crashing with the
>  message:
>
>  pure virtual method called
>  terminate called without an active exception
>
>  and occasionally with:
>
>  Invalid memory access of location 00000000 eip=00000000
>
>  I can't say for sure, but I don't think they are happening in my code.
>  I'm having trouble tracking down where in the code this is happening
>  (as they are not proper Java exceptions and can't be caught). I added
>  some debug  printfs and the errors changed. Go figure.
>
>  Any suggestions?
>
>  Malcolm
>
>  _______________________________________________
>  Gecode users mailing list
>  users at gecode.org
>  https://www.gecode.org/mailman/listinfo/gecode-users
>



-- 
Mikael Zayenz Lagerkvist, http://www.ict.kth.se/~zayenz/



From malcolmr at cse.unsw.edu.au  Tue Apr 15 10:14:31 2008
From: malcolmr at cse.unsw.edu.au (Malcolm Ryan)
Date: Tue, 15 Apr 2008 18:14:31 +1000
Subject: [gecode-users] Bugs in Gecode/J
In-Reply-To: <63b5c8b00804142307v5489737ch6e308c7bc1045628@mail.gmail.com>
References: <66C23557-17D2-43EA-A090-FC9009595BE4@cse.unsw.edu.au>
	<63b5c8b00804142307v5489737ch6e308c7bc1045628@mail.gmail.com>
Message-ID: <AD041900-1A0B-48FA-AEC1-90253AAF2C16@cse.unsw.edu.au>

I can't find any such file. Where does it get left?

Malcolm

On 15/04/2008, at 4:07 PM, Mikael Zayenz Lagerkvist wrote:
> Hi,
>
> When the JVM crashes it leaves a file called hs_err_pid????.log
> (replace ???? by some string of numbers), which contains a lot of very
> interesting information. In particular, it contains the current stack
> of the JVM, as well as as much of the current native stack as
> possible. To debug what has happened, these are the files to look at.
> If you need help with a particular error, then you should attach such
> a file.
>
> Cheers,
> Mikael
>
> On Mon, Apr 14, 2008 at 11:01 AM, Malcolm Ryan <malcolmr at cse.unsw.edu.au 
> > wrote:
>> My Gecode/J constraint program is occasionally crashing with the
>> message:
>>
>> pure virtual method called
>> terminate called without an active exception
>>
>> and occasionally with:
>>
>> Invalid memory access of location 00000000 eip=00000000
>>
>> I can't say for sure, but I don't think they are happening in my  
>> code.
>> I'm having trouble tracking down where in the code this is happening
>> (as they are not proper Java exceptions and can't be caught). I added
>> some debug  printfs and the errors changed. Go figure.
>>
>> Any suggestions?
>>
>> Malcolm
>>
>> _______________________________________________
>> Gecode users mailing list
>> users at gecode.org
>> https://www.gecode.org/mailman/listinfo/gecode-users
>>
>
>
>
> -- 
> Mikael Zayenz Lagerkvist, http://www.ict.kth.se/~zayenz/




From zayenz at gmail.com  Tue Apr 15 10:28:01 2008
From: zayenz at gmail.com (Mikael Zayenz Lagerkvist)
Date: Tue, 15 Apr 2008 10:28:01 +0200
Subject: [gecode-users] Bugs in Gecode/J
In-Reply-To: <AD041900-1A0B-48FA-AEC1-90253AAF2C16@cse.unsw.edu.au>
References: <66C23557-17D2-43EA-A090-FC9009595BE4@cse.unsw.edu.au>
	<63b5c8b00804142307v5489737ch6e308c7bc1045628@mail.gmail.com>
	<AD041900-1A0B-48FA-AEC1-90253AAF2C16@cse.unsw.edu.au>
Message-ID: <63b5c8b00804150128y2909f11dkc958b2fb6ed1845c@mail.gmail.com>

Hi,

That is strange. The error report is left in programs working
directory (or a temporary directory, see below for the full
explanation from Sun). I can only think of two reasons this would not
happen
 1) A bug in the JVM that makes it crash hard. No idea how to handle this case
 2) You are not using Suns JVM, in which case I don't know how to help
you, since we don't support that.

If you can distill a single file that I could try that gives the
error, you could send it to me for testing.

Cheers,
Mikael

hs_er_pid file location according to Sun:
  Before 1.5, after a fatal error, JVM prints the error log to stdout and then
  saves the same information to an hs_err log file. By default, it is saved in
  current working directory; if for some reason the current directory is not
  writable the hs_err log is saved to the system temporary directory (/tmp on
  Solaris and Linux; or the result from GetTempPath() on Windows). If there is
  no temporary directory, JVM will not save the hs_err log (because the same
  information is already printed to stdout).

  Since 1.5 because JVM prints a lot more information after crash, it would be
  too much for stdout. Instead, JVM only prints a brief message to stdout and
  detailed information is saved in hs_err log. Again, to determine the location
  for hs_err, JVM first tries current directory; if it's not writable, JVM uses
  temp directory; unlike 1.4.2, if temp directory is still not usable, JVM will
  print the detailed message to stdout.


On Tue, Apr 15, 2008 at 10:14 AM, Malcolm Ryan <malcolmr at cse.unsw.edu.au> wrote:
> I can't find any such file. Where does it get left?
>
>  Malcolm
>
>
>
>  On 15/04/2008, at 4:07 PM, Mikael Zayenz Lagerkvist wrote:
>  > Hi,
>  >
>  > When the JVM crashes it leaves a file called hs_err_pid????.log
>  > (replace ???? by some string of numbers), which contains a lot of very
>  > interesting information. In particular, it contains the current stack
>  > of the JVM, as well as as much of the current native stack as
>  > possible. To debug what has happened, these are the files to look at.
>  > If you need help with a particular error, then you should attach such
>  > a file.
>  >
>  > Cheers,
>  > Mikael
>  >
>  > On Mon, Apr 14, 2008 at 11:01 AM, Malcolm Ryan <malcolmr at cse.unsw.edu.au
>  > > wrote:
>  >> My Gecode/J constraint program is occasionally crashing with the
>  >> message:
>  >>
>  >> pure virtual method called
>  >> terminate called without an active exception
>  >>
>  >> and occasionally with:
>  >>
>  >> Invalid memory access of location 00000000 eip=00000000
>  >>
>  >> I can't say for sure, but I don't think they are happening in my
>  >> code.
>  >> I'm having trouble tracking down where in the code this is happening
>  >> (as they are not proper Java exceptions and can't be caught). I added
>  >> some debug  printfs and the errors changed. Go figure.
>  >>
>  >> Any suggestions?
>  >>
>  >> Malcolm
>  >>
>  >> _______________________________________________
>  >> Gecode users mailing list
>  >> users at gecode.org
>  >> https://www.gecode.org/mailman/listinfo/gecode-users
>  >>
>  >
>  >
>  >
>  > --
>  > Mikael Zayenz Lagerkvist, http://www.ict.kth.se/~zayenz/
>
>
>  _______________________________________________
>  Gecode users mailing list
>  users at gecode.org
>  https://www.gecode.org/mailman/listinfo/gecode-users
>



-- 
Mikael Zayenz Lagerkvist, http://www.ict.kth.se/~zayenz/



From malcolmr at cse.unsw.edu.au  Tue Apr 15 10:37:22 2008
From: malcolmr at cse.unsw.edu.au (Malcolm Ryan)
Date: Tue, 15 Apr 2008 18:37:22 +1000
Subject: [gecode-users] Bugs in Gecode/J
In-Reply-To: <63b5c8b00804150128y2909f11dkc958b2fb6ed1845c@mail.gmail.com>
References: <66C23557-17D2-43EA-A090-FC9009595BE4@cse.unsw.edu.au>
	<63b5c8b00804142307v5489737ch6e308c7bc1045628@mail.gmail.com>
	<AD041900-1A0B-48FA-AEC1-90253AAF2C16@cse.unsw.edu.au>
	<63b5c8b00804150128y2909f11dkc958b2fb6ed1845c@mail.gmail.com>
Message-ID: <AC437191-321F-4FF1-9D76-5AE7A72753CE@cse.unsw.edu.au>

I'm using whatever the standard Java is on Mac OSX 10.5. The version  
string shows:

java version "1.5.0_13"
Java(TM) 2 Runtime Environment, Standard Edition (build 1.5.0_13- 
b05-237)
Java HotSpot(TM) Client VM (build 1.5.0_13-119, mixed mode, sharing)

I'm in the process of compiling Gecode on another (linux) machine.  
I'll run it there and see what happens.

For very large problems it is crashing with the message:

java(2404,0xb0801000) malloc: *** mmap(size=65536) failed (error  
code=12)
*** error: can't allocate region
*** set a breakpoint in malloc_error_break to debug
terminate called after throwing an instance of 'Gecode::MemoryExhausted'
   what():  Memory: Heap memory exhausted

What determines the maximum heap size available to Gecode?

Malcolm

PS: I know it isn't your problem, but I've got a paper deadline in a  
week that I'm trying to make, and these crashes are standing between  
me and my experimental results. Any help you can offer would be  
gratefully accepted (and acknowledged).

On 15/04/2008, at 6:28 PM, Mikael Zayenz Lagerkvist wrote:
> Hi,
>
> That is strange. The error report is left in programs working
> directory (or a temporary directory, see below for the full
> explanation from Sun). I can only think of two reasons this would not
> happen
> 1) A bug in the JVM that makes it crash hard. No idea how to handle  
> this case
> 2) You are not using Suns JVM, in which case I don't know how to help
> you, since we don't support that.
>
> If you can distill a single file that I could try that gives the
> error, you could send it to me for testing.
>
> Cheers,
> Mikael
>
> hs_er_pid file location according to Sun:
>  Before 1.5, after a fatal error, JVM prints the error log to stdout  
> and then
>  saves the same information to an hs_err log file. By default, it is  
> saved in
>  current working directory; if for some reason the current directory  
> is not
>  writable the hs_err log is saved to the system temporary directory  
> (/tmp on
>  Solaris and Linux; or the result from GetTempPath() on Windows). If  
> there is
>  no temporary directory, JVM will not save the hs_err log (because  
> the same
>  information is already printed to stdout).
>
>  Since 1.5 because JVM prints a lot more information after crash, it  
> would be
>  too much for stdout. Instead, JVM only prints a brief message to  
> stdout and
>  detailed information is saved in hs_err log. Again, to determine  
> the location
>  for hs_err, JVM first tries current directory; if it's not  
> writable, JVM uses
>  temp directory; unlike 1.4.2, if temp directory is still not  
> usable, JVM will
>  print the detailed message to stdout.
>
>
> On Tue, Apr 15, 2008 at 10:14 AM, Malcolm Ryan <malcolmr at cse.unsw.edu.au 
> > wrote:
>> I can't find any such file. Where does it get left?
>>
>> Malcolm
>>
>>
>>
>> On 15/04/2008, at 4:07 PM, Mikael Zayenz Lagerkvist wrote:
>>> Hi,
>>>
>>> When the JVM crashes it leaves a file called hs_err_pid????.log
>>> (replace ???? by some string of numbers), which contains a lot of  
>>> very
>>> interesting information. In particular, it contains the current  
>>> stack
>>> of the JVM, as well as as much of the current native stack as
>>> possible. To debug what has happened, these are the files to look  
>>> at.
>>> If you need help with a particular error, then you should attach  
>>> such
>>> a file.
>>>
>>> Cheers,
>>> Mikael
>>>
>>> On Mon, Apr 14, 2008 at 11:01 AM, Malcolm Ryan <malcolmr at cse.unsw.edu.au
>>>> wrote:
>>>> My Gecode/J constraint program is occasionally crashing with the
>>>> message:
>>>>
>>>> pure virtual method called
>>>> terminate called without an active exception
>>>>
>>>> and occasionally with:
>>>>
>>>> Invalid memory access of location 00000000 eip=00000000
>>>>
>>>> I can't say for sure, but I don't think they are happening in my
>>>> code.
>>>> I'm having trouble tracking down where in the code this is  
>>>> happening
>>>> (as they are not proper Java exceptions and can't be caught). I  
>>>> added
>>>> some debug  printfs and the errors changed. Go figure.
>>>>
>>>> Any suggestions?
>>>>
>>>> Malcolm
>>>>
>>>> _______________________________________________
>>>> Gecode users mailing list
>>>> users at gecode.org
>>>> https://www.gecode.org/mailman/listinfo/gecode-users
>>>>
>>>
>>>
>>>
>>> --
>>> Mikael Zayenz Lagerkvist, http://www.ict.kth.se/~zayenz/
>>
>>
>> _______________________________________________
>> Gecode users mailing list
>> users at gecode.org
>> https://www.gecode.org/mailman/listinfo/gecode-users
>>
>
>
>
> -- 
> Mikael Zayenz Lagerkvist, http://www.ict.kth.se/~zayenz/




From zayenz at gmail.com  Tue Apr 15 10:52:13 2008
From: zayenz at gmail.com (Mikael Zayenz Lagerkvist)
Date: Tue, 15 Apr 2008 10:52:13 +0200
Subject: [gecode-users] Bugs in Gecode/J
In-Reply-To: <AC437191-321F-4FF1-9D76-5AE7A72753CE@cse.unsw.edu.au>
References: <66C23557-17D2-43EA-A090-FC9009595BE4@cse.unsw.edu.au>
	<63b5c8b00804142307v5489737ch6e308c7bc1045628@mail.gmail.com>
	<AD041900-1A0B-48FA-AEC1-90253AAF2C16@cse.unsw.edu.au>
	<63b5c8b00804150128y2909f11dkc958b2fb6ed1845c@mail.gmail.com>
	<AC437191-321F-4FF1-9D76-5AE7A72753CE@cse.unsw.edu.au>
Message-ID: <63b5c8b00804150152k6ef1c78ei2002ee3a125e7469@mail.gmail.com>

On Tue, Apr 15, 2008 at 10:37 AM, Malcolm Ryan <malcolmr at cse.unsw.edu.au> wrote:
>  java version "1.5.0_13"
>  Java(TM) 2 Runtime Environment, Standard Edition (build 1.5.0_13-b05-237)
>  Java HotSpot(TM) Client VM (build 1.5.0_13-119, mixed mode, sharing)

That is the Sun JVM (it is called HotSpot).

>  For very large problems it is crashing with the message:
>
>  java(2404,0xb0801000) malloc: *** mmap(size=65536) failed (error code=12)
>  *** error: can't allocate region
>  *** set a breakpoint in malloc_error_break to debug
>  terminate called after throwing an instance of 'Gecode::MemoryExhausted'
>   what():  Memory: Heap memory exhausted

This means that the Gecode native library has thrown an exception: If
malloc returns NULL, then Gecode exits with a MemoryExhausted
exception.

>  What determines the maximum heap size available to Gecode?

The system limits (these can be inspected, for example, using ulimit
on bash in Linux). Unless the system or the JVM restricts the amount
of memory that can be allocated by native components, I would suggest
that you try things like increasing recomputation depth and/or
removing memory-expensive propagators (such as distinct with
ICL_VAL/ICL_BND vs. ICL_DOM).

Cheers,
Mikael

-- 
Mikael Zayenz Lagerkvist, http://www.ict.kth.se/~zayenz/



From malcolmr at cse.unsw.edu.au  Tue Apr 15 11:03:36 2008
From: malcolmr at cse.unsw.edu.au (Malcolm Ryan)
Date: Tue, 15 Apr 2008 19:03:36 +1000
Subject: [gecode-users] Bugs in Gecode/J
In-Reply-To: <63b5c8b00804150152k6ef1c78ei2002ee3a125e7469@mail.gmail.com>
References: <66C23557-17D2-43EA-A090-FC9009595BE4@cse.unsw.edu.au>
	<63b5c8b00804142307v5489737ch6e308c7bc1045628@mail.gmail.com>
	<AD041900-1A0B-48FA-AEC1-90253AAF2C16@cse.unsw.edu.au>
	<63b5c8b00804150128y2909f11dkc958b2fb6ed1845c@mail.gmail.com>
	<AC437191-321F-4FF1-9D76-5AE7A72753CE@cse.unsw.edu.au>
	<63b5c8b00804150152k6ef1c78ei2002ee3a125e7469@mail.gmail.com>
Message-ID: <81F9CF98-04CA-4F38-AAE9-762315841C0D@cse.unsw.edu.au>


On 15/04/2008, at 6:52 PM, Mikael Zayenz Lagerkvist wrote:
>> What determines the maximum heap size available to Gecode?
>
> The system limits (these can be inspected, for example, using ulimit
> on bash in Linux). Unless the system or the JVM restricts the amount
> of memory that can be allocated by native components,

'ulimit' responds with "unlimited" on my machine, so it would appear  
that the limit is being imposed by Java. Hmm.

If you're willing to try it out, all my code is available in a jar  
file at:

http://www.cse.unsw.edu.au/~malcolmr/aiide08.jar

To run it do:

jar -xf aiide08.jar run1 Maps
chmod +x run1
./run1 7 8

The two numbers after run1 determine the particular experiment.  
Experiment 7 8 is one of the ones that causes a crash [1].

Malcolm

[1] Assuming that the random number generator is consistent across  
environments (dubious)





From malcolmr at cse.unsw.edu.au  Tue Apr 15 11:11:42 2008
From: malcolmr at cse.unsw.edu.au (Malcolm Ryan)
Date: Tue, 15 Apr 2008 19:11:42 +1000
Subject: [gecode-users] Bugs in Gecode/J
In-Reply-To: <AC437191-321F-4FF1-9D76-5AE7A72753CE@cse.unsw.edu.au>
References: <66C23557-17D2-43EA-A090-FC9009595BE4@cse.unsw.edu.au>
	<63b5c8b00804142307v5489737ch6e308c7bc1045628@mail.gmail.com>
	<AD041900-1A0B-48FA-AEC1-90253AAF2C16@cse.unsw.edu.au>
	<63b5c8b00804150128y2909f11dkc958b2fb6ed1845c@mail.gmail.com>
	<AC437191-321F-4FF1-9D76-5AE7A72753CE@cse.unsw.edu.au>
Message-ID: <DC541A15-C4AA-405A-B2B4-5023849BFC65@cse.unsw.edu.au>


On 15/04/2008, at 6:37 PM, Malcolm Ryan wrote:
> I'm in the process of compiling Gecode on another (linux) machine.
> I'll run it there and see what happens.

I've made gecode-2.1.1 without any problems, but when I try to  
configure gecodej-2.1.1, I get:

[malcolmr at wagner gecodej-2.1.1]$ ./configure
...
configure: error: cannot find java include files

Malcolm



From zayenz at gmail.com  Tue Apr 15 11:18:34 2008
From: zayenz at gmail.com (Mikael Zayenz Lagerkvist)
Date: Tue, 15 Apr 2008 11:18:34 +0200
Subject: [gecode-users] Bugs in Gecode/J
In-Reply-To: <81F9CF98-04CA-4F38-AAE9-762315841C0D@cse.unsw.edu.au>
References: <66C23557-17D2-43EA-A090-FC9009595BE4@cse.unsw.edu.au>
	<63b5c8b00804142307v5489737ch6e308c7bc1045628@mail.gmail.com>
	<AD041900-1A0B-48FA-AEC1-90253AAF2C16@cse.unsw.edu.au>
	<63b5c8b00804150128y2909f11dkc958b2fb6ed1845c@mail.gmail.com>
	<AC437191-321F-4FF1-9D76-5AE7A72753CE@cse.unsw.edu.au>
	<63b5c8b00804150152k6ef1c78ei2002ee3a125e7469@mail.gmail.com>
	<81F9CF98-04CA-4F38-AAE9-762315841C0D@cse.unsw.edu.au>
Message-ID: <63b5c8b00804150218i76930a9bsb480de0d038232fe@mail.gmail.com>

On Tue, Apr 15, 2008 at 11:03 AM, Malcolm Ryan <malcolmr at cse.unsw.edu.au> wrote:
>  On 15/04/2008, at 6:52 PM, Mikael Zayenz Lagerkvist wrote:
>  If you're willing to try it out, all my code is available in a jar file at:
>
>  http://www.cse.unsw.edu.au/~malcolmr/aiide08.jar
>
>  To run it do:
>
>  jar -xf aiide08.jar run1 Maps
>  chmod +x run1
>  ./run1 7 8
>
>  The two numbers after run1 determine the particular experiment. Experiment
> 7 8 is one of the ones that causes a crash [1].

I tried this on my Linux-machine, and it finished in about 5 seconds.
Using memusage*, the peak heap reported was around 300MB, clearly not
a problematic size. So to me it seems like you have a problem with
your set-up.

Sorry I couldn't help more than that.

Cheers,
Mikael

* To see actual memory allocations with glibc. I ran it using
LD_PRELOAD=/lib/libmemusage.so ./run1 7 8

-- 
Mikael Zayenz Lagerkvist, http://www.ict.kth.se/~zayenz/



From zayenz at gmail.com  Tue Apr 15 11:25:16 2008
From: zayenz at gmail.com (Mikael Zayenz Lagerkvist)
Date: Tue, 15 Apr 2008 11:25:16 +0200
Subject: [gecode-users] Bugs in Gecode/J
In-Reply-To: <DC541A15-C4AA-405A-B2B4-5023849BFC65@cse.unsw.edu.au>
References: <66C23557-17D2-43EA-A090-FC9009595BE4@cse.unsw.edu.au>
	<63b5c8b00804142307v5489737ch6e308c7bc1045628@mail.gmail.com>
	<AD041900-1A0B-48FA-AEC1-90253AAF2C16@cse.unsw.edu.au>
	<63b5c8b00804150128y2909f11dkc958b2fb6ed1845c@mail.gmail.com>
	<AC437191-321F-4FF1-9D76-5AE7A72753CE@cse.unsw.edu.au>
	<DC541A15-C4AA-405A-B2B4-5023849BFC65@cse.unsw.edu.au>
Message-ID: <63b5c8b00804150225s1910e551y3708f6ecbda69822@mail.gmail.com>

On Tue, Apr 15, 2008 at 11:11 AM, Malcolm Ryan <malcolmr at cse.unsw.edu.au> wrote:
>
>  On 15/04/2008, at 6:37 PM, Malcolm Ryan wrote:
>  > I'm in the process of compiling Gecode on another (linux) machine.
>  > I'll run it there and see what happens.
>
>  I've made gecode-2.1.1 without any problems, but when I try to
>  configure gecodej-2.1.1, I get:
>
>  [malcolmr at wagner gecodej-2.1.1]$ ./configure
>  ...
>  configure: error: cannot find java include files

This means that configure could not find the include-files needed to
use JNI. Make sure that you have them (i.e., you have a JDK installed,
not only a JRE), and that confgure can find your installation.
Configure will search for the include dir relative to your javac
executable.

Cheers,
Mikael

-- 
Mikael Zayenz Lagerkvist, http://www.ict.kth.se/~zayenz/



From malcolmr at cse.unsw.edu.au  Tue Apr 15 11:37:52 2008
From: malcolmr at cse.unsw.edu.au (Malcolm Ryan)
Date: Tue, 15 Apr 2008 19:37:52 +1000
Subject: [gecode-users] Bugs in Gecode/J
In-Reply-To: <63b5c8b00804150218i76930a9bsb480de0d038232fe@mail.gmail.com>
References: <66C23557-17D2-43EA-A090-FC9009595BE4@cse.unsw.edu.au>
	<63b5c8b00804142307v5489737ch6e308c7bc1045628@mail.gmail.com>
	<AD041900-1A0B-48FA-AEC1-90253AAF2C16@cse.unsw.edu.au>
	<63b5c8b00804150128y2909f11dkc958b2fb6ed1845c@mail.gmail.com>
	<AC437191-321F-4FF1-9D76-5AE7A72753CE@cse.unsw.edu.au>
	<63b5c8b00804150152k6ef1c78ei2002ee3a125e7469@mail.gmail.com>
	<81F9CF98-04CA-4F38-AAE9-762315841C0D@cse.unsw.edu.au>
	<63b5c8b00804150218i76930a9bsb480de0d038232fe@mail.gmail.com>
Message-ID: <7E310CC7-CCBD-4F03-AFC2-215E43B74365@cse.unsw.edu.au>


On 15/04/2008, at 7:18 PM, Mikael Zayenz Lagerkvist wrote:
> I tried this on my Linux-machine, and it finished in about 5 seconds.
> Using memusage*, the peak heap reported was around 300MB, clearly not
> a problematic size. So to me it seems like you have a problem with
> your set-up.
>
> Sorry I couldn't help more than that.

Well that's good and bad news. At least it gives me some hope that my  
code will run on another machine.

(You would care to run my experiments for me, would you? ;)

Malcolm





From davidrijsman at gmail.com  Tue Apr 15 12:09:33 2008
From: davidrijsman at gmail.com (David Rijsman)
Date: Tue, 15 Apr 2008 12:09:33 +0200
Subject: [gecode-users] cumulatives constraint
Message-ID: <823281170804150309r50f6f844m1ef6f9ad5273994b@mail.gmail.com>

I have a question on the cumulatives constraint. I have a simple case
where I expect more pruning on the start variable and I just want to
make sure if my expectation is correct (before digging into the paper
and implementation):

The case is two tasks both assigned to the same single machine, first
task starts at 0 and ends at 20, second tasks has a duration of 20 can
initially start between 0 and 40 and end between 20 and 60. The
machine has limit 1 and the amount used of the resource should be less
(at_most=true) than the limit and the height of both tasks is 1.

I would expect the start of the second variable to be pruned from
[0,40] to [20,40] but what we see (when we run the attached file) is a
search on the start variable failing 20 times (trying start
0,1,2,...19) before finding the first solution. Obviously I expect the
first decision to be a solution. Am I expecting to much propagation on
a task without compulsory part?

David Rijsman
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: cumulativescase.cc
URL: <http://www.ps.uni-sb.de/pipermail/users/attachments/20080415/5081a4ce/attachment.txt>

From filip.konvicka at logis.cz  Tue Apr 15 13:11:49 2008
From: filip.konvicka at logis.cz (=?UTF-8?B?RmlsaXAgS29udmnEjWth?=)
Date: Tue, 15 Apr 2008 13:11:49 +0200
Subject: [gecode-users] Bugs in Gecode/J
In-Reply-To: <AC437191-321F-4FF1-9D76-5AE7A72753CE@cse.unsw.edu.au>
References: <66C23557-17D2-43EA-A090-FC9009595BE4@cse.unsw.edu.au>	<63b5c8b00804142307v5489737ch6e308c7bc1045628@mail.gmail.com>	<AD041900-1A0B-48FA-AEC1-90253AAF2C16@cse.unsw.edu.au>	<63b5c8b00804150128y2909f11dkc958b2fb6ed1845c@mail.gmail.com>
	<AC437191-321F-4FF1-9D76-5AE7A72753CE@cse.unsw.edu.au>
Message-ID: <fu22hl$ac3$1@ger.gmane.org>

Malcolm Ryan (15.4.2008 10:37):
> I'm using whatever the standard Java is on Mac OSX 10.5. The version  
> string shows:
> 
> java version "1.5.0_13"
> Java(TM) 2 Runtime Environment, Standard Edition (build 1.5.0_13- 
> b05-237)
> Java HotSpot(TM) Client VM (build 1.5.0_13-119, mixed mode, sharing)
> 
> I'm in the process of compiling Gecode on another (linux) machine.  
> I'll run it there and see what happens.
> 
> For very large problems it is crashing with the message:
> 
> java(2404,0xb0801000) malloc: *** mmap(size=65536) failed (error  
> code=12)
> *** error: can't allocate region
> *** set a breakpoint in malloc_error_break to debug
> terminate called after throwing an instance of 'Gecode::MemoryExhausted'
>    what():  Memory: Heap memory exhausted
> 
> What determines the maximum heap size available to Gecode?

Hi Malcolm,

at least on Windows you can set maximum Java heap size using the "-Xmx" 
command line option, e.g.

java -Xmx512 ...

sets the limit to 512MB. I think that the default is set pretty low 
sometimes, so you might want to try this.

Hope this helps,
Filip




From zayenz at gmail.com  Tue Apr 15 15:23:31 2008
From: zayenz at gmail.com (Mikael Zayenz Lagerkvist)
Date: Tue, 15 Apr 2008 15:23:31 +0200
Subject: [gecode-users] cumulatives constraint
In-Reply-To: <823281170804150309r50f6f844m1ef6f9ad5273994b@mail.gmail.com>
References: <823281170804150309r50f6f844m1ef6f9ad5273994b@mail.gmail.com>
Message-ID: <63b5c8b00804150623y29c60eam55d22bd89cc93fa8@mail.gmail.com>

Hi,

On Tue, Apr 15, 2008 at 12:09 PM, David Rijsman <davidrijsman at gmail.com> wrote:
<snip/>
>  I would expect the start of the second variable to be pruned from
>  [0,40] to [20,40] but what we see (when we run the attached file) is a
>  search on the start variable failing 20 times (trying start
>  0,1,2,...19) before finding the first solution. Obviously I expect the
>  first decision to be a solution. Am I expecting to much propagation on
>  a task without compulsory part?

You are quite right in that there should be more pruning. I've looked
into the code, and unfortunately there was a bug that made the pruning
much weaker than it should have been (it never did anything wrong,
just not enough).

I've fixed the bugs I found in the trunk-version, and your example now
has no failures. Thank you very much for the bug-report. If you don't
want to use the trunk-version, send me an e-mail, and I'll send a diff
of the relevant file to you.

If you are planning to use cumulatives as a standard cumulative, you
should know that there are other algorithms for cumulative that might
give more pruning. In particular, edge-finding and not-first/not-last
are commonly used. These are unfortunately not available in Gecode
currently.

Cheers,
Mikael

-- 
Mikael Zayenz Lagerkvist, http://www.ict.kth.se/~zayenz/



From malcolmr at cse.unsw.edu.au  Wed Apr 16 02:48:26 2008
From: malcolmr at cse.unsw.edu.au (Malcolm Ryan)
Date: Wed, 16 Apr 2008 10:48:26 +1000
Subject: [gecode-users] Bugs in Gecode/J
In-Reply-To: <fu22hl$ac3$1@ger.gmane.org>
References: <66C23557-17D2-43EA-A090-FC9009595BE4@cse.unsw.edu.au>	<63b5c8b00804142307v5489737ch6e308c7bc1045628@mail.gmail.com>	<AD041900-1A0B-48FA-AEC1-90253AAF2C16@cse.unsw.edu.au>	<63b5c8b00804150128y2909f11dkc958b2fb6ed1845c@mail.gmail.com>
	<AC437191-321F-4FF1-9D76-5AE7A72753CE@cse.unsw.edu.au>
	<fu22hl$ac3$1@ger.gmane.org>
Message-ID: <675B62F1-4CDC-4235-AA2B-4CB829570153@cse.unsw.edu.au>


On 15/04/2008, at 9:11 PM, Filip Konvi?ka wrote:
>> What determines the maximum heap size available to Gecode?
>
> Hi Malcolm,
>
> at least on Windows you can set maximum Java heap size using the "- 
> Xmx"
> command line option, e.g.
>
> java -Xmx512 ...
>
> sets the limit to 512MB. I think that the default is set pretty low
> sometimes, so you might want to try this.

Heh. I already have it set to 2G. Java won't let me go any higher than  
this. But thanks for the suggestion.

Malcolm


From malcolmr at cse.unsw.edu.au  Wed Apr 16 13:37:14 2008
From: malcolmr at cse.unsw.edu.au (Malcolm Ryan)
Date: Wed, 16 Apr 2008 21:37:14 +1000
Subject: [gecode-users] Bugs in Gecode/J
In-Reply-To: <63b5c8b00804150225s1910e551y3708f6ecbda69822@mail.gmail.com>
References: <66C23557-17D2-43EA-A090-FC9009595BE4@cse.unsw.edu.au>
	<63b5c8b00804142307v5489737ch6e308c7bc1045628@mail.gmail.com>
	<AD041900-1A0B-48FA-AEC1-90253AAF2C16@cse.unsw.edu.au>
	<63b5c8b00804150128y2909f11dkc958b2fb6ed1845c@mail.gmail.com>
	<AC437191-321F-4FF1-9D76-5AE7A72753CE@cse.unsw.edu.au>
	<DC541A15-C4AA-405A-B2B4-5023849BFC65@cse.unsw.edu.au>
	<63b5c8b00804150225s1910e551y3708f6ecbda69822@mail.gmail.com>
Message-ID: <CC96E626-BFD9-4AF8-AB78-5099F2C37DD9@cse.unsw.edu.au>

I've moved everything over to one of our Linux boxes and the problems  
have changed. I'm now using the following java:

java version "1.6.0_04"
Java(TM) SE Runtime Environment (build 1.6.0_04-b12)
Java HotSpot(TM) Server VM (build 10.0-b19, mixed mode)

I'm getting intermittent crashes with the message:

#
# An unexpected error has been detected by Java Runtime Environment:
#
#  SIGSEGV (0xb) at pc=0x2f605c9f, pid=13779, tid=3084274576
#
# Java VM: Java HotSpot(TM) Server VM (10.0-b19 mixed mode linux-x86)
# Problematic frame:
# C  [libgecodesearch.so.12+0x1c9f]  _ZN6Gecode6Search3DFS4nextEv+0x2af
#
# An error report file with more information is saved as:
# /tmp_amd/adams/import/1/malcolmr/exps/aiide08/hs_err_pid13779.log
#
# If you would like to submit a bug report, please visit:
#   http://java.sun.com/webapps/bugreport/crash.jsp
# The crash happened outside the Java Virtual Machine in native code.
# See problematic frame for where to report the bug.
#

I've attached the hs_err_pid*.log file. If you want to try it  
yourself, there is a new jar file at:
http://www.cse.unsw.edu.au/~malcolmr/aiide08.jar.
I've made it automatically run one of the problematic experiments. So  
all you need to do is:
jar -xf aiide08.jar Maps
java -cp aiide08.jar -Xmx2G exps.PatricksExperiment

Sometimes it runs fine. Sometimes it crashes. You may need to try it  
10 times or so.

Malcolm


-------------- next part --------------
A non-text attachment was scrubbed...
Name: hs_err_pid13779.log
Type: application/octet-stream
Size: 16196 bytes
Desc: not available
URL: <http://www.ps.uni-sb.de/pipermail/users/attachments/20080416/6bebe1b7/attachment.obj>
-------------- next part --------------




From kaminski at ps.uni-sb.de  Wed Apr 16 15:32:13 2008
From: kaminski at ps.uni-sb.de (Mark Kaminski)
Date: Wed, 16 Apr 2008 15:32:13 +0200
Subject: [gecode-users] Attention: Server Shutdown
Message-ID: <5F57C1F3-3375-48FF-BDC6-B95D13953839@ps.uni-sb.de>

Dear all,

on Thursday, April 17, (i.e., tomorrow) our server is going to go  
down for maintenance. This will affect, among other things, the  
operation of the web pages www.mozart-oz.org and www.gecode.org.
We plan to shut down the server at 16:00 and restore its operation by  
Friday, April 18.

Best regards,
Mark

--------------------------------------------------
Mark Kaminski
Programming Systems Lab
Saarland University
Postfach 151150
D-66041 Saarbr?cken

tel: +49 681 3025609 --- email: kaminski at ps.uni-sb.de
--------------------------------------------------




From joe.porter at gmail.com  Wed Apr 16 19:11:28 2008
From: joe.porter at gmail.com (Joe Porter)
Date: Wed, 16 Apr 2008 12:11:28 -0500
Subject: [gecode-users] Uninstallation problem
Message-ID: <8032a5cd0804161011q7e8b245atb843c5ff63ef026f@mail.gmail.com>

A long while ago I installed Gecode 1.3.1 using the Windows installer
package.  Now that I'm no longer using it, I can't uninstall.  I get a
message that says "could not access network location 1".   It takes a while,
and hitting Retry sends it off thinking before returning the same message.
Can anyone help me figure out how to uninstall this?

I am currently using the binary zipfile distributions, but it would be nice
to install and use the real thing (including Gist).

Thanks,
-Joe
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.ps.uni-sb.de/pipermail/users/attachments/20080416/765d1054/attachment.htm>

From stanio at cs.tu-berlin.de  Wed Apr 16 19:27:13 2008
From: stanio at cs.tu-berlin.de (Stanimir Dragiev)
Date: Wed, 16 Apr 2008 19:27:13 +0200
Subject: [gecode-users] 1.3.1 compile error, gcc 3.3.2, mandrake
In-Reply-To: <000001c898ff$1cd73f10$5685bd30$@se>
References: <200804021608.00188.Vincent.Barichard@univ-angers.fr>
	<000601c89562$bbc124b0$33436e10$@se> <ftceis$nd8$1@ger.gmane.org>
	<000601c898e9$6efb8b40$4cf2a1c0$@se> <47FA9BE0.1090500@logis.cz>
	<000001c898ff$1cd73f10$5685bd30$@se>
Message-ID: <20080416172713.GA9134@fiesta.cs.tu-berlin.de>

Hello, 

I use gecode 1.3.1 as Debian package with Lenny and on a Solaris machine. 
On solaris I have compiled it couple of months ago. Worked fine with
=-=-=-
gcc version 3.4.3 (csl-sol210-3_4-branch+sol_rpath)
=-=-=-

Now I have to use gecode 1.3.1 on a Mandrake machine.
./configure seems to be ok.
make reports errors (see below).

Is this compiler version issue? Any ideas?

Thanks in advance!


=-=-=-
[stanio at xxxx01 gecode-1.3.1]$ make
make[1]: Entering directory `/home/stanio/gecode-1.3.1'
make[1]: `gecode/int/var/imp-hdr.icc' is up to date.
make[1]: `gecode/int/var/imp-body.icc' is up to date.
make[1]: `gecode/set/var/imp-hdr.icc' is up to date.
make[1]: `gecode/set/var/imp-body.icc' is up to date.
g++ -I. -DNDEBUG -fPIC -Wall -ggdb -O3 -fno-strict-aliasing -finline-limit=3000 -ffast-math   \
-c -o gecode/kernel/exception.o  gecode/kernel/exception.cc
In file included from gecode/kernel.hh:107,
 from gecode/kernel/exception.cc:22:
 gecode/kernel/core.icc: In member function `void Gecode::Variable<VTI, PC, MED>::subscribe(Gecode::Space*, Gecode::Propagator*, int, bool, int, bool)':
 gecode/kernel/core.icc:1480: error: syntax error before `>' token
 gecode/kernel/core.icc:1494: error: syntax error before `>' token
 gecode/kernel/core.icc: In member function `void Gecode::Variable<VTI, PC, MED>::process(Gecode::Space*, int, int, int)':
 gecode/kernel/core.icc:1651: error: syntax error before `>' token
 gecode/kernel/core.icc: In member function `void Gecode::Variable<VTI, PC, MED>::process(Gecode::Space*)':
 gecode/kernel/core.icc:1675: error: syntax error before `>' token
 make[1]: *** [gecode/kernel/exception.o] Error 1
 make[1]: Leaving directory `/home/stanio/gecode-1.3.1'
 make: *** [compilelib] Error 2
=-=-=-

compiler is:

=-=-=-
[stanio at xxxx01 gecode-1.3.1]$ gcc -v
Reading specs from /usr/lib/gcc-lib/i586-mandrake-linux-gnu/3.3.2/specs
Configured with: ../configure --prefix=/usr --libdir=/usr/lib --with-slibdir=/lib --mandir=/usr/share/man --infodir=/usr/share/info --enable-shared --enable-threads=posix --disable-checking --enable-long-long --enable-__cxa_atexit --enable-clocale=gnu --enable-languages=c,c++,ada,f77,objc,java,pascal --host=i586-mandrake-linux-gnu --with-system-zlib
Thread model: posix
gcc version 3.3.2 (Mandrake Linux 10.0 3.3.2-6mdk)
=-=-=-



-- 
 cheers
 stanio_



From tack at ps.uni-sb.de  Wed Apr 16 20:03:12 2008
From: tack at ps.uni-sb.de (Guido Tack)
Date: Wed, 16 Apr 2008 20:03:12 +0200
Subject: [gecode-users] 1.3.1 compile error, gcc 3.3.2, mandrake
In-Reply-To: <20080416172713.GA9134@fiesta.cs.tu-berlin.de>
References: <200804021608.00188.Vincent.Barichard@univ-angers.fr>
	<000601c89562$bbc124b0$33436e10$@se> <ftceis$nd8$1@ger.gmane.org>
	<000601c898e9$6efb8b40$4cf2a1c0$@se> <47FA9BE0.1090500@logis.cz>
	<000001c898ff$1cd73f10$5685bd30$@se>
	<20080416172713.GA9134@fiesta.cs.tu-berlin.de>
Message-ID: <86EB585B-F6FB-4C09-B347-0492B3E22247@ps.uni-sb.de>

Stanimir Dragiev wrote:
> I use gecode 1.3.1 as Debian package with Lenny and on a Solaris  
> machine.
> On solaris I have compiled it couple of months ago. Worked fine with
> =-=-=-
> gcc version 3.4.3 (csl-sol210-3_4-branch+sol_rpath)
> =-=-=-
>
> Now I have to use gecode 1.3.1 on a Mandrake machine.
> ./configure seems to be ok.
> make reports errors (see below).
>
> Is this compiler version issue? Any ideas?

We don't support any gcc earlier than 3.4, because its parser is  
seriously broken and does not accept legal C++ constructs that we  
use.  You'll have to update at least to 3.4.  However, gcc 4.2 is the  
first compiler that we haven't had any problems with so far, so that's  
the version we recommend.

Guido

-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 2436 bytes
Desc: not available
URL: <http://www.ps.uni-sb.de/pipermail/users/attachments/20080416/f9413f21/attachment.bin>

From cipriano at dimi.uniud.it  Fri Apr 18 09:08:35 2008
From: cipriano at dimi.uniud.it (Raffaele Cipriano)
Date: Fri, 18 Apr 2008 09:08:35 +0200
Subject: [gecode-users] Strange behavior of BAB search with the function
	CONSTRAIN
Message-ID: <480848F3.5080107@dimi.uniud.it>

Dear Gecode developers,
we are using the BAB search with the function "constrain", to implement 
a cutting-plane search algorithm, and we have noticed a strange behavior.

At some point of the search we need to add a constrain on the Space we 
are exploring and we use the function

void constrain( T* t )

The constrain is correctly posted and some solutions are cut off, but 
when the BAB engine backtracks it looses the constrain added and finds 
solutions that should be cut off.

We have isolated this behavior in a small example: the source code 
(MyTest.cc) and the execution output (log.log) are attached. Here it is 
a brief explanation:

In the example there is only an IntVarArray x, of length 3 and domain 0..2.
We perform a branch on x, looking for all the solution.
When the fifth solution has been discovered we post the constrain x[1] = 1.
The constrain is posted, in fact solution {0, 2, 0}, {0, 2, 1}, {0,2, 2} 
are not enumerated.
But when the engine backtracks to the x[0] level, the constraint is lost 
and all the possible remaining solutions are found: according to the 
constrain posted, solution 7 to 9, 13 to 18 and 22 to 24 should be cut-off.

Is this a normal behavior or a bug?

Is there any alternative way to add constraints at run time?

Thank you very much

Best regards

Raffaele Cipriano

-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: myTest.cc
URL: <http://www.ps.uni-sb.de/pipermail/users/attachments/20080418/908d58be/attachment.txt>
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: log.log
URL: <http://www.ps.uni-sb.de/pipermail/users/attachments/20080418/908d58be/attachment.asc>

From tack at ps.uni-sb.de  Fri Apr 18 11:52:11 2008
From: tack at ps.uni-sb.de (Guido Tack)
Date: Fri, 18 Apr 2008 11:52:11 +0200
Subject: [gecode-users] Strange behavior of BAB search with the function
	CONSTRAIN
In-Reply-To: <480848F3.5080107@dimi.uniud.it>
References: <480848F3.5080107@dimi.uniud.it>
Message-ID: <51E3113D-DEB3-4DA6-A0B6-228D2F4B31EC@ps.uni-sb.de>

Dear Raffaele,

this behaviour is due to a bug in your code, or rather, due to a  
misunderstanding how the constrain function works.

Constrain must post a constraint that states that all solutions found  
from now on are "better" than the one we just discovered.  In your  
code, you only make sure that the 5th solution is better than the 4th  
(where better means that x[1]==1), but you say nothing about how the  
6th solution is related to the 5th!

In your concrete example, suppose you go down the left branch of the  
search tree and find the 4th solution.  You backtrack one level, go to  
the right, post the constraint x[1]==1, and find another solution.  So  
now you increment your solution counter, and when you backtrack  
further, there are still "open nodes" in the search tree that need to  
be constrained.  But as you incremented the solution counter, the  
constrain function will not post the x[1]==1 constraint again.  So,  
for the 5th solution, constrain does not subsume the constraint you  
posted for the 4th solution.

If you replace solutions_number == 4 by solutions_number >= 4, the  
code will do what you intended.  Not sure this can easily be done in  
your original example, though.

I hope this clarifies things a bit!

Cheers,
	Guido

Raffaele Cipriano wrote:

> Dear Gecode developers,
> we are using the BAB search with the function "constrain", to  
> implement a cutting-plane search algorithm, and we have noticed a  
> strange behavior.
>
> At some point of the search we need to add a constrain on the Space  
> we are exploring and we use the function
>
> void constrain( T* t )
>
> The constrain is correctly posted and some solutions are cut off,  
> but when the BAB engine backtracks it looses the constrain added and  
> finds solutions that should be cut off.
>
> We have isolated this behavior in a small example: the source code  
> (MyTest.cc) and the execution output (log.log) are attached. Here it  
> is a brief explanation:
>
> In the example there is only an IntVarArray x, of length 3 and  
> domain 0..2.
> We perform a branch on x, looking for all the solution.
> When the fifth solution has been discovered we post the constrain  
> x[1] = 1.
> The constrain is posted, in fact solution {0, 2, 0}, {0, 2, 1},  
> {0,2, 2} are not enumerated.
> But when the engine backtracks to the x[0] level, the constraint is  
> lost and all the possible remaining solutions are found: according  
> to the constrain posted, solution 7 to 9, 13 to 18 and 22 to 24  
> should be cut-off.
>
> Is this a normal behavior or a bug?
>
> Is there any alternative way to add constraints at run time?
>
> Thank you very much
>
> Best regards
>
> Raffaele Cipriano
>
> #include "support.hh"
> #include "gecode/minimodel.hh"
>
> int solutions_number;
>
> class MyTest : public Example {
>
> public:
> 	IntVarArray x;
>
> 	MyTest(const SizeOptions& opt)
> 	: x(this,3,0,2) {
> 		branch(this, x, INT_VAR_NONE, INT_VAL_MIN);
> 	}
>
> 	/// Constructor for cloning \a s
> 	MyTest(bool share, MyTest& s) : Example(share,s) {
> 		x.update(this, share, s.x);
> 	}
>
> 	/// Perform copying during cloning
> 	virtual Space*
> 		copy(bool share) {
> 	return new MyTest(share,*this);
> 	}
>
> 	void constrain(MyTest * solution) {
> 		if (solutions_number == 4) {
> 			std::cout << "put constraint x[1] = 1" << std::endl;
> 			rel(this,x[1],IRT_EQ,1,ICL_DEF,PK_DEF);
> 		}
> 		solutions_number++;
> 	}
>
> 	/// Print solution
> 	virtual void print(std::ostream& os) {
> 		os << "solution "<< solutions_number << ": " << x << std::endl;
> 	}
> };
>
> /** \brief Main-function
> */
> int main(int argc, char* argv[]) {
> 	solutions_number = 0;
> 	SizeOptions opt("MyTest");
> 	opt.iterations(20);
> 	opt.solutions(0);
> 	opt.parse(argc,argv);
> 	Example::run<MyTest,BAB,SizeOptions>(opt);
> 	return 0;
> }
> MyTest
> solution 0: {0, 0, 0}
> solution 1: {0, 0, 1}
> solution 2: {0, 0, 2}
> solution 3: {0, 1, 0}
> solution 4: {0, 1, 1}
> put constraint x[1] = 1
> solution 5: {0, 1, 2}
> solution 7: {1, 0, 0}
> solution 8: {1, 0, 1}
> solution 9: {1, 0, 2}
> solution 10: {1, 1, 0}
> solution 11: {1, 1, 1}
> solution 12: {1, 1, 2}
> solution 13: {1, 2, 0}
> solution 14: {1, 2, 1}
> solution 15: {1, 2, 2}
> solution 16: {2, 0, 0}
> solution 17: {2, 0, 1}
> solution 18: {2, 0, 2}
> solution 19: {2, 1, 0}
> solution 20: {2, 1, 1}
> solution 21: {2, 1, 2}
> solution 22: {2, 2, 0}
> solution 23: {2, 2, 1}
> solution 24: {2, 2, 2}
>
> Initial
> 	propagators:   0
> 	branchings:    1
>
> Summary
> 	runtime:       0.010 (10.000000 ms)
> 	solutions:     24
> 	propagations:  0
> 	failures:      1
> 	clones:        48
> 	commits:       66
> 	peak memory:   14 KB
> _______________________________________________
> Gecode users mailing list
> users at gecode.org
> https://www.gecode.org/mailman/listinfo/gecode-users

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.ps.uni-sb.de/pipermail/users/attachments/20080418/9208259a/attachment.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 2436 bytes
Desc: not available
URL: <http://www.ps.uni-sb.de/pipermail/users/attachments/20080418/9208259a/attachment.bin>

From mauriciotorob at gmail.com  Fri Apr 18 12:05:42 2008
From: mauriciotorob at gmail.com (Mauricio Toro)
Date: Fri, 18 Apr 2008 12:05:42 +0200
Subject: [gecode-users] Benchmarks
In-Reply-To: <a6b4b44a0804172315k636d00e8l37e522f6e7695755@mail.gmail.com>
References: <a6b4b44a0804172315k636d00e8l37e522f6e7695755@mail.gmail.com>
Message-ID: <a6b4b44a0804180305h79fdb6f8odd4d037cd9581706@mail.gmail.com>

Hello,

What did you use to measure the time and memory consumption
in Mozart Oz for the Benchmark examples?



Thanks

-- 
Mauricio Toro Bermudez
Estudiante de Ingenier?a de Sistemas
Pontificia Universidad Javeriana, Colombia

Stagiare ? l'Ircam
1, place Igor-Stravinsky 75004 Paris,
 France de 2008 ? 2009

-- 
Mauricio Toro Bermudez
Estudiante de Ingenier?a de Sistemas
Pontificia Universidad Javeriana, Colombia

Stagiare ? l'Ircam
1, place Igor-Stravinsky 75004 Paris,
France de 2008 ? 2009



From tack at ps.uni-sb.de  Fri Apr 18 14:46:11 2008
From: tack at ps.uni-sb.de (Guido Tack)
Date: Fri, 18 Apr 2008 14:46:11 +0200
Subject: [gecode-users] Benchmarks
In-Reply-To: <a6b4b44a0804180305h79fdb6f8odd4d037cd9581706@mail.gmail.com>
References: <a6b4b44a0804172315k636d00e8l37e522f6e7695755@mail.gmail.com>
	<a6b4b44a0804180305h79fdb6f8odd4d037cd9581706@mail.gmail.com>
Message-ID: <8D644F98-6896-40C4-9805-B570C4F87302@ps.uni-sb.de>

Mauricio Toro wrote:
> What did you use to measure the time and memory consumption
> in Mozart Oz for the Benchmark examples?

We just used {Property.get time} and coded the computation of time  
difference as well as the loops (for executing benchmarks several  
times) in Mozart.  For memory, we used memusage (which is available in  
some Linux distributions and just a wrapper around libmemusage, I  
think).  That's a script that is used as a wrapper around the  
executable.

Cheers,
	Guido
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 2436 bytes
Desc: not available
URL: <http://www.ps.uni-sb.de/pipermail/users/attachments/20080418/9b364047/attachment.bin>

From banerjed at rsise.anu.edu.au  Sun Apr 20 07:18:01 2008
From: banerjed at rsise.anu.edu.au (Debdeep Banerjee)
Date: Sun, 20 Apr 2008 15:18:01 +1000
Subject: [gecode-users] posting constraints for assigned variable
Message-ID: <480AD209.5040901@rsise.anu.edu.au>

hi,
 I have some questions about reducing domain of a variable. Say I have a 
IntVar x and its domain is IntSet {1,2,5,6,-2}
q1. if I want say x != 2 then I use the following code
       IntView v(x)
       Gecode.me_failed( v.nq( home, 2 ) ) ==> this should return true/1
     Is this correct ?

q2. Say x is already assigned to 5, ie
    IntView v(x) and v.assigned() == true.
      What will happen if I try to do the following
    Gecode.me_failed( v.nq( home, 2 ) ) == > what should this code 
return 0 or 1 ??

q3. Say I want to say x != 9 ( 9 is not in the domain of x)
       IntView v(x)
       Gecode.me_failed( v.nq( home, 9 ) ==> what this will return ???
    Does this depends on whether x is already assigned or not ??

With regards
Debdeep

-- 
Debdeep Banerjee
PhD Candidate
CSL/RSISE/NICTA
Australian National University
Email: debdeep.banerjee at rsise.anu.edu.au
Web:http://rsise.anu.edu.au/~banerjed





From tack at ps.uni-sb.de  Sun Apr 20 20:18:55 2008
From: tack at ps.uni-sb.de (Guido Tack)
Date: Sun, 20 Apr 2008 20:18:55 +0200
Subject: [gecode-users] posting constraints for assigned variable
In-Reply-To: <480AD209.5040901@rsise.anu.edu.au>
References: <480AD209.5040901@rsise.anu.edu.au>
Message-ID: <B67A36B6-0450-4C62-8828-C9DA7AA28ACF@ps.uni-sb.de>

Hi!

I'm not sure I understand your syntax.  Is this C++, do you e.g. mean  
Gecode::me_failed?  Assuming that this is the case, let's have a look  
at your questions.

Debdeep Banerjee wrote:

> hi,
> I have some questions about reducing domain of a variable. Say I  
> have a
> IntVar x and its domain is IntSet {1,2,5,6,-2}
> q1. if I want say x != 2 then I use the following code
>       IntView v(x)
>       Gecode.me_failed( v.nq( home, 2 ) ) ==> this should return  
> true/1
>     Is this correct ?

No, it should return false.  The semantics of nq is the following (in  
pseudo code):

nq(int i):
	domain := domain - {i}
	if domain is empty return false else return true

The domain contains 2, and after you say v.nq(home,2), it does not  
contain 2 any more, but there are other values left, so the operation  
does not result in failure.

> q2. Say x is already assigned to 5, ie
>    IntView v(x) and v.assigned() == true.
>      What will happen if I try to do the following
>    Gecode.me_failed( v.nq( home, 2 ) ) == > what should this code
> return 0 or 1 ??

If you remove a value from a domain that isn't in the domain, the  
operation does not fail, because the resulting domain is not empty.

> q3. Say I want to say x != 9 ( 9 is not in the domain of x)
>       IntView v(x)
>       Gecode.me_failed( v.nq( home, 9 ) ==> what this will return ???
>    Does this depends on whether x is already assigned or not ??

Same as above, if 9 is not in the domain, the operation does not  
fail.  This has nothing to do with whether x is assigned or not.

Finally, in what context are you using these operations?  The fact  
that you wrote IntView v(x) made me think you might be trying this in  
a model.  The operations really should only be used in propagators and  
branchings, definitely not in a model!  Use rel/dom constraint posting  
functions instead.

Cheers,
	Guido




From malcolmr at cse.unsw.edu.au  Mon Apr 21 02:48:19 2008
From: malcolmr at cse.unsw.edu.au (Malcolm Ryan)
Date: Mon, 21 Apr 2008 10:48:19 +1000
Subject: [gecode-users] Bugs in Gecode/J
In-Reply-To: <CC96E626-BFD9-4AF8-AB78-5099F2C37DD9@cse.unsw.edu.au>
References: <66C23557-17D2-43EA-A090-FC9009595BE4@cse.unsw.edu.au>
	<63b5c8b00804142307v5489737ch6e308c7bc1045628@mail.gmail.com>
	<AD041900-1A0B-48FA-AEC1-90253AAF2C16@cse.unsw.edu.au>
	<63b5c8b00804150128y2909f11dkc958b2fb6ed1845c@mail.gmail.com>
	<AC437191-321F-4FF1-9D76-5AE7A72753CE@cse.unsw.edu.au>
	<DC541A15-C4AA-405A-B2B4-5023849BFC65@cse.unsw.edu.au>
	<63b5c8b00804150225s1910e551y3708f6ecbda69822@mail.gmail.com>
	<CC96E626-BFD9-4AF8-AB78-5099F2C37DD9@cse.unsw.edu.au>
Message-ID: <EEE2C4E8-77F5-4B48-8768-E7534160A9E6@cse.unsw.edu.au>

I don't mean to hassle you, but I just need to know whether you think  
you can help me with this problem. I am working towards a close paper  
deadline and I need to know whether to stick with Gecode/J in the hope  
that we will be able to sort out these problems, or whether I need to  
look for another solution.

Thanks,

Malcolm

On 16/04/2008, at 9:37 PM, Malcolm Ryan wrote:

> I've moved everything over to one of our Linux boxes and the  
> problems have changed. I'm now using the following java:
>
> java version "1.6.0_04"
> Java(TM) SE Runtime Environment (build 1.6.0_04-b12)
> Java HotSpot(TM) Server VM (build 10.0-b19, mixed mode)
>
> I'm getting intermittent crashes with the message:
>
> #
> # An unexpected error has been detected by Java Runtime Environment:
> #
> #  SIGSEGV (0xb) at pc=0x2f605c9f, pid=13779, tid=3084274576
> #
> # Java VM: Java HotSpot(TM) Server VM (10.0-b19 mixed mode linux-x86)
> # Problematic frame:
> # C  [libgecodesearch.so.12+0x1c9f]  _ZN6Gecode6Search3DFS4nextEv 
> +0x2af
> #
> # An error report file with more information is saved as:
> # /tmp_amd/adams/import/1/malcolmr/exps/aiide08/hs_err_pid13779.log
> #
> # If you would like to submit a bug report, please visit:
> #   http://java.sun.com/webapps/bugreport/crash.jsp
> # The crash happened outside the Java Virtual Machine in native code.
> # See problematic frame for where to report the bug.
> #
>
> I've attached the hs_err_pid*.log file. If you want to try it  
> yourself, there is a new jar file at:
> http://www.cse.unsw.edu.au/~malcolmr/aiide08.jar.
> I've made it automatically run one of the problematic experiments.  
> So all you need to do is:
> jar -xf aiide08.jar Maps
> java -cp aiide08.jar -Xmx2G exps.PatricksExperiment
>
> Sometimes it runs fine. Sometimes it crashes. You may need to try it  
> 10 times or so.
>
> Malcolm
>
>
> <hs_err_pid13779.log>
>
>
> _______________________________________________
> Gecode users mailing list
> users at gecode.org
> https://www.gecode.org/mailman/listinfo/gecode-users




From malcolmr at cse.unsw.edu.au  Mon Apr 21 10:19:05 2008
From: malcolmr at cse.unsw.edu.au (Malcolm Ryan)
Date: Mon, 21 Apr 2008 18:19:05 +1000
Subject: [gecode-users] BExprs and IntConLevel
Message-ID: <74A4A8ED-0A04-4F77-B007-1601FB147264@cse.unsw.edu.au>

Am I right in thinking that:

Gecode.post(space, BExpr(ivar1, IntRelType.IRT_EQ, ivar2));

will only use bounds consistency between ivar1 and ivar2?

Malcolm



From cschulte at kth.se  Mon Apr 21 10:24:07 2008
From: cschulte at kth.se (Christian Schulte)
Date: Mon, 21 Apr 2008 10:24:07 +0200
Subject: [gecode-users] BExprs and IntConLevel
In-Reply-To: <74A4A8ED-0A04-4F77-B007-1601FB147264@cse.unsw.edu.au>
References: <74A4A8ED-0A04-4F77-B007-1601FB147264@cse.unsw.edu.au>
Message-ID: <000101c8a389$113915e0$33ab41a0$@se>

Nope, it uses the default consistency level and for this propagator that
would be domain consistency.

Christian

--
Christian Schulte, www.ict.kth.se/~cschulte/


-----Original Message-----
From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf
Of Malcolm Ryan
Sent: Monday, April 21, 2008 10:19 AM
To: gecode list
Subject: [gecode-users] BExprs and IntConLevel

Am I right in thinking that:

Gecode.post(space, BExpr(ivar1, IntRelType.IRT_EQ, ivar2));

will only use bounds consistency between ivar1 and ivar2?

Malcolm

_______________________________________________
Gecode users mailing list
users at gecode.org
https://www.gecode.org/mailman/listinfo/gecode-users




From zayenz at gmail.com  Mon Apr 21 10:55:22 2008
From: zayenz at gmail.com (Mikael Zayenz Lagerkvist)
Date: Mon, 21 Apr 2008 10:55:22 +0200
Subject: [gecode-users] Bugs in Gecode/J
In-Reply-To: <EEE2C4E8-77F5-4B48-8768-E7534160A9E6@cse.unsw.edu.au>
References: <66C23557-17D2-43EA-A090-FC9009595BE4@cse.unsw.edu.au>
	<63b5c8b00804142307v5489737ch6e308c7bc1045628@mail.gmail.com>
	<AD041900-1A0B-48FA-AEC1-90253AAF2C16@cse.unsw.edu.au>
	<63b5c8b00804150128y2909f11dkc958b2fb6ed1845c@mail.gmail.com>
	<AC437191-321F-4FF1-9D76-5AE7A72753CE@cse.unsw.edu.au>
	<DC541A15-C4AA-405A-B2B4-5023849BFC65@cse.unsw.edu.au>
	<63b5c8b00804150225s1910e551y3708f6ecbda69822@mail.gmail.com>
	<CC96E626-BFD9-4AF8-AB78-5099F2C37DD9@cse.unsw.edu.au>
	<EEE2C4E8-77F5-4B48-8768-E7534160A9E6@cse.unsw.edu.au>
Message-ID: <63b5c8b00804210155v2bf22393y1c5d604f40a7a1c@mail.gmail.com>

Hi,

I did have a look at your most recent crashes, and I'm not sure where
the problem is exactly. I cannot reproduce them on my machine.

Since the crashes are random, my guess is that the problem might come
from the fact that you are running on a multi-core machine (as seen in
the hs_err_pid log). The problem might be that the Java-C++ interface
does not work correctly under concurrent garbage-collection. However,
this is just a guess.

We will definitely look into these crashes more carefully in the
future, but I don't have any hope of finding the problem soon.

Cheers,
Mikael

On Mon, Apr 21, 2008 at 2:48 AM, Malcolm Ryan <malcolmr at cse.unsw.edu.au> wrote:
> I don't mean to hassle you, but I just need to know whether you think
>  you can help me with this problem. I am working towards a close paper
>  deadline and I need to know whether to stick with Gecode/J in the hope
>  that we will be able to sort out these problems, or whether I need to
>  look for another solution.
>
>  Thanks,
>
>  Malcolm
>
>
>
>  On 16/04/2008, at 9:37 PM, Malcolm Ryan wrote:
>
>  > I've moved everything over to one of our Linux boxes and the
>  > problems have changed. I'm now using the following java:
>  >
>  > java version "1.6.0_04"
>  > Java(TM) SE Runtime Environment (build 1.6.0_04-b12)
>  > Java HotSpot(TM) Server VM (build 10.0-b19, mixed mode)
>  >
>  > I'm getting intermittent crashes with the message:
>  >
>  > #
>  > # An unexpected error has been detected by Java Runtime Environment:
>  > #
>  > #  SIGSEGV (0xb) at pc=0x2f605c9f, pid=13779, tid=3084274576
>  > #
>  > # Java VM: Java HotSpot(TM) Server VM (10.0-b19 mixed mode linux-x86)
>  > # Problematic frame:
>  > # C  [libgecodesearch.so.12+0x1c9f]  _ZN6Gecode6Search3DFS4nextEv
>  > +0x2af
>  > #
>  > # An error report file with more information is saved as:
>  > # /tmp_amd/adams/import/1/malcolmr/exps/aiide08/hs_err_pid13779.log
>  > #
>  > # If you would like to submit a bug report, please visit:
>  > #   http://java.sun.com/webapps/bugreport/crash.jsp
>  > # The crash happened outside the Java Virtual Machine in native code.
>  > # See problematic frame for where to report the bug.
>  > #
>  >
>  > I've attached the hs_err_pid*.log file. If you want to try it
>  > yourself, there is a new jar file at:
>  > http://www.cse.unsw.edu.au/~malcolmr/aiide08.jar.
>  > I've made it automatically run one of the problematic experiments.
>  > So all you need to do is:
>  > jar -xf aiide08.jar Maps
>  > java -cp aiide08.jar -Xmx2G exps.PatricksExperiment
>  >
>  > Sometimes it runs fine. Sometimes it crashes. You may need to try it
>  > 10 times or so.
>  >
>  > Malcolm
>  >
>  >
>  > <hs_err_pid13779.log>
>
>
> >
>  >
>  > _______________________________________________
>  > Gecode users mailing list
>  > users at gecode.org
>  > https://www.gecode.org/mailman/listinfo/gecode-users
>
>
>  _______________________________________________
>  Gecode users mailing list
>  users at gecode.org
>  https://www.gecode.org/mailman/listinfo/gecode-users
>



-- 
Mikael Zayenz Lagerkvist, http://www.ict.kth.se/~zayenz/



From tack at ps.uni-sb.de  Mon Apr 21 11:10:32 2008
From: tack at ps.uni-sb.de (Guido Tack)
Date: Mon, 21 Apr 2008 11:10:32 +0200
Subject: [gecode-users] Bugs in Gecode/J
In-Reply-To: <EEE2C4E8-77F5-4B48-8768-E7534160A9E6@cse.unsw.edu.au>
References: <66C23557-17D2-43EA-A090-FC9009595BE4@cse.unsw.edu.au>
	<63b5c8b00804142307v5489737ch6e308c7bc1045628@mail.gmail.com>
	<AD041900-1A0B-48FA-AEC1-90253AAF2C16@cse.unsw.edu.au>
	<63b5c8b00804150128y2909f11dkc958b2fb6ed1845c@mail.gmail.com>
	<AC437191-321F-4FF1-9D76-5AE7A72753CE@cse.unsw.edu.au>
	<DC541A15-C4AA-405A-B2B4-5023849BFC65@cse.unsw.edu.au>
	<63b5c8b00804150225s1910e551y3708f6ecbda69822@mail.gmail.com>
	<CC96E626-BFD9-4AF8-AB78-5099F2C37DD9@cse.unsw.edu.au>
	<EEE2C4E8-77F5-4B48-8768-E7534160A9E6@cse.unsw.edu.au>
Message-ID: <39291D20-CA03-4314-B343-8F9D58040A29@ps.uni-sb.de>

Malcolm Ryan wrote:

> I don't mean to hassle you, but I just need to know whether you think
> you can help me with this problem. I am working towards a close paper
> deadline and I need to know whether to stick with Gecode/J in the hope
> that we will be able to sort out these problems, or whether I need to
> look for another solution.

I've run some more experiments, and I can finally reproduce your bug.   
It seems to be a memory management / concurrency issue.  I could not  
reproduce the bug on any 1- or 2-core machine, but only with at least  
4 cores.  I suspect Java's concurrent garbage collector frees some  
memory that is still in use because we didn't get the locking right.
Did you do all your experiments on multi-core machines (i.e., more  
than 2 cores)?  If that's really the problem, you could run your tests  
with a limit on the number of CPUs used.  On Linux, you can achieve  
this using the taskset command.  On Mac OS 10.5, you can follow this  
hint to get control of your processors:
http://www.macosxhints.com/article.php?story=20071116183942199

I hope this helps.  We'll try to figure out the real cause of the  
problem, but concurrency bugs are typically hard to find - it may take  
some time.

Cheers,
	Guido

-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 2436 bytes
Desc: not available
URL: <http://www.ps.uni-sb.de/pipermail/users/attachments/20080421/6dc87932/attachment.bin>

From mauriciotorob at gmail.com  Mon Apr 21 11:28:34 2008
From: mauriciotorob at gmail.com (Mauricio Toro)
Date: Mon, 21 Apr 2008 11:28:34 +0200
Subject: [gecode-users] ask propagator
Message-ID: <a6b4b44a0804210228m22310f4fx18329898ece5f91f@mail.gmail.com>

Hello,
I have some questions about the concurrent constraint programming ask
propagator.
I want to have this behavior:
\textbf{blocking\_IF} $<boolean\_var>\ x0$ \textbf{then} $<ask\_body>\
procedureBody$ \textbf{else} $<skip>$

1) In this propagator would it matter if I use domain
consistency or bounds consistency? which one should I use?
2) I am passing this function void (* procedureBody) (Space*) as an
argument.
    If I would like to pass a closure, like an object with an executing
method, instead of the function pointer.
    What kind of additional information should I include in the object?
3) What do you think about this header for the Ask Propagator:



  /**
   * \brief Concurrent Constraint Programming ASK propagator
   *
   * Requires \code #include "gecode/int/ask.hh" \endcode
   * \ingroup FuncIntProp
   */
  template <class View>
  class Ask : public UnaryPropagator<View,PC_INT_BND> {
  protected:
    using UnaryPropagator<View,PC_INT_BND>::x0;


    /// Constructor for cloning \a p
    Ask(Space* home, bool share, Ask& p);
    /// Constructor for posting
    Ask(Space* home, View x0, void (* procedureBody) (Space*));
  public:
    /// Copy propagator during cloning
    virtual Actor*     copy(Space* home, bool share);
    /// Perform propagation
    virtual ExecStatus propagate(Space* home, ModEventDelta med);
    /// Specification for this propagator
    virtual Reflection::ActorSpec spec(const Space* home,
                                        Reflection::VarMap& m) const;
    /// Post propagator according to specification
    static void post(Space* home, Reflection::VarMap& vars,
                     const Reflection::ActorSpec& spec);
    /// Mangled propagator name
    static Support::Symbol ati(void);
    /// Post bounds-consistent propagator
    /// \textbf{blocking\_IF} $<boolean\_var>\ x0$ \textbf{then}
$<ask\_body>\ procedureBody$ \textbf{else} $<skip>$
    static  ExecStatus post(Space* home, View x0, void (* procedureBody)
(Space*));
  };


Thanks for everything.

Mauricio

-- 
Mauricio Toro Bermudez
Estudiante de Ingenier?a de Sistemas
Pontificia Universidad Javeriana, Colombia

Stagiare ? l'Ircam
1, place Igor-Stravinsky 75004 Paris,
France de 2008 ? 2009
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.ps.uni-sb.de/pipermail/users/attachments/20080421/bba53155/attachment.htm>

From tack at ps.uni-sb.de  Mon Apr 21 11:34:56 2008
From: tack at ps.uni-sb.de (Guido Tack)
Date: Mon, 21 Apr 2008 11:34:56 +0200
Subject: [gecode-users] Bugs in Gecode/J
In-Reply-To: <39291D20-CA03-4314-B343-8F9D58040A29@ps.uni-sb.de>
References: <66C23557-17D2-43EA-A090-FC9009595BE4@cse.unsw.edu.au>
	<63b5c8b00804142307v5489737ch6e308c7bc1045628@mail.gmail.com>
	<AD041900-1A0B-48FA-AEC1-90253AAF2C16@cse.unsw.edu.au>
	<63b5c8b00804150128y2909f11dkc958b2fb6ed1845c@mail.gmail.com>
	<AC437191-321F-4FF1-9D76-5AE7A72753CE@cse.unsw.edu.au>
	<DC541A15-C4AA-405A-B2B4-5023849BFC65@cse.unsw.edu.au>
	<63b5c8b00804150225s1910e551y3708f6ecbda69822@mail.gmail.com>
	<CC96E626-BFD9-4AF8-AB78-5099F2C37DD9@cse.unsw.edu.au>
	<EEE2C4E8-77F5-4B48-8768-E7534160A9E6@cse.unsw.edu.au>
	<39291D20-CA03-4314-B343-8F9D58040A29@ps.uni-sb.de>
Message-ID: <C1BE7A76-7038-45A3-9AF6-9E32D5B3CEE9@ps.uni-sb.de>

I'm now certain that it's the concurrent GC that's causing the  
problems (well, because of some bug in Gecode/J, of course).  You can  
easily work around it by running java with the -XX:-UseParallelGC  
option.

Cheers,
	Guido

Guido Tack wrote:

> Malcolm Ryan wrote:
>
>> I don't mean to hassle you, but I just need to know whether you think
>> you can help me with this problem. I am working towards a close paper
>> deadline and I need to know whether to stick with Gecode/J in the  
>> hope
>> that we will be able to sort out these problems, or whether I need to
>> look for another solution.
>
> I've run some more experiments, and I can finally reproduce your  
> bug.  It seems to be a memory management / concurrency issue.  I  
> could not reproduce the bug on any 1- or 2-core machine, but only  
> with at least 4 cores.  I suspect Java's concurrent garbage  
> collector frees some memory that is still in use because we didn't  
> get the locking right.
> Did you do all your experiments on multi-core machines (i.e., more  
> than 2 cores)?  If that's really the problem, you could run your  
> tests with a limit on the number of CPUs used.  On Linux, you can  
> achieve this using the taskset command.  On Mac OS 10.5, you can  
> follow this hint to get control of your processors:
> http://www.macosxhints.com/article.php?story=20071116183942199
>
> I hope this helps.  We'll try to figure out the real cause of the  
> problem, but concurrency bugs are typically hard to find - it may  
> take some time.
>
> Cheers,
> 	Guido
>
> _______________________________________________
> Gecode users mailing list
> users at gecode.org
> https://www.gecode.org/mailman/listinfo/gecode-users

-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 2436 bytes
Desc: not available
URL: <http://www.ps.uni-sb.de/pipermail/users/attachments/20080421/6787301f/attachment.bin>

From tack at ps.uni-sb.de  Mon Apr 21 11:40:01 2008
From: tack at ps.uni-sb.de (Guido Tack)
Date: Mon, 21 Apr 2008 11:40:01 +0200
Subject: [gecode-users] ask propagator
In-Reply-To: <a6b4b44a0804210228m22310f4fx18329898ece5f91f@mail.gmail.com>
References: <a6b4b44a0804210228m22310f4fx18329898ece5f91f@mail.gmail.com>
Message-ID: <6BB6E70F-51E7-4386-A6E0-9A4A59C0028C@ps.uni-sb.de>

Mauricio Toro wrote:
> I have some questions about the concurrent constraint programming  
> ask propagator.
> I want to have this behavior:
> \textbf{blocking\_IF} $<boolean\_var>\ x0$ \textbf{then} $<ask\_body> 
> \ procedureBody$ \textbf{else} $<skip>$
>
> 1) In this propagator would it matter if I use domain
> consistency or bounds consistency? which one should I use?

I'm not sure which part you're referring to.  For the boolean control  
variable, there's no domain or bounds consistency really.  You wait  
until it gets assigned and then run the body.

> 2) I am passing this function void (* procedureBody) (Space*) as an  
> argument.
>     If I would like to pass a closure, like an object with an  
> executing method, instead of the function pointer.
>     What kind of additional information should I include in the  
> object?

Well, what do you plan to do in the object?  That pretty much  
determines whether you need additional information.  You'll have to  
have access to the variables, e.g., but you can of course get that by  
casting the Space* to its actual type.

> 3) What do you think about this header for the Ask Propagator:
>
>
>
>   /**
>    * \brief Concurrent Constraint Programming ASK propagator
>    *
>    * Requires \code #include "gecode/int/ask.hh" \endcode
>    * \ingroup FuncIntProp
>    */
>   template <class View>
>   class Ask : public UnaryPropagator<View,PC_INT_BND> {
>   protected:
>     using UnaryPropagator<View,PC_INT_BND>::x0;

Now you use an IntView for x0, but above you said x0 was a BoolVar.

>     /// Constructor for cloning \a p
>     Ask(Space* home, bool share, Ask& p);
>     /// Constructor for posting
>     Ask(Space* home, View x0, void (* procedureBody) (Space*));
>   public:
>     /// Copy propagator during cloning
>     virtual Actor*     copy(Space* home, bool share);
>     /// Perform propagation
>     virtual ExecStatus propagate(Space* home, ModEventDelta med);
>     /// Specification for this propagator
>     virtual Reflection::ActorSpec spec(const Space* home,
>                                         Reflection::VarMap& m) const;
>     /// Post propagator according to specification
>     static void post(Space* home, Reflection::VarMap& vars,
>                      const Reflection::ActorSpec& spec);
>     /// Mangled propagator name
>     static Support::Symbol ati(void);
>     /// Post bounds-consistent propagator
>     /// \textbf{blocking\_IF} $<boolean\_var>\ x0$ \textbf{then}  
> $<ask\_body>\ procedureBody$ \textbf{else} $<skip>$
>     static  ExecStatus post(Space* home, View x0, void (*  
> procedureBody) (Space*));
>   };

Yes, the rest looks ok.

Cheers,
	Guido

-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 2436 bytes
Desc: not available
URL: <http://www.ps.uni-sb.de/pipermail/users/attachments/20080421/ea5dc995/attachment.bin>

From cschulte at kth.se  Mon Apr 21 11:50:33 2008
From: cschulte at kth.se (Christian Schulte)
Date: Mon, 21 Apr 2008 11:50:33 +0200
Subject: [gecode-users] kernel issues
In-Reply-To: <48034DD3.7040801@logis.cz>
References: <48034DD3.7040801@logis.cz>
Message-ID: <001d01c8a395$24c209d0$6e461d70$@se>

Hi Filip,

sorry for the long delay, but I was away from my keyboard. Yes, you are
right! I just added your fix to the trunk. For the integer variables it did
not show, as med_fst == 0 for them.

The script that generates the variable stubs is misc/genvariables.perl (line
608).

Thanks for the fix!

Cheers
Christian

--
Christian Schulte, www.ict.kth.se/~cschulte/


-----Original Message-----
From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf
Of Filip Konvicka
Sent: Monday, April 14, 2008 2:28 PM
To: users at gecode.org
Cc: lmoric at logis.cz
Subject: [gecode-users] kernel issues

Hi,

so Lubos started working on the FloatVar implementation and he's 
discovered something that looks like a bug in Gecode. Initially, we just 
copied "integer.vis" to "float.vis" and renamed the identifiers so we 
got "_FLOAT_" instead of "_INT_" everywhere. (Later on, we'll probably 
at least remove the "DOM" modification event and propagation condition.)

So in short:

[General]
Name:		Float
Ifdef:		GECODE_HAS_FLOAT_VARS
Namespace:	Gecode::Float

and the rest goes exactly the same as with IntVar.

Then we tried posting a propagator on a FloatVar, but unexpectedly 
nothing happened. Lubos tracked this down to the following code fragment 
  in kernel/var-type.icc:

case ME_FLOAT_BND:
      {
        static const Gecode::ModEvent me_c = (
          ((ME_FLOAT_NONE ^ ME_FLOAT_BND ) <<  0) |
          ((ME_FLOAT_VAL  ^ ME_FLOAT_VAL ) <<  4) |
          ((ME_FLOAT_BND  ^ ME_FLOAT_BND ) <<  8) |
          ((ME_FLOAT_DOM  ^ ME_FLOAT_BND ) << 12)
        );
        Gecode::ModEvent me_o = (med & med_mask) >> med_fst;
        Gecode::ModEvent me_n = (me_c >> (me_o << 2)) & med_mask;
        if (me_n == 0)
          return false;
        med ^= me_n << med_fst;
        break;
      }

This is similar to what is generated for IntVars (ME_INT_BND), but it 
seems that the condition (me_n == 0) always evaluates to true for 
FloatVars, and so nothing ever happens.

Lubos fixed this by changing the appropriate line to

  Gecode::ModEvent me_n = (me_c >> (me_o << 2)) & (med_mask >> med_fst);

This seems logical to me. Do you know what script to fix in order to get 
it generated this way?

Thanks,
Filip


_______________________________________________
Gecode users mailing list
users at gecode.org
https://www.gecode.org/mailman/listinfo/gecode-users




From filip.konvicka at logis.cz  Mon Apr 21 12:11:03 2008
From: filip.konvicka at logis.cz (=?UTF-8?B?RmlsaXAgS29udmnEjWth?=)
Date: Mon, 21 Apr 2008 12:11:03 +0200
Subject: [gecode-users] kernel issues
In-Reply-To: <001d01c8a395$24c209d0$6e461d70$@se>
References: <48034DD3.7040801@logis.cz> <001d01c8a395$24c209d0$6e461d70$@se>
Message-ID: <480C6837.9030102@logis.cz>

Hi Christian,

> sorry for the long delay, but I was away from my keyboard. Yes, you are
> right! I just added your fix to the trunk. For the integer variables it did
> not show, as med_fst == 0 for them.
> 
> The script that generates the variable stubs is misc/genvariables.perl (line
> 608).
> 
> Thanks for the fix!

You're welcome. By the way, after we removed the "DOM" modification 
event and propagation condition the generated code is OK even without 
the fix, but this is just because the resulting code is simpler.

FloatVar seems to work for us, we'll now spend some time polishing the 
source code and testing before we publish it.

Cheers,
Filip

> 
> -----Original Message-----
> From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf
> Of Filip Konvicka
> Sent: Monday, April 14, 2008 2:28 PM
> To: users at gecode.org
> Cc: lmoric at logis.cz
> Subject: [gecode-users] kernel issues
> 
> Hi,
> 
> so Lubos started working on the FloatVar implementation and he's 
> discovered something that looks like a bug in Gecode. Initially, we just 
> copied "integer.vis" to "float.vis" and renamed the identifiers so we 
> got "_FLOAT_" instead of "_INT_" everywhere. (Later on, we'll probably 
> at least remove the "DOM" modification event and propagation condition.)
> 
> So in short:
> 
> [General]
> Name:		Float
> Ifdef:		GECODE_HAS_FLOAT_VARS
> Namespace:	Gecode::Float
> 
> and the rest goes exactly the same as with IntVar.
> 
> Then we tried posting a propagator on a FloatVar, but unexpectedly 
> nothing happened. Lubos tracked this down to the following code fragment 
>   in kernel/var-type.icc:
> 
> case ME_FLOAT_BND:
>       {
>         static const Gecode::ModEvent me_c = (
>           ((ME_FLOAT_NONE ^ ME_FLOAT_BND ) <<  0) |
>           ((ME_FLOAT_VAL  ^ ME_FLOAT_VAL ) <<  4) |
>           ((ME_FLOAT_BND  ^ ME_FLOAT_BND ) <<  8) |
>           ((ME_FLOAT_DOM  ^ ME_FLOAT_BND ) << 12)
>         );
>         Gecode::ModEvent me_o = (med & med_mask) >> med_fst;
>         Gecode::ModEvent me_n = (me_c >> (me_o << 2)) & med_mask;
>         if (me_n == 0)
>           return false;
>         med ^= me_n << med_fst;
>         break;
>       }
> 
> This is similar to what is generated for IntVars (ME_INT_BND), but it 
> seems that the condition (me_n == 0) always evaluates to true for 
> FloatVars, and so nothing ever happens.
> 
> Lubos fixed this by changing the appropriate line to
> 
>   Gecode::ModEvent me_n = (me_c >> (me_o << 2)) & (med_mask >> med_fst);
> 
> This seems logical to me. Do you know what script to fix in order to get 
> it generated this way?
> 
> Thanks,
> Filip
> 
> 
> _______________________________________________
> Gecode users mailing list
> users at gecode.org
> https://www.gecode.org/mailman/listinfo/gecode-users




From malcolmr at cse.unsw.edu.au  Tue Apr 22 02:09:00 2008
From: malcolmr at cse.unsw.edu.au (Malcolm Ryan)
Date: Tue, 22 Apr 2008 10:09:00 +1000
Subject: [gecode-users] BExprs and IntConLevel
In-Reply-To: <000101c8a389$113915e0$33ab41a0$@se>
References: <74A4A8ED-0A04-4F77-B007-1601FB147264@cse.unsw.edu.au>
	<000101c8a389$113915e0$33ab41a0$@se>
Message-ID: <4556E727-C73A-4FE6-A783-890E1DF168C4@cse.unsw.edu.au>

That's odd then. The following code would seem to contradict that:

        a = new IntVar(this, "a", 1, 4);
        b = new IntVar(this, "b", 1, 4);

        Gecode.post(this, new BExpr(a, IntRelType.IRT_EQ, b));
        Gecode.rel(this, a, IntRelType.IRT_NQ, 2);
        Gecode.rel(this, a, IntRelType.IRT_NQ, 4);

        status();
        System.out.println("a: " + a.toString());
        System.out.println("b: " + b.toString());

On my machine this prints:

a: {1,3}
b: [1..3]

Malcolm

On 21/04/2008, at 6:24 PM, Christian Schulte wrote:

> Nope, it uses the default consistency level and for this propagator  
> that
> would be domain consistency.
>
> Christian
>
> --
> Christian Schulte, www.ict.kth.se/~cschulte/
>
>
> -----Original Message-----
> From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On  
> Behalf
> Of Malcolm Ryan
> Sent: Monday, April 21, 2008 10:19 AM
> To: gecode list
> Subject: [gecode-users] BExprs and IntConLevel
>
> Am I right in thinking that:
>
> Gecode.post(space, BExpr(ivar1, IntRelType.IRT_EQ, ivar2));
>
> will only use bounds consistency between ivar1 and ivar2?
>
> Malcolm
>
> _______________________________________________
> Gecode users mailing list
> users at gecode.org
> https://www.gecode.org/mailman/listinfo/gecode-users




From malcolmr at cse.unsw.edu.au  Tue Apr 22 05:42:16 2008
From: malcolmr at cse.unsw.edu.au (Malcolm Ryan)
Date: Tue, 22 Apr 2008 13:42:16 +1000
Subject: [gecode-users] Bugs in Gecode/J
In-Reply-To: <C1BE7A76-7038-45A3-9AF6-9E32D5B3CEE9@ps.uni-sb.de>
References: <66C23557-17D2-43EA-A090-FC9009595BE4@cse.unsw.edu.au>
	<63b5c8b00804142307v5489737ch6e308c7bc1045628@mail.gmail.com>
	<AD041900-1A0B-48FA-AEC1-90253AAF2C16@cse.unsw.edu.au>
	<63b5c8b00804150128y2909f11dkc958b2fb6ed1845c@mail.gmail.com>
	<AC437191-321F-4FF1-9D76-5AE7A72753CE@cse.unsw.edu.au>
	<DC541A15-C4AA-405A-B2B4-5023849BFC65@cse.unsw.edu.au>
	<63b5c8b00804150225s1910e551y3708f6ecbda69822@mail.gmail.com>
	<CC96E626-BFD9-4AF8-AB78-5099F2C37DD9@cse.unsw.edu.au>
	<EEE2C4E8-77F5-4B48-8768-E7534160A9E6@cse.unsw.edu.au>
	<39291D20-CA03-4314-B343-8F9D58040A29@ps.uni-sb.de>
	<C1BE7A76-7038-45A3-9AF6-9E32D5B3CEE9@ps.uni-sb.de>
Message-ID: <57CC54BD-D2AD-4808-8D4D-A2C6607D32AA@cse.unsw.edu.au>

Sorry, but that doesn't seem to be it. I've run it in single-processor  
mode on both the Mac and in Linux and the crashes are still occurring.  
It may be that some of the intermittent ones have stopped, but the  
repeatable ones remain.

Malcolm

On 21/04/2008, at 7:34 PM, Guido Tack wrote:

> I'm now certain that it's the concurrent GC that's causing the  
> problems (well, because of some bug in Gecode/J, of course).  You  
> can easily work around it by running java with the -XX:- 
> UseParallelGC option.
>
> Cheers,
> 	Guido
>
> Guido Tack wrote:
>
>> Malcolm Ryan wrote:
>>
>>> I don't mean to hassle you, but I just need to know whether you  
>>> think
>>> you can help me with this problem. I am working towards a close  
>>> paper
>>> deadline and I need to know whether to stick with Gecode/J in the  
>>> hope
>>> that we will be able to sort out these problems, or whether I need  
>>> to
>>> look for another solution.
>>
>> I've run some more experiments, and I can finally reproduce your  
>> bug.  It seems to be a memory management / concurrency issue.  I  
>> could not reproduce the bug on any 1- or 2-core machine, but only  
>> with at least 4 cores.  I suspect Java's concurrent garbage  
>> collector frees some memory that is still in use because we didn't  
>> get the locking right.
>> Did you do all your experiments on multi-core machines (i.e., more  
>> than 2 cores)?  If that's really the problem, you could run your  
>> tests with a limit on the number of CPUs used.  On Linux, you can  
>> achieve this using the taskset command.  On Mac OS 10.5, you can  
>> follow this hint to get control of your processors:
>> http://www.macosxhints.com/article.php?story=20071116183942199
>>
>> I hope this helps.  We'll try to figure out the real cause of the  
>> problem, but concurrency bugs are typically hard to find - it may  
>> take some time.
>>
>> Cheers,
>> 	Guido
>>
>> _______________________________________________
>> Gecode users mailing list
>> users at gecode.org
>> https://www.gecode.org/mailman/listinfo/gecode-users
>




From mauriciotorob at gmail.com  Tue Apr 22 11:19:44 2008
From: mauriciotorob at gmail.com (Mauricio Toro)
Date: Tue, 22 Apr 2008 11:19:44 +0200
Subject: [gecode-users] CCP ask for Gecode
Message-ID: <a6b4b44a0804220219l63f96256g46bc06ec1c0e9bd1@mail.gmail.com>

Hello all,
The ask propagator worked fine in Gecode.
I tried it with an example to find concurrently
if there is path in directed graph.
Running around 30000 "ask"s in a 10000 arcs
graph it took around 0,112 seconds.

To manage the AskBody I defined a class
"AskBody" with a virtual Execute method,
that way different bodies can be defined
for the ask propagator inhereting from that class.

I don't know how to define the "spec" method.

Additionally, I had problems with the "reflection post" method
since the AskBody is not a Gecode type.

What do you think about this definition?
Does it seam reasonable?

  class AskBody
  {
  protected:
    Space * home;
  public:
    AskBody(Space * homie) {home = homie;}
    virtual void Execute() { };
  };

  class Ask : public UnaryPropagator<BoolView,PC_GEN_ASSIGNED> {
  protected:
    using UnaryPropagator<BoolView,PC_GEN_ASSIGNED>::x0;
    AskBody * askbody;

    /// Constructor for cloning \a p
    Ask(Space* home, bool share, Ask& p);
    /// Constructor for posting
    Ask(Space* home, BoolView x, AskBody * askbody);
  public:
    /// Copy propagator during cloning
    virtual Actor*     copy(Space* home, bool share);
    /// Perform propagation
    virtual ExecStatus propagate(Space* home, ModEventDelta med);
    /// Specification for this propagator
        //virtual Reflection::ActorSpec spec(const Space* home,
        //                 Reflection::VarMap& m) const;
    /// Post propagator according to specification
   // static void post(Space* home, Reflection::VarMap& vars,
                   //  const Reflection::ActorSpec& spec);
    /// Mangled propagator name
    static Support::Symbol ati(void);
    /// Post ask propagator
    /// \textbf{blocking\_IF} $<boolean\_var>\ x$ \textbf{then}
$<ask\_body>\ askbody$ \textbf{else} $<skip>$
    static  ExecStatus post(Space* home, BoolView x, AskBody * askbody);
  };

Thanks for all,

-- 
Mauricio Toro Bermudez
Estudiante de Ingenier?a de Sistemas
Pontificia Universidad Javeriana, Colombia

Stagiare ? l'Ircam
1, place Igor-Stravinsky 75004 Paris,
France de 2008 ? 2009
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.ps.uni-sb.de/pipermail/users/attachments/20080422/3d5ee3ff/attachment.htm>

From malcolmr at cse.unsw.edu.au  Wed Apr 23 02:38:04 2008
From: malcolmr at cse.unsw.edu.au (Malcolm Ryan)
Date: Wed, 23 Apr 2008 10:38:04 +1000
Subject: [gecode-users] Bugs in Gecode/J
In-Reply-To: <57CC54BD-D2AD-4808-8D4D-A2C6607D32AA@cse.unsw.edu.au>
References: <66C23557-17D2-43EA-A090-FC9009595BE4@cse.unsw.edu.au>
	<63b5c8b00804142307v5489737ch6e308c7bc1045628@mail.gmail.com>
	<AD041900-1A0B-48FA-AEC1-90253AAF2C16@cse.unsw.edu.au>
	<63b5c8b00804150128y2909f11dkc958b2fb6ed1845c@mail.gmail.com>
	<AC437191-321F-4FF1-9D76-5AE7A72753CE@cse.unsw.edu.au>
	<DC541A15-C4AA-405A-B2B4-5023849BFC65@cse.unsw.edu.au>
	<63b5c8b00804150225s1910e551y3708f6ecbda69822@mail.gmail.com>
	<CC96E626-BFD9-4AF8-AB78-5099F2C37DD9@cse.unsw.edu.au>
	<EEE2C4E8-77F5-4B48-8768-E7534160A9E6@cse.unsw.edu.au>
	<39291D20-CA03-4314-B343-8F9D58040A29@ps.uni-sb.de>
	<C1BE7A76-7038-45A3-9AF6-9E32D5B3CEE9@ps.uni-sb.de>
	<57CC54BD-D2AD-4808-8D4D-A2C6607D32AA@cse.unsw.edu.au>
Message-ID: <25F3BC60-3A0D-4561-B8E4-4F2735D27330@cse.unsw.edu.au>

I made some apparently unrelated changes to the constraints (mostly to  
fix the problem I was having with BExprs, as in a previous email) and  
now the crashes have gone away. If I have time I will try to locate  
the exact problem, but for the time being I am just happy that it is  
working.

Malcolm

On 22/04/2008, at 1:42 PM, Malcolm Ryan wrote:

> Sorry, but that doesn't seem to be it. I've run it in single-processor
> mode on both the Mac and in Linux and the crashes are still occurring.
> It may be that some of the intermittent ones have stopped, but the
> repeatable ones remain.
>
> Malcolm
>
> On 21/04/2008, at 7:34 PM, Guido Tack wrote:
>
>> I'm now certain that it's the concurrent GC that's causing the
>> problems (well, because of some bug in Gecode/J, of course).  You
>> can easily work around it by running java with the -XX:-
>> UseParallelGC option.
>>
>> Cheers,
>> 	Guido
>>
>> Guido Tack wrote:
>>
>>> Malcolm Ryan wrote:
>>>
>>>> I don't mean to hassle you, but I just need to know whether you
>>>> think
>>>> you can help me with this problem. I am working towards a close
>>>> paper
>>>> deadline and I need to know whether to stick with Gecode/J in the
>>>> hope
>>>> that we will be able to sort out these problems, or whether I need
>>>> to
>>>> look for another solution.
>>>
>>> I've run some more experiments, and I can finally reproduce your
>>> bug.  It seems to be a memory management / concurrency issue.  I
>>> could not reproduce the bug on any 1- or 2-core machine, but only
>>> with at least 4 cores.  I suspect Java's concurrent garbage
>>> collector frees some memory that is still in use because we didn't
>>> get the locking right.
>>> Did you do all your experiments on multi-core machines (i.e., more
>>> than 2 cores)?  If that's really the problem, you could run your
>>> tests with a limit on the number of CPUs used.  On Linux, you can
>>> achieve this using the taskset command.  On Mac OS 10.5, you can
>>> follow this hint to get control of your processors:
>>> http://www.macosxhints.com/article.php?story=20071116183942199
>>>
>>> I hope this helps.  We'll try to figure out the real cause of the
>>> problem, but concurrency bugs are typically hard to find - it may
>>> take some time.
>>>
>>> Cheers,
>>> 	Guido
>>>
>>> _______________________________________________
>>> Gecode users mailing list
>>> users at gecode.org
>>> https://www.gecode.org/mailman/listinfo/gecode-users
>>
>
>
> _______________________________________________
> Gecode users mailing list
> users at gecode.org
> https://www.gecode.org/mailman/listinfo/gecode-users




From tack at ps.uni-sb.de  Wed Apr 23 07:50:25 2008
From: tack at ps.uni-sb.de (Guido Tack)
Date: Wed, 23 Apr 2008 07:50:25 +0200
Subject: [gecode-users] CCP ask for Gecode
In-Reply-To: <a6b4b44a0804220219l63f96256g46bc06ec1c0e9bd1@mail.gmail.com>
References: <a6b4b44a0804220219l63f96256g46bc06ec1c0e9bd1@mail.gmail.com>
Message-ID: <405DD93E-2DAF-4185-8020-89D7C5D3D27C@ps.uni-sb.de>

Mauricio Toro wrote:
> The ask propagator worked fine in Gecode.
> I tried it with an example to find concurrently
> if there is path in directed graph.
> Running around 30000 "ask"s in a 10000 arcs
> graph it took around 0,112 seconds.
>
> To manage the AskBody I defined a class
> "AskBody" with a virtual Execute method,
> that way different bodies can be defined
> for the ask propagator inhereting from that class.
>
> I don't know how to define the "spec" method.

You can ignore it and just return NULL.  This will only mean that  
reflection is not available for your propagator.  The alternative  
would be to delegate reflection to the AskBody class (so that would  
have to have a spec method as well).

> Additionally, I had problems with the "reflection post" method
> since the AskBody is not a Gecode type.

spec and "reflection post" are closely related, if you don't have  
spec, you don't need "reflection post" either.  On the other hand, it  
doesn't matter that AskBody is not a "Gecode type".  You just have to  
define appropriate reflection functions.  But as I said, it's not  
vital, and you can ignore it for the moment.

> What do you think about this definition?
> Does it seam reasonable?

Yes.  Another option would be to make AskBody a template argument of  
Ask.  That way, Execute wouldn't have to be virtual, but you'd have to  
instantiate Ask every time (which is no big deal).

Cheers,
	Guido

>
>   class AskBody
>   {
>   protected:
>     Space * home;
>   public:
>     AskBody(Space * homie) {home = homie;}
>     virtual void Execute() { };
>   };
>
>   class Ask : public UnaryPropagator<BoolView,PC_GEN_ASSIGNED> {
>   protected:
>     using UnaryPropagator<BoolView,PC_GEN_ASSIGNED>::x0;
>     AskBody * askbody;
>
>     /// Constructor for cloning \a p
>     Ask(Space* home, bool share, Ask& p);
>     /// Constructor for posting
>     Ask(Space* home, BoolView x, AskBody * askbody);
>   public:
>     /// Copy propagator during cloning
>     virtual Actor*     copy(Space* home, bool share);
>     /// Perform propagation
>     virtual ExecStatus propagate(Space* home, ModEventDelta med);
>     /// Specification for this propagator
>         //virtual Reflection::ActorSpec spec(const Space* home,
>         //                 Reflection::VarMap& m) const;
>     /// Post propagator according to specification
>    // static void post(Space* home, Reflection::VarMap& vars,
>                    //  const Reflection::ActorSpec& spec);
>     /// Mangled propagator name
>     static Support::Symbol ati(void);
>     /// Post ask propagator
>     /// \textbf{blocking\_IF} $<boolean\_var>\ x$ \textbf{then} $<ask 
> \_body>\ askbody$ \textbf{else} $<skip>$
>     static  ExecStatus post(Space* home, BoolView x, AskBody *  
> askbody);
>   };
>
> Thanks for all,
>
> -- 
> Mauricio Toro Bermudez
> Estudiante de Ingenier?a de Sistemas
> Pontificia Universidad Javeriana, Colombia
>
> Stagiare ? l'Ircam
> 1, place Igor-Stravinsky 75004 Paris,
> France de 2008 ? 2009
> _______________________________________________
> Gecode users mailing list
> users at gecode.org
> https://www.gecode.org/mailman/listinfo/gecode-users




From tack at ps.uni-sb.de  Wed Apr 23 08:44:37 2008
From: tack at ps.uni-sb.de (Guido Tack)
Date: Wed, 23 Apr 2008 08:44:37 +0200
Subject: [gecode-users] BExprs and IntConLevel
In-Reply-To: <4556E727-C73A-4FE6-A783-890E1DF168C4@cse.unsw.edu.au>
References: <74A4A8ED-0A04-4F77-B007-1601FB147264@cse.unsw.edu.au>
	<000101c8a389$113915e0$33ab41a0$@se>
	<4556E727-C73A-4FE6-A783-890E1DF168C4@cse.unsw.edu.au>
Message-ID: <3B0E6B95-4104-4081-ACE7-50CEE7039259@ps.uni-sb.de>

Malcolm Ryan wrote:

> That's odd then. The following code would seem to contradict that:
>
>       a = new IntVar(this, "a", 1, 4);
>       b = new IntVar(this, "b", 1, 4);
>
>       Gecode.post(this, new BExpr(a, IntRelType.IRT_EQ, b));
>       Gecode.rel(this, a, IntRelType.IRT_NQ, 2);
>       Gecode.rel(this, a, IntRelType.IRT_NQ, 4);
>
>       status();
>       System.out.println("a: " + a.toString());
>       System.out.println("b: " + b.toString());
>
> On my machine this prints:
>
> a: {1,3}
> b: [1..3]

Ah, that's a difference between Gecode and Gecode/J again.  The BExpr  
gets posted as a linear equation with ICL_DEF, and that produces only  
bounds consistency.

Cheers,
	Guido




From mauriciotorob at gmail.com  Thu Apr 24 11:14:55 2008
From: mauriciotorob at gmail.com (Mauricio Toro)
Date: Thu, 24 Apr 2008 11:14:55 +0200
Subject: [gecode-users] Parallel conditional combinator
Message-ID: <a6b4b44a0804240214q482d8a7fi6be81bdfe8a13d22@mail.gmail.com>

Hello all,
I am thinking about implementing the
parallel conditional combinator as a
Gecode propagator. Any ideas about
how to do this efficiently?

By the way, where can I find examples
about using the reflection post and spec
propagator methods?

Thanks

-- 
Mauricio Toro Bermudez
Estudiante de Ingenier?a de Sistemas
Pontificia Universidad Javeriana, Colombia

Stagiare ? l'Ircam
1, place Igor-Stravinsky 75004 Paris,
France de 2008 ? 2009
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.ps.uni-sb.de/pipermail/users/attachments/20080424/e1771d36/attachment.htm>

From tack at ps.uni-sb.de  Thu Apr 24 11:41:04 2008
From: tack at ps.uni-sb.de (Guido Tack)
Date: Thu, 24 Apr 2008 11:41:04 +0200
Subject: [gecode-users] Parallel conditional combinator
In-Reply-To: <a6b4b44a0804240214q482d8a7fi6be81bdfe8a13d22@mail.gmail.com>
References: <a6b4b44a0804240214q482d8a7fi6be81bdfe8a13d22@mail.gmail.com>
Message-ID: <462C6F4E-07DA-418A-AB37-CE673244EB0F@ps.uni-sb.de>

Mauricio Toro wrote:
> I am thinking about implementing the
> parallel conditional combinator as a
> Gecode propagator. Any ideas about
> how to do this efficiently?

I guess by parallel conditional you mean something like (if b1 then a1  
|| if b2 then a2 || ...), where || means parallel composition, and  
with a short-circuit semantics that the first b that is determined to  
be true "wins" and all other branches are discarded?

I think you could just extend the conditional that you already have.   
As soon as one guard is determined, you execute that branch and remove  
the conditional propagator (by returning ES_SUBSUMED).  You have to be  
very careful, though: you can easily program non-monotonic propagators  
this way, which are not allowed in Gecode!  E.g., if you wait for two  
conditions, it may depend on the order of propagation which condition  
is satisfied first, so the constraints added by the parallel  
conditional can be different, depending on the order of propagator  
execution.  Don't do this unless you know exactly what you're doing (I  
cannot see how to use this in a reasonable way).

Remember that Gecode is meant for solving constraint problems, not for  
executing cc programs!

> By the way, where can I find examples
> about using the reflection post and spec
> propagator methods?

Here:
http://www.gecode.org/gecode-doc-latest/PageReflection.html

Cheers,
	Guido



From malcolmr at cse.unsw.edu.au  Fri Apr 25 05:28:58 2008
From: malcolmr at cse.unsw.edu.au (Malcolm Ryan)
Date: Fri, 25 Apr 2008 13:28:58 +1000
Subject: [gecode-users] Adding variables incrementally
Message-ID: <45AD82DA-0129-44F6-ADA7-D0AFD3D19417@cse.unsw.edu.au>

In order to save memory, I've been trying to turn my planning code  
into a two stage in which the first stage only creates and constrains  
a certain critical subset of variables. When all the first-stage  
variables have been assigned, additional variables are created and a  
second stage of search occurs. The two stages are not completely  
independent however, and there may be failures in the second stage  
which require backtracking into the first. This should save memeory,  
since the second-stage variables don't have to be carried around  
during the first-stage search.

I was hoping that I could do this simply by adding new variables and  
constraints in the copy constructor at the appropriate moment, but it  
seems that this does not work. I wrote a simple test case to check:

public class Test extends Space {

     IntVar a, b;

     public Test() {
         super("test");

         a = new IntVar(this, "a", 1, 4);
     }

     public Test(Boolean share, Test old) {
         super(share, old);

         a = old.a.copy(this, share);
         if (a.assigned()) {
             if (b == null) {
                 b = new IntVar(this, "b", 1, 4);
                 Gecode.rel(this, a, IntRelType.IRT_EQ, b);
             }
             else {
                 b = old.b.copy(this, share);
             }
         }
         else {
             b = null;
         }
     }

     public static void main(String[] args) {
         Test test = new Test();
         System.out.println("Status: " + test.status());

         test = (Test) test.cloneSpace();
         System.out.println("Status: " + test.status());
         System.out.println("a = " + test.a);
         System.out.println("b = " + test.b);

         Gecode.rel(test, test.a, IntRelType.IRT_EQ, 3);
         System.out.println("Status: " + test.status());
         System.out.println("a = " + test.a);
         System.out.println("b = " + test.b);

         test = (Test) test.cloneSpace();
         System.out.println("Status: " + test.status());
         System.out.println("a = " + test.a);
         System.out.println("b = " + test.b);

         Gecode.rel(test, test.b, IntRelType.IRT_EQ, 1);
         System.out.println("Status: " + test.status());
         System.out.println("a = " + test.a);
         System.out.println("b = " + test.b);

     }
}

The constraint Gecode.rel(this, a, IntRelType.IRT_EQ, b); seems to  
have no effect. I can set a = 3, b = 1 and the status will still be  
SS_SOLVED. I'm not entirely surprised. I presume that I am breaking  
some assumptions in the system.

Is there any other way to do a two-stage search like this?

Malcolm




From malcolmr at cse.unsw.edu.au  Mon Apr 28 02:37:58 2008
From: malcolmr at cse.unsw.edu.au (Malcolm Ryan)
Date: Mon, 28 Apr 2008 10:37:58 +1000
Subject: [gecode-users] Adding variables incrementally
Message-ID: <D798C058-B09D-4F5A-8DBB-AD81447B9157@cse.unsw.edu.au>

In order to save memory, I've been trying to turn my planning code  
into a two stage in which the first stage only creates and constrains  
a certain critical subset of variables. When all the first-stage  
variables have been assigned, additional variables are created and a  
second stage of search occurs. The two stages are not completely  
independent however, and there may be failures in the second stage  
which require backtracking into the first. This should save memeory,  
since the second-stage variables don't have to be carried around  
during the first-stage search.

I was hoping that I could do this simply by adding new variables and  
constraints in the copy constructor at the appropriate moment, but it  
seems that this does not work. I wrote a simple test case to check:

public class Test extends Space {

    IntVar a, b;

    public Test() {
        super("test");

        a = new IntVar(this, "a", 1, 4);
    }

    public Test(Boolean share, Test old) {
        super(share, old);

        a = old.a.copy(this, share);
        if (a.assigned()) {
            if (b == null) {
                b = new IntVar(this, "b", 1, 4);
                Gecode.rel(this, a, IntRelType.IRT_EQ, b);
            }
            else {
                b = old.b.copy(this, share);
            }
        }
        else {
            b = null;
        }
    }

    public static void main(String[] args) {
        Test test = new Test();
        System.out.println("Status: " + test.status());

        test = (Test) test.cloneSpace();
        System.out.println("Status: " + test.status());
        System.out.println("a = " + test.a);
        System.out.println("b = " + test.b);

        Gecode.rel(test, test.a, IntRelType.IRT_EQ, 3);
        System.out.println("Status: " + test.status());
        System.out.println("a = " + test.a);
        System.out.println("b = " + test.b);

        test = (Test) test.cloneSpace();
        System.out.println("Status: " + test.status());
        System.out.println("a = " + test.a);
        System.out.println("b = " + test.b);

        Gecode.rel(test, test.b, IntRelType.IRT_EQ, 1);
        System.out.println("Status: " + test.status());
        System.out.println("a = " + test.a);
        System.out.println("b = " + test.b);

    }
}

The constraint Gecode.rel(this, a, IntRelType.IRT_EQ, b); seems to  
have no effect. I can set a = 3, b = 1 and the status will still be  
SS_SOLVED. I'm not entirely surprised. I presume that I am breaking  
some assumptions in the system.

Is there any other way to do a two-stage search like this?

Malcolm




From zayenz at gmail.com  Mon Apr 28 07:47:08 2008
From: zayenz at gmail.com (Mikael Zayenz Lagerkvist)
Date: Mon, 28 Apr 2008 07:47:08 +0200
Subject: [gecode-users] Adding variables incrementally
In-Reply-To: <45AD82DA-0129-44F6-ADA7-D0AFD3D19417@cse.unsw.edu.au>
References: <45AD82DA-0129-44F6-ADA7-D0AFD3D19417@cse.unsw.edu.au>
Message-ID: <63b5c8b00804272247g34fc9757q44bb18a023e5f201@mail.gmail.com>

On Fri, Apr 25, 2008 at 5:28 AM, Malcolm Ryan <malcolmr at cse.unsw.edu.au> wrote:
> In order to save memory, I've been trying to turn my planning code
>  into a two stage in which the first stage only creates and constrains
>  a certain critical subset of variables. When all the first-stage
>  variables have been assigned, additional variables are created and a
>  second stage of search occurs. The two stages are not completely
>  independent however, and there may be failures in the second stage
>  which require backtracking into the first. This should save memeory,
>  since the second-stage variables don't have to be carried around
>  during the first-stage search.
>
>  I was hoping that I could do this simply by adding new variables and
>  constraints in the copy constructor at the appropriate moment, but it
>  seems that this does not work.
</snip>
>  Is there any other way to do a two-stage search like this?

While the copy-constructor is not the right place to add constraints
and variables, there is a more fundamental problem with your scheme.
When all the variables are assigned, all branchings will be finished,
and thus the Space will be solved (status returns SS_SOLVED). The
search will therefore stop the search and return the current solution.

You could program you addition of variables and constraints as a
branching, but since you want to do this when all the original
variables are assigned, then I would suggest the following scheme.
    FirstStageSpace first = new FirstStageSpace();
    DFSIterator<FirstStageSpace> outerDFS =
        new DFSIterator<FirstStageSpace>(first);
    while (outerDFS.hasNext()) {
        FirstStageSpace firstsolution = outerDFS.next();
        SecondStageSpace second =
            new SecondStageSpace(firstsolution);
        DFSIterator<FirstStageSpace> innerDFS =
            new DFSIterator<SecondStageSpace>(second);
        if (innerDFS.hasNext()) {
            System.out.println(innerDFS.next()); break;
        }
    }
I've not tested the above code, but I think the idea should be clear.

Cheers,
Mikael

-- 
Mikael Zayenz Lagerkvist, http://www.ict.kth.se/~zayenz/



From malcolmr at cse.unsw.edu.au  Mon Apr 28 08:40:48 2008
From: malcolmr at cse.unsw.edu.au (Malcolm Ryan)
Date: Mon, 28 Apr 2008 16:40:48 +1000
Subject: [gecode-users] Adding variables incrementally
In-Reply-To: <63b5c8b00804272247g34fc9757q44bb18a023e5f201@mail.gmail.com>
References: <45AD82DA-0129-44F6-ADA7-D0AFD3D19417@cse.unsw.edu.au>
	<63b5c8b00804272247g34fc9757q44bb18a023e5f201@mail.gmail.com>
Message-ID: <64B55081-E43E-4995-AFE4-DA9A8F72C912@cse.unsw.edu.au>

Yes, this is what I'm currently trying.

Malcolm

On 28/04/2008, at 3:47 PM, Mikael Zayenz Lagerkvist wrote:

> On Fri, Apr 25, 2008 at 5:28 AM, Malcolm Ryan <malcolmr at cse.unsw.edu.au 
> > wrote:
>> In order to save memory, I've been trying to turn my planning code
>> into a two stage in which the first stage only creates and constrains
>> a certain critical subset of variables. When all the first-stage
>> variables have been assigned, additional variables are created and a
>> second stage of search occurs. The two stages are not completely
>> independent however, and there may be failures in the second stage
>> which require backtracking into the first. This should save memeory,
>> since the second-stage variables don't have to be carried around
>> during the first-stage search.
>>
>> I was hoping that I could do this simply by adding new variables and
>> constraints in the copy constructor at the appropriate moment, but it
>> seems that this does not work.
> </snip>
>> Is there any other way to do a two-stage search like this?
>
> While the copy-constructor is not the right place to add constraints
> and variables, there is a more fundamental problem with your scheme.
> When all the variables are assigned, all branchings will be finished,
> and thus the Space will be solved (status returns SS_SOLVED). The
> search will therefore stop the search and return the current solution.
>
> You could program you addition of variables and constraints as a
> branching, but since you want to do this when all the original
> variables are assigned, then I would suggest the following scheme.
>    FirstStageSpace first = new FirstStageSpace();
>    DFSIterator<FirstStageSpace> outerDFS =
>        new DFSIterator<FirstStageSpace>(first);
>    while (outerDFS.hasNext()) {
>        FirstStageSpace firstsolution = outerDFS.next();
>        SecondStageSpace second =
>            new SecondStageSpace(firstsolution);
>        DFSIterator<FirstStageSpace> innerDFS =
>            new DFSIterator<SecondStageSpace>(second);
>        if (innerDFS.hasNext()) {
>            System.out.println(innerDFS.next()); break;
>        }
>    }
> I've not tested the above code, but I think the idea should be clear.
>
> Cheers,
> Mikael
>
> -- 
> Mikael Zayenz Lagerkvist, http://www.ict.kth.se/~zayenz/




From malcolmr at cse.unsw.edu.au  Tue Apr 29 04:49:59 2008
From: malcolmr at cse.unsw.edu.au (Malcolm Ryan)
Date: Tue, 29 Apr 2008 12:49:59 +1000
Subject: [gecode-users] Bugs in Gecode/J
In-Reply-To: <25F3BC60-3A0D-4561-B8E4-4F2735D27330@cse.unsw.edu.au>
References: <66C23557-17D2-43EA-A090-FC9009595BE4@cse.unsw.edu.au>
	<63b5c8b00804142307v5489737ch6e308c7bc1045628@mail.gmail.com>
	<AD041900-1A0B-48FA-AEC1-90253AAF2C16@cse.unsw.edu.au>
	<63b5c8b00804150128y2909f11dkc958b2fb6ed1845c@mail.gmail.com>
	<AC437191-321F-4FF1-9D76-5AE7A72753CE@cse.unsw.edu.au>
	<DC541A15-C4AA-405A-B2B4-5023849BFC65@cse.unsw.edu.au>
	<63b5c8b00804150225s1910e551y3708f6ecbda69822@mail.gmail.com>
	<CC96E626-BFD9-4AF8-AB78-5099F2C37DD9@cse.unsw.edu.au>
	<EEE2C4E8-77F5-4B48-8768-E7534160A9E6@cse.unsw.edu.au>
	<39291D20-CA03-4314-B343-8F9D58040A29@ps.uni-sb.de>
	<C1BE7A76-7038-45A3-9AF6-9E32D5B3CEE9@ps.uni-sb.de>
	<57CC54BD-D2AD-4808-8D4D-A2C6607D32AA@cse.unsw.edu.au>
	<25F3BC60-3A0D-4561-B8E4-4F2735D27330@cse.unsw.edu.au>
Message-ID: <2A3EC1C6-BA50-4A08-AF83-BFC5BD54711B@cse.unsw.edu.au>

I've just discovered that at least one source of the crashes I've  
encountered is linked to my use of a TimeStop on search. I hope this  
helps.

Malcolm




From malcolmr at cse.unsw.edu.au  Tue Apr 29 11:40:42 2008
From: malcolmr at cse.unsw.edu.au (Malcolm Ryan)
Date: Tue, 29 Apr 2008 19:40:42 +1000
Subject: [gecode-users] Bugs in Gecode/J
In-Reply-To: <2A3EC1C6-BA50-4A08-AF83-BFC5BD54711B@cse.unsw.edu.au>
References: <66C23557-17D2-43EA-A090-FC9009595BE4@cse.unsw.edu.au>
	<63b5c8b00804142307v5489737ch6e308c7bc1045628@mail.gmail.com>
	<AD041900-1A0B-48FA-AEC1-90253AAF2C16@cse.unsw.edu.au>
	<63b5c8b00804150128y2909f11dkc958b2fb6ed1845c@mail.gmail.com>
	<AC437191-321F-4FF1-9D76-5AE7A72753CE@cse.unsw.edu.au>
	<DC541A15-C4AA-405A-B2B4-5023849BFC65@cse.unsw.edu.au>
	<63b5c8b00804150225s1910e551y3708f6ecbda69822@mail.gmail.com>
	<CC96E626-BFD9-4AF8-AB78-5099F2C37DD9@cse.unsw.edu.au>
	<EEE2C4E8-77F5-4B48-8768-E7534160A9E6@cse.unsw.edu.au>
	<39291D20-CA03-4314-B343-8F9D58040A29@ps.uni-sb.de>
	<C1BE7A76-7038-45A3-9AF6-9E32D5B3CEE9@ps.uni-sb.de>
	<57CC54BD-D2AD-4808-8D4D-A2C6607D32AA@cse.unsw.edu.au>
	<25F3BC60-3A0D-4561-B8E4-4F2735D27330@cse.unsw.edu.au>
	<2A3EC1C6-BA50-4A08-AF83-BFC5BD54711B@cse.unsw.edu.au>
Message-ID: <CEDE7334-A4DC-4951-A478-8E9E16E35C7F@cse.unsw.edu.au>

I've attached the relevant hs_err file.

Malcolm

On 29/04/2008, at 12:49 PM, Malcolm Ryan wrote:

> I've just discovered that at least one source of the crashes I've
> encountered is linked to my use of a TimeStop on search. I hope this
> helps.
>
> Malcolm
>
>
> _______________________________________________
> Gecode users mailing list
> users at gecode.org
> https://www.gecode.org/mailman/listinfo/gecode-users
-------------- next part --------------
A non-text attachment was scrubbed...
Name: hs_err_pid7998.log
Type: application/octet-stream
Size: 14777 bytes
Desc: not available
URL: <http://www.ps.uni-sb.de/pipermail/users/attachments/20080429/af488ac3/attachment.obj>

From tack at ps.uni-sb.de  Wed Apr 30 09:41:02 2008
From: tack at ps.uni-sb.de (Guido Tack)
Date: Wed, 30 Apr 2008 09:41:02 +0200
Subject: [gecode-users] Bugs in Gecode/J
In-Reply-To: <2A3EC1C6-BA50-4A08-AF83-BFC5BD54711B@cse.unsw.edu.au>
References: <66C23557-17D2-43EA-A090-FC9009595BE4@cse.unsw.edu.au>
	<63b5c8b00804142307v5489737ch6e308c7bc1045628@mail.gmail.com>
	<AD041900-1A0B-48FA-AEC1-90253AAF2C16@cse.unsw.edu.au>
	<63b5c8b00804150128y2909f11dkc958b2fb6ed1845c@mail.gmail.com>
	<AC437191-321F-4FF1-9D76-5AE7A72753CE@cse.unsw.edu.au>
	<DC541A15-C4AA-405A-B2B4-5023849BFC65@cse.unsw.edu.au>
	<63b5c8b00804150225s1910e551y3708f6ecbda69822@mail.gmail.com>
	<CC96E626-BFD9-4AF8-AB78-5099F2C37DD9@cse.unsw.edu.au>
	<EEE2C4E8-77F5-4B48-8768-E7534160A9E6@cse.unsw.edu.au>
	<39291D20-CA03-4314-B343-8F9D58040A29@ps.uni-sb.de>
	<C1BE7A76-7038-45A3-9AF6-9E32D5B3CEE9@ps.uni-sb.de>
	<57CC54BD-D2AD-4808-8D4D-A2C6607D32AA@cse.unsw.edu.au>
	<25F3BC60-3A0D-4561-B8E4-4F2735D27330@cse.unsw.edu.au>
	<2A3EC1C6-BA50-4A08-AF83-BFC5BD54711B@cse.unsw.edu.au>
Message-ID: <6A7AC614-B680-47A6-9523-7B63D87C2029@ps.uni-sb.de>

Malcolm Ryan wrote:

> I've just discovered that at least one source of the crashes I've
> encountered is linked to my use of a TimeStop on search. I hope this
> helps.

At least it explains why it's so difficult to reproduce, if it's  
related to concrete timing.  Unfortunately, the error log you sent us  
does not show what exactly goes wrong.
We'll have a look at Stop objects, but I doubt we'll find something  
just by looking at the code.  The only way to debug this would be if  
you could either give one of us access to the machine where it  
crashes, so that we can run it in gdb and dig a little deeper, or, if  
that's not possible, that you try running it in the debugger yourself  
and tell us exactly where it crashes.  Of course, as it depends on  
timing, the bug may just disappear in a debug build, or when run in  
gdb...

Cheers,
	Guido




