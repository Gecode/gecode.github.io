From jorgeivory at gmail.com  Sat Aug  2 22:07:35 2008
From: jorgeivory at gmail.com (=?ISO-8859-1?Q?Jorge_Ivory_Casta=F1o?=)
Date: Sat, 2 Aug 2008 15:07:35 -0500
Subject: [gecode-users] GecodeJ and 64 bits
Message-ID: <fa32d88f0808021307l667950b0h9db10f64505ffa2d@mail.gmail.com>

Hi, I just bougth a new computer with an ASUS M2NSLI motheboard and a AMD
Athlon 64 X2 6000+ Processor, 4Gb in RAM. (old one was malfunctioning)
I have been in trouble trying to install some things because of drivers
problems and software that is not in 64 bits architecture.
I am working in my thesis with Gecode and GecodeJ, and now that i want to
continue working in my new computer I would like to know:
Is GecodeJ compatible with my 64 bits architecture? Has someone installed
it?
What OS do you recommend me for work on Gecodej? Linux or Windows Vista
Ultimate? (Xp is not possible because or the 4gb in RAM and lots of bugs
with my motherboard in the 64bits version).
In case you recommend me Linux, can you suggest me a distribution that you
know works fine with gecodej? I will really appreciate you help.
Many thanks to you all.


Jorge Ivory Casta?o
Estudiante de Ingenier?a de Sistemas
Universidad del Valle, Cali-Colombia
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.ps.uni-sb.de/pipermail/users/attachments/20080802/66bb7982/attachment.htm>

From cschulte at kth.se  Mon Aug  4 11:36:35 2008
From: cschulte at kth.se (Christian Schulte)
Date: Mon, 4 Aug 2008 11:36:35 +0200
Subject: [gecode-users] reified linear sum of booleans
In-Reply-To: <F9B15072-AEEE-4B2A-BB83-B39B20E17CB7@ps.uni-sb.de>
References: <op.ue0e3pl4qa8xjr@demerzel.cs.kuleuven.be>
	<F9B15072-AEEE-4B2A-BB83-B39B20E17CB7@ps.uni-sb.de>
Message-ID: <001c01c8f615$96fc4380$c4f4ca80$@se>

Hi Tias,

to comment on the reified linear Boolean: I believed that they were not that
useful. Clearly, you proved me wrong here. A watched literal based
implementation will be included in 3.0.

On a more general note: if we don't know whether something is useful we
leave it until demand for it arises.

Cheers
Christian

--
Christian Schulte, www.ict.kth.se/~cschulte/


-----Original Message-----
From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf
Of Guido Tack
Sent: Tuesday, July 29, 2008 8:59 AM
To: Tias Guns
Cc: users at gecode.org
Subject: Re: [gecode-users] reified linear sum of booleans

Hi Tias,

Tias Guns wrote:

> Greetings,
>
> I'm using a model in which I rely heavily on reified linear sums of
> booleans. Unfortunately the existing boolean reified linear sum
> implementatiom is horribly slow for this ! To overcome this, I'm
> currently
> channeling all boolean variables to integers, and posting the reified
> linear sum over the integers. This gives incredibly faster runtimes.

The reified Boolean sums are currently not implemented by special
propagators but using a decomposition that is not very efficient.

> The first batch of constraints are regular reified linear sums, they
> are
> constructed by reading a binary matrix and creating an IntArgs 'row'
> which
> contains 0 or 1 (out or in). This 'row' is multiplied by an array of
> decision variables, each representing one column. Doing so selects the
> desired subset of those variables after which they are constrained and
> reified to the variable representing that row:
> for (int r = 0; r!=nr_r;r++ ) {
>   // make row
>   for (int c = 0; c!=nr_c;c++ ) {
>     row[c] = (1-tdb[r][c]); // complement
>   }
>   // sum(row*col_vars) = 0 <=> row_vars[r]
>   linear(this, row, col_vars, IRT_EQ, 0, row_varsBool[r]);
> }
>
> here, the col_vars is an IntVarArgs that is channeled to corresponding
> BoolVars.

You may want to use Boolean disjunction here, although you'll have to
use another temporary Boolean variable.  Something like this:

for (int r = 0; r != nr_r; r++) {
   BoolVarArgs col(noOfZeroesIn_tdb_Row[r]);
   for (int i = 0, int c = 0; c != nr_c; c++) {
     if (tdb[r][c])
        col[i++] = col_varsBool[c];
   }
   BoolVar tmp(this, 0, 1);
   rel(this, BOT_OR, col, tmp);
   rel(this, tmp, IRT_NQ, row_varsBool[r]);
}

I'm not sure whether this is going to be more efficient, but the
specialized Boolean propagators should be better.

> The second batch of constraints are imply-reified linear sums,
> having one
> sided reification. Because one-sided reification is not implemented in
> gecode directly, an extra auxiliary variable and constraint is used to
> manage it:
> for (int c = 0; c!=nr_c;c++ ) {
>   // make col
>   for (int r = 0; r!=nr_r;r++ ) {
>     col[r] = tdb[r][c];
>   }
>   // sum(col*row_vars) >= X <=> col_aux[c]
>   linear(this, col, row_vars, IRT_GQ, X, col_aux[c]);
>   // col_aux[c] => col_varsBool[c] (one-sided reificiation,
> reformulation
> is) col_aux[c] =< col_varsBool[c]
>   rel(this, col_aux[c], IRT_LQ, col_varsBool[c]);
> }
> similarly as above, row_vars is an IntVarArgs channeled to
> corresponding
> BoolVars.

As suggested above, you could post the first linear constraint using
just the row_vars for which col[r] is 1, but in this case it probably
isn't more efficient (since the linear will immediately throw away all
the variables with 0 coefficients anyway).

> This model works very well but still, I'm wondering if there would
> be a
> better or cleaner way to model this, and if there are any plans to
> improve
> the reified linear sum of boolean constraints.

Yes, the reified linear Boolean sum is going to be reimplemented, but
not for the (upcoming) 2.2.0 release.

Cheers,
        Guido


_______________________________________________
Gecode users mailing list
users at gecode.org
https://www.gecode.org/mailman/listinfo/gecode-users




From cschulte at kth.se  Mon Aug  4 11:44:45 2008
From: cschulte at kth.se (Christian Schulte)
Date: Mon, 4 Aug 2008 11:44:45 +0200
Subject: [gecode-users] GecodeJ and 64 bits
In-Reply-To: <fa32d88f0808021307l667950b0h9db10f64505ffa2d@mail.gmail.com>
References: <fa32d88f0808021307l667950b0h9db10f64505ffa2d@mail.gmail.com>
Message-ID: <002101c8f616$ba9576d0$2fc06470$@se>

Hi,

 

as both Gecode/J experts are currently away from their keyboards let me give
you a non-expert answer. Gecode of course  works with 64 bit (I use it with
64bit only). Gecode/J should work as well just try building it.

 

As it comes to which OS you use that does not matter. Gecode is okay on
both. Also as it comes to distributions, that does not matter.

 

Christian

 

--

Christian Schulte, www.ict.kth.se/~cschulte/

 

From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf
Of Jorge Ivory Casta?o
Sent: Saturday, August 02, 2008 10:08 PM
To: users at gecode.org
Subject: [gecode-users] GecodeJ and 64 bits

 

Hi, I just bougth a new computer with an ASUS M2NSLI motheboard and a AMD
Athlon 64 X2 6000+ Processor, 4Gb in RAM. (old one was malfunctioning)
I have been in trouble trying to install some things because of drivers
problems and software that is not in 64 bits architecture.
I am working in my thesis with Gecode and GecodeJ, and now that i want to
continue working in my new computer I would like to know:
Is GecodeJ compatible with my 64 bits architecture? Has someone installed
it?
What OS do you recommend me for work on Gecodej? Linux or Windows Vista
Ultimate? (Xp is not possible because or the 4gb in RAM and lots of bugs
with my motherboard in the 64bits version).
In case you recommend me Linux, can you suggest me a distribution that you
know works fine with gecodej? I will really appreciate you help.
Many thanks to you all.


Jorge Ivory Casta?o
Estudiante de Ingenier?a de Sistemas
Universidad del Valle, Cali-Colombia

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.ps.uni-sb.de/pipermail/users/attachments/20080804/971ef04d/attachment.htm>

From cschulte at kth.se  Mon Aug  4 11:39:23 2008
From: cschulte at kth.se (Christian Schulte)
Date: Mon, 4 Aug 2008 11:39:23 +0200
Subject: [gecode-users] reified linear sum of booleans
In-Reply-To: <op.ue1934biqa8xjr@demerzel.cs.kuleuven.be>
References: <op.ue0e3pl4qa8xjr@demerzel.cs.kuleuven.be>	<F9B15072-AEEE-4B2A-BB83-B39B20E17CB7@ps.uni-sb.de>
	<op.ue1934biqa8xjr@demerzel.cs.kuleuven.be>
Message-ID: <001d01c8f615$fa9abc50$efd034f0$@se>

That's another constraint I know some day would be requested: a clause
constraint for both positive and negative literals. Also added to my list of
things to add, but might make it only to 3.x and not 3.0.

Cheers
Christian

--
Christian Schulte, www.ict.kth.se/~cschulte/


-----Original Message-----
From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf
Of Tias Guns
Sent: Tuesday, July 29, 2008 6:16 PM
To: Guido Tack
Cc: users at gecode.org
Subject: Re: [gecode-users] reified linear sum of booleans

On Tue, 29 Jul 2008 08:59:26 +0200, Guido Tack <tack at ps.uni-sb.de> wrote:

> Hi Tias,

Thank you for your answers,

> Tias Guns wrote:
>
>> Greetings,
>>
>> I'm using a model in which I rely heavily on reified linear sums of
>> booleans. Unfortunately the existing boolean reified linear sum
>> implementatiom is horribly slow for this ! To overcome this, I'm
>> currently
>> channeling all boolean variables to integers, and posting the reified
>> linear sum over the integers. This gives incredibly faster runtimes.
>
> The reified Boolean sums are currently not implemented by special
> propagators but using a decomposition that is not very efficient.
>
>> The first batch of constraints are regular reified linear sums, they are
>> constructed by reading a binary matrix and creating an IntArgs 'row'
>> which
>> contains 0 or 1 (out or in). This 'row' is multiplied by an array of
>> decision variables, each representing one column. Doing so selects the
>> desired subset of those variables after which they are constrained and
>> reified to the variable representing that row:
>> for (int r = 0; r!=nr_r;r++ ) {
>>   // make row
>>   for (int c = 0; c!=nr_c;c++ ) {
>>     row[c] = (1-tdb[r][c]); // complement
>>   }
>>   // sum(row*col_vars) = 0 <=> row_vars[r]
>>   linear(this, row, col_vars, IRT_EQ, 0, row_varsBool[r]);
>> }
>>
>> here, the col_vars is an IntVarArgs that is channeled to corresponding
>> BoolVars.
>
> You may want to use Boolean disjunction here, although you'll have to
> use another temporary Boolean variable.  Something like this:
>
> for (int r = 0; r != nr_r; r++) {
>    BoolVarArgs col(noOfZeroesIn_tdb_Row[r]);
>    for (int i = 0, int c = 0; c != nr_c; c++) {
>      if (tdb[r][c])
>       col[i++] = col_varsBool[c];
>    }
>    BoolVar tmp(this, 0, 1);
>    rel(this, BOT_OR, col, tmp);
>    rel(this, tmp, IRT_NQ, row_varsBool[r]);
> }
>
> I'm not sure whether this is going to be more efficient, but the
> specialized Boolean propagators should be better.

Unfortunately it's not more efficient. The number of propagations
increases, probably because of the extra constraints. The runtime behaves
worse and worse as the problem instances become larger and harder. I've
looked into posting an NaryOr constraint with a BoolViewArray and a
NegBoolView directly, but the current templating of NaryOr doesn't allow
it. I'm hoping/thinking that a reified linear sum of booleans would be
able to achieve equal propagation..

>> The second batch of constraints are imply-reified linear sums, having
>> one
>> sided reification. Because one-sided reification is not implemented in
>> gecode directly, an extra auxiliary variable and constraint is used to
>> manage it:
>> for (int c = 0; c!=nr_c;c++ ) {
>>   // make col
>>   for (int r = 0; r!=nr_r;r++ ) {
>>     col[r] = tdb[r][c];
>>   }
>>   // sum(col*row_vars) >= X <=> col_aux[c]
>>   linear(this, col, row_vars, IRT_GQ, X, col_aux[c]);
>>   // col_aux[c] => col_varsBool[c] (one-sided reificiation,
>> reformulation
>> is) col_aux[c] =< col_varsBool[c]
>>   rel(this, col_aux[c], IRT_LQ, col_varsBool[c]);
>> }
>> similarly as above, row_vars is an IntVarArgs channeled to corresponding
>> BoolVars.
>
> As suggested above, you could post the first linear constraint using
> just the row_vars for which col[r] is 1, but in this case it probably
> isn't more efficient (since the linear will immediately throw away all
> the variables with 0 coefficients anyway).
>
>> This model works very well but still, I'm wondering if there would be a
>> better or cleaner way to model this, and if there are any plans to
>> improve
>> the reified linear sum of boolean constraints.
>
> Yes, the reified linear Boolean sum is going to be reimplemented, but
> not for the (upcoming) 2.2.0 release.

Excellent, thanks in advance.


Greetings,
Tias

> Cheers,
>       Guido



_______________________________________________
Gecode users mailing list
users at gecode.org
https://www.gecode.org/mailman/listinfo/gecode-users




From cschulte at kth.se  Mon Aug  4 16:03:26 2008
From: cschulte at kth.se (Christian Schulte)
Date: Mon, 4 Aug 2008 16:03:26 +0200
Subject: [gecode-users] Non-monotonic propagator.
In-Reply-To: <AC169416-1815-46BC-8E60-2AE305245810@ps.uni-sb.de>
References: <486A5F4A.4050905@uclouvain.be>
	<AC169416-1815-46BC-8E60-2AE305245810@ps.uni-sb.de>
Message-ID: <004301c8f63a$dd9d2aa0$98d77fe0$@se>

Hi,

actually we have been thinking some more, driven also by the fact that we
have a non-monotonic propagator ourselves. 

So, Gecode 3.0 will support non-monotonic propagators. What we have to do,
still, is to spell out the invariants and guarantees one still gets when
using non-monotonic propagators (the key here will be that the existence of
solutions does not change). It looks reasonably straightforward for all but
Gist (so, Gist will warn now and then that it might recompute something
slightly different).

Cheers
Christian

--
Christian Schulte, www.ict.kth.se/~cschulte/


-----Original Message-----
From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf
Of Guido Tack
Sent: Tuesday, July 01, 2008 5:33 PM
To: Zampelli Stephane
Cc: users at gecode.org
Subject: Re: [gecode-users] Non-monotonic propagator.

Zampelli Stephane wrote:
> Suppose one has a non-monotonic propagator P, because the propagator
> uses an approximation (of a NP-Hard problem) of the pruning.
> How can Gecode accomodate of this situation?
> Does this mean that recomputation cannot be used?

Recomputation will almost certainly fail (i.e., segfault or throw an
exception) if non-monotonic propagators are present.

> Is the result correct if the recomputation is not used (full copying,
> c_d=1)?

Yes.

> What about executing the propag P after the fixpoint of all other
> monotonic constraints?

That looks like a solution in principle, but won't work in practice.
The problem is that the space is not going to be stable (i.e. at a
fixpoint) after running P.  Spaces in Gecode can only be copied at
fixpoints.  You could iterate the normal fixpoint computation and the
invocation of P until you reach a mutual fixpoint.  Still, this is not
guaranteed to work with batch recomputation, where only one fixpoint
is computed for each backtrack.

We have thought a bit about how to accomodate non-monotonic
propagators, but it's really not easy.

Cheers,
        Guido


_______________________________________________
Gecode users mailing list
users at gecode.org
https://www.gecode.org/mailman/listinfo/gecode-users




From David.Rijsman at quintiq.com  Wed Aug  6 14:34:36 2008
From: David.Rijsman at quintiq.com (David Rijsman)
Date: Wed, 06 Aug 2008 14:34:36 +0200
Subject: [gecode-users] Extending Actor for actions
Message-ID: <4899B67B.D4D3.0085.0@quintiq.com>

I am working on a search framework using Gecode and have a question concerning the following. 

My search generates a node containing actions to be executed where an action can be an arbitrary operation including generating a disjunction or conjunction of (sub-)actions. The execution of an action consisting out of a disjunction of actions will generate new nodes. Each node (approximately, skipping some optimization) will contain a copy of the Space instance and should contain a copy of the (stack of) actions to be executed. An action can have attributes such as variables and for this reason the clone of the action(stack)s should be included in the clone of the Space instance to make use of the forwarding of the pointers of the variable implementations. 

My question is if it is possible to introduce new classes which will be cloned (like the Branching extensions) when the Space::clone is invoked without having to change anything in the Space. I think extending the Actor class might do it but I thought I ask instead of trying to reverse engineer.

hope this makes some sense,



David J Rijsman
Software Architect
Quintiq
 
T +31 (0)73 691 07 39
F +31 (0)73 691 07 54
M +31 (0)62 127 68 29
E david.rijsman at quintiq.nl
I www.quintiq.com



This message contains information that may be privileged or confidential and is the property of Quintiq. It is only intended for the person to whom it is addressed. If you are not the intended recipient, you are not authorized to read, print, retain, copy, disseminate, distribute or use this message or any part thereof. If you have received this message in error, please notify the sender immediately and delete all copies of this message. Please note that e-mails are susceptible to change, therefore they are not binding.



From cschulte at kth.se  Wed Aug  6 18:36:22 2008
From: cschulte at kth.se (Christian Schulte)
Date: Wed, 6 Aug 2008 18:36:22 +0200
Subject: [gecode-users] Extending Actor for actions
In-Reply-To: <4899B67B.D4D3.0085.0@quintiq.com>
References: <4899B67B.D4D3.0085.0@quintiq.com>
Message-ID: <002901c8f7e2$917e1d10$b47a5730$@se>

Hi David,

Just to make sure that I understand you correctly: you want to have a
datastructure in a space that is automatically cloned whenever Space::clone
is executed. The catch is that the datastructure can contain stuff (such as
variables) that also must be cloned. Is that brief description accurate or
oversimplified (or completely off)?

If accurate one idea is to just create a subclass of space. This subclass
implements a copy constructor called during cloning that will then do two
things:
 - call the copy constructor for cloning of space
 - and after that, copy your own datastructure

A guideline for you to do datastructures that can be cloned, check ViewArray
or VarArray in gecode/kernel/array.icc. You would implement an update
function that does the cloning. This update function then you would call in
the above copy constructor for cloning.

Then, for whatever you do, you do not inherit from Space but from this
subclass. That will work automatically.

Hope that makes some sense...

All the best
Christian

-----Original Message-----
From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf
Of David Rijsman
Sent: Wednesday, August 06, 2008 2:35 PM
To: users at gecode.org
Subject: [gecode-users] Extending Actor for actions

I am working on a search framework using Gecode and have a question
concerning the following.

My search generates a node containing actions to be executed where an action
can be an arbitrary operation including generating a disjunction or
conjunction of (sub-)actions. The execution of an action consisting out of a
disjunction of actions will generate new nodes. Each node (approximately,
skipping some optimization) will contain a copy of the Space instance and
should contain a copy of the (stack of) actions to be executed. An action
can have attributes such as variables and for this reason the clone of the
action(stack)s should be included in the clone of the Space instance to make
use of the forwarding of the pointers of the variable implementations.

My question is if it is possible to introduce new classes which will be
cloned (like the Branching extensions) when the Space::clone is invoked
without having to change anything in the Space. I think extending the Actor
class might do it but I thought I ask instead of trying to reverse engineer.

hope this makes some sense,



David J Rijsman
Software Architect
Quintiq

T +31 (0)73 691 07 39
F +31 (0)73 691 07 54
M +31 (0)62 127 68 29
E david.rijsman at quintiq.nl
I www.quintiq.com



This message contains information that may be privileged or confidential and
is the property of Quintiq. It is only intended for the person to whom it is
addressed. If you are not the intended recipient, you are not authorized to
read, print, retain, copy, disseminate, distribute or use this message or
any part thereof. If you have received this message in error, please notify
the sender immediately and delete all copies of this message. Please note
that e-mails are susceptible to change, therefore they are not binding.

_______________________________________________
Gecode users mailing list
users at gecode.org
https://www.gecode.org/mailman/listinfo/gecode-users




From uz602 at hszk.bme.hu  Sat Aug  9 18:30:22 2008
From: uz602 at hszk.bme.hu (Ujhelyi Zoltan)
Date: Sat, 09 Aug 2008 18:30:22 +0200
Subject: [gecode-users] Problem with constraint
Message-ID: <7D9CF0A5-AD44-4046-ACDE-8636607C1050@hszk.bme.hu>

Hello all,

we are currently trying to build a static checker system on top of  
Gecode/J 2.1.1. (in an Eclipse environment), and we have found an  
interesting case.

In order to allow us greater flexibility we try to use the Expression  
API (it allows us to build constraints in a hierarchical manner).

I was testing the implementation, and found an interesting final  
result: there were to IntVars, which were supposed to be the same, did  
not have the same final ranges: one of them had {2,4}, but the other  
had {2,3,4}. I tried to trace back the code to look whether the  
constraints were wrong or not, and found the following expression  
building term:

BExpr expression = new BExpr(new Expr(variable1),relation, new  
Expr(variable2));

Tracing the variables variable1 was a new variable, it hadn't been  
constrained yet, while variable2's domain had been limited to the  
values 2 and 4 (and they were the variables mentioned before in this  
letter), while the relation had the value IRT_EQ.

I tried a post of the expression right after it's construction to see  
whether it helps or not:
org.gecode.Gecode.post(space, expression);

It did not solve the problem, but when I replaced the post method to  
the following rel call, the constraint handling was working as I  
expected it before.

rel(space, variable1, IntRelType.IRT_EQ, variable2);

I would like to know, whether this phenomenon is the intentional  
(maybe I do not understand something under the hood), or not. And if  
you could tell me a way to avoid it, I would be very glad.

Thank you very much in advance for your help,
Zolt?n Ujhelyi


From uz602 at hszk.bme.hu  Sun Aug 10 23:21:22 2008
From: uz602 at hszk.bme.hu (Ujhelyi Zoltan)
Date: Sun, 10 Aug 2008 23:21:22 +0200
Subject: [gecode-users] Problem with constraint
In-Reply-To: <7D9CF0A5-AD44-4046-ACDE-8636607C1050@hszk.bme.hu>
References: <7D9CF0A5-AD44-4046-ACDE-8636607C1050@hszk.bme.hu>
Message-ID: <DCC63351-500C-482E-ABEB-ED18B11277B5@hszk.bme.hu>

Hello again,

I have been experimenting with the questions raised in my previous mail.

I created a small Gecode space to be able to test the problem in a  
smaller scale, where I did use two variables (variable1, variable2,  
both IntVars with the domain {0,5}) and three constraints: variable1  
equals variable2, and variable2 cannot have the values 2 and 4.

In all of my tests the latter two constraints are described like that:

post(space, new BExpr(space.variable1, IRT_NQ, 2));
post(space, new BExpr(space.variable1, IRT_NQ, 4));

For the third constraint I had several tries. When I was using the  
rel() clause to write the constraint, I got the expected result:

Variable #1: {0..1,3,5}
Variable #2: {0..1,3,5}

But when using a similar construct I would like to use in the static  
verifier, I got no result for the second variable, it can has all  
values from it's domain.

post(space, new BExpr(space.variable1, IRT_EQ, space.variable2));

Reading about different propagators, I have been able to get the  
expected result with the use of the ICL_DOM propagator, but only if I  
was posting the constraint directly, like that:

post(space, new Expr(space.variable1), IRT_EQ, new  
Expr(space.variable2),org.gecode.GecodeEnumConstants.ICL_DOM);

But if I tried to translate the a BExprs to that form, I did not  
succeed:

	    Expr expression = new Expr(new  
Expr(space.variable2).minus(space.variable1));
	    post(space, new Expr(expression), IRT_EQ, 0,  
org.gecode.GecodeEnumConstants.ICL_DOM);

Can you tell me a way how to enable this strong ICL_DOM propagators  
meanwhile using the BExpr form, if it is possible? It would help our  
project a lot, it would simplify it's code.

Thank you for your help,
Zolt?n Ujhelyi
On 2008.08.09., at 18:30, Ujhelyi Zoltan wrote:

> Hello all,
>
> we are currently trying to build a static checker system on top of
> Gecode/J 2.1.1. (in an Eclipse environment), and we have found an
> interesting case.
>
> In order to allow us greater flexibility we try to use the Expression
> API (it allows us to build constraints in a hierarchical manner).
>
> I was testing the implementation, and found an interesting final
> result: there were to IntVars, which were supposed to be the same, did
> not have the same final ranges: one of them had {2,4}, but the other
> had {2,3,4}. I tried to trace back the code to look whether the
> constraints were wrong or not, and found the following expression
> building term:
>
> BExpr expression = new BExpr(new Expr(variable1),relation, new
> Expr(variable2));
>
> Tracing the variables variable1 was a new variable, it hadn't been
> constrained yet, while variable2's domain had been limited to the
> values 2 and 4 (and they were the variables mentioned before in this
> letter), while the relation had the value IRT_EQ.
>
> I tried a post of the expression right after it's construction to see
> whether it helps or not:
> org.gecode.Gecode.post(space, expression);
>
> It did not solve the problem, but when I replaced the post method to
> the following rel call, the constraint handling was working as I
> expected it before.
>
> rel(space, variable1, IntRelType.IRT_EQ, variable2);
>
> I would like to know, whether this phenomenon is the intentional
> (maybe I do not understand something under the hood), or not. And if
> you could tell me a way to avoid it, I would be very glad.
>
> Thank you very much in advance for your help,
> Zolt?n Ujhelyi
> _______________________________________________
> Gecode users mailing list
> users at gecode.org
> https://www.gecode.org/mailman/listinfo/gecode-users




From tack at ps.uni-sb.de  Mon Aug 11 09:03:06 2008
From: tack at ps.uni-sb.de (Guido Tack)
Date: Mon, 11 Aug 2008 09:03:06 +0200
Subject: [gecode-users] Problem with constraint
In-Reply-To: <DCC63351-500C-482E-ABEB-ED18B11277B5@hszk.bme.hu>
References: <7D9CF0A5-AD44-4046-ACDE-8636607C1050@hszk.bme.hu>
	<DCC63351-500C-482E-ABEB-ED18B11277B5@hszk.bme.hu>
Message-ID: <AC61101E-25D7-4CD5-9A3F-0B2CEF7F3520@ps.uni-sb.de>

Hi.

As you've already found out, you have to use domain consistent  
propagation (ICL_DOM) to get the result you want.  You should be able  
to use post(space, new Expr(space.variable1), IRT_EQ, new  
Expr(space.variable2), ICL_DOM) to get the desired result.  I'm not  
100% sure, but I think your solution that uses e=variable1-variable2,  
e=0 doesn't work because only the e=0 is propagated to domain  
consistency, while e=variable1-variable2 still only achieves bounds  
consistency.

Cheers,
	Guido

Ujhelyi Zoltan wrote:

> Hello again,
>
> I have been experimenting with the questions raised in my previous  
> mail.
>
> I created a small Gecode space to be able to test the problem in a
> smaller scale, where I did use two variables (variable1, variable2,
> both IntVars with the domain {0,5}) and three constraints: variable1
> equals variable2, and variable2 cannot have the values 2 and 4.
>
> In all of my tests the latter two constraints are described like that:
>
> post(space, new BExpr(space.variable1, IRT_NQ, 2));
> post(space, new BExpr(space.variable1, IRT_NQ, 4));
>
> For the third constraint I had several tries. When I was using the
> rel() clause to write the constraint, I got the expected result:
>
> Variable #1: {0..1,3,5}
> Variable #2: {0..1,3,5}
>
> But when using a similar construct I would like to use in the static
> verifier, I got no result for the second variable, it can has all
> values from it's domain.
>
> post(space, new BExpr(space.variable1, IRT_EQ, space.variable2));
>
> Reading about different propagators, I have been able to get the
> expected result with the use of the ICL_DOM propagator, but only if I
> was posting the constraint directly, like that:
>
> post(space, new Expr(space.variable1), IRT_EQ, new
> Expr(space.variable2),org.gecode.GecodeEnumConstants.ICL_DOM);
>
> But if I tried to translate the a BExprs to that form, I did not
> succeed:
>
> 	    Expr expression = new Expr(new
> Expr(space.variable2).minus(space.variable1));
> 	    post(space, new Expr(expression), IRT_EQ, 0,
> org.gecode.GecodeEnumConstants.ICL_DOM);
>
> Can you tell me a way how to enable this strong ICL_DOM propagators
> meanwhile using the BExpr form, if it is possible? It would help our
> project a lot, it would simplify it's code.
>
> Thank you for your help,
> Zolt?n Ujhelyi
> On 2008.08.09., at 18:30, Ujhelyi Zoltan wrote:
>
>> Hello all,
>>
>> we are currently trying to build a static checker system on top of
>> Gecode/J 2.1.1. (in an Eclipse environment), and we have found an
>> interesting case.
>>
>> In order to allow us greater flexibility we try to use the Expression
>> API (it allows us to build constraints in a hierarchical manner).
>>
>> I was testing the implementation, and found an interesting final
>> result: there were to IntVars, which were supposed to be the same,  
>> did
>> not have the same final ranges: one of them had {2,4}, but the other
>> had {2,3,4}. I tried to trace back the code to look whether the
>> constraints were wrong or not, and found the following expression
>> building term:
>>
>> BExpr expression = new BExpr(new Expr(variable1),relation, new
>> Expr(variable2));
>>
>> Tracing the variables variable1 was a new variable, it hadn't been
>> constrained yet, while variable2's domain had been limited to the
>> values 2 and 4 (and they were the variables mentioned before in this
>> letter), while the relation had the value IRT_EQ.
>>
>> I tried a post of the expression right after it's construction to see
>> whether it helps or not:
>> org.gecode.Gecode.post(space, expression);
>>
>> It did not solve the problem, but when I replaced the post method to
>> the following rel call, the constraint handling was working as I
>> expected it before.
>>
>> rel(space, variable1, IntRelType.IRT_EQ, variable2);
>>
>> I would like to know, whether this phenomenon is the intentional
>> (maybe I do not understand something under the hood), or not. And if
>> you could tell me a way to avoid it, I would be very glad.
>>
>> Thank you very much in advance for your help,
>> Zolt?n Ujhelyi
>> _______________________________________________
>> Gecode users mailing list
>> users at gecode.org
>> https://www.gecode.org/mailman/listinfo/gecode-users
>
>
> _______________________________________________
> Gecode users mailing list
> users at gecode.org
> https://www.gecode.org/mailman/listinfo/gecode-users




From tack at ps.uni-sb.de  Mon Aug 11 09:08:57 2008
From: tack at ps.uni-sb.de (Guido Tack)
Date: Mon, 11 Aug 2008 09:08:57 +0200
Subject: [gecode-users] GecodeJ and 64 bits
In-Reply-To: <fa32d88f0808021307l667950b0h9db10f64505ffa2d@mail.gmail.com>
References: <fa32d88f0808021307l667950b0h9db10f64505ffa2d@mail.gmail.com>
Message-ID: <AE97A868-91BE-466D-A8F1-7915A25F6881@ps.uni-sb.de>

Jorge Ivory Casta?o wrote:

> Hi, I just bougth a new computer with an ASUS M2NSLI motheboard and  
> a AMD Athlon 64 X2 6000+ Processor, 4Gb in RAM. (old one was  
> malfunctioning)
> I have been in trouble trying to install some things because of  
> drivers problems and software that is not in 64 bits architecture.
> I am working in my thesis with Gecode and GecodeJ, and now that i  
> want to continue working in my new computer I would like to know:
> Is GecodeJ compatible with my 64 bits architecture? Has someone  
> installed it?

Yes, as Christian already guessed, Gecode/J works on 64 bit  
architectures.

> What OS do you recommend me for work on Gecodej? Linux or Windows  
> Vista Ultimate? (Xp is not possible because or the 4gb in RAM and  
> lots of bugs with my motherboard in the 64bits version).
> In case you recommend me Linux, can you suggest me a distribution  
> that you know works fine with gecodej? I will really appreciate you  
> help.

I haven't tried to compile Gecode/J for 64 bit Windows yet, and I have  
no experience with the 64 bit JVM for Windows.  The last time I  
compiled Gecode/J on Linux for 64 bit was on a Debian system, but  
really any distro should work that comes with the necessary tools: a  
recent gcc (preferably 4.2), the usual build tools, a Sun JDK (with  
java 1.5 or 1.6), and ant.

Please try to follow the installation instructions at
http://www.gecode.org/gecodej/doc/PageComp.html
If you run into problems, I'm sure we can help you get everything up  
and running.

Cheers,
	Guido




From uz602 at hszk.bme.hu  Mon Aug 11 11:38:44 2008
From: uz602 at hszk.bme.hu (Ujhelyi Zoltan)
Date: Mon, 11 Aug 2008 11:38:44 +0200
Subject: [gecode-users] Problem with constraint
In-Reply-To: <B177D5F8-40FB-4979-B8D2-CEB9A395320D@ps.uni-sb.de>
References: <7D9CF0A5-AD44-4046-ACDE-8636607C1050@hszk.bme.hu>
	<DCC63351-500C-482E-ABEB-ED18B11277B5@hszk.bme.hu>
	<AC61101E-25D7-4CD5-9A3F-0B2CEF7F3520@ps.uni-sb.de>
	<73D02635-E730-4C4A-A4F1-5A093A362D16@hszk.bme.hu>
	<B177D5F8-40FB-4979-B8D2-CEB9A395320D@ps.uni-sb.de>
Message-ID: <51A70708-9E16-4841-83C7-57CC52FA45FE@hszk.bme.hu>

Hello,

thank you for your reply.

I understand the problem stated here, but I would like to ask whether  
there is a solution to add a constraint like that to a Boolean  
Expression with the domain consistent propagation (ICL_DOM).

I did not found any possibilities for that looking in the Gecode/J  
API, but it would help a lot for our project.

Thank you,
Ujhelyi Zolt?n
On 2008.08.11., at 11:34, Guido Tack wrote:

> Could you please post to the mailing list? Thanks. Guido
>
> Am 11.08.2008 um 11:22 schrieb Ujhelyi Zoltan:
>
>> Hello,
>>
>> thank you for your reply.
>>
>> I understand the problem stated here, but I would like to ask  
>> whether there is a solution to add a constraint like that to a  
>> Boolen Expression with the domain consistent propagation (ICL_DOM).
>>
>> I did not found any possibilities for that looking in the Gecode/J  
>> API, but it would help a lot for our project.
>> Thank you,
>> Zolt?n Ujhelyi
>> On 2008.08.11., at 9:03, Guido Tack wrote:
>>
>>> Hi.
>>>
>>> As you've already found out, you have to use domain consistent  
>>> propagation (ICL_DOM) to get the result you want.  You should be  
>>> able to use post(space, new Expr(space.variable1), IRT_EQ, new  
>>> Expr(space.variable2), ICL_DOM) to get the desired result.  I'm  
>>> not 100% sure, but I think your solution that uses e=variable1- 
>>> variable2, e=0 doesn't work because only the e=0 is propagated to  
>>> domain consistency, while e=variable1-variable2 still only  
>>> achieves bounds consistency.
>>>
>>> Cheers,
>>> 	Guido
>>>
>>> Ujhelyi Zoltan wrote:
>>>
>>>> Hello again,
>>>>
>>>> I have been experimenting with the questions raised in my  
>>>> previous mail.
>>>>
>>>> I created a small Gecode space to be able to test the problem in a
>>>> smaller scale, where I did use two variables (variable1, variable2,
>>>> both IntVars with the domain {0,5}) and three constraints:  
>>>> variable1
>>>> equals variable2, and variable2 cannot have the values 2 and 4.
>>>>
>>>> In all of my tests the latter two constraints are described like  
>>>> that:
>>>>
>>>> post(space, new BExpr(space.variable1, IRT_NQ, 2));
>>>> post(space, new BExpr(space.variable1, IRT_NQ, 4));
>>>>
>>>> For the third constraint I had several tries. When I was using the
>>>> rel() clause to write the constraint, I got the expected result:
>>>>
>>>> Variable #1: {0..1,3,5}
>>>> Variable #2: {0..1,3,5}
>>>>
>>>> But when using a similar construct I would like to use in the  
>>>> static
>>>> verifier, I got no result for the second variable, it can has all
>>>> values from it's domain.
>>>>
>>>> post(space, new BExpr(space.variable1, IRT_EQ, space.variable2));
>>>>
>>>> Reading about different propagators, I have been able to get the
>>>> expected result with the use of the ICL_DOM propagator, but only  
>>>> if I
>>>> was posting the constraint directly, like that:
>>>>
>>>> post(space, new Expr(space.variable1), IRT_EQ, new
>>>> Expr(space.variable2),org.gecode.GecodeEnumConstants.ICL_DOM);
>>>>
>>>> But if I tried to translate the a BExprs to that form, I did not
>>>> succeed:
>>>>
>>>> 	    Expr expression = new Expr(new
>>>> Expr(space.variable2).minus(space.variable1));
>>>> 	    post(space, new Expr(expression), IRT_EQ, 0,
>>>> org.gecode.GecodeEnumConstants.ICL_DOM);
>>>>
>>>> Can you tell me a way how to enable this strong ICL_DOM propagators
>>>> meanwhile using the BExpr form, if it is possible? It would help  
>>>> our
>>>> project a lot, it would simplify it's code.
>>>>
>>>> Thank you for your help,
>>>> Zolt?n Ujhelyi
>>>> On 2008.08.09., at 18:30, Ujhelyi Zoltan wrote:
>>>>
>>>>> Hello all,
>>>>>
>>>>> we are currently trying to build a static checker system on top of
>>>>> Gecode/J 2.1.1. (in an Eclipse environment), and we have found an
>>>>> interesting case.
>>>>>
>>>>> In order to allow us greater flexibility we try to use the  
>>>>> Expression
>>>>> API (it allows us to build constraints in a hierarchical manner).
>>>>>
>>>>> I was testing the implementation, and found an interesting final
>>>>> result: there were to IntVars, which were supposed to be the  
>>>>> same, did
>>>>> not have the same final ranges: one of them had {2,4}, but the  
>>>>> other
>>>>> had {2,3,4}. I tried to trace back the code to look whether the
>>>>> constraints were wrong or not, and found the following expression
>>>>> building term:
>>>>>
>>>>> BExpr expression = new BExpr(new Expr(variable1),relation, new
>>>>> Expr(variable2));
>>>>>
>>>>> Tracing the variables variable1 was a new variable, it hadn't been
>>>>> constrained yet, while variable2's domain had been limited to the
>>>>> values 2 and 4 (and they were the variables mentioned before in  
>>>>> this
>>>>> letter), while the relation had the value IRT_EQ.
>>>>>
>>>>> I tried a post of the expression right after it's construction  
>>>>> to see
>>>>> whether it helps or not:
>>>>> org.gecode.Gecode.post(space, expression);
>>>>>
>>>>> It did not solve the problem, but when I replaced the post  
>>>>> method to
>>>>> the following rel call, the constraint handling was working as I
>>>>> expected it before.
>>>>>
>>>>> rel(space, variable1, IntRelType.IRT_EQ, variable2);
>>>>>
>>>>> I would like to know, whether this phenomenon is the intentional
>>>>> (maybe I do not understand something under the hood), or not.  
>>>>> And if
>>>>> you could tell me a way to avoid it, I would be very glad.
>>>>>
>>>>> Thank you very much in advance for your help,
>>>>> Zolt?n Ujhelyi
>>>>> _______________________________________________
>>>>> Gecode users mailing list
>>>>> users at gecode.org
>>>>> https://www.gecode.org/mailman/listinfo/gecode-users
>>>>
>>>>
>>>> _______________________________________________
>>>> Gecode users mailing list
>>>> users at gecode.org
>>>> https://www.gecode.org/mailman/listinfo/gecode-users
>>>
>>
>




From tack at ps.uni-sb.de  Mon Aug 11 11:53:36 2008
From: tack at ps.uni-sb.de (Guido Tack)
Date: Mon, 11 Aug 2008 11:53:36 +0200
Subject: [gecode-users] Problem with constraint
In-Reply-To: <51A70708-9E16-4841-83C7-57CC52FA45FE@hszk.bme.hu>
References: <7D9CF0A5-AD44-4046-ACDE-8636607C1050@hszk.bme.hu>
	<DCC63351-500C-482E-ABEB-ED18B11277B5@hszk.bme.hu>
	<AC61101E-25D7-4CD5-9A3F-0B2CEF7F3520@ps.uni-sb.de>
	<73D02635-E730-4C4A-A4F1-5A093A362D16@hszk.bme.hu>
	<B177D5F8-40FB-4979-B8D2-CEB9A395320D@ps.uni-sb.de>
	<51A70708-9E16-4841-83C7-57CC52FA45FE@hszk.bme.hu>
Message-ID: <E5CADFA2-9F74-474D-A406-F53C28CA7368@ps.uni-sb.de>

Ujhelyi Zoltan wrote:
> I understand the problem stated here, but I would like to ask whether
> there is a solution to add a constraint like that to a Boolean
> Expression with the domain consistent propagation (ICL_DOM).
>
> I did not found any possibilities for that looking in the Gecode/J
> API, but it would help a lot for our project.

No, that is currently not possible.  I'm not sure right now how hard  
it would be to add, I'll have a look.  Maybe we can make it available  
in the next release.

Cheers,
	Guido




From andrea.rendl at gmail.com  Tue Aug 12 16:36:25 2008
From: andrea.rendl at gmail.com (Andrea Rendl)
Date: Tue, 12 Aug 2008 15:36:25 +0100
Subject: [gecode-users] compiling problem examples
Message-ID: <413703fd0808120736w3fcd7f3ct6a954b437674059b@mail.gmail.com>

Hello everyone,

I can execute the problems in the examples directory but cannot
compile their source code (on Linux):  g++ cannot find included header
files, such as examples/support.hh.
Both $LD_LIBRARY_PATH and $LIBRARY_PATH include the root directory of
Gecode (where the .so files and the examples/ directory are) and the
current directory, which I thought would be sufficient for compiling
the examples. Is there anything else I need to do?

Thanks for your help,
Andrea



From tack at ps.uni-sb.de  Tue Aug 12 17:18:28 2008
From: tack at ps.uni-sb.de (Guido Tack)
Date: Tue, 12 Aug 2008 17:18:28 +0200
Subject: [gecode-users] compiling problem examples
In-Reply-To: <413703fd0808120736w3fcd7f3ct6a954b437674059b@mail.gmail.com>
References: <413703fd0808120736w3fcd7f3ct6a954b437674059b@mail.gmail.com>
Message-ID: <0BF8873C-1008-4E95-9237-229525624154@ps.uni-sb.de>

Andrea Rendl wrote:
> I can execute the problems in the examples directory but cannot
> compile their source code (on Linux):  g++ cannot find included header
> files, such as examples/support.hh.
> Both $LD_LIBRARY_PATH and $LIBRARY_PATH include the root directory of
> Gecode (where the .so files and the examples/ directory are) and the
> current directory, which I thought would be sufficient for compiling
> the examples. Is there anything else I need to do?

You not only need the library paths, but also the proper include paths  
to find the header files.  You can compile the examples using the  
Makefile we supply.  For this, you have to be in the gecode root  
directory (i.e. the directory above the examples directory), and you  
can just type e.g. make examples/queens.  If you want to compile an  
example by hand, just use the same command line arguments for gcc as  
in our Makefile  (in particular, make sure that the Gecode headers as  
well as the Gecode root directory, i.e., examples/.., is mentioned in  
an -I argument).

Cheers,
	Guido




From jsanchez at edaptive.com  Thu Aug 14 16:38:31 2008
From: jsanchez at edaptive.com (Jorge Sanchez)
Date: Thu, 14 Aug 2008 10:38:31 -0400
Subject: [gecode-users] Beginner Question
Message-ID: <48A44367.6060801@edaptive.com>

Hello,
I am new to Gecode (and to constraints programming for the most part), 
and am using Gecode/J 2.1.1. My question relates to undefined variables. 
I have a simple example where I have 2 arrays of Integer Variables which 
may take on a 0 or 1. And a basic constraint saying that none of the 
variables are equal. I am getting 4 results which all have their 
variables as printed as [0..1]. The fact that I am getting 4 value is 
valid ([0, 0] [1, 1]; [0, 1] [1, 0]; [1, 0], [0, 1]; [1, 1] [0, 0]), but 
I cannot see the actual values. I have attached my code to the bottom of 
this message, is there any way I can force the actual values to be 
displayed (or defined)?

Thanks,
Jorge

///////////code:
import org.gecode.BABIterator;
import org.gecode.BExpr;
import org.gecode.Gecode;
import org.gecode.GecodeEnumConstants;
import org.gecode.IntRelType;
import org.gecode.IntVar;
import org.gecode.Space;
import org.gecode.VarArray;

public class GecodeTest extends Space {

    public VarArray<IntVar> test;
    public VarArray<IntVar> test_mut;
    
    public GecodeTest() {
        super("GecodeTest");
        test = new VarArray<IntVar>(this, 2, IntVar.class,  0, 1);
        test_mut = new VarArray<IntVar>(this, 2, IntVar.class,  0, 1);
        
        for(int i = 0; i < 2; i++){
            Gecode.post(this, new BExpr(test.get(i), IntRelType.IRT_NQ, test_mut.get(i)));
        }
        Gecode.branch(this, test, GecodeEnumConstants.INT_VAR_MAX_MIN,
                GecodeEnumConstants.INT_VAL_MAX);
        Gecode.branch(this, test_mut, GecodeEnumConstants.INT_VAR_MAX_MIN,
                GecodeEnumConstants.INT_VAL_MAX);
    }
    public GecodeTest(Boolean share, GecodeTest gecodeTest){
        super(share, gecodeTest);
        test = new VarArray(gecodeTest.test);
        test_mut = new VarArray(gecodeTest.test_mut);
    }
    public static void main(String[] args){
        GecodeTest test = new GecodeTest();
        BABIterator<Space> iterator = new BABIterator(test);
        Space s = null;
        try{
            while(iterator.hasNext()){
                s = iterator.next();
                System.out.println(s);
            }
        } catch(Exception e){
            
        }
        
    }
    
}

---- and the output I see is the following:

GecodeTest:
test=[[0..1],[0..1]]
test_mut=[[0..1],[0..1]]

GecodeTest:
test=[[0..1],[0..1]]
test_mut=[[0..1],[0..1]]

GecodeTest:
test=[[0..1],[0..1]]
test_mut=[[0..1],[0..1]]

GecodeTest:
test=[[0..1],[0..1]]
test_mut=[[0..1],[0..1]]







From tack at ps.uni-sb.de  Thu Aug 14 16:58:16 2008
From: tack at ps.uni-sb.de (Guido Tack)
Date: Thu, 14 Aug 2008 16:58:16 +0200
Subject: [gecode-users] Beginner Question
In-Reply-To: <48A44367.6060801@edaptive.com>
References: <48A44367.6060801@edaptive.com>
Message-ID: <A8F01FA8-43E4-4696-89CE-350BE3B88034@ps.uni-sb.de>

Hi!

Jorge Sanchez wrote:

> Hello,
> I am new to Gecode (and to constraints programming for the most part),
> and am using Gecode/J 2.1.1. My question relates to undefined  
> variables.
> I have a simple example where I have 2 arrays of Integer Variables  
> which
> may take on a 0 or 1. And a basic constraint saying that none of the
> variables are equal. I am getting 4 results which all have their
> variables as printed as [0..1]. The fact that I am getting 4 value is
> valid ([0, 0] [1, 1]; [0, 1] [1, 0]; [1, 0], [0, 1]; [1, 1] [0, 0]),  
> but
> I cannot see the actual values. I have attached my code to the  
> bottom of
> this message, is there any way I can force the actual values to be
> displayed (or defined)?
[...]
>    public GecodeTest(Boolean share, GecodeTest gecodeTest){
>        super(share, gecodeTest);
>        test = new VarArray(gecodeTest.test);
>        test_mut = new VarArray(gecodeTest.test_mut);
>    }

Here, you have to use the "copy constructor" for test and test_mut:

public GecodeTest(Boolean share, GecodeTest gecodeTest) {
   super(share, gecodeTest);
   test = new VarArray<IntVar>(this, share, gecodeTest.test);
   test_mut = new VarArray<IntVar>(this, share, gecodeTest.test_mut);
}

Otherwise, every solution will reference the variables in the original  
space, and that's what you print.

Cheers,
	Guido




From uz602 at hszk.bme.hu  Thu Aug 14 16:58:17 2008
From: uz602 at hszk.bme.hu (Ujhelyi Zoltan)
Date: Thu, 14 Aug 2008 16:58:17 +0200
Subject: [gecode-users] Beginner Question
In-Reply-To: <48A44367.6060801@edaptive.com>
References: <48A44367.6060801@edaptive.com>
Message-ID: <D1AC4004-814F-4297-BE2B-7A92351E09DB@hszk.bme.hu>

Hello,

If I am correct, the result is caused by the fact that Gecode  
calculates all the possible solutions, and in your case they are in  
the form of result. If you say, none of them can be equal, it can  
happen both by the array element 1 to be 0 or 1; your constraint does  
not allow Gecode to reduce the domains.

But if you add a constraint, in which you state, that a value is zero,  
than Gecode will be able to calculate, that the other one has to be one.
(A constraint like that: rel(this, this.get(0), IRT_EQ, 0);)

I hope, I was at some help,
Zolt?n Ujhelyi
On 2008.08.14., at 16:38, Jorge Sanchez wrote:

> Hello,
> I am new to Gecode (and to constraints programming for the most part),
> and am using Gecode/J 2.1.1. My question relates to undefined  
> variables.
> I have a simple example where I have 2 arrays of Integer Variables  
> which
> may take on a 0 or 1. And a basic constraint saying that none of the
> variables are equal. I am getting 4 results which all have their
> variables as printed as [0..1]. The fact that I am getting 4 value is
> valid ([0, 0] [1, 1]; [0, 1] [1, 0]; [1, 0], [0, 1]; [1, 1] [0, 0]),  
> but
> I cannot see the actual values. I have attached my code to the  
> bottom of
> this message, is there any way I can force the actual values to be
> displayed (or defined)?
>
> Thanks,
> Jorge
>
> ///////////code:
> import org.gecode.BABIterator;
> import org.gecode.BExpr;
> import org.gecode.Gecode;
> import org.gecode.GecodeEnumConstants;
> import org.gecode.IntRelType;
> import org.gecode.IntVar;
> import org.gecode.Space;
> import org.gecode.VarArray;
>
> public class GecodeTest extends Space {
>
>    public VarArray<IntVar> test;
>    public VarArray<IntVar> test_mut;
>
>    public GecodeTest() {
>        super("GecodeTest");
>        test = new VarArray<IntVar>(this, 2, IntVar.class,  0, 1);
>        test_mut = new VarArray<IntVar>(this, 2, IntVar.class,  0, 1);
>
>        for(int i = 0; i < 2; i++){
>            Gecode.post(this, new BExpr(test.get(i),  
> IntRelType.IRT_NQ, test_mut.get(i)));
>        }
>        Gecode.branch(this, test, GecodeEnumConstants.INT_VAR_MAX_MIN,
>                GecodeEnumConstants.INT_VAL_MAX);
>        Gecode.branch(this, test_mut,  
> GecodeEnumConstants.INT_VAR_MAX_MIN,
>                GecodeEnumConstants.INT_VAL_MAX);
>    }
>    public GecodeTest(Boolean share, GecodeTest gecodeTest){
>        super(share, gecodeTest);
>        test = new VarArray(gecodeTest.test);
>        test_mut = new VarArray(gecodeTest.test_mut);
>    }
>    public static void main(String[] args){
>        GecodeTest test = new GecodeTest();
>        BABIterator<Space> iterator = new BABIterator(test);
>        Space s = null;
>        try{
>            while(iterator.hasNext()){
>                s = iterator.next();
>                System.out.println(s);
>            }
>        } catch(Exception e){
>
>        }
>
>    }
>
> }
>
> ---- and the output I see is the following:
>
> GecodeTest:
> test=[[0..1],[0..1]]
> test_mut=[[0..1],[0..1]]
>
> GecodeTest:
> test=[[0..1],[0..1]]
> test_mut=[[0..1],[0..1]]
>
> GecodeTest:
> test=[[0..1],[0..1]]
> test_mut=[[0..1],[0..1]]
>
> GecodeTest:
> test=[[0..1],[0..1]]
> test_mut=[[0..1],[0..1]]
>
>
>
>
>
> _______________________________________________
> Gecode users mailing list
> users at gecode.org
> https://www.gecode.org/mailman/listinfo/gecode-users




From tack at ps.uni-sb.de  Thu Aug 14 17:01:12 2008
From: tack at ps.uni-sb.de (Guido Tack)
Date: Thu, 14 Aug 2008 17:01:12 +0200
Subject: [gecode-users] Beginner Question
In-Reply-To: <D1AC4004-814F-4297-BE2B-7A92351E09DB@hszk.bme.hu>
References: <48A44367.6060801@edaptive.com>
	<D1AC4004-814F-4297-BE2B-7A92351E09DB@hszk.bme.hu>
Message-ID: <F22CA777-826E-4A60-A282-A9AADAF8E6C8@ps.uni-sb.de>

Ujhelyi Zoltan wrote:

> Hello,
>
> If I am correct, the result is caused by the fact that Gecode
> calculates all the possible solutions, and in your case they are in
> the form of result. If you say, none of them can be equal, it can
> happen both by the array element 1 to be 0 or 1; your constraint does
> not allow Gecode to reduce the domains.

Gecode does not calculate all possible solutions, it rather tries to  
remove all impossible values, and sometimes cannot remove enything.   
That's why you have search.  In Jorge's case, the branching will make  
sure that all variables are either set to 0 or 1 during search.

Cheers,
	Guido

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.ps.uni-sb.de/pipermail/users/attachments/20080814/91f0dbef/attachment.htm>

From jsanchez at edaptive.com  Thu Aug 14 18:54:34 2008
From: jsanchez at edaptive.com (Jorge Sanchez)
Date: Thu, 14 Aug 2008 12:54:34 -0400
Subject: [gecode-users] Beginner Question
In-Reply-To: <A8F01FA8-43E4-4696-89CE-350BE3B88034@ps.uni-sb.de>
References: <48A44367.6060801@edaptive.com>
	<A8F01FA8-43E4-4696-89CE-350BE3B88034@ps.uni-sb.de>
Message-ID: <48A4634A.8090705@edaptive.com>

Thanks for the quick answers. My problem was with the copy constructor. 
My example is now working.
Thanks,
Jorge




From andrea.rendl at gmail.com  Mon Aug 18 15:14:33 2008
From: andrea.rendl at gmail.com (Andrea Rendl)
Date: Mon, 18 Aug 2008 14:14:33 +0100
Subject: [gecode-users] Linear expressions in 'post'
Message-ID: <413703fd0808180614j3936965v56c438c256d84671@mail.gmail.com>

Dear Gecoders,

I've noticed that Gecode is very effective with solving linear
expressions (Gecode::MiniModel::LinExpr)  given in the 'post'
constraint. I was wondering how you deal with them internally. I guess
you build some kind of expression tree from the linear expression and
then map the tree to an adequate 'linear' constraint? How do you deal
with more 'complex' linear expressions that you cannot directly map to
linear, such as

x + c1 != y + c2                   (where x,y are IntVars and c1,c2
are constants)

In this case, do you internally re-write the expression to 'x + c1 - y
!= c2' (or similar) to match with linear? If yes, are there any
particular rules you apply for re-writing? I assume there is no case
where you flatten any expressions (and introduce auxiliary variables
internally)? If there exists some published work on it, I'd be happy
if you could point it out to me.

Thank you,
Andrea



From cschulte at kth.se  Mon Aug 18 15:44:15 2008
From: cschulte at kth.se (Christian Schulte)
Date: Mon, 18 Aug 2008 15:44:15 +0200
Subject: [gecode-users] Linear expressions in 'post'
In-Reply-To: <413703fd0808180614j3936965v56c438c256d84671@mail.gmail.com>
References: <413703fd0808180614j3936965v56c438c256d84671@mail.gmail.com>
Message-ID: <002501c90138$81f4f300$85ded900$@se>

Dear Andrea,

what we do is pretty much what you had guessed already, however there are
two stages of rewriting going on, one for mapping linear expressions into a
linear constraint (that is, a relation between linear expressions) and a
second stage that is done by the functions that post a linear constraint.

Linear expressions are composed as sums and differences of linear terms a*x
+ c. What happens is that this is turned into a linear constraint of the
form (of course, this also holds for <=, >=, !=, <, >). So rather than
creating an expression we create a relation:
	a_1 * x_1 + ... + a_n * x_n = c

The routines for posting a linear constraint then do some additional
transformations:
	a * x + b * x 	is rewritten to 	(a + b) * x 	[must be
done for better propagation!]
	0 * x 		will be removed
	if g is the non-trivial gcd of a_1, ..., a_, c then all coefficients
are devided by g

All these rewriting steps will check for overflow. After that the routines
will decide which precision is needed for propagation and will throw an
exception if propagation might generate an overflow (very important,
otherwise, constraint propagation would be not sound).

I think that's what most systems do and an important aspect is to deal with
relations and not expressions (with expressions you always have the need for
intermediate variables where it is difficult to guess a domain for the
variable so that no overflow occurs). For a discussion of which
transformations change the propagation behaviour, you could check the
following paper:

@Article{newprop-journal,
  author = 	 {W.~Harvey and  P.J.~Stuckey},
  title = 	 {Improving linear constraint propagation by
                  changing constraint representation},
  journal = 	 {Constraints},
  volume =       {7},
  pages =        {173--207},
  year = 	 {2003},
}

Please do not hesitate to ask if you have more questions.

Cheers
Christian

--
Christian Schulte, www.ict.kth.se/~cschulte/


-----Original Message-----
From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf
Of Andrea Rendl
Sent: Monday, August 18, 2008 3:15 PM
To: users at gecode.org; andrea at cs.st-andrews.ac.uk
Subject: [gecode-users] Linear expressions in 'post'

Dear Gecoders,

I've noticed that Gecode is very effective with solving linear
expressions (Gecode::MiniModel::LinExpr)  given in the 'post'
constraint. I was wondering how you deal with them internally. I guess
you build some kind of expression tree from the linear expression and
then map the tree to an adequate 'linear' constraint? How do you deal
with more 'complex' linear expressions that you cannot directly map to
linear, such as

x + c1 != y + c2                   (where x,y are IntVars and c1,c2
are constants)

In this case, do you internally re-write the expression to 'x + c1 - y
!= c2' (or similar) to match with linear? If yes, are there any
particular rules you apply for re-writing? I assume there is no case
where you flatten any expressions (and introduce auxiliary variables
internally)? If there exists some published work on it, I'd be happy
if you could point it out to me.

Thank you,
Andrea

_______________________________________________
Gecode users mailing list
users at gecode.org
https://www.gecode.org/mailman/listinfo/gecode-users




From andrea.rendl at gmail.com  Mon Aug 18 16:19:02 2008
From: andrea.rendl at gmail.com (Andrea Rendl)
Date: Mon, 18 Aug 2008 15:19:02 +0100
Subject: [gecode-users] Linear expressions in 'post'
In-Reply-To: <002501c90138$81f4f300$85ded900$@se>
References: <413703fd0808180614j3936965v56c438c256d84671@mail.gmail.com>
	<002501c90138$81f4f300$85ded900$@se>
Message-ID: <413703fd0808180719v3885e448te436b069e1650fa6@mail.gmail.com>

Dear Christian,

Thanks for the quick reply. I have suspected that Peter Stuckey's and
Warwick's paper was somehow involved :)

I've noticed that you also have Boolean expressions
(Gecode::MiniModel::BoolExpr) in 'post'. I haven't done any testing
with them yet, but I'm curious if you apply similar re-write rules on
Boolean expressions?

Thanks again,
Andrea

2008/8/18 Christian Schulte <cschulte at kth.se>:
> Dear Andrea,
>
> what we do is pretty much what you had guessed already, however there are
> two stages of rewriting going on, one for mapping linear expressions into a
> linear constraint (that is, a relation between linear expressions) and a
> second stage that is done by the functions that post a linear constraint.
>
> Linear expressions are composed as sums and differences of linear terms a*x
> + c. What happens is that this is turned into a linear constraint of the
> form (of course, this also holds for <=, >=, !=, <, >). So rather than
> creating an expression we create a relation:
>        a_1 * x_1 + ... + a_n * x_n = c
>
> The routines for posting a linear constraint then do some additional
> transformations:
>        a * x + b * x   is rewritten to         (a + b) * x     [must be
> done for better propagation!]
>        0 * x           will be removed
>        if g is the non-trivial gcd of a_1, ..., a_, c then all coefficients
> are devided by g
>
> All these rewriting steps will check for overflow. After that the routines
> will decide which precision is needed for propagation and will throw an
> exception if propagation might generate an overflow (very important,
> otherwise, constraint propagation would be not sound).
>
> I think that's what most systems do and an important aspect is to deal with
> relations and not expressions (with expressions you always have the need for
> intermediate variables where it is difficult to guess a domain for the
> variable so that no overflow occurs). For a discussion of which
> transformations change the propagation behaviour, you could check the
> following paper:
>
> @Article{newprop-journal,
>  author =       {W.~Harvey and  P.J.~Stuckey},
>  title =        {Improving linear constraint propagation by
>                  changing constraint representation},
>  journal =      {Constraints},
>  volume =       {7},
>  pages =        {173--207},
>  year =         {2003},
> }
>
> Please do not hesitate to ask if you have more questions.
>
> Cheers
> Christian
>
> --
> Christian Schulte, www.ict.kth.se/~cschulte/
>
>
> -----Original Message-----
> From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf
> Of Andrea Rendl
> Sent: Monday, August 18, 2008 3:15 PM
> To: users at gecode.org; andrea at cs.st-andrews.ac.uk
> Subject: [gecode-users] Linear expressions in 'post'
>
> Dear Gecoders,
>
> I've noticed that Gecode is very effective with solving linear
> expressions (Gecode::MiniModel::LinExpr)  given in the 'post'
> constraint. I was wondering how you deal with them internally. I guess
> you build some kind of expression tree from the linear expression and
> then map the tree to an adequate 'linear' constraint? How do you deal
> with more 'complex' linear expressions that you cannot directly map to
> linear, such as
>
> x + c1 != y + c2                   (where x,y are IntVars and c1,c2
> are constants)
>
> In this case, do you internally re-write the expression to 'x + c1 - y
> != c2' (or similar) to match with linear? If yes, are there any
> particular rules you apply for re-writing? I assume there is no case
> where you flatten any expressions (and introduce auxiliary variables
> internally)? If there exists some published work on it, I'd be happy
> if you could point it out to me.
>
> Thank you,
> Andrea
>
> _______________________________________________
> Gecode users mailing list
> users at gecode.org
> https://www.gecode.org/mailman/listinfo/gecode-users
>
>



From cschulte at kth.se  Mon Aug 18 16:44:04 2008
From: cschulte at kth.se (Christian Schulte)
Date: Mon, 18 Aug 2008 16:44:04 +0200
Subject: [gecode-users] Linear expressions in 'post'
In-Reply-To: <413703fd0808180719v3885e448te436b069e1650fa6@mail.gmail.com>
References: <413703fd0808180614j3936965v56c438c256d84671@mail.gmail.com>	<002501c90138$81f4f300$85ded900$@se>
	<413703fd0808180719v3885e448te436b069e1650fa6@mail.gmail.com>
Message-ID: <003501c90140$dd0de5a0$9729b0e0$@se>

Dear Andrea,

no, there is nothing interesting really. Again, we work with relations
internally and rewrite the expressions into that. The only thing we
currently exploit is associativity, that is, for x & (y & z) we post a
single conjunction propagator rather than two with an additional variable.
Ah right, and we remove duplicates x & x to x.

What we will do for Gecode 3.0 is rewriting the expression into NNF (push
negation in front of variables) so that there will never be a need to have
negation propagator (that is due to the fact that Gecode will have then a
clause propagator for both positive and negative literals).

Cheers
Christian

--
Christian Schulte, www.ict.kth.se/~cschulte/


-----Original Message-----
From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf
Of Andrea Rendl
Sent: Monday, August 18, 2008 4:19 PM
To: Christian Schulte
Cc: andrea at cs.st-andrews.ac.uk; users at gecode.org
Subject: Re: [gecode-users] Linear expressions in 'post'

Dear Christian,

Thanks for the quick reply. I have suspected that Peter Stuckey's and
Warwick's paper was somehow involved :)

I've noticed that you also have Boolean expressions
(Gecode::MiniModel::BoolExpr) in 'post'. I haven't done any testing
with them yet, but I'm curious if you apply similar re-write rules on
Boolean expressions?

Thanks again,
Andrea

2008/8/18 Christian Schulte <cschulte at kth.se>:
> Dear Andrea,
>
> what we do is pretty much what you had guessed already, however there are
> two stages of rewriting going on, one for mapping linear expressions into
a
> linear constraint (that is, a relation between linear expressions) and a
> second stage that is done by the functions that post a linear constraint.
>
> Linear expressions are composed as sums and differences of linear terms
a*x
> + c. What happens is that this is turned into a linear constraint of the
> form (of course, this also holds for <=, >=, !=, <, >). So rather than
> creating an expression we create a relation:
>        a_1 * x_1 + ... + a_n * x_n = c
>
> The routines for posting a linear constraint then do some additional
> transformations:
>        a * x + b * x   is rewritten to         (a + b) * x     [must be
> done for better propagation!]
>        0 * x           will be removed
>        if g is the non-trivial gcd of a_1, ..., a_, c then all
coefficients
> are devided by g
>
> All these rewriting steps will check for overflow. After that the routines
> will decide which precision is needed for propagation and will throw an
> exception if propagation might generate an overflow (very important,
> otherwise, constraint propagation would be not sound).
>
> I think that's what most systems do and an important aspect is to deal
with
> relations and not expressions (with expressions you always have the need
for
> intermediate variables where it is difficult to guess a domain for the
> variable so that no overflow occurs). For a discussion of which
> transformations change the propagation behaviour, you could check the
> following paper:
>
> @Article{newprop-journal,
>  author =       {W.~Harvey and  P.J.~Stuckey},
>  title =        {Improving linear constraint propagation by
>                  changing constraint representation},
>  journal =      {Constraints},
>  volume =       {7},
>  pages =        {173--207},
>  year =         {2003},
> }
>
> Please do not hesitate to ask if you have more questions.
>
> Cheers
> Christian
>
> --
> Christian Schulte, www.ict.kth.se/~cschulte/
>
>
> -----Original Message-----
> From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf
> Of Andrea Rendl
> Sent: Monday, August 18, 2008 3:15 PM
> To: users at gecode.org; andrea at cs.st-andrews.ac.uk
> Subject: [gecode-users] Linear expressions in 'post'
>
> Dear Gecoders,
>
> I've noticed that Gecode is very effective with solving linear
> expressions (Gecode::MiniModel::LinExpr)  given in the 'post'
> constraint. I was wondering how you deal with them internally. I guess
> you build some kind of expression tree from the linear expression and
> then map the tree to an adequate 'linear' constraint? How do you deal
> with more 'complex' linear expressions that you cannot directly map to
> linear, such as
>
> x + c1 != y + c2                   (where x,y are IntVars and c1,c2
> are constants)
>
> In this case, do you internally re-write the expression to 'x + c1 - y
> != c2' (or similar) to match with linear? If yes, are there any
> particular rules you apply for re-writing? I assume there is no case
> where you flatten any expressions (and introduce auxiliary variables
> internally)? If there exists some published work on it, I'd be happy
> if you could point it out to me.
>
> Thank you,
> Andrea
>
> _______________________________________________
> Gecode users mailing list
> users at gecode.org
> https://www.gecode.org/mailman/listinfo/gecode-users
>
>

_______________________________________________
Gecode users mailing list
users at gecode.org
https://www.gecode.org/mailman/listinfo/gecode-users




From malcolmr at cse.unsw.edu.au  Wed Aug 20 07:15:17 2008
From: malcolmr at cse.unsw.edu.au (Malcolm Ryan)
Date: Wed, 20 Aug 2008 15:15:17 +1000
Subject: [gecode-users] Search depth
Message-ID: <A1CA5DBE-81BA-46F9-AC46-524B8899832C@cse.unsw.edu.au>

Is there any way to find out the depth of a solution found by a  
DFSIterator? Or the number of expanded nodes? I know that Gist can  
tell me these things, but the standard DFSIterator doesn't seem to  
record them.

Malcolm



From tack at ps.uni-sb.de  Wed Aug 20 08:41:12 2008
From: tack at ps.uni-sb.de (Guido Tack)
Date: Wed, 20 Aug 2008 08:41:12 +0200
Subject: [gecode-users] Search depth
In-Reply-To: <A1CA5DBE-81BA-46F9-AC46-524B8899832C@cse.unsw.edu.au>
References: <A1CA5DBE-81BA-46F9-AC46-524B8899832C@cse.unsw.edu.au>
Message-ID: <FF3A0C13-AB4B-4CDF-BF5F-886973DF4A41@ps.uni-sb.de>

Malcolm Ryan wrote:

> Is there any way to find out the depth of a solution found by a
> DFSIterator? Or the number of expanded nodes? I know that Gist can
> tell me these things, but the standard DFSIterator doesn't seem to
> record them.

Gist uses a completely different search engine than the DFSIterator.   
Unfortunately, there's currently no way to get that information from  
the iterator.

Cheers,
	Guido




From kelbelj at fel.cvut.cz  Wed Aug 20 15:15:28 2008
From: kelbelj at fel.cvut.cz (Jan Kelbel)
Date: Wed, 20 Aug 2008 15:15:28 +0200
Subject: [gecode-users] edge-finder propagator
Message-ID: <48AC18F0.5090306@fel.cvut.cz>

Hi,

we are trying to implement edge-finder propagator. The algorithm is 
implemented according to the book Baptiste,Le Pape, Nuijten (2001) 
Constraint-Based Scheduling.
We also took some Gecode coding inspiration from the cumulatives 
propagator.

The problem we have, is that for FT6 job-shop benchmark (we did not try 
more benchmarks yet), the edge-finder combined with BAB branching founds 
a solution that has Cmax>OptimalCmax, but is marked as an optimum, since 
BAB founds no better solution.
However, when a constraint Cmax < 57 is added (optimum for FT6 is 55), 
see line 96 of jobshop.cpp, then a solution with correct Cmax is found.
We do not know if the bug is in the edge-finder algoritm (not much 
likely), in the Gecode stuff of the propagator code, or in the Gecode 
itself.

Maybe someone who already implemented some edge-finder variation could 
help us.

The code of the whole program is attached (about 300 lines of code). The 
problem object Jobshop is inherited from the object Example, ie. it is 
necessary to include "examples/support.hh" and to link it with 
"example.o" and "options.o" from examples/support directory of the 
Gecode distribution.
We use Gecode 2.1.1 binary distribution, Visual C++ 2008 and Windows XP.

There are some TODOs we know about, but we think that are not the source 
of the problem:
* some methods of the propagator should be inlined
* vector used for sorting tasks should not be created each time 
propagate() method is called - instead it should be created in 
propagator constructor
* improve input function to be able to compute jobshops with different 
number of jobs and tasks (n != m)



I also obtained the same memory allocation problem, that was already 
reported by Nick Hindle on July 21st 
http://www.gecode.org/gecode-users/2008-July/002344.html
The problematic code is in file jobshop.cpp line 115:
   os << S[i] << ", ";  //raises memory allocation exception
   os << S[i].val() << ", ";  //this works


Thanks,  Jan

-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: jobshop.cpp
URL: <http://www.ps.uni-sb.de/pipermail/users/attachments/20080820/b6b77951/attachment.asc>
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: edgeFinder.cpp
URL: <http://www.ps.uni-sb.de/pipermail/users/attachments/20080820/b6b77951/attachment.txt>
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: edgeFinder.h
URL: <http://www.ps.uni-sb.de/pipermail/users/attachments/20080820/b6b77951/attachment-0001.asc>

From cschulte at kth.se  Thu Aug 21 15:31:50 2008
From: cschulte at kth.se (Christian Schulte)
Date: Thu, 21 Aug 2008 15:31:50 +0200
Subject: [gecode-users] edge-finder propagator
In-Reply-To: <48AC18F0.5090306@fel.cvut.cz>
References: <48AC18F0.5090306@fel.cvut.cz>
Message-ID: <009201c90392$55e06e50$01a14af0$@se>

Hi Jan,

before I actually start, there is another paper you might want to read for
edge-finding:
	Edge Finding for Cumulative Scheduling
	Luc Mercier, Pascal Van Hentenryck
	http://joc.journal.informs.org/cgi/content/abstract/20/1/143

What might be the case, is that your edge finder is non-monotonic (that is,
when run on variables with larger domain it does more pruning as if run on
variables with tighter domain). You can try what happens if you switch off
recomputation (as you are inheriting from the example class, just give -c-d
1 on the command line).

Then, that this is a bug in Gecode is very very very unlikely. Gecode does
not support non-monotonic propagators (well, it will in 3.0, we just added
that). Even Gecode 2.2.0 (which will be out next week, it is ready and just
needs packaging) will have a silent fix (not mentioned in the changelog) to
support non-monotonic propagators. If you want, you can check 2.2.0 out of
the repository.

Then, I cannot reproduce the allocation bug... You could send me a log of
what you did exactly and what happens? As said, I am using MSVC 2008 myself
and cannot reproduce it.

Cheers
Christian

--
Christian Schulte, www.ict.kth.se/~cschulte/


-----Original Message-----
From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf
Of Jan Kelbel
Sent: Wednesday, August 20, 2008 3:15 PM
To: users at gecode.org
Subject: [gecode-users] edge-finder propagator

Hi,

we are trying to implement edge-finder propagator. The algorithm is
implemented according to the book Baptiste,Le Pape, Nuijten (2001)
Constraint-Based Scheduling.
We also took some Gecode coding inspiration from the cumulatives propagator.

The problem we have, is that for FT6 job-shop benchmark (we did not try more
benchmarks yet), the edge-finder combined with BAB branching founds a
solution that has Cmax>OptimalCmax, but is marked as an optimum, since BAB
founds no better solution.
However, when a constraint Cmax < 57 is added (optimum for FT6 is 55), see
line 96 of jobshop.cpp, then a solution with correct Cmax is found.
We do not know if the bug is in the edge-finder algoritm (not much likely),
in the Gecode stuff of the propagator code, or in the Gecode itself.

Maybe someone who already implemented some edge-finder variation could help
us.

The code of the whole program is attached (about 300 lines of code). The
problem object Jobshop is inherited from the object Example, ie. it is
necessary to include "examples/support.hh" and to link it with "example.o"
and "options.o" from examples/support directory of the Gecode distribution.
We use Gecode 2.1.1 binary distribution, Visual C++ 2008 and Windows XP.

There are some TODOs we know about, but we think that are not the source of
the problem:
* some methods of the propagator should be inlined
* vector used for sorting tasks should not be created each time
propagate() method is called - instead it should be created in propagator
constructor
* improve input function to be able to compute jobshops with different
number of jobs and tasks (n != m)



I also obtained the same memory allocation problem, that was already
reported by Nick Hindle on July 21st
http://www.gecode.org/gecode-users/2008-July/002344.html
The problematic code is in file jobshop.cpp line 115:
   os << S[i] << ", ";  //raises memory allocation exception
   os << S[i].val() << ", ";  //this works


Thanks,  Jan





From kelbelj at fel.cvut.cz  Thu Aug 21 16:24:17 2008
From: kelbelj at fel.cvut.cz (Jan Kelbel)
Date: Thu, 21 Aug 2008 16:24:17 +0200
Subject: [gecode-users] edge-finder propagator
In-Reply-To: <009201c90392$55e06e50$01a14af0$@se>
References: <48AC18F0.5090306@fel.cvut.cz> <009201c90392$55e06e50$01a14af0$@se>
Message-ID: <48AD7A91.30100@fel.cvut.cz>

Hi Christian,

thank you for the reply. I forgot to mention that we are implementing 
disjunctive edge-finder. From the paper of Mercier and Van Hentenryck, I 
figured out that cumulative edge-finder of Nuijten is incomplete. But 
thank you, this information will be useful later when we would like to 
implement the cumulative version.

I tried to run the program with the "-c-d 1" options, the results remain 
the same, only number of propagations, failures, clones etc changed.

Then, I did not mean that Gecode is buggy. We just do not know where the 
bug is.

I will send you more info about the allocation bug later.

Cheers
Jan

Christian Schulte napsal(a):
> Hi Jan,
> 
> before I actually start, there is another paper you might want to read for
> edge-finding:
> 	Edge Finding for Cumulative Scheduling
> 	Luc Mercier, Pascal Van Hentenryck
> 	http://joc.journal.informs.org/cgi/content/abstract/20/1/143
> 
> What might be the case, is that your edge finder is non-monotonic (that is,
> when run on variables with larger domain it does more pruning as if run on
> variables with tighter domain). You can try what happens if you switch off
> recomputation (as you are inheriting from the example class, just give -c-d
> 1 on the command line).
> 
> Then, that this is a bug in Gecode is very very very unlikely. Gecode does
> not support non-monotonic propagators (well, it will in 3.0, we just added
> that). Even Gecode 2.2.0 (which will be out next week, it is ready and just
> needs packaging) will have a silent fix (not mentioned in the changelog) to
> support non-monotonic propagators. If you want, you can check 2.2.0 out of
> the repository.
> 
> Then, I cannot reproduce the allocation bug... You could send me a log of
> what you did exactly and what happens? As said, I am using MSVC 2008 myself
> and cannot reproduce it.
> 
> Cheers
> Christian
> 
> --
> Christian Schulte, www.ict.kth.se/~cschulte/
> 
> 
> -----Original Message-----
> From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf
> Of Jan Kelbel
> Sent: Wednesday, August 20, 2008 3:15 PM
> To: users at gecode.org
> Subject: [gecode-users] edge-finder propagator
> 
> Hi,
> 
> we are trying to implement edge-finder propagator. The algorithm is
> implemented according to the book Baptiste,Le Pape, Nuijten (2001)
> Constraint-Based Scheduling.
> We also took some Gecode coding inspiration from the cumulatives propagator.
> 
> The problem we have, is that for FT6 job-shop benchmark (we did not try more
> benchmarks yet), the edge-finder combined with BAB branching founds a
> solution that has Cmax>OptimalCmax, but is marked as an optimum, since BAB
> founds no better solution.
> However, when a constraint Cmax < 57 is added (optimum for FT6 is 55), see
> line 96 of jobshop.cpp, then a solution with correct Cmax is found.
> We do not know if the bug is in the edge-finder algoritm (not much likely),
> in the Gecode stuff of the propagator code, or in the Gecode itself.
> 
> Maybe someone who already implemented some edge-finder variation could help
> us.
> 
> The code of the whole program is attached (about 300 lines of code). The
> problem object Jobshop is inherited from the object Example, ie. it is
> necessary to include "examples/support.hh" and to link it with "example.o"
> and "options.o" from examples/support directory of the Gecode distribution.
> We use Gecode 2.1.1 binary distribution, Visual C++ 2008 and Windows XP.
> 
> There are some TODOs we know about, but we think that are not the source of
> the problem:
> * some methods of the propagator should be inlined
> * vector used for sorting tasks should not be created each time
> propagate() method is called - instead it should be created in propagator
> constructor
> * improve input function to be able to compute jobshops with different
> number of jobs and tasks (n != m)
> 
> 
> 
> I also obtained the same memory allocation problem, that was already
> reported by Nick Hindle on July 21st
> http://www.gecode.org/gecode-users/2008-July/002344.html
> The problematic code is in file jobshop.cpp line 115:
>    os << S[i] << ", ";  //raises memory allocation exception
>    os << S[i].val() << ", ";  //this works
> 
> 
> Thanks,  Jan
> 
> 




From filip.konvicka at logis.cz  Fri Aug 22 08:38:11 2008
From: filip.konvicka at logis.cz (=?UTF-8?B?RmlsaXAgS29udmnEjWth?=)
Date: Fri, 22 Aug 2008 08:38:11 +0200
Subject: [gecode-users] edge-finder propagator
In-Reply-To: <48AD7A91.30100@fel.cvut.cz>
References: <48AC18F0.5090306@fel.cvut.cz> <009201c90392$55e06e50$01a14af0$@se>
	<48AD7A91.30100@fel.cvut.cz>
Message-ID: <48AE5ED3.5000007@logis.cz>



Hi Jan,

> thank you for the reply. I forgot to mention that we are implementing 
> disjunctive edge-finder.

at

    http://kti.mff.cuni.cz/~vilim/

you'll find some interesting papers, one of which is

   "O(n log n) Filtering Algorithms for Unary Resource Constraint"
   http://kti.mff.cuni.cz/~vilim/nlogn.pdf

That's pretty easy to implement. You can also derive a branching for 
first/lasts quite easily from that.

Hope this helps,
Filip




From filip.konvicka at logis.cz  Fri Aug 22 08:38:11 2008
From: filip.konvicka at logis.cz (=?UTF-8?B?RmlsaXAgS29udmnEjWth?=)
Date: Fri, 22 Aug 2008 08:38:11 +0200
Subject: [gecode-users] edge-finder propagator
In-Reply-To: <48AD7A91.30100@fel.cvut.cz>
References: <48AC18F0.5090306@fel.cvut.cz> <009201c90392$55e06e50$01a14af0$@se>
	<48AD7A91.30100@fel.cvut.cz>
Message-ID: <48AE5ED3.5000007@logis.cz>

Hi Jan,

> thank you for the reply. I forgot to mention that we are implementing 
> disjunctive edge-finder.

at

    http://kti.mff.cuni.cz/~vilim/

you'll find some interesting papers, one of which is

   "O(n log n) Filtering Algorithms for Unary Resource Constraint"
   http://kti.mff.cuni.cz/~vilim/nlogn.pdf

That's pretty easy to implement. You can also derive a branching for 
first/lasts quite easily from that.

Hope this helps,
Filip




From filip.konvicka at logis.cz  Fri Aug 22 11:08:59 2008
From: filip.konvicka at logis.cz (=?UTF-8?B?RmlsaXAgS29udmnEjWth?=)
Date: Fri, 22 Aug 2008 11:08:59 +0200
Subject: [gecode-users] floatvars for Gecode 2.1.1
Message-ID: <g8lvnh$h43$1@ger.gmane.org>

Hi all,

so here is a more-or-less complete implementation of FloatVars for 
Gecode 2.1.1:

- Propagators: binary relational, binary arithmetic, linear
- Reified propagators: binary relational, linear
- 2 customizable branchings

Note that you'll need to patch and rebuild Gecode (see contents of the 
zipfile).

There is no integration with IntVars yet, and the support of 
serialization is not complete. As always, there's lot to improve, but 
it's good to release early to get some feedback.

I hope that you'll find this useful. If you find any problems, please 
drop me an email.

Cheers,
Filip

-------------- next part --------------
A non-text attachment was scrubbed...
Name: floatvar.zip
Type: application/zip
Size: 46297 bytes
Desc: not available
URL: <http://www.ps.uni-sb.de/pipermail/users/attachments/20080822/7878375f/attachment.zip>

From tack at ps.uni-sb.de  Fri Aug 22 11:44:16 2008
From: tack at ps.uni-sb.de (Guido Tack)
Date: Fri, 22 Aug 2008 11:44:16 +0200
Subject: [gecode-users] Renaming file extensions: cc to cpp, icc to hpp
Message-ID: <400FFB4E-AF98-4453-BC8E-02FEA28FFF9A@ps.uni-sb.de>

Hi!

We have decided to rename all .cc files to .cpp, and all .icc files  
to .hpp.  The .hh files remain the same.  We do this so that the file  
type associations e.g. in IDEs or file system browsers work better,  
as .icc is typically not used for C++ headers but ColorSync profiles  
etc.

The idea behind our naming scheme is the following: files with cpp or  
hpp extension contain code, while .hh files are header files  
containing only declarations.  As a user, you never have to include  
anything except .hh files (which may in turn include .hpp files).

The changes have been committed to the trunk, the upcoming release  
2.2.0 will use the old (cc/icc) naming scheme.

Cheers,
	Guido




From filip.konvicka at logis.cz  Fri Aug 22 15:20:19 2008
From: filip.konvicka at logis.cz (=?UTF-8?B?RmlsaXAgS29udmnEjWth?=)
Date: Fri, 22 Aug 2008 15:20:19 +0200
Subject: [gecode-users] floatvars for Gecode 2.1.1
In-Reply-To: <a6b4b44a0808220416w23a48449mb819bc136ad9a974@mail.gmail.com>
References: <g8lvnh$h43$1@ger.gmane.org>
	<a6b4b44a0808220416w23a48449mb819bc136ad9a974@mail.gmail.com>
Message-ID: <48AEBD13.7050305@logis.cz>

Mauricio Toro (22.8.2008 13:16):
> Is this going to be part of Gecode sometime?
> When?
Maybe, depending on the interest and feedback of the community (i.e. you
:-)).

The code is very young and needs reviewing and testing. Also some basic
stuff is still missing (reflection, serialization, integration with
IntVars) and it will eventually need to get ported to Gecode 3.0.

So please if you want to use it, go ahead. The only thing you need is to
build a custom "floatvar-enabled" version of Gecode (the changes to
Gecode itself are minimal, see the patchfile). The floatvar
implementation itself is header-only (like most of Boost is). Don't
hesistate to ask for help with that.

We agreed with Christian that once the code quality is good enough, we
will make it an official extension (and eventually integrate it fully in
Gecode).

Cheers,
Filip





From kelbelj at fel.cvut.cz  Fri Aug 22 16:02:31 2008
From: kelbelj at fel.cvut.cz (Jan Kelbel)
Date: Fri, 22 Aug 2008 16:02:31 +0200
Subject: [gecode-users] edge-finder propagator
In-Reply-To: <48AE5ED3.5000007@logis.cz>
References: <48AC18F0.5090306@fel.cvut.cz> <009201c90392$55e06e50$01a14af0$@se>
	<48AD7A91.30100@fel.cvut.cz> <48AE5ED3.5000007@logis.cz>
Message-ID: <48AEC6F7.1010101@fel.cvut.cz>

Hi Filip,

thank you for the information.
The implementation of the O(n^2) edge-finder of [Baptiste,Le Pape, 
Nuijten] seemed to us easier to implement than the O(n log n) algorithm 
of Vilim, which uses binary trees.
So we chose the O(n^2), as it was the first propagator we were implementing.

Maybe we should try to implement that O(n log n) version.

Cheers
Jan

Filip Konvi?ka napsal(a):
> 
> 
> Hi Jan,
> 
>> thank you for the reply. I forgot to mention that we are implementing 
>> disjunctive edge-finder.
> 
> at
> 
>    http://kti.mff.cuni.cz/~vilim/
> 
> you'll find some interesting papers, one of which is
> 
>   "O(n log n) Filtering Algorithms for Unary Resource Constraint"
>   http://kti.mff.cuni.cz/~vilim/nlogn.pdf
> 
> That's pretty easy to implement. You can also derive a branching for 
> first/lasts quite easily from that.
> 
> Hope this helps,
> Filip
> 




From filip.konvicka at logis.cz  Fri Aug 22 16:28:20 2008
From: filip.konvicka at logis.cz (=?UTF-8?B?RmlsaXAgS29udmnEjWth?=)
Date: Fri, 22 Aug 2008 16:28:20 +0200
Subject: [gecode-users] edge-finder propagator
In-Reply-To: <48AEC6F7.1010101@fel.cvut.cz>
References: <48AC18F0.5090306@fel.cvut.cz>
	<009201c90392$55e06e50$01a14af0$@se>	<48AD7A91.30100@fel.cvut.cz>
	<48AE5ED3.5000007@logis.cz> <48AEC6F7.1010101@fel.cvut.cz>
Message-ID: <g8mie7$mv5$1@ger.gmane.org>

Hi Jan,

> The implementation of the O(n^2) edge-finder of [Baptiste,Le Pape, 
> Nuijten] seemed to us easier to implement than the O(n log n) algorithm 
> of Vilim, which uses binary trees.
> So we chose the O(n^2), as it was the first propagator we were implementing.
> 
> Maybe we should try to implement that O(n log n) version.

The binary trees are easy - implement them using vectors: compute the 
next larger power of two (N), make a vector of N*2-1 items, the tree 
leaves start at index N-1, parent node of node I is (I-1)/2.

In fact, efficient computation of the next power of two is what I can 
share with you because it is already part of the FloatVar implementation 
I posted earlier today: it is in float/float/bi/prop_linear.icc, look 
for "namespace __Utils".

Theta-lambda trees are usable not just for propagators, but also for 
branchings (you can easily compute firsts/lasts using theta-lambda trees).

Hope this helps,
Filip




From tack at ps.uni-sb.de  Sat Aug 23 08:56:34 2008
From: tack at ps.uni-sb.de (Guido Tack)
Date: Sat, 23 Aug 2008 08:56:34 +0200
Subject: [gecode-users] Problem with constraint
In-Reply-To: <51A70708-9E16-4841-83C7-57CC52FA45FE@hszk.bme.hu>
References: <7D9CF0A5-AD44-4046-ACDE-8636607C1050@hszk.bme.hu>
	<DCC63351-500C-482E-ABEB-ED18B11277B5@hszk.bme.hu>
	<AC61101E-25D7-4CD5-9A3F-0B2CEF7F3520@ps.uni-sb.de>
	<73D02635-E730-4C4A-A4F1-5A093A362D16@hszk.bme.hu>
	<B177D5F8-40FB-4979-B8D2-CEB9A395320D@ps.uni-sb.de>
	<51A70708-9E16-4841-83C7-57CC52FA45FE@hszk.bme.hu>
Message-ID: <27A128D1-93E5-4571-8F9F-EC8774E409AC@ps.uni-sb.de>

Hi!

Please let me know if this is more or less what you wanted to use:

BExpr be = new BExpr(new Expr(new Expr(space.var2).minus(space.var1)),  
IRT_EQ, 0, ICL_DOM);

The ICL argument is now part of the BExpr, so it means that the linear  
constraint inside is propagated with ICL_DOM.  I hope that's what you  
need.  It will be available in Gecode/J 2.2.0 (very probably next week).

Cheers,
	Guido

Ujhelyi Zoltan wrote:

> Hello,
>
> thank you for your reply.
>
> I understand the problem stated here, but I would like to ask whether
> there is a solution to add a constraint like that to a Boolean
> Expression with the domain consistent propagation (ICL_DOM).
>
> I did not found any possibilities for that looking in the Gecode/J
> API, but it would help a lot for our project.
>
> Thank you,
> Ujhelyi Zolt?n
> On 2008.08.11., at 11:34, Guido Tack wrote:
>
>> Could you please post to the mailing list? Thanks. Guido
>>
>> Am 11.08.2008 um 11:22 schrieb Ujhelyi Zoltan:
>>
>>> Hello,
>>>
>>> thank you for your reply.
>>>
>>> I understand the problem stated here, but I would like to ask
>>> whether there is a solution to add a constraint like that to a
>>> Boolen Expression with the domain consistent propagation (ICL_DOM).
>>>
>>> I did not found any possibilities for that looking in the Gecode/J
>>> API, but it would help a lot for our project.
>>> Thank you,
>>> Zolt?n Ujhelyi
>>> On 2008.08.11., at 9:03, Guido Tack wrote:
>>>
>>>> Hi.
>>>>
>>>> As you've already found out, you have to use domain consistent
>>>> propagation (ICL_DOM) to get the result you want.  You should be
>>>> able to use post(space, new Expr(space.variable1), IRT_EQ, new
>>>> Expr(space.variable2), ICL_DOM) to get the desired result.  I'm
>>>> not 100% sure, but I think your solution that uses e=variable1-
>>>> variable2, e=0 doesn't work because only the e=0 is propagated to
>>>> domain consistency, while e=variable1-variable2 still only
>>>> achieves bounds consistency.
>>>>
>>>> Cheers,
>>>> 	Guido
>>>>
>>>> Ujhelyi Zoltan wrote:
>>>>
>>>>> Hello again,
>>>>>
>>>>> I have been experimenting with the questions raised in my
>>>>> previous mail.
>>>>>
>>>>> I created a small Gecode space to be able to test the problem in a
>>>>> smaller scale, where I did use two variables (variable1,  
>>>>> variable2,
>>>>> both IntVars with the domain {0,5}) and three constraints:
>>>>> variable1
>>>>> equals variable2, and variable2 cannot have the values 2 and 4.
>>>>>
>>>>> In all of my tests the latter two constraints are described like
>>>>> that:
>>>>>
>>>>> post(space, new BExpr(space.variable1, IRT_NQ, 2));
>>>>> post(space, new BExpr(space.variable1, IRT_NQ, 4));
>>>>>
>>>>> For the third constraint I had several tries. When I was using the
>>>>> rel() clause to write the constraint, I got the expected result:
>>>>>
>>>>> Variable #1: {0..1,3,5}
>>>>> Variable #2: {0..1,3,5}
>>>>>
>>>>> But when using a similar construct I would like to use in the
>>>>> static
>>>>> verifier, I got no result for the second variable, it can has all
>>>>> values from it's domain.
>>>>>
>>>>> post(space, new BExpr(space.variable1, IRT_EQ, space.variable2));
>>>>>
>>>>> Reading about different propagators, I have been able to get the
>>>>> expected result with the use of the ICL_DOM propagator, but only
>>>>> if I
>>>>> was posting the constraint directly, like that:
>>>>>
>>>>> post(space, new Expr(space.variable1), IRT_EQ, new
>>>>> Expr(space.variable2),org.gecode.GecodeEnumConstants.ICL_DOM);
>>>>>
>>>>> But if I tried to translate the a BExprs to that form, I did not
>>>>> succeed:
>>>>>
>>>>> 	    Expr expression = new Expr(new
>>>>> Expr(space.variable2).minus(space.variable1));
>>>>> 	    post(space, new Expr(expression), IRT_EQ, 0,
>>>>> org.gecode.GecodeEnumConstants.ICL_DOM);
>>>>>
>>>>> Can you tell me a way how to enable this strong ICL_DOM  
>>>>> propagators
>>>>> meanwhile using the BExpr form, if it is possible? It would help
>>>>> our
>>>>> project a lot, it would simplify it's code.
>>>>>
>>>>> Thank you for your help,
>>>>> Zolt?n Ujhelyi
>>>>> On 2008.08.09., at 18:30, Ujhelyi Zoltan wrote:
>>>>>
>>>>>> Hello all,
>>>>>>
>>>>>> we are currently trying to build a static checker system on top  
>>>>>> of
>>>>>> Gecode/J 2.1.1. (in an Eclipse environment), and we have found an
>>>>>> interesting case.
>>>>>>
>>>>>> In order to allow us greater flexibility we try to use the
>>>>>> Expression
>>>>>> API (it allows us to build constraints in a hierarchical manner).
>>>>>>
>>>>>> I was testing the implementation, and found an interesting final
>>>>>> result: there were to IntVars, which were supposed to be the
>>>>>> same, did
>>>>>> not have the same final ranges: one of them had {2,4}, but the
>>>>>> other
>>>>>> had {2,3,4}. I tried to trace back the code to look whether the
>>>>>> constraints were wrong or not, and found the following expression
>>>>>> building term:
>>>>>>
>>>>>> BExpr expression = new BExpr(new Expr(variable1),relation, new
>>>>>> Expr(variable2));
>>>>>>
>>>>>> Tracing the variables variable1 was a new variable, it hadn't  
>>>>>> been
>>>>>> constrained yet, while variable2's domain had been limited to the
>>>>>> values 2 and 4 (and they were the variables mentioned before in
>>>>>> this
>>>>>> letter), while the relation had the value IRT_EQ.
>>>>>>
>>>>>> I tried a post of the expression right after it's construction
>>>>>> to see
>>>>>> whether it helps or not:
>>>>>> org.gecode.Gecode.post(space, expression);
>>>>>>
>>>>>> It did not solve the problem, but when I replaced the post
>>>>>> method to
>>>>>> the following rel call, the constraint handling was working as I
>>>>>> expected it before.
>>>>>>
>>>>>> rel(space, variable1, IntRelType.IRT_EQ, variable2);
>>>>>>
>>>>>> I would like to know, whether this phenomenon is the intentional
>>>>>> (maybe I do not understand something under the hood), or not.
>>>>>> And if
>>>>>> you could tell me a way to avoid it, I would be very glad.
>>>>>>
>>>>>> Thank you very much in advance for your help,
>>>>>> Zolt?n Ujhelyi
>>>>>> _______________________________________________
>>>>>> Gecode users mailing list
>>>>>> users at gecode.org
>>>>>> https://www.gecode.org/mailman/listinfo/gecode-users
>>>>>
>>>>>
>>>>> _______________________________________________
>>>>> Gecode users mailing list
>>>>> users at gecode.org
>>>>> https://www.gecode.org/mailman/listinfo/gecode-users
>>>>
>>>
>>
>
>
> _______________________________________________
> Gecode users mailing list
> users at gecode.org
> https://www.gecode.org/mailman/listinfo/gecode-users




From uz602 at hszk.bme.hu  Sat Aug 23 13:12:38 2008
From: uz602 at hszk.bme.hu (Ujhelyi Zoltan)
Date: Sat, 23 Aug 2008 13:12:38 +0200
Subject: [gecode-users] Problem with constraint
In-Reply-To: <27A128D1-93E5-4571-8F9F-EC8774E409AC@ps.uni-sb.de>
References: <7D9CF0A5-AD44-4046-ACDE-8636607C1050@hszk.bme.hu>
	<DCC63351-500C-482E-ABEB-ED18B11277B5@hszk.bme.hu>
	<AC61101E-25D7-4CD5-9A3F-0B2CEF7F3520@ps.uni-sb.de>
	<73D02635-E730-4C4A-A4F1-5A093A362D16@hszk.bme.hu>
	<B177D5F8-40FB-4979-B8D2-CEB9A395320D@ps.uni-sb.de>
	<51A70708-9E16-4841-83C7-57CC52FA45FE@hszk.bme.hu>
	<27A128D1-93E5-4571-8F9F-EC8774E409AC@ps.uni-sb.de>
Message-ID: <81BCDD32-D6CB-4ED5-A8B0-35F242E03C12@hszk.bme.hu>

Hello!

Thank you very much, it is exactly what I needed.

Thank you for your help again.

Zolt?n Ujhelyi
On 2008.08.23., at 8:56, Guido Tack wrote:

> Hi!
>
> Please let me know if this is more or less what you wanted to use:
>
> BExpr be = new BExpr(new Expr(new  
> Expr(space.var2).minus(space.var1)), IRT_EQ, 0, ICL_DOM);
>
> The ICL argument is now part of the BExpr, so it means that the  
> linear constraint inside is propagated with ICL_DOM.  I hope that's  
> what you need.  It will be available in Gecode/J 2.2.0 (very  
> probably next week).
>
> Cheers,
> 	Guido
>
> Ujhelyi Zoltan wrote:
>
>> Hello,
>>
>> thank you for your reply.
>>
>> I understand the problem stated here, but I would like to ask whether
>> there is a solution to add a constraint like that to a Boolean
>> Expression with the domain consistent propagation (ICL_DOM).
>>
>> I did not found any possibilities for that looking in the Gecode/J
>> API, but it would help a lot for our project.
>>
>> Thank you,
>> Ujhelyi Zolt?n
>> On 2008.08.11., at 11:34, Guido Tack wrote:
>>
>>> Could you please post to the mailing list? Thanks. Guido
>>>
>>> Am 11.08.2008 um 11:22 schrieb Ujhelyi Zoltan:
>>>
>>>> Hello,
>>>>
>>>> thank you for your reply.
>>>>
>>>> I understand the problem stated here, but I would like to ask
>>>> whether there is a solution to add a constraint like that to a
>>>> Boolen Expression with the domain consistent propagation (ICL_DOM).
>>>>
>>>> I did not found any possibilities for that looking in the Gecode/J
>>>> API, but it would help a lot for our project.
>>>> Thank you,
>>>> Zolt?n Ujhelyi
>>>> On 2008.08.11., at 9:03, Guido Tack wrote:
>>>>
>>>>> Hi.
>>>>>
>>>>> As you've already found out, you have to use domain consistent
>>>>> propagation (ICL_DOM) to get the result you want.  You should be
>>>>> able to use post(space, new Expr(space.variable1), IRT_EQ, new
>>>>> Expr(space.variable2), ICL_DOM) to get the desired result.  I'm
>>>>> not 100% sure, but I think your solution that uses e=variable1-
>>>>> variable2, e=0 doesn't work because only the e=0 is propagated to
>>>>> domain consistency, while e=variable1-variable2 still only
>>>>> achieves bounds consistency.
>>>>>
>>>>> Cheers,
>>>>> 	Guido
>>>>>
>>>>> Ujhelyi Zoltan wrote:
>>>>>
>>>>>> Hello again,
>>>>>>
>>>>>> I have been experimenting with the questions raised in my
>>>>>> previous mail.
>>>>>>
>>>>>> I created a small Gecode space to be able to test the problem  
>>>>>> in a
>>>>>> smaller scale, where I did use two variables (variable1,  
>>>>>> variable2,
>>>>>> both IntVars with the domain {0,5}) and three constraints:
>>>>>> variable1
>>>>>> equals variable2, and variable2 cannot have the values 2 and 4.
>>>>>>
>>>>>> In all of my tests the latter two constraints are described like
>>>>>> that:
>>>>>>
>>>>>> post(space, new BExpr(space.variable1, IRT_NQ, 2));
>>>>>> post(space, new BExpr(space.variable1, IRT_NQ, 4));
>>>>>>
>>>>>> For the third constraint I had several tries. When I was using  
>>>>>> the
>>>>>> rel() clause to write the constraint, I got the expected result:
>>>>>>
>>>>>> Variable #1: {0..1,3,5}
>>>>>> Variable #2: {0..1,3,5}
>>>>>>
>>>>>> But when using a similar construct I would like to use in the
>>>>>> static
>>>>>> verifier, I got no result for the second variable, it can has all
>>>>>> values from it's domain.
>>>>>>
>>>>>> post(space, new BExpr(space.variable1, IRT_EQ, space.variable2));
>>>>>>
>>>>>> Reading about different propagators, I have been able to get the
>>>>>> expected result with the use of the ICL_DOM propagator, but only
>>>>>> if I
>>>>>> was posting the constraint directly, like that:
>>>>>>
>>>>>> post(space, new Expr(space.variable1), IRT_EQ, new
>>>>>> Expr(space.variable2),org.gecode.GecodeEnumConstants.ICL_DOM);
>>>>>>
>>>>>> But if I tried to translate the a BExprs to that form, I did not
>>>>>> succeed:
>>>>>>
>>>>>> 	    Expr expression = new Expr(new
>>>>>> Expr(space.variable2).minus(space.variable1));
>>>>>> 	    post(space, new Expr(expression), IRT_EQ, 0,
>>>>>> org.gecode.GecodeEnumConstants.ICL_DOM);
>>>>>>
>>>>>> Can you tell me a way how to enable this strong ICL_DOM  
>>>>>> propagators
>>>>>> meanwhile using the BExpr form, if it is possible? It would help
>>>>>> our
>>>>>> project a lot, it would simplify it's code.
>>>>>>
>>>>>> Thank you for your help,
>>>>>> Zolt?n Ujhelyi
>>>>>> On 2008.08.09., at 18:30, Ujhelyi Zoltan wrote:
>>>>>>
>>>>>>> Hello all,
>>>>>>>
>>>>>>> we are currently trying to build a static checker system on  
>>>>>>> top of
>>>>>>> Gecode/J 2.1.1. (in an Eclipse environment), and we have found  
>>>>>>> an
>>>>>>> interesting case.
>>>>>>>
>>>>>>> In order to allow us greater flexibility we try to use the
>>>>>>> Expression
>>>>>>> API (it allows us to build constraints in a hierarchical  
>>>>>>> manner).
>>>>>>>
>>>>>>> I was testing the implementation, and found an interesting final
>>>>>>> result: there were to IntVars, which were supposed to be the
>>>>>>> same, did
>>>>>>> not have the same final ranges: one of them had {2,4}, but the
>>>>>>> other
>>>>>>> had {2,3,4}. I tried to trace back the code to look whether the
>>>>>>> constraints were wrong or not, and found the following  
>>>>>>> expression
>>>>>>> building term:
>>>>>>>
>>>>>>> BExpr expression = new BExpr(new Expr(variable1),relation, new
>>>>>>> Expr(variable2));
>>>>>>>
>>>>>>> Tracing the variables variable1 was a new variable, it hadn't  
>>>>>>> been
>>>>>>> constrained yet, while variable2's domain had been limited to  
>>>>>>> the
>>>>>>> values 2 and 4 (and they were the variables mentioned before in
>>>>>>> this
>>>>>>> letter), while the relation had the value IRT_EQ.
>>>>>>>
>>>>>>> I tried a post of the expression right after it's construction
>>>>>>> to see
>>>>>>> whether it helps or not:
>>>>>>> org.gecode.Gecode.post(space, expression);
>>>>>>>
>>>>>>> It did not solve the problem, but when I replaced the post
>>>>>>> method to
>>>>>>> the following rel call, the constraint handling was working as I
>>>>>>> expected it before.
>>>>>>>
>>>>>>> rel(space, variable1, IntRelType.IRT_EQ, variable2);
>>>>>>>
>>>>>>> I would like to know, whether this phenomenon is the intentional
>>>>>>> (maybe I do not understand something under the hood), or not.
>>>>>>> And if
>>>>>>> you could tell me a way to avoid it, I would be very glad.
>>>>>>>
>>>>>>> Thank you very much in advance for your help,
>>>>>>> Zolt?n Ujhelyi
>>>>>>> _______________________________________________
>>>>>>> Gecode users mailing list
>>>>>>> users at gecode.org
>>>>>>> https://www.gecode.org/mailman/listinfo/gecode-users
>>>>>>
>>>>>>
>>>>>> _______________________________________________
>>>>>> Gecode users mailing list
>>>>>> users at gecode.org
>>>>>> https://www.gecode.org/mailman/listinfo/gecode-users
>>>>>
>>>>
>>>
>>
>>
>> _______________________________________________
>> Gecode users mailing list
>> users at gecode.org
>> https://www.gecode.org/mailman/listinfo/gecode-users
>




From filip.konvicka at logis.cz  Sat Aug 23 20:30:03 2008
From: filip.konvicka at logis.cz (=?UTF-8?B?RmlsaXAgS29udmnEjWth?=)
Date: Sat, 23 Aug 2008 20:30:03 +0200
Subject: [gecode-users] Reflection support for FloatVars questions
Message-ID: <g8pkvi$91g$1@ger.gmane.org>

Hi,

I looked a bit at your reflection HOWTO at

http://www.gecode.org/gecode-doc-latest/PageReflection.html#SecReflAddSupport

Well, it seems that it should be possible to add support for FloatVars, 
but still I'd welcome some comments/advices :-)

One thing is that we don't have just generic propagators and branchings, 
we also have generic variables and views. All are templates :-) One 
thing I did already was making the user explicitly instantiate some 
classes using a pre-defined macro once they want to use FloatVars with a 
certain "domain type" (we need ViewVarImpTraits and VarViewTraits 
specializations for the appropriate types). So I can probably use a 
similar approach to register all kinds of reflection & (un)serialization 
stuff.

Another thing is the reflection spec (Gecode::Reflection::ActorSpec). 
There seems to be support for signed integer constants and for strings, 
so I'll try to serialize interval domains and constants using some 
standard conversions to/from std::string (like boost::lexical_cast). I 
suppose that adding support for types like 'double' and 'float' to 
ActorSpec is probably a bad idea (given the platform differences in 
representing floats...right?)

Yet another thing is that my branching templates are parametrized not 
just by the view type but also by some variable- and value-selecting 
classes. This is not strictly necessary, but I did not see a reason not 
to do so before I got here :-) So I intend to use 'mangle' to do the 
magic, and I suppose that it should be possible when I add 'type()' to 
the appropriate classes (or is there something more to it?)

Cheers,
Filip


PS: There is an error in the howto, the line

   static Gecode::Symbol ati(void) const {

should probably be

   static Gecode::Support::Symbol ati(void) {




From jorgeivory at gmail.com  Sat Aug 23 23:24:02 2008
From: jorgeivory at gmail.com (=?ISO-8859-1?Q?Jorge_Ivory_Casta=F1o?=)
Date: Sat, 23 Aug 2008 16:24:02 -0500
Subject: [gecode-users] GecodeJ and 64 bits
In-Reply-To: <AE97A868-91BE-466D-A8F1-7915A25F6881@ps.uni-sb.de>
References: <fa32d88f0808021307l667950b0h9db10f64505ffa2d@mail.gmail.com>
	<AE97A868-91BE-466D-A8F1-7915A25F6881@ps.uni-sb.de>
Message-ID: <fa32d88f0808231424y6a9c2b0dqdf979c72fc272c9a@mail.gmail.com>

It may be a silly question since I am still a beginner. I tried to install
gecodej in Windows Vista Ultimate 64 bits and I couldn't.
So as you offered to help me there's what i have done:
So far I have installed cygwin with all options on C:\cygwin
I downloaded gecode 2.1.1 and unzipped it to C:\cygwin\gecode-2.1.1
I entered cygwin and in /gecode-2.1.1 i used ./configure CC="gcc
-mno-cygwin" CXX="g++ -mno-cygwin"
I got this output:
<br>    <img src="http://www.eldesparchecali.com/images/Dibujo.jpg"/> <br>
Then i use make
I got this output:
<br>    <img src="http://www.eldesparchecali.com/images/Dibujo1.jpg"/> <br>
I use make install and
I got this output:
<br>    <img src="http://www.eldesparchecali.com/images/Dibujo2.jpg"/> <br>
then I download ant and java, I install ant on cygwin and java on windows,
when I write java or ant commands
I got this output:
<br>    <img src="http://www.eldesparchecali.com/images/Dibujo3.jpg"/> <br>
So far so good, everything seems to be working.
Then I downloaded gecodej 2.1.1 and unzipped it to C:\cygwin\gecodej-2.1.1
but when I tried to configure it
I got this output:
<br>    <img src="http://www.eldesparchecali.com/images/Dibujo4.jpg"/> <br>
PKG_CONFIG_PATH is a variable in Windows or in cygwin? Where it should point
to? How do I set it up correctly?
make install isn't supossed to do this automatically? Did I miss a step?
my path variable is:
%SystemRoot%\system32;%SystemRoot%;%SystemRoot%\System32\Wbem;C:\cygwin\Gecode\bin;C:\cygwin\ant\bin;C:\Program
Files\Java\jdk1.6.0_07\bin
as you can see in the screenshot below
<br>    <img src="http://www.eldesparchecali.com/images/Dibujo6.jpg"/> <br>
Gecode examples are working as you can see at
<br>    <img src="http://www.eldesparchecali.com/images/Dibujo5.jpg"/> <br>
I dont know what I have to do in order to get gecodej working, would you
please help me?



On Mon, Aug 11, 2008 at 2:08 AM, Guido Tack <tack at ps.uni-sb.de> wrote:

> Jorge Ivory Casta?o wrote:
>
>  Hi, I just bougth a new computer with an ASUS M2NSLI motheboard and a AMD
>> Athlon 64 X2 6000+ Processor, 4Gb in RAM. (old one was malfunctioning)
>> I have been in trouble trying to install some things because of drivers
>> problems and software that is not in 64 bits architecture.
>> I am working in my thesis with Gecode and GecodeJ, and now that i want to
>> continue working in my new computer I would like to know:
>> Is GecodeJ compatible with my 64 bits architecture? Has someone installed
>> it?
>>
>
> Yes, as Christian already guessed, Gecode/J works on 64 bit architectures.
>
>  What OS do you recommend me for work on Gecodej? Linux or Windows Vista
>> Ultimate? (Xp is not possible because or the 4gb in RAM and lots of bugs
>> with my motherboard in the 64bits version).
>> In case you recommend me Linux, can you suggest me a distribution that you
>> know works fine with gecodej? I will really appreciate you help.
>>
>
> I haven't tried to compile Gecode/J for 64 bit Windows yet, and I have no
> experience with the 64 bit JVM for Windows.  The last time I compiled
> Gecode/J on Linux for 64 bit was on a Debian system, but really any distro
> should work that comes with the necessary tools: a recent gcc (preferably
> 4.2), the usual build tools, a Sun JDK (with java 1.5 or 1.6), and ant.
>
> Please try to follow the installation instructions at
> http://www.gecode.org/gecodej/doc/PageComp.html
> If you run into problems, I'm sure we can help you get everything up and
> running.
>
> Cheers,
>        Guido
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.ps.uni-sb.de/pipermail/users/attachments/20080823/dbcab138/attachment.htm>

From tack at ps.uni-sb.de  Sat Aug 23 23:38:00 2008
From: tack at ps.uni-sb.de (Guido Tack)
Date: Sat, 23 Aug 2008 23:38:00 +0200
Subject: [gecode-users] GecodeJ and 64 bits
In-Reply-To: <fa32d88f0808231424y6a9c2b0dqdf979c72fc272c9a@mail.gmail.com>
References: <fa32d88f0808021307l667950b0h9db10f64505ffa2d@mail.gmail.com>
	<AE97A868-91BE-466D-A8F1-7915A25F6881@ps.uni-sb.de>
	<fa32d88f0808231424y6a9c2b0dqdf979c72fc272c9a@mail.gmail.com>
Message-ID: <E3063AFD-8398-437F-BFD3-F137DD675FA6@ps.uni-sb.de>

Jorge Ivory Casta?o wrote:

> It may be a silly question since I am still a beginner. I tried to  
> install gecodej in Windows Vista Ultimate 64 bits and I couldn't.
> So as you offered to help me there's what i have done:
> So far I have installed cygwin with all options on C:\cygwin
> I downloaded gecode 2.1.1 and unzipped it to C:\cygwin\gecode-2.1.1
> I entered cygwin and in /gecode-2.1.1 i used ./configure CC="gcc - 
> mno-cygwin" CXX="g++ -mno-cygwin"
> I got this output:
> <br>    <img src="http://www.eldesparchecali.com/images/Dibujo.jpg"/ 
> > <br>

Again, please follow the instructions on our web page.  In particular,  
you'll see that we only support the Microsoft C++ compiler for Gecode/ 
J under Windows, gcc does not work.

> Then i use make
> I got this output:
> <br>    <img src="http://www.eldesparchecali.com/images/Dibujo1.jpg"/ 
> > <br>
> I use make install and
> I got this output:
> <br>    <img src="http://www.eldesparchecali.com/images/Dibujo2.jpg"/ 
> > <br>
> then I download ant and java, I install ant on cygwin and java on  
> windows, when I write java or ant commands
> I got this output:
> <br>    <img src="http://www.eldesparchecali.com/images/Dibujo3.jpg"/ 
> > <br>
> So far so good, everything seems to be working.
> Then I downloaded gecodej 2.1.1 and unzipped it to C:\cygwin 
> \gecodej-2.1.1 but when I tried to configure it
> I got this output:
> <br>    <img src="http://www.eldesparchecali.com/images/Dibujo4.jpg"/ 
> > <br>
> PKG_CONFIG_PATH is a variable in Windows or in cygwin? Where it  
> should point to? How do I set it up correctly?
> make install isn't supossed to do this automatically? Did I miss a  
> step?

You'll have to point PKG_CONFIG_PATH to /usr/local/lib/pkgconfig (or  
replace /usr/local with anything you specify as --prefix in  
configure).  This only works if the pkg-config tool was already  
present when configuring Gecode.

We plan to provide binary packages for 64 bit Windows with our next  
release.  The release is planned for next week, but the 64 bit  
binaries may come a few days later.

Cheers,
	Guido

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.ps.uni-sb.de/pipermail/users/attachments/20080823/845e5cf9/attachment.htm>

From tack at ps.uni-sb.de  Sat Aug 23 23:53:25 2008
From: tack at ps.uni-sb.de (Guido Tack)
Date: Sat, 23 Aug 2008 23:53:25 +0200
Subject: [gecode-users] Reflection support for FloatVars questions
In-Reply-To: <g8pkvi$91g$1@ger.gmane.org>
References: <g8pkvi$91g$1@ger.gmane.org>
Message-ID: <59CB60D7-B553-4E70-AC18-B78D62CDB387@ps.uni-sb.de>

Filip Konvi?ka wrote:
> I looked a bit at your reflection HOWTO at
>
> http://www.gecode.org/gecode-doc-latest/PageReflection.html#SecReflAddSupport
>
> Well, it seems that it should be possible to add support for  
> FloatVars,
> but still I'd welcome some comments/advices :-)

Sure!

> One thing is that we don't have just generic propagators and  
> branchings,
> we also have generic variables and views. All are templates :-) One
> thing I did already was making the user explicitly instantiate some
> classes using a pre-defined macro once they want to use FloatVars  
> with a
> certain "domain type" (we need ViewVarImpTraits and VarViewTraits
> specializations for the appropriate types). So I can probably use a
> similar approach to register all kinds of reflection &  
> (un)serialization
> stuff.

Yes, right.  What you'll mainly have to implement for variables is the  
function FloatVarImp<...>::spec.  It will have to create a  
Reflection::VarSpec, whose first argument is the variable type  
identifier (vti), a symbol.  You have to make sure that this vti is  
unique for each FloatVarImp instance.

> Another thing is the reflection spec (Gecode::Reflection::ActorSpec).
> There seems to be support for signed integer constants and for  
> strings,
> so I'll try to serialize interval domains and constants using some
> standard conversions to/from std::string (like boost::lexical_cast). I
> suppose that adding support for types like 'double' and 'float' to
> ActorSpec is probably a bad idea (given the platform differences in
> representing floats...right?)

Hm, I don't know.  An ActorSpec just must be able to represent what  
the system uses, it doesn't have to be platform-independent.  The idea  
is that an ActorSpec just lets you look inside the propagator.  If you  
want to communicate the specs, e.g. over the network, you'll have to  
make sure that a platform-independent representation is used.  E.g.,  
we can use boost serialization to turn ActorSpecs into strings.  The  
serialization classes should allow platform-independent transfer of  
e.g. doubles.

So, I guess we should add support for double in ActorSpec.

> Yet another thing is that my branching templates are parametrized not
> just by the view type but also by some variable- and value-selecting
> classes. This is not strictly necessary, but I did not see a reason  
> not
> to do so before I got here :-) So I intend to use 'mangle' to do the
> magic, and I suppose that it should be possible when I add 'type()' to
> the appropriate classes (or is there something more to it?)

No, that's all there is to it ;-)  Just add a type method, that's how  
we do it, too.

> PS: There is an error in the howto, the line
>
>   static Gecode::Symbol ati(void) const {
>
> should probably be
>
>   static Gecode::Support::Symbol ati(void) {

Thanks!  I fixed it in the svn.

Cheers,
	Guido




From jorgeivory at gmail.com  Mon Aug 25 00:22:16 2008
From: jorgeivory at gmail.com (=?ISO-8859-1?Q?Jorge_Ivory_Casta=F1o?=)
Date: Sun, 24 Aug 2008 17:22:16 -0500
Subject: [gecode-users] Windows Vista Ultimate and Visual C++ 2008 problem
Message-ID: <fa32d88f0808241522u5003aa9j26ac9fa3b5b3acbe@mail.gmail.com>

Hi it's me again. And still can't make this work.
As gcc compilation is not suported for GecodeJ under Windows, i tried
deleting the gecode and gecodej folder to reinstall, but now I have another
problem
I used Visual Studio 2008 command prompt and now i get this error as you can
see:
http://www.eldesparchecali.com/images/Dibujo8.jpg
I use Visual C++ 2008 express edition, Windows Vista Ultimate on a
*AMD's*Athlon 64 X2
*5000*+ *Black Edition
*Using gcc didn't show an error on this step
http://www.eldesparchecali.com/images/Dibujo.jpg
What's happening? Should I try linux instead? What can i do?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.ps.uni-sb.de/pipermail/users/attachments/20080824/670ea432/attachment.htm>

From malcolmr at cse.unsw.edu.au  Mon Aug 25 08:24:48 2008
From: malcolmr at cse.unsw.edu.au (Malcolm Ryan)
Date: Mon, 25 Aug 2008 16:24:48 +1000
Subject: [gecode-users] Incremental constraints
Message-ID: <66DD0749-AA4A-4E8D-A4AE-E5FEB0C2E9B9@cse.unsw.edu.au>

I'm having efficiency problems with my constraint system. It is slow  
compared to a standard search algorithm with much more limited  
deductive ability. I think that too much time is being spent  
propagating constraints in ways that are ultimately not improving the  
search.

Rather than abandon CSPs completely, I'd like to experiment with  
modulating the amount of propagation to see if there is some point at  
which it becomes advantageous. Is there any generic way to do this? If  
I remove constraints completely, it will effect the correctness of my  
solution, which I don't want to do. I just want to delay constraint  
checking/propagation.

One way that occurs to me would be to add constraints incrementally,  
during the search. Could Gecode handle this? If so, which phase of the  
search process should it occur in? I'm guessing that it should be part  
of commmit(). Would that be appropriate?

Thanks,

Malcolm



From filip.konvicka at logis.cz  Mon Aug 25 09:19:33 2008
From: filip.konvicka at logis.cz (=?UTF-8?B?RmlsaXAgS29udmnEjWth?=)
Date: Mon, 25 Aug 2008 09:19:33 +0200
Subject: [gecode-users] Reflection support for FloatVars questions
In-Reply-To: <59CB60D7-B553-4E70-AC18-B78D62CDB387@ps.uni-sb.de>
References: <g8pkvi$91g$1@ger.gmane.org>
	<59CB60D7-B553-4E70-AC18-B78D62CDB387@ps.uni-sb.de>
Message-ID: <48B25D05.5020906@logis.cz>

Hi Guido,

>> Another thing is the reflection spec (Gecode::Reflection::ActorSpec).
>> There seems to be support for signed integer constants and for  
>> strings,
>> so I'll try to serialize interval domains and constants using some
>> standard conversions to/from std::string (like boost::lexical_cast). I
>> suppose that adding support for types like 'double' and 'float' to
>> ActorSpec is probably a bad idea (given the platform differences in
>> representing floats...right?)
> 
> Hm, I don't know.  An ActorSpec just must be able to represent what  
> the system uses, it doesn't have to be platform-independent.  The idea  
> is that an ActorSpec just lets you look inside the propagator.  If you  
> want to communicate the specs, e.g. over the network, you'll have to  
> make sure that a platform-independent representation is used.  E.g.,  
> we can use boost serialization to turn ActorSpecs into strings.  The  
> serialization classes should allow platform-independent transfer of  
> e.g. doubles.

Cool, in that case maybe we could consider adding support for all 
"basic" C++ numeric types: float, double, long double, long long. I'm 
sure that Boost.Serialization handles portability issues well.

My concern about portability was related to your JavaScript example: 
adding these types means that you have to extend the parser quite a bit. 
(For example, you need to solve the ambiguities between types.)

> So, I guess we should add support for double in ActorSpec.

Another option, of course, is adding support just for double, which is 
probably what most people would use. For now, anyway, I'm planning to 
use some default conversion to/from string (using boost::lexical_cast), 
and let the users override this for their numeric type of choice if that 
doesn't work with lexical_cast. The thing to keep in mind with FloatVar 
is that you never know in advance what numeric type it'll run with, so 
we have to provide such mechanism anyway.

I'll come back with more questions if my attempts to run FloatVar 
examples with Gist fail :-)

Cheers,
Filip




From cschulte at kth.se  Mon Aug 25 10:08:49 2008
From: cschulte at kth.se (Christian Schulte)
Date: Mon, 25 Aug 2008 10:08:49 +0200
Subject: [gecode-users] Windows Vista Ultimate and Visual C++ 2008
	problem
In-Reply-To: <fa32d88f0808241522u5003aa9j26ac9fa3b5b3acbe@mail.gmail.com>
References: <fa32d88f0808241522u5003aa9j26ac9fa3b5b3acbe@mail.gmail.com>
Message-ID: <000f01c90689$cf9ae190$6ed0a4b0$@se>

Hi,

 

as is visible in the log, the configure script stills finds gcc and not cl
(the Microsoft compiler). Please read the compilation instructions and make
sure that all pathes etc are set up for cl (this issue has been discussed on
this mailing list before).

 

Cheers

Christian

 

--

Christian Schulte, www.ict.kth.se/~cschulte/

 

From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf
Of Jorge Ivory Casta?o
Sent: Monday, August 25, 2008 12:22 AM
To: users at gecode.org
Subject: [gecode-users] Windows Vista Ultimate and Visual C++ 2008 problem

 

Hi it's me again. And still can't make this work.
As gcc compilation is not suported for GecodeJ under Windows, i tried
deleting the gecode and gecodej folder to reinstall, but now I have another
problem
I used Visual Studio 2008 command prompt and now i get this error as you can
see:
http://www.eldesparchecali.com/images/Dibujo8.jpg
I use Visual C++ 2008 express edition, Windows Vista Ultimate on a AMD's
Athlon 64 X2 5000+ Black Edition 
Using gcc didn't show an error on this step
http://www.eldesparchecali.com/images/Dibujo.jpg
What's happening? Should I try linux instead? What can i do?

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.ps.uni-sb.de/pipermail/users/attachments/20080825/3b759e41/attachment.htm>

From cschulte at kth.se  Mon Aug 25 10:09:55 2008
From: cschulte at kth.se (Christian Schulte)
Date: Mon, 25 Aug 2008 10:09:55 +0200
Subject: [gecode-users] GecodeJ and 64 bits
In-Reply-To: <E3063AFD-8398-437F-BFD3-F137DD675FA6@ps.uni-sb.de>
References: <fa32d88f0808021307l667950b0h9db10f64505ffa2d@mail.gmail.com>	<AE97A868-91BE-466D-A8F1-7915A25F6881@ps.uni-sb.de>	<fa32d88f0808231424y6a9c2b0dqdf979c72fc272c9a@mail.gmail.com>
	<E3063AFD-8398-437F-BFD3-F137DD675FA6@ps.uni-sb.de>
Message-ID: <001d01c90689$f5ac3640$e104a2c0$@se>

By the way, Gecode 2.2.0 is only a week away, here we will also ship a 64
bit package.

 

Christian

 

--

Christian Schulte, www.ict.kth.se/~cschulte/

 

From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf
Of Guido Tack
Sent: Saturday, August 23, 2008 11:38 PM
To: Jorge Ivory Casta?o
Cc: users at gecode.org
Subject: Re: [gecode-users] GecodeJ and 64 bits

 

Jorge Ivory Casta?o wrote:





It may be a silly question since I am still a beginner. I tried to install
gecodej in Windows Vista Ultimate 64 bits and I couldn't.
So as you offered to help me there's what i have done:
So far I have installed cygwin with all options on C:\cygwin
I downloaded gecode 2.1.1 and unzipped it to C:\cygwin\gecode-2.1.1
I entered cygwin and in /gecode-2.1.1 i used ./configure CC="gcc
-mno-cygwin" CXX="g++ -mno-cygwin"
I got this output:
<br>    <img src="http://www.eldesparchecali.com/images/Dibujo.jpg"/> <br>

 

Again, please follow the instructions on our web page.  In particular,
you'll see that we only support the Microsoft C++ compiler for Gecode/J
under Windows, gcc does not work.

 

Then i use make
I got this output: 
<br>    <img src="http://www.eldesparchecali.com/images/Dibujo1.jpg"/> <br>
I use make install and
I got this output:
<br>    <img src="http://www.eldesparchecali.com/images/Dibujo2.jpg"/> <br>
then I download ant and java, I install ant on cygwin and java on windows,
when I write java or ant commands
I got this output:
<br>    <img src="http://www.eldesparchecali.com/images/Dibujo3.jpg"/> <br>
So far so good, everything seems to be working.
Then I downloaded gecodej 2.1.1 and unzipped it to C:\cygwin\gecodej-2.1.1
but when I tried to configure it
I got this output:
<br>    <img src="http://www.eldesparchecali.com/images/Dibujo4.jpg"/> <br>
PKG_CONFIG_PATH is a variable in Windows or in cygwin? Where it should point
to? How do I set it up correctly?
make install isn't supossed to do this automatically? Did I miss a step?

 

You'll have to point PKG_CONFIG_PATH to /usr/local/lib/pkgconfig (or replace
/usr/local with anything you specify as --prefix in configure).  This only
works if the pkg-config tool was already present when configuring Gecode.

 

We plan to provide binary packages for 64 bit Windows with our next release.
The release is planned for next week, but the 64 bit binaries may come a few
days later.

 

Cheers,

            Guido

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.ps.uni-sb.de/pipermail/users/attachments/20080825/28fdcdb0/attachment.htm>

From cschulte at kth.se  Mon Aug 25 10:12:21 2008
From: cschulte at kth.se (Christian Schulte)
Date: Mon, 25 Aug 2008 10:12:21 +0200
Subject: [gecode-users] Reflection support for FloatVars questions
In-Reply-To: <48B25D05.5020906@logis.cz>
References: <g8pkvi$91g$1@ger.gmane.org>	<59CB60D7-B553-4E70-AC18-B78D62CDB387@ps.uni-sb.de>
	<48B25D05.5020906@logis.cz>
Message-ID: <002b01c9068a$4d4c2860$e7e47920$@se>

Hi,

for 3.0 all these types have been added already ;-)

Cheers
Christian

--
Christian Schulte, www.ict.kth.se/~cschulte/

-----Original Message-----
From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf
Of Filip Konvicka
Sent: Monday, August 25, 2008 9:20 AM
To: users at gecode.org
Subject: Re: [gecode-users] Reflection support for FloatVars questions

Hi Guido,

>> Another thing is the reflection spec (Gecode::Reflection::ActorSpec).
>> There seems to be support for signed integer constants and for
>> strings,
>> so I'll try to serialize interval domains and constants using some
>> standard conversions to/from std::string (like boost::lexical_cast). I
>> suppose that adding support for types like 'double' and 'float' to
>> ActorSpec is probably a bad idea (given the platform differences in
>> representing floats...right?)
>
> Hm, I don't know.  An ActorSpec just must be able to represent what
> the system uses, it doesn't have to be platform-independent.  The idea
> is that an ActorSpec just lets you look inside the propagator.  If you
> want to communicate the specs, e.g. over the network, you'll have to
> make sure that a platform-independent representation is used.  E.g.,
> we can use boost serialization to turn ActorSpecs into strings.  The
> serialization classes should allow platform-independent transfer of
> e.g. doubles.

Cool, in that case maybe we could consider adding support for all
"basic" C++ numeric types: float, double, long double, long long. I'm
sure that Boost.Serialization handles portability issues well.

My concern about portability was related to your JavaScript example:
adding these types means that you have to extend the parser quite a bit.
(For example, you need to solve the ambiguities between types.)

> So, I guess we should add support for double in ActorSpec.

Another option, of course, is adding support just for double, which is
probably what most people would use. For now, anyway, I'm planning to
use some default conversion to/from string (using boost::lexical_cast),
and let the users override this for their numeric type of choice if that
doesn't work with lexical_cast. The thing to keep in mind with FloatVar
is that you never know in advance what numeric type it'll run with, so
we have to provide such mechanism anyway.

I'll come back with more questions if my attempts to run FloatVar
examples with Gist fail :-)

Cheers,
Filip


_______________________________________________
Gecode users mailing list
users at gecode.org
https://www.gecode.org/mailman/listinfo/gecode-users




From tack at ps.uni-sb.de  Mon Aug 25 10:48:14 2008
From: tack at ps.uni-sb.de (Guido Tack)
Date: Mon, 25 Aug 2008 10:48:14 +0200
Subject: [gecode-users] Reflection support for FloatVars questions
In-Reply-To: <002b01c9068a$4d4c2860$e7e47920$@se>
References: <g8pkvi$91g$1@ger.gmane.org>	<59CB60D7-B553-4E70-AC18-B78D62CDB387@ps.uni-sb.de>
	<48B25D05.5020906@logis.cz> <002b01c9068a$4d4c2860$e7e47920$@se>
Message-ID: <EA991F53-A8C8-46B2-9BEC-80CFCACE6AF2@ps.uni-sb.de>

Christian Schulte wrote:
> for 3.0 all these types have been added already ;-)

Only for mangle, i.e., for turning template arguments into strings.   
Arg, and therefore ActorSpec and VarSpec, still can't store doubles.

Cheers,
	Guido

> -----Original Message-----
> From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On  
> Behalf
> Of Filip Konvicka
> Sent: Monday, August 25, 2008 9:20 AM
> To: users at gecode.org
> Subject: Re: [gecode-users] Reflection support for FloatVars questions
>
> Hi Guido,
>
>>> Another thing is the reflection spec  
>>> (Gecode::Reflection::ActorSpec).
>>> There seems to be support for signed integer constants and for
>>> strings,
>>> so I'll try to serialize interval domains and constants using some
>>> standard conversions to/from std::string (like  
>>> boost::lexical_cast). I
>>> suppose that adding support for types like 'double' and 'float' to
>>> ActorSpec is probably a bad idea (given the platform differences in
>>> representing floats...right?)
>>
>> Hm, I don't know.  An ActorSpec just must be able to represent what
>> the system uses, it doesn't have to be platform-independent.  The  
>> idea
>> is that an ActorSpec just lets you look inside the propagator.  If  
>> you
>> want to communicate the specs, e.g. over the network, you'll have to
>> make sure that a platform-independent representation is used.  E.g.,
>> we can use boost serialization to turn ActorSpecs into strings.  The
>> serialization classes should allow platform-independent transfer of
>> e.g. doubles.
>
> Cool, in that case maybe we could consider adding support for all
> "basic" C++ numeric types: float, double, long double, long long. I'm
> sure that Boost.Serialization handles portability issues well.
>
> My concern about portability was related to your JavaScript example:
> adding these types means that you have to extend the parser quite a  
> bit.
> (For example, you need to solve the ambiguities between types.)
>
>> So, I guess we should add support for double in ActorSpec.
>
> Another option, of course, is adding support just for double, which is
> probably what most people would use. For now, anyway, I'm planning to
> use some default conversion to/from string (using  
> boost::lexical_cast),
> and let the users override this for their numeric type of choice if  
> that
> doesn't work with lexical_cast. The thing to keep in mind with  
> FloatVar
> is that you never know in advance what numeric type it'll run with, so
> we have to provide such mechanism anyway.
>
> I'll come back with more questions if my attempts to run FloatVar
> examples with Gist fail :-)
>
> Cheers,
> Filip
>
>
> _______________________________________________
> Gecode users mailing list
> users at gecode.org
> https://www.gecode.org/mailman/listinfo/gecode-users
>
>
> _______________________________________________
> Gecode users mailing list
> users at gecode.org
> https://www.gecode.org/mailman/listinfo/gecode-users




From tack at ps.uni-sb.de  Mon Aug 25 11:47:09 2008
From: tack at ps.uni-sb.de (Guido Tack)
Date: Mon, 25 Aug 2008 11:47:09 +0200
Subject: [gecode-users] Windows Vista Ultimate and Visual C++ 2008
	problem
In-Reply-To: <000f01c90689$cf9ae190$6ed0a4b0$@se>
References: <fa32d88f0808241522u5003aa9j26ac9fa3b5b3acbe@mail.gmail.com>
	<000f01c90689$cf9ae190$6ed0a4b0$@se>
Message-ID: <FEAE52DE-0F15-4B9E-94D7-19A3562785CF@ps.uni-sb.de>

Christian Schulte wrote:

> Hi,
>
> as is visible in the log, the configure script stills finds gcc and  
> not cl (the Microsoft compiler). Please read the compilation  
> instructions and make sure that all pathes etc are set up for cl  
> (this issue has been discussed on this mailing list before).

You configured with CCX=cl instead of CXX=cl.

Guido

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.ps.uni-sb.de/pipermail/users/attachments/20080825/fe50baa4/attachment.htm>

From cschulte at kth.se  Mon Aug 25 14:49:05 2008
From: cschulte at kth.se (Christian Schulte)
Date: Mon, 25 Aug 2008 14:49:05 +0200
Subject: [gecode-users] Incremental constraints
In-Reply-To: <66DD0749-AA4A-4E8D-A4AE-E5FEB0C2E9B9@cse.unsw.edu.au>
References: <66DD0749-AA4A-4E8D-A4AE-E5FEB0C2E9B9@cse.unsw.edu.au>
Message-ID: <005c01c906b0$f67da550$e378eff0$@se>

Hi Malcolm,

yes you can add constraints dynamically. Actually you can add anytime! The
only thing you need is to have access to the space you want to add
constraints to.

One way to get started would be to branch only over the subset of the
variables. Then when search stops (it will stop if the branching is done),
you can add more constraints and additional branchings.

Cheers
Christian

--
Christian Schulte, www.ict.kth.se/~cschulte/


-----Original Message-----
From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf
Of Malcolm Ryan
Sent: Monday, August 25, 2008 8:25 AM
To: gecode list
Subject: [gecode-users] Incremental constraints

I'm having efficiency problems with my constraint system. It is slow
compared to a standard search algorithm with much more limited
deductive ability. I think that too much time is being spent
propagating constraints in ways that are ultimately not improving the
search.

Rather than abandon CSPs completely, I'd like to experiment with
modulating the amount of propagation to see if there is some point at
which it becomes advantageous. Is there any generic way to do this? If
I remove constraints completely, it will effect the correctness of my
solution, which I don't want to do. I just want to delay constraint
checking/propagation.

One way that occurs to me would be to add constraints incrementally,
during the search. Could Gecode handle this? If so, which phase of the
search process should it occur in? I'm guessing that it should be part
of commmit(). Would that be appropriate?

Thanks,

Malcolm

_______________________________________________
Gecode users mailing list
users at gecode.org
https://www.gecode.org/mailman/listinfo/gecode-users




From mauriciotorob at gmail.com  Mon Aug 25 15:40:01 2008
From: mauriciotorob at gmail.com (Mauricio Toro)
Date: Mon, 25 Aug 2008 15:40:01 +0200
Subject: [gecode-users] Modulo operator
In-Reply-To: <BAA8F44D-E2DB-49EE-BC72-215860AB254A@ps.uni-sb.de>
References: <D74C7C1C-1FCD-4ED9-A11E-267BB13BE9A2@cse.unsw.edu.au>
	<BAA8F44D-E2DB-49EE-BC72-215860AB254A@ps.uni-sb.de>
Message-ID: <a6b4b44a0808250640u5d8b0a8v82d1ed5c6a0be57e@mail.gmail.com>

Hello,
I am trying to write this reified constraint.

(a mod c = d) <-> b
where a,c,d are IntVars and b is BoolVar.

In the past, you recommend to represent
A = (B - C) mod n as  A = (B-C) + n * X.

But, now I am wondering how can I
write a reified propagator for (a mod c = d) <-> b.

Thanks,

Mauricio

2008/5/14 Guido Tack <tack at ps.uni-sb.de>

> Malcolm Ryan wrote:
>
> > I'd like to express the constraint:
> >
> > A = (B - C) mod n
> > 0 <= A < n
> >
> > for variables A,B,C and constant n.
> >
> > How would you advise doing this? The obvious answer is to add an extra
> > variable X:
> >
> > A = (B-C) + n * X
> > 0 <= A < n
> >
> > but I'm not sure if this is best. Can you advise?
>
> As there's no built-in propagator for the modulo constraint, you have
> to decompose into other constraints, so your solution should be ok.
> After all, it's just a linear equation with constant coefficients
> 1*A-1*B+1*C-n*X=0, right?  And X will be determined as soon as A,B,C
> are, you don't even have to include X in the branching.
>
> Guido
>
>
> _______________________________________________
> Gecode users mailing list
> users at gecode.org
> https://www.gecode.org/mailman/listinfo/gecode-users
>



-- 
Mauricio Toro Bermudez
Estudiante de Ingenier?a de Sistemas
Pontificia Universidad Javeriana, Colombia

Stagiare ? l'Ircam
1, place Igor-Stravinsky 75004 Paris,
France de 2008 ? 2009
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.ps.uni-sb.de/pipermail/users/attachments/20080825/d0f67382/attachment.htm>

From cschulte at kth.se  Mon Aug 25 15:46:12 2008
From: cschulte at kth.se (Christian Schulte)
Date: Mon, 25 Aug 2008 15:46:12 +0200
Subject: [gecode-users] Modulo operator
In-Reply-To: <a6b4b44a0808250640u5d8b0a8v82d1ed5c6a0be57e@mail.gmail.com>
References: <D74C7C1C-1FCD-4ED9-A11E-267BB13BE9A2@cse.unsw.edu.au>	<BAA8F44D-E2DB-49EE-BC72-215860AB254A@ps.uni-sb.de>
	<a6b4b44a0808250640u5d8b0a8v82d1ed5c6a0be57e@mail.gmail.com>
Message-ID: <007901c906b8$efe28a00$cfa79e00$@se>

If you want to write a propagator for this, the non-reified divmod
propagator that is included in the just released 2.2.0 might be a good
starting point.

 

Christian

 

--

Christian Schulte, www.ict.kth.se/~cschulte/

 

From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf
Of Mauricio Toro
Sent: Monday, August 25, 2008 3:40 PM
To: gecode list
Subject: Re: [gecode-users] Modulo operator

 

Hello,

 

I am trying to write this reified constraint.

 

(a mod c = d) <-> b

where a,c,d are IntVars and b is BoolVar.

 

In the past, you recommend to represent

A = (B - C) mod n as  A = (B-C) + n * X.

 

But, now I am wondering how can I

write a reified propagator for (a mod c = d) <-> b.

 

Thanks,

 

Mauricio

2008/5/14 Guido Tack <tack at ps.uni-sb.de>

Malcolm Ryan wrote:

> I'd like to express the constraint:
>
> A = (B - C) mod n
> 0 <= A < n
>
> for variables A,B,C and constant n.
>
> How would you advise doing this? The obvious answer is to add an extra
> variable X:
>
> A = (B-C) + n * X
> 0 <= A < n
>
> but I'm not sure if this is best. Can you advise?

As there's no built-in propagator for the modulo constraint, you have
to decompose into other constraints, so your solution should be ok.
After all, it's just a linear equation with constant coefficients
1*A-1*B+1*C-n*X=0, right?  And X will be determined as soon as A,B,C
are, you don't even have to include X in the branching.

Guido



_______________________________________________
Gecode users mailing list
users at gecode.org
https://www.gecode.org/mailman/listinfo/gecode-users




-- 
Mauricio Toro Bermudez
Estudiante de Ingenier?a de Sistemas
Pontificia Universidad Javeriana, Colombia

Stagiare ? l'Ircam
1, place Igor-Stravinsky 75004 Paris, 
France de 2008 ? 2009

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.ps.uni-sb.de/pipermail/users/attachments/20080825/6d93d86b/attachment.htm>

From cschulte at kth.se  Mon Aug 25 16:41:00 2008
From: cschulte at kth.se (Christian Schulte)
Date: Mon, 25 Aug 2008 16:41:00 +0200
Subject: [gecode-users] How to use Gecode binaries from within MSVC's IDE
Message-ID: <008701c906c0$9ddc2e70$d9948b50$@se>

Dear all,

thanks to the help from Jan Kelbel, we found a solution (well, workaround)
for using the precompiled binaries we ship within Microsoft Visual Studio's
Integrated Development Environment (IDE).

The IDE defines the macros UNICODE and _UNICODE: when compiling with these
macros set, things crash. What you can do is the following:
 - Go to the project property dialog
 - Find the entry "Configuration Properties"
 - Find the section "General"
 - Switch "Character Set" to "Use Multi-Byte Character Set"

That should do the trick. We will investigate further what happens exactly
with UNICODE and _UNICODE defined (it's so not documented... Aaaaargh!).

Cheers
Christian

--
Christian Schulte, www.ict.kth.se/~cschulte/






From filip.konvicka at logis.cz  Mon Aug 25 17:03:05 2008
From: filip.konvicka at logis.cz (=?UTF-8?B?RmlsaXAgS29udmnEjWth?=)
Date: Mon, 25 Aug 2008 17:03:05 +0200
Subject: [gecode-users] How to use Gecode binaries from within MSVC's IDE
In-Reply-To: <008701c906c0$9ddc2e70$d9948b50$@se>
References: <008701c906c0$9ddc2e70$d9948b50$@se>
Message-ID: <g8uhjn$tnb$1@ger.gmane.org>

Hi Christian,

> The IDE defines the macros UNICODE and _UNICODE: when compiling with these
> macros set, things crash.

strange - I'm using UNICODE all the time without problems.

IMHO it does only one thing: all Windows headers switch to the Unicode 
APIs (and TCHAR is defined as wchar_t etc.) You can also use 
wmain(int,wchar_t*[]) instead of main(int,char*[]) for programs.

What you might be interested in is putting this at the very start of 
your 'main' (I even do this before main in some static initializers...):

#ifdef WIN32
     setlocale(LC_ALL, ".OCP");
#else
     setlocale(LC_ALL, "");
#endif

(for console applications). This makes the iostream libraries use the 
correct locale for translating console IO to/from wchar_t properly.

I'm still wondering what crashes are you experiencing??

Cheers,
Filip




From cschulte at kth.se  Mon Aug 25 17:11:36 2008
From: cschulte at kth.se (Christian Schulte)
Date: Mon, 25 Aug 2008 17:11:36 +0200
Subject: [gecode-users] How to use Gecode binaries from within MSVC's IDE
In-Reply-To: <g8uhjn$tnb$1@ger.gmane.org>
References: <008701c906c0$9ddc2e70$d9948b50$@se> <g8uhjn$tnb$1@ger.gmane.org>
Message-ID: <008d01c906c4$de61fc50$9b25f4f0$@se>

First, the "fix" I just send does not fix the problem... It does for me but
not for Jan.

The crashes are totally bizarre, as far as the debugger tells the crash
occurs right in the heart of copying... That's close to impossible as Gecode
does not use char there...

I'll have a closer look tomorrow (my problem is that I know very little
about MSVC's IDE and hoped that I could get away with that). I'll try the
voodoo you suggest.

Maybe, you still use MSVC 2005?

Cheers
Christian

--
Christian Schulte, www.ict.kth.se/~cschulte/


-----Original Message-----
From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf
Of Filip Konvicka
Sent: Monday, August 25, 2008 5:03 PM
To: users at gecode.org
Subject: Re: [gecode-users] How to use Gecode binaries from within MSVC's
IDE

Hi Christian,

> The IDE defines the macros UNICODE and _UNICODE: when compiling with these
> macros set, things crash.

strange - I'm using UNICODE all the time without problems.

IMHO it does only one thing: all Windows headers switch to the Unicode
APIs (and TCHAR is defined as wchar_t etc.) You can also use
wmain(int,wchar_t*[]) instead of main(int,char*[]) for programs.

What you might be interested in is putting this at the very start of
your 'main' (I even do this before main in some static initializers...):

#ifdef WIN32
     setlocale(LC_ALL, ".OCP");
#else
     setlocale(LC_ALL, "");
#endif

(for console applications). This makes the iostream libraries use the
correct locale for translating console IO to/from wchar_t properly.

I'm still wondering what crashes are you experiencing??

Cheers,
Filip


_______________________________________________
Gecode users mailing list
users at gecode.org
https://www.gecode.org/mailman/listinfo/gecode-users




From filip.konvicka at logis.cz  Mon Aug 25 17:26:11 2008
From: filip.konvicka at logis.cz (=?UTF-8?B?RmlsaXAgS29udmnEjWth?=)
Date: Mon, 25 Aug 2008 17:26:11 +0200
Subject: [gecode-users] How to use Gecode binaries from within MSVC's IDE
In-Reply-To: <008d01c906c4$de61fc50$9b25f4f0$@se>
References: <008701c906c0$9ddc2e70$d9948b50$@se> <g8uhjn$tnb$1@ger.gmane.org>
	<008d01c906c4$de61fc50$9b25f4f0$@se>
Message-ID: <48B2CF13.5010008@logis.cz>


> First, the "fix" I just send does not fix the problem... It does for me but
> not for Jan.
>
> The crashes are totally bizarre, as far as the debugger tells the crash
> occurs right in the heart of copying... That's close to impossible as Gecode
> does not use char there...
>   
Well, if someone overwrites memory somewhere else, anything can occur...
> I'll have a closer look tomorrow (my problem is that I know very little
> about MSVC's IDE and hoped that I could get away with that). I'll try the
> voodoo you suggest.
>   
This almighty cure is mainly for solving issues with wstringstream and 
std::wcin/std::wcout, but who knows, it saved me a lot of trouble already.
> Maybe, you still use MSVC 2005?
>   
I already have MSVC 2008 SP1. All Gecode scripts I'm running now use 
UNICODE and no crashes occur (even with my FloatVars :-)). However, one 
thing on my TODO list is investigating this: when I break the execution 
somewhere and inspect the variables (like FloatVarImp or IntVarImp), the 
'home' pointer inside all variables is set to '0xBAADF00D', which is a 
little scary. You know, everything seems to work, but it's creepy. So 
far I thought that maybe I miscompiled Gecode somehow...

Cheers,
Filip




From tack at ps.uni-sb.de  Mon Aug 25 18:21:01 2008
From: tack at ps.uni-sb.de (Guido Tack)
Date: Mon, 25 Aug 2008 18:21:01 +0200
Subject: [gecode-users] [Gecode-announce] Gecode 2.2.0, Gecode/J 2.2.0,
	Gecode/FlatZinc 1.3 released
Message-ID: <E07FFA67-BCA3-4407-8B2D-A01357B0DD9F@ps.uni-sb.de>

We would like to announce the release of

                  Gecode 2.2.0
           http://www.gecode.org

This release adds many domain consistent propagators for arithmetic  
constraints and fixes a number of bugs. Some of these bugs fixed are  
potentially serious, in particular as they occur very seldom. Please  
change to 2.2.0 as soon as possible (in particular if you are using  
the 64bit Microsoft Visual C++ compiler). And, of course, the usual  
small fixes and changes.  The complete changelog is available at http://www.gecode.org/gecode-doc-latest/PageChanges_2_2_0.html

We also release

                  Gecode/J 2.2.0
           http://www.gecode.org/gecodej/

and

                  Gecode/FlatZInc 1.3
           http://www.gecode.org/flatzinc.html

Both Gecode/J and Gecode/FlatZinc have been updated to work with  
Gecode 2.2.0, and incorporate minor fixes as detailed on the  
respective web pages.

On our web site, you will find source packages, as well as binary  
packages for Windows and Mac OS X.

Cheers,

	Guido




From uz602 at hszk.bme.hu  Mon Aug 25 20:29:51 2008
From: uz602 at hszk.bme.hu (Ujhelyi Zoltan)
Date: Mon, 25 Aug 2008 20:29:51 +0200
Subject: [gecode-users] Problem with constraint
In-Reply-To: <27A128D1-93E5-4571-8F9F-EC8774E409AC@ps.uni-sb.de>
References: <7D9CF0A5-AD44-4046-ACDE-8636607C1050@hszk.bme.hu>
	<DCC63351-500C-482E-ABEB-ED18B11277B5@hszk.bme.hu>
	<AC61101E-25D7-4CD5-9A3F-0B2CEF7F3520@ps.uni-sb.de>
	<73D02635-E730-4C4A-A4F1-5A093A362D16@hszk.bme.hu>
	<B177D5F8-40FB-4979-B8D2-CEB9A395320D@ps.uni-sb.de>
	<51A70708-9E16-4841-83C7-57CC52FA45FE@hszk.bme.hu>
	<27A128D1-93E5-4571-8F9F-EC8774E409AC@ps.uni-sb.de>
Message-ID: <C5E84E04-4566-4D99-BC96-652A4AAB4EA1@hszk.bme.hu>

Hello,

I tested the new Gecode/J 2.2.0. I am very grateful for your work, but  
it did not work for me as I expected. I modified the constraints as  
you showed, but it did not prove the required equality.

I copied your code into my sample program to test, but it did not help.

I got the following result with the equality of the two variable:

Variable #1: {0..1,3,5}
Variable #2: [0..5]
Summary:
	runtime:      6
	solutions:    1
   	propagations: 4
	failures:     0
	clones:       0
	commits:      0
	peak memory:  5KB
SS_SOLVED

I attached the my test code. If I changed to post method call (line  
58-59) with the rel constraint (line 60), the result become the  
expected: Gecode was able to prove the equality. I also tried with a  
Boolean Exp
	    BExpr expression = new BExpr(new Expr(new  
Expr(space.variable2).minus(space.variable1)), IRT_EQ,  
0,IntConLevel.ICL_DOM);
	    post(space, expression);
	    //rel(space, space.variable1, IRT_EQ, space.variable2,  
IntConLevel.ICL_DOM);

I used Java 1.6 in a Windows XP 32 bit system, in Eclipse environment.

If you could give me a hint what may I have done wrong, I would be  
very glad. Thank you for your help,
Zolt?n Ujhelyi
-------------- next part --------------
A non-text attachment was scrubbed...
Name: ExprTest.java
Type: application/octet-stream
Size: 1789 bytes
Desc: not available
URL: <http://www.ps.uni-sb.de/pipermail/users/attachments/20080825/f15aa733/attachment.obj>
-------------- next part --------------

On 2008.08.23., at 8:56, Guido Tack wrote:

> Hi!
>
> Please let me know if this is more or less what you wanted to use:
>
> BExpr be = new BExpr(new Expr(new  
> Expr(space.var2).minus(space.var1)), IRT_EQ, 0, ICL_DOM);
>
> The ICL argument is now part of the BExpr, so it means that the  
> linear constraint inside is propagated with ICL_DOM.  I hope that's  
> what you need.  It will be available in Gecode/J 2.2.0 (very  
> probably next week).
>
> Cheers,
> 	Guido
>
> Ujhelyi Zoltan wrote:
>
>> Hello,
>>
>> thank you for your reply.
>>
>> I understand the problem stated here, but I would like to ask whether
>> there is a solution to add a constraint like that to a Boolean
>> Expression with the domain consistent propagation (ICL_DOM).
>>
>> I did not found any possibilities for that looking in the Gecode/J
>> API, but it would help a lot for our project.
>>
>> Thank you,
>> Ujhelyi Zolt?n
>> On 2008.08.11., at 11:34, Guido Tack wrote:
>>
>>> Could you please post to the mailing list? Thanks. Guido
>>>
>>> Am 11.08.2008 um 11:22 schrieb Ujhelyi Zoltan:
>>>
>>>> Hello,
>>>>
>>>> thank you for your reply.
>>>>
>>>> I understand the problem stated here, but I would like to ask
>>>> whether there is a solution to add a constraint like that to a
>>>> Boolen Expression with the domain consistent propagation (ICL_DOM).
>>>>
>>>> I did not found any possibilities for that looking in the Gecode/J
>>>> API, but it would help a lot for our project.
>>>> Thank you,
>>>> Zolt?n Ujhelyi
>>>> On 2008.08.11., at 9:03, Guido Tack wrote:
>>>>
>>>>> Hi.
>>>>>
>>>>> As you've already found out, you have to use domain consistent
>>>>> propagation (ICL_DOM) to get the result you want.  You should be
>>>>> able to use post(space, new Expr(space.variable1), IRT_EQ, new
>>>>> Expr(space.variable2), ICL_DOM) to get the desired result.  I'm
>>>>> not 100% sure, but I think your solution that uses e=variable1-
>>>>> variable2, e=0 doesn't work because only the e=0 is propagated to
>>>>> domain consistency, while e=variable1-variable2 still only
>>>>> achieves bounds consistency.
>>>>>
>>>>> Cheers,
>>>>> 	Guido
>>>>>
>>>>> Ujhelyi Zoltan wrote:
>>>>>
>>>>>> Hello again,
>>>>>>
>>>>>> I have been experimenting with the questions raised in my
>>>>>> previous mail.
>>>>>>
>>>>>> I created a small Gecode space to be able to test the problem  
>>>>>> in a
>>>>>> smaller scale, where I did use two variables (variable1,  
>>>>>> variable2,
>>>>>> both IntVars with the domain {0,5}) and three constraints:
>>>>>> variable1
>>>>>> equals variable2, and variable2 cannot have the values 2 and 4.
>>>>>>
>>>>>> In all of my tests the latter two constraints are described like
>>>>>> that:
>>>>>>
>>>>>> post(space, new BExpr(space.variable1, IRT_NQ, 2));
>>>>>> post(space, new BExpr(space.variable1, IRT_NQ, 4));
>>>>>>
>>>>>> For the third constraint I had several tries. When I was using  
>>>>>> the
>>>>>> rel() clause to write the constraint, I got the expected result:
>>>>>>
>>>>>> Variable #1: {0..1,3,5}
>>>>>> Variable #2: {0..1,3,5}
>>>>>>
>>>>>> But when using a similar construct I would like to use in the
>>>>>> static
>>>>>> verifier, I got no result for the second variable, it can has all
>>>>>> values from it's domain.
>>>>>>
>>>>>> post(space, new BExpr(space.variable1, IRT_EQ, space.variable2));
>>>>>>
>>>>>> Reading about different propagators, I have been able to get the
>>>>>> expected result with the use of the ICL_DOM propagator, but only
>>>>>> if I
>>>>>> was posting the constraint directly, like that:
>>>>>>
>>>>>> post(space, new Expr(space.variable1), IRT_EQ, new
>>>>>> Expr(space.variable2),org.gecode.GecodeEnumConstants.ICL_DOM);
>>>>>>
>>>>>> But if I tried to translate the a BExprs to that form, I did not
>>>>>> succeed:
>>>>>>
>>>>>> 	    Expr expression = new Expr(new
>>>>>> Expr(space.variable2).minus(space.variable1));
>>>>>> 	    post(space, new Expr(expression), IRT_EQ, 0,
>>>>>> org.gecode.GecodeEnumConstants.ICL_DOM);
>>>>>>
>>>>>> Can you tell me a way how to enable this strong ICL_DOM  
>>>>>> propagators
>>>>>> meanwhile using the BExpr form, if it is possible? It would help
>>>>>> our
>>>>>> project a lot, it would simplify it's code.
>>>>>>
>>>>>> Thank you for your help,
>>>>>> Zolt?n Ujhelyi
>>>>>> On 2008.08.09., at 18:30, Ujhelyi Zoltan wrote:
>>>>>>
>>>>>>> Hello all,
>>>>>>>
>>>>>>> we are currently trying to build a static checker system on  
>>>>>>> top of
>>>>>>> Gecode/J 2.1.1. (in an Eclipse environment), and we have found  
>>>>>>> an
>>>>>>> interesting case.
>>>>>>>
>>>>>>> In order to allow us greater flexibility we try to use the
>>>>>>> Expression
>>>>>>> API (it allows us to build constraints in a hierarchical  
>>>>>>> manner).
>>>>>>>
>>>>>>> I was testing the implementation, and found an interesting final
>>>>>>> result: there were to IntVars, which were supposed to be the
>>>>>>> same, did
>>>>>>> not have the same final ranges: one of them had {2,4}, but the
>>>>>>> other
>>>>>>> had {2,3,4}. I tried to trace back the code to look whether the
>>>>>>> constraints were wrong or not, and found the following  
>>>>>>> expression
>>>>>>> building term:
>>>>>>>
>>>>>>> BExpr expression = new BExpr(new Expr(variable1),relation, new
>>>>>>> Expr(variable2));
>>>>>>>
>>>>>>> Tracing the variables variable1 was a new variable, it hadn't  
>>>>>>> been
>>>>>>> constrained yet, while variable2's domain had been limited to  
>>>>>>> the
>>>>>>> values 2 and 4 (and they were the variables mentioned before in
>>>>>>> this
>>>>>>> letter), while the relation had the value IRT_EQ.
>>>>>>>
>>>>>>> I tried a post of the expression right after it's construction
>>>>>>> to see
>>>>>>> whether it helps or not:
>>>>>>> org.gecode.Gecode.post(space, expression);
>>>>>>>
>>>>>>> It did not solve the problem, but when I replaced the post
>>>>>>> method to
>>>>>>> the following rel call, the constraint handling was working as I
>>>>>>> expected it before.
>>>>>>>
>>>>>>> rel(space, variable1, IntRelType.IRT_EQ, variable2);
>>>>>>>
>>>>>>> I would like to know, whether this phenomenon is the intentional
>>>>>>> (maybe I do not understand something under the hood), or not.
>>>>>>> And if
>>>>>>> you could tell me a way to avoid it, I would be very glad.
>>>>>>>
>>>>>>> Thank you very much in advance for your help,
>>>>>>> Zolt?n Ujhelyi
>>>>>>> _______________________________________________
>>>>>>> Gecode users mailing list
>>>>>>> users at gecode.org
>>>>>>> https://www.gecode.org/mailman/listinfo/gecode-users
>>>>>>
>>>>>>
>>>>>> _______________________________________________
>>>>>> Gecode users mailing list
>>>>>> users at gecode.org
>>>>>> https://www.gecode.org/mailman/listinfo/gecode-users
>>>>>
>>>>
>>>
>>
>>
>> _______________________________________________
>> Gecode users mailing list
>> users at gecode.org
>> https://www.gecode.org/mailman/listinfo/gecode-users
>


From cschulte at kth.se  Mon Aug 25 20:53:13 2008
From: cschulte at kth.se (Christian Schulte)
Date: Mon, 25 Aug 2008 20:53:13 +0200
Subject: [gecode-users] How to use Gecode binaries from within MSVC's IDE
In-Reply-To: <48B2CF13.5010008@logis.cz>
References: <008701c906c0$9ddc2e70$d9948b50$@se> <g8uhjn$tnb$1@ger.gmane.org>
	<008d01c906c4$de61fc50$9b25f4f0$@se> <48B2CF13.5010008@logis.cz>
Message-ID: <002901c906e3$d48f1720$7dad4560$@se>

The truly bizarre aspect of all this mess is that whatever we build on the commandline works totally fine (I also use 2008 SP1).

Only when the MSVC IDE links against the dlls we built on the commandline, things go wrong. And then, of course, I started to wade through all the macros that the MSVC IDE defines (let me not get started about how well they are documented...). So far, no luck. (Not to mention that when we build on the commandline with _UNICODE and UNICODE defined -- yes, of course, one would have to define both: isn't that crystal clear and goes without further explanation, so please, we really don't need any documentation on this -- things go bang as well).

So there is no bug in Gecode, it is that we not yet have found the right voodoo or incantation to have our dlls appreciated by MSVC and to have Unicode working...

I'll keep you guys posted.

Cheers
Christian

-----Original Message-----
From: Filip Konvi?ka [mailto:filip.konvicka at logis.cz] 
Sent: Monday, August 25, 2008 5:26 PM
To: Christian Schulte
Cc: users at gecode.org
Subject: Re: [gecode-users] How to use Gecode binaries from within MSVC's IDE


> First, the "fix" I just send does not fix the problem... It does for me but
> not for Jan.
>
> The crashes are totally bizarre, as far as the debugger tells the crash
> occurs right in the heart of copying... That's close to impossible as Gecode
> does not use char there...
>
Well, if someone overwrites memory somewhere else, anything can occur...
> I'll have a closer look tomorrow (my problem is that I know very little
> about MSVC's IDE and hoped that I could get away with that). I'll try the
> voodoo you suggest.
>
This almighty cure is mainly for solving issues with wstringstream and
std::wcin/std::wcout, but who knows, it saved me a lot of trouble already.
> Maybe, you still use MSVC 2005?
>
I already have MSVC 2008 SP1. All Gecode scripts I'm running now use
UNICODE and no crashes occur (even with my FloatVars :-)). However, one
thing on my TODO list is investigating this: when I break the execution
somewhere and inspect the variables (like FloatVarImp or IntVarImp), the
'home' pointer inside all variables is set to '0xBAADF00D', which is a
little scary. You know, everything seems to work, but it's creepy. So
far I thought that maybe I miscompiled Gecode somehow...

Cheers,
Filip





From tack at ps.uni-sb.de  Mon Aug 25 21:48:11 2008
From: tack at ps.uni-sb.de (Guido Tack)
Date: Mon, 25 Aug 2008 21:48:11 +0200
Subject: [gecode-users] Problem with constraint
In-Reply-To: <C5E84E04-4566-4D99-BC96-652A4AAB4EA1@hszk.bme.hu>
References: <7D9CF0A5-AD44-4046-ACDE-8636607C1050@hszk.bme.hu>
	<DCC63351-500C-482E-ABEB-ED18B11277B5@hszk.bme.hu>
	<AC61101E-25D7-4CD5-9A3F-0B2CEF7F3520@ps.uni-sb.de>
	<73D02635-E730-4C4A-A4F1-5A093A362D16@hszk.bme.hu>
	<B177D5F8-40FB-4979-B8D2-CEB9A395320D@ps.uni-sb.de>
	<51A70708-9E16-4841-83C7-57CC52FA45FE@hszk.bme.hu>
	<27A128D1-93E5-4571-8F9F-EC8774E409AC@ps.uni-sb.de>
	<C5E84E04-4566-4D99-BC96-652A4AAB4EA1@hszk.bme.hu>
Message-ID: <EEEEC4B2-F626-46E7-A7FF-349D15B4D814@ps.uni-sb.de>

Ujhelyi Zoltan wrote:
> I tested the new Gecode/J 2.2.0. I am very grateful for your work,  
> but it did not work for me as I expected. I modified the constraints  
> as you showed, but it did not prove the required equality.

I had another look, and unfortunately, we cannot provide stronger  
pruning for BExprs at the moment.  The technical explanation is that  
Exprs are translated to linear constraints, and there just is no  
ICL_DOM for reified linear constraints.  I just added the arguments,  
but didn't realize that the actual pruning wouldn't happen.

The only workaround is currently to post the reified constraints  
directly, sorry.

Cheers,
	Guido




From uz602 at hszk.bme.hu  Mon Aug 25 22:40:31 2008
From: uz602 at hszk.bme.hu (Ujhelyi Zoltan)
Date: Mon, 25 Aug 2008 22:40:31 +0200
Subject: [gecode-users] Problem with constraint
In-Reply-To: <EEEEC4B2-F626-46E7-A7FF-349D15B4D814@ps.uni-sb.de>
References: <7D9CF0A5-AD44-4046-ACDE-8636607C1050@hszk.bme.hu>
	<DCC63351-500C-482E-ABEB-ED18B11277B5@hszk.bme.hu>
	<AC61101E-25D7-4CD5-9A3F-0B2CEF7F3520@ps.uni-sb.de>
	<73D02635-E730-4C4A-A4F1-5A093A362D16@hszk.bme.hu>
	<B177D5F8-40FB-4979-B8D2-CEB9A395320D@ps.uni-sb.de>
	<51A70708-9E16-4841-83C7-57CC52FA45FE@hszk.bme.hu>
	<27A128D1-93E5-4571-8F9F-EC8774E409AC@ps.uni-sb.de>
	<C5E84E04-4566-4D99-BC96-652A4AAB4EA1@hszk.bme.hu>
	<EEEEC4B2-F626-46E7-A7FF-349D15B4D814@ps.uni-sb.de>
Message-ID: <90F15C8F-30C1-470D-A246-1549867E9131@hszk.bme.hu>

Ok, I see.

Thank you for looking into the problem,

Zoli
On 2008.08.25., at 21:48, Guido Tack wrote:

> Ujhelyi Zoltan wrote:
>> I tested the new Gecode/J 2.2.0. I am very grateful for your work,  
>> but it did not work for me as I expected. I modified the  
>> constraints as you showed, but it did not prove the required  
>> equality.
>
> I had another look, and unfortunately, we cannot provide stronger  
> pruning for BExprs at the moment.  The technical explanation is that  
> Exprs are translated to linear constraints, and there just is no  
> ICL_DOM for reified linear constraints.  I just added the arguments,  
> but didn't realize that the actual pruning wouldn't happen.
>
> The only workaround is currently to post the reified constraints  
> directly, sorry.
>
> Cheers,
> 	Guido
>




From filip.konvicka at logis.cz  Mon Aug 25 23:43:01 2008
From: filip.konvicka at logis.cz (=?UTF-8?B?RmlsaXAgS29udmnEjWth?=)
Date: Mon, 25 Aug 2008 23:43:01 +0200
Subject: [gecode-users] How to use Gecode binaries from within MSVC's IDE
In-Reply-To: <48B2CF13.5010008@logis.cz>
References: <008701c906c0$9ddc2e70$d9948b50$@se> <g8uhjn$tnb$1@ger.gmane.org>
	<008d01c906c4$de61fc50$9b25f4f0$@se> <48B2CF13.5010008@logis.cz>
Message-ID: <48B32765.7010409@logis.cz>

 
> However, one thing on my TODO list is investigating this: when I break 
> the execution somewhere and inspect the variables (like FloatVarImp or 
> IntVarImp), the 'home' pointer inside all variables is set to 
> '0xBAADF00D', which is a little scary. You know, everything seems to 
> work, but it's creepy. So far I thought that maybe I miscompiled 
> Gecode somehow...

Well, at least this mystery is solved, I had an unnecessary "Space* 
home" pointer in my FloatVarImp, don't know why, perhaps some remnants 
of the evil copy&paste operation....

As for cmdline vs. IDE build, I just always remember the Boost guys 
telling everyone to compile Boost with the same flags as their programs 
that they want to link Boost with.

F.




From filip.konvicka at logis.cz  Tue Aug 26 07:27:20 2008
From: filip.konvicka at logis.cz (=?UTF-8?B?RmlsaXAgS29udmnEjWth?=)
Date: Tue, 26 Aug 2008 07:27:20 +0200
Subject: [gecode-users] [Gecode-announce] Gecode 2.2.0, Gecode/J 2.2.0,
 Gecode/FlatZinc 1.3 released
In-Reply-To: <E07FFA67-BCA3-4407-8B2D-A01357B0DD9F@ps.uni-sb.de>
References: <E07FFA67-BCA3-4407-8B2D-A01357B0DD9F@ps.uni-sb.de>
Message-ID: <g90487$edj$1@ger.gmane.org>

> The complete changelog is available at http://www.gecode.org/gecode-doc-latest/PageChanges_2_2_0.html

The first thing to catch my eye was DDS, but I have not found anything 
related to it in the docs. Where should I look?

Thanks,
Filip




From tack at ps.uni-sb.de  Tue Aug 26 07:39:28 2008
From: tack at ps.uni-sb.de (Guido Tack)
Date: Tue, 26 Aug 2008 07:39:28 +0200
Subject: [gecode-users] [Gecode-announce] Gecode 2.2.0, Gecode/J 2.2.0,
	Gecode/FlatZinc 1.3 released
In-Reply-To: <g90487$edj$1@ger.gmane.org>
References: <E07FFA67-BCA3-4407-8B2D-A01357B0DD9F@ps.uni-sb.de>
	<g90487$edj$1@ger.gmane.org>
Message-ID: <E90BB0B5-3990-42D1-A643-56F2F61BCD39@ps.uni-sb.de>

Filip Konvi?ka wrote:

>> The complete changelog is available at http://www.gecode.org/gecode-doc-latest/PageChanges_2_2_0.html
>
> The first thing to catch my eye was DDS, but I have not found anything
> related to it in the docs. Where should I look?

I'm sorry for the confusion, but that entry got into the 2.2.0  
changelog by mistake.  DDS will only be available in Gecode 3, and is  
already available in the trunk (although I'm not 100% sure that it  
works right now, as there were major changes in the trunk that DDS  
potentially hasn't been fully adapted to yet).  I'll remove it from  
the online changelog.

Cheers,
	Guido

-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 2436 bytes
Desc: not available
URL: <http://www.ps.uni-sb.de/pipermail/users/attachments/20080826/94a3b2ae/attachment.bin>

From filip.konvicka at logis.cz  Tue Aug 26 07:42:31 2008
From: filip.konvicka at logis.cz (=?UTF-8?B?RmlsaXAgS29udmnEjWth?=)
Date: Tue, 26 Aug 2008 07:42:31 +0200
Subject: [gecode-users] [Gecode-announce] Gecode 2.2.0, Gecode/J 2.2.0,
 Gecode/FlatZinc 1.3 released
In-Reply-To: <E90BB0B5-3990-42D1-A643-56F2F61BCD39@ps.uni-sb.de>
References: <E07FFA67-BCA3-4407-8B2D-A01357B0DD9F@ps.uni-sb.de>
	<g90487$edj$1@ger.gmane.org>
	<E90BB0B5-3990-42D1-A643-56F2F61BCD39@ps.uni-sb.de>
Message-ID: <48B397C7.10707@logis.cz>


>>
>> The first thing to catch my eye was DDS, but I have not found anything
>> related to it in the docs. Where should I look?
>
> I'm sorry for the confusion, but that entry got into the 2.2.0 
> changelog by mistake.  DDS will only be available in Gecode 3, and is 
> already available in the trunk (although I'm not 100% sure that it 
> works right now, as there were major changes in the trunk that DDS 
> potentially hasn't been fully adapted to yet).  I'll remove it from 
> the online changelog.

I thought so :-) Never mind, it is a good teaser that will probably make 
me finally take a look at the trunk :-)

Thanks,
Filip




From mmann at informatik.uni-freiburg.de  Tue Aug 26 10:55:41 2008
From: mmann at informatik.uni-freiburg.de (Martin Mann)
Date: Tue, 26 Aug 2008 10:55:41 +0200
Subject: [gecode-users] [Gecode-announce] Gecode 2.2.0, Gecode/J 2.2.0,
 Gecode/FlatZinc 1.3 released
In-Reply-To: <E90BB0B5-3990-42D1-A643-56F2F61BCD39@ps.uni-sb.de>
References: <E07FFA67-BCA3-4407-8B2D-A01357B0DD9F@ps.uni-sb.de>	<g90487$edj$1@ger.gmane.org>
	<E90BB0B5-3990-42D1-A643-56F2F61BCD39@ps.uni-sb.de>
Message-ID: <48B3C50D.3090209@informatik.uni-freiburg.de>

>>> The complete changelog is available at 
>>> http://www.gecode.org/gecode-doc-latest/PageChanges_2_2_0.html
>>
>> The first thing to catch my eye was DDS, but I have not found anything
>> related to it in the docs. Where should I look?
> 
> I'm sorry for the confusion, but that entry got into the 2.2.0 changelog 
> by mistake.  DDS will only be available in Gecode 3, and is already 
> available in the trunk (although I'm not 100% sure that it works right 
> now, as there were major changes in the trunk that DDS potentially 
> hasn't been fully adapted to yet).  I'll remove it from the online 
> changelog.

:( what a pitty! Even if it sounds strange to ask this while the newest 
version was announced, but any vague guess about 3.0.0 release?

Because I have to update my application source (currently using gecode 
1.*) for a newer gecode version and I would like to take advantage of 
DDS. So it's the question if to port to 2.2.* and some month later to 
3.* or if the release of 3.* is not too far away such that I wait for 
that...

Any light at the end of the tunnel? ;)

Thanks a lot,

Martin


-- 
Martin Mann, Dipl. Bioinf.
Bioinformatics - Inst. of Computer Science
Albert-Ludwigs-University Freiburg
Tel: ++49-761-203-8259
Fax: ++49-761-203-7462
http://www.bioinf.uni-freiburg.de/~mmann/



From cschulte at kth.se  Tue Aug 26 11:33:46 2008
From: cschulte at kth.se (Christian Schulte)
Date: Tue, 26 Aug 2008 11:33:46 +0200
Subject: [gecode-users] [Gecode-announce] Gecode 2.2.0, Gecode/J 2.2.0,
	Gecode/FlatZinc 1.3 released
In-Reply-To: <48B3C50D.3090209@informatik.uni-freiburg.de>
References: <E07FFA67-BCA3-4407-8B2D-A01357B0DD9F@ps.uni-sb.de>	<g90487$edj$1@ger.gmane.org>	<E90BB0B5-3990-42D1-A643-56F2F61BCD39@ps.uni-sb.de>
	<48B3C50D.3090209@informatik.uni-freiburg.de>
Message-ID: <000e01c9075e$d6948e30$83bdaa90$@se>

Martin,

I'll write a little later a summary of the discussion that happened here on
3.0 and what is done and what still needs to be done. Please do not expect
the summary before end of the week.

Cheers
Christian

--
Christian Schulte, www.ict.kth.se/~cschulte/


-----Original Message-----
From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf
Of Martin Mann
Sent: Tuesday, August 26, 2008 10:56 AM
To: users at gecode.org
Subject: Re: [gecode-users] [Gecode-announce] Gecode 2.2.0, Gecode/J 2.2.0,
Gecode/FlatZinc 1.3 released

>>> The complete changelog is available at
>>> http://www.gecode.org/gecode-doc-latest/PageChanges_2_2_0.html
>>
>> The first thing to catch my eye was DDS, but I have not found anything
>> related to it in the docs. Where should I look?
>
> I'm sorry for the confusion, but that entry got into the 2.2.0 changelog
> by mistake.  DDS will only be available in Gecode 3, and is already
> available in the trunk (although I'm not 100% sure that it works right
> now, as there were major changes in the trunk that DDS potentially
> hasn't been fully adapted to yet).  I'll remove it from the online
> changelog.

:( what a pitty! Even if it sounds strange to ask this while the newest
version was announced, but any vague guess about 3.0.0 release?

Because I have to update my application source (currently using gecode
1.*) for a newer gecode version and I would like to take advantage of
DDS. So it's the question if to port to 2.2.* and some month later to
3.* or if the release of 3.* is not too far away such that I wait for
that...

Any light at the end of the tunnel? ;)

Thanks a lot,

Martin


--
Martin Mann, Dipl. Bioinf.
Bioinformatics - Inst. of Computer Science
Albert-Ludwigs-University Freiburg
Tel: ++49-761-203-8259
Fax: ++49-761-203-7462
http://www.bioinf.uni-freiburg.de/~mmann/

_______________________________________________
Gecode users mailing list
users at gecode.org
https://www.gecode.org/mailman/listinfo/gecode-users




From cschulte at kth.se  Tue Aug 26 15:07:17 2008
From: cschulte at kth.se (Christian Schulte)
Date: Tue, 26 Aug 2008 15:07:17 +0200
Subject: [gecode-users] Gecode 3.0.0: What we will do. What do you want?
In-Reply-To: <003101c8d6dd$8af3d050$a0db70f0$@se>
References: <003101c8d6dd$8af3d050$a0db70f0$@se>
Message-ID: <008401c9077c$ae1b65a0$0a5230e0$@se>

Dear all,

as promised a short update on 3.0 with another release date estimate:
 - complete rework of branching: with randomization and tie-breaking (done)
 - abstractions for cost-based optimization (done)
 - parallel search (still not integrated) [*]
 - stable version of Gist as an interactive search tool (almost done)
 - decomposition-based search (done but not adopted to 3.0)
 - entirely new memory management (done)
 - become more C++ compatible: references instead of pointers, standard
filenames (done) 
 - re-optimized crucial abstractions for 64 bit (done)
 - revamp of reflection (missing)
 - possibility to define solution variables (missing)

>From our users wish-list:
 - support for non-monotonic propagators (done)
 - clause constraint (done)
 - integration of float vars (under discussion, thanks to Filip Konvi?ka)
[*]
 - efficient reified linear propagators over Booleans (under construction,
thanks to Tias Gun) [*]

Those marked with an asterisk [*] are collaborations or third-party
contributions. Given that these work out in time, we stick to our original
timeplan (as we did for Gecode 2.2.0): late autumn...

All the best
Christian on behalf of the Gecode team

--
Christian Schulte, www.ict.kth.se/~cschulte/






From mmann at informatik.uni-freiburg.de  Tue Aug 26 16:55:59 2008
From: mmann at informatik.uni-freiburg.de (Martin Mann)
Date: Tue, 26 Aug 2008 16:55:59 +0200
Subject: [gecode-users] Gecode 3.0.0: What we will do. What do you want?
In-Reply-To: <008401c9077c$ae1b65a0$0a5230e0$@se>
References: <003101c8d6dd$8af3d050$a0db70f0$@se>
	<008401c9077c$ae1b65a0$0a5230e0$@se>
Message-ID: <48B4197F.8040308@informatik.uni-freiburg.de>


Only one comment:

nice, nice, nice ... ;)

Thanks a lot!

Martin


Christian Schulte schrieb:
> Dear all,
> 
> as promised a short update on 3.0 with another release date estimate:
>  - complete rework of branching: with randomization and tie-breaking (done)
>  - abstractions for cost-based optimization (done)
>  - parallel search (still not integrated) [*]
>  - stable version of Gist as an interactive search tool (almost done)
>  - decomposition-based search (done but not adopted to 3.0)
>  - entirely new memory management (done)
>  - become more C++ compatible: references instead of pointers, standard
> filenames (done) 
>  - re-optimized crucial abstractions for 64 bit (done)
>  - revamp of reflection (missing)
>  - possibility to define solution variables (missing)
> 
>>From our users wish-list:
>  - support for non-monotonic propagators (done)
>  - clause constraint (done)
>  - integration of float vars (under discussion, thanks to Filip Konvi?ka)
> [*]
>  - efficient reified linear propagators over Booleans (under construction,
> thanks to Tias Gun) [*]
> 
> Those marked with an asterisk [*] are collaborations or third-party
> contributions. Given that these work out in time, we stick to our original
> timeplan (as we did for Gecode 2.2.0): late autumn...
> 
> All the best
> Christian on behalf of the Gecode team
> 
> --
> Christian Schulte, www.ict.kth.se/~cschulte/
> 

-- 
Martin Mann, Dipl. Bioinf.
Bioinformatics - Inst. of Computer Science
Albert-Ludwigs-University Freiburg
Tel: ++49-761-203-8259
Fax: ++49-761-203-7462
http://www.bioinf.uni-freiburg.de/~mmann/



From kelbelj at fel.cvut.cz  Tue Aug 26 17:26:29 2008
From: kelbelj at fel.cvut.cz (Jan Kelbel)
Date: Tue, 26 Aug 2008 17:26:29 +0200
Subject: [gecode-users] edge-finder propagator -- problem solved
In-Reply-To: <g8mie7$mv5$1@ger.gmane.org>
References: <48AC18F0.5090306@fel.cvut.cz>	<009201c90392$55e06e50$01a14af0$@se>	<48AD7A91.30100@fel.cvut.cz>	<48AE5ED3.5000007@logis.cz>
	<48AEC6F7.1010101@fel.cvut.cz> <g8mie7$mv5$1@ger.gmane.org>
Message-ID: <48B420A5.8010900@fel.cvut.cz>

Hi,

finally, I found out the bug in our edge-finder propagator code -- in 
the propagation algorithm, that we previously checked more than once.
In file EdgeFinder.cpp, line 68, there should be:
	if((( tasks[i].start.min() + P + tasks[i].processingTime )) >
	   tasks[k].start.max() + tasks[k].processingTime ){ //line 21
instead of
	if((( tasks[i].start.min() + P + tasks[i].processingTime )) >
	   tasks[k].start.max() ){ //line 21

i.e. "+ tasks[k].processingTime" was missing.
For now, it computes Cmax of FT6 jobshop benchmark correctly, so we need 
to make more testing.

I forgot to mention, the edge-finder propagator I posted here only finds 
activities that should be first (so it is only half of the edge-finder).

Thanks for all your comments,
Jan

Filip Konvi?ka napsal(a):
> Hi Jan,
> 
>> The implementation of the O(n^2) edge-finder of [Baptiste,Le Pape, 
>> Nuijten] seemed to us easier to implement than the O(n log n) algorithm 
>> of Vilim, which uses binary trees.
>> So we chose the O(n^2), as it was the first propagator we were implementing.
>>
>> Maybe we should try to implement that O(n log n) version.
> 
> The binary trees are easy - implement them using vectors: compute the 
> next larger power of two (N), make a vector of N*2-1 items, the tree 
> leaves start at index N-1, parent node of node I is (I-1)/2.
> 
> In fact, efficient computation of the next power of two is what I can 
> share with you because it is already part of the FloatVar implementation 
> I posted earlier today: it is in float/float/bi/prop_linear.icc, look 
> for "namespace __Utils".
> 
> Theta-lambda trees are usable not just for propagators, but also for 
> branchings (you can easily compute firsts/lasts using theta-lambda trees).
> 
> Hope this helps,
> Filip
> 
> 
> _______________________________________________
> Gecode users mailing list
> users at gecode.org
> https://www.gecode.org/mailman/listinfo/gecode-users




From cschulte at kth.se  Tue Aug 26 17:51:37 2008
From: cschulte at kth.se (Christian Schulte)
Date: Tue, 26 Aug 2008 17:51:37 +0200
Subject: [gecode-users] edge-finder propagator -- problem solved
In-Reply-To: <48B420A5.8010900@fel.cvut.cz>
References: <48AC18F0.5090306@fel.cvut.cz>	<009201c90392$55e06e50$01a14af0$@se>	<48AD7A91.30100@fel.cvut.cz>	<48AE5ED3.5000007@logis.cz>	<48AEC6F7.1010101@fel.cvut.cz>
	<g8mie7$mv5$1@ger.gmane.org> <48B420A5.8010900@fel.cvut.cz>
Message-ID: <000001c90793$9ffd62e0$dff828a0$@se>

Dear Jan,

What I meant to ask but forgot: do you consider contributing your edge-finder to Gecode?

Cheers
Christian

PS: No luck so-far with the IDE madness. The problem is not UNICODE, though...

PPS: I am always relieved if a problem solves "itself" (from our perspective), so that we are not to blame ;-)

-----Original Message-----
From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf Of Jan Kelbel
Sent: Tuesday, August 26, 2008 5:26 PM
To: Filip Konvi?ka; users at gecode.org
Subject: Re: [gecode-users] edge-finder propagator -- problem solved

Hi,

finally, I found out the bug in our edge-finder propagator code -- in
the propagation algorithm, that we previously checked more than once.
In file EdgeFinder.cpp, line 68, there should be:
        if((( tasks[i].start.min() + P + tasks[i].processingTime )) >
           tasks[k].start.max() + tasks[k].processingTime ){ //line 21
instead of
        if((( tasks[i].start.min() + P + tasks[i].processingTime )) >
           tasks[k].start.max() ){ //line 21

i.e. "+ tasks[k].processingTime" was missing.
For now, it computes Cmax of FT6 jobshop benchmark correctly, so we need
to make more testing.

I forgot to mention, the edge-finder propagator I posted here only finds
activities that should be first (so it is only half of the edge-finder).

Thanks for all your comments,
Jan

Filip Konvi?ka napsal(a):
> Hi Jan,
>
>> The implementation of the O(n^2) edge-finder of [Baptiste,Le Pape,
>> Nuijten] seemed to us easier to implement than the O(n log n) algorithm
>> of Vilim, which uses binary trees.
>> So we chose the O(n^2), as it was the first propagator we were implementing.
>>
>> Maybe we should try to implement that O(n log n) version.
>
> The binary trees are easy - implement them using vectors: compute the
> next larger power of two (N), make a vector of N*2-1 items, the tree
> leaves start at index N-1, parent node of node I is (I-1)/2.
>
> In fact, efficient computation of the next power of two is what I can
> share with you because it is already part of the FloatVar implementation
> I posted earlier today: it is in float/float/bi/prop_linear.icc, look
> for "namespace __Utils".
>
> Theta-lambda trees are usable not just for propagators, but also for
> branchings (you can easily compute firsts/lasts using theta-lambda trees).
>
> Hope this helps,
> Filip
>
>
> _______________________________________________
> Gecode users mailing list
> users at gecode.org
> https://www.gecode.org/mailman/listinfo/gecode-users


_______________________________________________
Gecode users mailing list
users at gecode.org
https://www.gecode.org/mailman/listinfo/gecode-users




From kelbelj at fel.cvut.cz  Tue Aug 26 18:37:41 2008
From: kelbelj at fel.cvut.cz (Jan Kelbel)
Date: Tue, 26 Aug 2008 18:37:41 +0200
Subject: [gecode-users] edge-finder propagator -- problem solved
In-Reply-To: <000001c90793$9ffd62e0$dff828a0$@se>
References: <48AC18F0.5090306@fel.cvut.cz>	<009201c90392$55e06e50$01a14af0$@se>	<48AD7A91.30100@fel.cvut.cz>	<48AE5ED3.5000007@logis.cz>	<48AEC6F7.1010101@fel.cvut.cz>
	<g8mie7$mv5$1@ger.gmane.org> <48B420A5.8010900@fel.cvut.cz>
	<000001c90793$9ffd62e0$dff828a0$@se>
Message-ID: <48B43155.7070902@fel.cvut.cz>

Dear Christian,

yes, I am considering to contribute to Gecode. However, I do not know, 
when the propagator will be ready.

Cheers
Jan

Christian Schulte napsal(a):
> Dear Jan,
> 
> What I meant to ask but forgot: do you consider contributing your edge-finder to Gecode?
> 
> Cheers
> Christian
> 
> PS: No luck so-far with the IDE madness. The problem is not UNICODE, though...
> 
> PPS: I am always relieved if a problem solves "itself" (from our perspective), so that we are not to blame ;-)
> 
> -----Original Message-----
> From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf Of Jan Kelbel
> Sent: Tuesday, August 26, 2008 5:26 PM
> To: Filip Konvi?ka; users at gecode.org
> Subject: Re: [gecode-users] edge-finder propagator -- problem solved
> 
> Hi,
> 
> finally, I found out the bug in our edge-finder propagator code -- in
> the propagation algorithm, that we previously checked more than once.
> In file EdgeFinder.cpp, line 68, there should be:
>         if((( tasks[i].start.min() + P + tasks[i].processingTime )) >
>            tasks[k].start.max() + tasks[k].processingTime ){ //line 21
> instead of
>         if((( tasks[i].start.min() + P + tasks[i].processingTime )) >
>            tasks[k].start.max() ){ //line 21
> 
> i.e. "+ tasks[k].processingTime" was missing.
> For now, it computes Cmax of FT6 jobshop benchmark correctly, so we need
> to make more testing.
> 
> I forgot to mention, the edge-finder propagator I posted here only finds
> activities that should be first (so it is only half of the edge-finder).
> 
> Thanks for all your comments,
> Jan
> 
> Filip Konvi?ka napsal(a):
>> Hi Jan,
>>
>>> The implementation of the O(n^2) edge-finder of [Baptiste,Le Pape,
>>> Nuijten] seemed to us easier to implement than the O(n log n) algorithm
>>> of Vilim, which uses binary trees.
>>> So we chose the O(n^2), as it was the first propagator we were implementing.
>>>
>>> Maybe we should try to implement that O(n log n) version.
>> The binary trees are easy - implement them using vectors: compute the
>> next larger power of two (N), make a vector of N*2-1 items, the tree
>> leaves start at index N-1, parent node of node I is (I-1)/2.
>>
>> In fact, efficient computation of the next power of two is what I can
>> share with you because it is already part of the FloatVar implementation
>> I posted earlier today: it is in float/float/bi/prop_linear.icc, look
>> for "namespace __Utils".
>>
>> Theta-lambda trees are usable not just for propagators, but also for
>> branchings (you can easily compute firsts/lasts using theta-lambda trees).
>>
>> Hope this helps,
>> Filip
>>
>>
>> _______________________________________________
>> Gecode users mailing list
>> users at gecode.org
>> https://www.gecode.org/mailman/listinfo/gecode-users
> 
> 
> _______________________________________________
> Gecode users mailing list
> users at gecode.org
> https://www.gecode.org/mailman/listinfo/gecode-users
> 




From ggutierrez at atlas.puj.edu.co  Wed Aug 27 10:56:12 2008
From: ggutierrez at atlas.puj.edu.co (Gustavo Gutierrez)
Date: Wed, 27 Aug 2008 10:56:12 +0200
Subject: [gecode-users] Memory problem
Message-ID: <e7b0e5a40808270156v7a5dc0bj29e8e547a693dc02@mail.gmail.com>

Hi All,

Some time ago someone reported an strange memory behavior in mac os x on the
gecode list. I do not know whether it was fixed but i think it still remains
in the current implementation. The problem apparently happens only in mac os
x. You can get it by replacing the main function of the queens example to
this one:

int
main(int argc, char* argv[]) {

  SizeOptions opt("Queens");
  opt.iterations(500);
  opt.size(100);
  opt.propagation(Queens::PROP_DISTINCT);
  opt.propagation(Queens::PROP_BINARY, "binary",
                      "only binary disequality constraints");
  opt.propagation(Queens::PROP_MIXED, "mixed",
                      "single distinct and binary disequality constraints");
  opt.propagation(Queens::PROP_DISTINCT, "distinct",
                      "three distinct constraints");
  opt.parse(argc,argv);
  /*
  Example::run<Queens,DFS,SizeOptions>(opt);
  */
  std::vector<Queens*> q;
  for (unsigned int i=0; i < 100000; i++) {
    q.push_back(new Queens(opt));
  }
  std::cout << "finished insertion" << std::endl;

  for (unsigned int i=0; i < 100000; i++) {
    Queens *tmp = q[i];
    delete tmp;
    q.pop_back();
  }
  std::cout << "finished delete" << std::endl;

  int a;
  std::cin >> a;
  return 0;
}

The idea is to create a lot of spaces and to keep pointer to them in an
array. After the creation all spaces are deleted. The expected behavior is
to release all the memory allocated in the first loop and to have it
available by the operating system. I tried in a mac os x running leopard and
the memory seems to be still used by the process (according to Activity
Monitor). In a linux machine the memory seems to be released according to
top.

Another thing is that when using the gecode trunk to try the same problem,
the de-allocation behaves better, that is, half of the memory is released
but still some memory is kept by the process.

Do you have any suggestion on how to work around this?

Regards,
-- 
Gustavo Gutierrez
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.ps.uni-sb.de/pipermail/users/attachments/20080827/bd1ac949/attachment.htm>

From cschulte at kth.se  Wed Aug 27 11:10:37 2008
From: cschulte at kth.se (Christian Schulte)
Date: Wed, 27 Aug 2008 11:10:37 +0200
Subject: [gecode-users] Memory problem
In-Reply-To: <e7b0e5a40808270156v7a5dc0bj29e8e547a693dc02@mail.gmail.com>
References: <e7b0e5a40808270156v7a5dc0bj29e8e547a693dc02@mail.gmail.com>
Message-ID: <004301c90824$c662fa30$5328ee90$@se>

That is really beyond our control: apparently the memory management is Mac OS is not very sophisticated (which does not come as a surprise to me).

 

While I fail to see the practical relevance of your example there is an experiment what you could do: you allocate the spaces in the same order as you deallocate them. Try and see what happens if you deallocate the spaces in inverse order. That is, run the deallocation loop backwards so that the space allocated last gets deleted first.

 

Cheers

Christian

 

--

Christian Schulte, www.ict.kth.se/~cschulte/

 

From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf Of Gustavo Gutierrez
Sent: Wednesday, August 27, 2008 10:56 AM
To: gecode at gecode.org
Subject: [gecode-users] Memory problem

 

Hi All,

Some time ago someone reported an strange memory behavior in mac os x on the gecode list. I do not know whether it was fixed but i think it still remains in the current implementation. The problem apparently happens only in mac os x. You can get it by replacing the main function of the queens example to this one:

int
main(int argc, char* argv[]) {
  
  SizeOptions opt("Queens");
  opt.iterations(500);
  opt.size(100);
  opt.propagation(Queens::PROP_

DISTINCT);
  opt.propagation(Queens::PROP_BINARY, "binary",
                      "only binary disequality constraints");
  opt.propagation(Queens::PROP_MIXED, "mixed",
                      "single distinct and binary disequality constraints");
  opt.propagation(Queens::PROP_DISTINCT, "distinct",
                      "three distinct constraints");
  opt.parse(argc,argv);
  /*
  Example::run<Queens,DFS,SizeOptions>(opt);
  */
  std::vector<Queens*> q;
  for (unsigned int i=0; i < 100000; i++) {
    q.push_back(new Queens(opt));
  }
  std::cout << "finished insertion" << std::endl;

  for (unsigned int i=0; i < 100000; i++) {
    Queens *tmp = q[i];
    delete tmp;
    q.pop_back();
  }
  std::cout << "finished delete" << std::endl;

  int a;
  std::cin >> a;
  return 0;
}

The idea is to create a lot of spaces and to keep pointer to them in an array. After the creation all spaces are deleted. The expected behavior is to release all the memory allocated in the first loop and to have it available by the operating system. I tried in a mac os x running leopard and the memory seems to be still used by the process (according to Activity Monitor). In a linux machine the memory seems to be released according to top.

Another thing is that when using the gecode trunk to try the same problem, the de-allocation behaves better, that is, half of the memory is released but still some memory is kept by the process.

Do you have any suggestion on how to work around this?


Regards,
-- 
Gustavo Gutierrez

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.ps.uni-sb.de/pipermail/users/attachments/20080827/8642ae34/attachment.htm>

From filip.konvicka at logis.cz  Wed Aug 27 12:58:51 2008
From: filip.konvicka at logis.cz (=?UTF-8?B?RmlsaXAgS29udmnEjWth?=)
Date: Wed, 27 Aug 2008 12:58:51 +0200
Subject: [gecode-users] FloatVars update
Message-ID: <g93c1t$kq5$1@ger.gmane.org>

Dear all,

here is an update of FloatVars for Gecode 2.1.1.

Changelog:

- Basic support for reflection and serialization. This has not been 
tested at all!
- Assignment branching was added. See Gecode::Float::Assign_minmax().
- Some cleanup and small fixes here and there.

As always, you're welcome to experiment with the code, and you're highly 
welcome to ask for help and report bugs! (Anyone who tries to fix a bug 
will be tortured of course.)

Cheers,
Filip
-------------- next part --------------
A non-text attachment was scrubbed...
Name: floatvar-20080827.zip
Type: application/zip
Size: 50390 bytes
Desc: not available
URL: <http://www.ps.uni-sb.de/pipermail/users/attachments/20080827/98265d8d/attachment.zip>

From ggutierrez at atlas.puj.edu.co  Thu Aug 28 07:43:47 2008
From: ggutierrez at atlas.puj.edu.co (Gustavo Gutierrez)
Date: Thu, 28 Aug 2008 07:43:47 +0200
Subject: [gecode-users] Memory problem
In-Reply-To: <004301c90824$c662fa30$5328ee90$@se>
References: <e7b0e5a40808270156v7a5dc0bj29e8e547a693dc02@mail.gmail.com>
	<004301c90824$c662fa30$5328ee90$@se>
Message-ID: <e7b0e5a40808272243t2592afe7jc38f35b6cccd5ba5@mail.gmail.com>

On Wed, Aug 27, 2008 at 11:10 AM, Christian Schulte <cschulte at kth.se> wrote:

>
>
>
> While I fail to see the practical relevance of your example
>
It is not relevant as that, but it shows a problem that happens in our
development of the next mozart release. As you may know we are interested in
having a mozart gecode integration. Well, by doing some benchmarks we
realize that memory consumption is to high for medium size problems. The
idea is simple: we have a linked list of gecode spaces and the garbage
collector needs to traverse it  to see which of them needs to be removed.
Also, after space propagation we check whether the gecode space has resulted
failed to remove it in eagerly (i.e., do not wait for a grabage collector
run).


> there is an experiment what you could do: you allocate the spaces in the
> same order as you deallocate them. Try and see what happens if you
> deallocate the spaces in inverse order. That is, run the deallocation loop
> backwards so that the space allocated last gets deleted first.
>
>
>

After trying the same problem occurs. Is there a way to instrument gecode to
use a different allocator for memory?, i mean, something similar to STL in
which many of the data structures provided take an optional allocator
template parameter.

Regards,
Gustavo

*From:* users-bounces at gecode.org [mailto:users-bounces at gecode.org] *On
> Behalf Of *Gustavo Gutierrez
> *Sent:* Wednesday, August 27, 2008 10:56 AM
> *To:* gecode at gecode.org
> *Subject:* [gecode-users] Memory problem
>
>
>
> Hi All,
>
> Some time ago someone reported an strange memory behavior in mac os x on
> the gecode list. I do not know whether it was fixed but i think it still
> remains in the current implementation. The problem apparently happens only
> in mac os x. You can get it by replacing the main function of the queens
> example to this one:
>
> int
> main(int argc, char* argv[]) {
>
>   SizeOptions opt("Queens");
>   opt.iterations(500);
>   opt.size(100);
>   opt.propagation(Queens::PROP_
>
> DISTINCT);
>   opt.propagation(Queens::PROP_BINARY, "binary",
>                       "only binary disequality constraints");
>   opt.propagation(Queens::PROP_MIXED, "mixed",
>                       "single distinct and binary disequality
> constraints");
>   opt.propagation(Queens::PROP_DISTINCT, "distinct",
>                       "three distinct constraints");
>   opt.parse(argc,argv);
>   /*
>   Example::run<Queens,DFS,SizeOptions>(opt);
>   */
>   std::vector<Queens*> q;
>   for (unsigned int i=0; i < 100000; i++) {
>     q.push_back(new Queens(opt));
>   }
>   std::cout << "finished insertion" << std::endl;
>
>   for (unsigned int i=0; i < 100000; i++) {
>     Queens *tmp = q[i];
>     delete tmp;
>     q.pop_back();
>   }
>   std::cout << "finished delete" << std::endl;
>
>   int a;
>   std::cin >> a;
>   return 0;
> }
>
> The idea is to create a lot of spaces and to keep pointer to them in an
> array. After the creation all spaces are deleted. The expected behavior is
> to release all the memory allocated in the first loop and to have it
> available by the operating system. I tried in a mac os x running leopard and
> the memory seems to be still used by the process (according to Activity
> Monitor). In a linux machine the memory seems to be released according to
> top.
>
> Another thing is that when using the gecode trunk to try the same problem,
> the de-allocation behaves better, that is, half of the memory is released
> but still some memory is kept by the process.
>
> Do you have any suggestion on how to work around this?
>
>
> Regards,
> --
> Gustavo Gutierrez
>



-- 
Gustavo Gutierrez
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.ps.uni-sb.de/pipermail/users/attachments/20080828/4f505391/attachment.htm>

From tack at ps.uni-sb.de  Thu Aug 28 08:20:36 2008
From: tack at ps.uni-sb.de (Guido Tack)
Date: Thu, 28 Aug 2008 08:20:36 +0200
Subject: [gecode-users] Memory problem
In-Reply-To: <e7b0e5a40808272243t2592afe7jc38f35b6cccd5ba5@mail.gmail.com>
References: <e7b0e5a40808270156v7a5dc0bj29e8e547a693dc02@mail.gmail.com>
	<004301c90824$c662fa30$5328ee90$@se>
	<e7b0e5a40808272243t2592afe7jc38f35b6cccd5ba5@mail.gmail.com>
Message-ID: <625F777B-3B3C-434F-91EC-775DDF195E88@ps.uni-sb.de>

Gustavo Gutierrez wrote:
> After trying the same problem occurs. Is there a way to instrument  
> gecode to use a different allocator for memory?, i mean, something  
> similar to STL in which many of the data structures provided take an  
> optional allocator template parameter.

All allocation in Gecode happens through the functions in gecode/ 
support/memory.icc.  You could try replacing the calls  
to ::malloc, ::realloc, and ::free there.

Cheers,
	Guido




From cschulte at kth.se  Thu Aug 28 08:35:49 2008
From: cschulte at kth.se (Christian Schulte)
Date: Thu, 28 Aug 2008 08:35:49 +0200
Subject: [gecode-users] Memory problem
In-Reply-To: <e7b0e5a40808272243t2592afe7jc38f35b6cccd5ba5@mail.gmail.com>
References: <e7b0e5a40808270156v7a5dc0bj29e8e547a693dc02@mail.gmail.com>	<004301c90824$c662fa30$5328ee90$@se>
	<e7b0e5a40808272243t2592afe7jc38f35b6cccd5ba5@mail.gmail.com>
Message-ID: <000301c908d8$503860c0$f0a92240$@se>

What is Mozart using these days (yes, ignorance is bliss)? Is it still using mmap? Maybe that could be the interaction. But as Guido said, we just use malloc and free and by replacing three lines all of Gecode will be using a different allocator. Maybe you could try to use Mozart?s allocator for Gecode as well.

 

Cheers

Christian

 

From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf Of Gustavo Gutierrez
Sent: Thursday, August 28, 2008 7:44 AM
To: Christian Schulte
Cc: gecode at gecode.org
Subject: Re: [gecode-users] Memory problem

 

 

On Wed, Aug 27, 2008 at 11:10 AM, Christian Schulte <cschulte at kth.se> wrote:

 

 

While I fail to see the practical relevance of your example 

It is not relevant as that, but it shows a problem that happens in our development of the next mozart release. As you may know we are interested in having a mozart gecode integration. Well, by doing some benchmarks we realize that memory consumption is to high for medium size problems. The idea is simple: we have a linked list of gecode spaces and the garbage collector needs to traverse it  to see which of them needs to be removed. Also, after space propagation we check whether the gecode space has resulted failed to remove it in eagerly (i.e., do not wait for a grabage collector run). 
 

there is an experiment what you could do: you allocate the spaces in the same order as you deallocate them. Try and see what happens if you deallocate the spaces in inverse order. That is, run the deallocation loop backwards so that the space allocated last gets deleted first.

 


After trying the same problem occurs. Is there a way to instrument gecode to use a different allocator for memory?, i mean, something similar to STL in which many of the data structures provided take an optional allocator template parameter.
 
Regards,
Gustavo

From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf Of Gustavo Gutierrez
Sent: Wednesday, August 27, 2008 10:56 AM
To: gecode at gecode.org
Subject: [gecode-users] Memory problem

 

Hi All,

Some time ago someone reported an strange memory behavior in mac os x on the gecode list. I do not know whether it was fixed but i think it still remains in the current implementation. The problem apparently happens only in mac os x. You can get it by replacing the main function of the queens example to this one:

int
main(int argc, char* argv[]) {
  
  SizeOptions opt("Queens");
  opt.iterations(500);
  opt.size(100);
  opt.propagation(Queens::PROP_

DISTINCT);
  opt.propagation(Queens::PROP_BINARY, "binary",
                      "only binary disequality constraints");
  opt.propagation(Queens::PROP_MIXED, "mixed",
                      "single distinct and binary disequality constraints");
  opt.propagation(Queens::PROP_DISTINCT, "distinct",
                      "three distinct constraints");
  opt.parse(argc,argv);
  /*
  Example::run<Queens,DFS,SizeOptions>(opt);
  */
  std::vector<Queens*> q;
  for (unsigned int i=0; i < 100000; i++) {
    q.push_back(new Queens(opt));
  }
  std::cout << "finished insertion" << std::endl;

  for (unsigned int i=0; i < 100000; i++) {
    Queens *tmp = q[i];
    delete tmp;
    q.pop_back();
  }
  std::cout << "finished delete" << std::endl;

  int a;
  std::cin >> a;
  return 0;
}

The idea is to create a lot of spaces and to keep pointer to them in an array. After the creation all spaces are deleted. The expected behavior is to release all the memory allocated in the first loop and to have it available by the operating system. I tried in a mac os x running leopard and the memory seems to be still used by the process (according to Activity Monitor). In a linux machine the memory seems to be released according to top.

Another thing is that when using the gecode trunk to try the same problem, the de-allocation behaves better, that is, half of the memory is released but still some memory is kept by the process.

Do you have any suggestion on how to work around this?


Regards,
-- 
Gustavo Gutierrez




-- 
Gustavo Gutierrez

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.ps.uni-sb.de/pipermail/users/attachments/20080828/7d4e7edb/attachment.htm>

From tack at ps.uni-sb.de  Thu Aug 28 09:20:23 2008
From: tack at ps.uni-sb.de (Guido Tack)
Date: Thu, 28 Aug 2008 09:20:23 +0200
Subject: [gecode-users] Memory problem
In-Reply-To: <625F777B-3B3C-434F-91EC-775DDF195E88@ps.uni-sb.de>
References: <e7b0e5a40808270156v7a5dc0bj29e8e547a693dc02@mail.gmail.com>
	<004301c90824$c662fa30$5328ee90$@se>
	<e7b0e5a40808272243t2592afe7jc38f35b6cccd5ba5@mail.gmail.com>
	<625F777B-3B3C-434F-91EC-775DDF195E88@ps.uni-sb.de>
Message-ID: <2D6E5845-862A-4767-A03E-F90673A24833@ps.uni-sb.de>

I tried to find out more about the Mac OS malloc.

Apparently, Mac OS never frees blocks that are smaller than 15359  
bytes, but rather tries to reuse them for further mallocs in the same  
process.
http://kevin.sb.org/2007/07/05/malloc-free-space-not-reclaimed/

I tried replacing malloc with ptmalloc3 (as suggested in that  
article), and it completely solves the problem.

Cheers,
	Guido




From stefano.gualandi at fastwebnet.it  Thu Aug 28 11:00:30 2008
From: stefano.gualandi at fastwebnet.it (Stefano Gualandi)
Date: Thu, 28 Aug 2008 11:00:30 +0200
Subject: [gecode-users] FloatVars update
In-Reply-To: <48B65C3A.7040909@logis.cz>
References: <g93c1t$kq5$1@ger.gmane.org>
	<BCE72E92-9778-4E9C-8156-724C0AC799BA@elet.polimi.it>
	<48B65C3A.7040909@logis.cz>
Message-ID: <27DA4441-5A5C-4287-BF79-D4ADA331F90A@fastwebnet.it>

> PS: BTW, why didn't you post this on the mailing list?

...ops, I am just back from holidays... Indeed, I should.

> Great! I probably should have mentioned in the README that you need  
> to explicitly enable floatvars when building with the patch.

I would just add to the README file where the file "float.vis" must  
be copied.
(also if you wrote about in your first announcement in the mailing list)

thanks again,
Stefano

> Please report back your experience with floatvars (comments,  
> suggestions, problems, bugs....). Good luck!
>
> Cheers,
> Filip
>
>
>
>> Hi Filip,
>> just to let you know I succeed in compiling your example on my  
>> desktop (linux) at the second shot.
>>
>> (at the first shot, with "configure --disable-examples --disable- 
>> serialization --disable-set-vars --disable-cpltset-vars" I got  
>> like I had  set --disable-float-vars, even if I didn't, boohhh...)
>>
>> Thanks a lot for the contribution!
>> I hope to get time to further test the linear constraint.
>>
>> cheers,
>> Stefano
>>
>>
>>
>> On Aug 27, 2008, at 12:58 PM, Filip Konvi?ka wrote:
>>
>>> Dear all,
>>>
>>> here is an update of FloatVars for Gecode 2.1.1.
>>>
>>> Changelog:
>>>
>>> - Basic support for reflection and serialization. This has not  
>>> been tested at all!
>>> - Assignment branching was added. See Gecode::Float::Assign_minmax 
>>> ().
>>> - Some cleanup and small fixes here and there.
>>>
>>> As always, you're welcome to experiment with the code, and you're  
>>> highly welcome to ask for help and report bugs! (Anyone who tries  
>>> to fix a bug will be tortured of course.)
>>>
>>> Cheers,
>>> Filip<floatvar-20080827.zip>________________________________________ 
>>> _______
>>> Gecode users mailing list
>>> users at gecode.org
>>> https://www.gecode.org/mailman/listinfo/gecode-users
>>
>
>
> -- 
> Filip Konvi?ka
>
> LOGIS, s.r.o.
> tel. +420 556 841 100
> mob. +420 736 758 714
>




From filip.konvicka at logis.cz  Thu Aug 28 11:13:11 2008
From: filip.konvicka at logis.cz (=?UTF-8?B?RmlsaXAgS29udmnEjWth?=)
Date: Thu, 28 Aug 2008 11:13:11 +0200
Subject: [gecode-users] FloatVars update
In-Reply-To: <27DA4441-5A5C-4287-BF79-D4ADA331F90A@fastwebnet.it>
References: <g93c1t$kq5$1@ger.gmane.org>
	<BCE72E92-9778-4E9C-8156-724C0AC799BA@elet.polimi.it>
	<48B65C3A.7040909@logis.cz>
	<27DA4441-5A5C-4287-BF79-D4ADA331F90A@fastwebnet.it>
Message-ID: <48B66C27.3010806@logis.cz>


>> Great! I probably should have mentioned in the README that you need 
>> to explicitly enable floatvars when building with the patch.
>
> I would just add to the README file where the file "float.vis" must be 
> copied.
> (also if you wrote about in your first announcement in the mailing list)

Ah, OK. Originally I thought that you had to do "--enable-float-vars" 
explicitly, but I see now that it's the default. So I was just going to 
ask you what exactly went wrong. Now I see.

So I'll post a hint separately to the announcement thread so that people 
find it easily.

Thanks,
Filip




From filip.konvicka at logis.cz  Thu Aug 28 11:21:41 2008
From: filip.konvicka at logis.cz (=?UTF-8?B?RmlsaXAgS29udmnEjWth?=)
Date: Thu, 28 Aug 2008 11:21:41 +0200
Subject: [gecode-users] Hint: FloatVars update
In-Reply-To: <g93c1t$kq5$1@ger.gmane.org>
References: <g93c1t$kq5$1@ger.gmane.org>
Message-ID: <g95qnv$2n0$1@ger.gmane.org>

Thanks to Stefano Gualandi, here's an update of the README.txt paragraph 
about building Gecode 2.1.1 for FloatVars:


   To use it, download Gecode 2.1.1 source package, apply the patch
   ./patch/float.patch, put ./patch/float.vis to Gecode source root
   (where 'variables.vsl' resides) and build Gecode.


(I somehow failed to include instructions about where to put float.vis)

Cheers,
Filip




From ggutierrez at atlas.puj.edu.co  Thu Aug 28 12:53:24 2008
From: ggutierrez at atlas.puj.edu.co (Gustavo Gutierrez)
Date: Thu, 28 Aug 2008 12:53:24 +0200
Subject: [gecode-users] Memory problem
In-Reply-To: <2D6E5845-862A-4767-A03E-F90673A24833@ps.uni-sb.de>
References: <e7b0e5a40808270156v7a5dc0bj29e8e547a693dc02@mail.gmail.com>
	<004301c90824$c662fa30$5328ee90$@se>
	<e7b0e5a40808272243t2592afe7jc38f35b6cccd5ba5@mail.gmail.com>
	<625F777B-3B3C-434F-91EC-775DDF195E88@ps.uni-sb.de>
	<2D6E5845-862A-4767-A03E-F90673A24833@ps.uni-sb.de>
Message-ID: <e7b0e5a40808280353r6fa81e28y22ba75705a76c37f@mail.gmail.com>

On Thu, Aug 28, 2008 at 9:20 AM, Guido Tack <tack at ps.uni-sb.de> wrote:

> I tried to find out more about the Mac OS malloc.
>
> Apparently, Mac OS never frees blocks that are smaller than 15359 bytes,
> but rather tries to reuse them for further mallocs in the same process.
> http://kevin.sb.org/2007/07/05/malloc-free-space-not-reclaimed/
>
> I tried replacing malloc with ptmalloc3 (as suggested in that article), and
> it completely solves the problem.
>

Now I am wondering if the same problem can occur when using gecode in the
*normal* way, i mean, with gecode search engines as in the examples. Any
comment?

Regards,
Gustavo


> Cheers,
>        Guido
>
>


-- 
Gustavo Gutierrez
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.ps.uni-sb.de/pipermail/users/attachments/20080828/2b8cdc22/attachment.htm>

From tack at ps.uni-sb.de  Thu Aug 28 13:06:08 2008
From: tack at ps.uni-sb.de (Guido Tack)
Date: Thu, 28 Aug 2008 13:06:08 +0200
Subject: [gecode-users] Memory problem
In-Reply-To: <e7b0e5a40808280353r6fa81e28y22ba75705a76c37f@mail.gmail.com>
References: <e7b0e5a40808270156v7a5dc0bj29e8e547a693dc02@mail.gmail.com>
	<004301c90824$c662fa30$5328ee90$@se>
	<e7b0e5a40808272243t2592afe7jc38f35b6cccd5ba5@mail.gmail.com>
	<625F777B-3B3C-434F-91EC-775DDF195E88@ps.uni-sb.de>
	<2D6E5845-862A-4767-A03E-F90673A24833@ps.uni-sb.de>
	<e7b0e5a40808280353r6fa81e28y22ba75705a76c37f@mail.gmail.com>
Message-ID: <3D3842F3-6B25-4FE7-9BA7-31CDF5CCFB09@ps.uni-sb.de>

Gustavo Gutierrez wrote:
> On Thu, Aug 28, 2008 at 9:20 AM, Guido Tack <tack at ps.uni-sb.de> wrote:
> I tried to find out more about the Mac OS malloc.
>
> Apparently, Mac OS never frees blocks that are smaller than 15359  
> bytes, but rather tries to reuse them for further mallocs in the  
> same process.
> http://kevin.sb.org/2007/07/05/malloc-free-space-not-reclaimed/
>
> I tried replacing malloc with ptmalloc3 (as suggested in that  
> article), and it completely solves the problem.
>
> Now I am wondering if the same problem can occur when using gecode  
> in the *normal* way, i mean, with gecode search engines as in the  
> examples. Any comment?

That's unlikely.  The problem is that the memory footprint is going to  
be the maximum memory used by spaces that are alive at the same time.   
In your example, that's tens of thousands of spaces.  During search,  
it's never more than a few spaces (search tree depth / recomputation  
depth).  If the tree depth is very big, you're lost anyway as the  
search is not going to find a solution.

Cheers,
	Guido

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.ps.uni-sb.de/pipermail/users/attachments/20080828/f7f0196b/attachment.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 2436 bytes
Desc: not available
URL: <http://www.ps.uni-sb.de/pipermail/users/attachments/20080828/f7f0196b/attachment.bin>

From cschulte at kth.se  Thu Aug 28 13:13:12 2008
From: cschulte at kth.se (Christian Schulte)
Date: Thu, 28 Aug 2008 13:13:12 +0200
Subject: [gecode-users] Memory problem
In-Reply-To: <3D3842F3-6B25-4FE7-9BA7-31CDF5CCFB09@ps.uni-sb.de>
References: <e7b0e5a40808270156v7a5dc0bj29e8e547a693dc02@mail.gmail.com>
	<004301c90824$c662fa30$5328ee90$@se>
	<e7b0e5a40808272243t2592afe7jc38f35b6cccd5ba5@mail.gmail.com>
	<625F777B-3B3C-434F-91EC-775DDF195E88@ps.uni-sb.de>
	<2D6E5845-862A-4767-A03E-F90673A24833@ps.uni-sb.de>
	<e7b0e5a40808280353r6fa81e28y22ba75705a76c37f@mail.gmail.com>
	<3D3842F3-6B25-4FE7-9BA7-31CDF5CCFB09@ps.uni-sb.de>
Message-ID: <00e001c908ff$1057c500$31074f00$@se>

Well, not so sure. There could be another workaround: look to the file
gecode/kernel/memory-mananger.icc. There you will find something like:

 

    /**

     * \brief Parameters defining memory management policy for spaces

     * \ingroup FuncMemSpace

     */

    namespace Config {

      /**

       * \brief Minimal size of a heap chunk requested from the OS

       */

      const size_t hcsz_min =  2 * 1024;

 

If you increase hcsz_min to 16 * 1024 that would avoid part of the problem.
One part are the spaces which are very small and few. But per space you will
typically allocate a number of heap chunks. Initially these chunks will be
small and will only dynamically grow when demand justifies it. So, if you
increase, you'll have more slack but more blocks will be returned to the OS.

 

Christian

 

--

Christian Schulte, www.ict.kth.se/~cschulte/

 

From: Guido Tack [mailto:tack at ps.uni-sb.de] 
Sent: Thursday, August 28, 2008 1:06 PM
To: Gustavo Gutierrez
Cc: gecode at gecode.org; Christian Schulte
Subject: Re: [gecode-users] Memory problem

 

Gustavo Gutierrez wrote:

On Thu, Aug 28, 2008 at 9:20 AM, Guido Tack <tack at ps.uni-sb.de> wrote:

I tried to find out more about the Mac OS malloc.

Apparently, Mac OS never frees blocks that are smaller than 15359 bytes, but
rather tries to reuse them for further mallocs in the same process.
http://kevin.sb.org/2007/07/05/malloc-free-space-not-reclaimed/

I tried replacing malloc with ptmalloc3 (as suggested in that article), and
it completely solves the problem.


Now I am wondering if the same problem can occur when using gecode in the
*normal* way, i mean, with gecode search engines as in the examples. Any
comment?

 

That's unlikely.  The problem is that the memory footprint is going to be
the maximum memory used by spaces that are alive at the same time.  In your
example, that's tens of thousands of spaces.  During search, it's never more
than a few spaces (search tree depth / recomputation depth).  If the tree
depth is very big, you're lost anyway as the search is not going to find a
solution.

 

Cheers,

            Guido

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.ps.uni-sb.de/pipermail/users/attachments/20080828/4fabe34f/attachment.htm>

From ggutierrez at atlas.puj.edu.co  Thu Aug 28 14:13:07 2008
From: ggutierrez at atlas.puj.edu.co (Gustavo Gutierrez)
Date: Thu, 28 Aug 2008 14:13:07 +0200
Subject: [gecode-users] Memory problem
In-Reply-To: <000301c908d8$503860c0$f0a92240$@se>
References: <e7b0e5a40808270156v7a5dc0bj29e8e547a693dc02@mail.gmail.com>
	<004301c90824$c662fa30$5328ee90$@se>
	<e7b0e5a40808272243t2592afe7jc38f35b6cccd5ba5@mail.gmail.com>
	<000301c908d8$503860c0$f0a92240$@se>
Message-ID: <e7b0e5a40808280513v2e7788cew248092f6d9c50f8b@mail.gmail.com>

On Thu, Aug 28, 2008 at 8:35 AM, Christian Schulte <cschulte at kth.se> wrote:

>  What is Mozart using these days (yes, ignorance is bliss)? Is it still
> using mmap?
>
As far as i can see in the configure log it tries to allocate with three
different tools: malloc, sbrk and mmap. On Mac OS X it fails to use all but
mmap.


> Maybe that could be the interaction.
>
Gecode spaces are stored out of the mozart heap. I tried to see whether it
was a mozart problem by running a program that created a big list of numbers
and then let the garbage collector to remove it. Looking at process
statistics the heap shrinks so the behavior is the expected.


> But as Guido said, we just use malloc and free and by replacing three lines
> all of Gecode will be using a different allocator. Maybe you could try to
> use Mozart's allocator for Gecode as well.
>
>
>




> Cheers
>
> Christian
>
>
>
> *From:* users-bounces at gecode.org [mailto:users-bounces at gecode.org] *On
> Behalf Of *Gustavo Gutierrez
> *Sent:* Thursday, August 28, 2008 7:44 AM
> *To:* Christian Schulte
> *Cc:* gecode at gecode.org
> *Subject:* Re: [gecode-users] Memory problem
>
>
>
>
>
> On Wed, Aug 27, 2008 at 11:10 AM, Christian Schulte <cschulte at kth.se>
> wrote:
>
>
>
>
>
> While I fail to see the practical relevance of your example
>
> It is not relevant as that, but it shows a problem that happens in our
> development of the next mozart release. As you may know we are interested in
> having a mozart gecode integration. Well, by doing some benchmarks we
> realize that memory consumption is to high for medium size problems. The
> idea is simple: we have a linked list of gecode spaces and the garbage
> collector needs to traverse it  to see which of them needs to be removed.
> Also, after space propagation we check whether the gecode space has resulted
> failed to remove it in eagerly (i.e., do not wait for a grabage collector
> run).
>
>
>  there is an experiment what you could do: you allocate the spaces in the
> same order as you deallocate them. Try and see what happens if you
> deallocate the spaces in inverse order. That is, run the deallocation loop
> backwards so that the space allocated last gets deleted first.
>
>
>
>
> After trying the same problem occurs. Is there a way to instrument gecode
> to use a different allocator for memory?, i mean, something similar to STL
> in which many of the data structures provided take an optional allocator
> template parameter.
>
> Regards,
> Gustavo
>
>   *From:* users-bounces at gecode.org [mailto:users-bounces at gecode.org] *On
> Behalf Of *Gustavo Gutierrez
> *Sent:* Wednesday, August 27, 2008 10:56 AM
> *To:* gecode at gecode.org
> *Subject:* [gecode-users] Memory problem
>
>
>
> Hi All,
>
> Some time ago someone reported an strange memory behavior in mac os x on
> the gecode list. I do not know whether it was fixed but i think it still
> remains in the current implementation. The problem apparently happens only
> in mac os x. You can get it by replacing the main function of the queens
> example to this one:
>
> int
> main(int argc, char* argv[]) {
>
>   SizeOptions opt("Queens");
>   opt.iterations(500);
>   opt.size(100);
>   opt.propagation(Queens::PROP_
>
> DISTINCT);
>   opt.propagation(Queens::PROP_BINARY, "binary",
>                       "only binary disequality constraints");
>   opt.propagation(Queens::PROP_MIXED, "mixed",
>                       "single distinct and binary disequality
> constraints");
>   opt.propagation(Queens::PROP_DISTINCT, "distinct",
>                       "three distinct constraints");
>   opt.parse(argc,argv);
>   /*
>   Example::run<Queens,DFS,SizeOptions>(opt);
>   */
>   std::vector<Queens*> q;
>   for (unsigned int i=0; i < 100000; i++) {
>     q.push_back(new Queens(opt));
>   }
>   std::cout << "finished insertion" << std::endl;
>
>   for (unsigned int i=0; i < 100000; i++) {
>     Queens *tmp = q[i];
>     delete tmp;
>     q.pop_back();
>   }
>   std::cout << "finished delete" << std::endl;
>
>   int a;
>   std::cin >> a;
>   return 0;
> }
>
> The idea is to create a lot of spaces and to keep pointer to them in an
> array. After the creation all spaces are deleted. The expected behavior is
> to release all the memory allocated in the first loop and to have it
> available by the operating system. I tried in a mac os x running leopard and
> the memory seems to be still used by the process (according to Activity
> Monitor). In a linux machine the memory seems to be released according to
> top.
>
> Another thing is that when using the gecode trunk to try the same problem,
> the de-allocation behaves better, that is, half of the memory is released
> but still some memory is kept by the process.
>
> Do you have any suggestion on how to work around this?
>
>
> Regards,
> --
> Gustavo Gutierrez
>
>
>
>
> --
> Gustavo Gutierrez
>



-- 
Gustavo Gutierrez
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.ps.uni-sb.de/pipermail/users/attachments/20080828/bcb4bdd7/attachment.htm>

From filip.konvicka at logis.cz  Thu Aug 28 14:15:15 2008
From: filip.konvicka at logis.cz (=?UTF-8?B?RmlsaXAgS29udmnEjWth?=)
Date: Thu, 28 Aug 2008 14:15:15 +0200
Subject: [gecode-users] FloatVars update
In-Reply-To: <27DA4441-5A5C-4287-BF79-D4ADA331F90A@fastwebnet.it>
References: <g93c1t$kq5$1@ger.gmane.org>
	<BCE72E92-9778-4E9C-8156-724C0AC799BA@elet.polimi.it>
	<48B65C3A.7040909@logis.cz>
	<27DA4441-5A5C-4287-BF79-D4ADA331F90A@fastwebnet.it>
Message-ID: <48B696D3.1060802@logis.cz>


>> Great! I probably should have mentioned in the README that you need 
>> to explicitly enable floatvars when building with the patch.
>
> I would just add to the README file where the file "float.vis" must be 
> copied.
> (also if you wrote about in your first announcement in the mailing list)

Ah, OK. Originally I thought that you had to do "--enable-float-vars"
explicitly, but I see now that it's the default. So I was just going to
ask you what exactly went wrong. Now I see.

So I'll post a hint separately to the announcement thread so that people
find it easily.

Thanks,
Filip





