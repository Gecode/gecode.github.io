<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [gecode-users] compiler memory problem
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:users%40gecode.org?Subject=Re%3A%20%5Bgecode-users%5D%20compiler%20memory%20problem&In-Reply-To=%3C000301c94aec%245670a550%240351eff0%24%40se%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002017.html">
   <LINK REL="Next"  HREF="002019.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[gecode-users] compiler memory problem</H1>
    <B>Christian Schulte</B> 
    <A HREF="mailto:users%40gecode.org?Subject=Re%3A%20%5Bgecode-users%5D%20compiler%20memory%20problem&In-Reply-To=%3C000301c94aec%245670a550%240351eff0%24%40se%3E"
       TITLE="[gecode-users] compiler memory problem">cschulte at kth.se
       </A><BR>
    <I>Thu Nov 20 09:45:25 CET 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="002017.html">[gecode-users] compiler memory problem
</A></li>
        <LI>Next message: <A HREF="002019.html">[gecode-users] compiler memory problem
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2018">[ date ]</a>
              <a href="thread.html#2018">[ thread ]</a>
              <a href="subject.html#2018">[ subject ]</a>
              <a href="author.html#2018">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Patrik,

Going by your example code, this should very definitely not pose any problem, Gecode itself uses way more elaborate constructions with patterns.

One reason for the problem could be the part you do not tell us: if you have code that uses a lot of inlining, then that could be a problem.


Otherwise, that particular version of gcc might be at fault. As I do not use gcc that much I don't know whether this version is a bad one.

Cheers
Christian

--
Christian Schulte, www.ict.kth.se/~cschulte/

-----Original Message-----
From: <A HREF="https://www.ps.uni-sb.de/mailman/listinfo/users">users-bounces at gecode.org</A> [mailto:<A HREF="https://www.ps.uni-sb.de/mailman/listinfo/users">users-bounces at gecode.org</A>] On Behalf Of Patrik Haslum
Sent: Thursday, November 20, 2008 9:26 AM
To: <A HREF="https://www.ps.uni-sb.de/mailman/listinfo/users">users at gecode.org</A>
Subject: [gecode-users] compiler memory problem


Hi,

I've written a custom propagator. It is based on one of the existing templates, Gecode:BinaryPropagator, with an array of boolean views as the template argument. It works, but the compiler (g++ 4.1.2) is having serious trouble with the code: if I try to use any compiler optimisation (that is, anything other than -O0), the compiler eats up all memory (including swap) and never finishes. I know that using many and/or nested templates tends to increase compiler memory use, but this case is worse than anything I've encountered before. Is this a known problem? 
(perhaps fixed in some more recent g++ compiler). Is there some way to work around it? (other than disabling compiler optimisation, because that *really* slows down the solver). The only other option I can think of is to write the propagator from scratch, without relying on any base template.

Attached is a simplified version of the code (it doesn't contain any actual functionality, just the minimum that is needed to cause the compiler to behave this way).

Thanks,
			/<A HREF="https://www.ps.uni-sb.de/mailman/listinfo/users">P at trik</A>



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002017.html">[gecode-users] compiler memory problem
</A></li>
	<LI>Next message: <A HREF="002019.html">[gecode-users] compiler memory problem
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2018">[ date ]</a>
              <a href="thread.html#2018">[ thread ]</a>
              <a href="subject.html#2018">[ subject ]</a>
              <a href="author.html#2018">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://www.ps.uni-sb.de/mailman/listinfo/users">More information about the gecode-users
mailing list</a><br>
</body></html>
