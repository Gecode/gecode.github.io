From risoay at gmail.com  Tue Sep  1 02:16:28 2009
From: risoay at gmail.com (Kayler Yao)
Date: Tue, 1 Sep 2009 08:16:28 +0800
Subject: [gecode-users] =?gb2312?b?aGVscCAtLS0gaG93IHRvIGNyZWF0ZSBhbiBv?=
	=?gb2312?b?YmplY3QgZHluYW1pY2FsbHkgaW4gR2Vjb2Rlo78=?=
In-Reply-To: <5C113A59-D6AD-474B-AF81-2ACE873D172B@ps.uni-sb.de>
References: <33039a7c0908281959n3d8e8d90y9fa768281982eb85@mail.gmail.com>
	<33039a7c0908282019i2abc0fcapa1187091c105c37c@mail.gmail.com>
	<001101ca2897$bc57bdc0$35073940$@se>
	<33039a7c0908290823t4791a3a4sd35c63f6e1feafd3@mail.gmail.com>
	<000601ca2971$e4b80970$ae281c50$@se>
	<33039a7c0908300856s1d7d5529y5d87a41e2c1a5636@mail.gmail.com>
	<5C113A59-D6AD-474B-AF81-2ACE873D172B@ps.uni-sb.de>
Message-ID: <33039a7c0908311716r25717f27ld34578af2b898229@mail.gmail.com>

hi Christian,
         You must have misunderstood my meaning. Creating an new argument
array of exactly the right size is OK. There is no problem. I want to create
an amount of new argument array that they are maybe have the same size. For
instance,
" IntArgs a1(10);
  IntArgs a2(10);
  IntArgs a3(10);
    ??"
         The amount of the variable of "IntArgs" is uncertain,which is
controlled by parameter.  The?new? way can't go, so i have to create an
certain number of variables of "IntArgs", maybe ten variables , and they
have the same size. Actually, i perhaps only use five variables. So another
five variables of "IntArgs" are waste.

hi Guido,
       I have not used it to store data. I use it to post constraints. They
are all temporary. As following example,
"
       int size = 10;
      data[10][10];

      IntVarArray result;
      result(*this,5,0,9);

      IntVarArgs a(size);
      IntArgs c(size);

     ??

      distinct(*this,result);
      for (int i = 0: i<size; i++)
       {
          c[i] = data[i][2];
       }
       element(*this, c, result[i], a[i] );
       linear(*this, a, IRT_EQ, 50);
      rel*this,result,IRT_LQ);
    "
      The part of my program is  using IntArgs like the above code lines,
the difference bettween them is that i use uncertain number of variables of
"IntArgs". I use outside parameter to control it. So creating "IntArgs" is
dynamic. There has no better way to realize it, except for creating an
certain number of variables of "IntArgs" in advance, which may waste memory.


Kayler

2009/8/31 Guido Tack <tack at ps.uni-sb.de>

> Hi Kayler,
> you should not use IntArgs for representing your data, only for posting
> constraints.  So, when you read in your data, just use e.g. normal integer
> vectors.  Then you post the constraints, and you know exactly how many you
> need.  For each posted constraint, you construct the corresponding IntArgs
> from the data vectors.  That's their purpose, don't use them for storing
> data.
>
> Guido
>
>  Kayler Yao wrote:
>
>   hi,
>     Now let me talk about what i want to do. I have a lot of data,and
> i need to copy some data into the variable of the " IntArgs ". The number of
> variables what i want is uncertain,which is controlled by an outside
> parameter. And these variables include different data.
>     For instance, i have an 10*10 Array data. Now i want to copy the second
> ,the fifth and the sixth column of Array data into three variables of
> "IntArgs". In my project, the number of  variables of "IntArgs" what i need
> and which columns of Array data i want to copy are all uncertain,controlled
> by parameters. So this case make me to search for an dynamical method to
> create variable of the "IntArgs" . But "IntArgs" do not have a new operator
> by design. So i have to change the way and create an certain number of
> variables of the "IntArgs",which is larger than actual need. You know that
> wasting memory is an obvious disadvantage of this way.
>      whether there has an better way to resolve this problem?
>
> Kayler
>
>
>
> 2009/8/30 Christian Schulte <cschulte at kth.se>
>
>>  Hi,
>>
>>
>> what?s wrong with creating a new array each time you need it? They are
>> very fast to create (they will only allocate heap memory if the array is
>> large and otherwise, creation is super-quick). I have to admit I still don?t
>> see really what you mean by uncertain number.
>>
>>
>> Best
>>
>> Christian
>>
>>
>> *From:* Kayler Yao [mailto:risoay at gmail.com]
>> *Sent:* Saturday, August 29, 2009 5:23 PM
>> *To:* Christian Schulte
>> *Cc:* users at gecode.org
>>
>> *Subject:* Re: [gecode-users] help --- how to create an object
>> dynamically in Gecode
>> ?
>>
>>
>>
>> hi,
>>
>>    Your said about using Argument arrays are right . The purpose i use
>> Argument arrays to do is also just as it should to be . What i want to do is
>> that I want to use uncertain number of Argument Arrays ,so i want to  create
>> Argument arrays dynamically. You said that they do not have a new operator
>> by design ,so i can't use "new" way. I maybe create an certain number of
>> Argument Arrays which is much more than i want ,and it may waste some
>> memories. Whether there has another way to realize my thought?
>>
>> welcome to talk about it.
>>
>>
>> Kayler.
>>
>> 2009/8/29 Christian Schulte <cschulte at kth.se>
>>
>> Hi,
>>
>>
>> Argument arrays are meant for what they are called: passing arguments as
>> is explained in detail in Section 4.2.2 in Modeling with Gecode. Using them
>> for other purposes is a bad idea and hence they do not have a new operator
>> by design!
>>
>>
>> What you should do is use a different data structure and create and
>> argument array just when you need it for posting a propagator or branching.
>>
>>
>> Christian
>>
>>
>> *From:* users-bounces at gecode.org [mailto:users-bounces at gecode.org] *On
>> Behalf Of *Kayler Yao
>> *Sent:* Saturday, August 29, 2009 5:20 AM
>> *To:* users at gecode.org
>> *Subject:* Re: [gecode-users] help --- how to create an object
>> dynamically in Gecode?
>>
>>
>> hi,
>>
>>   And i find that "Gecode::Support::DynamicArray< T, A > Class Template"
>> maybe can realize it. But i did it  unsuccessfully.
>>
>> Who can give me right answer.
>>
>>
>> Kayler
>>
>> 2009/8/29 Kayler Yao <risoay at gmail.com>
>>
>> hi?
>>
>>     I want to create an object of IntArgs in my program dynamically. For
>> instance " IntArgs *pt = new IntArgs(4); -----create an object of IntArgs
>> with four elements" or
>>
>> "IntArgs *pt = new IntArgs [10];------create an array with 10 object of
>> IntArgs." They all be compiled with errors. And i haven't seen the examples
>> of create object dynamically in Gecode. And I want to know whether the
>> Gecode support to create object of Gecode class ? And how ?
>>
>> Look forward to your reply!
>>
>>
>> Kayler
>>
>>
>>
>
> _______________________________________________
> Gecode users mailing list
> users at gecode.org
> https://www.gecode.org/mailman/listinfo/gecode-users
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.ps.uni-sb.de/pipermail/users/attachments/20090901/d681227d/attachment.htm>

From tias.guns at cs.kuleuven.be  Tue Sep  1 10:47:53 2009
From: tias.guns at cs.kuleuven.be (Tias Guns)
Date: Tue, 01 Sep 2009 10:47:53 +0200
Subject: [gecode-users] A constrain with 3 IntVar
In-Reply-To: <9D8625A6-4FF6-4D82-B3E5-7148FD31E67F@ps.uni-sb.de>
References: <SNT117-W52C68305AA2FC01F495EFAA4F40@phx.gbl>
	<9D8625A6-4FF6-4D82-B3E5-7148FD31E67F@ps.uni-sb.de>
Message-ID: <op.uzkld3wyqa8xjr@demerzel.cs.kuleuven.be>

I've created a very simple propagator once, to show a student how to do  
it. It's attached, in case it would be helpfull for others too.  
constr_myprop.hpp contains the propagator, example.cpp is an example of  
how to use it and the Makefile compiles it on *nix systems.

Note that the propagator is really silly: it assigns every unassigned  
variable to 1. However, it should be enough to start from...


Greetings,
Tias

On Mon, 31 Aug 2009 11:02:26 +0200, Guido Tack <tack at ps.uni-sb.de> wrote:

> amina kemmar wrote:
>
>> Hi,
>>
>> I am writing a new constraint "NewConstraint", which takes 3 IntVar
>> as arguments :
>>
>> #include <algorithm>
>> #include <gecode/int.hh>
>>
>> namespace Gecode {
>>
>>   using namespace Int;
>>
>>   void NewConstraint(Space& home, IntVar x0, IntVar x1, IntVar x3) {
>>
>>     if (home.failed()) return;
>>
>>     //  Creation of an array x, which contains the 3 variables
>> x0,x1,x2;
>>     //  .....
>>
>>     // ViewArray<IntView> xv(home,x);
>>     // GECODE_ES_FAIL(home,
>> NewConstraint::Diff<IntView>::post(home,xv));
>>   }
>> }
>>
>> To post the constraint  i need to create a ViewArray, but i don't
>> understand how to create an IntVarArg  containing these variables ?
>
> Just fill the array manually, no need for IntVarArgs:
>
> xv[0] = x0; xv[1] = x1; xv[2] = x2;
>
> Or change the definition of the NewConstraint class to take three
> views instead of one ViewArray.
>
> Cheers,
> 	Guido
>
>
> _______________________________________________
> Gecode users mailing list
> users at gecode.org
> https://www.gecode.org/mailman/listinfo/gecode-users


Disclaimer: http://www.kuleuven.be/cwis/email_disclaimer.htm
-------------- next part --------------
A non-text attachment was scrubbed...
Name: constr_myprop.hpp
Type: application/octet-stream
Size: 4375 bytes
Desc: not available
URL: <http://www.ps.uni-sb.de/pipermail/users/attachments/20090901/462fe55d/attachment.obj>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: example.cpp
Type: application/octet-stream
Size: 2364 bytes
Desc: not available
URL: <http://www.ps.uni-sb.de/pipermail/users/attachments/20090901/462fe55d/attachment-0001.obj>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: Makefile
Type: application/octet-stream
Size: 514 bytes
Desc: not available
URL: <http://www.ps.uni-sb.de/pipermail/users/attachments/20090901/462fe55d/attachment-0002.obj>

From cschulte at kth.se  Tue Sep  1 11:03:12 2009
From: cschulte at kth.se (Christian Schulte)
Date: Tue, 1 Sep 2009 11:03:12 +0200
Subject: [gecode-users] A constrain with 3 IntVar
In-Reply-To: <op.uzkld3wyqa8xjr@demerzel.cs.kuleuven.be>
References: <SNT117-W52C68305AA2FC01F495EFAA4F40@phx.gbl>	<9D8625A6-4FF6-4D82-B3E5-7148FD31E67F@ps.uni-sb.de>
	<op.uzkld3wyqa8xjr@demerzel.cs.kuleuven.be>
Message-ID: <001201ca2ae3$0901dbe0$1b0593a0$@se>

There are also examples to be found here (from a course I teach):
	http://www.ict.kth.se/courses/ID2204/assignments.html

Christian

-----Original Message-----
From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf Of Tias Guns
Sent: Tuesday, September 01, 2009 10:48 AM
To: users at gecode.org
Subject: Re: [gecode-users] A constrain with 3 IntVar

I've created a very simple propagator once, to show a student how to do it. It's attached, in case it would be helpfull for others too.  
constr_myprop.hpp contains the propagator, example.cpp is an example of how to use it and the Makefile compiles it on *nix systems.

Note that the propagator is really silly: it assigns every unassigned variable to 1. However, it should be enough to start from...


Greetings,
Tias

On Mon, 31 Aug 2009 11:02:26 +0200, Guido Tack <tack at ps.uni-sb.de> wrote:

> amina kemmar wrote:
>
>> Hi,
>>
>> I am writing a new constraint "NewConstraint", which takes 3 IntVar 
>> as arguments :
>>
>> #include <algorithm>
>> #include <gecode/int.hh>
>>
>> namespace Gecode {
>>
>>   using namespace Int;
>>
>>   void NewConstraint(Space& home, IntVar x0, IntVar x1, IntVar x3) {
>>
>>     if (home.failed()) return;
>>
>>     //  Creation of an array x, which contains the 3 variables 
>> x0,x1,x2;
>>     //  .....
>>
>>     // ViewArray<IntView> xv(home,x);
>>     // GECODE_ES_FAIL(home,
>> NewConstraint::Diff<IntView>::post(home,xv));
>>   }
>> }
>>
>> To post the constraint  i need to create a ViewArray, but i don't 
>> understand how to create an IntVarArg  containing these variables ?
>
> Just fill the array manually, no need for IntVarArgs:
>
> xv[0] = x0; xv[1] = x1; xv[2] = x2;
>
> Or change the definition of the NewConstraint class to take three 
> views instead of one ViewArray.
>
> Cheers,
> 	Guido
>
>
> _______________________________________________
> Gecode users mailing list
> users at gecode.org
> https://www.gecode.org/mailman/listinfo/gecode-users


Disclaimer: http://www.kuleuven.be/cwis/email_disclaimer.htm




From crispesdeep at gmail.com  Tue Sep  1 23:36:35 2009
From: crispesdeep at gmail.com (cristian)
Date: Tue, 1 Sep 2009 16:36:35 -0500
Subject: [gecode-users] Compilation error
Message-ID: <8ec0ebc20909011436o6a42c8d0la61312f21413ec@mail.gmail.com>

Hi
I'm working scheduling with cumulatives and others constraints
using gecode 3.02 ,eclipse  and ubuntu.
I was working correctly until my ubuntu break up.
Install again ubuntu and over the same eclipse load the same project
and install the same gecode version,but the project don't work
ans this error is showed:

/home/cris/Documentos/workspace/ConstraintEngine/Debug/../Restricciones.cc:37:
undefined reference to `Gecode::BoolExpr::~BoolExpr()'

./Restricciones.o: In function `Gecode::operator||(Gecode::BoolExpr const&,
Gecode::BoolExpr const&)':
/usr/local/include/gecode/minimodel/bool-expr.hpp:70: undefined reference to
`Gecode::BoolExpr::BoolExpr(Gecode::BoolExpr const&,
Gecode::BoolExpr::NodeType, Gecode::BoolExpr const&)'
./Restricciones.o: In function `Gecode::operator&&(Gecode::BoolExpr const&,
Gecode::BoolExpr const&)':
/usr/local/include/gecode/minimodel/bool-expr.hpp:65: undefined reference to
`Gecode::BoolExpr::BoolExpr(Gecode::BoolExpr const&,
Gecode::BoolExpr::NodeType, Gecode::BoolExpr const&)'
./Restricciones.o: In function `Gecode::BoolExpr::post(Gecode::Space&, bool,
Gecode::IntConLevel) const':
/usr/local/include/gecode/minimodel/bool-expr.hpp:59: undefined reference to
`Gecode::BoolExpr::NNF::nnf(Gecode::Region&, Gecode::BoolExpr::Node*, bool)'
/usr/local/include/gecode/minimodel/bool-expr.hpp:59: undefined reference to
`Gecode::BoolExpr::NNF::post(Gecode::Space&, bool, Gecode::IntConLevel)
const'
collect2: ld devolvi? el estado de salida 1

make: *** [Tesis] Error 1

what is this error?, I was reviewing the linker and all is in place, may be
my ubuntu ?

Regards

Thanks for you help
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.ps.uni-sb.de/pipermail/users/attachments/20090901/955d0321/attachment.htm>

From tack at ps.uni-sb.de  Wed Sep  2 08:06:24 2009
From: tack at ps.uni-sb.de (Guido Tack)
Date: Wed, 2 Sep 2009 08:06:24 +0200
Subject: [gecode-users] Compilation error
In-Reply-To: <8ec0ebc20909011436o6a42c8d0la61312f21413ec@mail.gmail.com>
References: <8ec0ebc20909011436o6a42c8d0la61312f21413ec@mail.gmail.com>
Message-ID: <703CBACD-5FAC-4589-9D77-DAB5EADB5BFA@ps.uni-sb.de>

Hi,

this means that libgecodeminimodel.so is not properly linked.  Make  
sure it's on the path that the linker searches.

Guido

cristian wrote:

> Hi
> I'm working scheduling with cumulatives and others constraints
> using gecode 3.02 ,eclipse  and ubuntu.
> I was working correctly until my ubuntu break up.
> Install again ubuntu and over the same eclipse load the same project
> and install the same gecode version,but the project don't work
> ans this error is showed:
>
> /home/cris/Documentos/workspace/ConstraintEngine/Debug/../ 
> Restricciones.cc:37: undefined reference to  
> `Gecode::BoolExpr::~BoolExpr()'
>
> ./Restricciones.o: In function `Gecode::operator||(Gecode::BoolExpr  
> const&, Gecode::BoolExpr const&)':
> /usr/local/include/gecode/minimodel/bool-expr.hpp:70: undefined  
> reference to `Gecode::BoolExpr::BoolExpr(Gecode::BoolExpr const&,  
> Gecode::BoolExpr::NodeType, Gecode::BoolExpr const&)'
> ./Restricciones.o: In function `Gecode::operator&&(Gecode::BoolExpr  
> const&, Gecode::BoolExpr const&)':
> /usr/local/include/gecode/minimodel/bool-expr.hpp:65: undefined  
> reference to `Gecode::BoolExpr::BoolExpr(Gecode::BoolExpr const&,  
> Gecode::BoolExpr::NodeType, Gecode::BoolExpr const&)'
> ./Restricciones.o: In function  
> `Gecode::BoolExpr::post(Gecode::Space&, bool, Gecode::IntConLevel)  
> const':
> /usr/local/include/gecode/minimodel/bool-expr.hpp:59: undefined  
> reference to `Gecode::BoolExpr::NNF::nnf(Gecode::Region&,  
> Gecode::BoolExpr::Node*, bool)'
> /usr/local/include/gecode/minimodel/bool-expr.hpp:59: undefined  
> reference to `Gecode::BoolExpr::NNF::post(Gecode::Space&, bool,  
> Gecode::IntConLevel) const'
> collect2: ld devolvi? el estado de salida 1
>
> make: *** [Tesis] Error 1
>
> what is this error?, I was reviewing the linker and all is in place,  
> may be my ubuntu ?
>
> Regards
>
> Thanks for you help
>
> _______________________________________________
> Gecode users mailing list
> users at gecode.org
> https://www.gecode.org/mailman/listinfo/gecode-users




From David.Rijsman at quintiq.com  Thu Sep  3 15:03:06 2009
From: David.Rijsman at quintiq.com (David Rijsman)
Date: Thu, 03 Sep 2009 15:03:06 +0200
Subject: [gecode-users] Version 3.x.x and Microsoft Visual C++ 2005 Express
	Edition
Message-ID: <4A9FDAAA020000850000ACB8@mail.quintiq.nl>

Hi,

I noticed that version 3.0.x no longer supports the Microsoft Visual C++ 2005 Express Edition and indeed the code does not compile using this compiler. Although the Microsoft Visual C++ 2008 Express Edition is free it is no option for me to use this one. 

I also noticed it is pretty easy to get the code compiling, running and passing al the tests again using the Microsoft Visual C++ 2005 Express Edition. All one has to do is change in "thread.hh"

#ifdef GECODE_THREADS_WINDOWS
#include <windows.h>
#endif

into

#ifdef GECODE_THREADS_WINDOWS

#ifndef _WIN32_WINNT
#   define _WIN32_WINNT 0x400
#endif

#include <windows.h>
#endif

this works for 32 bits and 64 bits machine. Perhaps this can be added in the next releases?

thanks,








David J Rijsman
Algorithm Lead
Quintiq
 
T +31 (0)73 691 07 39
F +31 (0)73 691 07 54
M +31 (0)62 127 68 29
E david.rijsman at quintiq.nl
I www.quintiq.com





From cschulte at kth.se  Thu Sep  3 15:16:11 2009
From: cschulte at kth.se (Christian Schulte)
Date: Thu, 3 Sep 2009 15:16:11 +0200
Subject: [gecode-users] Version 3.x.x and Microsoft Visual C++ 2005
	Express	Edition
In-Reply-To: <4A9FDAAA020000850000ACB8@mail.quintiq.nl>
References: <4A9FDAAA020000850000ACB8@mail.quintiq.nl>
Message-ID: <000001ca2c98$b78c0b20$26a42160$@se>

Hi David,

Sure! I'll add that! Can you enlighten me what this magic incantation does?

All the best
Christian

--
Christian Schulte, www.ict.kth.se/~cschulte/

-----Original Message-----
From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf
Of David Rijsman
Sent: Thursday, September 03, 2009 3:03 PM
To: users at gecode.org
Subject: [gecode-users] Version 3.x.x and Microsoft Visual C++ 2005 Express
Edition

Hi,

I noticed that version 3.0.x no longer supports the Microsoft Visual C++
2005 Express Edition and indeed the code does not compile using this
compiler. Although the Microsoft Visual C++ 2008 Express Edition is free it
is no option for me to use this one. 


I also noticed it is pretty easy to get the code compiling, running and
passing al the tests again using the Microsoft Visual C++ 2005 Express
Edition. All one has to do is change in "thread.hh"

#ifdef GECODE_THREADS_WINDOWS
#include <windows.h>
#endif

into

#ifdef GECODE_THREADS_WINDOWS

#ifndef _WIN32_WINNT
#   define _WIN32_WINNT 0x400
#endif

#include <windows.h>
#endif

this works for 32 bits and 64 bits machine. Perhaps this can be added in the
next releases?

thanks,








David J Rijsman
Algorithm Lead
Quintiq
 
T +31 (0)73 691 07 39
F +31 (0)73 691 07 54
M +31 (0)62 127 68 29
E david.rijsman at quintiq.nl
I www.quintiq.com



_______________________________________________
Gecode users mailing list
users at gecode.org
https://www.gecode.org/mailman/listinfo/gecode-users




From cschulte at kth.se  Thu Sep  3 15:33:54 2009
From: cschulte at kth.se (Christian Schulte)
Date: Thu, 3 Sep 2009 15:33:54 +0200
Subject: [gecode-users] Version 3.x.x and Microsoft Visual C++	
	2005Express	Edition
In-Reply-To: <4A9FE121020000850000ACBC@mail.quintiq.nl>
References: <4A9FDAAA020000850000ACB8@mail.quintiq.nl>
	<000001ca2c98$b78c0b20$26a42160$@se>
	<4A9FE121020000850000ACBC@mail.quintiq.nl>
Message-ID: <000301ca2c9b$2ea10ce0$8be326a0$@se>

Hi David,

Great, thanks so much. I didn't know that there was this difference in MSVC
2005 (I first even failed by choosing the wrong abstractions such that the
threads required Vista rather than Windows 2000 or better). I'll add the fix
to the trunk as soon as possible and let you know.

Thanks
Christian

--
Christian Schulte, www.ict.kth.se/~cschulte/


-----Original Message-----
From: David Rijsman [mailto:David.Rijsman at quintiq.com] 
Sent: Thursday, September 03, 2009 3:31 PM
To: users at gecode.org; Christian Schulte
Subject: Re: [gecode-users] Version 3.x.x and Microsoft Visual C++
2005Express Edition

Hi Christian,

I quote from msdn "Certain functions that depend on a particular version of
Windows are declared using conditional code. This enables you to use the
compiler to detect whether your application uses functions that are not
supported on its target version(s) of Windows. To compile an application
that uses these functions, you must define the appropriate macros." 

The error we receive without the macro is:

.\gecode/support/thread/windows.hpp(77) : error C3861:
'TryEnterCriticalSection': identifier not found

Old versions of Windows (before NT 4.0) did not support the system call
TryEnterCriticalSection on CriticalSection objects. A default Visual C++
build is compatible with old Windows releases, so it does not provide
TryEnterCriticalSection. Defining _WIN32_WINNT to 0x0400 (or greater) solves
this problem. 


David

>>> 
From: 	"Christian Schulte" <cschulte at kth.se>
To:	"'David Rijsman'" <David.Rijsman at quintiq.com>, <users at gecode.org>
Date: 	9/3/2009 3:18 PM
Subject: 	Re: [gecode-users] Version 3.x.x and Microsoft Visual C++
2005Express	Edition

Hi David,

Sure! I'll add that! Can you enlighten me what this magic incantation does?

All the best
Christian

--
Christian Schulte, www.ict.kth.se/~cschulte/ 

-----Original Message-----
From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf
Of David Rijsman
Sent: Thursday, September 03, 2009 3:03 PM
To: users at gecode.org 
Subject: [gecode-users] Version 3.x.x and Microsoft Visual C++ 2005 Express
Edition

Hi,

I noticed that version 3.0.x no longer supports the Microsoft Visual C++
2005 Express Edition and indeed the code does not compile using this
compiler. Although the Microsoft Visual C++ 2008 Express Edition is free it
is no option for me to use this one. 


I also noticed it is pretty easy to get the code compiling, running and
passing al the tests again using the Microsoft Visual C++ 2005 Express
Edition. All one has to do is change in "thread.hh"

#ifdef GECODE_THREADS_WINDOWS
#include <windows.h>
#endif

into

#ifdef GECODE_THREADS_WINDOWS

#ifndef _WIN32_WINNT
#   define _WIN32_WINNT 0x400
#endif

#include <windows.h>
#endif

this works for 32 bits and 64 bits machine. Perhaps this can be added in the
next releases?

thanks,








David J Rijsman
Algorithm Lead
Quintiq
 
T +31 (0)73 691 07 39
F +31 (0)73 691 07 54
M +31 (0)62 127 68 29
E david.rijsman at quintiq.nl 
I www.quintiq.com 



_______________________________________________
Gecode users mailing list
users at gecode.org 
https://www.gecode.org/mailman/listinfo/gecode-users 


_______________________________________________
Gecode users mailing list
users at gecode.org 
https://www.gecode.org/mailman/listinfo/gecode-users





From David.Rijsman at quintiq.com  Thu Sep  3 15:30:41 2009
From: David.Rijsman at quintiq.com (David Rijsman)
Date: Thu, 03 Sep 2009 15:30:41 +0200
Subject: [gecode-users] Version 3.x.x and Microsoft Visual C++	
	2005Express	Edition
In-Reply-To: <000001ca2c98$b78c0b20$26a42160$@se>
References: <4A9FDAAA020000850000ACB8@mail.quintiq.nl>
	<000001ca2c98$b78c0b20$26a42160$@se>
Message-ID: <4A9FE121020000850000ACBC@mail.quintiq.nl>

Hi Christian,

I quote from msdn "Certain functions that depend on a particular version of Windows are declared using conditional code. This enables you to use the compiler to detect whether your application uses functions that are not supported on its target version(s) of Windows. To compile an application that uses these functions, you must define the appropriate macros." 

The error we receive without the macro is:

.\gecode/support/thread/windows.hpp(77) : error C3861: 'TryEnterCriticalSection': identifier not found

Old versions of Windows (before NT 4.0) did not support the system call TryEnterCriticalSection on CriticalSection objects. A default Visual C++ build is compatible with old Windows releases, so it does not provide TryEnterCriticalSection. Defining _WIN32_WINNT to 0x0400 (or greater) solves this problem. 


David

>>> 
From: 	"Christian Schulte" <cschulte at kth.se>
To:	"'David Rijsman'" <David.Rijsman at quintiq.com>, <users at gecode.org>
Date: 	9/3/2009 3:18 PM
Subject: 	Re: [gecode-users] Version 3.x.x and Microsoft Visual C++ 2005Express	Edition

Hi David,

Sure! I'll add that! Can you enlighten me what this magic incantation does?

All the best
Christian

--
Christian Schulte, www.ict.kth.se/~cschulte/ 

-----Original Message-----
From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf
Of David Rijsman
Sent: Thursday, September 03, 2009 3:03 PM
To: users at gecode.org 
Subject: [gecode-users] Version 3.x.x and Microsoft Visual C++ 2005 Express
Edition

Hi,

I noticed that version 3.0.x no longer supports the Microsoft Visual C++
2005 Express Edition and indeed the code does not compile using this
compiler. Although the Microsoft Visual C++ 2008 Express Edition is free it
is no option for me to use this one. 


I also noticed it is pretty easy to get the code compiling, running and
passing al the tests again using the Microsoft Visual C++ 2005 Express
Edition. All one has to do is change in "thread.hh"

#ifdef GECODE_THREADS_WINDOWS
#include <windows.h>
#endif

into

#ifdef GECODE_THREADS_WINDOWS

#ifndef _WIN32_WINNT
#   define _WIN32_WINNT 0x400
#endif

#include <windows.h>
#endif

this works for 32 bits and 64 bits machine. Perhaps this can be added in the
next releases?

thanks,








David J Rijsman
Algorithm Lead
Quintiq
 
T +31 (0)73 691 07 39
F +31 (0)73 691 07 54
M +31 (0)62 127 68 29
E david.rijsman at quintiq.nl 
I www.quintiq.com 



_______________________________________________
Gecode users mailing list
users at gecode.org 
https://www.gecode.org/mailman/listinfo/gecode-users 


_______________________________________________
Gecode users mailing list
users at gecode.org 
https://www.gecode.org/mailman/listinfo/gecode-users




From cschulte at kth.se  Thu Sep  3 16:06:14 2009
From: cschulte at kth.se (Christian Schulte)
Date: Thu, 3 Sep 2009 16:06:14 +0200
Subject: [gecode-users] Version 3.x.x and Microsoft Visual
	C++		2005Express	Edition
In-Reply-To: <000301ca2c9b$2ea10ce0$8be326a0$@se>
References: <4A9FDAAA020000850000ACB8@mail.quintiq.nl>	<000001ca2c98$b78c0b20$26a42160$@se>	<4A9FE121020000850000ACBC@mail.quintiq.nl>
	<000301ca2c9b$2ea10ce0$8be326a0$@se>
Message-ID: <000601ca2c9f$b33a8720$19af9560$@se>

Done. Christian

--
Christian Schulte, www.ict.kth.se/~cschulte/


-----Original Message-----
From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf
Of Christian Schulte
Sent: Thursday, September 03, 2009 3:34 PM
To: 'David Rijsman'; users at gecode.org
Subject: Re: [gecode-users] Version 3.x.x and Microsoft Visual C++
2005Express Edition

Hi David,

Great, thanks so much. I didn't know that there was this difference in MSVC
2005 (I first even failed by choosing the wrong abstractions such that the
threads required Vista rather than Windows 2000 or better). I'll add the fix
to the trunk as soon as possible and let you know.

Thanks
Christian

--
Christian Schulte, www.ict.kth.se/~cschulte/


-----Original Message-----
From: David Rijsman [mailto:David.Rijsman at quintiq.com] 
Sent: Thursday, September 03, 2009 3:31 PM
To: users at gecode.org; Christian Schulte
Subject: Re: [gecode-users] Version 3.x.x and Microsoft Visual C++
2005Express Edition

Hi Christian,

I quote from msdn "Certain functions that depend on a particular version of
Windows are declared using conditional code. This enables you to use the
compiler to detect whether your application uses functions that are not
supported on its target version(s) of Windows. To compile an application
that uses these functions, you must define the appropriate macros." 

The error we receive without the macro is:

.\gecode/support/thread/windows.hpp(77) : error C3861:
'TryEnterCriticalSection': identifier not found

Old versions of Windows (before NT 4.0) did not support the system call
TryEnterCriticalSection on CriticalSection objects. A default Visual C++
build is compatible with old Windows releases, so it does not provide
TryEnterCriticalSection. Defining _WIN32_WINNT to 0x0400 (or greater) solves
this problem. 


David

>>> 
From: 	"Christian Schulte" <cschulte at kth.se>
To:	"'David Rijsman'" <David.Rijsman at quintiq.com>, <users at gecode.org>
Date: 	9/3/2009 3:18 PM
Subject: 	Re: [gecode-users] Version 3.x.x and Microsoft Visual C++
2005Express	Edition

Hi David,

Sure! I'll add that! Can you enlighten me what this magic incantation does?

All the best
Christian

--
Christian Schulte, www.ict.kth.se/~cschulte/ 

-----Original Message-----
From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf
Of David Rijsman
Sent: Thursday, September 03, 2009 3:03 PM
To: users at gecode.org 
Subject: [gecode-users] Version 3.x.x and Microsoft Visual C++ 2005 Express
Edition

Hi,

I noticed that version 3.0.x no longer supports the Microsoft Visual C++
2005 Express Edition and indeed the code does not compile using this
compiler. Although the Microsoft Visual C++ 2008 Express Edition is free it
is no option for me to use this one. 


I also noticed it is pretty easy to get the code compiling, running and
passing al the tests again using the Microsoft Visual C++ 2005 Express
Edition. All one has to do is change in "thread.hh"

#ifdef GECODE_THREADS_WINDOWS
#include <windows.h>
#endif

into

#ifdef GECODE_THREADS_WINDOWS

#ifndef _WIN32_WINNT
#   define _WIN32_WINNT 0x400
#endif

#include <windows.h>
#endif

this works for 32 bits and 64 bits machine. Perhaps this can be added in the
next releases?

thanks,








David J Rijsman
Algorithm Lead
Quintiq
 
T +31 (0)73 691 07 39
F +31 (0)73 691 07 54
M +31 (0)62 127 68 29
E david.rijsman at quintiq.nl 
I www.quintiq.com 



_______________________________________________
Gecode users mailing list
users at gecode.org 
https://www.gecode.org/mailman/listinfo/gecode-users 


_______________________________________________
Gecode users mailing list
users at gecode.org 
https://www.gecode.org/mailman/listinfo/gecode-users



_______________________________________________
Gecode users mailing list
users at gecode.org
https://www.gecode.org/mailman/listinfo/gecode-users




From malcolmr at cse.unsw.edu.au  Fri Sep  4 03:28:42 2009
From: malcolmr at cse.unsw.edu.au (Malcolm Ryan)
Date: Fri, 4 Sep 2009 11:28:42 +1000
Subject: [gecode-users] Best-first search
Message-ID: <94E420C2-AF98-4267-A984-BF64E49216BF@cse.unsw.edu.au>

I need a search engine for gecode that implements best-first search,  
i.e. search using a priority queue sorted on an heuristic. It doesn't  
look like Gecode current implements this, so I figure I'll have to  
write it myself.

Any recommendations on how I should go about it? I've been reading the  
source for DFS and LDS but I'm not clear on what functions such an  
engine would be expected to implement.

Malcolm



From martin.kreissig at lss.uni-stuttgart.de  Fri Sep  4 09:06:05 2009
From: martin.kreissig at lss.uni-stuttgart.de (Martin =?ISO-8859-1?Q?Krei=DFig?=)
Date: Fri, 04 Sep 2009 09:06:05 +0200
Subject: [gecode-users] Not all solutions, BAB vs. DFS
Message-ID: <1252047965.3689.39.camel@pc114>

Hello,

I found out, that GECODe is a very good (if not the best) solution to my problem. 
The thing is, that I never used C++ before - everybody has to start at a point ;)

So far I got used to it, but now - when finished - I don't get all solutions of my problem. 

Searching in this list I found out that I have to use the BAB search and add the option opt.solutions(0)...

The program worked with DFS before.
But now I get the error: 
	"terminate called after throwing an instance of 'Gecode::SpaceConstrainUndefined' what(): Space::constrain: Attempt to use undefined constrain function"

My implementation does not follow the syntax given in the examples, like: 
	"Script::run<Money,DFS,Options>(opt);"

I am starting the search by this:
	DFS<CSP> dfs( csp_obj );

So my question is - maybe a bit of a beginner one - this is not possible
with BAB?

How can I add the options variable in this implementation? BAB<CSP>
dfs( csp_obj, opt ); is not working.

In my code I create an IntVarArray in which I have different sets
related to different variables and constrain them by some equations.

Thanks for any comments.

Martin Krei?ig

Universit?t Stuttgart
Lehrstuhl f?r Systemtheorie und Signalverarbeitung





From tack at ps.uni-sb.de  Fri Sep  4 09:18:07 2009
From: tack at ps.uni-sb.de (Guido Tack)
Date: Fri, 4 Sep 2009 09:18:07 +0200
Subject: [gecode-users] Not all solutions, BAB vs. DFS
In-Reply-To: <1252047965.3689.39.camel@pc114>
References: <1252047965.3689.39.camel@pc114>
Message-ID: <2DAC6D5B-600D-46C3-B0D7-B2FFF2BD1AB4@ps.uni-sb.de>

Martin Krei?ig wrote:

> Hello,
>
> I found out, that GECODe is a very good (if not the best) solution  
> to my problem.
> The thing is, that I never used C++ before - everybody has to start  
> at a point ;)
>
> So far I got used to it, but now - when finished - I don't get all  
> solutions of my problem.
>
> Searching in this list I found out that I have to use the BAB search  
> and add the option opt.solutions(0)...

You can use opt.solutions(0) with DFS, too.

> The program worked with DFS before.
> But now I get the error:
> 	"terminate called after throwing an instance of  
> 'Gecode::SpaceConstrainUndefined' what(): Space::constrain: Attempt  
> to use undefined constrain function"

BAB is for solving optimization problems, and requires implementing  
the constrain function.  If you don't want to do optimization, use DFS.

> My implementation does not follow the syntax given in the examples,  
> like:
> 	"Script::run<Money,DFS,Options>(opt);"
>
> I am starting the search by this:
> 	DFS<CSP> dfs( csp_obj );
>
> So my question is - maybe a bit of a beginner one - this is not  
> possible
> with BAB?
>
> How can I add the options variable in this implementation? BAB<CSP>
> dfs( csp_obj, opt ); is not working.

The dfs object has a next method that you can call in a loop to get  
more than one solution.  As soon as it returns NULL, the complete  
search tree has been explored:

CSP* c = dfs.next();
while (c != NULL) {
	c->print(); // e.g., output the current solution
	delete c;
	c = dfs.next();
}

Cheers,
	Guido




From tack at ps.uni-sb.de  Fri Sep  4 09:30:18 2009
From: tack at ps.uni-sb.de (Guido Tack)
Date: Fri, 4 Sep 2009 09:30:18 +0200
Subject: [gecode-users] Best-first search
In-Reply-To: <94E420C2-AF98-4267-A984-BF64E49216BF@cse.unsw.edu.au>
References: <94E420C2-AF98-4267-A984-BF64E49216BF@cse.unsw.edu.au>
Message-ID: <D536DD4F-BE22-45FC-A55F-434EFE9E4C2D@ps.uni-sb.de>

Malcolm Ryan wrote:

> I need a search engine for gecode that implements best-first search,
> i.e. search using a priority queue sorted on an heuristic. It doesn't
> look like Gecode current implements this, so I figure I'll have to
> write it myself.
>
> Any recommendations on how I should go about it? I've been reading the
> source for DFS and LDS but I'm not clear on what functions such an
> engine would be expected to implement.

If you want the same interface as the built-in search engines, it  
should mainly provide a next method, and probably use Stop objects to  
further control the search.

In order to get started, I'd just use an STL priority queue and  
implement a system with full copying, i.e., the queue stores spaces.   
When you dequeue a space, you determine the number of its children n,  
create n-1 copies, commit the original space and each copy to one  
alternative each, determine the cost for each child, and enqueue the  
resulting children.
This should give you something that works, although the cost in terms  
of memory may be prohibitive (you'll keep an exponential number of  
spaces alive).

So the second step would be to figure out how to combine this with  
recomputation.  Instead of queuing spaces, you queue nodes, which may  
contain a space or a pointer to a parent node.  You'll have to  
represent parts of the search tree in addition to the queue in order  
to make this work.  Then, if you dequeue a node that doesn't have a  
space, you follow the parent pointers up in the tree to find a node  
with a space, and recompute the target node.
I'm not quite sure how this works in practice, as you'll have to  
actually create a space for each node when you create it, to determine  
its priority.  I guess you'd then throw away the spaces for all nodes  
except the best, or something similar.

Cheers,
	Guido




From malcolmr at cse.unsw.edu.au  Fri Sep  4 10:11:39 2009
From: malcolmr at cse.unsw.edu.au (Malcolm Ryan)
Date: Fri, 4 Sep 2009 18:11:39 +1000
Subject: [gecode-users] Best-first search
In-Reply-To: <D536DD4F-BE22-45FC-A55F-434EFE9E4C2D@ps.uni-sb.de>
References: <94E420C2-AF98-4267-A984-BF64E49216BF@cse.unsw.edu.au>
	<D536DD4F-BE22-45FC-A55F-434EFE9E4C2D@ps.uni-sb.de>
Message-ID: <3E1C46E8-5C35-426B-9A2E-251AA49FD79E@cse.unsw.edu.au>

After some more reading of the DFS and LDS code I think I've got it  
more or less worked out. It doesn't need to be terribly efficient. It  
is the 'conventional approach' in an experiment which aims to show  
that another approach is superior, so I'm not going out of my way to  
optimise it cleverly.

It could, however, be worth implementing an RCS-style system in  
general. The value would depend on how good your heuristic is. A good  
heuristic should result in behaviour very similar to DFS. A bad  
heuristic could cause search to behave more like BFS which would make  
RCS fairly useless, I think.

Malcolm

On 04/09/2009, at 5:30 PM, Guido Tack wrote:

> Malcolm Ryan wrote:
>
>> I need a search engine for gecode that implements best-first search,
>> i.e. search using a priority queue sorted on an heuristic. It doesn't
>> look like Gecode current implements this, so I figure I'll have to
>> write it myself.
>>
>> Any recommendations on how I should go about it? I've been reading  
>> the
>> source for DFS and LDS but I'm not clear on what functions such an
>> engine would be expected to implement.
>
> If you want the same interface as the built-in search engines, it  
> should mainly provide a next method, and probably use Stop objects  
> to further control the search.
>
> In order to get started, I'd just use an STL priority queue and  
> implement a system with full copying, i.e., the queue stores  
> spaces.  When you dequeue a space, you determine the number of its  
> children n, create n-1 copies, commit the original space and each  
> copy to one alternative each, determine the cost for each child, and  
> enqueue the resulting children.
> This should give you something that works, although the cost in  
> terms of memory may be prohibitive (you'll keep an exponential  
> number of spaces alive).
>
> So the second step would be to figure out how to combine this with  
> recomputation.  Instead of queuing spaces, you queue nodes, which  
> may contain a space or a pointer to a parent node.  You'll have to  
> represent parts of the search tree in addition to the queue in order  
> to make this work.  Then, if you dequeue a node that doesn't have a  
> space, you follow the parent pointers up in the tree to find a node  
> with a space, and recompute the target node.
> I'm not quite sure how this works in practice, as you'll have to  
> actually create a space for each node when you create it, to  
> determine its priority.  I guess you'd then throw away the spaces  
> for all nodes except the best, or something similar.
>
> Cheers,
> 	Guido




From martin.kreissig at lss.uni-stuttgart.de  Fri Sep  4 10:18:49 2009
From: martin.kreissig at lss.uni-stuttgart.de (Martin =?ISO-8859-1?Q?Krei=DFig?=)
Date: Fri, 04 Sep 2009 10:18:49 +0200
Subject: [gecode-users] Not all solutions, BAB vs. DFS
In-Reply-To: <2DAC6D5B-600D-46C3-B0D7-B2FFF2BD1AB4@ps.uni-sb.de>
References: <1252047965.3689.39.camel@pc114>
	<2DAC6D5B-600D-46C3-B0D7-B2FFF2BD1AB4@ps.uni-sb.de>
Message-ID: <1252052329.3689.62.camel@pc114>

Hi,


> > So far I got used to it, but now - when finished - I don't get all  
> > solutions of my problem.
> >
> > Searching in this list I found out that I have to use the BAB search  
> > and add the option opt.solutions(0)...
> 
> You can use opt.solutions(0) with DFS, too.


Alright, but how do I pass opt to my CSP object?


> 
> > My implementation does not follow the syntax given in the examples,  
> > like:
> > 	"Script::run<Money,DFS,Options>(opt);"
> >
> > I am starting the search by this:
> > 	DFS<CSP> dfs( csp_obj );
> >
> > So my question is - maybe a bit of a beginner one - this is not  
> > possible
> > with BAB?
> >
> > How can I add the options variable in this implementation? BAB<CSP>
> > dfs( csp_obj, opt ); is not working.
> 
> The dfs object has a next method that you can call in a loop to get  
> more than one solution.  As soon as it returns NULL, the complete  
> search tree has been explored:
> 
> CSP* c = dfs.next();
> while (c != NULL) {
> 	c->print(); // e.g., output the current solution
> 	delete c;
> 	c = dfs.next();
> }

That's what I'm doing. thx.

The problem is: When testing I insert - lets say 3 - specific
combination of variables that fulfil the constraints. Then every
variable gets its set (of size 3). So the output should be (at least) 3
combinations. What I get is some of my original solutions, some mixed
solutions, but some of the originals are skipped.

Can it be that some values are deleted? but that shouldnt be the case.


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.ps.uni-sb.de/pipermail/users/attachments/20090904/fc376447/attachment.htm>

From tack at ps.uni-sb.de  Fri Sep  4 10:34:00 2009
From: tack at ps.uni-sb.de (Guido Tack)
Date: Fri, 4 Sep 2009 10:34:00 +0200
Subject: [gecode-users] Not all solutions, BAB vs. DFS
In-Reply-To: <1252052329.3689.62.camel@pc114>
References: <1252047965.3689.39.camel@pc114>
	<2DAC6D5B-600D-46C3-B0D7-B2FFF2BD1AB4@ps.uni-sb.de>
	<1252052329.3689.62.camel@pc114>
Message-ID: <0DCA8E3F-BA49-45B1-A818-7C6B17A15F20@ps.uni-sb.de>

Martin Krei?ig wrote:
>> You can use opt.solutions(0) with DFS, too.
>
> Alright, but how do I pass opt to my CSP object?

You don't.  The Options class is for use with the driver  
infrastructure.  So either you use the driver, and Script::run, or you  
don't use options.  There's a different options class controlling the  
search itself (it's documented).

> The problem is: When testing I insert - lets say 3 - specific  
> combination of variables that fulfil the constraints. Then every  
> variable gets its set (of size 3). So the output should be (at  
> least) 3 combinations. What I get is some of my original solutions,  
> some mixed solutions, but some of the originals are skipped.
>
> Can it be that some values are deleted? but that shouldnt be the case.

That's impossible to answer without seeing the actual problem.  Maybe  
you can post a simple, small example.

Cheers,
	Guido


From tack at ps.uni-sb.de  Fri Sep  4 13:50:29 2009
From: tack at ps.uni-sb.de (Guido Tack)
Date: Fri, 4 Sep 2009 13:50:29 +0200
Subject: [gecode-users] Gecode and Gist on Mac OS 10.6 "Snow Leopard"
Message-ID: <28B97455-AA71-4CDA-8B18-95AA132CF7D0@ps.uni-sb.de>

Hi everyone,

I've just upgraded my Mac to Snow Leopard and XCode 3.2 and ran a few  
quick checks.  It seems everything works well.  Here's a couple of  
notes:

The installer package from the Gecode download page apparently works  
out of the box.

It seems that the installer package for Qt 4.5 has some issues on Snow  
Leopard.  As noted on
	http://labs.trolltech.com/blogs/2009/08/31/qt-46-on-mac-os-106/
it may be necessary to uncheck the installation of Qt documentation.

If you build Gecode yourself, you have to know that XCode 3.2 uses gcc  
4.2.1 by default.  You therefore don't have to configure with  
CC=gcc-4.2 CXX=g++-4.2 any longer.  The new gcc is configured to  
produce 64 bit code by default.  This is fine unless you want to  
compile Gist against the Qt binary package, which is 32 bit only.  In  
this case, simply configure with --with-architectures=i386.

If you encounter any other issues, let me know!

Cheers,
	Guido




From gutierrez.gustavo at uclouvain.be  Fri Sep  4 14:20:55 2009
From: gutierrez.gustavo at uclouvain.be (Gustavo Gutierrez)
Date: Fri, 4 Sep 2009 14:20:55 +0200
Subject: [gecode-users] Gecode and Gist on Mac OS 10.6 "Snow Leopard"
In-Reply-To: <28B97455-AA71-4CDA-8B18-95AA132CF7D0@ps.uni-sb.de>
References: <28B97455-AA71-4CDA-8B18-95AA132CF7D0@ps.uni-sb.de>
Message-ID: <E9441AE8-E3ED-421F-98C5-303BCA2493ED@uclouvain.be>


On 04 Sep 2009, at 13:50, Guido Tack wrote:

> Hi everyone,
>
> I've just upgraded my Mac to Snow Leopard and XCode 3.2 and ran a few
> quick checks.  It seems everything works well.  Here's a couple of
> notes:
>
> The installer package from the Gecode download page apparently works
> out of the box.
>
> It seems that the installer package for Qt 4.5 has some issues on Snow
> Leopard.  As noted on
> 	http://labs.trolltech.com/blogs/2009/08/31/qt-46-on-mac-os-106/
> it may be necessary to uncheck the installation of Qt documentation.
>
> If you build Gecode yourself, you have to know that XCode 3.2 uses gcc
> 4.2.1 by default.  You therefore don't have to configure with
> CC=gcc-4.2 CXX=g++-4.2 any longer.  The new gcc is configured to
> produce 64 bit code by default.  This is fine unless you want to
> compile Gist against the Qt binary package, which is 32 bit only.  In
> this case, simply configure with --with-architectures=i386.
>
> If you encounter any other issues, let me know!
>


Apart from what you mentioned, the only thing I notice is that with  
some trees in gist, some horizontal and vertical lines are drawn  
around some nodes. This is randomly or at least I could not identify a  
more deterministic pattern, probably it has something related to qt  
and not to gecode.

Everything else seems to work fine, at least for me. I don't use the  
binary installer, tough.

Regards,
Gustavo




From martin.kreissig at lss.uni-stuttgart.de  Fri Sep  4 14:34:00 2009
From: martin.kreissig at lss.uni-stuttgart.de (Martin =?ISO-8859-1?Q?Krei=DFig?=)
Date: Fri, 04 Sep 2009 14:34:00 +0200
Subject: [gecode-users] Not all solutions, BAB vs. DFS
In-Reply-To: <0DCA8E3F-BA49-45B1-A818-7C6B17A15F20@ps.uni-sb.de>
References: <1252047965.3689.39.camel@pc114>
	<2DAC6D5B-600D-46C3-B0D7-B2FFF2BD1AB4@ps.uni-sb.de>
	<1252052329.3689.62.camel@pc114>
	<0DCA8E3F-BA49-45B1-A818-7C6B17A15F20@ps.uni-sb.de>
Message-ID: <1252067640.3689.74.camel@pc114>

Hi again,

I tried my best to create a small example, but then I got stuck during
debugging at creating the DFS engine. (I was lead to core.hpp line 3165
(gecode 3.1.0)).
So I don't know yet if this example produces the problem I have.

The algorithm creates an array with different sets (here 5 sets with 2
values each) and these sets are constrained by some equations (two in
this case) that result in 0.

Here is the code:

#include <gecode/int.hh>
#include <gecode/driver.hh>
#include <iostream>

using namespace Gecode;

class CSP : public Space {
	protected:
	IntVarArray v;
	
	public:
	CSP( int arr[5][2] ) {

	// create array with different sets
	int tmp[2];

	for (int i=0; i<5; i++){
		tmp[0] = arr[i][0]; tmp[1] = arr[i][1];
		IntVar i(*this, IntSet( tmp, 2));
		v.add( *this, i );
	}

	// formulate equations coefficients
	IntArgs ia(5,0,-1,1,1,0);
	IntArgs ib(5,-1,1,-1,0,1);

	// constraints
	linear (*this,ia,v,IRT_EQ, 0, ICL_DEF );
	linear (*this,ib,v,IRT_EQ, 0, ICL_DEF );

	branch ( *this,v,INT_VAR_SIZE_MAX,INT_VAL_MIN );

}

CSP( bool share, CSP& s ) {
	v.update(*this, share, s.v);
}

virtual Space* copy( bool share ) {
	return new CSP(share,*this);
}

void print( void ) {
	std::cout << v << std::endl;
}};

int main( void ) {
	int arr[5][2] = {{-2,1},{-1,5},{3,2},{-4,3},{2,-2}};
	CSP* c = new CSP(arr);
	c->print();
	DFS<CSP> dfs(c);
	delete c;
	CSP* cc;

	while ( cc=dfs.next() ) {
		cc->print();
		delete cc;
	}
	
	return 0;
}

best
Martin


On Fri, 2009-09-04 at 10:34 +0200, Guido Tack wrote:
> Martin Krei?ig wrote:
> >> You can use opt.solutions(0) with DFS, too.
> >
> > Alright, but how do I pass opt to my CSP object?
> 
> You don't.  The Options class is for use with the driver  
> infrastructure.  So either you use the driver, and Script::run, or you  
> don't use options.  There's a different options class controlling the  
> search itself (it's documented).
> 
> > The problem is: When testing I insert - lets say 3 - specific  
> > combination of variables that fulfil the constraints. Then every  
> > variable gets its set (of size 3). So the output should be (at  
> > least) 3 combinations. What I get is some of my original solutions,  
> > some mixed solutions, but some of the originals are skipped.
> >
> > Can it be that some values are deleted? but that shouldnt be the case.
> 
> That's impossible to answer without seeing the actual problem.  Maybe  
> you can post a simple, small example.
> 
> Cheers,
> 	Guido
-- 
Martin Krei?ig <martin.kreissig at lss.uni-stuttgart.de>




From tack at ps.uni-sb.de  Fri Sep  4 15:12:12 2009
From: tack at ps.uni-sb.de (Guido Tack)
Date: Fri, 4 Sep 2009 15:12:12 +0200
Subject: [gecode-users] Not all solutions, BAB vs. DFS
In-Reply-To: <1252067640.3689.74.camel@pc114>
References: <1252047965.3689.39.camel@pc114>
	<2DAC6D5B-600D-46C3-B0D7-B2FFF2BD1AB4@ps.uni-sb.de>
	<1252052329.3689.62.camel@pc114>
	<0DCA8E3F-BA49-45B1-A818-7C6B17A15F20@ps.uni-sb.de>
	<1252067640.3689.74.camel@pc114>
Message-ID: <7FCDF1EF-A8C3-4629-9102-E5ABF67928BF@ps.uni-sb.de>

Your copy constructor lacks a call to the Space copy constructor:

CSP( bool share, CSP& s ) : Space(share, s) {
	v.update(*this, share, s.v);
}

Then it should work (I get three solutions).

Cheers,
	Guido

Martin Krei?ig wrote:

> Hi again,
>
> I tried my best to create a small example, but then I got stuck during
> debugging at creating the DFS engine. (I was lead to core.hpp line  
> 3165
> (gecode 3.1.0)).
> So I don't know yet if this example produces the problem I have.
>
> The algorithm creates an array with different sets (here 5 sets with 2
> values each) and these sets are constrained by some equations (two in
> this case) that result in 0.
>
> Here is the code:
>
> #include <gecode/int.hh>
> #include <gecode/driver.hh>
> #include <iostream>
>
> using namespace Gecode;
>
> class CSP : public Space {
> 	protected:
> 	IntVarArray v;
> 	
> 	public:
> 	CSP( int arr[5][2] ) {
>
> 	// create array with different sets
> 	int tmp[2];
>
> 	for (int i=0; i<5; i++){
> 		tmp[0] = arr[i][0]; tmp[1] = arr[i][1];
> 		IntVar i(*this, IntSet( tmp, 2));
> 		v.add( *this, i );
> 	}
>
> 	// formulate equations coefficients
> 	IntArgs ia(5,0,-1,1,1,0);
> 	IntArgs ib(5,-1,1,-1,0,1);
>
> 	// constraints
> 	linear (*this,ia,v,IRT_EQ, 0, ICL_DEF );
> 	linear (*this,ib,v,IRT_EQ, 0, ICL_DEF );
>
> 	branch ( *this,v,INT_VAR_SIZE_MAX,INT_VAL_MIN );
>
> }
>
> CSP( bool share, CSP& s ) {
> 	v.update(*this, share, s.v);
> }
>
> virtual Space* copy( bool share ) {
> 	return new CSP(share,*this);
> }
>
> void print( void ) {
> 	std::cout << v << std::endl;
> }};
>
> int main( void ) {
> 	int arr[5][2] = {{-2,1},{-1,5},{3,2},{-4,3},{2,-2}};
> 	CSP* c = new CSP(arr);
> 	c->print();
> 	DFS<CSP> dfs(c);
> 	delete c;
> 	CSP* cc;
>
> 	while ( cc=dfs.next() ) {
> 		cc->print();
> 		delete cc;
> 	}
> 	
> 	return 0;
> }
>
> best
> Martin
>
>
> On Fri, 2009-09-04 at 10:34 +0200, Guido Tack wrote:
>> Martin Krei?ig wrote:
>>>> You can use opt.solutions(0) with DFS, too.
>>>
>>> Alright, but how do I pass opt to my CSP object?
>>
>> You don't.  The Options class is for use with the driver
>> infrastructure.  So either you use the driver, and Script::run, or  
>> you
>> don't use options.  There's a different options class controlling the
>> search itself (it's documented).
>>
>>> The problem is: When testing I insert - lets say 3 - specific
>>> combination of variables that fulfil the constraints. Then every
>>> variable gets its set (of size 3). So the output should be (at
>>> least) 3 combinations. What I get is some of my original solutions,
>>> some mixed solutions, but some of the originals are skipped.
>>>
>>> Can it be that some values are deleted? but that shouldnt be the  
>>> case.
>>
>> That's impossible to answer without seeing the actual problem.  Maybe
>> you can post a simple, small example.
>>
>> Cheers,
>> 	Guido
> -- 
> Martin Krei?ig <martin.kreissig at lss.uni-stuttgart.de>
>
>
> _______________________________________________
> Gecode users mailing list
> users at gecode.org
> https://www.gecode.org/mailman/listinfo/gecode-users




From martin.kreissig at lss.uni-stuttgart.de  Fri Sep  4 15:28:52 2009
From: martin.kreissig at lss.uni-stuttgart.de (Martin =?ISO-8859-1?Q?Krei=DFig?=)
Date: Fri, 04 Sep 2009 15:28:52 +0200
Subject: [gecode-users] Not all solutions, BAB vs. DFS
In-Reply-To: <7FCDF1EF-A8C3-4629-9102-E5ABF67928BF@ps.uni-sb.de>
References: <1252047965.3689.39.camel@pc114>
	<2DAC6D5B-600D-46C3-B0D7-B2FFF2BD1AB4@ps.uni-sb.de>
	<1252052329.3689.62.camel@pc114>
	<0DCA8E3F-BA49-45B1-A818-7C6B17A15F20@ps.uni-sb.de>
	<1252067640.3689.74.camel@pc114>
	<7FCDF1EF-A8C3-4629-9102-E5ABF67928BF@ps.uni-sb.de>
Message-ID: <1252070932.3689.78.camel@pc114>

Alright. Thanks. But that is not the reason in my original code. I
missed it when writing the example.

How come you get 3 solutions? I get the following output (which are the
correct solution inserted):
{{-2,1}, {-1,5}, [2..3], {-4,3}, {-2,2}}
{-2, -1, 3, -4, 2}
{1, 5, 2, 3, -2}

best
Martin

On Fri, 2009-09-04 at 15:12 +0200, Guido Tack wrote:

> Your copy constructor lacks a call to the Space copy constructor:
> 
> CSP( bool share, CSP& s ) : Space(share, s) {
> 	v.update(*this, share, s.v);
> }
> 
> Then it should work (I get three solutions).
> 
> Cheers,
> 	Guido
> 
> Martin Krei?ig wrote:
> 
> > Hi again,
> >
> > I tried my best to create a small example, but then I got stuck during
> > debugging at creating the DFS engine. (I was lead to core.hpp line  
> > 3165
> > (gecode 3.1.0)).
> > So I don't know yet if this example produces the problem I have.
> >
> > The algorithm creates an array with different sets (here 5 sets with 2
> > values each) and these sets are constrained by some equations (two in
> > this case) that result in 0.
> >
> > Here is the code:
> >
> > #include <gecode/int.hh>
> > #include <gecode/driver.hh>
> > #include <iostream>
> >
> > using namespace Gecode;
> >
> > class CSP : public Space {
> > 	protected:
> > 	IntVarArray v;
> > 	
> > 	public:
> > 	CSP( int arr[5][2] ) {
> >
> > 	// create array with different sets
> > 	int tmp[2];
> >
> > 	for (int i=0; i<5; i++){
> > 		tmp[0] = arr[i][0]; tmp[1] = arr[i][1];
> > 		IntVar i(*this, IntSet( tmp, 2));
> > 		v.add( *this, i );
> > 	}
> >
> > 	// formulate equations coefficients
> > 	IntArgs ia(5,0,-1,1,1,0);
> > 	IntArgs ib(5,-1,1,-1,0,1);
> >
> > 	// constraints
> > 	linear (*this,ia,v,IRT_EQ, 0, ICL_DEF );
> > 	linear (*this,ib,v,IRT_EQ, 0, ICL_DEF );
> >
> > 	branch ( *this,v,INT_VAR_SIZE_MAX,INT_VAL_MIN );
> >
> > }
> >
> > CSP( bool share, CSP& s ) {
> > 	v.update(*this, share, s.v);
> > }
> >
> > virtual Space* copy( bool share ) {
> > 	return new CSP(share,*this);
> > }
> >
> > void print( void ) {
> > 	std::cout << v << std::endl;
> > }};
> >
> > int main( void ) {
> > 	int arr[5][2] = {{-2,1},{-1,5},{3,2},{-4,3},{2,-2}};
> > 	CSP* c = new CSP(arr);
> > 	c->print();
> > 	DFS<CSP> dfs(c);
> > 	delete c;
> > 	CSP* cc;
> >
> > 	while ( cc=dfs.next() ) {
> > 		cc->print();
> > 		delete cc;
> > 	}
> > 	
> > 	return 0;
> > }
> >
> > best
> > Martin
> >
> >
> > On Fri, 2009-09-04 at 10:34 +0200, Guido Tack wrote:
> >> Martin Krei?ig wrote:
> >>>> You can use opt.solutions(0) with DFS, too.
> >>>
> >>> Alright, but how do I pass opt to my CSP object?
> >>
> >> You don't.  The Options class is for use with the driver
> >> infrastructure.  So either you use the driver, and Script::run, or  
> >> you
> >> don't use options.  There's a different options class controlling the
> >> search itself (it's documented).
> >>
> >>> The problem is: When testing I insert - lets say 3 - specific
> >>> combination of variables that fulfil the constraints. Then every
> >>> variable gets its set (of size 3). So the output should be (at
> >>> least) 3 combinations. What I get is some of my original solutions,
> >>> some mixed solutions, but some of the originals are skipped.
> >>>
> >>> Can it be that some values are deleted? but that shouldnt be the  
> >>> case.
> >>
> >> That's impossible to answer without seeing the actual problem.  Maybe
> >> you can post a simple, small example.
> >>
> >> Cheers,
> >> 	Guido
> > -- 
> > Martin Krei?ig <martin.kreissig at lss.uni-stuttgart.de>
> >
> >
> > _______________________________________________
> > Gecode users mailing list
> > users at gecode.org
> > https://www.gecode.org/mailman/listinfo/gecode-users
> 

-- 
Martin Krei?ig <martin.kreissig at lss.uni-stuttgart.de>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.ps.uni-sb.de/pipermail/users/attachments/20090904/86a8f562/attachment.htm>

From tack at ps.uni-sb.de  Fri Sep  4 21:27:13 2009
From: tack at ps.uni-sb.de (Guido Tack)
Date: Fri, 4 Sep 2009 21:27:13 +0200
Subject: [gecode-users] Not all solutions, BAB vs. DFS
In-Reply-To: <1252070932.3689.78.camel@pc114>
References: <1252047965.3689.39.camel@pc114>
	<2DAC6D5B-600D-46C3-B0D7-B2FFF2BD1AB4@ps.uni-sb.de>
	<1252052329.3689.62.camel@pc114>
	<0DCA8E3F-BA49-45B1-A818-7C6B17A15F20@ps.uni-sb.de>
	<1252067640.3689.74.camel@pc114>
	<7FCDF1EF-A8C3-4629-9102-E5ABF67928BF@ps.uni-sb.de>
	<1252070932.3689.78.camel@pc114>
Message-ID: <6317C972-F33A-4502-A61C-2C7BDC89D4C8@ps.uni-sb.de>

Martin Krei?ig wrote:

> Alright. Thanks. But that is not the reason in my original code. I  
> missed it when writing the example.
>
> How come you get 3 solutions? I get the following output (which are  
> the correct solution inserted):
> {{-2,1}, {-1,5}, [2..3], {-4,3}, {-2,2}}
> {-2, -1, 3, -4, 2}
> {1, 5, 2, 3, -2}

Ok, so it's two solutions and one output for the initial domains.  And  
that's exactly the two solutions that your model has.  What other  
solution did you expect?

Cheers,
	Guido




From kemmami at hotmail.com  Sun Sep  6 14:13:46 2009
From: kemmami at hotmail.com (amina kemmar)
Date: Sun, 6 Sep 2009 12:13:46 +0000
Subject: [gecode-users] A simple propagator
Message-ID: <SNT117-W26319666B85B3E25B91E97A4EC0@phx.gbl>


Hi everyone,

thank you Tias for the propagator's example that you make available in the mailing list,  it is very interesting, but i don't understand 

why you add the following statement, in the propagate method : 



x[i]=x[--n];


can we delete it?


if anyone have an idea could he give me an answer, thank you.


greetings,

Amina.

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
#include <gecode/kernel.hh>
#include <gecode/int.hh>

namespace myprop {
  using namespace ::Gecode;
  using namespace ::Gecode::Int;

  /**
   * \brief Base-class for simple cleaner
   */
  template <class V>
  class CleanerBool : public Propagator {
  protected:
    /// Boolean views
    ViewArray<V> x;

    /// Constructor for creation
    CleanerBool(Space& home, ViewArray<V>& x);
    /// Constructor for cloning \a p
    CleanerBool(Space& home, bool share, CleanerBool& p);
  public:
    /// Cost function (defined as low linear)
    virtual PropCost cost(const Space& home, const ModEventDelta& med) const;
    /// Delete propagator and return its size
//   virtual size_t dispose(Space& home);
    /// Create copy during cloning
    virtual Actor* copy(Space& home, bool share);
    /// Perform propagation
    virtual ExecStatus propagate(Space& home, const ModEventDelta& med);
    /// Post propagator
    static ExecStatus post(Space& home, ViewArray<V>& x);
  };

  /*
   * propagator implementation
   */
  template <class V>
  CleanerBool<V>::CleanerBool(Space& home, ViewArray<V>& x0)
    :  Propagator(home), x(x0) {
    x.subscribe(home,*this,PC_INT_VAL);
  }

  template <class V>
  forceinline size_t
  CleanerBool<V>::dispose(Space& home) {
    assert(!home->failed());
    x.cancel(home,*this,PC_INT_VAL);
    (void) Propagator::dispose(home);
    return sizeof(*this);
  }

  template <class V>
  forceinline
  CleanerBool<V>::CleanerBool(Space& home, bool share, CleanerBool& p)
    : Propagator(home,share,p) {
    x.update(home,share,p.x);
  }

  template <class V>
  PropCost
  CleanerBool<V>::cost(const Space&, const ModEventDelta&) const {
    // make sure this propagator is run as last before the fixpoint
    return PropCost::crazy(PropCost::HI, 100000);
    // in a real propagator, this would be something more sensible,
    // for example: PropCost::linear(PropCost::LO, x.size());
  }

  template <class V>
  ExecStatus
  CleanerBool<V>::post(Space& home, ViewArray<V>& x) {
    (void) new (home) CleanerBool<V>(home,x);
    return ES_OK;
  }

  template <class V>
  Actor*
  CleanerBool<V>::copy(Space& home, bool share) {
    return new (home) CleanerBool<V>(home,share,*this);
  }

  template <class V>
  ExecStatus
  CleanerBool<V>::propagate(Space& home, const ModEventDelta&) {
    int n = x.size();
    for (int i = n; i--; ) {
      if (x[i].zero()) {
        x[i]=x[--n];
      } else if (x[i].one()) {
        x[i]=x[--n];
      } else {
        GECODE_ME_CHECK( x[i].one(home) );
        x[i]=x[--n];
      } // all cases covered, so every var assigned and removed
    }
    x.size(n);

    if (n == 0) {
      return ES_SUBSUMED(*this,home);
    }
    return ES_FIX;
  }


  /** \brief Post propagator for cleanup of unassigned variables
   * Is run as last propagator (crazy_hi), sets unassigned variables to 1
   */
  void cleaner(Space& home, const BoolVarArgs& x) {
    if (home.failed()) return;

    ViewArray<BoolView> Vx(home, x);

    GECODE_ES_FAIL(home,(CleanerBool<BoolView>::post(home, Vx)));
  }

}
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////



_________________________________________________________________
Tchattez en direct en en vid?o avec vos amis !
http://www.windowslive.fr/messenger/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.ps.uni-sb.de/pipermail/users/attachments/20090906/c9e2c1ea/attachment.htm>

From martin.kreissig at lss.uni-stuttgart.de  Mon Sep  7 08:12:02 2009
From: martin.kreissig at lss.uni-stuttgart.de (Martin =?ISO-8859-1?Q?Krei=DFig?=)
Date: Mon, 07 Sep 2009 08:12:02 +0200
Subject: [gecode-users] Not all solutions, BAB vs. DFS
In-Reply-To: <6317C972-F33A-4502-A61C-2C7BDC89D4C8@ps.uni-sb.de>
References: <1252047965.3689.39.camel@pc114>
	<2DAC6D5B-600D-46C3-B0D7-B2FFF2BD1AB4@ps.uni-sb.de>
	<1252052329.3689.62.camel@pc114>
	<0DCA8E3F-BA49-45B1-A818-7C6B17A15F20@ps.uni-sb.de>
	<1252067640.3689.74.camel@pc114>
	<7FCDF1EF-A8C3-4629-9102-E5ABF67928BF@ps.uni-sb.de>
	<1252070932.3689.78.camel@pc114>
	<6317C972-F33A-4502-A61C-2C7BDC89D4C8@ps.uni-sb.de>
Message-ID: <1252303922.3987.3.camel@pc114>

Hi,

of course your right. I also inserted the solutions I had problems with
and obtained the correct results. So there must be a bug in the rest of
my code. 
sorry for the inconvenience and thank you for your help.

cheers
Martin

On Fri, 2009-09-04 at 21:27 +0200, Guido Tack wrote:

> Martin Krei?ig wrote:
> 
> > Alright. Thanks. But that is not the reason in my original code. I  
> > missed it when writing the example.
> >
> > How come you get 3 solutions? I get the following output (which are  
> > the correct solution inserted):
> > {{-2,1}, {-1,5}, [2..3], {-4,3}, {-2,2}}
> > {-2, -1, 3, -4, 2}
> > {1, 5, 2, 3, -2}
> 
> Ok, so it's two solutions and one output for the initial domains.  And  
> that's exactly the two solutions that your model has.  What other  
> solution did you expect?
> 
> Cheers,
> 	Guido


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.ps.uni-sb.de/pipermail/users/attachments/20090907/dbcdceba/attachment.htm>

From cschulte at kth.se  Mon Sep  7 09:51:47 2009
From: cschulte at kth.se (Christian Schulte)
Date: Mon, 7 Sep 2009 09:51:47 +0200
Subject: [gecode-users] A simple propagator
In-Reply-To: <SNT117-W26319666B85B3E25B91E97A4EC0@phx.gbl>
References: <SNT117-W26319666B85B3E25B91E97A4EC0@phx.gbl>
Message-ID: <000c01ca2f90$147e2d50$3d7a87f0$@se>

No, you can't delete. The idea is: the i-th view (that is, x[i]) is assigned
the last view in the array (x[n-1]) and the size of the array is shrunk by
one (--n). Unfortunately, the propagator Tias sent is non-sensical in that
it does not implement a constraint: its semantics is random!

 

The reason why you can't delete it here is that it is also used for
detecting subsumption: any propagator must at very latest report subsumption
if it is not failed and all of its views are assigned!

 

Christian

 

--

Christian Schulte, www.ict.kth.se/~cschulte/

 

From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf
Of amina kemmar
Sent: Sunday, September 06, 2009 2:14 PM
To: users at gecode.org
Subject: [gecode-users] A simple propagator

 

Hi everyone,

thank you Tias for the propagator's example that you make available in the
mailing list,  it is very interesting, but i don't understand 
why you add the following statement, in the propagate method : 

x[i]=x[--n];

can we delete it?

if anyone have an idea could he give me an answer, thank you.

greetings,
Amina.

////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////
////////
#include <gecode/kernel.hh>
#include <gecode/int.hh>

namespace myprop {
  using namespace ::Gecode;
  using namespace ::Gecode::Int;

  /**
   * \brief Base-class for simple cleaner
   */
  template <class V>
  class CleanerBool : public Propagator {
  protected:
    /// Boolean views
    ViewArray<V> x;

    /// Constructor for creation
    CleanerBool(Space& home, ViewArray<V>& x);
    /// Constructor for cloning \a p
    CleanerBool(Space& home, bool share, CleanerBool& p);
  public:
    /// Cost function (defined as low linear)
    virtual PropCost cost(const Space& home, const ModEventDelta& med)
const;
    /// Delete propagator and return its size
//   virtual size_t dispose(Space& home);
    /// Create copy during cloning
    virtual Actor* copy(Space& home, bool share);
    /// Perform propagation
    virtual ExecStatus propagate(Space& home, const ModEventDelta& med);
    /// Post propagator
    static ExecStatus post(Space& home, ViewArray<V>& x);
  };

  /*
   * propagator implementation
   */
  template <class V>
  CleanerBool<V>::CleanerBool(Space& home, ViewArray<V>& x0)
    :  Propagator(home), x(x0) {
    x.subscribe(home,*this,PC_INT_VAL);
  }

  template <class V>
  forceinline size_t
  CleanerBool<V>::dispose(Space& home) {
    assert(!home->failed());
    x.cancel(home,*this,PC_INT_VAL);
    (void) Propagator::dispose(home);
    return sizeof(*this);
  }

  template <class V>
  forceinline
  CleanerBool<V>::CleanerBool(Space& home, bool share, CleanerBool& p)
    : Propagator(home,share,p) {
    x.update(home,share,p.x);
  }

  template <class V>
  PropCost
  CleanerBool<V>::cost(const Space&, const ModEventDelta&) const {
    // make sure this propagator is run as last before the fixpoint
    return PropCost::crazy(PropCost::HI, 100000);
    // in a real propagator, this would be something more sensible,
    // for example: PropCost::linear(PropCost::LO, x.size());
  }

  template <class V>
  ExecStatus
  CleanerBool<V>::post(Space& home, ViewArray<V>& x) {
    (void) new (home) CleanerBool<V>(home,x);
    return ES_OK;
  }

  template <class V>
  Actor*
  CleanerBool<V>::copy(Space& home, bool share) {
    return new (home) CleanerBool<V>(home,share,*this);
  }

  template <class V>
  ExecStatus
  CleanerBool<V>::propagate(Space& home, const ModEventDelta&) {
    int n = x.size();
    for (int i = n; i--; ) {
      if (x[i].zero()) {
        x[i]=x[--n];
      } else if (x[i].one()) {
        x[i]=x[--n];
      } else {
        GECODE_ME_CHECK( x[i].one(home) );
        x[i]=x[--n];
      } // all cases covered, so every var assigned and removed
    }
    x.size(n);

    if (n == 0) {
      return ES_SUBSUMED(*this,home);
    }
    return ES_FIX;
  }


  /** \brief Post propagator for cleanup of unassigned variables
   * Is run as last propagator (crazy_hi), sets unassigned variables to 1
   */
  void cleaner(Space& home, const BoolVarArgs& x) {
    if (home.failed()) return;

    ViewArray<BoolView> Vx(home, x);

    GECODE_ES_FAIL(home,(CleanerBool<BoolView>::post(home, Vx)));
  }

}
////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////




  _____  

Achetez un nouveau PC et b?n?ficiez de Windows 7 d?s sa sortie ! En savoir
plus <http://www.portable-windows.com/> 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.ps.uni-sb.de/pipermail/users/attachments/20090907/6506d965/attachment.htm>

From alexandre.fayolle at logilab.fr  Tue Sep  8 14:47:01 2009
From: alexandre.fayolle at logilab.fr (Alexandre Fayolle)
Date: Tue, 8 Sep 2009 14:47:01 +0200
Subject: [gecode-users] compilation problem on windows + mingw32
Message-ID: <20090908124653.GA22055@crater.logilab.fr>

Hi everyone,

(appologies if this is the wrong mailing list)

I'm having some compilation problems. I want to compile a python extension
module which uses gecode 3.1. Python2.5 extensions require VisualStudio 2003
and gecode needs VS2008 (stop me if I'm wrong). So I'm currently giving a try
at mingw32. 

Unless I'm mistaken, the windows installer for gecode is meant to be used with
Visual Studio, so I'm attempting to recompile gecode with mingw32 from source. 
configure went fine (eventually), but make fails with the following message:

g++ -mno-cygwin -I. -DNDEBUG -Wextra -Wall -pipe -ggdb -O3 -fno-strict-aliasing
-ffast-math -mthreads  -DGECODE_BUILD_SEARCH -c -o gecode/search/stop.o  gecode/search/stop.cpp
In file included from ./gecode/search.hh:44,
                 from gecode/search/stop.cpp:38:
./gecode/support/timer.hh: In member function 'double Gecode::Support::Timer::stop()':
./gecode/support/timer.hh:83: erreur: 'timersub' was not declared in this scope

A quick google search didn't provide useful results. 

Editing gecode/support/config.hpp seems to solve this. Am I missing something obvious such as a mingw package? 

(By the way : is there a pre-built package with mingw32 available for downloading somewhere? This could be a great time-saver...)

-- 
Alexandre Fayolle                              LOGILAB, Paris (France)
Formations Python, Zope, Plone, Debian:  http://www.logilab.fr/formations
D?veloppement logiciel sur mesure:       http://www.logilab.fr/services
Informatique scientifique:               http://www.logilab.fr/science
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 481 bytes
Desc: Digital signature
URL: <http://www.ps.uni-sb.de/pipermail/users/attachments/20090908/e848bb19/attachment.pgp>

From zayenz at gmail.com  Tue Sep  8 15:52:00 2009
From: zayenz at gmail.com (Mikael Zayenz Lagerkvist)
Date: Tue, 8 Sep 2009 15:52:00 +0200
Subject: [gecode-users] compilation problem on windows + mingw32
In-Reply-To: <20090908124653.GA22055@crater.logilab.fr>
References: <20090908124653.GA22055@crater.logilab.fr>
Message-ID: <63b5c8b00909080652x3c426433w665b76be8f5623f9@mail.gmail.com>

Hi,

I'm not very familiar with mingw, and I don't know if it can be made
to compile Gecode. Please note that Gecode requires at least version
4.2 of gcc.

Apart from that, the use of timersub can be removed simply. Please see
attached patch for the change needed.

Cheers,
Mikael

2009/9/8 Alexandre Fayolle <alexandre.fayolle at logilab.fr>:
> Hi everyone,
>
> (appologies if this is the wrong mailing list)
>
> I'm having some compilation problems. I want to compile a python extension
> module which uses gecode 3.1. Python2.5 extensions require VisualStudio 2003
> and gecode needs VS2008 (stop me if I'm wrong). So I'm currently giving a try
> at mingw32.
>
> Unless I'm mistaken, the windows installer for gecode is meant to be used with
> Visual Studio, so I'm attempting to recompile gecode with mingw32 from source.
> configure went fine (eventually), but make fails with the following message:
>
> g++ -mno-cygwin -I. -DNDEBUG -Wextra -Wall -pipe -ggdb -O3 -fno-strict-aliasing
> -ffast-math -mthreads ?-DGECODE_BUILD_SEARCH -c -o gecode/search/stop.o ?gecode/search/stop.cpp
> In file included from ./gecode/search.hh:44,
> ? ? ? ? ? ? ? ? from gecode/search/stop.cpp:38:
> ./gecode/support/timer.hh: In member function 'double Gecode::Support::Timer::stop()':
> ./gecode/support/timer.hh:83: erreur: 'timersub' was not declared in this scope
>
> A quick google search didn't provide useful results.
>
> Editing gecode/support/config.hpp seems to solve this. Am I missing something obvious such as a mingw package?
>
> (By the way : is there a pre-built package with mingw32 available for downloading somewhere? This could be a great time-saver...)
>
> --
> Alexandre Fayolle ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?LOGILAB, Paris (France)
> Formations Python, Zope, Plone, Debian: ?http://www.logilab.fr/formations
> D?veloppement logiciel sur mesure: ? ? ? http://www.logilab.fr/services
> Informatique scientifique: ? ? ? ? ? ? ? http://www.logilab.fr/science
>
> -----BEGIN PGP SIGNATURE-----
> Version: GnuPG v1.4.9 (GNU/Linux)
>
> iQEVAwUBSqZSPV6T+PKoJ87eAQI4IQgAgMIjoXKXJ1s/41hA+AlTcLDq1LyvOKKh
> uOe+3ey5Aq8YRaYhJoCw2KJQDuJ8mm93iGxEXrJAz4ihl6Bn8GRf/w22bSmAUXn/
> 6Rtv04ij7C+b0qDq8gSYcy6mwP7vjCZWp2aAsRm+HubOsqBPdGF5k3fcLX+LUJDf
> j67k+/B19Vw3huXueRiYMiQUPG5xxKerx+pRTSdvWqrpLQEb/l7n9axfHOA2Deze
> xuIKIigdH9iMgQ/HSw/oGSXXDxcaNKBS2OPl04wadlt8dZt2Fjzcz+y5/VxpzG6b
> r+0Y7zq7CV3fQFqNb8TQBcBsWvHDmMhXxCIZ0enM3drgRM+RvpMCJQ==
> =PC0S
> -----END PGP SIGNATURE-----
>
> _______________________________________________
> Gecode users mailing list
> users at gecode.org
> https://www.gecode.org/mailman/listinfo/gecode-users
>
>



-- 
Mikael Zayenz Lagerkvist, http://www.ict.kth.se/~zayenz/
-------------- next part --------------
A non-text attachment was scrubbed...
Name: timersub-removal.patch
Type: text/x-diff
Size: 718 bytes
Desc: not available
URL: <http://www.ps.uni-sb.de/pipermail/users/attachments/20090908/24462317/attachment.patch>

From tgaroui at yahoo.de  Sat Sep 12 21:35:34 2009
From: tgaroui at yahoo.de (Tarek Garoui)
Date: Sat, 12 Sep 2009 19:35:34 +0000 (GMT)
Subject: [gecode-users] assigning IntVars
Message-ID: <45316.92177.qm@web25603.mail.ukl.yahoo.com>

Hello,

I am working with Gecode/J for my master thesis.

I created an IntVar like this:

IntVar id = new IntVar(this, "ID", new Integer(0), new Integer(max));

After that, I want to post a constraint consisting of a BExpr where I need the value of the IntVar id. But I get the following exception:
org.gecode.NotAssigned.

How can I assign values to an IntVar ?


Thanks.


      



From tack at ps.uni-sb.de  Mon Sep 14 19:26:02 2009
From: tack at ps.uni-sb.de (Guido Tack)
Date: Mon, 14 Sep 2009 19:26:02 +0200
Subject: [gecode-users] assigning IntVars
In-Reply-To: <45316.92177.qm@web25603.mail.ukl.yahoo.com>
References: <45316.92177.qm@web25603.mail.ukl.yahoo.com>
Message-ID: <D3F21B61-44D7-4A3F-8686-DE8847FF6CF8@ps.uni-sb.de>

Tarek Garoui wrote:
> I created an IntVar like this:
>
> IntVar id = new IntVar(this, "ID", new Integer(0), new Integer(max));
>
> After that, I want to post a constraint consisting of a BExpr where  
> I need the value of the IntVar id. But I get the following exception:
> org.gecode.NotAssigned.
>
> How can I assign values to an IntVar ?

You initialized the variable with a domain 0..max, so it's clearly not  
assigned.  It will be assigned by search, of course, but you cannot  
use the final value in your model.

Cheers,
	Guido




From kelbelj at fel.cvut.cz  Tue Sep 15 13:18:16 2009
From: kelbelj at fel.cvut.cz (Jan Kelbel)
Date: Tue, 15 Sep 2009 13:18:16 +0200
Subject: [gecode-users] DivBnd propagator
Message-ID: <4AAF77F8.9000503@fel.cvut.cz>

Hello everyone,

I was studying the DivBnd propagator, and in my opinion, there could be 
performed some propagation more tight.

It is in method
DivBnd<View>::propagate(Space& home, const ModEventDelta&).
In  section prop_xpx: starting at line 242 of divmod.hpp file (Gecode 
3.1.0 and also trunk)
at line 246:
GECODE_ME_CHECK(x0.gq(home, m<double>(x1.max(),x2.min()-1)));

Is it possible to rewrite this propagation to
GECODE_ME_CHECK(x0.gq(home, m<double>(x1.max(),x2.min()))); ?
I am not sure I did not overlooked something.

A minor remark: in file divmod.hpp at line 173 should be probably 
different comment.

Cheers, Jan



From tack at ps.uni-sb.de  Tue Sep 15 15:07:18 2009
From: tack at ps.uni-sb.de (Guido Tack)
Date: Tue, 15 Sep 2009 15:07:18 +0200
Subject: [gecode-users] DivBnd propagator
In-Reply-To: <4AAF77F8.9000503@fel.cvut.cz>
References: <4AAF77F8.9000503@fel.cvut.cz>
Message-ID: <3986CC21-3AFF-4395-954A-41F0E0A21BEE@ps.uni-sb.de>

Jan Kelbel wrote:
> I was studying the DivBnd propagator, and in my opinion, there could  
> be
> performed some propagation more tight.
>
> It is in method
> DivBnd<View>::propagate(Space& home, const ModEventDelta&).
> In  section prop_xpx: starting at line 242 of divmod.hpp file (Gecode
> 3.1.0 and also trunk)
> at line 246:
> GECODE_ME_CHECK(x0.gq(home, m<double>(x1.max(),x2.min()-1)));
>
> Is it possible to rewrite this propagation to
> GECODE_ME_CHECK(x0.gq(home, m<double>(x1.max(),x2.min()))); ?
> I am not sure I did not overlooked something.

You're absolutely right.  It also applies to all the other cases where  
x2.min() is used.  It's fixed in the trunk (hope I got it right this  
time).

> A minor remark: in file divmod.hpp at line 173 should be probably
> different comment.

Thanks!

Guido




From ashis.k.maity at lmco.com  Tue Sep 22 15:21:50 2009
From: ashis.k.maity at lmco.com (Maity, Ashis K)
Date: Tue, 22 Sep 2009 09:21:50 -0400
Subject: [gecode-users] Schedule serialized
Message-ID: <67B0B414F1419D49837D1FCA9B51825A07A48DEA@HVXMSPB.us.lmco.com>

Hello,

Is there anything in Gecode library that is equivalent to Schedule.serialized of Mozart/Oz (i.e., choose resources across the tasks so that same resources are not chosen at the same time in two different tasks)? If not, can some one provide with a couple of pointers as to how to implement it?

Thanks,

Ashis
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.ps.uni-sb.de/pipermail/users/attachments/20090922/9ca3b474/attachment.htm>

From cschulte at kth.se  Tue Sep 22 15:53:07 2009
From: cschulte at kth.se (Christian Schulte)
Date: Tue, 22 Sep 2009 15:53:07 +0200
Subject: [gecode-users] Schedule serialized
In-Reply-To: <67B0B414F1419D49837D1FCA9B51825A07A48DEA@HVXMSPB.us.lmco.com>
References: <67B0B414F1419D49837D1FCA9B51825A07A48DEA@HVXMSPB.us.lmco.com>
Message-ID: <000901ca3b8c$10b09a70$3211cf50$@se>

Hi,

 

You can use cumulatives. In the near future, Gecode will come with
constraints for disjunctive and cumulative scheduling (actually, for
disjunctive scheduling the next release will already contain propagators but
not yet good branchings, even though in experimental quality only).

 

Christian

 

--

Christian Schulte, www.ict.kth.se/~cschulte/

 

From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf
Of Maity, Ashis K
Sent: Tuesday, September 22, 2009 3:22 PM
To: 'gecode-users at gecode.org'
Subject: [gecode-users] Schedule serialized

 

Hello,

 

Is there anything in Gecode library that is equivalent to
Schedule.serialized of Mozart/Oz (i.e., choose resources across the tasks so
that same resources are not chosen at the same time in two different tasks)?
If not, can some one provide with a couple of pointers as to how to
implement it?

 

Thanks,

 

Ashis

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.ps.uni-sb.de/pipermail/users/attachments/20090922/3bdc4845/attachment.htm>

From kemmami at hotmail.com  Sat Sep 26 15:57:27 2009
From: kemmami at hotmail.com (amina kemmar)
Date: Sat, 26 Sep 2009 13:57:27 +0000
Subject: [gecode-users] A new variable composed by two IntVar
Message-ID: <SNT117-W521512AE861141A5A6A26BA4D80@phx.gbl>


Hello,

To model my problem, I need to use Point(x-coordinate, y-coordinate), I can separate the point in two variables (IntVar), I obtain:

...
IntVar Px;
IntVar Py;

IntVar Gx;
IntVar Gy;

Different_Point(*this,Px,Py,Gx,Gy, ICL_DOM); // It is a new constraint which post propagator for Px != Gx and Py != Gy
...
  
I want to implement the variable PointVar to obtain a model like this:

...
PointVar P;
PointVar G;
Different_Point(*this, P, G, ICL_DOM);
...

This new variable is composed by two IntVar, I don't understand how to implement it, if you can
give me the first step to do this, or any documentation or information about the implementation of a new variable?

thank you,
amina.

 		 	   		  
_________________________________________________________________
Vous voulez savoir ce que vous pouvez faire avec le nouveau Windows Live?? Lancez-vous !
http://www.microsoft.com/windows/windowslive/default.aspx
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.ps.uni-sb.de/pipermail/users/attachments/20090926/78bf00f8/attachment.htm>

From mmann at informatik.uni-freiburg.de  Sat Sep 26 17:23:24 2009
From: mmann at informatik.uni-freiburg.de (Martin Mann)
Date: Sat, 26 Sep 2009 17:23:24 +0200
Subject: [gecode-users] A new variable composed by two IntVar
In-Reply-To: <SNT117-W521512AE861141A5A6A26BA4D80@phx.gbl>
References: <SNT117-W521512AE861141A5A6A26BA4D80@phx.gbl>
Message-ID: <4ABE31EC.80700@informatik.uni-freiburg.de>


Hi Amina,

why dont you just post a distinct constraint on all variables? will 
solve your problem (a) more efficient and (b) you wont need to implement 
a new propagator. always good to go as far as possible with available 
and tested stuff to reduce coding efforts and errors..

what you can think about as well is to encode your 2D variables via an 
indexing instead of an explicit representation. But this only works if 
your 2D coordinates are within known bounds. by that you can do a unique 
integer encoding for all used 2D points and will need only one variable 
per point instead of two.
this is the way I did for my 3D coordinate problems and it worked well.

if you need a neighboring constraint for lattice points let me know.

have a nice weekend,

martin


amina kemmar schrieb:
> Hello,
> 
> To model my problem, I need to use Point(x-coordinate, y-coordinate), I can separate the point in two variables (IntVar), I obtain:
> 
> ...
> IntVar Px;
> IntVar Py;
> 
> IntVar Gx;
> IntVar Gy;
> 
> Different_Point(*this,Px,Py,Gx,Gy, ICL_DOM); // It is a new constraint which post propagator for Px != Gx and Py != Gy
> ...
>   
> I want to implement the variable PointVar to obtain a model like this:
> 
> ...
> PointVar P;
> PointVar G;
> Different_Point(*this, P, G, ICL_DOM);
> ...
> 
> This new variable is composed by two IntVar, I don't understand how to implement it, if you can
> give me the first step to do this, or any documentation or information about the implementation of a new variable?
> 
> thank you,
> amina.
> 
>  		 	   		  
> _________________________________________________________________
> Vous voulez savoir ce que vous pouvez faire avec le nouveau Windows Live ? Lancez-vous !
> http://www.microsoft.com/windows/windowslive/default.aspx
> 
> 
> ------------------------------------------------------------------------
> 
> _______________________________________________
> Gecode users mailing list
> users at gecode.org
> https://www.gecode.org/mailman/listinfo/gecode-users

-- 
Martin Mann, Dipl. Bioinf.
Bioinformatics - Inst. of Computer Science
Albert-Ludwigs-University Freiburg
Tel: ++49-761-203-8259
Fax: ++49-761-203-7462
http://www.bioinf.uni-freiburg.de/~mmann/



From tack at ps.uni-sb.de  Sat Sep 26 18:08:02 2009
From: tack at ps.uni-sb.de (Guido Tack)
Date: Sat, 26 Sep 2009 18:08:02 +0200
Subject: [gecode-users] A new variable composed by two IntVar
In-Reply-To: <SNT117-W521512AE861141A5A6A26BA4D80@phx.gbl>
References: <SNT117-W521512AE861141A5A6A26BA4D80@phx.gbl>
Message-ID: <5AE063C3-C603-4CAE-83B4-55A857979F95@ps.uni-sb.de>

Hi,

if you just want to encapsulate two IntVars to make modeling easier,  
simply implement a wrapper class that forwards the relevant operations  
(such as update) to the two component variables.  There's nothing  
special about IntVars, they're plain C++ objects and you can put them  
in whatever other class you like.

Shouldn't Different_Point implement Px != Gx OR Py != Gy rather than  
AND?

Cheers,
	Guido

amina kemmar wrote:

> Hello,
>
> To model my problem, I need to use Point(x-coordinate, y- 
> coordinate), I can separate the point in two variables (IntVar), I  
> obtain:
>
> ...
> IntVar Px;
> IntVar Py;
>
> IntVar Gx;
> IntVar Gy;
>
> Different_Point(*this,Px,Py,Gx,Gy, ICL_DOM); // It is a new  
> constraint which post propagator for Px != Gx and Py != Gy
> ...
>
> I want to implement the variable PointVar to obtain a model like this:
>
> ...
> PointVar P;
> PointVar G;
> Different_Point(*this, P, G, ICL_DOM);
> ...
>
> This new variable is composed by two IntVar, I don't understand how  
> to implement it, if you can
> give me the first step to do this, or any documentation or  
> information about the implementation of a new variable?
>
> thank you,
> amina.
>
>
> Vous voulez savoir ce que vous pouvez faire avec le nouveau Windows  
> Live ? Lancez-vous ! _______________________________________________
> Gecode users mailing list
> users at gecode.org
> https://www.gecode.org/mailman/listinfo/gecode-users

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.ps.uni-sb.de/pipermail/users/attachments/20090926/0189d4b3/attachment.htm>

From cmears at infotech.monash.edu.au  Sun Sep 27 13:04:56 2009
From: cmears at infotech.monash.edu.au (Chris Mears)
Date: Sun, 27 Sep 2009 21:04:56 +1000
Subject: [gecode-users] Customised static variable ordering
Message-ID: <87ocowtzqf.fsf@loki.cmears.id.au>

Hello Gecoders,

I'd like to perform a depth first search with a specific static variable
ordering.  I have a matrix of integer variables and I want to label the
top row first, then the left column, then the rest of the matrix in
standard top-to-bottom, left-to-right order.

The naive search shown here gives a standard top-to-bottom,
left-to-right ordering:

    class Problem : public Space {
        IntVarArray cells;
        Problem(int n) {
            Matrix<IntVarArray> m(cells, n, n);
            // ...
            // set up constraints on cells via m
            // ...
            branch(*this, cells, INT_VAR_NONE, INT_VAR_MIN);
        }
    }

I have managed to achieve the ordering I want, like this (with the new
bits marked with comments):

    class Problem : public Space {
        IntVarArray cells;
        IntVarArray ordering;   // *** added this array ***
        Problem(int n) {
            Matrix<IntVarArray> m(cells, n, n);
            // ...
            // set up constraints on cells via m
            // ...
            // *** added this block ***
            int index = 0;
            for (int c = 0 ; c < n ; c++)
                ordering[index++] = m(c,0);
            for (int r = 1 ; r < n ; r++)
                ordering[index++] = m(0,r);
            for (int r = 1 ; r < n ; r++)
                for (int c = 1 ; c < n ; c++)
                    ordering[index++] = m(c,r);
            // *** search on "ordering" instead of "cells" ***
            branch(*this, cells, INT_VAR_NONE, INT_VAR_MIN);
        }
    }

This seems to work.  My question: is this the best way to do it?  (It
just occurred to me that maybe it could be done using Slices -- is that
right?)

Thanks,
Chris



From tack at ps.uni-sb.de  Sun Sep 27 22:46:58 2009
From: tack at ps.uni-sb.de (Guido Tack)
Date: Sun, 27 Sep 2009 22:46:58 +0200
Subject: [gecode-users] Customised static variable ordering
In-Reply-To: <87ocowtzqf.fsf@loki.cmears.id.au>
References: <87ocowtzqf.fsf@loki.cmears.id.au>
Message-ID: <958F9720-3B03-47DD-9A60-C370C107AA88@ps.uni-sb.de>

Chris Mears wrote:

> Hello Gecoders,
>
> I'd like to perform a depth first search with a specific static  
> variable
> ordering.  I have a matrix of integer variables and I want to label  
> the
> top row first, then the left column, then the rest of the matrix in
> standard top-to-bottom, left-to-right order.
[...]
> I have managed to achieve the ordering I want, like this (with the new
> bits marked with comments):
>
>    class Problem : public Space {
>        IntVarArray cells;
>        IntVarArray ordering;   // *** added this array ***
>        Problem(int n) {
>            Matrix<IntVarArray> m(cells, n, n);
>            // ...
>            // set up constraints on cells via m
>            // ...
>            // *** added this block ***
>            int index = 0;
>            for (int c = 0 ; c < n ; c++)
>                ordering[index++] = m(c,0);
>            for (int r = 1 ; r < n ; r++)
>                ordering[index++] = m(0,r);

You can use m.row and m.col here, like this:
branch(*this, m.row(0), ...);
branch(*this, m.col(0), ...);

>            for (int r = 1 ; r < n ; r++)
>                for (int c = 1 ; c < n ; c++)
>                    ordering[index++] = m(c,r);
>            // *** search on "ordering" instead of "cells" ***
>            branch(*this, cells, INT_VAR_NONE, INT_VAR_MIN);

Here you could just branch over the whole thing, as at this point the  
first row and column will already be assigned and thus ignored in the  
branching:
branch(*this, cells, ...);

> This seems to work.  My question: is this the best way to do it?  (It
> just occurred to me that maybe it could be done using Slices -- is  
> that
> right?)

It's merely a matter of taste, not of efficiency, really.

Cheers,
	Guido




