<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [gecode-users] IntSet question
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:users%40gecode.org?Subject=Re%3A%20%5Bgecode-users%5D%20IntSet%20question&In-Reply-To=%3CC04D875F-9961-4310-9FAB-EAFE26A3D39C%40gecode.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002976.html">
   <LINK REL="Next"  HREF="002978.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[gecode-users] IntSet question</H1>
    <B>Guido Tack</B> 
    <A HREF="mailto:users%40gecode.org?Subject=Re%3A%20%5Bgecode-users%5D%20IntSet%20question&In-Reply-To=%3CC04D875F-9961-4310-9FAB-EAFE26A3D39C%40gecode.org%3E"
       TITLE="[gecode-users] IntSet question">tack at gecode.org
       </A><BR>
    <I>Mon Aug  2 17:31:46 CEST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="002976.html">[gecode-users] IntSet question
</A></li>
        <LI>Next message: <A HREF="002978.html">[gecode-users] IntSet question
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2977">[ date ]</a>
              <a href="thread.html#2977">[ thread ]</a>
              <a href="subject.html#2977">[ subject ]</a>
              <a href="author.html#2977">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Gustavo Gutierrez wrote:
&gt;<i> Probably what I am going to ask is not useful or is just to much particular to my case that does not worth have it, however, I wouldn't hesitate to ask :).
</I>&gt;<i> 
</I>&gt;<i> While writing a propagator I realized that keeping some state in it will lower the complexity. This propagator is on a finite set variable and what I does is to track &quot;the new elements in the glb&quot; and propagate according with its semantics. At the beginning to I was using an std::set to keep the &quot;old values&quot; and using it to compute the new elements:
</I>&gt;<i>  
</I>&gt;<i> new elements = current glb \  old values
</I>&gt;<i>  
</I>&gt;<i> The propagator was performing well but the memory consumption and the time to compute the intersection was quite high. After realizing that I start using an IntSet instead of a std::set to keep the data. The advantage is that the IntSet stores ranges and then is *hopefully* less memory hungry. There is also something nice, you can use all the iterators with them (range iterators). The only problem is that they are intended to be used only to represent variable domains in initializations or when posting constraints and this is reflected in the fact that they lack of &quot;modification operations&quot; in the API.
</I>&gt;<i>  
</I>&gt;<i> In my case I have to copy construct all the time and this is of course time consuming but far better than my previous implementation. Now my question, sounds it very crazy or stupid to use the IntSet in this way?, if it does not, then it would be nice to provide an specialization (via inheritance, for instance) that allows this kind of use.  What do you think?
</I>
Yes, that is very crazy :-)  However, there's a different data structure you can use in exactly the way you describe.  It's actually two data structures, LUBndSet and GLBndSet.  The difference is in the available operations: LUBndSet has intersectI and excludeI operations (i.e., it can shrink), and GLBndSet has an includeI operation (i.e., it can grow). These sets are used internally for implementing set variables. In your case, you'd use a GLBndSet (and includeI the current lower bound after each propagation).  There's an iterator called BndSetRanges that you can use on these sets.
You should have a look at the IntersectionN propagator, it uses a LUBndSet to remember the intersection of all assigned variables it has seen so far (it will show you how to initialize and copy these sets).

Cheers,
	Guido

-- 
Guido Tack, <A HREF="http://people.cs.kuleuven.be/~guido.tack/">http://people.cs.kuleuven.be/~guido.tack/</A>




</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002976.html">[gecode-users] IntSet question
</A></li>
	<LI>Next message: <A HREF="002978.html">[gecode-users] IntSet question
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2977">[ date ]</a>
              <a href="thread.html#2977">[ thread ]</a>
              <a href="subject.html#2977">[ subject ]</a>
              <a href="author.html#2977">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.gecode.org/cgi-bin/mailman/listinfo/users">More information about the users
mailing list</a><br>
</body></html>
