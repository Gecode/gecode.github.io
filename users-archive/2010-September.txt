From cschulte at kth.se  Wed Sep  1 16:42:36 2010
From: cschulte at kth.se (Christian Schulte)
Date: Wed, 1 Sep 2010 16:42:36 +0200
Subject: [gecode-users] Idea for extending ViewBrancher
In-Reply-To: <E5DB87E2-51B2-42EE-8ACD-3010917F216F@gecode.org>
References: <4C78C02B.9070905@felixbrandt.de>
	<000901cb48e4$fe636020$fb2a2060$@se>
	<E5DB87E2-51B2-42EE-8ACD-3010917F216F@gecode.org>
Message-ID: <002e01cb49e3$ebfe8180$c3fb8480$@se>

Hi,

I just added the idea to the trunk. Please find attached an excerpt of MPG
describing the idea.

Comments?

Best
Christian

--
Christian Schulte, www.ict.kth.se/~cschulte/


-----Original Message-----
From: Guido Tack [mailto:tack at gecode.org] 
Sent: Tuesday, August 31, 2010 1:34 PM
To: cschulte at kth.se
Cc: 'Felix Brandt'; users at gecode.org
Subject: Re: [gecode-users] Idea for extending ViewBrancher

Christian Schulte wrote:
> How about the following generalization: one can pass to a brancher a
filter
> function (that is, a member function of the space). If a filter function
is
> passed it is used for selecting variables for branching: only if the
filter
> function returns true for a variable, the variable is considered for
normal
> selection. The function can be passed through the normal options for
> branching (VarBranch) that is also used for tie breaking and randomized
> selection. 
> 
> Would that make sense? It is less general than what Guido proposed but
> easily available to the average modeler. I thought about it a little and I
> know how to efficiently implement it.

The filter function could get the index of the variable in addition to the
variable itself. That would make it just as general as my approach, I think
(you could use a different interval for each variable without having to go
through the whole array to find out which variable you are dealing with).

Cheers,
	Guido

-- 
Guido Tack, http://people.cs.kuleuven.be/~guido.tack/

-------------- next part --------------
A non-text attachment was scrubbed...
Name: filter.pdf
Type: application/pdf
Size: 50156 bytes
Desc: not available
URL: <http://www.gecode.org/pipermail/users/attachments/20100901/44281ee4/attachment-0001.pdf>

From manu.kaul at gmail.com  Fri Sep  3 13:12:23 2010
From: manu.kaul at gmail.com (Manu Kaul)
Date: Fri, 3 Sep 2010 13:12:23 +0200
Subject: [gecode-users] Gecode installation/compilation/usage
Message-ID: <AANLkTima2XsiMB+JO5+v21FY==z6sbB7dL=BWRy=iKQt@mail.gmail.com>

Hi all,
I have just downloaded the latest 3.4.0 macosx image and installed the
package on my machine. I am having problems when I run the program.
*
*
*My platform*

System Version: Mac OS X 10.6.4 (10F569)

Kernel Version: Darwin 10.4.0

*g++ version on macosx*
*
$ g++
i686-apple-darwin10-g++-4.2.1:
*

*How I compiled the sample.cpp code from the user guide.*
$ g++ -o sample sample.cpp *-framework gecode*
*
*
*The execution error*
$ ./sample
dyld: Library not loaded: QtGui.framework/Versions/4/QtGui
  Referenced from: /Library/Frameworks/gecode.framework/Versions/23/gecode
  Reason: image not found
Trace/BPT trap

I wonder what the command line options for macosx should be to run this
program? I am referring to MPG.pdf reference guide Section 2.3.2!
It says that I should have used gcc instead - but compiling a C++ program
with gcc gives me -->

*$ gcc -o sample sample.cpp -framework gecode*
Undefined symbols:
  "operator delete(void*)", referenced from:
      Gecode::Iter::Ranges::Virt::Iterator::~Iterator()in ccJBe0zW.o
      Gecode::Iter::Ranges::Virt::Iterator::~Iterator()in ccJBe0zW.o
      Gecode::Iter::Ranges::Virt::Union::~Union()in ccJBe0zW.o
      Gecode::Iter::Ranges::Virt::Union::~Union()in ccJBe0zW.o
      Gecode::Iter::Ranges::Virt::NaryUnion::~NaryUnion()in ccJBe0zW.o
      Gecode::Iter::Ranges::Virt::Inter::~Inter()in ccJBe0zW.o
      Gecode::Iter::Ranges::Virt::Inter::~Inter()in ccJBe0zW.o
      Gecode::Iter::Ranges::Virt::NaryInter::~NaryInter()in ccJBe0zW.o
      Gecode::Iter::Ranges::Virt::NaryInter::~NaryInter()in ccJBe0zW.o
      Gecode::Iter::Ranges::Virt::ComplVal::~ComplVal()in ccJBe0zW.o
      Gecode::Iter::Ranges::Virt::ComplVal::~ComplVal()in ccJBe0zW.o
      Gecode::Search::Stop::~Stop()in ccJBe0zW.o
      Gecode::Search::Stop::~Stop()in ccJBe0zW.o
      Gecode::Exception::~Exception()in ccJBe0zW.o
      Gecode::MemoryExhausted::~MemoryExhausted()in ccJBe0zW.o
      Gecode::MemoryExhausted::~MemoryExhausted()in ccJBe0zW.o
      Gecode::Gist::Print<SendMoreMoney>::~Print()in ccJBe0zW.o
      Gecode::Gist::Print<SendMoreMoney>::~Print()in ccJBe0zW.o
      Gecode::Iter::Ranges::Virt::NaryUnion::~NaryUnion()in ccJBe0zW.o
  "std::basic_string<char, std::char_traits<char>, std::allocator<char>
>::~basic_string()", referenced from:
      _main in ccJBe0zW.o
      _main in ccJBe0zW.o
      std::basic_ostream<char, std::char_traits<char> >&
Gecode::Int::print_view<char, std::char_traits<char>,
Gecode::Int::IntView>(std::basic_ostream<char, std::char_traits<char> >&,
Gecode::Int::IntView const&)in ccJBe0zW.o
      std::basic_ostream<char, std::char_traits<char> >&
Gecode::Int::print_view<char, std::char_traits<char>,
Gecode::Int::IntView>(std::basic_ostream<char, std::char_traits<char> >&,
Gecode::Int::IntView const&)in ccJBe0zW.o
      std::basic_ostream<char, std::char_traits<char> >& Gecode::operator<<
<char, std::char_traits<char>, Gecode::IntVar>(std::basic_ostream<char,
std::char_traits<char> >&, Gecode::VarArray<Gecode::IntVar> const&)in
ccJBe0zW.o
      std::basic_ostream<char, std::char_traits<char> >& Gecode::operator<<
<char, std::char_traits<char>, Gecode::IntVar>(std::basic_ostream<char,
std::char_traits<char> >&, Gecode::VarArray<Gecode::IntVar> const&)in
ccJBe0zW.o
  "std::basic_ostream<char, std::char_traits<char> >& std::endl<char,
std::char_traits<char> >(std::basic_ostream<char, std::char_traits<char>
>&)", referenced from:
      SendMoreMoney::print(std::basic_ostream<char, std::char_traits<char>
>&) constin ccJBe0zW.o
  "___dynamic_cast", referenced from:
      Gecode::Gist::Print<SendMoreMoney>::inspect(Gecode::Space const&)in
ccJBe0zW.o
  "___gxx_personality_v0", referenced from:
      std::__verify_grouping(char const*, unsigned long,
std::basic_string<char, std::char_traits<char>, std::allocator<char> >
const&)in ccJBe0zW.o
      ___tcf_0 in ccJBe0zW.o
      _main in ccJBe0zW.o
      operator new(unsigned long, void*)in ccJBe0zW.o
      operator delete(void*, void*)in ccJBe0zW.o
      std::ios_base::width(long)in ccJBe0zW.o
      Gecode::Home::Home(Gecode::Space&, Gecode::Propagator*)in ccJBe0zW.o
      Gecode::Iter::Ranges::Virt::Union::operator()()in ccJBe0zW.o
      Gecode::Iter::Ranges::Virt::Union::min() constin ccJBe0zW.o
      Gecode::Iter::Ranges::Virt::Union::max() constin ccJBe0zW.o
      Gecode::Iter::Ranges::Virt::Union::width() constin ccJBe0zW.o
      Gecode::Int::IntVarImpFwd::IntVarImpFwd(Gecode::Int::IntVarImp
const*)in ccJBe0zW.o
      Gecode::Search::Options::Options()in ccJBe0zW.o
      unsigned long const& std::min<unsigned long>(unsigned long const&,
unsigned long const&)in ccJBe0zW.o
      int const& std::max<int>(int const&, int const&)in ccJBe0zW.o
      Gecode::Iter::Ranges::Virt::Union::operator++()in ccJBe0zW.o
      int const& std::min<int>(int const&, int const&)in ccJBe0zW.o
      Gecode::IntVar::IntVar()in ccJBe0zW.o
      Gecode::IntVar::IntVar(Gecode::IntVar const&)in ccJBe0zW.o

 Gecode::Int::ViewRanges<Gecode::Int::IntView>::ViewRanges(Gecode::Int::IntView
const&)in ccJBe0zW.o
      Gecode::IntVarArray::IntVarArray()in ccJBe0zW.o
      Gecode::Gist::Inspector::Inspector()in ccJBe0zW.o
      void
std::swap<Gecode::Iter::Ranges::Virt::Iterator*>(Gecode::Iter::Ranges::Virt::Iterator*&,
Gecode::Iter::Ranges::Virt::Iterator*&)in ccJBe0zW.o
      Gecode::IntVar::~IntVar()in ccJBe0zW.o
      Gecode::Support::unmark(void*)in ccJBe0zW.o
      Gecode::VarArray<Gecode::IntVar>::operator[](int)in ccJBe0zW.o
      Gecode::ArgArrayBase<int>::operator[](int)in ccJBe0zW.o
      Gecode::ArgArrayBase<Gecode::IntVar>::operator[](int)in ccJBe0zW.o
      Gecode::VarArray<Gecode::IntVar>::operator[](int) constin ccJBe0zW.o
      Gecode::Int::IntVarImp::val() constin ccJBe0zW.o
      Gecode::VarImp<Gecode::Int::IntVarImpConf>::forward() constin
ccJBe0zW.o
      Gecode::SharedHandle::Object::~Object()in ccJBe0zW.o
      Gecode::Choice::~Choice()in ccJBe0zW.o
      Gecode::ChoiceVirtualBase::~ChoiceVirtualBase()in ccJBe0zW.o
      void Gecode::Heap::free<Gecode::IntVar>(Gecode::IntVar*, int)in
ccJBe0zW.o
      void Gecode::Heap::free<int>(int*, int)in ccJBe0zW.o
      Gecode::PrimArgArray<int>::~PrimArgArray()in ccJBe0zW.o
      Gecode::IntArgs::~IntArgs()in ccJBe0zW.o
      void
Gecode::Heap::free<Gecode::Gist::Inspector*>(Gecode::Gist::Inspector**,
int)in ccJBe0zW.o
      void
Gecode::Heap::free<Gecode::Gist::Comparator*>(Gecode::Gist::Comparator**,
int)in ccJBe0zW.o
      Gecode::Iter::Ranges::Virt::Iterator::~Iterator()in ccJBe0zW.o
      Gecode::Iter::Ranges::Virt::Iterator::~Iterator()in ccJBe0zW.o
      Gecode::Iter::Ranges::Virt::Union::~Union()in ccJBe0zW.o
      Gecode::Iter::Ranges::Virt::Union::~Union()in ccJBe0zW.o
      Gecode::Iter::Ranges::Virt::NaryUnion::~NaryUnion()in ccJBe0zW.o
      Gecode::Iter::Ranges::Virt::Inter::~Inter()in ccJBe0zW.o
      Gecode::Iter::Ranges::Virt::Inter::~Inter()in ccJBe0zW.o
      Gecode::Iter::Ranges::Virt::NaryInter::~NaryInter()in ccJBe0zW.o
      Gecode::Iter::Ranges::Virt::NaryInter::~NaryInter()in ccJBe0zW.o
      Gecode::Iter::Ranges::Virt::ComplVal::~ComplVal()in ccJBe0zW.o
      Gecode::Iter::Ranges::Virt::ComplVal::~ComplVal()in ccJBe0zW.o
      Gecode::Search::Stop::~Stop()in ccJBe0zW.o
      Gecode::Search::Stop::~Stop()in ccJBe0zW.o
      Gecode::MemoryExhausted::MemoryExhausted()in ccJBe0zW.o
      Gecode::IntArgs::IntArgs(int)in ccJBe0zW.o
      Gecode::IntVarArgs::IntVarArgs(int)in ccJBe0zW.o
      Gecode::Gist::Inspector**
Gecode::Heap::alloc<Gecode::Gist::Inspector*>(int)in ccJBe0zW.o
      Gecode::Gist::Comparator**
Gecode::Heap::alloc<Gecode::Gist::Comparator*>(int)in ccJBe0zW.o
      Gecode::Gist::Inspector**
Gecode::Heap::realloc<Gecode::Gist::Inspector>(Gecode::Gist::Inspector**,
int, int)in ccJBe0zW.o
      Gecode::Exception::~Exception()in ccJBe0zW.o
      Gecode::MemoryExhausted::~MemoryExhausted()in ccJBe0zW.o
      Gecode::MemoryExhausted::~MemoryExhausted()in ccJBe0zW.o
      Gecode::MemoryManager::alloc(Gecode::SharedMemory*, unsigned long)in
ccJBe0zW.o
      Gecode::IntVar* Gecode::Space::alloc<Gecode::IntVar>(int)in ccJBe0zW.o
      SendMoreMoney::SendMoreMoney(bool, SendMoreMoney&)in ccJBe0zW.o
      Gecode::Gist::Print<SendMoreMoney>::Print(std::basic_string<char,
std::char_traits<char>, std::allocator<char> > const&)in ccJBe0zW.o
      Gecode::Gist::Print<SendMoreMoney>::finalize()     in ccJBe0zW.o
      Gecode::Gist::Print<SendMoreMoney>::name()     in ccJBe0zW.o
      Gecode::Gist::Print<SendMoreMoney>::~Print()in ccJBe0zW.o
      Gecode::Gist::Print<SendMoreMoney>::~Print()in ccJBe0zW.o
      Gecode::Gist::dfs(Gecode::Space*, Gecode::Gist::Options const&)in
ccJBe0zW.o
      Gecode::Iter::Ranges::Virt::ComplVal::operator++()in ccJBe0zW.o
      Gecode::Iter::Ranges::Virt::NaryInter::operator++()in ccJBe0zW.o
      Gecode::Iter::Ranges::Virt::Inter::operator++()in ccJBe0zW.o
      Gecode::Iter::Ranges::Virt::ComplVal::operator()()in ccJBe0zW.o
      Gecode::Iter::Ranges::Virt::NaryInter::operator()()in ccJBe0zW.o
      Gecode::Iter::Ranges::Virt::Inter::operator()()in ccJBe0zW.o
      Gecode::Iter::Ranges::Virt::NaryUnion::operator()()in ccJBe0zW.o
      Gecode::Iter::Ranges::Virt::ComplVal::min() constin ccJBe0zW.o
      Gecode::Iter::Ranges::Virt::NaryInter::min() constin ccJBe0zW.o
      Gecode::Iter::Ranges::Virt::Inter::min() constin ccJBe0zW.o
      Gecode::Iter::Ranges::Virt::NaryUnion::min() constin ccJBe0zW.o
      Gecode::Iter::Ranges::Virt::ComplVal::max() constin ccJBe0zW.o
      Gecode::Iter::Ranges::Virt::NaryInter::max() constin ccJBe0zW.o
      Gecode::Iter::Ranges::Virt::Inter::max() constin ccJBe0zW.o
      Gecode::Iter::Ranges::Virt::NaryUnion::max() constin ccJBe0zW.o
      Gecode::Iter::Ranges::Virt::ComplVal::width() constin ccJBe0zW.o
      Gecode::Iter::Ranges::Virt::NaryInter::width() constin ccJBe0zW.o
      Gecode::Iter::Ranges::Virt::Inter::width() constin ccJBe0zW.o
      Gecode::Iter::Ranges::Virt::NaryUnion::width() constin ccJBe0zW.o
      std::basic_ostream<char, std::char_traits<char> >&
Gecode::Int::print_view<char, std::char_traits<char>,
Gecode::Int::IntView>(std::basic_ostream<char, std::char_traits<char> >&,
Gecode::Int::IntView const&)in ccJBe0zW.o
      std::basic_ostream<char, std::char_traits<char> >&
Gecode::Int::operator<< <char, std::char_traits<char>
>(std::basic_ostream<char, std::char_traits<char> >&, Gecode::Int::IntView
const&)in ccJBe0zW.o
      Gecode::Iter::Ranges::Virt::NaryUnion::operator++()in ccJBe0zW.o
      Gecode::Int::IntView::IntView(Gecode::IntVar const&)in ccJBe0zW.o
      std::basic_ostream<char, std::char_traits<char> >& Gecode::operator<<
<char, std::char_traits<char> >(std::basic_ostream<char,
std::char_traits<char> >&, Gecode::IntVar const&)in ccJBe0zW.o
      std::basic_ostream<char, std::char_traits<char> >& Gecode::operator<<
<char, std::char_traits<char>, Gecode::IntVar>(std::basic_ostream<char,
std::char_traits<char> >&, Gecode::VarArray<Gecode::IntVar> const&)in
ccJBe0zW.o
      SendMoreMoney::print(std::basic_ostream<char, std::char_traits<char>
>&) constin ccJBe0zW.o
      Gecode::Gist::Print<SendMoreMoney>::inspect(Gecode::Space const&)in
ccJBe0zW.o

 Gecode::VarArgArray<Gecode::IntVar>::VarArgArray(Gecode::VarArray<Gecode::IntVar>
const&)in ccJBe0zW.o
      Gecode::IntVarArgs::IntVarArgs(Gecode::VarArray<Gecode::IntVar>
const&)in ccJBe0zW.o
      Gecode::SharedHandle::Object::~Object()in ccJBe0zW.o
      Gecode::DFA::DFAI::~DFAI()in ccJBe0zW.o
      Gecode::DFA::DFAI::~DFAI()in ccJBe0zW.o
      Gecode::SharedHandle::Object::~Object()in ccJBe0zW.o
      Gecode::Choice::~Choice()in ccJBe0zW.o
      Gecode::ChoiceVirtualBase::~ChoiceVirtualBase()in ccJBe0zW.o
      Gecode::Iter::Ranges::Virt::NaryUnion::~NaryUnion()in ccJBe0zW.o
      Gecode::VarArgArray<Gecode::IntVar>::~VarArgArray()in ccJBe0zW.o
      Gecode::IntVarArgs::~IntVarArgs()in ccJBe0zW.o
      SendMoreMoney::SendMoreMoney()in ccJBe0zW.o
      SendMoreMoney::~SendMoreMoney()in ccJBe0zW.o
      SendMoreMoney::~SendMoreMoney()in ccJBe0zW.o
      Gecode::Gist::Options::_I::~_I()in ccJBe0zW.o
      Gecode::Gist::Options::~Options()in ccJBe0zW.o
      SendMoreMoney::copy(bool)  in ccJBe0zW.o
      Gecode::Gist::Options::_I::_I() in ccJBe0zW.o
      Gecode::Gist::Options::Options()in ccJBe0zW.o
      Gecode::Support::DynamicArray<Gecode::Gist::Inspector*,
Gecode::Heap>::resize(int)in ccJBe0zW.o
      Gecode::Support::DynamicArray<Gecode::Gist::Inspector*,
Gecode::Heap>::operator[](int)in ccJBe0zW.o
      __static_initialization_and_destruction_0(int, int)in ccJBe0zW.o
      global constructors keyed to mainin ccJBe0zW.o
      CIE in ccJBe0zW.o
  "___cxa_bad_cast", referenced from:
      Gecode::Gist::Print<SendMoreMoney>::inspect(Gecode::Space const&)in
ccJBe0zW.o
  "std::basic_ios<char, std::char_traits<char>
>::copyfmt(std::basic_ios<char, std::char_traits<char> > const&)",
referenced from:
      std::basic_ostream<char, std::char_traits<char> >&
Gecode::Int::print_view<char, std::char_traits<char>,
Gecode::Int::IntView>(std::basic_ostream<char, std::char_traits<char> >&,
Gecode::Int::IntView const&)in ccJBe0zW.o
      std::basic_ostream<char, std::char_traits<char> >& Gecode::operator<<
<char, std::char_traits<char>, Gecode::IntVar>(std::basic_ostream<char,
std::char_traits<char> >&, Gecode::VarArray<Gecode::IntVar> const&)in
ccJBe0zW.o
  "std::ios_base::Init::~Init()", referenced from:
      ___tcf_0 in ccJBe0zW.o
  "std::basic_ostream<char, std::char_traits<char> >& std::operator<<
<std::char_traits<char> >(std::basic_ostream<char, std::char_traits<char>
>&, char)", referenced from:
      std::basic_ostream<char, std::char_traits<char> >&
Gecode::Int::print_view<char, std::char_traits<char>,
Gecode::Int::IntView>(std::basic_ostream<char, std::char_traits<char> >&,
Gecode::Int::IntView const&)in ccJBe0zW.o
      std::basic_ostream<char, std::char_traits<char> >&
Gecode::Int::print_view<char, std::char_traits<char>,
Gecode::Int::IntView>(std::basic_ostream<char, std::char_traits<char> >&,
Gecode::Int::IntView const&)in ccJBe0zW.o
      std::basic_ostream<char, std::char_traits<char> >&
Gecode::Int::print_view<char, std::char_traits<char>,
Gecode::Int::IntView>(std::basic_ostream<char, std::char_traits<char> >&,
Gecode::Int::IntView const&)in ccJBe0zW.o
      std::basic_ostream<char, std::char_traits<char> >&
Gecode::Int::print_view<char, std::char_traits<char>,
Gecode::Int::IntView>(std::basic_ostream<char, std::char_traits<char> >&,
Gecode::Int::IntView const&)in ccJBe0zW.o
      std::basic_ostream<char, std::char_traits<char> >&
Gecode::Int::print_view<char, std::char_traits<char>,
Gecode::Int::IntView>(std::basic_ostream<char, std::char_traits<char> >&,
Gecode::Int::IntView const&)in ccJBe0zW.o
      std::basic_ostream<char, std::char_traits<char> >& Gecode::operator<<
<char, std::char_traits<char>, Gecode::IntVar>(std::basic_ostream<char,
std::char_traits<char> >&, Gecode::VarArray<Gecode::IntVar> const&)in
ccJBe0zW.o
      std::basic_ostream<char, std::char_traits<char> >& Gecode::operator<<
<char, std::char_traits<char>, Gecode::IntVar>(std::basic_ostream<char,
std::char_traits<char> >&, Gecode::VarArray<Gecode::IntVar> const&)in
ccJBe0zW.o
  "std::basic_string<char, std::char_traits<char>, std::allocator<char>
>::operator[](unsigned long) const", referenced from:
      std::__verify_grouping(char const*, unsigned long,
std::basic_string<char, std::char_traits<char>, std::allocator<char> >
const&)in ccJBe0zW.o
      std::__verify_grouping(char const*, unsigned long,
std::basic_string<char, std::char_traits<char>, std::allocator<char> >
const&)in ccJBe0zW.o
      std::__verify_grouping(char const*, unsigned long,
std::basic_string<char, std::char_traits<char>, std::allocator<char> >
const&)in ccJBe0zW.o
  "std::allocator<char>::allocator()", referenced from:
      _main in ccJBe0zW.o
  "___cxa_pure_virtual", referenced from:
      vtable for Gecode::Search::Stopin ccJBe0zW.o
      vtable for Gecode::Iter::Ranges::Virt::Iteratorin ccJBe0zW.o
      vtable for Gecode::Iter::Ranges::Virt::Iteratorin ccJBe0zW.o
      vtable for Gecode::Iter::Ranges::Virt::Iteratorin ccJBe0zW.o
      vtable for Gecode::Iter::Ranges::Virt::Iteratorin ccJBe0zW.o
      vtable for Gecode::Iter::Ranges::Virt::Iteratorin ccJBe0zW.o
      vtable for Gecode::ChoiceVirtualBasein ccJBe0zW.o
      vtable for Gecode::ChoiceVirtualBasein ccJBe0zW.o
      vtable for Gecode::Choicein ccJBe0zW.o
      vtable for Gecode::SharedHandle::Objectin ccJBe0zW.o
  "std::basic_string<char, std::char_traits<char>, std::allocator<char>
>::basic_string(char const*, std::allocator<char> const&)", referenced from:
      _main in ccJBe0zW.o
  "std::basic_ostream<char, std::char_traits<char>
>::operator<<(std::basic_ostream<char, std::char_traits<char> >&
(*)(std::basic_ostream<char, std::char_traits<char> >&))", referenced from:
      SendMoreMoney::print(std::basic_ostream<char, std::char_traits<char>
>&) constin ccJBe0zW.o
  "std::basic_ostream<char, std::char_traits<char> >::operator<<(int)",
referenced from:
      std::basic_ostream<char, std::char_traits<char> >&
Gecode::Int::print_view<char, std::char_traits<char>,
Gecode::Int::IntView>(std::basic_ostream<char, std::char_traits<char> >&,
Gecode::Int::IntView const&)in ccJBe0zW.o
      std::basic_ostream<char, std::char_traits<char> >&
Gecode::Int::print_view<char, std::char_traits<char>,
Gecode::Int::IntView>(std::basic_ostream<char, std::char_traits<char> >&,
Gecode::Int::IntView const&)in ccJBe0zW.o
      std::basic_ostream<char, std::char_traits<char> >&
Gecode::Int::print_view<char, std::char_traits<char>,
Gecode::Int::IntView>(std::basic_ostream<char, std::char_traits<char> >&,
Gecode::Int::IntView const&)in ccJBe0zW.o
      std::basic_ostream<char, std::char_traits<char> >&
Gecode::Int::print_view<char, std::char_traits<char>,
Gecode::Int::IntView>(std::basic_ostream<char, std::char_traits<char> >&,
Gecode::Int::IntView const&)in ccJBe0zW.o
      std::basic_ostream<char, std::char_traits<char> >&
Gecode::Int::print_view<char, std::char_traits<char>,
Gecode::Int::IntView>(std::basic_ostream<char, std::char_traits<char> >&,
Gecode::Int::IntView const&)in ccJBe0zW.o
      std::basic_ostream<char, std::char_traits<char> >&
Gecode::Int::print_view<char, std::char_traits<char>,
Gecode::Int::IntView>(std::basic_ostream<char, std::char_traits<char> >&,
Gecode::Int::IntView const&)in ccJBe0zW.o
  "std::basic_string<char, std::char_traits<char>, std::allocator<char>
>::size() const", referenced from:
      std::__verify_grouping(char const*, unsigned long,
std::basic_string<char, std::char_traits<char>, std::allocator<char> >
const&)in ccJBe0zW.o
  "std::basic_ostringstream<char, std::char_traits<char>,
std::allocator<char> >::~basic_ostringstream()", referenced from:
      std::basic_ostream<char, std::char_traits<char> >&
Gecode::Int::print_view<char, std::char_traits<char>,
Gecode::Int::IntView>(std::basic_ostream<char, std::char_traits<char> >&,
Gecode::Int::IntView const&)in ccJBe0zW.o
      std::basic_ostream<char, std::char_traits<char> >&
Gecode::Int::print_view<char, std::char_traits<char>,
Gecode::Int::IntView>(std::basic_ostream<char, std::char_traits<char> >&,
Gecode::Int::IntView const&)in ccJBe0zW.o
      std::basic_ostream<char, std::char_traits<char> >& Gecode::operator<<
<char, std::char_traits<char>, Gecode::IntVar>(std::basic_ostream<char,
std::char_traits<char> >&, Gecode::VarArray<Gecode::IntVar> const&)in
ccJBe0zW.o
      std::basic_ostream<char, std::char_traits<char> >& Gecode::operator<<
<char, std::char_traits<char>, Gecode::IntVar>(std::basic_ostream<char,
std::char_traits<char> >&, Gecode::VarArray<Gecode::IntVar> const&)in
ccJBe0zW.o
  "std::basic_ostream<char, std::char_traits<char> >& std::operator<< <char,
std::char_traits<char>, std::allocator<char> >(std::basic_ostream<char,
std::char_traits<char> >&, std::basic_string<char, std::char_traits<char>,
std::allocator<char> > const&)", referenced from:
      std::basic_ostream<char, std::char_traits<char> >&
Gecode::Int::print_view<char, std::char_traits<char>,
Gecode::Int::IntView>(std::basic_ostream<char, std::char_traits<char> >&,
Gecode::Int::IntView const&)in ccJBe0zW.o
      std::basic_ostream<char, std::char_traits<char> >& Gecode::operator<<
<char, std::char_traits<char>, Gecode::IntVar>(std::basic_ostream<char,
std::char_traits<char> >&, Gecode::VarArray<Gecode::IntVar> const&)in
ccJBe0zW.o
  "std::basic_ostream<char, std::char_traits<char> >& std::operator<<
<std::char_traits<char> >(std::basic_ostream<char, std::char_traits<char>
>&, char const*)", referenced from:
      std::basic_ostream<char, std::char_traits<char> >&
Gecode::Int::print_view<char, std::char_traits<char>,
Gecode::Int::IntView>(std::basic_ostream<char, std::char_traits<char> >&,
Gecode::Int::IntView const&)in ccJBe0zW.o
      std::basic_ostream<char, std::char_traits<char> >&
Gecode::Int::print_view<char, std::char_traits<char>,
Gecode::Int::IntView>(std::basic_ostream<char, std::char_traits<char> >&,
Gecode::Int::IntView const&)in ccJBe0zW.o
      std::basic_ostream<char, std::char_traits<char> >& Gecode::operator<<
<char, std::char_traits<char>, Gecode::IntVar>(std::basic_ostream<char,
std::char_traits<char> >&, Gecode::VarArray<Gecode::IntVar> const&)in
ccJBe0zW.o
  "vtable for __cxxabiv1::__class_type_info", referenced from:
      typeinfo for Gecode::Search::Stopin ccJBe0zW.o
      typeinfo for Gecode::Iter::Ranges::Virt::Iteratorin ccJBe0zW.o
      typeinfo for Gecode::ChoiceVirtualBasein ccJBe0zW.o
      typeinfo for Gecode::Choicein ccJBe0zW.o
      typeinfo for Gecode::SharedHandle::Objectin ccJBe0zW.o
      typeinfo for Gecode::Iter::Ranges::MinMaxin ccJBe0zW.o
  "std::allocator<char>::~allocator()", referenced from:
      _main in ccJBe0zW.o
      _main in ccJBe0zW.o
  "std::basic_ostringstream<char, std::char_traits<char>,
std::allocator<char> >::basic_ostringstream(std::_Ios_Openmode)", referenced
from:
      std::basic_ostream<char, std::char_traits<char> >&
Gecode::Int::print_view<char, std::char_traits<char>,
Gecode::Int::IntView>(std::basic_ostream<char, std::char_traits<char> >&,
Gecode::Int::IntView const&)in ccJBe0zW.o
      std::basic_ostream<char, std::char_traits<char> >& Gecode::operator<<
<char, std::char_traits<char>, Gecode::IntVar>(std::basic_ostream<char,
std::char_traits<char> >&, Gecode::VarArray<Gecode::IntVar> const&)in
ccJBe0zW.o
  "vtable for __cxxabiv1::__si_class_type_info", referenced from:
      typeinfo for Gecode::DFA::DFAIin ccJBe0zW.o
      typeinfo for Gecode::MemoryExhaustedin ccJBe0zW.o
      typeinfo for SendMoreMoneyin ccJBe0zW.o
  "vtable for __cxxabiv1::__vmi_class_type_info", referenced from:
      typeinfo for Gecode::Iter::Ranges::Virt::ComplValin ccJBe0zW.o
      typeinfo for Gecode::Iter::Ranges::Virt::NaryInterin ccJBe0zW.o
      typeinfo for Gecode::Iter::Ranges::Virt::Interin ccJBe0zW.o
      typeinfo for Gecode::Iter::Ranges::Virt::NaryUnionin ccJBe0zW.o
      typeinfo for Gecode::Iter::Ranges::Virt::Unionin ccJBe0zW.o
      typeinfo for Gecode::Gist::Print<SendMoreMoney>in ccJBe0zW.o
  "std::ios_base::Init::Init()", referenced from:
      __static_initialization_and_destruction_0(int, int)in ccJBe0zW.o
  "___cxa_allocate_exception", referenced from:
      _main in ccJBe0zW.o
      Gecode::IntArgs::IntArgs(int)in ccJBe0zW.o
      Gecode::IntVarArgs::IntVarArgs(int)in ccJBe0zW.o
      Gecode::Gist::Inspector**
Gecode::Heap::alloc<Gecode::Gist::Inspector*>(int)in ccJBe0zW.o
      Gecode::Gist::Comparator**
Gecode::Heap::alloc<Gecode::Gist::Comparator*>(int)in ccJBe0zW.o
      Gecode::Gist::Inspector**
Gecode::Heap::realloc<Gecode::Gist::Inspector>(Gecode::Gist::Inspector**,
int, int)in ccJBe0zW.o

 Gecode::VarArgArray<Gecode::IntVar>::VarArgArray(Gecode::VarArray<Gecode::IntVar>
const&)in ccJBe0zW.o
      SendMoreMoney::copy(bool)  in ccJBe0zW.o
      Gecode::Gist::Options::_I::_I() in ccJBe0zW.o
      Gecode::Gist::Options::_I::_I() in ccJBe0zW.o
      Gecode::Gist::Options::_I::_I() in ccJBe0zW.o
      Gecode::Gist::Options::_I::_I() in ccJBe0zW.o
      Gecode::Support::DynamicArray<Gecode::Gist::Inspector*,
Gecode::Heap>::resize(int)in ccJBe0zW.o
  "std::exception::~exception()", referenced from:
      Gecode::Exception::~Exception()in ccJBe0zW.o
  "___cxa_throw", referenced from:
      _main in ccJBe0zW.o
      Gecode::IntArgs::IntArgs(int)in ccJBe0zW.o
      Gecode::IntVarArgs::IntVarArgs(int)in ccJBe0zW.o
      Gecode::Gist::Inspector**
Gecode::Heap::alloc<Gecode::Gist::Inspector*>(int)in ccJBe0zW.o
      Gecode::Gist::Comparator**
Gecode::Heap::alloc<Gecode::Gist::Comparator*>(int)in ccJBe0zW.o
      Gecode::Gist::Inspector**
Gecode::Heap::realloc<Gecode::Gist::Inspector>(Gecode::Gist::Inspector**,
int, int)in ccJBe0zW.o

 Gecode::VarArgArray<Gecode::IntVar>::VarArgArray(Gecode::VarArray<Gecode::IntVar>
const&)in ccJBe0zW.o
      SendMoreMoney::copy(bool)  in ccJBe0zW.o
      Gecode::Gist::Options::_I::_I() in ccJBe0zW.o
      Gecode::Gist::Options::_I::_I() in ccJBe0zW.o
      Gecode::Gist::Options::_I::_I() in ccJBe0zW.o
      Gecode::Gist::Options::_I::_I() in ccJBe0zW.o
      Gecode::Support::DynamicArray<Gecode::Gist::Inspector*,
Gecode::Heap>::resize(int)in ccJBe0zW.o
  "std::basic_ostringstream<char, std::char_traits<char>,
std::allocator<char> >::str() const", referenced from:
      std::basic_ostream<char, std::char_traits<char> >&
Gecode::Int::print_view<char, std::char_traits<char>,
Gecode::Int::IntView>(std::basic_ostream<char, std::char_traits<char> >&,
Gecode::Int::IntView const&)in ccJBe0zW.o
      std::basic_ostream<char, std::char_traits<char> >& Gecode::operator<<
<char, std::char_traits<char>, Gecode::IntVar>(std::basic_ostream<char,
std::char_traits<char> >&, Gecode::VarArray<Gecode::IntVar> const&)in
ccJBe0zW.o
ld: symbol(s) not found
collect2: ld returned 1 exit status


sample.cpp source I used

/*
 *  Authors:
 *    Christian Schulte <schulte at gecode.org>
 *
 *  Copyright:
 *    Christian Schulte, 2008-2010
 *
 *  Permission is hereby granted, free of charge, to any person obtaining
 *  a copy of this software, to deal in the software without restriction,
 *  including without limitation the rights to use, copy, modify, merge,
 *  publish, distribute, sublicense, and/or sell copies of the software,
 *  and to permit persons to whom the software is furnished to do so,
subject
 *  to the following conditions:
 *
 *  The above copyright notice and this permission notice shall be
 *  included in all copies or substantial portions of the software.
 *
 *  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 *  EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 *  MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 *  NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 *  LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 *  OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 *  WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 *
 */

#include <gecode/int.hh>
#include <gecode/gist.hh>

using namespace Gecode;

class SendMoreMoney : public Space {
protected:
  IntVarArray l;
public:
  SendMoreMoney(void) : l(*this, 8, 0, 9) {
    IntVar s(l[0]), e(l[1]), n(l[2]), d(l[3]),
           m(l[4]), o(l[5]), r(l[6]), y(l[7]);
    rel(*this, s, IRT_NQ, 0);
    rel(*this, m, IRT_NQ, 0);
    distinct(*this, l);
    IntArgs c(4+4+5); IntVarArgs x(4+4+5);
    c[0]=1000; c[1]=100; c[2]=10; c[3]=1;
    x[0]=s;    x[1]=e;   x[2]=n;  x[3]=d;
    c[4]=1000; c[5]=100; c[6]=10; c[7]=1;
    x[4]=m;    x[5]=o;   x[6]=r;  x[7]=e;
    c[8]=-10000; c[9]=-1000; c[10]=-100; c[11]=-10; c[12]=-1;
    x[8]=m;      x[9]=o;     x[10]=n;    x[11]=e;   x[12]=y;
    linear(*this, c, x, IRT_EQ, 0);
    branch(*this, l, INT_VAR_SIZE_MIN, INT_VAL_MIN);
  }
  SendMoreMoney(bool share, SendMoreMoney& s) : Space(share, s) {
    l.update(*this, share, s.l);
  }
  virtual Space* copy(bool share) {
    return new SendMoreMoney(share,*this);
  }
  void print(std::ostream& os) const {
    os << l << std::endl;
  }
};

int main(int argc, char* argv[]) {
  SendMoreMoney* m = new SendMoreMoney;
  Gist::Print<SendMoreMoney> p("Print solution");
  Gist::Options o;
  o.inspect.click(&p);
  Gist::dfs(m,o);
  delete m;
  return 0;
}


Thanks,
M
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.gecode.org/pipermail/users/attachments/20100903/f237a45e/attachment-0001.htm>

From tack at gecode.org  Fri Sep  3 13:19:54 2010
From: tack at gecode.org (Guido Tack)
Date: Fri, 3 Sep 2010 13:19:54 +0200
Subject: [gecode-users] Gecode installation/compilation/usage
In-Reply-To: <AANLkTima2XsiMB+JO5+v21FY==z6sbB7dL=BWRy=iKQt@mail.gmail.com>
References: <AANLkTima2XsiMB+JO5+v21FY==z6sbB7dL=BWRy=iKQt@mail.gmail.com>
Message-ID: <954BCD83-3368-4BD6-9E07-16E0BBFB9A0B@gecode.org>

Manu Kaul wrote:

> Hi all,
> I have just downloaded the latest 3.4.0 macosx image and installed the package on my machine. I am having problems when I run the program. 
> 
> My platform
> System Version:	Mac OS X 10.6.4 (10F569)
> Kernel Version:	Darwin 10.4.0
> 
> g++ version on macosx
> $ g++
> i686-apple-darwin10-g++-4.2.1:
> 
> How I compiled the sample.cpp code from the user guide.
> $ g++ -o sample sample.cpp -framework gecode
> 
> The execution error 
> $ ./sample 
> dyld: Library not loaded: QtGui.framework/Versions/4/QtGui
>   Referenced from: /Library/Frameworks/gecode.framework/Versions/23/gecode
>   Reason: image not found
> Trace/BPT trap

You have to install the Qt framework as well, as noted on our download pages.

> I wonder what the command line options for macosx should be to run this program? I am referring to MPG.pdf reference guide Section 2.3.2! 
> It says that I should have used gcc instead - but compiling a C++ program with gcc gives me -->

This refers to gcc as the "GNU compiler collection".  In order to compile C++ programs, you have to invoke it as g++.

I added a few sentences to MPG to clarify these two points.

Cheers,
	Guido

-- 
Guido Tack, http://people.cs.kuleuven.be/~guido.tack/

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.gecode.org/pipermail/users/attachments/20100903/be8e099e/attachment.htm>

From tales at talesp.inf.br  Sun Sep  5 22:30:31 2010
From: tales at talesp.inf.br (Tales Pinheiro de Andrade)
Date: Sun, 5 Sep 2010 17:30:31 -0300
Subject: [gecode-users] Bug in linear contraint?
Message-ID: <4E4182B0-564D-4444-B501-270692B3FA5A@talesp.inf.br>

Hello,

First, sorry about my English, I don't  write English so well.

I'm a newbie in Gecode and contraint programming, and I'm geting  a strange error, but I don't know if it is a bug or error.

I have  a bidimensional vector filled with 0 and 1 called serie representing the time series of a boolean network. Based in the content, I try to determine the network.

I have a few linear constrints based in the content of serie. But there is a case that, when I post a linear constrint, all the constraint of the space is erased. The constrint in case is in the line marked with * in the code.

Here is the code:

class Instancia {
public:
    std::vector<std::vector<int > >serie;
    int num_estados;
    int num_genes;
    int gene;
};


namespace {
    Instancia instancia;
}

class TimeSeries : public Script {
private:
    IntVarArray array;
    std::vector<std::vector<int > >serie;
    
    const int num_estados;
    const int num_genes;
    const int gene;
public:
        /// Post constraints
    TimeSeries(const Options& opt)
    :array(*this, instancia.num_genes, -1, 1),
    serie(instancia.serie),
    num_estados(instancia.num_estados),
    num_genes(instancia.num_genes),
    gene(instancia.gene)
    {
        for (int i = 1; i < num_estados - 1; i++)
        {
            int num_genes_diff = 0, gene_diff = num_genes + 1;
			for (int j = 0; j < num_genes; j++)
            {
		if (serie[i-1][j] != serie[i][j])
                {
		    num_genes_diff++;
		    gene_diff = j;
		}
	    }
            if (num_genes_diff == 1 && gene_diff == gene)
            {
		for (int j = 0; j < num_genes; j++)
                {
                    if (serie[i+1][j] > serie[i][j])
                    {
                        rel(*this, array[j], IRT_EQ, 1);
                    }
                    else if (serie[i+1][j] < serie[i][j])
                    {
                        rel(*this, array[j], IRT_EQ, -1);
                    }
                }
            }
        }

            //passo 2
        for (int t = 0; t < num_estados-1; t++)
        {
            IntArgs x_it(num_genes);
            int i = gene;
            for (int j = 0; j < num_genes; j++)
            {
                x_it[j] = serie[t][j];
            }
            
            if (serie[t][i] == 0 && serie[t + 1][i] == 0)
            {
                linear(*this, x_it, array, IRT_LQ, 0, opt.icl());
            }
            else if (serie[t][i] == 0 && serie[t+1][i] == 1)
            {
                linear(*this, x_it, array, IRT_GR, 0, opt.icl());
            }
            else if (serie[t][i] == 1 && serie[t+1][i] == 0)
            {
                linear(*this, x_it, array, IRT_LE, 0, opt.icl());
            }
            else
            {
                linear(*this, x_it, array, IRT_GQ, 0, opt.icl());
            }
        }
        
            //passo 3
        for (int a = 0; a < num_estados - 2; a++)
        {
            for ( int b = a+1; b < num_estados - 1; b++)
            {
                IntArgs x_it(num_genes * 2);
                IntVarArgs a_ij = array + array;

                for (int j = 0; j < num_genes; j++)
                {
                    if (serie[a][j] == 1 && serie[b][j] == 0)
                    {
                        x_it[j] = serie[a][j];
                    }
                    else {
                        x_it[j] = 0;
                    }
                    
                    if (serie[b][j] == 1 && serie[a][j] == 0)
                    {
                        x_it[num_genes + j] = -serie[b][j];
                    }
                    else {
                        x_it[j + num_genes] = 0;
                    }
                }
                
                if (serie[a][gene] == 1 && serie[a+1][gene] == 0)
                {
                    if ((serie[b][gene] == 0 && serie[b+1][gene] == 1) ||
                        (serie[b][gene] == 1 && serie[b+1][gene] == 1))
                    {
                        int prop=0;
                        for (Propagators p(*this); p(); ++p)
                            prop++;
                        std::cout << "Prop: " << prop << std::endl;
                        std::cout << std::endl;
                            //rest 1 e 8
***                     linear(*this, x_it, a_ij, IRT_LE, 0, opt.icl());
                        prop=0;
                        for (Propagators p(*this); p(); ++p)
                            prop++;
                        std::cout << "Prop: " << prop << std::endl;
                        std::cout << std::endl;
                        
                    }
                }else if (serie[a][gene] == 0 && serie[a+1][gene] == 1)
                {
                    if ((serie[b][gene] == 0 && serie[b+1][gene] == 0) ||
                        (serie[b][gene] == 1 && serie[b+1][gene] == 0))
                    {
                            //rest 2 e 5
                        for ( int i = 0; i < x_it.size(); i++)
                        {
                            x_it[i] = -1 * x_it[i];
                        }
                        linear(*this, x_it, a_ij, IRT_LE, 0, opt.icl());
                    }                    
                }
                else if (serie[a][gene] == 1 && serie[a+1][gene] == 1)
                {
                    if (serie[b][gene] == 0 && serie[b+1][gene] == 0)
                    {
                            //rest 3
                        for ( int i = 0; i < x_it.size(); i++)
                        {
                            x_it[i] = -1 * x_it[i];
                        }
                        linear(*this, x_it, a_ij, IRT_LQ, 0, opt.icl());
                    }
                    else if (serie[b][gene] == 1 && serie[b+1][gene] == 0)
                    {
                            //rest 6
                        for ( int i = 0; i < x_it.size(); i++)
                        {
                            x_it[i] = -1 * x_it[i];
                        }
                        linear(*this, x_it, a_ij, IRT_LE, 0, opt.icl());
                    }
                }
                else if (serie[a][gene] == 0 && serie[a+1][gene] == 0)
                {
                    if (serie[b][gene] == 0 && serie[b+1][gene] == 1)
                    {
                            //rest 4
                        linear(*this, x_it, a_ij, IRT_LE, 0, opt.icl());
                    }
                    else if (serie[b][gene] == 1 && serie[b+1][gene] == 1)
                    {
                            //rest 7
                        linear(*this, x_it, a_ij, IRT_LQ, 0, opt.icl());
                    }
                }
            }
        }

        branch(*this, array, INT_VAR_SIZE_MIN, INT_VAL_SPLIT_MIN);
    }
        /// Constructor for cloning \a s
    TimeSeries(bool share, TimeSeries& s) : Script(share,s), 
    num_genes(s.num_genes), num_estados(s.num_estados), 
    gene(s.gene), serie(s.serie)
    {
        array.update(*this, share, s.array);
    }
    
        /// Copy during cloning
    virtual Space*
    copy(bool share)
    {
        return new TimeSeries(share,*this);
    }
        /// Print solution
    virtual void
    print(std::ostream& os) const
    {
        os << "\t" << array << std::endl;
    }
    
};

And here is part of the main function:

    instancia.serie = serie;
    instancia.num_genes = estado.size();
    instancia.num_estados = serie.size();
    
    Options opt("TimeSeries");
    opt.solutions(1000);
        //opt.time(1000);
    opt.threads(0);
    opt.iterations(10);
    opt.parse(argc,argv);
    
    for (int i = 0; i < instancia.num_genes; i++)
    {
        unsigned int n_p = t->propagators();
        unsigned int n_b = t->branchers();
                    
        TimeSeries* t = new TimeSeries(opt);
        DFS<TimeSeries> e(t,so);

So, in the serie vector, gene is the column. I'm comparing to lines of the vector and deciding which constraint to post. But with only a column the constraints are erased, for all other columns/constraints its OK.

I'm running in a Mac with Gecode 3.4.

Thanks

Tales
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.gecode.org/pipermail/users/attachments/20100905/6c0bcc79/attachment-0001.htm>

From zayenz at gmail.com  Mon Sep  6 06:23:36 2010
From: zayenz at gmail.com (Mikael Zayenz Lagerkvist)
Date: Mon, 6 Sep 2010 06:23:36 +0200
Subject: [gecode-users] Bug in linear contraint?
In-Reply-To: <4E4182B0-564D-4444-B501-270692B3FA5A@talesp.inf.br>
References: <4E4182B0-564D-4444-B501-270692B3FA5A@talesp.inf.br>
Message-ID: <AANLkTinDujLUm=FQa831YmJhVg9t38aXpgrUqnPRAscj@mail.gmail.com>

Hi,

My guess would be that when you include the specified constraint, the
current Space becomes immediately failed.

Accidentally overconstraining a problem is quite common when developing
models. The best thing to do is usually to try to find the fewest
constraints that fail when combined, and to understand why it behaves that
way. It may just be that your problem has no solution, or you may have
included a stronger constraint than you intended.

If something else is happening, please include a full compilable example for
me to try.

Cheers,
Mikael

2010/9/5 Tales Pinheiro de Andrade <tales at talesp.inf.br>

> Hello,
>
> First, sorry about my English, I don't  write English so well.
>
> I'm a newbie in Gecode and contraint programming, and I'm geting  a strange
> error, but I don't know if it is a bug or error.
>
> I have  a bidimensional vector filled with 0 and 1 called serie
> representing the time series of a boolean network. Based in the content, I
> try to determine the network.
>
> I have a few linear constrints based in the content of serie. But there is
> a case that, when I post a linear constrint, all the constraint of the space
> is erased. The constrint in case is in the line marked with * in the code.
>
> Here is the code:
>
> class Instancia {
> public:
>     std::vector<std::vector<int > >serie;
>     int num_estados;
>     int num_genes;
>     int gene;
> };
>
>
> namespace {
>     Instancia instancia;
> }
>
> class TimeSeries : public Script {
> private:
>     IntVarArray array;
>     std::vector<std::vector<int > >serie;
>
>
>     const int num_estados;
>     const int num_genes;
>     const int gene;
> public:
>         /// Post constraints
>     TimeSeries(const Options& opt)
>     :array(*this, instancia.num_genes, -1, 1),
>     serie(instancia.serie),
>     num_estados(instancia.num_estados),
>     num_genes(instancia.num_genes),
>     gene(instancia.gene)
>     {
>         for (int i = 1; i < num_estados - 1; i++)
>         {
>             int num_genes_diff = 0, gene_diff = num_genes + 1;
>  for (int j = 0; j < num_genes; j++)
>             {
> if (serie[i-1][j] != serie[i][j])
>                 {
>     num_genes_diff++;
>      gene_diff = j;
>  }
>     }
>             if (num_genes_diff == 1 && gene_diff == gene)
>             {
> for (int j = 0; j < num_genes; j++)
>                 {
>                     if (serie[i+1][j] > serie[i][j])
>                     {
>                         rel(*this, array[j], IRT_EQ, 1);
>                     }
>                     else if (serie[i+1][j] < serie[i][j])
>                     {
>                         rel(*this, array[j], IRT_EQ, -1);
>                     }
>                 }
>             }
>         }
>
>             //passo 2
>         for (int t = 0; t < num_estados-1; t++)
>         {
>             IntArgs x_it(num_genes);
>             int i = gene;
>             for (int j = 0; j < num_genes; j++)
>             {
>                 x_it[j] = serie[t][j];
>             }
>
>
>             if (serie[t][i] == 0 && serie[t + 1][i] == 0)
>             {
>                 linear(*this, x_it, array, IRT_LQ, 0, opt.icl());
>             }
>             else if (serie[t][i] == 0 && serie[t+1][i] == 1)
>             {
>                 linear(*this, x_it, array, IRT_GR, 0, opt.icl());
>             }
>             else if (serie[t][i] == 1 && serie[t+1][i] == 0)
>             {
>                 linear(*this, x_it, array, IRT_LE, 0, opt.icl());
>             }
>             else
>             {
>                 linear(*this, x_it, array, IRT_GQ, 0, opt.icl());
>             }
>         }
>
>
>             //passo 3
>         for (int a = 0; a < num_estados - 2; a++)
>         {
>             for ( int b = a+1; b < num_estados - 1; b++)
>             {
>                 IntArgs x_it(num_genes * 2);
>                 IntVarArgs a_ij = array + array;
>
>                 for (int j = 0; j < num_genes; j++)
>                 {
>                     if (serie[a][j] == 1 && serie[b][j] == 0)
>                     {
>                         x_it[j] = serie[a][j];
>                     }
>                     else {
>                         x_it[j] = 0;
>                     }
>
>
>                     if (serie[b][j] == 1 && serie[a][j] == 0)
>                     {
>                         x_it[num_genes + j] = -serie[b][j];
>                     }
>                     else {
>                         x_it[j + num_genes] = 0;
>                     }
>                 }
>
>
>                 if (serie[a][gene] == 1 && serie[a+1][gene] == 0)
>                 {
>                     if ((serie[b][gene] == 0 && serie[b+1][gene] == 1) ||
>                         (serie[b][gene] == 1 && serie[b+1][gene] == 1))
>                     {
>                         int prop=0;
>                         for (Propagators p(*this); p(); ++p)
>                             prop++;
>                         std::cout << "Prop: " << prop << std::endl;
>                         std::cout << std::endl;
>                             //rest 1 e 8
> ***                     linear(*this, x_it, a_ij, IRT_LE, 0, opt.icl());
>                         prop=0;
>                         for (Propagators p(*this); p(); ++p)
>                             prop++;
>                         std::cout << "Prop: " << prop << std::endl;
>                         std::cout << std::endl;
>
>
>                     }
>                 }else if (serie[a][gene] == 0 && serie[a+1][gene] == 1)
>                 {
>                     if ((serie[b][gene] == 0 && serie[b+1][gene] == 0) ||
>                         (serie[b][gene] == 1 && serie[b+1][gene] == 0))
>                     {
>                             //rest 2 e 5
>                         for ( int i = 0; i < x_it.size(); i++)
>                         {
>                             x_it[i] = -1 * x_it[i];
>                         }
>                         linear(*this, x_it, a_ij, IRT_LE, 0, opt.icl());
>                     }
>                 }
>                 else if (serie[a][gene] == 1 && serie[a+1][gene] == 1)
>                 {
>                     if (serie[b][gene] == 0 && serie[b+1][gene] == 0)
>                     {
>                             //rest 3
>                         for ( int i = 0; i < x_it.size(); i++)
>                         {
>                             x_it[i] = -1 * x_it[i];
>                         }
>                         linear(*this, x_it, a_ij, IRT_LQ, 0, opt.icl());
>                     }
>                     else if (serie[b][gene] == 1 && serie[b+1][gene] == 0)
>                     {
>                             //rest 6
>                         for ( int i = 0; i < x_it.size(); i++)
>                         {
>                             x_it[i] = -1 * x_it[i];
>                         }
>                         linear(*this, x_it, a_ij, IRT_LE, 0, opt.icl());
>                     }
>                 }
>                 else if (serie[a][gene] == 0 && serie[a+1][gene] == 0)
>                 {
>                     if (serie[b][gene] == 0 && serie[b+1][gene] == 1)
>                     {
>                             //rest 4
>                         linear(*this, x_it, a_ij, IRT_LE, 0, opt.icl());
>                     }
>                     else if (serie[b][gene] == 1 && serie[b+1][gene] == 1)
>                     {
>                             //rest 7
>                         linear(*this, x_it, a_ij, IRT_LQ, 0, opt.icl());
>                     }
>                 }
>             }
>         }
>
>         branch(*this, array, INT_VAR_SIZE_MIN, INT_VAL_SPLIT_MIN);
>     }
>         /// Constructor for cloning \a s
>     TimeSeries(bool share, TimeSeries& s) : Script(share,s),
>     num_genes(s.num_genes), num_estados(s.num_estados),
>     gene(s.gene), serie(s.serie)
>     {
>         array.update(*this, share, s.array);
>     }
>
>
>         /// Copy during cloning
>     virtual Space*
>     copy(bool share)
>     {
>         return new TimeSeries(share,*this);
>     }
>         /// Print solution
>     virtual void
>     print(std::ostream& os) const
>     {
>         os << "\t" << array << std::endl;
>     }
>
>
> };
>
> And here is part of the main function:
>
>     instancia.serie = serie;
>     instancia.num_genes = estado.size();
>     instancia.num_estados = serie.size();
>
>
>     Options opt("TimeSeries");
>     opt.solutions(1000);
>         //opt.time(1000);
>     opt.threads(0);
>     opt.iterations(10);
>     opt.parse(argc,argv);
>
>
>     for (int i = 0; i < instancia.num_genes; i++)
>     {
>         unsigned int n_p = t->propagators();
>         unsigned int n_b = t->branchers();
>
>
>         TimeSeries* t = new TimeSeries(opt);
>         DFS<TimeSeries> e(t,so);
>
> So, in the serie vector, gene is the column. I'm comparing to lines of the
> vector and deciding which constraint to post. But with only a column the
> constraints are erased, for all other columns/constraints its OK.
>
> I'm running in a Mac with Gecode 3.4.
>
> Thanks
>
> Tales
>
> _______________________________________________
> Gecode users mailing list
> users at gecode.org
> https://www.gecode.org/mailman/listinfo/gecode-users
>
>


-- 
Mikael Zayenz Lagerkvist, http://www.ict.kth.se/~zayenz/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.gecode.org/pipermail/users/attachments/20100906/991ba5a8/attachment-0001.htm>

From ncasti at fdi.ucm.es  Fri Sep 10 16:26:50 2010
From: ncasti at fdi.ucm.es (Nacho)
Date: Fri, 10 Sep 2010 16:26:50 +0200
Subject: [gecode-users] Dynamic size of IntVarArray in Gecode 3.4.0
Message-ID: <13CCDC2E88BA442FAE0DD99D875A9FC7@ncasti>

Hi,

I have migrated from Gecode 3.2.2 to Gecode 3.4.0 today. I have read the
Changelog about the new IntVarArray API and I can not find out how to adapt
our previous implementation to the current framework. 

 

We need to use Gecode to reason with models where constraints and variables
can be added and removed. As a new constraint is processed, it is added to
the Space and propagated. New variables appearing in this constraint are
added to an IntVarArray, which is updated by the Space copy function. In
order to backtrack to previous models (removing constraints and variables),
each time a new constraint is processed we clone the Space. 

 

In Gecode 3.4.0, dynamically addition of IntVars to an IntVarArray is no
more supported. This is possible by using IntVarArgs, but, I need to update
the variable data structure with each new constraint being processed, and
IntVarArgs can not be updated. The MPG.pdf includes Tip 4.5 for dynamically
constructing problems, but I think this can not address the behaviour we
want to achieve. Do you have any ideas of how to address my problem?

 

Thank you very much in advance,

Nacho

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.gecode.org/pipermail/users/attachments/20100910/a4e84fd4/attachment.htm>

From zayenz at gmail.com  Fri Sep 10 16:39:05 2010
From: zayenz at gmail.com (Mikael Zayenz Lagerkvist)
Date: Fri, 10 Sep 2010 16:39:05 +0200
Subject: [gecode-users] Dynamic size of IntVarArray in Gecode 3.4.0
In-Reply-To: <13CCDC2E88BA442FAE0DD99D875A9FC7@ncasti>
References: <13CCDC2E88BA442FAE0DD99D875A9FC7@ncasti>
Message-ID: <AANLkTinAimWucewsizy0haNRRHXCMBpdZ_C7o+f6kg4u@mail.gmail.com>

Hi,

There are several ways that you can achieve what you want. A simple
solution is to just construct a new variable array, and to assign it
to the relevant member variable. Alternatively, you could store your
variables in an alternate data-structure and updating the variables
manually. Updating the variables is not actually magic, what you need
to do is to allocate the new data-structure, and then to update each
new variable from its corresponding variable in the old space (compare
with the code for update in VarArray[1]).

Hope this helps,
Mikael

[1] http://www.gecode.org/doc-latest/reference/kernel_2array_8hpp_source.html#l00852

2010/9/10 Nacho <ncasti at fdi.ucm.es>:
> Hi,
>
> I have migrated from Gecode 3.2.2 to Gecode 3.4.0 today. I have read the
> Changelog about the new IntVarArray API and I can not find out how to adapt
> our previous implementation to the current framework.
>
>
>
> We need to use Gecode to reason with models where constraints and variables
> can be added and removed. As a new constraint is processed, it is added to
> the Space and propagated. New variables appearing in this constraint are
> added to an IntVarArray, which is updated by the Space copy function. In
> order to backtrack to previous models (removing constraints and variables),
> each time a new constraint is processed we clone the Space.
>
>
>
> In Gecode 3.4.0, dynamically addition of IntVars to an IntVarArray is no
> more supported. This is possible by using IntVarArgs, but, I need to update
> the variable data structure with each new constraint being processed, and
> IntVarArgs can not be updated. The MPG.pdf includes Tip 4.5 for dynamically
> constructing problems, but I think this can not address the behaviour we
> want to achieve. Do you have any ideas of how to address my problem?
>
>
>
> Thank you very much in advance,
>
> Nacho
>
> _______________________________________________
> Gecode users mailing list
> users at gecode.org
> https://www.gecode.org/mailman/listinfo/gecode-users
>
>



-- 
Mikael Zayenz Lagerkvist, http://www.ict.kth.se/~zayenz/


From ncasti at fdi.ucm.es  Mon Sep 13 18:56:16 2010
From: ncasti at fdi.ucm.es (Nacho)
Date: Mon, 13 Sep 2010 18:56:16 +0200
Subject: [gecode-users] Dynamic size of IntVarArray in Gecode 3.4.0
In-Reply-To: <AANLkTinAimWucewsizy0haNRRHXCMBpdZ_C7o+f6kg4u@mail.gmail.com>
References: <13CCDC2E88BA442FAE0DD99D875A9FC7@ncasti>
	<AANLkTinAimWucewsizy0haNRRHXCMBpdZ_C7o+f6kg4u@mail.gmail.com>
Message-ID: <6EA0E00B03074542AE2AE30FE9A328CD@ncasti>


Hi,
Thank you very much for your help. It works!

Best regards,
Nacho

-----Mensaje original-----
De: Mikael Zayenz Lagerkvist [mailto:zayenz at gmail.com] 
Enviado el: viernes, 10 de septiembre de 2010 16:39
Para: Nacho
CC: users at gecode.org
Asunto: Re: [gecode-users] Dynamic size of IntVarArray in Gecode 3.4.0

Hi,

There are several ways that you can achieve what you want. A simple
solution is to just construct a new variable array, and to assign it
to the relevant member variable. Alternatively, you could store your
variables in an alternate data-structure and updating the variables
manually. Updating the variables is not actually magic, what you need
to do is to allocate the new data-structure, and then to update each
new variable from its corresponding variable in the old space (compare
with the code for update in VarArray[1]).

Hope this helps,
Mikael

[1]
http://www.gecode.org/doc-latest/reference/kernel_2array_8hpp_source.html#l0
0852

2010/9/10 Nacho <ncasti at fdi.ucm.es>:
> Hi,
>
> I have migrated from Gecode 3.2.2 to Gecode 3.4.0 today. I have read the
> Changelog about the new IntVarArray API and I can not find out how to
adapt
> our previous implementation to the current framework.
>
>
>
> We need to use Gecode to reason with models where constraints and
variables
> can be added and removed. As a new constraint is processed, it is added to
> the Space and propagated. New variables appearing in this constraint are
> added to an IntVarArray, which is updated by the Space copy function. In
> order to backtrack to previous models (removing constraints and
variables),
> each time a new constraint is processed we clone the Space.
>
>
>
> In Gecode 3.4.0, dynamically addition of IntVars to an IntVarArray is no
> more supported. This is possible by using IntVarArgs, but, I need to
update
> the variable data structure with each new constraint being processed, and
> IntVarArgs can not be updated. The MPG.pdf includes Tip 4.5 for
dynamically
> constructing problems, but I think this can not address the behaviour we
> want to achieve. Do you have any ideas of how to address my problem?
>
>
>
> Thank you very much in advance,
>
> Nacho
>
> _______________________________________________
> Gecode users mailing list
> users at gecode.org
> https://www.gecode.org/mailman/listinfo/gecode-users
>
>



-- 
Mikael Zayenz Lagerkvist, http://www.ict.kth.se/~zayenz/



From ouadjaout at gmail.com  Wed Sep 15 12:22:29 2010
From: ouadjaout at gmail.com (Abdelraouf Ouadjaout)
Date: Wed, 15 Sep 2010 11:22:29 +0100
Subject: [gecode-users] Adding a new operator
Message-ID: <AANLkTinfBa2usPTKdVkG4ZeKCDZ9mQxF56BAS2w_4SqR@mail.gmail.com>

Hi all,
I want to a add the bitwise AND operator "&" to integer variables, but I'm a
little bit confused. Can anyone help me on finding what classes do I have to
modify for that.
Thanks in advance !
Abdelraouf.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.gecode.org/pipermail/users/attachments/20100915/407d1bd0/attachment.htm>

From cschulte at kth.se  Wed Sep 15 12:24:57 2010
From: cschulte at kth.se (Christian Schulte)
Date: Wed, 15 Sep 2010 12:24:57 +0200
Subject: [gecode-users] Adding a new operator
In-Reply-To: <AANLkTinfBa2usPTKdVkG4ZeKCDZ9mQxF56BAS2w_4SqR@mail.gmail.com>
References: <AANLkTinfBa2usPTKdVkG4ZeKCDZ9mQxF56BAS2w_4SqR@mail.gmail.com>
Message-ID: <001d01cb54c0$3f4c4c50$bde4e4f0$@se>

Please make yourself familiar with programming propagators in Gecode as
explained in Modeling and Programming with Gecode.

 

Christian

 

--

Christian Schulte, www.ict.kth.se/~cschulte/

 

From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf
Of Abdelraouf Ouadjaout
Sent: Wednesday, September 15, 2010 12:22 PM
To: users at gecode.org
Subject: [gecode-users] Adding a new operator

 

Hi all,
I want to a add the bitwise AND operator "&" to integer variables, but I'm a
little bit confused. Can anyone help me on finding what classes do I have to
modify for that.
Thanks in advance !
Abdelraouf.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.gecode.org/pipermail/users/attachments/20100915/719ac1d2/attachment.htm>

From tales at talesp.inf.br  Sun Sep 19 04:13:41 2010
From: tales at talesp.inf.br (Tales Pinheiro de Andrade)
Date: Sat, 18 Sep 2010 23:13:41 -0300
Subject: [gecode-users] Extending the driver/Option
Message-ID: <016C723A-C0D2-4E53-9AE4-DDBA33C9D7B9@talesp.inf.br>

Hello,

I'm thinking in extend the driver, adding parameters to process files (the value of parameter should be the file name).

I'm reading the MPG document, but at least in the Modeling part I have found nothing.

Is there something that document? If so, could someone please tell me in what section?

If there is no such thing in MPG, the easiest way to do it is by inheriting the Option class?

Thank you in advance.

Tales Pinheiro de Andrade

From zayenz at gmail.com  Sun Sep 19 08:40:26 2010
From: zayenz at gmail.com (Mikael Zayenz Lagerkvist)
Date: Sun, 19 Sep 2010 08:40:26 +0200
Subject: [gecode-users] Extending the driver/Option
In-Reply-To: <016C723A-C0D2-4E53-9AE4-DDBA33C9D7B9@talesp.inf.br>
References: <016C723A-C0D2-4E53-9AE4-DDBA33C9D7B9@talesp.inf.br>
Message-ID: <AANLkTinUXyfKdAdGKo3R+svtbz8we=oNQ0Quv0SYeULJ@mail.gmail.com>

Hi,

Several of the examples include extended Options that you can look at. A
relevant example is sat.cpp which adds an option to open a file.

Cheers,
Mikael

On Sun, Sep 19, 2010 at 4:13 AM, Tales Pinheiro de Andrade <
tales at talesp.inf.br> wrote:

> Hello,
>
> I'm thinking in extend the driver, adding parameters to process files (the
> value of parameter should be the file name).
>
> I'm reading the MPG document, but at least in the Modeling part I have
> found nothing.
>
> Is there something that document? If so, could someone please tell me in
> what section?
>
> If there is no such thing in MPG, the easiest way to do it is by inheriting
> the Option class?
>
> Thank you in advance.
>
> Tales Pinheiro de Andrade
> _______________________________________________
> Gecode users mailing list
> users at gecode.org
> https://www.gecode.org/mailman/listinfo/gecode-users
>



-- 
Mikael Zayenz Lagerkvist, http://www.ict.kth.se/~zayenz/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.gecode.org/pipermail/users/attachments/20100919/22ee20a3/attachment.htm>

From tales at talesp.inf.br  Sun Sep 19 14:11:05 2010
From: tales at talesp.inf.br (Tales Pinheiro de Andrade)
Date: Sun, 19 Sep 2010 09:11:05 -0300
Subject: [gecode-users] Extending the driver/Option
In-Reply-To: <AANLkTinUXyfKdAdGKo3R+svtbz8we=oNQ0Quv0SYeULJ@mail.gmail.com>
References: <016C723A-C0D2-4E53-9AE4-DDBA33C9D7B9@talesp.inf.br>
	<AANLkTinUXyfKdAdGKo3R+svtbz8we=oNQ0Quv0SYeULJ@mail.gmail.com>
Message-ID: <485E8DA6-9420-4B71-8D3F-CE0E84BD05F5@talesp.inf.br>

Thank you.

After sending the message, I opened the options.hpp, options.cpp and driver.hh source files and was having an insigth of what to do, but this tip is better.

Thank you again.

Em 19/09/2010, ?s 03:40, Mikael Zayenz Lagerkvist escreveu:

> Hi,
> 
> Several of the examples include extended Options that you can look at. A relevant example is sat.cpp which adds an option to open a file.
> 
> Cheers,
> Mikael
> 
> On Sun, Sep 19, 2010 at 4:13 AM, Tales Pinheiro de Andrade <tales at talesp.inf.br> wrote:
> Hello,
> 
> I'm thinking in extend the driver, adding parameters to process files (the value of parameter should be the file name).
> 
> I'm reading the MPG document, but at least in the Modeling part I have found nothing.
> 
> Is there something that document? If so, could someone please tell me in what section?
> 
> If there is no such thing in MPG, the easiest way to do it is by inheriting the Option class?
> 
> Thank you in advance.
> 
> Tales Pinheiro de Andrade
> _______________________________________________
> Gecode users mailing list
> users at gecode.org
> https://www.gecode.org/mailman/listinfo/gecode-users
> 
> 
> 
> -- 
> Mikael Zayenz Lagerkvist, http://www.ict.kth.se/~zayenz/

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.gecode.org/pipermail/users/attachments/20100919/8b1f942a/attachment.htm>

From levitax00 at gmail.com  Mon Sep 20 08:01:36 2010
From: levitax00 at gmail.com (Jonathan Almache Montoya)
Date: Mon, 20 Sep 2010 01:01:36 -0500
Subject: [gecode-users] problems in the compilation - gecode 2.2.0
Message-ID: <AANLkTim_nL9vJVVE7MF1P0anz-wVD2yB0g9EZrmTAEpb@mail.gmail.com>

Hello everyone
I have problems in the compilation of the examples with gecode 2.2.0
I'm using Ubuntu 9.10 , g++-4.3 and gcc-4.3
I have verified and there's a folder named lib in /usr/local/ and other
named include...

the command used into gecode folder is:
g++ -I/usr/local/include -c ./examples/all-interval.cc

output:

./examples/all-interval.cc:63: error: expected class-name before ?{? token
./examples/all-interval.cc:66: error: ?IntVarArray? does not name a type
./examples/all-interval.cc:69: error: expected ?,? or ?...? before ?&? token
./examples/all-interval.cc:69: error: ISO C++ forbids declaration of
?SizeOptions? with no type
./examples/all-interval.cc:98: error: ISO C++ forbids declaration of ?Space?
with no type
./examples/all-interval.cc:98: error: ?Space? declared as a ?virtual? field
./examples/all-interval.cc:98: error: expected ?;? before ?*? token
./examples/all-interval.cc:103: error: expected `;' before ?virtual?
./examples/all-interval.cc: In constructor ?AllInterval::AllInterval(int)?:
./examples/all-interval.cc:70: error: class ?AllInterval? does not have any
field named ?x?
./examples/all-interval.cc:70: error: ?opt? was not declared in this scope
./examples/all-interval.cc:71: error: ?x? was not declared in this scope
./examples/all-interval.cc:73: error: ?IntVarArgs? was not declared in this
scope
./examples/all-interval.cc:73: error: expected `;' before ?d?
./examples/all-interval.cc:77: error: ?d? was not declared in this scope
./examples/all-interval.cc:77: error: ?minus? was not declared in this scope
./examples/all-interval.cc:80: error: ?d? was not declared in this scope
./examples/all-interval.cc:80: error: ?dom? was not declared in this scope
./examples/all-interval.cc:82: error: ?distinct? was not declared in this
scope
./examples/all-interval.cc:86: error: ?IRT_LE? was not declared in this
scope
./examples/all-interval.cc:86: error: ?rel? was not declared in this scope
./examples/all-interval.cc:88: error: ?IRT_GR? was not declared in this
scope
./examples/all-interval.cc:90: error: ?INT_VAR_SIZE_MIN? was not declared in
this scope
./examples/all-interval.cc:90: error: ?INT_VAL_SPLIT_MIN? was not declared
in this scope
./examples/all-interval.cc:90: error: ?branch? was not declared in this
scope
./examples/all-interval.cc: In constructor ?AllInterval::AllInterval(bool,
AllInterval&)?:
./examples/all-interval.cc:94: error: class ?AllInterval? does not have any
field named ?Example?
./examples/all-interval.cc:95: error: ?x? was not declared in this scope
./examples/all-interval.cc:95: error: ?class AllInterval? has no member
named ?x?
./examples/all-interval.cc: In member function ?virtual void
AllInterval::print(std::ostream&)?:
./examples/all-interval.cc:105: error: ?x? was not declared in this scope
./examples/all-interval.cc: In function ?int main(int, char**)?:
./examples/all-interval.cc:119: error: ?SizeOptions? was not declared in
this scope
./examples/all-interval.cc:119: error: expected `;' before ?opt?
./examples/all-interval.cc:120: error: ?opt? was not declared in this scope
./examples/all-interval.cc:122: error: ?ICL_BND? was not declared in this
scope
./examples/all-interval.cc:128: error: ?Example? has not been declared
./examples/all-interval.cc:128: error: expected primary-expression before
?,? token
./examples/all-interval.cc:128: error: ?DFS? was not declared in this scope

Thanks !!
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.gecode.org/pipermail/users/attachments/20100920/c815ae9c/attachment.htm>

From tack at gecode.org  Mon Sep 20 10:22:13 2010
From: tack at gecode.org (Guido Tack)
Date: Mon, 20 Sep 2010 10:22:13 +0200
Subject: [gecode-users] problems in the compilation - gecode 2.2.0
In-Reply-To: <AANLkTim_nL9vJVVE7MF1P0anz-wVD2yB0g9EZrmTAEpb@mail.gmail.com>
References: <AANLkTim_nL9vJVVE7MF1P0anz-wVD2yB0g9EZrmTAEpb@mail.gmail.com>
Message-ID: <276AC85D-7455-46C9-8138-325ED0F4432E@gecode.org>

Jonathan Almache Montoya wrote:

> Hello everyone
> I have problems in the compilation of the examples with gecode 2.2.0
> I'm using Ubuntu 9.10 , g++-4.3 and gcc-4.3
> I have verified and there's a folder named lib in /usr/local/ and other named include...
> 
> the command used into gecode folder is:
> g++ -I/usr/local/include -c ./examples/all-interval.cc

The compiler doesn't find the header files. This is not a Gecode problem, check your installation.

Cheers,
	Guido

-- 
Guido Tack, http://people.cs.kuleuven.be/~guido.tack/






From mauriciotorob at gmail.com  Mon Sep 20 18:11:34 2010
From: mauriciotorob at gmail.com (Mauricio Toro)
Date: Mon, 20 Sep 2010 18:11:34 +0200
Subject: [gecode-users] problems in the compilation - gecode 2.2.0
In-Reply-To: <276AC85D-7455-46C9-8138-325ED0F4432E@gecode.org>
References: <AANLkTim_nL9vJVVE7MF1P0anz-wVD2yB0g9EZrmTAEpb@mail.gmail.com>
	<276AC85D-7455-46C9-8138-325ED0F4432E@gecode.org>
Message-ID: <AANLkTima-cKRNHMXzMXdJW7R5WxmVR+3ObHze78bpSdR@mail.gmail.com>

The headers are missing; however, since you are in Gecode's folder, I think
you can compile the examples adding "-I."

> g++ -I. -I/usr/local/include -c ./examples/all-interval.cc

To install the headers, verify that you executed "make install" as root
during the installation.

Mauricio

2010/9/20 Guido Tack <tack at gecode.org>

> Jonathan Almache Montoya wrote:
>
> > Hello everyone
> > I have problems in the compilation of the examples with gecode 2.2.0
> > I'm using Ubuntu 9.10 , g++-4.3 and gcc-4.3
> > I have verified and there's a folder named lib in /usr/local/ and other
> named include...
> >
> > the command used into gecode folder is:
> > g++ -I/usr/local/include -c ./examples/all-interval.cc
>
> The compiler doesn't find the header files. This is not a Gecode problem,
> check your installation.
>
> Cheers,
>        Guido
>
> --
> Guido Tack, http://people.cs.kuleuven.be/~guido.tack/
>
>
>
>
>
> _______________________________________________
> Gecode users mailing list
> users at gecode.org
> https://www.gecode.org/mailman/listinfo/gecode-users
>



-- 
Mauricio TORO BERMUDEZ

Research Postgraduate Student (Ph.D)
Computer Science Research Laboratory of Bordeaux (LABRI)
Universit? de Bordeaux 1

http://www.labri.fr/perso/mtoro/

351, cours de la Lib?ration
F-33405 Talence Cedex. France.
Phone: (+33) 5 4000 24 85
Fax: (+33) 5 4000 66 69

Please don't print this e-mail unless you really need to.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.gecode.org/pipermail/users/attachments/20100920/7aa5f1d2/attachment.htm>

From chris.mears at monash.edu  Tue Sep 21 05:39:36 2010
From: chris.mears at monash.edu (Chris Mears)
Date: Tue, 21 Sep 2010 13:39:36 +1000
Subject: [gecode-users] Multiple thread lock error
Message-ID: <AANLkTik+E1PrjS+gj804F+7vMAuiRZtbLns+ZtCd2By6@mail.gmail.com>

Hello all,

Sometimes when running an example (e.g. ./bibd -threads 4) with more
than one thread I provoke this error at the end:

  terminate called after throwing an instance of 'Gecode::OperatingSystemError'

... or sometimes this one:

  terminate called after throwing an instance of 'Gecode::OperatingSystemError'
    what():  Mutex::acquire[pthread_mutex_lock]: Operating system error
  Aborted

It happens only some of the time, with Gecode 3.4.0 and with the trunk
version, on Debian Linux with kernel version 2.6.32.

Is this a serious error?  It still seems to give the right answer
before it prints the error.

Cheers,
Chris


From tack at gecode.org  Tue Sep 21 09:56:57 2010
From: tack at gecode.org (Guido Tack)
Date: Tue, 21 Sep 2010 09:56:57 +0200
Subject: [gecode-users] Multiple thread lock error
In-Reply-To: <AANLkTik+E1PrjS+gj804F+7vMAuiRZtbLns+ZtCd2By6@mail.gmail.com>
References: <AANLkTik+E1PrjS+gj804F+7vMAuiRZtbLns+ZtCd2By6@mail.gmail.com>
Message-ID: <16408544-755A-484D-87D9-1EB9447C70AB@gecode.org>

Chris Mears wrote:

> Hello all,
> 
> Sometimes when running an example (e.g. ./bibd -threads 4) with more
> than one thread I provoke this error at the end:
> 
>  terminate called after throwing an instance of 'Gecode::OperatingSystemError'
> 
> ... or sometimes this one:
> 
>  terminate called after throwing an instance of 'Gecode::OperatingSystemError'
>    what():  Mutex::acquire[pthread_mutex_lock]: Operating system error
>  Aborted
> 
> It happens only some of the time, with Gecode 3.4.0 and with the trunk
> version, on Debian Linux with kernel version 2.6.32.

Could you give us some details on the machine (processor(s), how many cores, hyperthreading)?

> Is this a serious error?  It still seems to give the right answer
> before it prints the error.

I don't think the concurrency problems can lead to wrong answers at the moment, but this should be fixed anyway.  Can you run it in gdb and send us the stack traces of all the threads when the program crashes?  Thanks!

Guido

-- 
Guido Tack, http://people.cs.kuleuven.be/~guido.tack/





From chris.mears at monash.edu  Thu Sep 23 07:35:27 2010
From: chris.mears at monash.edu (Chris Mears)
Date: Thu, 23 Sep 2010 15:35:27 +1000
Subject: [gecode-users] Multiple thread lock error
In-Reply-To: <16408544-755A-484D-87D9-1EB9447C70AB@gecode.org>
References: <AANLkTik+E1PrjS+gj804F+7vMAuiRZtbLns+ZtCd2By6@mail.gmail.com>
	<16408544-755A-484D-87D9-1EB9447C70AB@gecode.org>
Message-ID: <AANLkTikTQekwBCT=U-aT=QMZ-qfVPJ498U=sLOaNqUrj@mail.gmail.com>

> Could you give us some details on the machine (processor(s), how many cores, hyperthreading)?

/proc/cpuinfo says "Intel(R) Core(TM)2 Duo CPU     E8600  @ 3.33GHz",
which I think means 2 cores with no hyperthreading.

I did some more investigation (all with Gecode 3.4.0).  With 1 thread
there are no errors.  With 2 threads I sometimes get "terminate called
after throwing an instance of 'Gecode::OperatingSystemError'", but the
process exits cleanly and doesn't crash.  With 3 or more threads, I
get that message and sometimes the "what():
Mutex::acquire[pthread_mutex_lock]: Operating system error" message
accompanied by a crash and core dump.  The stack trace from the
crashed program is included below (and after that another crashed
stack trace on a 4x2 core machine with 10 Gecode threads, in case it
helps).

Good luck!
Chris


Stack trace: 2 cores, 3 threads:

Core was generated by `./bibd -threads 3'.
Program terminated with signal 6, Aborted.
#0  0x00007f18b1b3f165 in *__GI_raise (sig=<value optimized out>) at
../nptl/sysdeps/unix/sysv/linux/raise.c:64
64	../nptl/sysdeps/unix/sysv/linux/raise.c: No such file or directory.
	in ../nptl/sysdeps/unix/sysv/linux/raise.c
(gdb) thread apply all bt

Thread 4 (Thread 32706):
#0  __lll_lock_wait_private () at
../nptl/sysdeps/unix/sysv/linux/x86_64/lowlevellock.S:97
#1  0x00007f18b1b85458 in _L_lock_9590 () from /lib/libc.so.6
#2  0x00007f18b1b83841 in *__GI___libc_free (mem=0x7f18b1e69e40) at
malloc.c:3737
#3  0x00007f18b3baf8ed in Gecode::Space::~Space() () from
/usr/lib/libgecodekernel.so.23
#4  0x00000000004055a3 in ~ScriptBase (this=0x7f18b1e69e40,
__in_chrg=<value optimized out>) at ./gecode/driver.hh:525
#5  ~BIBD (this=0x7f18b1e69e40, __in_chrg=<value optimized out>) at
examples/bibd.cpp:96
#6  0x00007f18b51342f6 in ?? () from /usr/lib/libgecodesearch.so.23
#7  0x00007f18b5139453 in ?? () from /usr/lib/libgecodesearch.so.23
#8  0x00007f18b39a76e4 in Gecode::Support::Thread::Run::exec() () from
/usr/lib/libgecodesupport.so.23
#9  0x00007f18b39a78c9 in ?? () from /usr/lib/libgecodesupport.so.23
#10 0x00007f18b26208ba in start_thread (arg=<value optimized out>) at
pthread_create.c:300
#11 0x00007f18b1bdc02d in clone () at
../sysdeps/unix/sysv/linux/x86_64/clone.S:112
#12 0x0000000000000000 in ?? ()
Current language:  auto
The current source language is "auto; currently c".

Thread 3 (Thread 32705):
#0  __lll_lock_wait_private () at
../nptl/sysdeps/unix/sysv/linux/x86_64/lowlevellock.S:97
#1  0x00007f18b1b85458 in _L_lock_9590 () from /lib/libc.so.6
#2  0x00007f18b1b83841 in *__GI___libc_free (mem=0x7f18b1e69e40) at
malloc.c:3737
#3  0x00007f18b295a300 in qUnregisterResourceData(int, unsigned char
const*, unsigned char const*, unsigned char const*) () from
/usr/lib/libQtCore.so.4
#4  0x00007f18b336d223 in ?? () from /usr/lib/libQtGui.so.4
#5  0x00007f18b1b43965 in __cxa_finalize (d=0x7f18b399fe80) at cxa_finalize.c:56
#6  0x00007f18b2eb0526 in ?? () from /usr/lib/libQtGui.so.4
#7  0x000000000000002b in ?? ()
#8  0x0000000000000000 in ?? ()
Current language:  auto
The current source language is "auto; currently asm".

Thread 2 (Thread 32708):
#0  0x00007f18b1bd4cea in __brk (addr=0x246d000) at
../sysdeps/unix/sysv/linux/x86_64/brk.c:32
#1  0x00007f18b1bd4d9d in *__GI___sbrk (increment=-589824) at sbrk.c:54
#2  0x00007f18b1b85789 in *__GI___default_morecore
(increment=38195200) at morecore.c:49
#3  0x00007f18b1b7e71a in sYSTRIm (pad=<value optimized out>,
av=0x7f18b1e69e40) at malloc.c:3491
#4  0x00007f18b1b8384c in *__GI___libc_free (mem=<value optimized
out>) at malloc.c:3739
#5  0x00007f18b3baf837 in Gecode::Space::~Space() () from
/usr/lib/libgecodekernel.so.23
#6  0x00000000004055a3 in ~ScriptBase (this=0x246d000,
__in_chrg=<value optimized out>) at ./gecode/driver.hh:525
#7  ~BIBD (this=0x246d000, __in_chrg=<value optimized out>) at
examples/bibd.cpp:96
#8  0x00007f18b51342f6 in ?? () from /usr/lib/libgecodesearch.so.23
#9  0x00007f18b5139453 in ?? () from /usr/lib/libgecodesearch.so.23
#10 0x00007f18b39a76e4 in Gecode::Support::Thread::Run::exec() () from
/usr/lib/libgecodesupport.so.23
#11 0x00007f18b39a78c9 in ?? () from /usr/lib/libgecodesupport.so.23
#12 0x00007f18b26208ba in start_thread (arg=<value optimized out>) at
pthread_create.c:300
#13 0x00007f18b1bdc02d in clone () at
../sysdeps/unix/sysv/linux/x86_64/clone.S:112
---Type <return> to continue, or q <return> to quit---
#14 0x0000000000000000 in ?? ()

Thread 1 (Thread 32707):
#0  0x00007f18b1b3f165 in *__GI_raise (sig=<value optimized out>) at
../nptl/sysdeps/unix/sysv/linux/raise.c:64
#1  0x00007f18b1b41f70 in *__GI_abort () at abort.c:92
#2  0x00007f18b23d2dc5 in __gnu_cxx::__verbose_terminate_handler() ()
from /usr/lib/libstdc++.so.6
#3  0x00007f18b23d1166 in ?? () from /usr/lib/libstdc++.so.6
#4  0x00007f18b23d1193 in std::terminate() () from /usr/lib/libstdc++.so.6
#5  0x00007f18b23d128e in __cxa_throw () from /usr/lib/libstdc++.so.6
#6  0x00007f18b39a778c in Gecode::Support::Thread::Run::exec() () from
/usr/lib/libgecodesupport.so.23
#7  0x00007f18b39a78c9 in ?? () from /usr/lib/libgecodesupport.so.23
#8  0x00007f18b26208ba in start_thread (arg=<value optimized out>) at
pthread_create.c:300
#9  0x00007f18b1bdc02d in clone () at
../sysdeps/unix/sysv/linux/x86_64/clone.S:112
#10 0x0000000000000000 in ?? ()
Current language:  auto
The current source language is "auto; currently c".


================================
4 core (x2 via hyperthreading) machine with 10 threads:

Core was generated by `./bibd -threads 8 31 6 1'.
Program terminated with signal 6, Aborted.
[New process 8903]
[New process 8897]
[New process 8898]
[New process 8900]
[New process 8904]
[New process 8896]
[New process 8901]
[New process 8899]
[New process 8902]
#0  0x00007f4870217fb5 in raise () from /lib/libc.so.6
(gdb) thread apply all bt

Thread 9 (process 8902):
#0  0x00007f4870217fb5 in raise () from /lib/libc.so.6
#1  0x00007f4870219bc3 in abort () from /lib/libc.so.6
#2  0x00007f4870cd908f in __gnu_cxx::__verbose_terminate_handler ()
   from /usr/lib/libstdc++.so.6
#3  0x00007f4870cd74b6 in ?? () from /usr/lib/libstdc++.so.6
#4  0x00007f4870cd74e3 in std::terminate () from /usr/lib/libstdc++.so.6
#5  0x00007f4870cd75ca in __cxa_throw () from /usr/lib/libstdc++.so.6
#6  0x00007f4870f1e85f in Gecode::Support::Thread::Run::exec (
    this=<value optimized out>) at ./gecode/support/thread/pthreads.hpp:64
#7  0x00007f4870f1e969 in Gecode::Support::bootstrap (p=0x22c0)
    at gecode/support/thread/pthreads.cpp:47
#8  0x00007f487055e3ba in start_thread () from /lib/libpthread.so.0
#9  0x00007f48702cb02d in clone () from /lib/libc.so.6
#10 0x0000000000000000 in ?? ()

Thread 8 (process 8899):
#0  0x00007f4870217fb5 in raise () from /lib/libc.so.6
#1  0x00007f4870219bc3 in abort () from /lib/libc.so.6
#2  0x00007f4870cd908f in __gnu_cxx::__verbose_terminate_handler ()
---Type <return> to continue, or q <return> to quit---
   from /usr/lib/libstdc++.so.6
#3  0x00007f4870cd74b6 in ?? () from /usr/lib/libstdc++.so.6
#4  0x00007f4870cd74e3 in std::terminate () from /usr/lib/libstdc++.so.6
#5  0x00007f4870cd75ca in __cxa_throw () from /usr/lib/libstdc++.so.6
#6  0x00007f4870f1e85f in Gecode::Support::Thread::Run::exec (
    this=<value optimized out>) at ./gecode/support/thread/pthreads.hpp:64
#7  0x00007f4870f1e969 in Gecode::Support::bootstrap (p=0x22c0)
    at gecode/support/thread/pthreads.cpp:47
#8  0x00007f487055e3ba in start_thread () from /lib/libpthread.so.0
#9  0x00007f48702cb02d in clone () from /lib/libc.so.6
#10 0x0000000000000000 in ?? ()

Thread 7 (process 8901):
#0  0x00007f48705622e9 in pthread_cond_wait@@GLIBC_2.3.2 ()
   from /lib/libpthread.so.0
#1  0x00007f4870f1e7d5 in Gecode::Support::Thread::Run::exec (this=0x20d7860)
    at ./gecode/support/thread/pthreads.hpp:100
#2  0x00007f4870f1e969 in Gecode::Support::bootstrap (p=0x20d789c)
    at gecode/support/thread/pthreads.cpp:47
#3  0x00007f487055e3ba in start_thread () from /lib/libpthread.so.0
#4  0x00007f48702cb02d in clone () from /lib/libc.so.6
---Type <return> to continue, or q <return> to quit---
#5  0x0000000000000000 in ?? ()

Thread 6 (process 8896):
#0  0x00007f487028d0c0 in _exit () from /lib/libc.so.6
#1  0x00007f487021b765 in exit () from /lib/libc.so.6
#2  0x00007f48702035ad in __libc_start_main () from /lib/libc.so.6
#3  0x0000000000403379 in _start () at ../sysdeps/x86_64/elf/start.S:113

Thread 5 (process 8904):
#0  0x00007f4870217fb5 in raise () from /lib/libc.so.6
#1  0x00007f4870219bc3 in abort () from /lib/libc.so.6
#2  0x00007f4870cd908f in __gnu_cxx::__verbose_terminate_handler ()
   from /usr/lib/libstdc++.so.6
#3  0x00007f4870cd74b6 in ?? () from /usr/lib/libstdc++.so.6
#4  0x00007f4870cd74e3 in std::terminate () from /usr/lib/libstdc++.so.6
#5  0x00007f4870cd75ca in __cxa_throw () from /usr/lib/libstdc++.so.6
#6  0x00007f4870f1e85f in Gecode::Support::Thread::Run::exec (
    this=<value optimized out>) at ./gecode/support/thread/pthreads.hpp:64
#7  0x00007f4870f1e969 in Gecode::Support::bootstrap (p=0x22c0)
    at gecode/support/thread/pthreads.cpp:47
#8  0x00007f487055e3ba in start_thread () from /lib/libpthread.so.0
---Type <return> to continue, or q <return> to quit---
#9  0x00007f48702cb02d in clone () from /lib/libc.so.6
#10 0x0000000000000000 in ?? ()

Thread 4 (process 8900):
#0  0x00007f48702c7a47 in madvise () from /lib/libc.so.6
#1  0x00007f487025efb1 in ?? () from /lib/libc.so.6
#2  0x00007f487025f2a6 in free () from /lib/libc.so.6
#3  0x00007f48711276ed in ~Space (this=0x20d3c90)
    at ./gecode/support/heap.hpp:330
#4  0x00000000004049f3 in ~BIBD (this=0x7f4860021000) at ./gecode/driver.hh:525
#5  0x00007f4872752286 in ~Worker (this=0x20d4ec0)
    at ./gecode/search/parallel/path.hh:190
#6  0x00007f4872757643 in ~Worker (this=0x7f4860021000)
    at ./gecode/search/parallel/dfs.hh:49
#7  0x00007f4870f1e776 in Gecode::Support::Thread::Run::exec (this=0x20d7690)
    at gecode/support/thread/thread.cpp:59
#8  0x00007f4870f1e969 in Gecode::Support::bootstrap (p=0x7f4860021000)
    at gecode/support/thread/pthreads.cpp:47
#9  0x00007f487055e3ba in start_thread () from /lib/libpthread.so.0
#10 0x00007f48702cb02d in clone () from /lib/libc.so.6
#11 0x0000000000000000 in ?? ()
---Type <return> to continue, or q <return> to quit---

Thread 3 (process 8898):
#0  0x00007f48705622e9 in pthread_cond_wait@@GLIBC_2.3.2 ()
   from /lib/libpthread.so.0
#1  0x00007f4870f1e7d5 in Gecode::Support::Thread::Run::exec (this=0x20d72f0)
    at ./gecode/support/thread/pthreads.hpp:100
#2  0x00007f4870f1e969 in Gecode::Support::bootstrap (p=0x20d732c)
    at gecode/support/thread/pthreads.cpp:47
#3  0x00007f487055e3ba in start_thread () from /lib/libpthread.so.0
#4  0x00007f48702cb02d in clone () from /lib/libc.so.6
#5  0x0000000000000000 in ?? ()

Thread 2 (process 8897):
#0  0x00007f4870261808 in malloc () from /lib/libc.so.6
#1  0x00007f4870cd649f in __cxa_allocate_exception ()
   from /usr/lib/libstdc++.so.6
#2  0x00007f4870f1e869 in Gecode::Support::Thread::Run::exec (this=0x20d7120)
    at ./gecode/support/thread/pthreads.hpp:55
#3  0x00007f4870f1e969 in Gecode::Support::bootstrap (p=0xf8)
    at gecode/support/thread/pthreads.cpp:47
#4  0x00007f487055e3ba in start_thread () from /lib/libpthread.so.0
---Type <return> to continue, or q <return> to quit---
#5  0x00007f48702cb02d in clone () from /lib/libc.so.6
#6  0x0000000000000000 in ?? ()

Thread 1 (process 8903):
#0  0x00007f4870217fb5 in raise () from /lib/libc.so.6
#1  0x00007f4870219bc3 in abort () from /lib/libc.so.6
#2  0x00007f4870cd90b4 in __gnu_cxx::__verbose_terminate_handler ()
   from /usr/lib/libstdc++.so.6
#3  0x00007f4870cd74b6 in ?? () from /usr/lib/libstdc++.so.6
#4  0x00007f4870cd74e3 in std::terminate () from /usr/lib/libstdc++.so.6
#5  0x00007f4870cd75ca in __cxa_throw () from /usr/lib/libstdc++.so.6
#6  0x00007f4870f1e85f in Gecode::Support::Thread::Run::exec (
    this=<value optimized out>) at ./gecode/support/thread/pthreads.hpp:64
#7  0x00007f4870f1e969 in Gecode::Support::bootstrap (p=0x22c0)
    at gecode/support/thread/pthreads.cpp:47
#8  0x00007f487055e3ba in start_thread () from /lib/libpthread.so.0
#9  0x00007f48702cb02d in clone () from /lib/libc.so.6
#10 0x0000000000000000 in ?? ()
(gdb)


From cschulte at kth.se  Thu Sep 23 15:11:39 2010
From: cschulte at kth.se (Christian Schulte)
Date: Thu, 23 Sep 2010 15:11:39 +0200
Subject: [gecode-users] Multiple thread lock error
In-Reply-To: <AANLkTikTQekwBCT=U-aT=QMZ-qfVPJ498U=sLOaNqUrj@mail.gmail.com>
References: <AANLkTik+E1PrjS+gj804F+7vMAuiRZtbLns+ZtCd2By6@mail.gmail.com>	<16408544-755A-484D-87D9-1EB9447C70AB@gecode.org>
	<AANLkTikTQekwBCT=U-aT=QMZ-qfVPJ498U=sLOaNqUrj@mail.gmail.com>
Message-ID: <009901cb5b20$dca39420$95eabc60$@se>

Hi Chris,

Thanks for the data, so far I do not know what's happening but that is very
helpful indeed.

Cheers
Christian

--
Christian Schulte, www.ict.kth.se/~cschulte/


-----Original Message-----
From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf
Of Chris Mears
Sent: Thursday, September 23, 2010 7:35 AM
To: Guido Tack
Cc: users at gecode.org
Subject: Re: [gecode-users] Multiple thread lock error

> Could you give us some details on the machine (processor(s), how many
cores, hyperthreading)?

/proc/cpuinfo says "Intel(R) Core(TM)2 Duo CPU     E8600  @ 3.33GHz",
which I think means 2 cores with no hyperthreading.

I did some more investigation (all with Gecode 3.4.0).  With 1 thread
there are no errors.  With 2 threads I sometimes get "terminate called
after throwing an instance of 'Gecode::OperatingSystemError'", but the
process exits cleanly and doesn't crash.  With 3 or more threads, I
get that message and sometimes the "what():
Mutex::acquire[pthread_mutex_lock]: Operating system error" message
accompanied by a crash and core dump.  The stack trace from the
crashed program is included below (and after that another crashed
stack trace on a 4x2 core machine with 10 Gecode threads, in case it
helps).

Good luck!
Chris


Stack trace: 2 cores, 3 threads:

Core was generated by `./bibd -threads 3'.
Program terminated with signal 6, Aborted.
#0  0x00007f18b1b3f165 in *__GI_raise (sig=<value optimized out>) at
../nptl/sysdeps/unix/sysv/linux/raise.c:64
64      ../nptl/sysdeps/unix/sysv/linux/raise.c: No such file or directory.
        in ../nptl/sysdeps/unix/sysv/linux/raise.c
(gdb) thread apply all bt

Thread 4 (Thread 32706):
#0  __lll_lock_wait_private () at
../nptl/sysdeps/unix/sysv/linux/x86_64/lowlevellock.S:97
#1  0x00007f18b1b85458 in _L_lock_9590 () from /lib/libc.so.6
#2  0x00007f18b1b83841 in *__GI___libc_free (mem=0x7f18b1e69e40) at
malloc.c:3737
#3  0x00007f18b3baf8ed in Gecode::Space::~Space() () from
/usr/lib/libgecodekernel.so.23
#4  0x00000000004055a3 in ~ScriptBase (this=0x7f18b1e69e40,
__in_chrg=<value optimized out>) at ./gecode/driver.hh:525
#5  ~BIBD (this=0x7f18b1e69e40, __in_chrg=<value optimized out>) at
examples/bibd.cpp:96
#6  0x00007f18b51342f6 in ?? () from /usr/lib/libgecodesearch.so.23
#7  0x00007f18b5139453 in ?? () from /usr/lib/libgecodesearch.so.23
#8  0x00007f18b39a76e4 in Gecode::Support::Thread::Run::exec() () from
/usr/lib/libgecodesupport.so.23
#9  0x00007f18b39a78c9 in ?? () from /usr/lib/libgecodesupport.so.23
#10 0x00007f18b26208ba in start_thread (arg=<value optimized out>) at
pthread_create.c:300
#11 0x00007f18b1bdc02d in clone () at
../sysdeps/unix/sysv/linux/x86_64/clone.S:112
#12 0x0000000000000000 in ?? ()
Current language:  auto
The current source language is "auto; currently c".

Thread 3 (Thread 32705):
#0  __lll_lock_wait_private () at
../nptl/sysdeps/unix/sysv/linux/x86_64/lowlevellock.S:97
#1  0x00007f18b1b85458 in _L_lock_9590 () from /lib/libc.so.6
#2  0x00007f18b1b83841 in *__GI___libc_free (mem=0x7f18b1e69e40) at
malloc.c:3737
#3  0x00007f18b295a300 in qUnregisterResourceData(int, unsigned char
const*, unsigned char const*, unsigned char const*) () from
/usr/lib/libQtCore.so.4
#4  0x00007f18b336d223 in ?? () from /usr/lib/libQtGui.so.4
#5  0x00007f18b1b43965 in __cxa_finalize (d=0x7f18b399fe80) at
cxa_finalize.c:56
#6  0x00007f18b2eb0526 in ?? () from /usr/lib/libQtGui.so.4
#7  0x000000000000002b in ?? ()
#8  0x0000000000000000 in ?? ()
Current language:  auto
The current source language is "auto; currently asm".

Thread 2 (Thread 32708):
#0  0x00007f18b1bd4cea in __brk (addr=0x246d000) at
../sysdeps/unix/sysv/linux/x86_64/brk.c:32
#1  0x00007f18b1bd4d9d in *__GI___sbrk (increment=-589824) at sbrk.c:54
#2  0x00007f18b1b85789 in *__GI___default_morecore
(increment=38195200) at morecore.c:49
#3  0x00007f18b1b7e71a in sYSTRIm (pad=<value optimized out>,
av=0x7f18b1e69e40) at malloc.c:3491
#4  0x00007f18b1b8384c in *__GI___libc_free (mem=<value optimized
out>) at malloc.c:3739
#5  0x00007f18b3baf837 in Gecode::Space::~Space() () from
/usr/lib/libgecodekernel.so.23
#6  0x00000000004055a3 in ~ScriptBase (this=0x246d000,
__in_chrg=<value optimized out>) at ./gecode/driver.hh:525
#7  ~BIBD (this=0x246d000, __in_chrg=<value optimized out>) at
examples/bibd.cpp:96
#8  0x00007f18b51342f6 in ?? () from /usr/lib/libgecodesearch.so.23
#9  0x00007f18b5139453 in ?? () from /usr/lib/libgecodesearch.so.23
#10 0x00007f18b39a76e4 in Gecode::Support::Thread::Run::exec() () from
/usr/lib/libgecodesupport.so.23
#11 0x00007f18b39a78c9 in ?? () from /usr/lib/libgecodesupport.so.23
#12 0x00007f18b26208ba in start_thread (arg=<value optimized out>) at
pthread_create.c:300
#13 0x00007f18b1bdc02d in clone () at
../sysdeps/unix/sysv/linux/x86_64/clone.S:112
---Type <return> to continue, or q <return> to quit---
#14 0x0000000000000000 in ?? ()

Thread 1 (Thread 32707):
#0  0x00007f18b1b3f165 in *__GI_raise (sig=<value optimized out>) at
../nptl/sysdeps/unix/sysv/linux/raise.c:64
#1  0x00007f18b1b41f70 in *__GI_abort () at abort.c:92
#2  0x00007f18b23d2dc5 in __gnu_cxx::__verbose_terminate_handler() ()
from /usr/lib/libstdc++.so.6
#3  0x00007f18b23d1166 in ?? () from /usr/lib/libstdc++.so.6
#4  0x00007f18b23d1193 in std::terminate() () from /usr/lib/libstdc++.so.6
#5  0x00007f18b23d128e in __cxa_throw () from /usr/lib/libstdc++.so.6
#6  0x00007f18b39a778c in Gecode::Support::Thread::Run::exec() () from
/usr/lib/libgecodesupport.so.23
#7  0x00007f18b39a78c9 in ?? () from /usr/lib/libgecodesupport.so.23
#8  0x00007f18b26208ba in start_thread (arg=<value optimized out>) at
pthread_create.c:300
#9  0x00007f18b1bdc02d in clone () at
../sysdeps/unix/sysv/linux/x86_64/clone.S:112
#10 0x0000000000000000 in ?? ()
Current language:  auto
The current source language is "auto; currently c".


================================
4 core (x2 via hyperthreading) machine with 10 threads:

Core was generated by `./bibd -threads 8 31 6 1'.
Program terminated with signal 6, Aborted.
[New process 8903]
[New process 8897]
[New process 8898]
[New process 8900]
[New process 8904]
[New process 8896]
[New process 8901]
[New process 8899]
[New process 8902]
#0  0x00007f4870217fb5 in raise () from /lib/libc.so.6
(gdb) thread apply all bt

Thread 9 (process 8902):
#0  0x00007f4870217fb5 in raise () from /lib/libc.so.6
#1  0x00007f4870219bc3 in abort () from /lib/libc.so.6
#2  0x00007f4870cd908f in __gnu_cxx::__verbose_terminate_handler ()
   from /usr/lib/libstdc++.so.6
#3  0x00007f4870cd74b6 in ?? () from /usr/lib/libstdc++.so.6
#4  0x00007f4870cd74e3 in std::terminate () from /usr/lib/libstdc++.so.6
#5  0x00007f4870cd75ca in __cxa_throw () from /usr/lib/libstdc++.so.6
#6  0x00007f4870f1e85f in Gecode::Support::Thread::Run::exec (
    this=<value optimized out>) at ./gecode/support/thread/pthreads.hpp:64
#7  0x00007f4870f1e969 in Gecode::Support::bootstrap (p=0x22c0)
    at gecode/support/thread/pthreads.cpp:47
#8  0x00007f487055e3ba in start_thread () from /lib/libpthread.so.0
#9  0x00007f48702cb02d in clone () from /lib/libc.so.6
#10 0x0000000000000000 in ?? ()

Thread 8 (process 8899):
#0  0x00007f4870217fb5 in raise () from /lib/libc.so.6
#1  0x00007f4870219bc3 in abort () from /lib/libc.so.6
#2  0x00007f4870cd908f in __gnu_cxx::__verbose_terminate_handler ()
---Type <return> to continue, or q <return> to quit---
   from /usr/lib/libstdc++.so.6
#3  0x00007f4870cd74b6 in ?? () from /usr/lib/libstdc++.so.6
#4  0x00007f4870cd74e3 in std::terminate () from /usr/lib/libstdc++.so.6
#5  0x00007f4870cd75ca in __cxa_throw () from /usr/lib/libstdc++.so.6
#6  0x00007f4870f1e85f in Gecode::Support::Thread::Run::exec (
    this=<value optimized out>) at ./gecode/support/thread/pthreads.hpp:64
#7  0x00007f4870f1e969 in Gecode::Support::bootstrap (p=0x22c0)
    at gecode/support/thread/pthreads.cpp:47
#8  0x00007f487055e3ba in start_thread () from /lib/libpthread.so.0
#9  0x00007f48702cb02d in clone () from /lib/libc.so.6
#10 0x0000000000000000 in ?? ()

Thread 7 (process 8901):
#0  0x00007f48705622e9 in pthread_cond_wait@@GLIBC_2.3.2 ()
   from /lib/libpthread.so.0
#1  0x00007f4870f1e7d5 in Gecode::Support::Thread::Run::exec
(this=0x20d7860)
    at ./gecode/support/thread/pthreads.hpp:100
#2  0x00007f4870f1e969 in Gecode::Support::bootstrap (p=0x20d789c)
    at gecode/support/thread/pthreads.cpp:47
#3  0x00007f487055e3ba in start_thread () from /lib/libpthread.so.0
#4  0x00007f48702cb02d in clone () from /lib/libc.so.6
---Type <return> to continue, or q <return> to quit---
#5  0x0000000000000000 in ?? ()

Thread 6 (process 8896):
#0  0x00007f487028d0c0 in _exit () from /lib/libc.so.6
#1  0x00007f487021b765 in exit () from /lib/libc.so.6
#2  0x00007f48702035ad in __libc_start_main () from /lib/libc.so.6
#3  0x0000000000403379 in _start () at ../sysdeps/x86_64/elf/start.S:113

Thread 5 (process 8904):
#0  0x00007f4870217fb5 in raise () from /lib/libc.so.6
#1  0x00007f4870219bc3 in abort () from /lib/libc.so.6
#2  0x00007f4870cd908f in __gnu_cxx::__verbose_terminate_handler ()
   from /usr/lib/libstdc++.so.6
#3  0x00007f4870cd74b6 in ?? () from /usr/lib/libstdc++.so.6
#4  0x00007f4870cd74e3 in std::terminate () from /usr/lib/libstdc++.so.6
#5  0x00007f4870cd75ca in __cxa_throw () from /usr/lib/libstdc++.so.6
#6  0x00007f4870f1e85f in Gecode::Support::Thread::Run::exec (
    this=<value optimized out>) at ./gecode/support/thread/pthreads.hpp:64
#7  0x00007f4870f1e969 in Gecode::Support::bootstrap (p=0x22c0)
    at gecode/support/thread/pthreads.cpp:47
#8  0x00007f487055e3ba in start_thread () from /lib/libpthread.so.0
---Type <return> to continue, or q <return> to quit---
#9  0x00007f48702cb02d in clone () from /lib/libc.so.6
#10 0x0000000000000000 in ?? ()

Thread 4 (process 8900):
#0  0x00007f48702c7a47 in madvise () from /lib/libc.so.6
#1  0x00007f487025efb1 in ?? () from /lib/libc.so.6
#2  0x00007f487025f2a6 in free () from /lib/libc.so.6
#3  0x00007f48711276ed in ~Space (this=0x20d3c90)
    at ./gecode/support/heap.hpp:330
#4  0x00000000004049f3 in ~BIBD (this=0x7f4860021000) at
./gecode/driver.hh:525
#5  0x00007f4872752286 in ~Worker (this=0x20d4ec0)
    at ./gecode/search/parallel/path.hh:190
#6  0x00007f4872757643 in ~Worker (this=0x7f4860021000)
    at ./gecode/search/parallel/dfs.hh:49
#7  0x00007f4870f1e776 in Gecode::Support::Thread::Run::exec
(this=0x20d7690)
    at gecode/support/thread/thread.cpp:59
#8  0x00007f4870f1e969 in Gecode::Support::bootstrap (p=0x7f4860021000)
    at gecode/support/thread/pthreads.cpp:47
#9  0x00007f487055e3ba in start_thread () from /lib/libpthread.so.0
#10 0x00007f48702cb02d in clone () from /lib/libc.so.6
#11 0x0000000000000000 in ?? ()
---Type <return> to continue, or q <return> to quit---

Thread 3 (process 8898):
#0  0x00007f48705622e9 in pthread_cond_wait@@GLIBC_2.3.2 ()
   from /lib/libpthread.so.0
#1  0x00007f4870f1e7d5 in Gecode::Support::Thread::Run::exec
(this=0x20d72f0)
    at ./gecode/support/thread/pthreads.hpp:100
#2  0x00007f4870f1e969 in Gecode::Support::bootstrap (p=0x20d732c)
    at gecode/support/thread/pthreads.cpp:47
#3  0x00007f487055e3ba in start_thread () from /lib/libpthread.so.0
#4  0x00007f48702cb02d in clone () from /lib/libc.so.6
#5  0x0000000000000000 in ?? ()

Thread 2 (process 8897):
#0  0x00007f4870261808 in malloc () from /lib/libc.so.6
#1  0x00007f4870cd649f in __cxa_allocate_exception ()
   from /usr/lib/libstdc++.so.6
#2  0x00007f4870f1e869 in Gecode::Support::Thread::Run::exec
(this=0x20d7120)
    at ./gecode/support/thread/pthreads.hpp:55
#3  0x00007f4870f1e969 in Gecode::Support::bootstrap (p=0xf8)
    at gecode/support/thread/pthreads.cpp:47
#4  0x00007f487055e3ba in start_thread () from /lib/libpthread.so.0
---Type <return> to continue, or q <return> to quit---
#5  0x00007f48702cb02d in clone () from /lib/libc.so.6
#6  0x0000000000000000 in ?? ()

Thread 1 (process 8903):
#0  0x00007f4870217fb5 in raise () from /lib/libc.so.6
#1  0x00007f4870219bc3 in abort () from /lib/libc.so.6
#2  0x00007f4870cd90b4 in __gnu_cxx::__verbose_terminate_handler ()
   from /usr/lib/libstdc++.so.6
#3  0x00007f4870cd74b6 in ?? () from /usr/lib/libstdc++.so.6
#4  0x00007f4870cd74e3 in std::terminate () from /usr/lib/libstdc++.so.6
#5  0x00007f4870cd75ca in __cxa_throw () from /usr/lib/libstdc++.so.6
#6  0x00007f4870f1e85f in Gecode::Support::Thread::Run::exec (
    this=<value optimized out>) at ./gecode/support/thread/pthreads.hpp:64
#7  0x00007f4870f1e969 in Gecode::Support::bootstrap (p=0x22c0)
    at gecode/support/thread/pthreads.cpp:47
#8  0x00007f487055e3ba in start_thread () from /lib/libpthread.so.0
#9  0x00007f48702cb02d in clone () from /lib/libc.so.6
#10 0x0000000000000000 in ?? ()
(gdb)

_______________________________________________
Gecode users mailing list
users at gecode.org
https://www.gecode.org/mailman/listinfo/gecode-users



From rcas at kth.se  Fri Sep 24 12:45:34 2010
From: rcas at kth.se (=?iso-8859-1?Q?Roberto_Casta=F1eda?=)
Date: Fri, 24 Sep 2010 10:45:34 +0000
Subject: [gecode-users] Initialization of internal tree nodes in the unary
 Edge Finding propagator
Message-ID: <A249023ECA4AD740919D9F3CED8EFC8D1AA1A6A2@EXDB4.ug.kth.se>

Hello, everyone!

I am studying the propagation algorithms for unary resource constraints from 
Petr Vil?m [1], and looking at how they are implemented in Gecode 3.4.0. While 
looking at the implementation of the Edge Finding algorithm (scheduling/unary/edge-finding.hpp),
I have found a discrepancy with respect to Algorithm 2.6 in [1] that I do not
really understand: in the Gecode implementation, the internal nodes of the 
Theta-Lambda tree are not initialized (i.e. assigned values for p, ect, lp, lect
 computed from the leaves upwards) at the beginning of the algorithm. 

I have also checked if this makes any difference on the propagation for the root 
search node for the example from Figure 2.4. [1]. This is the frequency of execution
of each propagator before reaching the fixpoint with the original Gecode Edge Finding 
algorithm:

6 Detectable Precedences
6 Edge Finding
6 Not-First/Not-Last
3 Overload Checking
3 Subsumed

And this is the frequency when I initialized all nodes at the beginning (with time 
complexity O(n)):

4 Detectable Precedences
4 Edge Finding
4 Not-First/Not-Last
2 Overload Checking
2 Subsumed

While the constraint stores in the fixpoint are equal in both cases, the second version
(which I believe is what [1] proposes) saves one iteration of the whole family of unary
resource propagators. Is there any reason I missed for not initializing the internal 
nodes of the Theta-Lambda tree?

I attach the Figure 2.4. example code.

Best regards,

Roberto

[1] Petr Vil?m, Global Constraints in Scheduling, PhD thesis, 
Charles University, Prague, Czech Republic, 2007.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: figure_2_4.cpp
Type: application/octet-stream
Size: 1243 bytes
Desc: figure_2_4.cpp
URL: <http://www.gecode.org/pipermail/users/attachments/20100924/0d930943/attachment.obj>

From cschulte at kth.se  Fri Sep 24 14:23:28 2010
From: cschulte at kth.se (Christian Schulte)
Date: Fri, 24 Sep 2010 14:23:28 +0200
Subject: [gecode-users] Initialization of internal tree nodes in the
	unary Edge Finding propagator
In-Reply-To: <A249023ECA4AD740919D9F3CED8EFC8D1AA1A6A2@EXDB4.ug.kth.se>
References: <A249023ECA4AD740919D9F3CED8EFC8D1AA1A6A2@EXDB4.ug.kth.se>
Message-ID: <000c01cb5be3$4ba528d0$e2ef7a70$@se>

Hi,

Maybe we take that offline as the scheduling stuff is not yet final.

Christian

--
Christian Schulte, web.ict.kth.se/~cschulte/



-----Original Message-----
From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf
Of Roberto Casta?eda
Sent: Friday, September 24, 2010 12:46 PM
To: users at gecode.org
Subject: [gecode-users] Initialization of internal tree nodes in the unary
Edge Finding propagator

Hello, everyone!

I am studying the propagation algorithms for unary resource constraints from
Petr Vil?m [1], and looking at how they are implemented in Gecode 3.4.0.
While looking at the implementation of the Edge Finding algorithm
(scheduling/unary/edge-finding.hpp),
I have found a discrepancy with respect to Algorithm 2.6 in [1] that I do
not really understand: in the Gecode implementation, the internal nodes of
the Theta-Lambda tree are not initialized (i.e. assigned values for p, ect,
lp, lect  computed from the leaves upwards) at the beginning of the
algorithm. 

I have also checked if this makes any difference on the propagation for the
root search node for the example from Figure 2.4. [1]. This is the frequency
of execution of each propagator before reaching the fixpoint with the
original Gecode Edge Finding
algorithm:

6 Detectable Precedences
6 Edge Finding
6 Not-First/Not-Last
3 Overload Checking
3 Subsumed

And this is the frequency when I initialized all nodes at the beginning
(with time complexity O(n)):

4 Detectable Precedences
4 Edge Finding
4 Not-First/Not-Last
2 Overload Checking
2 Subsumed

While the constraint stores in the fixpoint are equal in both cases, the
second version (which I believe is what [1] proposes) saves one iteration of
the whole family of unary resource propagators. Is there any reason I missed
for not initializing the internal nodes of the Theta-Lambda tree?

I attach the Figure 2.4. example code.

Best regards,

Roberto

[1] Petr Vil?m, Global Constraints in Scheduling, PhD thesis, Charles
University, Prague, Czech Republic, 2007.



From denys.duchier at univ-orleans.fr  Sun Sep 26 12:00:29 2010
From: denys.duchier at univ-orleans.fr (Denys Duchier)
Date: Sun, 26 Sep 2010 12:00:29 +0200
Subject: [gecode-users] very odd bug in small program
Message-ID: <87tylc4yf6.fsf@tiny.univ-orleans.fr>

I must be doing something embarassingly stupid, but I can't find the bug
in the small attached program below.  With the line marked "comment this
out" commented out, I get the expected number of solutions, but if I
leave this linear constraint uncommented, I get none (I expect just as
many solutions, but with a cost computed for each one).

-------------- next part --------------
A non-text attachment was scrubbed...
Name: bug.cc
Type: text/x-c++src
Size: 1292 bytes
Desc: buggy program
URL: <http://www.gecode.org/pipermail/users/attachments/20100926/d6cc2520/attachment.cc>
-------------- next part --------------

Any help would be appreciated.

Cheers,

--Denys

From denys.duchier at univ-orleans.fr  Sun Sep 26 18:11:55 2010
From: denys.duchier at univ-orleans.fr (Denys Duchier)
Date: Sun, 26 Sep 2010 18:11:55 +0200
Subject: [gecode-users] minimodel bug / missing constructor
Message-ID: <87k4m84h84.fsf@tiny.univ-orleans.fr>

rel(*this, element(args,i) == c) doesn't work when args is a sequence of
boolean variables... and indeed there is not constructor for:

    LinExpr element(const BoolVarArgs& x, const LinExpr& y);

an oversight?

Cheers,

--Denys


From chris.mears at monash.edu  Mon Sep 27 06:22:20 2010
From: chris.mears at monash.edu (Chris Mears)
Date: Mon, 27 Sep 2010 14:22:20 +1000
Subject: [gecode-users] very odd bug in small program
In-Reply-To: <87tylc4yf6.fsf@tiny.univ-orleans.fr>
References: <87tylc4yf6.fsf@tiny.univ-orleans.fr>
Message-ID: <AANLkTinvwfrhgf1aVXDfTTBr0kn6+yLx5idyOqH8wNG_@mail.gmail.com>

Hi Denys,

I think the problem is that the Matrix constructor copies the IntArgs
array, so that when you modify MC you aren't changing C itself.
(Whether it ought to do this or not is another question.)  One
solution is to instead write:

  IntArgs C(4*4, 7, 1, 3, 4, 8, 2, 5, 1, 4, 3, 7, 2, 3, 1, 6, 8);
  linear(*this, C, X, IRT_EQ, N);

Cheers,
Chris


From denys.duchier at univ-orleans.fr  Mon Sep 27 13:20:30 2010
From: denys.duchier at univ-orleans.fr (Denys Duchier)
Date: Mon, 27 Sep 2010 13:20:30 +0200
Subject: [gecode-users] very odd bug in small program
In-Reply-To: <AANLkTinvwfrhgf1aVXDfTTBr0kn6+yLx5idyOqH8wNG_@mail.gmail.com>
	(Chris Mears's message of "Mon, 27 Sep 2010 14:22:20 +1000")
References: <87tylc4yf6.fsf@tiny.univ-orleans.fr>
	<AANLkTinvwfrhgf1aVXDfTTBr0kn6+yLx5idyOqH8wNG_@mail.gmail.com>
Message-ID: <8762xr8mbl.fsf@tiny.univ-orleans.fr>

Chris Mears <chris.mears at monash.edu> writes:

> I think the problem is that the Matrix constructor copies the IntArgs
> array, so that when you modify MC you aren't changing C itself.

meh! I expected a matrix to be a view of the same underlying model, not
a copy. me not likey!

> (Whether it ought to do this or not is another question.)  One
> solution is to instead write:
>
>   IntArgs C(4*4, 7, 1, 3, 4, 8, 2, 5, 1, 4, 3, 7, 2, 3, 1, 6, 8);

ok, thank you, but... (sigh)

--Denys


From cschulte at kth.se  Mon Sep 27 15:08:05 2010
From: cschulte at kth.se (Christian Schulte)
Date: Mon, 27 Sep 2010 15:08:05 +0200
Subject: [gecode-users] very odd bug in small program
In-Reply-To: <8762xr8mbl.fsf@tiny.univ-orleans.fr>
References: <87tylc4yf6.fsf@tiny.univ-orleans.fr>	<AANLkTinvwfrhgf1aVXDfTTBr0kn6+yLx5idyOqH8wNG_@mail.gmail.com>
	<8762xr8mbl.fsf@tiny.univ-orleans.fr>
Message-ID: <002401cb5e45$0622cf10$12686d30$@se>

Denys,

I also believed that this was the case: it is for variable arrays but not
for argument arrays (is that correct?).

Mikael: can you shed some light on this, please?

Christian

--
Christian Schulte, www.ict.kth.se/~cschulte/


-----Original Message-----
From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf
Of Denys Duchier
Sent: Monday, September 27, 2010 1:21 PM
To: users at gecode.org
Subject: Re: [gecode-users] very odd bug in small program

Chris Mears <chris.mears at monash.edu> writes:

> I think the problem is that the Matrix constructor copies the IntArgs
> array, so that when you modify MC you aren't changing C itself.

meh! I expected a matrix to be a view of the same underlying model, not
a copy. me not likey!

> (Whether it ought to do this or not is another question.)  One
> solution is to instead write:
>
>   IntArgs C(4*4, 7, 1, 3, 4, 8, 2, 5, 1, 4, 3, 7, 2, 3, 1, 6, 8);

ok, thank you, but... (sigh)

--Denys

_______________________________________________
Gecode users mailing list
users at gecode.org
https://www.gecode.org/mailman/listinfo/gecode-users



From zayenz at gmail.com  Mon Sep 27 15:21:52 2010
From: zayenz at gmail.com (Mikael Zayenz Lagerkvist)
Date: Mon, 27 Sep 2010 15:21:52 +0200
Subject: [gecode-users] very odd bug in small program
In-Reply-To: <002401cb5e45$0622cf10$12686d30$@se>
References: <87tylc4yf6.fsf@tiny.univ-orleans.fr>
	<AANLkTinvwfrhgf1aVXDfTTBr0kn6+yLx5idyOqH8wNG_@mail.gmail.com>
	<8762xr8mbl.fsf@tiny.univ-orleans.fr>
	<002401cb5e45$0622cf10$12686d30$@se>
Message-ID: <AANLkTinnb0-u_sq6f1yFC5H7WxM_AOVyPA5s9vggGbYn@mail.gmail.com>

Hi,

This happens because matrix stores a copy of it's array. For variable-arrays
it works as expected, since copy construction shares the elements. For
argument arrays, it doesn't. Maybe we should consider using references
instead of copies for matrices...

For your current problem, you could use the Matrix initialization and then
use the get_array member function to get a copy of the contents.

/Mikael

On Mon, Sep 27, 2010 at 3:08 PM, Christian Schulte <cschulte at kth.se> wrote:

> Denys,
>
> I also believed that this was the case: it is for variable arrays but not
> for argument arrays (is that correct?).
>
> Mikael: can you shed some light on this, please?
>
> Christian
>
> --
> Christian Schulte, www.ict.kth.se/~cschulte/
>
>
> -----Original Message-----
> From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf
> Of Denys Duchier
> Sent: Monday, September 27, 2010 1:21 PM
> To: users at gecode.org
> Subject: Re: [gecode-users] very odd bug in small program
>
> Chris Mears <chris.mears at monash.edu> writes:
>
> > I think the problem is that the Matrix constructor copies the IntArgs
> > array, so that when you modify MC you aren't changing C itself.
>
> meh! I expected a matrix to be a view of the same underlying model, not
> a copy. me not likey!
>
> > (Whether it ought to do this or not is another question.)  One
> > solution is to instead write:
> >
> >   IntArgs C(4*4, 7, 1, 3, 4, 8, 2, 5, 1, 4, 3, 7, 2, 3, 1, 6, 8);
>
> ok, thank you, but... (sigh)
>
> --Denys
>
> _______________________________________________
> Gecode users mailing list
> users at gecode.org
> https://www.gecode.org/mailman/listinfo/gecode-users
>
>
> _______________________________________________
> Gecode users mailing list
> users at gecode.org
> https://www.gecode.org/mailman/listinfo/gecode-users
>



-- 
Mikael Zayenz Lagerkvist, http://www.ict.kth.se/~zayenz/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.gecode.org/pipermail/users/attachments/20100927/f611425d/attachment.htm>

From benouna84 at live.fr  Wed Sep 29 14:36:48 2010
From: benouna84 at live.fr (frank lemoine)
Date: Wed, 29 Sep 2010 14:36:48 +0200
Subject: [gecode-users] Atmost constraint
Message-ID: <SNT131-w225E87519D07075B3059FFA6670@phx.gbl>


hello,

 

i'm searching for a CSP constraint that detect and prevents the repetition of elements in solutions. I thought that the atmost constraint could 

 

resolve it, but this constraint just prevent the repetition in each solution. i'm wondering if there are in Gecode a globale constraint that 

 

propagates the atmost effect on all solutions.

 

hope this was clear

 

 

Best Cheers.

 

 

Frank
 		 	   		  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.gecode.org/pipermail/users/attachments/20100929/56f7487e/attachment.htm>

From cschulte at kth.se  Wed Sep 29 17:31:29 2010
From: cschulte at kth.se (Christian Schulte)
Date: Wed, 29 Sep 2010 17:31:29 +0200
Subject: [gecode-users] Atmost constraint
In-Reply-To: <SNT131-w225E87519D07075B3059FFA6670@phx.gbl>
References: <SNT131-w225E87519D07075B3059FFA6670@phx.gbl>
Message-ID: <003d01cb5feb$63aa0070$2afe0150$@se>

Sorry, but I do not understand your question. How about an example?

 

Christian

 

--

Christian Schulte, www.ict.kth.se/~cschulte/

 

From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf
Of frank lemoine
Sent: Wednesday, September 29, 2010 2:37 PM
To: gecode gecode
Subject: [gecode-users] Atmost constraint

 

hello,
 
i'm searching for a CSP constraint that detect and prevents the repetition
of elements in solutions. I thought that the atmost constraint could 
 
resolve it, but this constraint just prevent the repetition in each
solution. i'm wondering if there are in Gecode a globale constraint that 
 
propagates the atmost effect on all solutions.
 
hope this was clear
 
 
Best Cheers.
 
 
Frank

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.gecode.org/pipermail/users/attachments/20100929/51208886/attachment.htm>

