From kisshen at cisco.com  Tue May  3 18:23:23 2011
From: kisshen at cisco.com (Kish Shen)
Date: Tue, 03 May 2011 17:23:23 +0100
Subject: [gecode-users] inforation on count constraints
Message-ID: <4DC02BFB.2070702@cisco.com>

Hi,

I am trying to figure out if some of the versions of the count 
constraints corresponds to constraints in other places (e.g. the global 
constraint catalog, in other constraint systems, or in papers).
One of the count variants maps to the count constraint of the global 
constraint catalog (and SICStus), while another maps to (one version) of 
the global cardinality constraint. However, I was not able to determine 
if the other versions of count have any equivalent to constraints 
defined elsewhere, can anyone help by pointing me to any equivalent 
constraints that might be defined elsewhere for the following (these 
descriptions are based on the ones in the MPG):


count(home, x, c, IRT_EQ, z):

where x is an array of integer variables and c is an array of integers 
of the same array size as x, and z is an integer variable (or value).

which constrains z to how often xi = cl.


count(home, x, y)

where x and y are integer variable arrays.

which constraints the number of variables in x that are equal to a value 
j is yj.

This seems to be a restricted version of the global cardinality 
constraint. Is the reason for providing this more restricted form 
because this restriction allows for a more efficient implementation of 
the constraint?


On a slightly different topic, in the MPG description of the count 
constraints, there is a reference to

count(home, x IntSet(0,1), IntSet(0,n))

which seems to be an example of using

count(home, x, d, c)

where x is an array of integer variables, d is an integer set, and c an 
array of integer values -- but the last argument (IntSet(0,n)) is also 
an integer set. I also cannot find the description of count with two 
IntSet in the reference documentation (in doc-latest, I assume for 
3.5.0?) Am I missing something?

Thanks in advance for any information!

Kish

-- 
This e-mail may contain confidential and privileged material for the
sole use of the intended recipient. Any review, use, distribution or
disclosure by others is strictly prohibited. If you are not the intended
recipient (or authorized to receive for the recipient), please contact
the sender by reply e-mail and delete all copies of this message.
Cisco Systems Limited (Company Number: 02558939), is registered in
England and Wales with its registered office at 1 Callaghan Square,
Cardiff, South Glamorgan CF10 5BT.


From tack at gecode.org  Tue May  3 18:36:01 2011
From: tack at gecode.org (Guido Tack)
Date: Tue, 3 May 2011 18:36:01 +0200
Subject: [gecode-users] inforation on count constraints
In-Reply-To: <4DC02BFB.2070702@cisco.com>
References: <4DC02BFB.2070702@cisco.com>
Message-ID: <D069A0AB-240E-4F9D-9481-2B6E798B4F7D@gecode.org>

Kish Shen wrote:

> Hi,
> 
> I am trying to figure out if some of the versions of the count constraints corresponds to constraints in other places (e.g. the global constraint catalog, in other constraint systems, or in papers).
> One of the count variants maps to the count constraint of the global constraint catalog (and SICStus), while another maps to (one version) of the global cardinality constraint. However, I was not able to determine if the other versions of count have any equivalent to constraints defined elsewhere, can anyone help by pointing me to any equivalent constraints that might be defined elsewhere for the following (these descriptions are based on the ones in the MPG):
> 
> 
> count(home, x, c, IRT_EQ, z):
> 
> where x is an array of integer variables and c is an array of integers of the same array size as x, and z is an integer variable (or value).
> 
> which constrains z to how often xi = cl.

I don't know if this version is used anywhere else.

> count(home, x, y)
> 
> where x and y are integer variable arrays.
> 
> which constraints the number of variables in x that are equal to a value j is yj.
> 
> This seems to be a restricted version of the global cardinality constraint. Is the reason for providing this more restricted form because this restriction allows for a more efficient implementation of the constraint?

No, it's just for convenience, so that you don't have to write
count(home,x,y,IntArgs::create(y.size(),0,1));

> On a slightly different topic, in the MPG description of the count constraints, there is a reference to
> 
> count(home, x IntSet(0,1), IntSet(0,n))
> 
> which seems to be an example of using
> 
> count(home, x, d, c)
> 
> where x is an array of integer variables, d is an integer set, and c an array of integer values -- but the last argument (IntSet(0,n)) is also an integer set. I also cannot find the description of count with two IntSet in the reference documentation (in doc-latest, I assume for 3.5.0?) Am I missing something?

That's a bug in the documentation, thanks.  Will be fixed in the next version.

Cheers,
	Guido

-- 
Guido Tack, http://people.cs.kuleuven.be/~guido.tack/







From ChaosAngel at gmx.de  Wed May  4 15:24:36 2011
From: ChaosAngel at gmx.de (Max Ostrowski)
Date: Wed, 04 May 2011 15:24:36 +0200
Subject: [gecode-users] How to create a domain with holes
Message-ID: <20110504132436.29030@gmx.net>

Hello everybody,

i want to set the domain of an uninitialized IntVar to,
for example [1-7, 5-14, 23-42].

I found in the documentation that i can use a set to initialize the domain of the variable, but i do not want to explicitly enumerate the set.
(the ranges could be large).
So is there a possibility to compute the union of several ranges(implicitly) and use it for the domain of a variable?


PS: I found an AddRange iterator but am not sure how to use it.

Best,
Max
-- 
NEU: FreePhone - kostenlos mobil telefonieren und surfen!			
Jetzt informieren: http://www.gmx.net/de/go/freephone


From cschulte at kth.se  Wed May  4 15:29:45 2011
From: cschulte at kth.se (Christian Schulte)
Date: Wed, 4 May 2011 15:29:45 +0200
Subject: [gecode-users] How to create a domain with holes
In-Reply-To: <20110504132436.29030@gmx.net>
References: <20110504132436.29030@gmx.net>
Message-ID: <000901cc0a5f$5554e660$fffeb320$@se>

Sets can be initialized from arrays of ranges, so you do not have to
enumerate individual elements. Please check the documentation carefully.

Christian

--
Christian Schulte, www.ict.kth.se/~cschulte/


-----Original Message-----
From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf
Of Max Ostrowski
Sent: Wednesday, May 04, 2011 3:25 PM
To: users at gecode.org
Subject: [gecode-users] How to create a domain with holes

Hello everybody,

i want to set the domain of an uninitialized IntVar to,
for example [1-7, 5-14, 23-42].

I found in the documentation that i can use a set to initialize the domain
of the variable, but i do not want to explicitly enumerate the set.
(the ranges could be large).
So is there a possibility to compute the union of several ranges(implicitly)
and use it for the domain of a variable?


PS: I found an AddRange iterator but am not sure how to use it.

Best,
Max
-- 
NEU: FreePhone - kostenlos mobil telefonieren und surfen!

Jetzt informieren: http://www.gmx.net/de/go/freephone

_______________________________________________
Gecode users mailing list
users at gecode.org
https://www.gecode.org/mailman/listinfo/gecode-users



From kisshen at cisco.com  Tue May 10 18:35:15 2011
From: kisshen at cisco.com (Kish Shen)
Date: Tue, 10 May 2011 17:35:15 +0100
Subject: [gecode-users] question about lexical ordering constraint and others
Message-ID: <4DC96943.30402@cisco.com>

Hi,

I have a few (more) question about various Gecode constraints that I am 
interfacing to ECLiPSe:

1) the constraint for lexical ordering

rel(Home, IntVarArgs, IntRelType, IntVarArgs)

requires the two arrays to be the same size. It seems the same 
restriction applies in the global constraint catalog for the lexical 
ordering constraints as well. However, the existing ECLiPSe lexical 
ordering constraints does not have this restriction -- i.e. the two 
sequences of numbers being compared can be different lengths. What is 
the reason for the same length restriction?

The lexical ordering for sequences of different length used in ECLiPSe 
seems to be the natural one, where missing numbers in the shorter 
sequence are replaced by 'bottom', i.e. a value smaller than any number.
So (using . to separate numbers in a sequence)

1.3 > 1.2.5

1.2.5 > 1.2

etc.

Could such a definition of ordering be used in the Gecode version as well?

2. What IntConLevel is supported in the binpacking constraint? I can't 
find a specification for this in the reference documentation (in 
doc-latest) [beyond the default of ICL_DEF]

3. For various versions of the same constraint (e.g. cumulative), some 
arguments can be IntArgs or IntVarArgs. In general, does it make a 
difference if I always use the version with IntVarArgs, even if all the 
IntVar has only one element in their domain (i.e. they are integers)?
I guess what I am asking is if (in general) Gecode does a check of its 
IntVarArgs argument to see if they are all integers and calls a more 
efficient implementation for the constraint if there is one? [I was 
specifically looking at the cumulative constraint, but there are 
obviously others].

The reaosn I ask is that in interfacing such constraints to ECLiPSe, I 
currently don't check if such arguments are all integers or if they 
contain some domain variables (IntVar). I can do this check, but if it 
is done in Gecode already, there is no reason for me to do so.


Thanks in advance for any help and information!

Cheers,

Kish

-- 
This e-mail may contain confidential and privileged material for the
sole use of the intended recipient. Any review, use, distribution or
disclosure by others is strictly prohibited. If you are not the intended
recipient (or authorized to receive for the recipient), please contact
the sender by reply e-mail and delete all copies of this message.
Cisco Systems Limited (Company Number: 02558939), is registered in
England and Wales with its registered office at 1 Callaghan Square,
Cardiff, South Glamorgan CF10 5BT.


From cschulte at kth.se  Tue May 10 20:25:13 2011
From: cschulte at kth.se (Christian Schulte)
Date: Tue, 10 May 2011 20:25:13 +0200
Subject: [gecode-users] question about lexical ordering constraint and
	others
In-Reply-To: <4DC96943.30402@cisco.com>
References: <4DC96943.30402@cisco.com>
Message-ID: <003401cc0f3f$9b354e60$d19feb20$@kth.se>

Hi Kish,

1) Hmmm, never thought about that. You could emulate this behavior by
extending one array as you suggested. Do you know any application that
relies on this behavior?  

2) Just ICL_DEF which is as the algorithm by Paul Shaw, see the referenced
paper.

3) Gecode always chooses the best propagator, cumulative is a good example:
if all the variables for the use are assigned it'll choose the special case.
If it is clear that cumulative is not needed (for example, all tasks require
more than half of the resource), a disjunctive scheduling propagator is
posted. This is true for all constraints: you ask which constraint you want
to have and Gecode posts the best propagator(s) it can for the constraint.

Cheers
Christian

--
Christian Schulte, KTH, web.it.kth.se/~cschulte/

-----Original Message-----
From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf
Of Kish Shen
Sent: Tuesday, May 10, 2011 6:35 PM
To: users at gecode.org
Subject: [gecode-users] question about lexical ordering constraint and
others

Hi,

I have a few (more) question about various Gecode constraints that I am
interfacing to ECLiPSe:

1) the constraint for lexical ordering

rel(Home, IntVarArgs, IntRelType, IntVarArgs)

requires the two arrays to be the same size. It seems the same restriction
applies in the global constraint catalog for the lexical ordering
constraints as well. However, the existing ECLiPSe lexical ordering
constraints does not have this restriction -- i.e. the two sequences of
numbers being compared can be different lengths. What is the reason for the
same length restriction?

The lexical ordering for sequences of different length used in ECLiPSe seems
to be the natural one, where missing numbers in the shorter sequence are
replaced by 'bottom', i.e. a value smaller than any number.
So (using . to separate numbers in a sequence)

1.3 > 1.2.5

1.2.5 > 1.2

etc.

Could such a definition of ordering be used in the Gecode version as well?

2. What IntConLevel is supported in the binpacking constraint? I can't find
a specification for this in the reference documentation (in
doc-latest) [beyond the default of ICL_DEF]

3. For various versions of the same constraint (e.g. cumulative), some
arguments can be IntArgs or IntVarArgs. In general, does it make a
difference if I always use the version with IntVarArgs, even if all the
IntVar has only one element in their domain (i.e. they are integers)?
I guess what I am asking is if (in general) Gecode does a check of its
IntVarArgs argument to see if they are all integers and calls a more
efficient implementation for the constraint if there is one? [I was
specifically looking at the cumulative constraint, but there are obviously
others].

The reaosn I ask is that in interfacing such constraints to ECLiPSe, I
currently don't check if such arguments are all integers or if they contain
some domain variables (IntVar). I can do this check, but if it is done in
Gecode already, there is no reason for me to do so.


Thanks in advance for any help and information!

Cheers,

Kish

--
This e-mail may contain confidential and privileged material for the sole
use of the intended recipient. Any review, use, distribution or disclosure
by others is strictly prohibited. If you are not the intended recipient (or
authorized to receive for the recipient), please contact the sender by reply
e-mail and delete all copies of this message.
Cisco Systems Limited (Company Number: 02558939), is registered in England
and Wales with its registered office at 1 Callaghan Square, Cardiff, South
Glamorgan CF10 5BT.

_______________________________________________
Gecode users mailing list
users at gecode.org
https://www.gecode.org/mailman/listinfo/gecode-users



From kisshen at cisco.com  Tue May 10 21:13:28 2011
From: kisshen at cisco.com (Kish Shen)
Date: Tue, 10 May 2011 20:13:28 +0100
Subject: [gecode-users] question about lexical ordering constraint and
 others
In-Reply-To: <003401cc0f3f$9b354e60$d19feb20$@kth.se>
References: <4DC96943.30402@cisco.com> <003401cc0f3f$9b354e60$d19feb20$@kth.se>
Message-ID: <4DC98E58.3050202@cisco.com>

Hi Christian,

Thanks for your reply!

On 10/05/2011 19:25, Christian Schulte wrote:
> Hi Kish,
>
> 1) Hmmm, never thought about that. You could emulate this behavior by
> extending one array as you suggested. Do you know any application that
> relies on this behavior?
>

Well, I don't really know applications that well, especially with using 
lexical ordering in a constraint setting, so I can't say if any 
application relies on this behaviour.

However, being able to sort sequences of different lengths in lexical 
order seems very natural and useful -- dictionaries (for languages with 
an alphabet) relies on this.

I think in practice for implementing the constraint behaviour, you don't 
always have to extend the shorter sequence....

> 2) Just ICL_DEF which is as the algorithm by Paul Shaw, see the referenced
> paper.
>

OK, I see. I guess this means the propagation strength doesn't fit well 
into the predefined levels.

> 3) Gecode always chooses the best propagator, cumulative is a good example:
> if all the variables for the use are assigned it'll choose the special case.
> If it is clear that cumulative is not needed (for example, all tasks require
> more than half of the resource), a disjunctive scheduling propagator is
> posted. This is true for all constraints: you ask which constraint you want
> to have and Gecode posts the best propagator(s) it can for the constraint.
>

Great, this is what I was hoping for, so I don't need to do all the 
extra checks to chose the right version of the constraint to call.

Thanks again,

Kish
> Cheers
> Christian
>
> --
> Christian Schulte, KTH, web.it.kth.se/~cschulte/
>
> -----Original Message-----
> From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf
> Of Kish Shen
> Sent: Tuesday, May 10, 2011 6:35 PM
> To: users at gecode.org
> Subject: [gecode-users] question about lexical ordering constraint and
> others
>
> Hi,
>
> I have a few (more) question about various Gecode constraints that I am
> interfacing to ECLiPSe:
>
> 1) the constraint for lexical ordering
>
> rel(Home, IntVarArgs, IntRelType, IntVarArgs)
>
> requires the two arrays to be the same size. It seems the same restriction
> applies in the global constraint catalog for the lexical ordering
> constraints as well. However, the existing ECLiPSe lexical ordering
> constraints does not have this restriction -- i.e. the two sequences of
> numbers being compared can be different lengths. What is the reason for the
> same length restriction?
>
> The lexical ordering for sequences of different length used in ECLiPSe seems
> to be the natural one, where missing numbers in the shorter sequence are
> replaced by 'bottom', i.e. a value smaller than any number.
> So (using . to separate numbers in a sequence)
>
> 1.3>  1.2.5
>
> 1.2.5>  1.2
>
> etc.
>
> Could such a definition of ordering be used in the Gecode version as well?
>
> 2. What IntConLevel is supported in the binpacking constraint? I can't find
> a specification for this in the reference documentation (in
> doc-latest) [beyond the default of ICL_DEF]
>
> 3. For various versions of the same constraint (e.g. cumulative), some
> arguments can be IntArgs or IntVarArgs. In general, does it make a
> difference if I always use the version with IntVarArgs, even if all the
> IntVar has only one element in their domain (i.e. they are integers)?
> I guess what I am asking is if (in general) Gecode does a check of its
> IntVarArgs argument to see if they are all integers and calls a more
> efficient implementation for the constraint if there is one? [I was
> specifically looking at the cumulative constraint, but there are obviously
> others].
>
> The reaosn I ask is that in interfacing such constraints to ECLiPSe, I
> currently don't check if such arguments are all integers or if they contain
> some domain variables (IntVar). I can do this check, but if it is done in
> Gecode already, there is no reason for me to do so.
>
>
> Thanks in advance for any help and information!
>
> Cheers,
>
> Kish
>
> --
> This e-mail may contain confidential and privileged material for the sole
> use of the intended recipient. Any review, use, distribution or disclosure
> by others is strictly prohibited. If you are not the intended recipient (or
> authorized to receive for the recipient), please contact the sender by reply
> e-mail and delete all copies of this message.
> Cisco Systems Limited (Company Number: 02558939), is registered in England
> and Wales with its registered office at 1 Callaghan Square, Cardiff, South
> Glamorgan CF10 5BT.
>
> _______________________________________________
> Gecode users mailing list
> users at gecode.org
> https://www.gecode.org/mailman/listinfo/gecode-users
>


-- 
This e-mail may contain confidential and privileged material for the
sole use of the intended recipient. Any review, use, distribution or
disclosure by others is strictly prohibited. If you are not the intended
recipient (or authorized to receive for the recipient), please contact
the sender by reply e-mail and delete all copies of this message.
Cisco Systems Limited (Company Number: 02558939), is registered in
England and Wales with its registered office at 1 Callaghan Square,
Cardiff, South Glamorgan CF10 5BT.


From caj at cs.st-andrews.ac.uk  Tue May 10 23:02:16 2011
From: caj at cs.st-andrews.ac.uk (Christopher Jefferson)
Date: Tue, 10 May 2011 22:02:16 +0100
Subject: [gecode-users] question about lexical ordering constraint and
	others
In-Reply-To: <4DC96943.30402@cisco.com>
References: <4DC96943.30402@cisco.com>
Message-ID: <submission.1QJu2l-0007Ds-7F@mail.cs.st-andrews.ac.uk>


On 10 May 2011, at 17:35, Kish Shen wrote:

> Hi,
> 
> I have a few (more) question about various Gecode constraints that I am interfacing to ECLiPSe:
> 
> 1) the constraint for lexical ordering
> 
> rel(Home, IntVarArgs, IntRelType, IntVarArgs)
> 
> requires the two arrays to be the same size. It seems the same restriction applies in the global constraint catalog for the lexical ordering constraints as well. However, the existing ECLiPSe lexical ordering constraints does not have this restriction -- i.e. the two sequences of numbers being compared can be different lengths. What is the reason for the same length restriction?
> 
> The lexical ordering for sequences of different length used in ECLiPSe seems to be the natural one, where missing numbers in the shorter sequence are replaced by 'bottom', i.e. a value smaller than any number.
> So (using . to separate numbers in a sequence)
> 
> 1.3 > 1.2.5
> 
> 1.2.5 > 1.2
> 
> etc.
> 
> Could such a definition of ordering be used in the Gecode version as well?

The easiest way to implement this is as follows:

If the second array is longer, just truncate it to the length of the first.
If the first array is longer, truncate it to the length of the first and change the lex<= constraint to a lex< (assuming gecode has a lex< constraint).

If you don't have a lex< constraint, you can make one by sticking 1 on the end of the first array and 0 on the end of the second (once the arrays are the same length).

Chris

From cschulte at kth.se  Wed May 11 11:04:17 2011
From: cschulte at kth.se (Christian Schulte)
Date: Wed, 11 May 2011 11:04:17 +0200
Subject: [gecode-users] question about lexical ordering constraint
	and	others
In-Reply-To: <submission.1QJu2l-0007Ds-7F@mail.cs.st-andrews.ac.uk>
References: <4DC96943.30402@cisco.com>
	<submission.1QJu2l-0007Ds-7F@mail.cs.st-andrews.ac.uk>
Message-ID: <00dc01cc0fba$68971fd0$39c55f70$@se>

Hi Chris,

Yep, I came to same conclusion after answering Kish, so I just added it to
the trunk.

Thanks
Christian

--
Christian Schulte, www.ict.kth.se/~cschulte/


-----Original Message-----
From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf
Of Christopher Jefferson
Sent: Tuesday, May 10, 2011 11:02 PM
To: Kish Shen
Cc: users at gecode.org
Subject: Re: [gecode-users] question about lexical ordering constraint and
others


On 10 May 2011, at 17:35, Kish Shen wrote:

> Hi,
> 
> I have a few (more) question about various Gecode constraints that I am
interfacing to ECLiPSe:
> 
> 1) the constraint for lexical ordering
> 
> rel(Home, IntVarArgs, IntRelType, IntVarArgs)
> 
> requires the two arrays to be the same size. It seems the same restriction
applies in the global constraint catalog for the lexical ordering
constraints as well. However, the existing ECLiPSe lexical ordering
constraints does not have this restriction -- i.e. the two sequences of
numbers being compared can be different lengths. What is the reason for the
same length restriction?
> 
> The lexical ordering for sequences of different length used in ECLiPSe
seems to be the natural one, where missing numbers in the shorter sequence
are replaced by 'bottom', i.e. a value smaller than any number.
> So (using . to separate numbers in a sequence)
> 
> 1.3 > 1.2.5
> 
> 1.2.5 > 1.2
> 
> etc.
> 
> Could such a definition of ordering be used in the Gecode version as well?

The easiest way to implement this is as follows:

If the second array is longer, just truncate it to the length of the first.
If the first array is longer, truncate it to the length of the first and
change the lex<= constraint to a lex< (assuming gecode has a lex<
constraint).

If you don't have a lex< constraint, you can make one by sticking 1 on the
end of the first array and 0 on the end of the second (once the arrays are
the same length).

Chris
_______________________________________________
Gecode users mailing list
users at gecode.org
https://www.gecode.org/mailman/listinfo/gecode-users



From mmann at informatik.uni-freiburg.de  Wed May 11 12:23:42 2011
From: mmann at informatik.uni-freiburg.de (Martin Mann)
Date: Wed, 11 May 2011 12:23:42 +0200
Subject: [gecode-users] static build and linking of gecode 3.5.0
Message-ID: <4DCA63AE.7080906@informatik.uni-freiburg.de>


Hi Gecoder,

I am currently struggling with the static libs of Gecode. Get pages of

   " undefined reference to `pthread_mutex_lock'"

and I am still digging in my setup to find the problem.

But I thought to remember that there were some issues about static 
gecode libs and so my question: Are they supported/tested or not 
recommended?

Unfortunately, I ve got to build statically, since the binary has to be 
executable at different linux and unix systems without local 
recompilation. :/

I will further investigate if the problem is somewhere within the 
calling code or the linking setup, which is unfortunately not written by 
me so I cannot give further information for now .. :/

I am using
  - x86_64-redhat-linux
  - gcc 4.5.1
  - gecode 3.5.0 with

./configure --enable-static --disable-shared --disable-gist 
--disable-int-vars --disable-driver --disable-examples 
--disable-scheduling --disable-graph

so long,
Martin



-- 
Martin Mann, Dipl. Bioinf.
Bioinformatics - Inst. of Computer Science
Albert-Ludwigs-University Freiburg
Tel: ++49-761-203-8259
Fax: ++49-761-203-7462
http://www.bioinf.uni-freiburg.de/~mmann/


From mmann at informatik.uni-freiburg.de  Wed May 11 12:32:01 2011
From: mmann at informatik.uni-freiburg.de (Martin Mann)
Date: Wed, 11 May 2011 12:32:01 +0200
Subject: [gecode-users] static build and linking of gecode 3.5.0
In-Reply-To: <4DCA63AE.7080906@informatik.uni-freiburg.de>
References: <4DCA63AE.7080906@informatik.uni-freiburg.de>
Message-ID: <4DCA65A1.2060701@informatik.uni-freiburg.de>


arggh... blind blind blind ...

of course the "-lpthread" was missing in the linker call... grr..

nevertheless, thanks for reading. ;)

Martin



Am 11.05.2011 12:23, schrieb Martin Mann:
>
> Hi Gecoder,
>
> I am currently struggling with the static libs of Gecode. Get pages of
>
> " undefined reference to `pthread_mutex_lock'"
>
> and I am still digging in my setup to find the problem.
>
> But I thought to remember that there were some issues about static
> gecode libs and so my question: Are they supported/tested or not
> recommended?
>
> Unfortunately, I ve got to build statically, since the binary has to be
> executable at different linux and unix systems without local
> recompilation. :/
>
> I will further investigate if the problem is somewhere within the
> calling code or the linking setup, which is unfortunately not written by
> me so I cannot give further information for now .. :/
>
> I am using
> - x86_64-redhat-linux
> - gcc 4.5.1
> - gecode 3.5.0 with
>
> ./configure --enable-static --disable-shared --disable-gist
> --disable-int-vars --disable-driver --disable-examples
> --disable-scheduling --disable-graph
>
> so long,
> Martin
>
>
>

-- 
Martin Mann, Dipl. Bioinf.
Bioinformatics - Inst. of Computer Science
Albert-Ludwigs-University Freiburg
Tel: ++49-761-203-8259
Fax: ++49-761-203-7462
http://www.bioinf.uni-freiburg.de/~mmann/


From tack at gecode.org  Wed May 11 12:34:26 2011
From: tack at gecode.org (Guido Tack)
Date: Wed, 11 May 2011 12:34:26 +0200
Subject: [gecode-users] static build and linking of gecode 3.5.0
In-Reply-To: <4DCA65A1.2060701@informatik.uni-freiburg.de>
References: <4DCA63AE.7080906@informatik.uni-freiburg.de>
	<4DCA65A1.2060701@informatik.uni-freiburg.de>
Message-ID: <22B93C90-9A16-4807-86BD-8FC6F164CF01@gecode.org>

On 11 May 2011, at 12:32, Martin Mann wrote:

> 
> arggh... blind blind blind ...
> 
> of course the "-lpthread" was missing in the linker call... grr..
> 
> nevertheless, thanks for reading. ;)

No worries.  Static linking should be fully supported on Unix (although it's not tested regularly).
Btw, with gcc you should use the -pthread compiler flag (for both compiling and linking) instead of -lpthread.

Guido

> 
> Martin
> 
> 
> 
> Am 11.05.2011 12:23, schrieb Martin Mann:
>> 
>> Hi Gecoder,
>> 
>> I am currently struggling with the static libs of Gecode. Get pages of
>> 
>> " undefined reference to `pthread_mutex_lock'"
>> 
>> and I am still digging in my setup to find the problem.
>> 
>> But I thought to remember that there were some issues about static
>> gecode libs and so my question: Are they supported/tested or not
>> recommended?
>> 
>> Unfortunately, I ve got to build statically, since the binary has to be
>> executable at different linux and unix systems without local
>> recompilation. :/
>> 
>> I will further investigate if the problem is somewhere within the
>> calling code or the linking setup, which is unfortunately not written by
>> me so I cannot give further information for now .. :/
>> 
>> I am using
>> - x86_64-redhat-linux
>> - gcc 4.5.1
>> - gecode 3.5.0 with
>> 
>> ./configure --enable-static --disable-shared --disable-gist
>> --disable-int-vars --disable-driver --disable-examples
>> --disable-scheduling --disable-graph
>> 
>> so long,
>> Martin
>> 
>> 
>> 
> 
> -- 
> Martin Mann, Dipl. Bioinf.
> Bioinformatics - Inst. of Computer Science
> Albert-Ludwigs-University Freiburg
> Tel: ++49-761-203-8259
> Fax: ++49-761-203-7462
> http://www.bioinf.uni-freiburg.de/~mmann/
> 
> _______________________________________________
> Gecode users mailing list
> users at gecode.org
> https://www.gecode.org/mailman/listinfo/gecode-users

-- 
Guido Tack, http://people.cs.kuleuven.be/~guido.tack/






From mmann at informatik.uni-freiburg.de  Thu May 12 13:44:37 2011
From: mmann at informatik.uni-freiburg.de (Martin Mann)
Date: Thu, 12 May 2011 13:44:37 +0200
Subject: [gecode-users] g++ version 4.2 requirement
Message-ID: <4DCBC825.2020501@informatik.uni-freiburg.de>


Hi Gecoder,

I tried to compile Gecode 3.5 on an older system with g++ 4.1.2 and it 
failed since the configure checks and requires g++ 4.2 or higher.

Is this really a strict requirement or only needed for certain modules 
or features?

I am still in the static build scenario. If I statically build the 
binary on a system with g++ 4.5 and run it on the old machine it crashes 
due to kernel incompatibilites. Somewhat expected..

Do you see a workaround? Is the dependency strict or for efficiency?

Thanks for help,
Martin



-- 
Martin Mann, Dipl. Bioinf.
Bioinformatics - Inst. of Computer Science
Albert-Ludwigs-University Freiburg
Tel: ++49-761-203-8259
Fax: ++49-761-203-7462
http://www.bioinf.uni-freiburg.de/~mmann/


From tack at gecode.org  Thu May 12 13:51:19 2011
From: tack at gecode.org (Guido Tack)
Date: Thu, 12 May 2011 13:51:19 +0200
Subject: [gecode-users] g++ version 4.2 requirement
In-Reply-To: <4DCBC825.2020501@informatik.uni-freiburg.de>
References: <4DCBC825.2020501@informatik.uni-freiburg.de>
Message-ID: <B3A32376-ED72-4558-96D4-5B8A4157DD66@gecode.org>

On 12 May 2011, at 13:44, Martin Mann wrote:

> 
> Hi Gecoder,
> 
> I tried to compile Gecode 3.5 on an older system with g++ 4.1.2 and it failed since the configure checks and requires g++ 4.2 or higher.
> 
> Is this really a strict requirement or only needed for certain modules or features?
> 
> I am still in the static build scenario. If I statically build the binary on a system with g++ 4.5 and run it on the old machine it crashes due to kernel incompatibilites. Somewhat expected..
> 
> Do you see a workaround? Is the dependency strict or for efficiency?

This is a strict dependency,  g++ < 4.2 does not correctly implement the C++ language we use, and even if you make it compile, the generated code is incorrect (very subtly incorrect, of course).
I can't see how a static binary compiled with g++ 4.5 can rely on a certain kernel. Are you sure it's completely linked (i.e., ldd doesn't list any dependencies)?  Could you set up a virtual machine with the correct target kernel but a newer gcc for compiling?

Cheers,
	Guido

-- 
Guido Tack, http://people.cs.kuleuven.be/~guido.tack/







From mmann at informatik.uni-freiburg.de  Thu May 12 15:01:40 2011
From: mmann at informatik.uni-freiburg.de (Martin Mann)
Date: Thu, 12 May 2011 15:01:40 +0200
Subject: [gecode-users] g++ version 4.2 requirement
In-Reply-To: <B3A32376-ED72-4558-96D4-5B8A4157DD66@gecode.org>
References: <4DCBC825.2020501@informatik.uni-freiburg.de>
	<B3A32376-ED72-4558-96D4-5B8A4157DD66@gecode.org>
Message-ID: <4DCBDA34.2090107@informatik.uni-freiburg.de>


Am 12.05.2011 13:51, schrieb Guido Tack:
> On 12 May 2011, at 13:44, Martin Mann wrote:
>
>>
>> Hi Gecoder,
>>
>> I tried to compile Gecode 3.5 on an older system with g++ 4.1.2 and it failed since the configure checks and requires g++ 4.2 or higher.
>>
>> Is this really a strict requirement or only needed for certain modules or features?
>>
>> I am still in the static build scenario. If I statically build the binary on a system with g++ 4.5 and run it on the old machine it crashes due to kernel incompatibilites. Somewhat expected..
>>
>> Do you see a workaround? Is the dependency strict or for efficiency?
>
> This is a strict dependency,  g++<  4.2 does not correctly implement the C++ language we use, and even if you make it compile, the generated code is incorrect (very subtly incorrect, of course).

> I can't see how a static binary compiled with g++ 4.5 can rely on a certain kernel. Are you sure it's completely linked (i.e., ldd doesn't list any dependencies)?  Could you set up a virtual machine with the correct target kernel but a newer gcc for compiling?


Seems like there are some kernel compatibility dependencies of g++ as 
far as I recall the infos from our administrator.

The binary is completely statically linked. Accordingly, the "ldd" says 
"not a dynamic executable".

I compiled and linked the binary with g++ 4.5.1 on a "2.6.35" kernel and 
everything works fine.

But if I run the binary on a "2.6.18" kernel I get
	FATAL: kernel too old
	Segmentation fault


If you dont see a different option it seems I cannot avoid installing a 
newer g++ on the old kernel machines to build a compatible static binary 
for all machines.. :/

If anybody sees another option, please let me know.

So long,
Martin




-- 
Martin Mann, Dipl. Bioinf.
Bioinformatics - Inst. of Computer Science
Albert-Ludwigs-University Freiburg
Tel: ++49-761-203-8259
Fax: ++49-761-203-7462
http://www.bioinf.uni-freiburg.de/~mmann/


From denys.duchier at univ-orleans.fr  Thu May 12 22:28:08 2011
From: denys.duchier at univ-orleans.fr (Denys Duchier)
Date: Thu, 12 May 2011 22:28:08 +0200
Subject: [gecode-users] g++ version 4.2 requirement
In-Reply-To: <4DCBDA34.2090107@informatik.uni-freiburg.de> (Martin Mann's
	message of "Thu, 12 May 2011 15:01:40 +0200")
References: <4DCBC825.2020501@informatik.uni-freiburg.de>
	<B3A32376-ED72-4558-96D4-5B8A4157DD66@gecode.org>
	<4DCBDA34.2090107@informatik.uni-freiburg.de>
Message-ID: <87sjsju0iv.fsf@tiny.univ-orleans.fr>

Martin Mann <mmann at informatik.uni-freiburg.de> writes:

> But if I run the binary on a "2.6.18" kernel I get
> 	FATAL: kernel too old
> 	Segmentation fault

this is glibc complaining (the one statically linked into your
executable).

Cheers,

--Denys


From alin_pt at yahoo.com  Sat May 14 21:39:34 2011
From: alin_pt at yahoo.com (Alin)
Date: Sat, 14 May 2011 19:39:34 +0000 (UTC)
Subject: [gecode-users] mod constraint branching
Message-ID: <loom.20110514T212900-36@post.gmane.org>

Hallo,

 I have been trying the mod constraint, but I encountered kind of a problem with
the branching:

[details about what I did]
I have resources that can do a job only on a certain day
so i set the time to be the same as the resource available that day

mod(*this, resources[i], iDays, start_times[i]);

[actual problem]
my problem is that when doing the branching
if I do:

branch(*this, resources, INT_VAR_NONE, INT_VAL_RND);

I get correct values for resources, but 

branch(*this, resources, INT_VAR_NONE, INT_VAL_MIN);

will return incorrect values,
for example: resource[i] will be set to 0,
             and start_times[i] will be 2
             
             while iDay is constant (7)

why does this happen ?
shouldn't branching determine just the order of the elements that are searched ?
shouldn't the value be correct indifferent of the branching type ?



From alin_pt at yahoo.com  Sun May 15 10:41:55 2011
From: alin_pt at yahoo.com (Alin)
Date: Sun, 15 May 2011 08:41:55 +0000 (UTC)
Subject: [gecode-users] mod constraint branching
References: <loom.20110514T212900-36@post.gmane.org>
Message-ID: <loom.20110515T103324-989@post.gmane.org>

Alin <alin_pt at ...> writes:

Using GIST I realized that there are actually two solutions
(in my parameters I only wanted one solution so this is why I didn't notice it
before)

and the first one is incorrect while the second is correct, but oddly enough,
the correct one is colored yellow while the incorrect one green.

Also, I am using a minimize script, 
and the second solution is correct and also has a smaller cost.
Why is this happening ? 
Why do I get a solution that is incorrect and not optimal ?




From tack at gecode.org  Sun May 15 18:28:04 2011
From: tack at gecode.org (Guido Tack)
Date: Sun, 15 May 2011 18:28:04 +0200
Subject: [gecode-users] mod constraint branching
In-Reply-To: <loom.20110514T212900-36@post.gmane.org>
References: <loom.20110514T212900-36@post.gmane.org>
Message-ID: <E2462B98-7833-456E-AB8B-7CD42DE769C4@gecode.org>

On 14 May 2011, at 21:39, Alin wrote:

> Hallo,
> 
> I have been trying the mod constraint, but I encountered kind of a problem with
> the branching:
> 
> [details about what I did]
> I have resources that can do a job only on a certain day
> so i set the time to be the same as the resource available that day
> 
> mod(*this, resources[i], iDays, start_times[i]);
> 
> [actual problem]
> my problem is that when doing the branching
> if I do:
> 
> branch(*this, resources, INT_VAR_NONE, INT_VAL_RND);
> 
> I get correct values for resources, but 
> 
> branch(*this, resources, INT_VAR_NONE, INT_VAL_MIN);
> 
> will return incorrect values,
> for example: resource[i] will be set to 0,
>             and start_times[i] will be 2
> 
>             while iDay is constant (7)
> 
> why does this happen ?
> shouldn't branching determine just the order of the elements that are searched ?
> shouldn't the value be correct indifferent of the branching type ?

Yes, the branching just determines the order, and the solution should be correct.  I couldn't easily reproduce the problem, but it sounds like a bug in the mod propagator (the VAL_MIN branching just exhibits the bug because it actually tries 0 for resource[i], whereas the random branching might not).
As I said, I can't reproduce this.  Can you send me a short version of your code that exhibits this problem?

Cheers,
	Guido

-- 
Guido Tack, http://people.cs.kuleuven.be/~guido.tack/





From kisshen at cisco.com  Tue May 17 18:29:24 2011
From: kisshen at cisco.com (Kish Shen)
Date: Tue, 17 May 2011 17:29:24 +0100
Subject: [gecode-users] task end times in cululative/unary constraints
Message-ID: <4DD2A264.3030809@cisco.com>

Hi,

In most versions of Gecode's cumulative and unary constraints, you need 
to provide the start, duration and end times for tasks. For the ECLiPSe 
cumulative and unary constraints, you only need to provide the start and 
duration times. I understand that having the end times for task allows 
for more opportunities for propagation, but are they needed (or more 
precisely, are the extra constraints end = start + duration needed). if 
the end times are not used anywhere.

The reason I am asking is that in the ECLiPSe interface to Gecode, one 
of the aim is to provide compatibility to existing ECLiPSe code, so this 
means providing cumulative/unary constraints with flexible durations, 
but without end times, which is what ECLiPSe has. For these constraints, 
the user would have no access to the end times, but currently I still 
post the extra constraints end = start + duration for each task, as the 
Gecode call requires the end times, and MPG suggest that these 
constraints should be posted. But when I was looking at the code 
yesterday, I started to wonder if this makes sense if the user cannot 
see (and so cannot post constraints that will affect) the end times. So 
my question is, does it make sense to post these constraints under these 
conditions?

Thanks and cheers,

Kish

-- 
This e-mail may contain confidential and privileged material for the
sole use of the intended recipient. Any review, use, distribution or
disclosure by others is strictly prohibited. If you are not the intended
recipient (or authorized to receive for the recipient), please contact
the sender by reply e-mail and delete all copies of this message.
Cisco Systems Limited (Company Number: 02558939), is registered in
England and Wales with its registered office at 1 Callaghan Square,
Cardiff, South Glamorgan CF10 5BT.


From tack at gecode.org  Wed May 18 20:52:28 2011
From: tack at gecode.org (Guido Tack)
Date: Wed, 18 May 2011 20:52:28 +0200
Subject: [gecode-users] task end times in cululative/unary constraints
In-Reply-To: <4DD2A264.3030809@cisco.com>
References: <4DD2A264.3030809@cisco.com>
Message-ID: <4EDE0709-AE9A-49EE-A953-169CA219E850@gecode.org>

Hi Kish,

the interface for the scheduling constraints is not yet as polished as it should be.  We basically have two versions: one with a fixed and a flexible argument (either of which can be start, end, or processing time), and one with fully flexible arguments.  What's missing is an additional post function that selects the right propagators depending on the arguments.  So you'll have to check yourself: if for all arguments, one of the three parameters is fixed, you pick the fixed-argument versions, otherwise you have to introduce dummy variables and post the end=start+duration constraints.
The reason for this is that in the case that one activity is used in more than one scheduling constraint, you wouldn't want to introduce one end variable plus one end=start+duration constraint per scheduling constraint.  This kind of logic should go into a proper modeling layer, which we don't have yet.

Cheers,
	Guido

On 17 May 2011, at 18:29, Kish Shen wrote:

> Hi,
> 
> In most versions of Gecode's cumulative and unary constraints, you need to provide the start, duration and end times for tasks. For the ECLiPSe cumulative and unary constraints, you only need to provide the start and duration times. I understand that having the end times for task allows for more opportunities for propagation, but are they needed (or more precisely, are the extra constraints end = start + duration needed). if the end times are not used anywhere.



> 
> The reason I am asking is that in the ECLiPSe interface to Gecode, one of the aim is to provide compatibility to existing ECLiPSe code, so this means providing cumulative/unary constraints with flexible durations, but without end times, which is what ECLiPSe has. For these constraints, the user would have no access to the end times, but currently I still post the extra constraints end = start + duration for each task, as the Gecode call requires the end times, and MPG suggest that these constraints should be posted. But when I was looking at the code yesterday, I started to wonder if this makes sense if the user cannot see (and so cannot post constraints that will affect) the end times. So my question is, does it make sense to post these constraints under these conditions?
> 
> Thanks and cheers,
> 
> Kish
> 
> -- 
> This e-mail may contain confidential and privileged material for the
> sole use of the intended recipient. Any review, use, distribution or
> disclosure by others is strictly prohibited. If you are not the intended
> recipient (or authorized to receive for the recipient), please contact
> the sender by reply e-mail and delete all copies of this message.
> Cisco Systems Limited (Company Number: 02558939), is registered in
> England and Wales with its registered office at 1 Callaghan Square,
> Cardiff, South Glamorgan CF10 5BT.
> 
> _______________________________________________
> Gecode users mailing list
> users at gecode.org
> https://www.gecode.org/mailman/listinfo/gecode-users

-- 
Guido Tack, http://people.cs.kuleuven.be/~guido.tack/






From serge.lemouton at ircam.fr  Thu May 19 21:31:52 2011
From: serge.lemouton at ircam.fr (serge lemouton)
Date: Thu, 19 May 2011 21:31:52 +0200
Subject: [gecode-users] graph constraints and hamiltonian path
Message-ID: <34785068-AEE2-4E8B-AA2E-4ECA3BEFC535@ircam.fr>

Hello,

Question about graph constraints:
I would like to modify the the TSP example in order to find the solutions where the travelling salesman should not return to its starting point.
In other terms, is it possible to use the "circuit" constraint to find an hamiltonian path instead of a circuit ?
Does it require to modify the code or is it better to create another subclass of the graph class ?

Thanks for any advice,

Serge Lemouton

From cschulte at kth.se  Thu May 19 23:21:47 2011
From: cschulte at kth.se (Christian Schulte)
Date: Thu, 19 May 2011 23:21:47 +0200
Subject: [gecode-users] graph constraints and hamiltonian path
In-Reply-To: <34785068-AEE2-4E8B-AA2E-4ECA3BEFC535@ircam.fr>
References: <34785068-AEE2-4E8B-AA2E-4ECA3BEFC535@ircam.fr>
Message-ID: <00a301cc166a$c3b4c410$4b1e4c30$@kth.se>

Hmmm. Just thinking: how about adding an additional node that is assigned to
lead back to the start node and then find a Hamiltonian circuit for this?
That should work, shouldn't it? Or am I missing something.

Christian

--
Christian Schulte, KTH, web.it.kth.se/~cschulte/


-----Original Message-----
From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf
Of serge lemouton
Sent: Thursday, May 19, 2011 9:32 PM
To: users at gecode.org
Subject: [gecode-users] graph constraints and hamiltonian path

Hello,

Question about graph constraints:
I would like to modify the the TSP example in order to find the solutions
where the travelling salesman should not return to its starting point.
In other terms, is it possible to use the "circuit" constraint to find an
hamiltonian path instead of a circuit ?
Does it require to modify the code or is it better to create another
subclass of the graph class ?

Thanks for any advice,

Serge Lemouton
_______________________________________________
Gecode users mailing list
users at gecode.org
https://www.gecode.org/mailman/listinfo/gecode-users



From daniel.araya at gmail.com  Fri May 20 05:46:00 2011
From: daniel.araya at gmail.com (Daniel Araya)
Date: Thu, 19 May 2011 23:46:00 -0400
Subject: [gecode-users] Channel Constraints
Message-ID: <BANLkTinsvC-RC-ZV=rO3_jg=eTrui0jxwQ@mail.gmail.com>

Hi Guys,

I'm using Gecode/J for make some tests and I have to make channel constraint
related to:

If X_i=j then Y_i_j=1

but the documentation says:

"Throws an exception of type Int.ArgumentSizeMismatch, if *x* and *y* are of
different size."

There is some additional approach to address these kinds of restrictions?

Thanks a lot for your help. BR,

--
Daniel
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.gecode.org/pipermail/users/attachments/20110519/33561d78/attachment.htm>

From zayenz at gmail.com  Fri May 20 07:34:18 2011
From: zayenz at gmail.com (Mikael Zayenz Lagerkvist)
Date: Fri, 20 May 2011 07:34:18 +0200
Subject: [gecode-users] Channel Constraints
In-Reply-To: <BANLkTinsvC-RC-ZV=rO3_jg=eTrui0jxwQ@mail.gmail.com>
References: <BANLkTinsvC-RC-ZV=rO3_jg=eTrui0jxwQ@mail.gmail.com>
Message-ID: <BANLkTinmYCMn3+Qw_vK5FeF35QqS+C6XWQ@mail.gmail.com>

2011/5/20 Daniel Araya <daniel.araya at gmail.com>:
> I'm using Gecode/J for make some tests

First of all, Gecode/J has been discontinued for quite some time now.
There are a lot of bugs and it is very slow compared to other methods
of running Gecode. In other words, it shouldn't be used anymore.

If your need is to integrate Gecode into a Java project, it is much
better to write the model in C++, and to write a small and simple
JNI-function that takes any parameters needed and instantiates and
runs the model.

> and I have to make channel constraint related to:
>
> If X_i=j then Y_i_j=1
>
> but the documentation says:
>
> "Throws an exception of type Int.ArgumentSizeMismatch, if x and y are of
> different size."
>
> There is some additional approach to address these kinds of restrictions?

If that is the constraint you want, then the restriction is strictly
necessary. If x and y are of different sizes, then the constraint
would be trivially violated, and represents an error in constructing
the model.

Cheers,
Mikael


-- 
Mikael Zayenz Lagerkvist, http://www.ict.kth.se/~zayenz/


From daniel.araya at gmail.com  Fri May 20 21:59:50 2011
From: daniel.araya at gmail.com (Daniel Araya)
Date: Fri, 20 May 2011 15:59:50 -0400
Subject: [gecode-users] Channel Constraints
In-Reply-To: <BANLkTinmYCMn3+Qw_vK5FeF35QqS+C6XWQ@mail.gmail.com>
References: <BANLkTinsvC-RC-ZV=rO3_jg=eTrui0jxwQ@mail.gmail.com>
	<BANLkTinmYCMn3+Qw_vK5FeF35QqS+C6XWQ@mail.gmail.com>
Message-ID: <BANLkTi=ytziRW-mzrkRdLFxnPKDChEX=gw@mail.gmail.com>

On Fri, May 20, 2011 at 1:34 AM, Mikael Zayenz Lagerkvist
<zayenz at gmail.com>wrote:

> 2011/5/20 Daniel Araya <daniel.araya at gmail.com>:
> > I'm using Gecode/J for make some tests
>
> First of all, Gecode/J has been discontinued for quite some time now.
> There are a lot of bugs and it is very slow compared to other methods
> of running Gecode. In other words, it shouldn't be used anymore.
>
> If your need is to integrate Gecode into a Java project, it is much
> better to write the model in C++, and to write a small and simple
> JNI-function that takes any parameters needed and instantiates and
> runs the model.
>

Thanks Mikael for the update.  I use Gecode/J only for test...
But, this restriction is "more easy" to implement in Gecode C++?



> > and I have to make channel constraint related to:
> >
> > If X_i=j then Y_i_j=1
> >
> > but the documentation says:
> >
> > "Throws an exception of type Int.ArgumentSizeMismatch, if x and y are of
> > different size."
> >
> > There is some additional approach to address these kinds of restrictions?
>
> If that is the constraint you want, then the restriction is strictly
> necessary. If x and y are of different sizes, then the constraint
> would be trivially violated, and represents an error in constructing
> the model.
>


I'm not sure about the posibility for make this restriction without reified
constraint, do you
have any ideas? Exit any example in Gecode C++?

Thanks. BR,

--
Daniel
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.gecode.org/pipermail/users/attachments/20110520/fb3dd29d/attachment.htm>

From serge.lemouton at ircam.fr  Sat May 21 23:23:40 2011
From: serge.lemouton at ircam.fr (serge lemouton)
Date: Sat, 21 May 2011 23:23:40 +0200
Subject: [gecode-users] graph constraints and hamiltonian path
In-Reply-To: <00a301cc166a$c3b4c410$4b1e4c30$@kth.se>
References: <34785068-AEE2-4E8B-AA2E-4ECA3BEFC535@ircam.fr>
	<00a301cc166a$c3b4c410$4b1e4c30$@kth.se>
Message-ID: <F78DAA45-082E-44A3-97DA-8C4820134C51@ircam.fr>

Dear Christian,

Thanks for your idea, but I am not sure to understand how to implement it. 
Moreover, i don't know if it will work, because what i want to do is to find a path  minimizing the total distance through an ensemble of points, 
and it seems to me that the "circuit" constraint will always take into account the distance between the last and the first city in the salesman itinerary, isn't it ?
It does not seem obvious to me that we can obtain the shortest path simply by removing the longest distance of the shortest circuit, but I am not an expert in hamiltonian graphs !

Serge

On 19 mai 2011, at 23:21, Christian Schulte wrote:

> Hmmm. Just thinking: how about adding an additional node that is assigned to
> lead back to the start node and then find a Hamiltonian circuit for this?
> That should work, shouldn't it? Or am I missing something.
> 
> Christian
> 
> --
> Christian Schulte, KTH, web.it.kth.se/~cschulte/
> 
> 
> -----Original Message-----
> From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf
> Of serge lemouton
> Sent: Thursday, May 19, 2011 9:32 PM
> To: users at gecode.org
> Subject: [gecode-users] graph constraints and hamiltonian path
> 
> Hello,
> 
> Question about graph constraints:
> I would like to modify the the TSP example in order to find the solutions
> where the travelling salesman should not return to its starting point.
> In other terms, is it possible to use the "circuit" constraint to find an
> hamiltonian path instead of a circuit ?
> Does it require to modify the code or is it better to create another
> subclass of the graph class ?
> 
> Thanks for any advice,
> 
> Serge Lemouton
> _______________________________________________
> Gecode users mailing list
> users at gecode.org
> https://www.gecode.org/mailman/listinfo/gecode-users
> 
> 



From jonathanskovhus at gmail.com  Sun May 22 08:53:31 2011
From: jonathanskovhus at gmail.com (Jonathan Skovhus Andersen)
Date: Sun, 22 May 2011 08:53:31 +0200
Subject: [gecode-users] graph constraints and hamiltonian path
In-Reply-To: <F78DAA45-082E-44A3-97DA-8C4820134C51@ircam.fr>
References: <34785068-AEE2-4E8B-AA2E-4ECA3BEFC535@ircam.fr>
	<00a301cc166a$c3b4c410$4b1e4c30$@kth.se>
	<F78DAA45-082E-44A3-97DA-8C4820134C51@ircam.fr>
Message-ID: <BANLkTi=1CexsaoUbZWohZ=5L+6JTht9CuQ@mail.gmail.com>

Hi Serge,

I have actually implemented just what you are requesting - the TSP that does
not return to it's starting point. I am a complete beginner
at GeCode so there are most likely a better way to do it, but I did it this
way.

Introduce this relation:
*rel(*this, totalNoEndPoint == total - p.d(p.size()-1,0));*

And then change your cost function to minimize totalNoEndPoint:
*virtual IntVar cost(void) const /// Return solution cost*
* {*
* return totalNoEndPoint;*
* }*
*
*
I hope that this will give you some ideas.

/Jonathan Skovhus.

2011/5/21 serge lemouton <serge.lemouton at ircam.fr>

> Dear Christian,
>
> Thanks for your idea, but I am not sure to understand how to implement it.
> Moreover, i don't know if it will work, because what i want to do is to
> find a path  minimizing the total distance through an ensemble of points,
> and it seems to me that the "circuit" constraint will always take into
> account the distance between the last and the first city in the salesman
> itinerary, isn't it ?
> It does not seem obvious to me that we can obtain the shortest path simply
> by removing the longest distance of the shortest circuit, but I am not an
> expert in hamiltonian graphs !
>
> Serge
>
> On 19 mai 2011, at 23:21, Christian Schulte wrote:
>
> > Hmmm. Just thinking: how about adding an additional node that is assigned
> to
> > lead back to the start node and then find a Hamiltonian circuit for this?
> > That should work, shouldn't it? Or am I missing something.
> >
> > Christian
> >
> > --
> > Christian Schulte, KTH, web.it.kth.se/~cschulte/
> >
> >
> > -----Original Message-----
> > From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On
> Behalf
> > Of serge lemouton
> > Sent: Thursday, May 19, 2011 9:32 PM
> > To: users at gecode.org
> > Subject: [gecode-users] graph constraints and hamiltonian path
> >
> > Hello,
> >
> > Question about graph constraints:
> > I would like to modify the the TSP example in order to find the solutions
> > where the travelling salesman should not return to its starting point.
> > In other terms, is it possible to use the "circuit" constraint to find an
> > hamiltonian path instead of a circuit ?
> > Does it require to modify the code or is it better to create another
> > subclass of the graph class ?
> >
> > Thanks for any advice,
> >
> > Serge Lemouton
> > _______________________________________________
> > Gecode users mailing list
> > users at gecode.org
> > https://www.gecode.org/mailman/listinfo/gecode-users
> >
> >
>
>
> _______________________________________________
> Gecode users mailing list
> users at gecode.org
> https://www.gecode.org/mailman/listinfo/gecode-users
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.gecode.org/pipermail/users/attachments/20110522/264e5e6a/attachment.htm>

From cschulte at kth.se  Sun May 22 22:11:27 2011
From: cschulte at kth.se (Christian Schulte)
Date: Sun, 22 May 2011 22:11:27 +0200
Subject: [gecode-users] graph constraints and hamiltonian path
In-Reply-To: <F78DAA45-082E-44A3-97DA-8C4820134C51@ircam.fr>
References: <34785068-AEE2-4E8B-AA2E-4ECA3BEFC535@ircam.fr>
	<00a301cc166a$c3b4c410$4b1e4c30$@kth.se>
	<F78DAA45-082E-44A3-97DA-8C4820134C51@ircam.fr>
Message-ID: <003301cc18bc$6fbedf40$4f3c9dc0$@kth.se>

The idea is: add a _new_ point and then  define the cost from this point to
the first point to be zero. That's it.

Christian

--
Christian Schulte, KTH, web.it.kth.se/~cschulte/


-----Original Message-----
From: serge lemouton [mailto:serge.lemouton at ircam.fr] 
Sent: Saturday, May 21, 2011 11:24 PM
To: cschulte at kth.se
Cc: users at gecode.org
Subject: Re: [gecode-users] graph constraints and hamiltonian path

Dear Christian,

Thanks for your idea, but I am not sure to understand how to implement it. 
Moreover, i don't know if it will work, because what i want to do is to find
a path  minimizing the total distance through an ensemble of points, and it
seems to me that the "circuit" constraint will always take into account the
distance between the last and the first city in the salesman itinerary,
isn't it ?
It does not seem obvious to me that we can obtain the shortest path simply
by removing the longest distance of the shortest circuit, but I am not an
expert in hamiltonian graphs !

Serge

On 19 mai 2011, at 23:21, Christian Schulte wrote:

> Hmmm. Just thinking: how about adding an additional node that is 
> assigned to lead back to the start node and then find a Hamiltonian
circuit for this?
> That should work, shouldn't it? Or am I missing something.
> 
> Christian
> 
> --
> Christian Schulte, KTH, web.it.kth.se/~cschulte/
> 
> 
> -----Original Message-----
> From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On 
> Behalf Of serge lemouton
> Sent: Thursday, May 19, 2011 9:32 PM
> To: users at gecode.org
> Subject: [gecode-users] graph constraints and hamiltonian path
> 
> Hello,
> 
> Question about graph constraints:
> I would like to modify the the TSP example in order to find the 
> solutions where the travelling salesman should not return to its starting
point.
> In other terms, is it possible to use the "circuit" constraint to find 
> an hamiltonian path instead of a circuit ?
> Does it require to modify the code or is it better to create another 
> subclass of the graph class ?
> 
> Thanks for any advice,
> 
> Serge Lemouton
> _______________________________________________
> Gecode users mailing list
> users at gecode.org
> https://www.gecode.org/mailman/listinfo/gecode-users
> 
> 




From tack at gecode.org  Mon May 23 15:16:29 2011
From: tack at gecode.org (Guido Tack)
Date: Mon, 23 May 2011 15:16:29 +0200
Subject: [gecode-users] task end times in cululative/unary constraints
In-Reply-To: <4DD2A264.3030809@cisco.com>
References: <4DD2A264.3030809@cisco.com>
Message-ID: <1852D924-B3F1-4905-B06F-E7E9D9C27F1E@gecode.org>

Kish, Mikael reminded me that I missed an important point you raised:

Yes, it is necessary to post the end=start+dur constraints if all three are variables. The unary/cumulative constraints will not enforce these constraints at all, so you can get incorrect solutions.

Cheers,
	Guido

On 17 May 2011, at 18:29, Kish Shen wrote:

> Hi,
> 
> In most versions of Gecode's cumulative and unary constraints, you need to provide the start, duration and end times for tasks. For the ECLiPSe cumulative and unary constraints, you only need to provide the start and duration times. I understand that having the end times for task allows for more opportunities for propagation, but are they needed (or more precisely, are the extra constraints end = start + duration needed). if the end times are not used anywhere.
> 
> The reason I am asking is that in the ECLiPSe interface to Gecode, one of the aim is to provide compatibility to existing ECLiPSe code, so this means providing cumulative/unary constraints with flexible durations, but without end times, which is what ECLiPSe has. For these constraints, the user would have no access to the end times, but currently I still post the extra constraints end = start + duration for each task, as the Gecode call requires the end times, and MPG suggest that these constraints should be posted. But when I was looking at the code yesterday, I started to wonder if this makes sense if the user cannot see (and so cannot post constraints that will affect) the end times. So my question is, does it make sense to post these constraints under these conditions?
> 
> Thanks and cheers,
> 
> Kish
> 
> -- 
> This e-mail may contain confidential and privileged material for the
> sole use of the intended recipient. Any review, use, distribution or
> disclosure by others is strictly prohibited. If you are not the intended
> recipient (or authorized to receive for the recipient), please contact
> the sender by reply e-mail and delete all copies of this message.
> Cisco Systems Limited (Company Number: 02558939), is registered in
> England and Wales with its registered office at 1 Callaghan Square,
> Cardiff, South Glamorgan CF10 5BT.
> 
> _______________________________________________
> Gecode users mailing list
> users at gecode.org
> https://www.gecode.org/mailman/listinfo/gecode-users

-- 
Guido Tack, http://people.cs.kuleuven.be/~guido.tack/






From kisshen at cisco.com  Mon May 23 15:41:41 2011
From: kisshen at cisco.com (Kish Shen)
Date: Mon, 23 May 2011 14:41:41 +0100
Subject: [gecode-users] task end times in cululative/unary constraints
In-Reply-To: <1852D924-B3F1-4905-B06F-E7E9D9C27F1E@gecode.org>
References: <4DD2A264.3030809@cisco.com>
	<1852D924-B3F1-4905-B06F-E7E9D9C27F1E@gecode.org>
Message-ID: <4DDA6415.40406@cisco.com>

Hi Guido,

Do you mean that in my specific situation, where the user only sees the 
start and duration times, that these might be given incorrect values, or 
is it only the end times that might be given incorrect values? [I guess 
this boils down to if you use both start and end times to check for 
overlapping of tasks, rather than start and duration]

Thanks and cheers,

Kish

On 23/05/2011 14:16, Guido Tack wrote:
> Kish, Mikael reminded me that I missed an important point you raised:
>
> Yes, it is necessary to post the end=start+dur constraints if all three are variables. The unary/cumulative constraints will not enforce these constraints at all, so you can get incorrect solutions.
>
> Cheers,
> 	Guido
>
> On 17 May 2011, at 18:29, Kish Shen wrote:
>
>> Hi,
>>
>> In most versions of Gecode's cumulative and unary constraints, you need to provide the start, duration and end times for tasks. For the ECLiPSe cumulative and unary constraints, you only need to provide the start and duration times. I understand that having the end times for task allows for more opportunities for propagation, but are they needed (or more precisely, are the extra constraints end = start + duration needed). if the end times are not used anywhere.
>>
>> The reason I am asking is that in the ECLiPSe interface to Gecode, one of the aim is to provide compatibility to existing ECLiPSe code, so this means providing cumulative/unary constraints with flexible durations, but without end times, which is what ECLiPSe has. For these constraints, the user would have no access to the end times, but currently I still post the extra constraints end = start + duration for each task, as the Gecode call requires the end times, and MPG suggest that these constraints should be posted. But when I was looking at the code yesterday, I started to wonder if this makes sense if the user cannot see (and so cannot post constraints that will affect) the end times. So my question is, does it make sense to post these constraints under these conditions?
>>
>> Thanks and cheers,
>>
>> Kish
>>
>> --
>> This e-mail may contain confidential and privileged material for the
>> sole use of the intended recipient. Any review, use, distribution or
>> disclosure by others is strictly prohibited. If you are not the intended
>> recipient (or authorized to receive for the recipient), please contact
>> the sender by reply e-mail and delete all copies of this message.
>> Cisco Systems Limited (Company Number: 02558939), is registered in
>> England and Wales with its registered office at 1 Callaghan Square,
>> Cardiff, South Glamorgan CF10 5BT.
>>
>> _______________________________________________
>> Gecode users mailing list
>> users at gecode.org
>> https://www.gecode.org/mailman/listinfo/gecode-users
>


-- 
This e-mail may contain confidential and privileged material for the
sole use of the intended recipient. Any review, use, distribution or
disclosure by others is strictly prohibited. If you are not the intended
recipient (or authorized to receive for the recipient), please contact
the sender by reply e-mail and delete all copies of this message.
Cisco Systems Limited (Company Number: 02558939), is registered in
England and Wales with its registered office at 1 Callaghan Square,
Cardiff, South Glamorgan CF10 5BT.


From tack at gecode.org  Mon May 23 15:51:12 2011
From: tack at gecode.org (Guido Tack)
Date: Mon, 23 May 2011 15:51:12 +0200
Subject: [gecode-users] task end times in cululative/unary constraints
In-Reply-To: <4DDA6415.40406@cisco.com>
References: <4DD2A264.3030809@cisco.com>
	<1852D924-B3F1-4905-B06F-E7E9D9C27F1E@gecode.org>
	<4DDA6415.40406@cisco.com>
Message-ID: <008AB287-172E-4D8C-B017-6CF3ECFBD430@gecode.org>

On 23 May 2011, at 15:41, Kish Shen wrote:
> Do you mean that in my specific situation, where the user only sees the start and duration times, that these might be given incorrect values, or is it only the end times that might be given incorrect values? [I guess this boils down to if you use both start and end times to check for overlapping of tasks, rather than start and duration]

You may get overlapping tasks, i.e., incorrect start and duration times as well.  So you should definitely check whether e.g. the durations are fixed - in that case, use the special version.  If you have to introduce end time variables in order to post the constraint, also post end=start+dur.

Cheers,
	Guido

-- 
Guido Tack, http://people.cs.kuleuven.be/~guido.tack/



From pirkwieser at gmail.com  Wed May 25 21:01:25 2011
From: pirkwieser at gmail.com (Sandro Pirkwieser)
Date: Wed, 25 May 2011 21:01:25 +0200
Subject: [gecode-users] diffn constraint for Gecode
Message-ID: <4DDD5205.6060405@gmail.com>

Hello,

I'm using Gecode to tackle a 2D packing subproblem inside an
optimization problem. The subproblem is about packing rectangles (for
the meantime without rotation) into a given larger rectangle and many
instances of moderate size need to be solved. Fortunately I was able to
start with the perfect-square example, where the adapted variant already
performs quite good (using the cumulatives constraint). Also enabling
branching on intervals yielded a speed-up. Now I was wondering if
someone of you already implemented a suitable diffn constraint (see
http://www.emn.fr/z-info/sdemasse/gccat/Cdiffn.html) in Gecode. In this
way the non-overlapping part would (presumably) be tackled more
efficiently and give an additional performance boost. Do you think
having a look at the diff/diff2 implementation in JaCoP is useful for
implementing it in Gecode?
Thanks!

Best regards,
Sandro


From cschulte at kth.se  Thu May 26 11:56:54 2011
From: cschulte at kth.se (Christian Schulte)
Date: Thu, 26 May 2011 11:56:54 +0200
Subject: [gecode-users] diffn constraint for Gecode
In-Reply-To: <4DDD5205.6060405@gmail.com>
References: <4DDD5205.6060405@gmail.com>
Message-ID: <00b301cc1b8b$3e86d690$bb9483b0$@kth.se>

Hi,

Co-incidence: I have been adding a na?ve (but better than the decomposition)
version of the constraint to Gecode recently. I will move that code to the
trunk this week (there are still some glitches to fix before that). 

The plan is to eventually improve to a state-of-the-art implementation.
Taking code directly from Jacop into Gecode will not work due to their
license. Maybe you would even be interested to contribute? At least you
would have a nice structure to start from.

We will release soonish a new version that will incorporate that but there
are more things to be done before a release.

Best
Christian

--
Christian Schulte, KTH, web.it.kth.se/~cschulte/


-----Original Message-----
From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf
Of Sandro Pirkwieser
Sent: Wednesday, May 25, 2011 9:01 PM
To: users at gecode.org
Subject: [gecode-users] diffn constraint for Gecode

Hello,

I'm using Gecode to tackle a 2D packing subproblem inside an optimization
problem. The subproblem is about packing rectangles (for the meantime
without rotation) into a given larger rectangle and many instances of
moderate size need to be solved. Fortunately I was able to start with the
perfect-square example, where the adapted variant already performs quite
good (using the cumulatives constraint). Also enabling branching on
intervals yielded a speed-up. Now I was wondering if someone of you already
implemented a suitable diffn constraint (see
http://www.emn.fr/z-info/sdemasse/gccat/Cdiffn.html) in Gecode. In this way
the non-overlapping part would (presumably) be tackled more efficiently and
give an additional performance boost. Do you think having a look at the
diff/diff2 implementation in JaCoP is useful for implementing it in Gecode?
Thanks!

Best regards,
Sandro

_______________________________________________
Gecode users mailing list
users at gecode.org
https://www.gecode.org/mailman/listinfo/gecode-users



From pirkwieser at gmail.com  Thu May 26 21:34:10 2011
From: pirkwieser at gmail.com (Sandro Pirkwieser)
Date: Thu, 26 May 2011 21:34:10 +0200
Subject: [gecode-users] diffn constraint for Gecode
In-Reply-To: <00b301cc1b8b$3e86d690$bb9483b0$@kth.se>
References: <4DDD5205.6060405@gmail.com>
	<00b301cc1b8b$3e86d690$bb9483b0$@kth.se>
Message-ID: <4DDEAB32.3080909@gmail.com>

Dear Christian,

> Co-incidence: I have been adding a na?ve (but better than the decomposition)
> version of the constraint to Gecode recently. I will move that code to the
> trunk this week (there are still some glitches to fix before that). 

now that's convenient!
On which algorithm is it based?

> The plan is to eventually improve to a state-of-the-art implementation.

This sounds good.
Would you consider the sweep algorithm proposed by Beldiceanu and
Carlsson as state-of-the-art, or are there any alternatives? Btw do you
know which one is applied in JaCoP?

> Taking code directly from Jacop into Gecode will not work due to their
> license.

The intention was more to get an inspiration. Anyway, both frameworks
probably differ too much.

> Maybe you would even be interested to contribute? At least you
> would have a nice structure to start from.

Yes, we can indeed think about this. Though I am not yet in a state
where I can "hack" something into Gecode, it would be a good opportunity
to start doing so.

Best regards,
Sandro

> We will release soonish a new version that will incorporate that but there
> are more things to be done before a release.
> 
> Best
> Christian
> 
> --
> Christian Schulte, KTH, web.it.kth.se/~cschulte/
> 
> 
> -----Original Message-----
> From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf
> Of Sandro Pirkwieser
> Sent: Wednesday, May 25, 2011 9:01 PM
> To: users at gecode.org
> Subject: [gecode-users] diffn constraint for Gecode
> 
> Hello,
> 
> I'm using Gecode to tackle a 2D packing subproblem inside an optimization
> problem. The subproblem is about packing rectangles (for the meantime
> without rotation) into a given larger rectangle and many instances of
> moderate size need to be solved. Fortunately I was able to start with the
> perfect-square example, where the adapted variant already performs quite
> good (using the cumulatives constraint). Also enabling branching on
> intervals yielded a speed-up. Now I was wondering if someone of you already
> implemented a suitable diffn constraint (see
> http://www.emn.fr/z-info/sdemasse/gccat/Cdiffn.html) in Gecode. In this way
> the non-overlapping part would (presumably) be tackled more efficiently and
> give an additional performance boost. Do you think having a look at the
> diff/diff2 implementation in JaCoP is useful for implementing it in Gecode?
> Thanks!
> 
> Best regards,
> Sandro
> 
> _______________________________________________
> Gecode users mailing list
> users at gecode.org
> https://www.gecode.org/mailman/listinfo/gecode-users
> 


From alin_pt at yahoo.com  Sat May 28 12:04:43 2011
From: alin_pt at yahoo.com (Alin)
Date: Sat, 28 May 2011 10:04:43 +0000 (UTC)
Subject: [gecode-users] mod constraint branching
References: <loom.20110514T212900-36@post.gmane.org>
	<E2462B98-7833-456E-AB8B-7CD42DE769C4@gecode.org>
Message-ID: <loom.20110528T120231-213@post.gmane.org>


I tried to do a simplified version of my problem
and I noticed that in fact I had given some invalid
data

Sorry for wasting time :(




From alin_pt at yahoo.com  Sat May 28 12:48:32 2011
From: alin_pt at yahoo.com (Alin)
Date: Sat, 28 May 2011 10:48:32 +0000 (UTC)
Subject: [gecode-users] Scheduling
Message-ID: <loom.20110528T120456-224@post.gmane.org>

Hi,


 I am trying different ways of modeling scheduling problems, 
and I have used cumulatives quite a lot because it has multiple resources, 
and solves a large part of my problems.

but the i didn't find a way of specifying that 
each resource can do only one task at a time.

 Is there a good way to do this with cumulatives 
or is it better to revert to unary and just
do a unary constraint for each resource ?

Or is it better to implement a propagator for this myself ?

(I am trying to achieve something similar to  
http://www.emn.fr/z-info/sdemasse/gccat/Kassigning_and_scheduling_tasks_that_run_in_parallel.html
)



From cschulte at kth.se  Sat May 28 13:13:45 2011
From: cschulte at kth.se (Christian Schulte)
Date: Sat, 28 May 2011 13:13:45 +0200
Subject: [gecode-users] Scheduling
In-Reply-To: <loom.20110528T120456-224@post.gmane.org>
References: <loom.20110528T120456-224@post.gmane.org>
Message-ID: <007401cc1d28$50396da0$f0ac48e0$@kth.se>

Please use unary, that's what it is meant for.

Christian

--
Christian Schulte, KTH, web.it.kth.se/~cschulte/


-----Original Message-----
From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf
Of Alin
Sent: Saturday, May 28, 2011 12:49 PM
To: users at gecode.org
Subject: [gecode-users] Scheduling

Hi,


 I am trying different ways of modeling scheduling problems, and I have used
cumulatives quite a lot because it has multiple resources, and solves a
large part of my problems.

but the i didn't find a way of specifying that each resource can do only one
task at a time.

 Is there a good way to do this with cumulatives or is it better to revert
to unary and just do a unary constraint for each resource ?

Or is it better to implement a propagator for this myself ?

(I am trying to achieve something similar to
http://www.emn.fr/z-info/sdemasse/gccat/Kassigning_and_scheduling_tasks_that
_run_in_parallel.html
)


_______________________________________________
Gecode users mailing list
users at gecode.org
https://www.gecode.org/mailman/listinfo/gecode-users



From cschulte at kth.se  Sat May 28 16:04:37 2011
From: cschulte at kth.se (Christian Schulte)
Date: Sat, 28 May 2011 16:04:37 +0200
Subject: [gecode-users] diffn constraint for Gecode
In-Reply-To: <4DDEAB32.3080909@gmail.com>
References: <4DDD5205.6060405@gmail.com>
	<00b301cc1b8b$3e86d690$bb9483b0$@kth.se>
	<4DDEAB32.3080909@gmail.com>
Message-ID: <009c01cc1d40$2e2438e0$8a6caaa0$@kth.se>

Dear Sandro,

It will be equivalent to the decomposition into reified constraints albeit
using constructive disjunction for better pruning. Yes, eventually one
should go for something based on Beldiceanu & Carlsson.

The real reason to add it for us has been that we needed a variant where the
dimensions of the boxes are variables as well (slightly more messy as the
box might turn out to have a volume of zero!).

If you ever feel like getting busy, please let me know!

Best
Christian

--
Christian Schulte, KTH, web.it.kth.se/~cschulte/


-----Original Message-----
From: Sandro Pirkwieser [mailto:pirkwieser at gmail.com] 
Sent: Thursday, May 26, 2011 9:34 PM
To: cschulte at kth.se
Cc: users at gecode.org
Subject: Re: [gecode-users] diffn constraint for Gecode

Dear Christian,

> Co-incidence: I have been adding a na?ve (but better than the 
> decomposition) version of the constraint to Gecode recently. I will 
> move that code to the trunk this week (there are still some glitches to
fix before that).

now that's convenient!
On which algorithm is it based?

> The plan is to eventually improve to a state-of-the-art implementation.

This sounds good.
Would you consider the sweep algorithm proposed by Beldiceanu and Carlsson
as state-of-the-art, or are there any alternatives? Btw do you know which
one is applied in JaCoP?

> Taking code directly from Jacop into Gecode will not work due to their 
> license.

The intention was more to get an inspiration. Anyway, both frameworks
probably differ too much.

> Maybe you would even be interested to contribute? At least you would 
> have a nice structure to start from.

Yes, we can indeed think about this. Though I am not yet in a state where I
can "hack" something into Gecode, it would be a good opportunity to start
doing so.

Best regards,
Sandro

> We will release soonish a new version that will incorporate that but 
> there are more things to be done before a release.
> 
> Best
> Christian
> 
> --
> Christian Schulte, KTH, web.it.kth.se/~cschulte/
> 
> 
> -----Original Message-----
> From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On 
> Behalf Of Sandro Pirkwieser
> Sent: Wednesday, May 25, 2011 9:01 PM
> To: users at gecode.org
> Subject: [gecode-users] diffn constraint for Gecode
> 
> Hello,
> 
> I'm using Gecode to tackle a 2D packing subproblem inside an 
> optimization problem. The subproblem is about packing rectangles (for 
> the meantime without rotation) into a given larger rectangle and many 
> instances of moderate size need to be solved. Fortunately I was able 
> to start with the perfect-square example, where the adapted variant 
> already performs quite good (using the cumulatives constraint). Also 
> enabling branching on intervals yielded a speed-up. Now I was 
> wondering if someone of you already implemented a suitable diffn 
> constraint (see
> http://www.emn.fr/z-info/sdemasse/gccat/Cdiffn.html) in Gecode. In 
> this way the non-overlapping part would (presumably) be tackled more 
> efficiently and give an additional performance boost. Do you think 
> having a look at the
> diff/diff2 implementation in JaCoP is useful for implementing it in
Gecode?
> Thanks!
> 
> Best regards,
> Sandro
> 
> _______________________________________________
> Gecode users mailing list
> users at gecode.org
> https://www.gecode.org/mailman/listinfo/gecode-users
> 



From alin_pt at yahoo.com  Mon May 30 12:07:20 2011
From: alin_pt at yahoo.com (Alin)
Date: Mon, 30 May 2011 10:07:20 +0000 (UTC)
Subject: [gecode-users] Scheduling
References: <loom.20110528T120456-224@post.gmane.org>
	<007401cc1d28$50396da0$f0ac48e0$@kth.se>
Message-ID: <loom.20110530T115122-339@post.gmane.org>

Christian Schulte <cschulte at ...> writes:

> 
> Please use unary, that's what it is meant for.
> 
> Christian
> 

I have used unary, but I still have some problems

since I have more than one resource the 
starting time must depend on the resource.

so I set the starting time to depend 
on the resource asigned for the task
using the reified version of dom
like this:

for tasks and for resources that can do the task:
  BoolVar condition=expr(resource[i] == possible_resource_for_task_i);
  dom(home, start_time[i], set_possible_values, condition);

where i is the task.

The problem is that this always fails...
it tries to assign each resource possible
to the first task
and sets the starting times for that tasks

but considers that this has failed without tring any 
values for the next resources.

Any idea why this happens ?
is there a better way to restrict the starting times
to depend on the resources or this is the correct 
way to do it and I probably  have a bug ?

thanks!



From tack at gecode.org  Mon May 30 12:50:13 2011
From: tack at gecode.org (Guido Tack)
Date: Mon, 30 May 2011 12:50:13 +0200
Subject: [gecode-users] Scheduling
In-Reply-To: <loom.20110530T115122-339@post.gmane.org>
References: <loom.20110528T120456-224@post.gmane.org>
	<007401cc1d28$50396da0$f0ac48e0$@kth.se>
	<loom.20110530T115122-339@post.gmane.org>
Message-ID: <9BA89449-BEDD-4D9E-AB1F-D3717D1623B6@gecode.org>

Did you use the version of unary with optional tasks?  Otherwise, the same start time ends up in different unary constraints, which is quite likely to be unsatisfiable.

Guido

On 30 May 2011, at 12:07, Alin wrote:

> Christian Schulte <cschulte at ...> writes:
> 
>> 
>> Please use unary, that's what it is meant for.
>> 
>> Christian
>> 
> 
> I have used unary, but I still have some problems
> 
> since I have more than one resource the 
> starting time must depend on the resource.
> 
> so I set the starting time to depend 
> on the resource asigned for the task
> using the reified version of dom
> like this:
> 
> for tasks and for resources that can do the task:
>  BoolVar condition=expr(resource[i] == possible_resource_for_task_i);
>  dom(home, start_time[i], set_possible_values, condition);
> 
> where i is the task.
> 
> The problem is that this always fails...
> it tries to assign each resource possible
> to the first task
> and sets the starting times for that tasks
> 
> but considers that this has failed without tring any 
> values for the next resources.
> 
> Any idea why this happens ?
> is there a better way to restrict the starting times
> to depend on the resources or this is the correct 
> way to do it and I probably  have a bug ?
> 
> thanks!
> 
> 
> _______________________________________________
> Gecode users mailing list
> users at gecode.org
> https://www.gecode.org/mailman/listinfo/gecode-users

-- 
Guido Tack, http://people.cs.kuleuven.be/~guido.tack/







From alin_pt at yahoo.com  Mon May 30 16:08:27 2011
From: alin_pt at yahoo.com (Alin)
Date: Mon, 30 May 2011 14:08:27 +0000 (UTC)
Subject: [gecode-users] Scheduling
References: <loom.20110528T120456-224@post.gmane.org>
	<007401cc1d28$50396da0$f0ac48e0$@kth.se>
	<loom.20110530T115122-339@post.gmane.org>
	<9BA89449-BEDD-4D9E-AB1F-D3717D1623B6@gecode.org>
Message-ID: <loom.20110530T151649-122@post.gmane.org>

Guido Tack <tack at ...> writes:

> 
> Did you use the version of unary with optional tasks?  Otherwise, the same
start time up in different
> unary constends raints, which is quite likely to be unsatisfiable.
> 
> Guido
> 

I've tried to use the unary version with optional tasks,
but I don't quite understand how it would help
why should I set a certain task to be optional if I have reification ?




From tack at gecode.org  Mon May 30 16:32:18 2011
From: tack at gecode.org (Guido Tack)
Date: Mon, 30 May 2011 16:32:18 +0200
Subject: [gecode-users] Scheduling
In-Reply-To: <loom.20110530T151649-122@post.gmane.org>
References: <loom.20110528T120456-224@post.gmane.org>
	<007401cc1d28$50396da0$f0ac48e0$@kth.se>
	<loom.20110530T115122-339@post.gmane.org>
	<9BA89449-BEDD-4D9E-AB1F-D3717D1623B6@gecode.org>
	<loom.20110530T151649-122@post.gmane.org>
Message-ID: <912A682F-A60B-4940-AD74-2DAE91FDB3B6@gecode.org>

On 30 May 2011, at 16:08, Alin wrote:

> Guido Tack <tack at ...> writes:
> 
>> 
>> Did you use the version of unary with optional tasks?  Otherwise, the same
> start time up in different
>> unary constends raints, which is quite likely to be unsatisfiable.
>> 
>> Guido
>> 
> 
> I've tried to use the unary version with optional tasks,
> but I don't quite understand how it would help
> why should I set a certain task to be optional if I have reification ?

How should the unary constraint know about the reification otherwise?

Given your example, I think you need something like this:

BoolVarArgs _m(home, n_tasks*n_resources);
Matrix<BoolVarArgs> m(m, n_tasks, n_resources);

for (int i=0; i<n_resources; i++) {
  for (int j=0; j<n_tasks; j++) {
    rel(home, m(j,i)  == (resource[j] == i));
    dom(home, start_time[j], set_possible_values, m(i,j));
  }
  unary(home, startTimes, durations, m.row(i));
}
for (int i=0; i<n_tasks; i++) {
  linear(home, m.col(i), IRT_EQ, 1); // each task is scheduled on exactly one resource
}

For the m(j,i)  == (resource[j] == i) constraint, you can actually use a channel constraint, which is more efficient, but I thought this is closer to your original code.

Cheers,
	Guido

-- 
Guido Tack, http://people.cs.kuleuven.be/~guido.tack/






From daniel.araya at gmail.com  Mon May 30 16:55:42 2011
From: daniel.araya at gmail.com (Daniel Araya)
Date: Mon, 30 May 2011 10:55:42 -0400
Subject: [gecode-users] Scheduling
In-Reply-To: <912A682F-A60B-4940-AD74-2DAE91FDB3B6@gecode.org>
References: <loom.20110528T120456-224@post.gmane.org>
	<007401cc1d28$50396da0$f0ac48e0$@kth.se>
	<loom.20110530T115122-339@post.gmane.org>
	<9BA89449-BEDD-4D9E-AB1F-D3717D1623B6@gecode.org>
	<loom.20110530T151649-122@post.gmane.org>
	<912A682F-A60B-4940-AD74-2DAE91FDB3B6@gecode.org>
Message-ID: <BANLkTi=ieiygw-dAiQmw-05XBCggcCZHMg@mail.gmail.com>

Hi Guido,

You says: "For the m(j,i)  == (resource[j] == i) constraint, you can
actually use a channel constraint, which is more efficient, but I thought
this is closer to your original code."

But how you can use a channel constraint with different argument size?
A few weeks ago I had the same problem and finally I implemented the
problem with reified constraints.


Thanks a lot. BR,

--
Daniel





On Mon, May 30, 2011 at 10:32 AM, Guido Tack <tack at gecode.org> wrote:

> On 30 May 2011, at 16:08, Alin wrote:
>
> > Guido Tack <tack at ...> writes:
> >
> >>
> >> Did you use the version of unary with optional tasks?  Otherwise, the
> same
> > start time up in different
> >> unary constends raints, which is quite likely to be unsatisfiable.
> >>
> >> Guido
> >>
> >
> > I've tried to use the unary version with optional tasks,
> > but I don't quite understand how it would help
> > why should I set a certain task to be optional if I have reification ?
>
> How should the unary constraint know about the reification otherwise?
>
> Given your example, I think you need something like this:
>
> BoolVarArgs _m(home, n_tasks*n_resources);
> Matrix<BoolVarArgs> m(m, n_tasks, n_resources);
>
> for (int i=0; i<n_resources; i++) {
>  for (int j=0; j<n_tasks; j++) {
>    rel(home, m(j,i)  == (resource[j] == i));
>    dom(home, start_time[j], set_possible_values, m(i,j));
>  }
>  unary(home, startTimes, durations, m.row(i));
> }
> for (int i=0; i<n_tasks; i++) {
>  linear(home, m.col(i), IRT_EQ, 1); // each task is scheduled on exactly
> one resource
> }
>
> For the m(j,i)  == (resource[j] == i) constraint, you can actually use a
> channel constraint, which is more efficient, but I thought this is closer to
> your original code.
>
> Cheers,
>         Guido
>
> --
> Guido Tack, http://people.cs.kuleuven.be/~guido.tack/
>
>
>
>
>
> _______________________________________________
> Gecode users mailing list
> users at gecode.org
> https://www.gecode.org/mailman/listinfo/gecode-users
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.gecode.org/pipermail/users/attachments/20110530/557bc295/attachment.htm>

From tack at gecode.org  Mon May 30 17:01:17 2011
From: tack at gecode.org (Guido Tack)
Date: Mon, 30 May 2011 17:01:17 +0200
Subject: [gecode-users] Scheduling
In-Reply-To: <BANLkTi=ieiygw-dAiQmw-05XBCggcCZHMg@mail.gmail.com>
References: <loom.20110528T120456-224@post.gmane.org>
	<007401cc1d28$50396da0$f0ac48e0$@kth.se>
	<loom.20110530T115122-339@post.gmane.org>
	<9BA89449-BEDD-4D9E-AB1F-D3717D1623B6@gecode.org>
	<loom.20110530T151649-122@post.gmane.org>
	<912A682F-A60B-4940-AD74-2DAE91FDB3B6@gecode.org>
	<BANLkTi=ieiygw-dAiQmw-05XBCggcCZHMg@mail.gmail.com>
Message-ID: <BE0232B0-0F52-4B94-8B24-F09F7A7BFB37@gecode.org>

On 30 May 2011, at 16:55, Daniel Araya wrote:

> Hi Guido,
> 
> You says: "For the m(j,i)  == (resource[j] == i) constraint, you can actually use a channel constraint, which is more efficient, but I thought this is closer to your original code."
> 
> But how you can use a channel constraint with different argument size? 
> A few weeks ago I had the same problem and finally I implemented the
> problem with reified constraints.

for (int j=0; j<n_tasks; j++) {
  channel(home, m.col(j), resource[j]);
}

See
http://www.gecode.org/doc-latest/reference/group__TaskModelIntChannel.html

Cheers,
	Guido

-- 
Guido Tack, http://people.cs.kuleuven.be/~guido.tack/







From alin_pt at yahoo.com  Tue May 31 08:52:57 2011
From: alin_pt at yahoo.com (alin gherman)
Date: Mon, 30 May 2011 23:52:57 -0700 (PDT)
Subject: [gecode-users] Scheduling
Message-ID: <778418.98635.qm@web110501.mail.gq1.yahoo.com>

Hallo,

?I now understand the reasoning for using the boolean matrix
so that each unary constraint corresponds to a certain resource
and to the starting times of the resource.

but thaw it all make sense now I still don't get the result
I expect. There are no different resources assigned to the task
though different resources can do the task faster since they
can work in parallel,
and another problem is that when I specify constraints
for what resources can do a certain task I get no solution
again.

I attached a small sample that behaves like my program
maybe someone with more experience can help me.

thanks.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.gecode.org/pipermail/users/attachments/20110530/329e2f72/attachment-0001.htm>
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: AllocTime.h
URL: <http://www.gecode.org/pipermail/users/attachments/20110530/329e2f72/attachment-0001.txt>

From tack at gecode.org  Tue May 31 10:34:26 2011
From: tack at gecode.org (Guido Tack)
Date: Tue, 31 May 2011 10:34:26 +0200
Subject: [gecode-users] Scheduling
In-Reply-To: <778418.98635.qm@web110501.mail.gq1.yahoo.com>
References: <778418.98635.qm@web110501.mail.gq1.yahoo.com>
Message-ID: <E239E34D-9E50-48F6-898D-830AD7443386@gecode.org>

That was a bit tricky, but I found the problem ;-)

The reified dom constraint does not behave as you expect.  When you call dom(home, x, s, b) it means b <-> x in s.
So if !b, then x not in s (all values from s will be removed from x!).

I guess what you want is just the implication b -> x in s, which can be implemented like this:
BoolVar b(*this, 0,1);
dom(*this, start_times[j], v, b);
rel(*this, m(j,i), BOT_IMPL, b, 1);

or more compactly using minimodel:

rel(*this, m(j,i) >> (singleton(start_times[j]) <= v));

Cheers,
	Guido

On 31 May 2011, at 08:52, alin gherman wrote:

> Hallo,
> 
>  I now understand the reasoning for using the boolean matrix
> so that each unary constraint corresponds to a certain resource
> and to the starting times of the resource.
> 
> but thaw it all make sense now I still don't get the result
> I expect. There are no different resources assigned to the task
> though different resources can do the task faster since they
> can work in parallel,
> and another problem is that when I specify constraints
> for what resources can do a certain task I get no solution
> again.
> 
> I attached a small sample that behaves like my program
> maybe someone with more experience can help me.
> 
> thanks.
> <AllocTime.h>_______________________________________________
> Gecode users mailing list
> users at gecode.org
> https://www.gecode.org/mailman/listinfo/gecode-users

-- 
Guido Tack, http://people.cs.kuleuven.be/~guido.tack/





-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.gecode.org/pipermail/users/attachments/20110531/9026b504/attachment.htm>

