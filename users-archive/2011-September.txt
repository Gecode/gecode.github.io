From denys.duchier at univ-orleans.fr  Sat Sep  3 17:41:18 2011
From: denys.duchier at univ-orleans.fr (Denys Duchier)
Date: Sat, 03 Sep 2011 17:41:18 +0200
Subject: [gecode-users] [ANN] gecode/python update for Gecode 3.7.0
Message-ID: <87mxelljkx.fsf@univ-orleans.fr>

The simplified Python bindings for Gecode have been updated to also
support Gecode 3.7.0.

    https://launchpad.net/gecode-python

This update is also available from PYPI.

Cheers,

--Denys


From denys.duchier at univ-orleans.fr  Sat Sep  3 17:43:07 2011
From: denys.duchier at univ-orleans.fr (Denys Duchier)
Date: Sat, 03 Sep 2011 17:43:07 +0200
Subject: [gecode-users] [ANN] gecode/prolog update for Gecode 3.7.0
Message-ID: <87hb4tljhw.fsf@univ-orleans.fr>

The simplified Yap Prolog bindings for Gecode have been updated to also
support Gecode 3.7.0.

    https://github.com/denys-duchier/yap-6.3

Cheers,

--Denys


From Farshid.Hassani at it.uu.se  Tue Sep  6 09:37:33 2011
From: Farshid.Hassani at it.uu.se (Farshid Hassani Bijarbooneh)
Date: Tue, 6 Sep 2011 09:37:33 +0200
Subject: [gecode-users] Linear memory allocation
Message-ID: <0A3D5C85-785A-45A1-9470-9D7FD2BB8B2C@it.uu.se>

Hello,

I have a model with 10^2 to 80^2 variables and linear constraints over 49 variables each. We have the following issues:
1. The code allocates at least 1Gb of memory for even N=50.
Changing the recomputation distance (-c-d) doesn't seem to help in this case.
2. Changing the consistency to Domain (line 187) causes the code to process endlessly! (Gist crashes) even for N=20
I suspected the domain consistency problem is because of the use of IntVarArray instead of BoolVarArray and changing to Bool fixed it, but still very strange that Int gets stuck.

Please find the code of the isolated problem attached.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: WSN_GILP_isolate.cpp
Type: application/octet-stream
Size: 15253 bytes
Desc: not available
URL: <http://www.gecode.org/pipermail/users/attachments/20110906/292080dd/attachment.obj>
-------------- next part --------------


Best,
Farshid 

From cschulte at kth.se  Tue Sep  6 10:04:33 2011
From: cschulte at kth.se (Christian Schulte)
Date: Tue, 6 Sep 2011 10:04:33 +0200
Subject: [gecode-users] Linear memory allocation
In-Reply-To: <0A3D5C85-785A-45A1-9470-9D7FD2BB8B2C@it.uu.se>
References: <0A3D5C85-785A-45A1-9470-9D7FD2BB8B2C@it.uu.se>
Message-ID: <000f01cc6c6b$9dbafe80$d930fb80$@se>

Hi,

1) The problem here is the number of variables, the number of constraints is
not that much of an issue. Are they Boolean or integer variables. Boolean
variables are much smaller. But still it takes too much memory. Could I have
a look at your model?

2) Domain consistent propagation for linear is exponential (that is, here it
is 2^49) Please read Tip 4.6 in MPG. Maybe MPG should have a big fat warning
(we had this issue before, that's why the reference doc has a big fat
warning).

2) What does "Gist crashes" mean. It should crash even though propagation
does not terminate. 

Cheers
Christian

--
Christian Schulte, www.ict.kth.se/~cschulte/

-----Original Message-----
From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf
Of Farshid Hassani Bijarbooneh
Sent: Tuesday, September 06, 2011 9:38 AM
To: users at gecode.org
Subject: [gecode-users] Linear memory allocation

Hello,

I have a model with 10^2 to 80^2 variables and linear constraints over 49
variables each. We have the following issues:
1. The code allocates at least 1Gb of memory for even N=50.
Changing the recomputation distance (-c-d) doesn't seem to help in this
case.
2. Changing the consistency to Domain (line 187) causes the code to process
endlessly! (Gist crashes) even for N=20 I suspected the domain consistency
problem is because of the use of IntVarArray instead of BoolVarArray and
changing to Bool fixed it, but still very strange that Int gets stuck.

Please find the code of the isolated problem attached.



From cschulte at kth.se  Tue Sep  6 10:05:22 2011
From: cschulte at kth.se (Christian Schulte)
Date: Tue, 6 Sep 2011 10:05:22 +0200
Subject: [gecode-users] Linear memory allocation
In-Reply-To: <0A3D5C85-785A-45A1-9470-9D7FD2BB8B2C@it.uu.se>
References: <0A3D5C85-785A-45A1-9470-9D7FD2BB8B2C@it.uu.se>
Message-ID: <001201cc6c6b$ba865cd0$2f931670$@se>

Stupid me, I saw that you attached the code ;-) I'll have a look and get
back to you later.

Sorry
Christian

--
Christian Schulte, www.ict.kth.se/~cschulte/


-----Original Message-----
From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf
Of Farshid Hassani Bijarbooneh
Sent: Tuesday, September 06, 2011 9:38 AM
To: users at gecode.org
Subject: [gecode-users] Linear memory allocation

Hello,

I have a model with 10^2 to 80^2 variables and linear constraints over 49
variables each. We have the following issues:
1. The code allocates at least 1Gb of memory for even N=50.
Changing the recomputation distance (-c-d) doesn't seem to help in this
case.
2. Changing the consistency to Domain (line 187) causes the code to process
endlessly! (Gist crashes) even for N=20 I suspected the domain consistency
problem is because of the use of IntVarArray instead of BoolVarArray and
changing to Bool fixed it, but still very strange that Int gets stuck.

Please find the code of the isolated problem attached.



From farshid.hassani at gmail.com  Tue Sep  6 11:20:40 2011
From: farshid.hassani at gmail.com (Farshid Hassani Bijarbooneh)
Date: Tue, 6 Sep 2011 11:20:40 +0200
Subject: [gecode-users] Linear memory allocation
In-Reply-To: <000f01cc6c6b$9dbafe80$d930fb80$@se>
References: <0A3D5C85-785A-45A1-9470-9D7FD2BB8B2C@it.uu.se>
	<000f01cc6c6b$9dbafe80$d930fb80$@se>
Message-ID: <08EAEFEB-3FB1-4319-BD40-A5F6CDDD6BE5@gmail.com>


On Sep 6, 2011, at 10:04 AM, Christian Schulte wrote:

> Hi,
> 
> 1) The problem here is the number of variables, the number of constraints is
> not that much of an issue. Are they Boolean or integer variables. Boolean
> variables are much smaller. But still it takes too much memory. Could I have
> a look at your model?
The variables are integer with domain 0,1. I had to change to integers at some point due to troubles in implementation of a custom branching. 
> 
> 2) Domain consistent propagation for linear is exponential (that is, here it
> is 2^49) Please read Tip 4.6 in MPG. Maybe MPG should have a big fat warning
> (we had this issue before, that's why the reference doc has a big fat
> warning).
I see, though I still wonder why changing to boolean variables fixes the Domain consistency issue here. I thought integer variables with domain 0,1 are treated the same as boolean despite the memory.
> 
> 2) What does "Gist crashes" mean. It should crash even though propagation
> does not terminate. 
Gist starts but doesn't show the window, and can not be closed unless killing the process.

Cheers,
Farshid 
> 
> Cheers
> Christian
> 
> --
> Christian Schulte, www.ict.kth.se/~cschulte/
> 
> -----Original Message-----
> From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf
> Of Farshid Hassani Bijarbooneh
> Sent: Tuesday, September 06, 2011 9:38 AM
> To: users at gecode.org
> Subject: [gecode-users] Linear memory allocation
> 
> Hello,
> 
> I have a model with 10^2 to 80^2 variables and linear constraints over 49
> variables each. We have the following issues:
> 1. The code allocates at least 1Gb of memory for even N=50.
> Changing the recomputation distance (-c-d) doesn't seem to help in this
> case.
> 2. Changing the consistency to Domain (line 187) causes the code to process
> endlessly! (Gist crashes) even for N=20 I suspected the domain consistency
> problem is because of the use of IntVarArray instead of BoolVarArray and
> changing to Bool fixed it, but still very strange that Int gets stuck.
> 
> Please find the code of the isolated problem attached.
> 



From cschulte at kth.se  Tue Sep  6 13:24:59 2011
From: cschulte at kth.se (Christian Schulte)
Date: Tue, 6 Sep 2011 13:24:59 +0200
Subject: [gecode-users] Linear memory allocation
In-Reply-To: <08EAEFEB-3FB1-4319-BD40-A5F6CDDD6BE5@gmail.com>
References: <0A3D5C85-785A-45A1-9470-9D7FD2BB8B2C@it.uu.se>
	<000f01cc6c6b$9dbafe80$d930fb80$@se>
	<08EAEFEB-3FB1-4319-BD40-A5F6CDDD6BE5@gmail.com>
Message-ID: <000001cc6c87$9d365470$d7a2fd50$@se>

I tried the example, and everything works as expected, regardless of whether
using Boolean or integer variables (Boolean variables are much more
efficient, though, as the linear propagators are specially optimized for
Booleans).

The first solution is found after less than a second on my machine. I used
-c-d 500 and -a-d 500 for recomputation (remember: with O(n^2) variables,
the search tree is O(n^2) deep as the model has close to no propagation).

Gist also works just fine.

Changing to Boolean does not fix the domain consistency issue, it is the
same for Boolean or integer. Please note that for your example domain
consistency is the same as bounds consistency: for inequalities, bounds and
domain consistency is equivalent (and Gecode does the right thing by always
choosing bounds consistency). For equality (you use that for constraining
the Sum variable) in this special case domain consistency is also equivalent
to bounds consistency as all coefficients are unit and all but one variable
are ranges (they are 0/1) (and stupidly Gecode does not realize, aargh).

So I do not really know what your problem is.

Christian

--
Christian Schulte, www.ict.kth.se/~cschulte/

-----Original Message-----
From: Farshid Hassani Bijarbooneh [mailto:farshid.hassani at gmail.com] 
Sent: Tuesday, September 06, 2011 11:21 AM
To: cschulte at kth.se
Cc: users at gecode.org
Subject: Re: [gecode-users] Linear memory allocation


On Sep 6, 2011, at 10:04 AM, Christian Schulte wrote:

> Hi,
> 
> 1) The problem here is the number of variables, the number of constraints
is
> not that much of an issue. Are they Boolean or integer variables. Boolean
> variables are much smaller. But still it takes too much memory. Could I
have
> a look at your model?
The variables are integer with domain 0,1. I had to change to integers at
some point due to troubles in implementation of a custom branching. 
> 
> 2) Domain consistent propagation for linear is exponential (that is, here
it
> is 2^49) Please read Tip 4.6 in MPG. Maybe MPG should have a big fat
warning
> (we had this issue before, that's why the reference doc has a big fat
> warning).
I see, though I still wonder why changing to boolean variables fixes the
Domain consistency issue here. I thought integer variables with domain 0,1
are treated the same as boolean despite the memory.
> 
> 2) What does "Gist crashes" mean. It should crash even though propagation
> does not terminate. 
Gist starts but doesn't show the window, and can not be closed unless
killing the process.

Cheers,
Farshid 
> 
> Cheers
> Christian
> 
> --
> Christian Schulte, www.ict.kth.se/~cschulte/
> 
> -----Original Message-----
> From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf
> Of Farshid Hassani Bijarbooneh
> Sent: Tuesday, September 06, 2011 9:38 AM
> To: users at gecode.org
> Subject: [gecode-users] Linear memory allocation
> 
> Hello,
> 
> I have a model with 10^2 to 80^2 variables and linear constraints over 49
> variables each. We have the following issues:
> 1. The code allocates at least 1Gb of memory for even N=50.
> Changing the recomputation distance (-c-d) doesn't seem to help in this
> case.
> 2. Changing the consistency to Domain (line 187) causes the code to
process
> endlessly! (Gist crashes) even for N=20 I suspected the domain consistency
> problem is because of the use of IntVarArray instead of BoolVarArray and
> changing to Bool fixed it, but still very strange that Int gets stuck.
> 
> Please find the code of the isolated problem attached.
> 




From cschulte at kth.se  Tue Sep  6 13:56:37 2011
From: cschulte at kth.se (Christian Schulte)
Date: Tue, 6 Sep 2011 13:56:37 +0200
Subject: [gecode-users] Linear memory allocation
In-Reply-To: <000001cc6c87$9d365470$d7a2fd50$@se>
References: <0A3D5C85-785A-45A1-9470-9D7FD2BB8B2C@it.uu.se>	<000f01cc6c6b$9dbafe80$d930fb80$@se>	<08EAEFEB-3FB1-4319-BD40-A5F6CDDD6BE5@gmail.com>
	<000001cc6c87$9d365470$d7a2fd50$@se>
Message-ID: <000601cc6c8c$08830fd0$19892f70$@se>

Sorry, the previous email had a small mistake: Gecode does everything right
for domain consistency when Boolean variables are used. The special case
that bounds consistency is the same as domain consistency is not detected
for integer variables (and will never be as the only case where it matters
is when all integer variables but one are 0/1...)

And frankly, don't use integer variables if they are in fact Boolean
variables.

Christian

--
Christian Schulte, www.ict.kth.se/~cschulte/


-----Original Message-----
From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf
Of Christian Schulte
Sent: Tuesday, September 06, 2011 1:25 PM
To: 'Farshid Hassani Bijarbooneh'
Cc: users at gecode.org
Subject: Re: [gecode-users] Linear memory allocation

I tried the example, and everything works as expected, regardless of whether
using Boolean or integer variables (Boolean variables are much more
efficient, though, as the linear propagators are specially optimized for
Booleans).

The first solution is found after less than a second on my machine. I used
-c-d 500 and -a-d 500 for recomputation (remember: with O(n^2) variables,
the search tree is O(n^2) deep as the model has close to no propagation).

Gist also works just fine.

Changing to Boolean does not fix the domain consistency issue, it is the
same for Boolean or integer. Please note that for your example domain
consistency is the same as bounds consistency: for inequalities, bounds and
domain consistency is equivalent (and Gecode does the right thing by always
choosing bounds consistency). For equality (you use that for constraining
the Sum variable) in this special case domain consistency is also equivalent
to bounds consistency as all coefficients are unit and all but one variable
are ranges (they are 0/1) (and stupidly Gecode does not realize, aargh).

So I do not really know what your problem is.

Christian

--
Christian Schulte, www.ict.kth.se/~cschulte/

-----Original Message-----
From: Farshid Hassani Bijarbooneh [mailto:farshid.hassani at gmail.com] 
Sent: Tuesday, September 06, 2011 11:21 AM
To: cschulte at kth.se
Cc: users at gecode.org
Subject: Re: [gecode-users] Linear memory allocation


On Sep 6, 2011, at 10:04 AM, Christian Schulte wrote:

> Hi,
> 
> 1) The problem here is the number of variables, the number of constraints
is
> not that much of an issue. Are they Boolean or integer variables. Boolean
> variables are much smaller. But still it takes too much memory. Could I
have
> a look at your model?
The variables are integer with domain 0,1. I had to change to integers at
some point due to troubles in implementation of a custom branching. 
> 
> 2) Domain consistent propagation for linear is exponential (that is, here
it
> is 2^49) Please read Tip 4.6 in MPG. Maybe MPG should have a big fat
warning
> (we had this issue before, that's why the reference doc has a big fat
> warning).
I see, though I still wonder why changing to boolean variables fixes the
Domain consistency issue here. I thought integer variables with domain 0,1
are treated the same as boolean despite the memory.
> 
> 2) What does "Gist crashes" mean. It should crash even though propagation
> does not terminate. 
Gist starts but doesn't show the window, and can not be closed unless
killing the process.

Cheers,
Farshid 
> 
> Cheers
> Christian
> 
> --
> Christian Schulte, www.ict.kth.se/~cschulte/
> 
> -----Original Message-----
> From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf
> Of Farshid Hassani Bijarbooneh
> Sent: Tuesday, September 06, 2011 9:38 AM
> To: users at gecode.org
> Subject: [gecode-users] Linear memory allocation
> 
> Hello,
> 
> I have a model with 10^2 to 80^2 variables and linear constraints over 49
> variables each. We have the following issues:
> 1. The code allocates at least 1Gb of memory for even N=50.
> Changing the recomputation distance (-c-d) doesn't seem to help in this
> case.
> 2. Changing the consistency to Domain (line 187) causes the code to
process
> endlessly! (Gist crashes) even for N=20 I suspected the domain consistency
> problem is because of the use of IntVarArray instead of BoolVarArray and
> changing to Bool fixed it, but still very strange that Int gets stuck.
> 
> Please find the code of the isolated problem attached.
> 



_______________________________________________
Gecode users mailing list
users at gecode.org
https://www.gecode.org/mailman/listinfo/gecode-users



From jef_ti at hotmail.com  Tue Sep  6 15:57:36 2011
From: jef_ti at hotmail.com (Jefferson Soares Biernastki)
Date: Tue, 6 Sep 2011 10:57:36 -0300
Subject: [gecode-users] Problem solving simple model
Message-ID: <SNT110-W6CDD0F19DB12B8190596AE41C0@phx.gbl>


Hi people,
i m working on Gecode for 2 weeks and i model a simple constraint problem already resolved in ILOG CP.
Problem: Two trains (X01 and X02) must arrive in final station, each ocupation must be released, normally 1 minute for releasing.
the model bellow tries to represent this problem.
somebody could help me on what i m doing wrong?
<code>#include <gecode/driver.hh>#include <gecode/int.hh>#include <gecode/minimodel.hh>
#include <list>#include <conio.h>
using namespace Gecode;
// Structure of data
// Sectionstruct SectionBlock{	int id;	char *name;	bool yard;
	SectionBlock(int id, char *name, bool yard)	{		this->id = id;		this->name = name;		this->yard = yard;	}};
// Trainstruct Train{	int id;	char *prefix;	int departure;	SectionBlock *origin;	SectionBlock *destination;
	Train(int id, char *prefix, int departure, SectionBlock *origin, SectionBlock *destination)	{		this->id = id;		this->prefix = prefix;		this->departure = departure;		this->origin = origin;		this->destination = destination;	}};
// Activitiesstruct RouteActivity{	int id;	Train *train;	int transitTime;	int transitTimeReleasing;	SectionBlock *sectionBlock;
	RouteActivity(int id, Train *train, int transitTime, int transitTimeReleasing, SectionBlock *sectionBlock)	{		this->id = id;		this->train = train;		this->transitTime = transitTime;		this->transitTimeReleasing = transitTimeReleasing;		this->sectionBlock = sectionBlock;	}};
/***************************************************** Train scheduling*****************************************************/class Scheduling : public MinimizeScript{private:		// Intervals	IntVarArray *start_times;	IntVarArray *end_times;	IntVarArray *start_times_releasing;	IntVarArray *end_times_releasing;	IntVarArray *duration;	IntVarArray *duration_releasing;	IntVarArray totalCost;	IntVar totalFinal;
	int maxDomain;
	// Input data	std::list<Train*> _trains;	std::list<SectionBlock*> _sectionBlocks;	std::list<RouteActivity*> _activities;	std::list<RouteActivity*> *_activitiesByTrain;
public:
	// search engines	enum	{		SEARCH_DFS,		SEARCH_BAB,		SEARCH_RESTART	};
	// Droping data	~Scheduling()	{		/*		for (int i = 0; i < _trains.size(); i++)		{			_activitiesByTrain[i].clear();		}
		for (std::list<RouteActivity*>::iterator i = _activities.begin(); i != _activities.end(); ++i)		{			delete (*i);		}
		for (std::list<Train*>::iterator i = _trains.begin(); i != _trains.end(); ++i)		{			delete (*i);		}
		for (std::list<SectionBlock*>::iterator i = _sectionBlocks.begin(); i != _sectionBlocks.end(); ++i)		{			delete (*i);		}				_activities.clear();		_trains.clear();		_sectionBlocks.clear();		*/	}
	// Actual model	Scheduling(const SizeOptions& opt)		: totalFinal(*this, 0, Int::Limits::max)	{		maxDomain = 1000;
		run(opt);	}
	// Constructor for cloning s	Scheduling(bool share, Scheduling& s) : MinimizeScript(share, s) 	{		copypreprocess(share, s);
		const int totalTrains = _trains.size();
		maxDomain = s.maxDomain;
		// Domain definition		start_times = new IntVarArray[totalTrains];		end_times = new IntVarArray[totalTrains];
		start_times_releasing = new IntVarArray[totalTrains];		end_times_releasing = new IntVarArray[totalTrains];
		duration = new IntVarArray[totalTrains];		duration_releasing = new IntVarArray[totalTrains];
		totalFinal.update(*this, share, s.totalFinal);
		totalCost = IntVarArray(*this, totalTrains, 0, Int::Limits::max);
		for (int t = 0; t < totalTrains; t++)		{			int totalActivities = _activitiesByTrain[t].size();
			totalCost[t].update(*this, share, s.totalCost[t]);
			start_times[t] = IntVarArray(*this, totalActivities, 0, maxDomain);			start_times[t].update(*this, share, s.start_times[t]);
			end_times[t] = IntVarArray(*this, totalActivities, 0, maxDomain);			end_times[t].update(*this, share, s.end_times[t]);
			start_times_releasing[t] = IntVarArray(*this, totalActivities, 0, maxDomain);			start_times_releasing[t].update(*this, share, s.start_times_releasing[t]);
			end_times_releasing[t] = IntVarArray(*this, totalActivities, 0, maxDomain);			end_times_releasing[t].update(*this, share, s.end_times_releasing[t]);
			duration[t] = IntVarArray(*this, totalActivities, 0, maxDomain);			duration[t].update(*this, share, s.duration[t]);
			duration_releasing[t] = IntVarArray(*this, totalActivities, 0, maxDomain);			duration_releasing[t].update(*this, share, s.duration_releasing[t]);		}	}
	// Copy during cloning	virtual Space *copy(bool share) 	{		return new Scheduling(share, *this);	}
	// Run method	virtual void run(const SizeOptions& opt)	{		preprocess();
		const int totalTrains = _trains.size();		const int totalSBs = 5;
		// Domain intervals		start_times = new IntVarArray[totalTrains];		end_times = new IntVarArray[totalTrains];		duration = new IntVarArray[totalTrains];
		start_times_releasing = new IntVarArray[totalTrains];		end_times_releasing = new IntVarArray[totalTrains];		duration_releasing = new IntVarArray[totalTrains];
		totalCost = IntVarArray(*this, totalTrains, 0, Int::Limits::max);
		IntVarArgs sb_start_resource[totalSBs];		IntVarArgs sb_end_resource[totalSBs];		IntVarArgs sb_duration[totalSBs];
		// Domain definition		for (int t = 0; t < _trains.size(); t++)		{			int totalActivities = _activitiesByTrain[t].size();
			start_times[t] = IntVarArray(*this, totalActivities, 0, maxDomain);			end_times[t] = IntVarArray(*this, totalActivities, 0, maxDomain);			duration[t] = IntVarArray(*this, totalActivities, 0, maxDomain);
			start_times_releasing[t] = IntVarArray(*this, totalActivities, 0, maxDomain);			end_times_releasing[t] = IntVarArray(*this, totalActivities, 0, maxDomain);			duration_releasing[t] = IntVarArray(*this, totalActivities, 0, maxDomain);
			// Grouping activities by SB			int s = 0;			for (std::list<RouteActivity*>::iterator j = _activitiesByTrain[t].begin(); j != _activitiesByTrain[t].end(); ++j)			{				int sb = (*j)->sectionBlock->id;
				sb_start_resource[sb] << start_times[t][s];				sb_start_resource[sb] << start_times_releasing[t][s];
				sb_duration[sb] << duration[t][s];				sb_duration[sb] << duration_releasing[t][s];
				sb_end_resource[sb] << end_times[t][s];				sb_end_resource[sb] << end_times_releasing[t][s];
				s++;			}		}
		// Starting activities		int x = 0;		for (std::list<Train*>::iterator i = _trains.begin(); i != _trains.end(); ++i)		{			rel(*this, start_times[x][0], IRT_EQ, (*i)->departure, opt.icl());			x++;		}
		int k = 0;		for (std::list<Train*>::iterator i = _trains.begin(); i != _trains.end(); ++i)		{			// Start and end of activities			int sb = 0;			for (std::list<RouteActivity*>::iterator j = _activitiesByTrain[k].begin(); j != _activitiesByTrain[k].end(); )			{				RouteActivity *atual = (*j);
				j++;
				// Travel duration				rel(*this, end_times[k][sb] >= start_times[k][sb] + atual->transitTime, opt.icl());								// Duration var				rel(*this, duration[k][sb] == end_times[k][sb] - start_times[k][sb], opt.icl());								// Releasing start				rel(*this, start_times_releasing[k][sb], IRT_EQ, end_times[k][sb], opt.icl());
				// Releasing duration				rel(*this, end_times_releasing[k][sb] == start_times_releasing[k][sb] + atual->transitTimeReleasing, opt.icl());								// Release Duration var				rel(*this, duration_releasing[k][sb] == end_times_releasing[k][sb] - start_times_releasing[k][sb], opt.icl());
				// Precedence of activities (ignore last)				if (j != _activitiesByTrain[k].end())				{					// Precendences					rel(*this, start_times[k][sb + 1], IRT_EQ, end_times[k][sb], opt.icl());				}
				sb++;			}
			linear(*this, duration[k], IRT_EQ, totalCost[k]);
			k++;		}
		linear(*this, totalCost, IRT_EQ, totalFinal);
		IntVarArgs SY[totalSBs];		IntVarArgs EY[totalSBs];		IntVarArgs DY[totalSBs];				// Disjuntive data		for (std::list<SectionBlock*>::iterator i = _sectionBlocks.begin(); i != _sectionBlocks.end(); ++i)		{			int total = 0;
			SectionBlock *atual = (*i);
			for (std::list<RouteActivity*>::iterator j = _activities.begin(); j != _activities.end(); ++j)			{				RouteActivity *activity = (*j);
				if (activity->sectionBlock->id == atual->id)				{					// Activity + Releasing					total += 2;				}			}						SY[atual->id] = IntVarArgs(*this, total, 0, 0);			EY[atual->id] = IntVarArgs(*this, total, 1, 1);			DY[atual->id] = IntVarArgs(*this, total, 1, 1);		}
		// Disjuntive restriction		for (std::list<SectionBlock*>::iterator i = _sectionBlocks.begin(); i != _sectionBlocks.end(); ++i)		{			SectionBlock *atual = (*i);						if (atual->yard || sb_start_resource[atual->id].size() <= 0)			{				continue;			}
			nooverlap(*this, sb_start_resource[atual->id], sb_duration[atual->id], sb_end_resource[atual->id], SY[atual->id], DY[atual->id], EY[atual->id], opt.icl());		}
		// Branching		for (int t = 0; t < _trains.size(); t++)		{			branch(*this, start_times[t], INT_VAR_SIZE_MIN, INT_VAL_MIN);			branch(*this, end_times[t], INT_VAR_SIZE_MIN, INT_VAL_MIN);		}	}
	// Print solution	virtual void print(std::ostream& os) const 	{		int t = 0;		for (std::list<Train*>::const_iterator i = _trains.begin(); i != _trains.end(); ++i)		{			os << "train : " << (*i)->prefix << " (" << (*i)->origin->name << " - " << (*i)->destination->name << ") " << std::endl;			os << "start_times    : " << start_times[t] << std::endl;			os << "end_times      : " << end_times[t] << std::endl;
			os << "releasing start: " << start_times_releasing[t] << std::endl;			os << "releasing end  : " << end_times_releasing[t] << std::endl;			os << "duration       : " << totalCost[t] << std::endl;
			os << std::endl;
			t++;		}
		os << "objective      : " << totalFinal << std::endl;	}
	virtual IntVar cost() const	{		return totalFinal;	}
	void copypreprocess(bool share, Scheduling &s)	{		if (share)		{			_sectionBlocks = s._sectionBlocks;			_activities = s._activities;			_trains = s._trains;			_activitiesByTrain = s._activitiesByTrain;		}		else		{			preprocess();		}	}
	void preprocess()	{		// Sample data		SectionBlock *_lpg = new SectionBlock(0, "LPG", false);		_sectionBlocks.push_back(_lpg);
		SectionBlock *_lic = new SectionBlock(1, "LIC", false);		_sectionBlocks.push_back(_lic);
		SectionBlock *_lus = new SectionBlock(2, "LUS", false);		_sectionBlocks.push_back(_lus);
		SectionBlock *_lap = new SectionBlock(3, "LAP", false);		_sectionBlocks.push_back(_lap);				SectionBlock *_lmg = new SectionBlock(4, "LMG", true);		_sectionBlocks.push_back(_lmg);
		// Trains		Train *_x01 = new Train(11, "X01", 0, _lmg, _lpg);		_trains.push_back(_x01);
		Train *_x02 = new Train(12, "X02", 0, _lpg, _lmg);		_trains.push_back(_x02);
		// Activities for train x01		_activities.push_back(new RouteActivity(21, _x01, 10, 1, _lmg));		_activities.push_back(new RouteActivity(22, _x01, 10, 1, _lap));		_activities.push_back(new RouteActivity(23, _x01, 10, 1, _lus));		_activities.push_back(new RouteActivity(24, _x01, 10, 1, _lic));		_activities.push_back(new RouteActivity(25, _x01, 10, 1, _lpg));
		// Activities for train x02		_activities.push_back(new RouteActivity(21, _x02, 10, 1, _lpg));		_activities.push_back(new RouteActivity(22, _x02, 10, 1, _lic));		_activities.push_back(new RouteActivity(23, _x02, 10, 1, _lus));		_activities.push_back(new RouteActivity(24, _x02, 10, 1, _lap));		_activities.push_back(new RouteActivity(25, _x02, 10, 1, _lmg));
		_activitiesByTrain = new std::list<RouteActivity*>[_trains.size()];
		int t = 0;		for (std::list<Train*>::iterator i = _trains.begin(); i != _trains.end(); ++i)		{			// calculate the end times			for (std::list<RouteActivity*>::iterator j = _activities.begin(); j != _activities.end(); ++j)			{				if ((*i)->id == (*j)->train->id)				{					_activitiesByTrain[t].push_back(*j);				}			}
			t++;		}	}};
/**  *  main */int main(int argc, char* argv[]) {	SizeOptions opt("Train Scheduling");	opt.solutions(0);	opt.time(30000);
	opt.search(Scheduling::SEARCH_BAB);	opt.search(Scheduling::SEARCH_DFS, "dfs");	opt.search(Scheduling::SEARCH_BAB, "bab");	opt.search(Scheduling::SEARCH_RESTART, "restart");
	if (!opt.size()) 	{		opt.size(4);	}
	opt.parse(argc,argv);
	if (opt.search() == Scheduling::SEARCH_DFS) 	{		MinimizeScript::run<Scheduling, DFS, SizeOptions>(opt);	} 	else if (opt.search() == Scheduling::SEARCH_RESTART) 	{		MinimizeScript::run<Scheduling, Restart, SizeOptions>(opt);	}	else 	{		MinimizeScript::run<Scheduling, BAB, SizeOptions>(opt);	}
	getch();
	return 0;}</code> Thanks in advance,
Jefferson Soares BiernastkiJSK Solu??es em Tecnologia Ltda
Desenvolvimento - Novas Tecnologias
41 88426214
http://www.onlaboral.com.br 
http://pixeljef.wordpress.com


 		 	   		  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.gecode.org/pipermail/users/attachments/20110906/44947bab/attachment-0001.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: TrainSchedule.cpp
Type: text/x-c
Size: 12331 bytes
Desc: not available
URL: <http://www.gecode.org/pipermail/users/attachments/20110906/44947bab/attachment-0002.bin>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: TrainSchedule.mod
Type: audio/mod
Size: 2491 bytes
Desc: not available
URL: <http://www.gecode.org/pipermail/users/attachments/20110906/44947bab/attachment-0003.bin>

From tack at gecode.org  Wed Sep  7 14:39:47 2011
From: tack at gecode.org (Guido Tack)
Date: Wed, 7 Sep 2011 14:39:47 +0200
Subject: [gecode-users] Problem solving simple model
In-Reply-To: <SNT110-W6CDD0F19DB12B8190596AE41C0@phx.gbl>
References: <SNT110-W6CDD0F19DB12B8190596AE41C0@phx.gbl>
Message-ID: <28BCE02C-BC02-4907-A2B7-3BB7CC1AFDB3@gecode.org>

On 6 Sep 2011, at 15:57, Jefferson Soares Biernastki wrote:

> Hi people,
> 
> i m working on Gecode for 2 weeks and i model a simple constraint problem already resolved in ILOG CP.
> 
> Problem: Two trains (X01 and X02) must arrive in final station, each ocupation must be released, normally 1 minute for releasing.
> 
> the model bellow tries to represent this problem.
> 
> somebody could help me on what i m doing wrong?

The reason your code can't solve the problem is the search strategy.  ILOG CP uses advanced automatic search heuristics that work well for scheduling problems. The INT_VAR_SIZE_MIN search in your Gecode model simply makes bad decisions early on and can't recover from them (see the huge tree when you run with -mode gist).
For your problem, a simple dynamic heuristic (INT_VAR_SIZE_AFC_MIN) together with a restart based search seems to work - at least it does find a solution and can prove optimality, although I'd expect a more specific search strategy to perform better.  I attached a modified version of your model, it does the restart search when you invoke it with -search restart.

There are a number of small things you can improve in your model, too:
 * use unary instead of nooverlap (see attached file)
 * do not initialize the IntVarArrays during cloning (just call update, see attached file)
 * not store the instance data in the Scheduling class (to avoid copying it during search, where it is not needed)

Cheers,
Guido

-- 
Guido Tack, http://people.cs.kuleuven.be/~guido.tack/

-------------- next part --------------
A non-text attachment was scrubbed...
Name: TrainSchedule.cpp
Type: application/octet-stream
Size: 14096 bytes
Desc: not available
URL: <http://www.gecode.org/pipermail/users/attachments/20110907/d50f82b1/attachment.obj>
-------------- next part --------------



From jef_ti at hotmail.com  Wed Sep  7 17:14:14 2011
From: jef_ti at hotmail.com (Jefferson Soares Biernastki)
Date: Wed, 7 Sep 2011 12:14:14 -0300
Subject: [gecode-users] Problem solving simple model
In-Reply-To: <28BCE02C-BC02-4907-A2B7-3BB7CC1AFDB3@gecode.org>
References: <SNT110-W6CDD0F19DB12B8190596AE41C0@phx.gbl>,
	<28BCE02C-BC02-4907-A2B7-3BB7CC1AFDB3@gecode.org>
Message-ID: <SNT110-W28DD1E71FFB9C85C33E3B1E41F0@phx.gbl>


Thanks a lot Guido/Christian,
wonderful tips, i already downloaded the MPG to improve my knowledge on Gecode and in a soon future replace ILOG.

Regards,
 
Jefferson Soares BiernastkiJSK Solu??es em Tecnologia Ltda
Desenvolvimento - Novas Tecnologias
41 88426214
http://www.onlaboral.com.br 
http://pixeljef.wordpress.com




Subject: Re: [gecode-users] Problem solving simple model
From: tack at gecode.org
Date: Wed, 7 Sep 2011 14:39:47 +0200
CC: users at gecode.org
To: jef_ti at hotmail.com

On 6 Sep 2011, at 15:57, Jefferson Soares Biernastki wrote:
 
> Hi people,
> 
> i m working on Gecode for 2 weeks and i model a simple constraint problem already resolved in ILOG CP.
> 
> Problem: Two trains (X01 and X02) must arrive in final station, each ocupation must be released, normally 1 minute for releasing.
> 
> the model bellow tries to represent this problem.
> 
> somebody could help me on what i m doing wrong?
 
The reason your code can't solve the problem is the search strategy.  ILOG CP uses advanced automatic search heuristics that work well for scheduling problems. The INT_VAR_SIZE_MIN search in your Gecode model simply makes bad decisions early on and can't recover from them (see the huge tree when you run with -mode gist).
For your problem, a simple dynamic heuristic (INT_VAR_SIZE_AFC_MIN) together with a restart based search seems to work - at least it does find a solution and can prove optimality, although I'd expect a more specific search strategy to perform better.  I attached a modified version of your model, it does the restart search when you invoke it with -search restart.
 
There are a number of small things you can improve in your model, too:
 * use unary instead of nooverlap (see attached file)
 * do not initialize the IntVarArrays during cloning (just call update, see attached file)
 * not store the instance data in the Scheduling class (to avoid copying it during search, where it is not needed)
 
Cheers,
Guido
 
-- 
Guido Tack, http://people.cs.kuleuven.be/~guido.tack/
 

 		 	   		  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.gecode.org/pipermail/users/attachments/20110907/f16c8ab7/attachment.htm>

From kisshen at cisco.com  Tue Sep 13 18:40:38 2011
From: kisshen at cisco.com (Kish Shen)
Date: Tue, 13 Sep 2011 17:40:38 +0100
Subject: [gecode-users] Gecode 3.5.0 faster than Gecode 3.7.0?
Message-ID: <4E6F8786.5000901@cisco.com>

Hi,

I have just upgrade the ECLiPSe interface to Gecode from Gecode 3.5.0 to 
3.7.0. As I am currently doing some work on improving the performance of 
the interface, I have been doing some timings with example programs, and 
to my surprise, one of the example is running consistently faster with 
3.5.0. The run-times are:

3.5.0:        16.34s
3.7.0:        19.99s

The only change between these two is the version of Gecode used (plus 
the changes in the C++ code needed for the upgrade, i.e. the #include 
for the graph and scheduling modules).

As the program is written in ECLiPSe, there is no direct record of the 
actual Gecode API calls made. The problem is the "roster" example from 
the ECLiPSe website, modified for use with the Gecode interface. This 
example is solving a simple rostering problem, and there are a lot of 
relational constraints posted, plus some boolean expressions, all posted 
via the MiniModel, and there are also some count contraints (occurrences 
of one value variant). The search is done in ECLiPSe, i.e. not using the 
search-engines of Gecode.

Is the above information sufficient for even guessing what the slow down 
might be due to? If not, what additional information might be needed?

Cheers,

Kish

-- 
This e-mail may contain confidential and privileged material for the
sole use of the intended recipient. Any review, use, distribution or
disclosure by others is strictly prohibited. If you are not the intended
recipient (or authorized to receive for the recipient), please contact
the sender by reply e-mail and delete all copies of this message.
Cisco Systems Limited (Company Number: 02558939), is registered in
England and Wales with its registered office at 1 Callaghan Square,
Cardiff, South Glamorgan CF10 5BT.


From 4evo.11.ove4 at gmail.com  Wed Sep 14 00:23:19 2011
From: 4evo.11.ove4 at gmail.com (revo revo)
Date: Tue, 13 Sep 2011 18:23:19 -0400
Subject: [gecode-users] nested cost functions
Message-ID: <CANNZr+x4_3FJu15McE5eNFf3Sj4Y6PrhZyFF=Uxx+SSZrrwUnA@mail.gmail.com>

Hello,

I am new to gecode (and constraint programming in general). So far, gecode
has been a joy to work with, even for a novice like me.

I was wondering what is the best way to perform a "nested" cost function.
Specifically, I am looking to minimize X, but within the space of solutioins
for which X is equal, prefer solutions which minimize Y? I could probably
hack it by defining a cost function that looks like X*large_number+Y, but
I'd prefer to do this properly if there's a good solution.

If anyone can point me to both the introductory literature (I see the
min-max algorithm, but being relatively new to the literature, I'm not sure
if the game-theoretic descriptions match what I am trying to do here) as
well as how to implement this in Gecode, that would be really helpful.

Thanks in advance,

~r
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.gecode.org/pipermail/users/attachments/20110913/ab41dd04/attachment.htm>

From zayenz at gmail.com  Wed Sep 14 08:49:13 2011
From: zayenz at gmail.com (Mikael Zayenz Lagerkvist)
Date: Wed, 14 Sep 2011 08:49:13 +0200
Subject: [gecode-users] nested cost functions
In-Reply-To: <CANNZr+x4_3FJu15McE5eNFf3Sj4Y6PrhZyFF=Uxx+SSZrrwUnA@mail.gmail.com>
References: <CANNZr+x4_3FJu15McE5eNFf3Sj4Y6PrhZyFF=Uxx+SSZrrwUnA@mail.gmail.com>
Message-ID: <CAPKxCj6eLHLeAeq1fJvZ8n=ay8arHjsxvngXnePzGQ39BPBf8w@mail.gmail.com>

2011/9/14 revo revo <4evo.11.ove4 at gmail.com>

> I am new to gecode (and constraint programming in general). So far, gecode
> has been a joy to work with, even for a novice like me.
>
> I was wondering what is the best way to perform a "nested" cost function.
> Specifically, I am looking to minimize X, but within the space of solutioins
> for which X is equal, prefer solutions which minimize Y? I could probably
> hack it by defining a cost function that looks like X*large_number+Y, but
> I'd prefer to do this properly if there's a good solution.
>
> If anyone can point me to both the introductory literature (I see the
> min-max algorithm, but being relatively new to the literature, I'm not sure
> if the game-theoretic descriptions match what I am trying to do here) as
> well as how to implement this in Gecode, that would be really helpful.
>


Hi,

The cost function is a convenience function for the simple cases where what
we want to optimize over is just a single variable. The general mechanism in
Gecode  for optimizing using branch and bound search is the constrain
function (see Section 2.5 in MPG for an explanation).

In your case, the simple solution is to use a lexical ordering constraint
over the array of variables. See MPG for details on lexical ordering
constraints. This is the approach you should try first.

In some cases, depending on the particular problem that you have and if it
is hard to solve, it might be better to first optimize on the first
variable. When the optimal solution to that is found, fix that value as a
part of a new instance of your problem, and optimize on the second variable.
Repeat for as many variables as you have. Running a search this way is a bit
more involved (one needs to do a bit more in setting up the search), but can
avoid potential long plateaus where the last variable is re-optimized for
every new better value of the second to-last variable.

Hope this helps,
Mikael

-- 
Mikael Zayenz Lagerkvist, http://www.ict.kth.se/~zayenz/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.gecode.org/pipermail/users/attachments/20110914/40d510dc/attachment.htm>

From cschulte at kth.se  Wed Sep 14 10:35:32 2011
From: cschulte at kth.se (Christian Schulte)
Date: Wed, 14 Sep 2011 10:35:32 +0200
Subject: [gecode-users] Gecode 3.5.0 faster than Gecode 3.7.0?
In-Reply-To: <4E6F8786.5000901@cisco.com>
References: <4E6F8786.5000901@cisco.com>
Message-ID: <003901cc72b9$45d98020$d18c8060$@kth.se>

This is most likely due to the count constraint. In Gecode 3.7.0 it tries to
do more pruning and that might cause the slow down (and your examples might
not necessarily profit from the additional pruning).

Cheers
Christian

--
Christian Schulte, KTH, web.it.kth.se/~cschulte/

-----Original Message-----
From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf
Of Kish Shen
Sent: Tuesday, September 13, 2011 6:41 PM
To: users at gecode.org
Subject: [gecode-users] Gecode 3.5.0 faster than Gecode 3.7.0?

Hi,

I have just upgrade the ECLiPSe interface to Gecode from Gecode 3.5.0 to
3.7.0. As I am currently doing some work on improving the performance of the
interface, I have been doing some timings with example programs, and to my
surprise, one of the example is running consistently faster with 3.5.0. The
run-times are:

3.5.0:        16.34s
3.7.0:        19.99s

The only change between these two is the version of Gecode used (plus the
changes in the C++ code needed for the upgrade, i.e. the #include for the
graph and scheduling modules).

As the program is written in ECLiPSe, there is no direct record of the
actual Gecode API calls made. The problem is the "roster" example from the
ECLiPSe website, modified for use with the Gecode interface. This example is
solving a simple rostering problem, and there are a lot of relational
constraints posted, plus some boolean expressions, all posted via the
MiniModel, and there are also some count contraints (occurrences of one
value variant). The search is done in ECLiPSe, i.e. not using the
search-engines of Gecode.

Is the above information sufficient for even guessing what the slow down
might be due to? If not, what additional information might be needed?

Cheers,

Kish

--
This e-mail may contain confidential and privileged material for the sole
use of the intended recipient. Any review, use, distribution or disclosure
by others is strictly prohibited. If you are not the intended recipient (or
authorized to receive for the recipient), please contact the sender by reply
e-mail and delete all copies of this message.
Cisco Systems Limited (Company Number: 02558939), is registered in England
and Wales with its registered office at 1 Callaghan Square, Cardiff, South
Glamorgan CF10 5BT.

_______________________________________________
Gecode users mailing list
users at gecode.org
https://www.gecode.org/mailman/listinfo/gecode-users



From zayenz at gmail.com  Wed Sep 14 13:21:36 2011
From: zayenz at gmail.com (Mikael Zayenz Lagerkvist)
Date: Wed, 14 Sep 2011 13:21:36 +0200
Subject: [gecode-users] nested cost functions
In-Reply-To: <CANNZr+yiAhW7BYNe7gRxpJ+LQFnx-S+Z5ptruJHL4=AOK2ASiA@mail.gmail.com>
References: <CANNZr+x4_3FJu15McE5eNFf3Sj4Y6PrhZyFF=Uxx+SSZrrwUnA@mail.gmail.com>	<CAPKxCj6eLHLeAeq1fJvZ8n=ay8arHjsxvngXnePzGQ39BPBf8w@mail.gmail.com>
	<CANNZr+yiAhW7BYNe7gRxpJ+LQFnx-S+Z5ptruJHL4=AOK2ASiA@mail.gmail.com>
Message-ID: <4E708E40.3040604@gmail.com>

On 09/14/2011 12:20 PM, revo revo wrote:
> One additional question - for some reason when I use DFS, I am able to 
> return all solutions, but when I use BAB, I seem to only get one 
> solution, using the exact same Script class (with no other differences 
> to how it's called). Any reason for this?

The following is assuming that you let the program explore all of the 
search space in both runs. If you are using the script command line 
driver, that means supplying "-solutions 0".

That said, BAB is made for finding one instance of the optimal solution. 
Each new solution returned will be better than the last one returned. 
Given that you let a program run long enough, the last solution is an 
optimal solution to your problem. If you are lucky, or if you branching 
heuristic is very good, you might find the best solution directly, in 
which case only one solution is returned.

If you want all the best solutions, what one should do is first find one 
optimal solution (using BAB as described above). Then one should to a 
DFS search with the problem modified to only accept solutions equivalent 
to the previously found optimal solution.

Cheers,
Mikael

-- 
Mikael Zayenz Lagerkvist, http://www.it.kth.se/~zayenz



From 4evo.11.ove4 at gmail.com  Wed Sep 14 12:20:07 2011
From: 4evo.11.ove4 at gmail.com (revo revo)
Date: Wed, 14 Sep 2011 06:20:07 -0400
Subject: [gecode-users] nested cost functions
In-Reply-To: <CAPKxCj6eLHLeAeq1fJvZ8n=ay8arHjsxvngXnePzGQ39BPBf8w@mail.gmail.com>
References: <CANNZr+x4_3FJu15McE5eNFf3Sj4Y6PrhZyFF=Uxx+SSZrrwUnA@mail.gmail.com>
	<CAPKxCj6eLHLeAeq1fJvZ8n=ay8arHjsxvngXnePzGQ39BPBf8w@mail.gmail.com>
Message-ID: <CANNZr+yiAhW7BYNe7gRxpJ+LQFnx-S+Z5ptruJHL4=AOK2ASiA@mail.gmail.com>

Hi Mikael,

I see, thanks for the clarification. That makes sense (although it will
probably take me a while to figure out how to get it to work).

One additional question - for some reason when I use DFS, I am able to
return all solutions, but when I use BAB, I seem to only get one solution,
using the exact same Script class (with no other differences to how it's
called). Any reason for this?

~r

On Wed, Sep 14, 2011 at 2:49 AM, Mikael Zayenz Lagerkvist
<zayenz at gmail.com>wrote:

> 2011/9/14 revo revo <4evo.11.ove4 at gmail.com>
>
>> I am new to gecode (and constraint programming in general). So far, gecode
>> has been a joy to work with, even for a novice like me.
>>
>> I was wondering what is the best way to perform a "nested" cost function.
>> Specifically, I am looking to minimize X, but within the space of solutioins
>> for which X is equal, prefer solutions which minimize Y? I could probably
>> hack it by defining a cost function that looks like X*large_number+Y, but
>> I'd prefer to do this properly if there's a good solution.
>>
>> If anyone can point me to both the introductory literature (I see the
>> min-max algorithm, but being relatively new to the literature, I'm not sure
>> if the game-theoretic descriptions match what I am trying to do here) as
>> well as how to implement this in Gecode, that would be really helpful.
>>
>
>
> Hi,
>
> The cost function is a convenience function for the simple cases where what
> we want to optimize over is just a single variable. The general mechanism in
> Gecode  for optimizing using branch and bound search is the constrain
> function (see Section 2.5 in MPG for an explanation).
>
> In your case, the simple solution is to use a lexical ordering constraint
> over the array of variables. See MPG for details on lexical ordering
> constraints. This is the approach you should try first.
>
> In some cases, depending on the particular problem that you have and if it
> is hard to solve, it might be better to first optimize on the first
> variable. When the optimal solution to that is found, fix that value as a
> part of a new instance of your problem, and optimize on the second variable.
> Repeat for as many variables as you have. Running a search this way is a bit
> more involved (one needs to do a bit more in setting up the search), but can
> avoid potential long plateaus where the last variable is re-optimized for
> every new better value of the second to-last variable.
>
> Hope this helps,
> Mikael
>
> --
> Mikael Zayenz Lagerkvist, http://www.ict.kth.se/~zayenz/
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.gecode.org/pipermail/users/attachments/20110914/66a5d9ed/attachment.htm>

From kisshen at cisco.com  Wed Sep 14 14:12:22 2011
From: kisshen at cisco.com (Kish Shen)
Date: Wed, 14 Sep 2011 13:12:22 +0100
Subject: [gecode-users] Gecode 3.5.0 faster than Gecode 3.7.0?
In-Reply-To: <003901cc72b9$45d98020$d18c8060$@kth.se>
References: <4E6F8786.5000901@cisco.com>
	<003901cc72b9$45d98020$d18c8060$@kth.se>
Message-ID: <4E709A26.8060502@cisco.com>

Hi Christian,

Thanks for your reply!

The documentation for both 3.7.0 and 3.5.0 say that the single value 
count constraint achieves domain consistency. I thought you can't really 
do better (more pruning) than domain consistency for single constraints, 
or am I mistaken?

Cheers,

Kish

On 14/09/2011 09:35, Christian Schulte wrote:
> This is most likely due to the count constraint. In Gecode 3.7.0 it tries to
> do more pruning and that might cause the slow down (and your examples might
> not necessarily profit from the additional pruning).
>
> Cheers
> Christian
>
> --
> Christian Schulte, KTH, web.it.kth.se/~cschulte/
>
> -----Original Message-----
> From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf
> Of Kish Shen
> Sent: Tuesday, September 13, 2011 6:41 PM
> To: users at gecode.org
> Subject: [gecode-users] Gecode 3.5.0 faster than Gecode 3.7.0?
>
> Hi,
>
> I have just upgrade the ECLiPSe interface to Gecode from Gecode 3.5.0 to
> 3.7.0. As I am currently doing some work on improving the performance of the
> interface, I have been doing some timings with example programs, and to my
> surprise, one of the example is running consistently faster with 3.5.0. The
> run-times are:
>
> 3.5.0:        16.34s
> 3.7.0:        19.99s
>
> The only change between these two is the version of Gecode used (plus the
> changes in the C++ code needed for the upgrade, i.e. the #include for the
> graph and scheduling modules).
>
> As the program is written in ECLiPSe, there is no direct record of the
> actual Gecode API calls made. The problem is the "roster" example from the
> ECLiPSe website, modified for use with the Gecode interface. This example is
> solving a simple rostering problem, and there are a lot of relational
> constraints posted, plus some boolean expressions, all posted via the
> MiniModel, and there are also some count contraints (occurrences of one
> value variant). The search is done in ECLiPSe, i.e. not using the
> search-engines of Gecode.
>
> Is the above information sufficient for even guessing what the slow down
> might be due to? If not, what additional information might be needed?
>
> Cheers,
>
> Kish
>
> --
> This e-mail may contain confidential and privileged material for the sole
> use of the intended recipient. Any review, use, distribution or disclosure
> by others is strictly prohibited. If you are not the intended recipient (or
> authorized to receive for the recipient), please contact the sender by reply
> e-mail and delete all copies of this message.
> Cisco Systems Limited (Company Number: 02558939), is registered in England
> and Wales with its registered office at 1 Callaghan Square, Cardiff, South
> Glamorgan CF10 5BT.
>
> _______________________________________________
> Gecode users mailing list
> users at gecode.org
> https://www.gecode.org/mailman/listinfo/gecode-users
>


-- 
This e-mail may contain confidential and privileged material for the
sole use of the intended recipient. Any review, use, distribution or
disclosure by others is strictly prohibited. If you are not the intended
recipient (or authorized to receive for the recipient), please contact
the sender by reply e-mail and delete all copies of this message.
Cisco Systems Limited (Company Number: 02558939), is registered in
England and Wales with its registered office at 1 Callaghan Square,
Cardiff, South Glamorgan CF10 5BT.


From cschulte at kth.se  Wed Sep 14 14:19:39 2011
From: cschulte at kth.se (Christian Schulte)
Date: Wed, 14 Sep 2011 14:19:39 +0200
Subject: [gecode-users] Gecode 3.5.0 faster than Gecode 3.7.0?
In-Reply-To: <4E709A26.8060502@cisco.com>
References: <4E6F8786.5000901@cisco.com>	<003901cc72b9$45d98020$d18c8060$@kth.se>
	<4E709A26.8060502@cisco.com>
Message-ID: <001a01cc72d8$94728fa0$bd57aee0$@kth.se>

Okay, you got me red-handed here: before 3.7.0 count was in fact not domain
consistent for the case
	count(x,y,=,z)
where y is a variable. The pruning for y was actually missing (the values
for y can only be the values in x provided z >= 1).

So, a bug fix if you wish ;-)

Cheers
Christian

--
Christian Schulte, KTH, web.it.kth.se/~cschulte/


-----Original Message-----
From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf
Of Kish Shen
Sent: Wednesday, September 14, 2011 2:12 PM
To: users at gecode.org
Subject: Re: [gecode-users] Gecode 3.5.0 faster than Gecode 3.7.0?

Hi Christian,

Thanks for your reply!

The documentation for both 3.7.0 and 3.5.0 say that the single value count
constraint achieves domain consistency. I thought you can't really do better
(more pruning) than domain consistency for single constraints, or am I
mistaken?

Cheers,

Kish

On 14/09/2011 09:35, Christian Schulte wrote:
> This is most likely due to the count constraint. In Gecode 3.7.0 it 
> tries to do more pruning and that might cause the slow down (and your 
> examples might not necessarily profit from the additional pruning).
>
> Cheers
> Christian
>
> --
> Christian Schulte, KTH, web.it.kth.se/~cschulte/
>
> -----Original Message-----
> From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On 
> Behalf Of Kish Shen
> Sent: Tuesday, September 13, 2011 6:41 PM
> To: users at gecode.org
> Subject: [gecode-users] Gecode 3.5.0 faster than Gecode 3.7.0?
>
> Hi,
>
> I have just upgrade the ECLiPSe interface to Gecode from Gecode 3.5.0 
> to 3.7.0. As I am currently doing some work on improving the 
> performance of the interface, I have been doing some timings with 
> example programs, and to my surprise, one of the example is running 
> consistently faster with 3.5.0. The run-times are:
>
> 3.5.0:        16.34s
> 3.7.0:        19.99s
>
> The only change between these two is the version of Gecode used (plus 
> the changes in the C++ code needed for the upgrade, i.e. the #include 
> for the graph and scheduling modules).
>
> As the program is written in ECLiPSe, there is no direct record of the 
> actual Gecode API calls made. The problem is the "roster" example from 
> the ECLiPSe website, modified for use with the Gecode interface. This 
> example is solving a simple rostering problem, and there are a lot of 
> relational constraints posted, plus some boolean expressions, all 
> posted via the MiniModel, and there are also some count contraints 
> (occurrences of one value variant). The search is done in ECLiPSe, 
> i.e. not using the search-engines of Gecode.
>
> Is the above information sufficient for even guessing what the slow 
> down might be due to? If not, what additional information might be needed?
>
> Cheers,
>
> Kish
>
> --
> This e-mail may contain confidential and privileged material for the 
> sole use of the intended recipient. Any review, use, distribution or 
> disclosure by others is strictly prohibited. If you are not the 
> intended recipient (or authorized to receive for the recipient), 
> please contact the sender by reply e-mail and delete all copies of this
message.
> Cisco Systems Limited (Company Number: 02558939), is registered in 
> England and Wales with its registered office at 1 Callaghan Square, 
> Cardiff, South Glamorgan CF10 5BT.
>
> _______________________________________________
> Gecode users mailing list
> users at gecode.org
> https://www.gecode.org/mailman/listinfo/gecode-users
>


--
This e-mail may contain confidential and privileged material for the sole
use of the intended recipient. Any review, use, distribution or disclosure
by others is strictly prohibited. If you are not the intended recipient (or
authorized to receive for the recipient), please contact the sender by reply
e-mail and delete all copies of this message.
Cisco Systems Limited (Company Number: 02558939), is registered in England
and Wales with its registered office at 1 Callaghan Square, Cardiff, South
Glamorgan CF10 5BT.

_______________________________________________
Gecode users mailing list
users at gecode.org
https://www.gecode.org/mailman/listinfo/gecode-users



From 4evo.11.ove4 at gmail.com  Tue Sep 20 06:36:56 2011
From: 4evo.11.ove4 at gmail.com (revo revo)
Date: Tue, 20 Sep 2011 00:36:56 -0400
Subject: [gecode-users] nested cost functions
In-Reply-To: <4E708E40.3040604@gmail.com>
References: <CANNZr+x4_3FJu15McE5eNFf3Sj4Y6PrhZyFF=Uxx+SSZrrwUnA@mail.gmail.com>
	<CAPKxCj6eLHLeAeq1fJvZ8n=ay8arHjsxvngXnePzGQ39BPBf8w@mail.gmail.com>
	<CANNZr+yiAhW7BYNe7gRxpJ+LQFnx-S+Z5ptruJHL4=AOK2ASiA@mail.gmail.com>
	<4E708E40.3040604@gmail.com>
Message-ID: <CANNZr+xLO0A66zmUuX9t8508-0U9enKuqJiXQ+cKiXfLsObJiA@mail.gmail.com>

Thanks. One thing I'm confused by is that in talking to fellow colleagues,
they say that branch and bound isn't related to constraint programming. But
from the manual and Schulte's "Programming Constraint Inference Engines", it
seems like a best solution search using BAB is one form of constraint
programming.

Maybe if someone could direct me towards a tutorial that sharpens the
distinction between best solution search CP and optimization and how BAB
fits into gecode's CP framework (I thought I understood it as a search
technique, but now I'm being told it's unrelated to CP), I would be
enlightened.

~r



On Wed, Sep 14, 2011 at 7:21 AM, Mikael Zayenz Lagerkvist
<zayenz at gmail.com>wrote:

> On 09/14/2011 12:20 PM, revo revo wrote:
>
>> One additional question - for some reason when I use DFS, I am able to
>> return all solutions, but when I use BAB, I seem to only get one solution,
>> using the exact same Script class (with no other differences to how it's
>> called). Any reason for this?
>>
>
> The following is assuming that you let the program explore all of the
> search space in both runs. If you are using the script command line driver,
> that means supplying "-solutions 0".
>
> That said, BAB is made for finding one instance of the optimal solution.
> Each new solution returned will be better than the last one returned. Given
> that you let a program run long enough, the last solution is an optimal
> solution to your problem. If you are lucky, or if you branching heuristic is
> very good, you might find the best solution directly, in which case only one
> solution is returned.
>
> If you want all the best solutions, what one should do is first find one
> optimal solution (using BAB as described above). Then one should to a DFS
> search with the problem modified to only accept solutions equivalent to the
> previously found optimal solution.
>
> Cheers,
> Mikael
>
> --
> Mikael Zayenz Lagerkvist, http://www.it.kth.se/~zayenz
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.gecode.org/pipermail/users/attachments/20110920/38ff4129/attachment.htm>

From zayenz at gmail.com  Tue Sep 20 08:17:40 2011
From: zayenz at gmail.com (Mikael Zayenz Lagerkvist)
Date: Tue, 20 Sep 2011 08:17:40 +0200
Subject: [gecode-users] nested cost functions
In-Reply-To: <CANNZr+xLO0A66zmUuX9t8508-0U9enKuqJiXQ+cKiXfLsObJiA@mail.gmail.com>
References: <CANNZr+x4_3FJu15McE5eNFf3Sj4Y6PrhZyFF=Uxx+SSZrrwUnA@mail.gmail.com>	<CAPKxCj6eLHLeAeq1fJvZ8n=ay8arHjsxvngXnePzGQ39BPBf8w@mail.gmail.com>	<CANNZr+yiAhW7BYNe7gRxpJ+LQFnx-S+Z5ptruJHL4=AOK2ASiA@mail.gmail.com>	<4E708E40.3040604@gmail.com>
	<CANNZr+xLO0A66zmUuX9t8508-0U9enKuqJiXQ+cKiXfLsObJiA@mail.gmail.com>
Message-ID: <4E783004.3040308@gmail.com>

On 09/20/2011 06:36 AM, revo revo wrote:
> Thanks. One thing I'm confused by is that in talking to fellow 
> colleagues, they say that branch and bound isn't related to constraint 
> programming. But from the manual and Schulte's "Programming Constraint 
> Inference Engines", it seems like a best solution search using BAB is 
> one form of constraint programming.
>
> Maybe if someone could direct me towards a tutorial that sharpens the 
> distinction between best solution search CP and optimization and how 
> BAB fits into gecode's CP framework (I thought I understood it as a 
> search technique, but now I'm being told it's unrelated to CP), I 
> would be enlightened.

The short answer is that there are more than one area that uses the term 
branch and bound. The CP usage of the term has slightly different 
terminology than the usage in mathematical programming*, but the main 
principles are the same.

There are lots of resources for learning how BAB works in constraint 
programming (lecture notes from CP courses at universities is a good 
start), and that does not really have to do with Gecode.

Cheers,
Mikael

* Essentially, the bounding of the math programming kind is actually 
constraint propagation, and the pruning in the math programming kind is 
the bounding in the CP terminology. One may argue the merits of the 
different sets terms (and of having different terms), but for CP the 
terms used make much more sense than the other set of terms would.


-- 
Mikael Zayenz Lagerkvist, http://www.it.kth.se/~zayenz



From kisshen at cisco.com  Tue Sep 20 12:15:40 2011
From: kisshen at cisco.com (Kish Shen)
Date: Tue, 20 Sep 2011 11:15:40 +0100
Subject: [gecode-users] Gecode 3.5.0 faster than Gecode 3.7.0?
In-Reply-To: <001a01cc72d8$94728fa0$bd57aee0$@kth.se>
References: <4E6F8786.5000901@cisco.com>	<003901cc72b9$45d98020$d18c8060$@kth.se>
	<4E709A26.8060502@cisco.com>
	<001a01cc72d8$94728fa0$bd57aee0$@kth.se>
Message-ID: <4E7867CC.1060603@cisco.com>

Hi,

A follow-up: I've found another program (solves the crowded chessboard 
problem, using a "natural" model where each chess piece is modelled with 
a different domain value in a singe board, rather than having a 0/1 
board for each chess pieces). This program uses count with =, and is 20% 
slower in 3.7.0 (compared to 3.5.0).

Since I am getting this slow-down in two different programs, it could 
mean that a count constraint with less than full domain consistency 
could be useful. Does it make sense for Gecode to provide this?

Thanks and cheers,

Kish

On 14/09/2011 13:19, Christian Schulte wrote:
> Okay, you got me red-handed here: before 3.7.0 count was in fact not domain
> consistent for the case
> 	count(x,y,=,z)
> where y is a variable. The pruning for y was actually missing (the values
> for y can only be the values in x provided z>= 1).
>
> So, a bug fix if you wish ;-)
>
> Cheers
> Christian
>
> --
> Christian Schulte, KTH, web.it.kth.se/~cschulte/
>
>
> -----Original Message-----
> From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf
> Of Kish Shen
> Sent: Wednesday, September 14, 2011 2:12 PM
> To: users at gecode.org
> Subject: Re: [gecode-users] Gecode 3.5.0 faster than Gecode 3.7.0?
>
> Hi Christian,
>
> Thanks for your reply!
>
> The documentation for both 3.7.0 and 3.5.0 say that the single value count
> constraint achieves domain consistency. I thought you can't really do better
> (more pruning) than domain consistency for single constraints, or am I
> mistaken?
>
> Cheers,
>
> Kish
>
> On 14/09/2011 09:35, Christian Schulte wrote:
>> This is most likely due to the count constraint. In Gecode 3.7.0 it
>> tries to do more pruning and that might cause the slow down (and your
>> examples might not necessarily profit from the additional pruning).
>>
>> Cheers
>> Christian
>>
>> --
>> Christian Schulte, KTH, web.it.kth.se/~cschulte/
>>
>> -----Original Message-----
>> From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On
>> Behalf Of Kish Shen
>> Sent: Tuesday, September 13, 2011 6:41 PM
>> To: users at gecode.org
>> Subject: [gecode-users] Gecode 3.5.0 faster than Gecode 3.7.0?
>>
>> Hi,
>>
>> I have just upgrade the ECLiPSe interface to Gecode from Gecode 3.5.0
>> to 3.7.0. As I am currently doing some work on improving the
>> performance of the interface, I have been doing some timings with
>> example programs, and to my surprise, one of the example is running
>> consistently faster with 3.5.0. The run-times are:
>>
>> 3.5.0:        16.34s
>> 3.7.0:        19.99s
>>
>> The only change between these two is the version of Gecode used (plus
>> the changes in the C++ code needed for the upgrade, i.e. the #include
>> for the graph and scheduling modules).
>>
>> As the program is written in ECLiPSe, there is no direct record of the
>> actual Gecode API calls made. The problem is the "roster" example from
>> the ECLiPSe website, modified for use with the Gecode interface. This
>> example is solving a simple rostering problem, and there are a lot of
>> relational constraints posted, plus some boolean expressions, all
>> posted via the MiniModel, and there are also some count contraints
>> (occurrences of one value variant). The search is done in ECLiPSe,
>> i.e. not using the search-engines of Gecode.
>>
>> Is the above information sufficient for even guessing what the slow
>> down might be due to? If not, what additional information might be needed?
>>
>> Cheers,
>>
>> Kish
>>
>> --
>> This e-mail may contain confidential and privileged material for the
>> sole use of the intended recipient. Any review, use, distribution or
>> disclosure by others is strictly prohibited. If you are not the
>> intended recipient (or authorized to receive for the recipient),
>> please contact the sender by reply e-mail and delete all copies of this
> message.
>> Cisco Systems Limited (Company Number: 02558939), is registered in
>> England and Wales with its registered office at 1 Callaghan Square,
>> Cardiff, South Glamorgan CF10 5BT.
>>
>> _______________________________________________
>> Gecode users mailing list
>> users at gecode.org
>> https://www.gecode.org/mailman/listinfo/gecode-users
>>
>
>
> --
> This e-mail may contain confidential and privileged material for the sole
> use of the intended recipient. Any review, use, distribution or disclosure
> by others is strictly prohibited. If you are not the intended recipient (or
> authorized to receive for the recipient), please contact the sender by reply
> e-mail and delete all copies of this message.
> Cisco Systems Limited (Company Number: 02558939), is registered in England
> and Wales with its registered office at 1 Callaghan Square, Cardiff, South
> Glamorgan CF10 5BT.
>
> _______________________________________________
> Gecode users mailing list
> users at gecode.org
> https://www.gecode.org/mailman/listinfo/gecode-users
>


-- 
This e-mail may contain confidential and privileged material for the
sole use of the intended recipient. Any review, use, distribution or
disclosure by others is strictly prohibited. If you are not the intended
recipient (or authorized to receive for the recipient), please contact
the sender by reply e-mail and delete all copies of this message.
Cisco Systems Limited (Company Number: 02558939), is registered in
England and Wales with its registered office at 1 Callaghan Square,
Cardiff, South Glamorgan CF10 5BT.


From cschulte at kth.se  Tue Sep 20 14:01:27 2011
From: cschulte at kth.se (Christian Schulte)
Date: Tue, 20 Sep 2011 14:01:27 +0200
Subject: [gecode-users] Gecode 3.5.0 faster than Gecode 3.7.0?
In-Reply-To: <4E7867CC.1060603@cisco.com>
References: <4E6F8786.5000901@cisco.com>	<003901cc72b9$45d98020$d18c8060$@kth.se>	<4E709A26.8060502@cisco.com>	<001a01cc72d8$94728fa0$bd57aee0$@kth.se>
	<4E7867CC.1060603@cisco.com>
Message-ID: <00aa01cc778d$06cb69b0$14623d10$@se>

Hi,

Even though 20% seems to be okay to me, I have added that count now does
less propagation when used with ICL_VAL or ICL_BND. The default ICL_DEF is
still domain consistent.

Cheers
Christian

--
Christian Schulte, www.ict.kth.se/~cschulte/


-----Original Message-----
From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf
Of Kish Shen
Sent: Tuesday, September 20, 2011 12:16 PM
To: users at gecode.org
Subject: Re: [gecode-users] Gecode 3.5.0 faster than Gecode 3.7.0?

Hi,

A follow-up: I've found another program (solves the crowded chessboard 
problem, using a "natural" model where each chess piece is modelled with 
a different domain value in a singe board, rather than having a 0/1 
board for each chess pieces). This program uses count with =, and is 20% 
slower in 3.7.0 (compared to 3.5.0).

Since I am getting this slow-down in two different programs, it could 
mean that a count constraint with less than full domain consistency 
could be useful. Does it make sense for Gecode to provide this?

Thanks and cheers,

Kish

On 14/09/2011 13:19, Christian Schulte wrote:
> Okay, you got me red-handed here: before 3.7.0 count was in fact not
domain
> consistent for the case
> 	count(x,y,=,z)
> where y is a variable. The pruning for y was actually missing (the values
> for y can only be the values in x provided z>= 1).
>
> So, a bug fix if you wish ;-)
>
> Cheers
> Christian
>
> --
> Christian Schulte, KTH, web.it.kth.se/~cschulte/
>
>
> -----Original Message-----
> From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf
> Of Kish Shen
> Sent: Wednesday, September 14, 2011 2:12 PM
> To: users at gecode.org
> Subject: Re: [gecode-users] Gecode 3.5.0 faster than Gecode 3.7.0?
>
> Hi Christian,
>
> Thanks for your reply!
>
> The documentation for both 3.7.0 and 3.5.0 say that the single value count
> constraint achieves domain consistency. I thought you can't really do
better
> (more pruning) than domain consistency for single constraints, or am I
> mistaken?
>
> Cheers,
>
> Kish
>
> On 14/09/2011 09:35, Christian Schulte wrote:
>> This is most likely due to the count constraint. In Gecode 3.7.0 it
>> tries to do more pruning and that might cause the slow down (and your
>> examples might not necessarily profit from the additional pruning).
>>
>> Cheers
>> Christian
>>
>> --
>> Christian Schulte, KTH, web.it.kth.se/~cschulte/
>>
>> -----Original Message-----
>> From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On
>> Behalf Of Kish Shen
>> Sent: Tuesday, September 13, 2011 6:41 PM
>> To: users at gecode.org
>> Subject: [gecode-users] Gecode 3.5.0 faster than Gecode 3.7.0?
>>
>> Hi,
>>
>> I have just upgrade the ECLiPSe interface to Gecode from Gecode 3.5.0
>> to 3.7.0. As I am currently doing some work on improving the
>> performance of the interface, I have been doing some timings with
>> example programs, and to my surprise, one of the example is running
>> consistently faster with 3.5.0. The run-times are:
>>
>> 3.5.0:        16.34s
>> 3.7.0:        19.99s
>>
>> The only change between these two is the version of Gecode used (plus
>> the changes in the C++ code needed for the upgrade, i.e. the #include
>> for the graph and scheduling modules).
>>
>> As the program is written in ECLiPSe, there is no direct record of the
>> actual Gecode API calls made. The problem is the "roster" example from
>> the ECLiPSe website, modified for use with the Gecode interface. This
>> example is solving a simple rostering problem, and there are a lot of
>> relational constraints posted, plus some boolean expressions, all
>> posted via the MiniModel, and there are also some count contraints
>> (occurrences of one value variant). The search is done in ECLiPSe,
>> i.e. not using the search-engines of Gecode.
>>
>> Is the above information sufficient for even guessing what the slow
>> down might be due to? If not, what additional information might be
needed?
>>
>> Cheers,
>>
>> Kish
>>
>> --
>> This e-mail may contain confidential and privileged material for the
>> sole use of the intended recipient. Any review, use, distribution or
>> disclosure by others is strictly prohibited. If you are not the
>> intended recipient (or authorized to receive for the recipient),
>> please contact the sender by reply e-mail and delete all copies of this
> message.
>> Cisco Systems Limited (Company Number: 02558939), is registered in
>> England and Wales with its registered office at 1 Callaghan Square,
>> Cardiff, South Glamorgan CF10 5BT.
>>
>> _______________________________________________
>> Gecode users mailing list
>> users at gecode.org
>> https://www.gecode.org/mailman/listinfo/gecode-users
>>
>
>
> --
> This e-mail may contain confidential and privileged material for the sole
> use of the intended recipient. Any review, use, distribution or disclosure
> by others is strictly prohibited. If you are not the intended recipient
(or
> authorized to receive for the recipient), please contact the sender by
reply
> e-mail and delete all copies of this message.
> Cisco Systems Limited (Company Number: 02558939), is registered in England
> and Wales with its registered office at 1 Callaghan Square, Cardiff, South
> Glamorgan CF10 5BT.
>
> _______________________________________________
> Gecode users mailing list
> users at gecode.org
> https://www.gecode.org/mailman/listinfo/gecode-users
>


-- 
This e-mail may contain confidential and privileged material for the
sole use of the intended recipient. Any review, use, distribution or
disclosure by others is strictly prohibited. If you are not the intended
recipient (or authorized to receive for the recipient), please contact
the sender by reply e-mail and delete all copies of this message.
Cisco Systems Limited (Company Number: 02558939), is registered in
England and Wales with its registered office at 1 Callaghan Square,
Cardiff, South Glamorgan CF10 5BT.

_______________________________________________
Gecode users mailing list
users at gecode.org
https://www.gecode.org/mailman/listinfo/gecode-users



From kisshen at cisco.com  Tue Sep 20 16:29:37 2011
From: kisshen at cisco.com (Kish Shen)
Date: Tue, 20 Sep 2011 15:29:37 +0100
Subject: [gecode-users] Gecode 3.5.0 faster than Gecode 3.7.0?
In-Reply-To: <00aa01cc778d$06cb69b0$14623d10$@se>
References: <4E6F8786.5000901@cisco.com>	<003901cc72b9$45d98020$d18c8060$@kth.se>	<4E709A26.8060502@cisco.com>	<001a01cc72d8$94728fa0$bd57aee0$@kth.se>
	<4E7867CC.1060603@cisco.com> <00aa01cc778d$06cb69b0$14623d10$@se>
Message-ID: <4E78A351.4040908@cisco.com>

Hi,

20% is when the search is done in ECLiPSe; if the search is moved into 
Gecode (i.e. using Gecode's search engines), the problem is solved about 
40% faster, so there is a corresponding increase in the difference 
between 3.5.0 and 3.7.0 -- still not huge, but the difference is more 
like 35-40% if the search is done in Gecode (and I guess this is the 
number that is more relevant to you).

Cheers,

Kish

On 20/09/2011 13:01, Christian Schulte wrote:
> Hi,
>
> Even though 20% seems to be okay to me, I have added that count now does
> less propagation when used with ICL_VAL or ICL_BND. The default ICL_DEF is
> still domain consistent.
>
> Cheers
> Christian
>
> --
> Christian Schulte, www.ict.kth.se/~cschulte/
>
>
> -----Original Message-----
> From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf
> Of Kish Shen
> Sent: Tuesday, September 20, 2011 12:16 PM
> To: users at gecode.org
> Subject: Re: [gecode-users] Gecode 3.5.0 faster than Gecode 3.7.0?
>
> Hi,
>
> A follow-up: I've found another program (solves the crowded chessboard
> problem, using a "natural" model where each chess piece is modelled with
> a different domain value in a singe board, rather than having a 0/1
> board for each chess pieces). This program uses count with =, and is 20%
> slower in 3.7.0 (compared to 3.5.0).
>
> Since I am getting this slow-down in two different programs, it could
> mean that a count constraint with less than full domain consistency
> could be useful. Does it make sense for Gecode to provide this?
>
> Thanks and cheers,
>
> Kish
>
> On 14/09/2011 13:19, Christian Schulte wrote:
>> Okay, you got me red-handed here: before 3.7.0 count was in fact not
> domain
>> consistent for the case
>> 	count(x,y,=,z)
>> where y is a variable. The pruning for y was actually missing (the values
>> for y can only be the values in x provided z>= 1).
>>
>> So, a bug fix if you wish ;-)
>>
>> Cheers
>> Christian
>>
>> --
>> Christian Schulte, KTH, web.it.kth.se/~cschulte/
>>
>>
>> -----Original Message-----
>> From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf
>> Of Kish Shen
>> Sent: Wednesday, September 14, 2011 2:12 PM
>> To: users at gecode.org
>> Subject: Re: [gecode-users] Gecode 3.5.0 faster than Gecode 3.7.0?
>>
>> Hi Christian,
>>
>> Thanks for your reply!
>>
>> The documentation for both 3.7.0 and 3.5.0 say that the single value count
>> constraint achieves domain consistency. I thought you can't really do
> better
>> (more pruning) than domain consistency for single constraints, or am I
>> mistaken?
>>
>> Cheers,
>>
>> Kish
>>
>> On 14/09/2011 09:35, Christian Schulte wrote:
>>> This is most likely due to the count constraint. In Gecode 3.7.0 it
>>> tries to do more pruning and that might cause the slow down (and your
>>> examples might not necessarily profit from the additional pruning).
>>>
>>> Cheers
>>> Christian
>>>
>>> --
>>> Christian Schulte, KTH, web.it.kth.se/~cschulte/
>>>
>>> -----Original Message-----
>>> From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On
>>> Behalf Of Kish Shen
>>> Sent: Tuesday, September 13, 2011 6:41 PM
>>> To: users at gecode.org
>>> Subject: [gecode-users] Gecode 3.5.0 faster than Gecode 3.7.0?
>>>
>>> Hi,
>>>
>>> I have just upgrade the ECLiPSe interface to Gecode from Gecode 3.5.0
>>> to 3.7.0. As I am currently doing some work on improving the
>>> performance of the interface, I have been doing some timings with
>>> example programs, and to my surprise, one of the example is running
>>> consistently faster with 3.5.0. The run-times are:
>>>
>>> 3.5.0:        16.34s
>>> 3.7.0:        19.99s
>>>
>>> The only change between these two is the version of Gecode used (plus
>>> the changes in the C++ code needed for the upgrade, i.e. the #include
>>> for the graph and scheduling modules).
>>>
>>> As the program is written in ECLiPSe, there is no direct record of the
>>> actual Gecode API calls made. The problem is the "roster" example from
>>> the ECLiPSe website, modified for use with the Gecode interface. This
>>> example is solving a simple rostering problem, and there are a lot of
>>> relational constraints posted, plus some boolean expressions, all
>>> posted via the MiniModel, and there are also some count contraints
>>> (occurrences of one value variant). The search is done in ECLiPSe,
>>> i.e. not using the search-engines of Gecode.
>>>
>>> Is the above information sufficient for even guessing what the slow
>>> down might be due to? If not, what additional information might be
> needed?
>>>
>>> Cheers,
>>>
>>> Kish
>>>
>>> --
>>> This e-mail may contain confidential and privileged material for the
>>> sole use of the intended recipient. Any review, use, distribution or
>>> disclosure by others is strictly prohibited. If you are not the
>>> intended recipient (or authorized to receive for the recipient),
>>> please contact the sender by reply e-mail and delete all copies of this
>> message.
>>> Cisco Systems Limited (Company Number: 02558939), is registered in
>>> England and Wales with its registered office at 1 Callaghan Square,
>>> Cardiff, South Glamorgan CF10 5BT.
>>>
>>> _______________________________________________
>>> Gecode users mailing list
>>> users at gecode.org
>>> https://www.gecode.org/mailman/listinfo/gecode-users
>>>
>>
>>
>> --
>> This e-mail may contain confidential and privileged material for the sole
>> use of the intended recipient. Any review, use, distribution or disclosure
>> by others is strictly prohibited. If you are not the intended recipient
> (or
>> authorized to receive for the recipient), please contact the sender by
> reply
>> e-mail and delete all copies of this message.
>> Cisco Systems Limited (Company Number: 02558939), is registered in England
>> and Wales with its registered office at 1 Callaghan Square, Cardiff, South
>> Glamorgan CF10 5BT.
>>
>> _______________________________________________
>> Gecode users mailing list
>> users at gecode.org
>> https://www.gecode.org/mailman/listinfo/gecode-users
>>
>
>


-- 
This e-mail may contain confidential and privileged material for the
sole use of the intended recipient. Any review, use, distribution or
disclosure by others is strictly prohibited. If you are not the intended
recipient (or authorized to receive for the recipient), please contact
the sender by reply e-mail and delete all copies of this message.
Cisco Systems Limited (Company Number: 02558939), is registered in
England and Wales with its registered office at 1 Callaghan Square,
Cardiff, South Glamorgan CF10 5BT.


From kisshen at cisco.com  Wed Sep 21 18:43:46 2011
From: kisshen at cisco.com (Kish Shen)
Date: Wed, 21 Sep 2011 17:43:46 +0100
Subject: [gecode-users] Difference between using IntVal and IntVar in
	propagators?
Message-ID: <4E7A1442.5000900@cisco.com>

Hi,

Gecode has several propagators with variants where an argument can be an 
IntVar or IntVal. In general, is there a (significant) performance 
advantage in using the IntVal version instead of having an IntVar with a 
singleton domain, if the argument has a known integer value when posting 
the propagator? Can a generalisation even be made, or will this depend 
on the specific propagator?

The reason I ask is that since I am writing an interface to gecode, I do 
not know how the user will call specific propagators, and it is much 
cleaner for me to write the code to call as few version of the 
propagators as possible, instead of trying to specialise for every 
variant of the propagator (IntVal or IntVar), especially if there are 
more than one argument like this, but if this seriously affect 
performance, then I guess it is unavoidable.

Thanks and cheers,

Kish

-- 
This e-mail may contain confidential and privileged material for the
sole use of the intended recipient. Any review, use, distribution or
disclosure by others is strictly prohibited. If you are not the intended
recipient (or authorized to receive for the recipient), please contact
the sender by reply e-mail and delete all copies of this message.
Cisco Systems Limited (Company Number: 02558939), is registered in
England and Wales with its registered office at 1 Callaghan Square,
Cardiff, South Glamorgan CF10 5BT.


From kisshen at cisco.com  Wed Sep 21 20:18:28 2011
From: kisshen at cisco.com (Kish Shen)
Date: Wed, 21 Sep 2011 19:18:28 +0100
Subject: [gecode-users] Difference between using IntVal and IntVar in
 propagators?
In-Reply-To: <4E7A1442.5000900@cisco.com>
References: <4E7A1442.5000900@cisco.com>
Message-ID: <4E7A2A74.3090803@cisco.com>

On 21/09/2011 17:43, Kish Shen wrote:

> IntVar or IntVal. In general, is there a (significant) performance

I meant int, rather than IntVal, i.e. the variants accept an argument 
with type int or IntVar.

Cheers,

Kish

-- 
This e-mail may contain confidential and privileged material for the
sole use of the intended recipient. Any review, use, distribution or
disclosure by others is strictly prohibited. If you are not the intended
recipient (or authorized to receive for the recipient), please contact
the sender by reply e-mail and delete all copies of this message.
Cisco Systems Limited (Company Number: 02558939), is registered in
England and Wales with its registered office at 1 Callaghan Square,
Cardiff, South Glamorgan CF10 5BT.


From cschulte at kth.se  Wed Sep 21 20:41:43 2011
From: cschulte at kth.se (Christian Schulte)
Date: Wed, 21 Sep 2011 20:41:43 +0200
Subject: [gecode-users] Difference between using IntVal and IntVar in
	propagators?
In-Reply-To: <4E7A2A74.3090803@cisco.com>
References: <4E7A1442.5000900@cisco.com> <4E7A2A74.3090803@cisco.com>
Message-ID: <000001cc788e$1ce39db0$56aad910$@kth.se>

Hi Kish,

It is similar to the discussion we had earlier: Gecode always chooses the
best propagator(s) for posting a constraint, so if there is a variant for
int then even posting with an assigned IntVar Gecode will choose that.

Again: posting constraints in Gecode is smart, don't worry!

Cheers
Christian

--
Christian Schulte, KTH, web.it.kth.se/~cschulte/

-----Original Message-----
From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf
Of Kish Shen
Sent: Wednesday, September 21, 2011 8:18 PM
To: users at gecode.org
Subject: Re: [gecode-users] Difference between using IntVal and IntVar in
propagators?

On 21/09/2011 17:43, Kish Shen wrote:

> IntVar or IntVal. In general, is there a (significant) performance

I meant int, rather than IntVal, i.e. the variants accept an argument with
type int or IntVar.

Cheers,

Kish

--
This e-mail may contain confidential and privileged material for the sole
use of the intended recipient. Any review, use, distribution or disclosure
by others is strictly prohibited. If you are not the intended recipient (or
authorized to receive for the recipient), please contact the sender by reply
e-mail and delete all copies of this message.
Cisco Systems Limited (Company Number: 02558939), is registered in England
and Wales with its registered office at 1 Callaghan Square, Cardiff, South
Glamorgan CF10 5BT.

_______________________________________________
Gecode users mailing list
users at gecode.org
https://www.gecode.org/mailman/listinfo/gecode-users



From kisshen at cisco.com  Thu Sep 22 18:34:54 2011
From: kisshen at cisco.com (Kish Shen)
Date: Thu, 22 Sep 2011 17:34:54 +0100
Subject: [gecode-users] documentation for member propagator
Message-ID: <4E7B63AE.7050304@cisco.com>

Hi,

I am in the process of adding support for the new features in 3.7.0 (and 
3.6.0) to the ECLiPSe Gecode interface, and I have some questions and 
comments about the documentation for the member constraint:

In the MPG, the text in the "Membership constraints" section (4.4.2 on 
my copy), says "...for an integer array x..", referring to
member(home, x, y), I think x should be an integer variable array.

I also looked at the reference documentation to try and find what 
IntConLevel is supported for this constraint, and in the specification 
for the functions, there is just IntConLev at the last argument 
position, without a variable name, something like:

void Gecode:member(Home            home,
                    const IntVarArgs & x,
                    IntVar             y,
                    IntConLevel
     	         }

It looks like this is the way the function is written in the source as 
well. I am not familiar with this syntax -- what does it mean, and does 
member support any IntConLevel?

Thanks and cheer,

Kish
	
-- 
This e-mail may contain confidential and privileged material for the
sole use of the intended recipient. Any review, use, distribution or
disclosure by others is strictly prohibited. If you are not the intended
recipient (or authorized to receive for the recipient), please contact
the sender by reply e-mail and delete all copies of this message.
Cisco Systems Limited (Company Number: 02558939), is registered in
England and Wales with its registered office at 1 Callaghan Square,
Cardiff, South Glamorgan CF10 5BT.


From cschulte at kth.se  Thu Sep 22 19:54:14 2011
From: cschulte at kth.se (Christian Schulte)
Date: Thu, 22 Sep 2011 19:54:14 +0200
Subject: [gecode-users] documentation for member propagator
In-Reply-To: <4E7B63AE.7050304@cisco.com>
References: <4E7B63AE.7050304@cisco.com>
Message-ID: <001f01cc7950$a6d58f20$f480ad60$@kth.se>

Hi,

Thanks for the typo, fixed in the trunk. The membership propagator is domain
consistent (the reference doc says that, in fact), check the top of the
page.

The missing argument comes from the fact that doxygen for some reason does
pick up the implementation and the declaration (that's a bug in doxygen). A
missing argument means that it is not used in the implementation.

Christian

--
Christian Schulte, KTH, web.it.kth.se/~cschulte/


-----Original Message-----
From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf
Of Kish Shen
Sent: Thursday, September 22, 2011 6:35 PM
To: users at gecode.org
Subject: [gecode-users] documentation for member propagator

Hi,

I am in the process of adding support for the new features in 3.7.0 (and 
3.6.0) to the ECLiPSe Gecode interface, and I have some questions and 
comments about the documentation for the member constraint:

In the MPG, the text in the "Membership constraints" section (4.4.2 on 
my copy), says "...for an integer array x..", referring to
member(home, x, y), I think x should be an integer variable array.

I also looked at the reference documentation to try and find what 
IntConLevel is supported for this constraint, and in the specification 
for the functions, there is just IntConLev at the last argument 
position, without a variable name, something like:

void Gecode:member(Home            home,
                    const IntVarArgs & x,
                    IntVar             y,
                    IntConLevel
     	         }

It looks like this is the way the function is written in the source as 
well. I am not familiar with this syntax -- what does it mean, and does 
member support any IntConLevel?

Thanks and cheer,

Kish
	
-- 
This e-mail may contain confidential and privileged material for the
sole use of the intended recipient. Any review, use, distribution or
disclosure by others is strictly prohibited. If you are not the intended
recipient (or authorized to receive for the recipient), please contact
the sender by reply e-mail and delete all copies of this message.
Cisco Systems Limited (Company Number: 02558939), is registered in
England and Wales with its registered office at 1 Callaghan Square,
Cardiff, South Glamorgan CF10 5BT.

_______________________________________________
Gecode users mailing list
users at gecode.org
https://www.gecode.org/mailman/listinfo/gecode-users



From kisshen at cisco.com  Fri Sep 23 17:16:11 2011
From: kisshen at cisco.com (Kish Shen)
Date: Fri, 23 Sep 2011 16:16:11 +0100
Subject: [gecode-users] documentation for member propagator
In-Reply-To: <001f01cc7950$a6d58f20$f480ad60$@kth.se>
References: <4E7B63AE.7050304@cisco.com>
	<001f01cc7950$a6d58f20$f480ad60$@kth.se>
Message-ID: <4E7CA2BB.3040303@cisco.com>

On 22/09/2011 18:54, Christian Schulte wrote:

> Thanks for the typo, fixed in the trunk. The membership propagator is domain
> consistent (the reference doc says that, in fact), check the top of the
> page.
>
> The missing argument comes from the fact that doxygen for some reason does
> pick up the implementation and the declaration (that's a bug in doxygen). A
> missing argument means that it is not used in the implementation.
>

Hi Christian,

Thanks for your reply.

I was scanning for the ICL_.. string, so missed the mention of domain 
consistent part. Am  correct that for the other constraints, the 
function calls do have an IntConLev argument, even if the constraint 
supports only one consistency level (such as the single variable count 
constraints before your recent change), or if the consistency level is 
not one of the standard one (such as the schduling constraints). Is 
there any reason why the argument is not there for the member constraint 
(I assume the argument is also a dummy argument for the other 
constraints that has only one consistency level)?

Cheers,

Kish


-- 
This e-mail may contain confidential and privileged material for the
sole use of the intended recipient. Any review, use, distribution or
disclosure by others is strictly prohibited. If you are not the intended
recipient (or authorized to receive for the recipient), please contact
the sender by reply e-mail and delete all copies of this message.
Cisco Systems Limited (Company Number: 02558939), is registered in
England and Wales with its registered office at 1 Callaghan Square,
Cardiff, South Glamorgan CF10 5BT.


From denys.duchier at univ-orleans.fr  Fri Sep 23 22:57:59 2011
From: denys.duchier at univ-orleans.fr (Denys Duchier)
Date: Fri, 23 Sep 2011 22:57:59 +0200
Subject: [gecode-users] [ANN] gecode/python v0.17
Message-ID: <87ty83kmco.fsf@univ-orleans.fr>

I am pleased to announce release 0.17 of gecode-python, the simplified
gecode bindings for python.

WHAT'S NEW:

- installation is MUCH easier: cython is no longer required (all files
  have been pre-generated)
- gecode-python now works with python 2.6, 2.7, and 3.2

get it either from pypi.python.org or from the lp:gecode-python branch
on launchpad.net.

INSTALL:

- from pypi using easy_install (provided by setuptools):

        sudo -E easy_install gecode-python
  or    easy_install gecode-python --prefix ~

  if you are upgrading a previous install:

        sudo -E easy_install -U gecode-python
  or    easy_install -U gecode-python --prefix ~

- from pypi using the tarball:

        tar zxf gecode-python-0.17.tar.gz
        cd gecode-python-0.17
        sudo -E python setup.py install
  or    python setup.py install --prefix ~

- using the launchpad branch:

        bzr branch lp:gecode-python
        cd gecode-python
        sudo -E python setup.py install
  or    python setup.py install --prefix ~

if you are installing using "--prefix ~" I recommend that:
1. you create directory ~/.local if it does not already exist
2. you create a symbolic link:
        ~/.local/lib   -> ~/lib
   or   ~/.local/lib64 -> ~/lib64
   depending on whether you have a ~/lib or a ~/lib64 directory in your
   home after install.
this will allow python to find your locally installed packages without
requiring you to fiddle with environment variable PYTHONPATH.

Cheers,

--Denys


From cschulte at kth.se  Mon Sep 26 12:50:22 2011
From: cschulte at kth.se (Christian Schulte)
Date: Mon, 26 Sep 2011 12:50:22 +0200
Subject: [gecode-users] documentation for member propagator
In-Reply-To: <4E7CA2BB.3040303@cisco.com>
References: <4E7B63AE.7050304@cisco.com>	<001f01cc7950$a6d58f20$f480ad60$@kth.se>
	<4E7CA2BB.3040303@cisco.com>
Message-ID: <009b01cc7c3a$17957540$46c05fc0$@se>

Right, all constraint post functions for integer constraints have the
optional IntConLevel argument as last argument even though only one
consistency level might be supported.

Christian

--
Christian Schulte, www.ict.kth.se/~cschulte/


-----Original Message-----
From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf
Of Kish Shen
Sent: Friday, September 23, 2011 5:16 PM
To: users at gecode.org
Subject: Re: [gecode-users] documentation for member propagator

On 22/09/2011 18:54, Christian Schulte wrote:

> Thanks for the typo, fixed in the trunk. The membership propagator is
domain
> consistent (the reference doc says that, in fact), check the top of the
> page.
>
> The missing argument comes from the fact that doxygen for some reason does
> pick up the implementation and the declaration (that's a bug in doxygen).
A
> missing argument means that it is not used in the implementation.
>

Hi Christian,

Thanks for your reply.

I was scanning for the ICL_.. string, so missed the mention of domain 
consistent part. Am  correct that for the other constraints, the 
function calls do have an IntConLev argument, even if the constraint 
supports only one consistency level (such as the single variable count 
constraints before your recent change), or if the consistency level is 
not one of the standard one (such as the schduling constraints). Is 
there any reason why the argument is not there for the member constraint 
(I assume the argument is also a dummy argument for the other 
constraints that has only one consistency level)?

Cheers,

Kish


-- 
This e-mail may contain confidential and privileged material for the
sole use of the intended recipient. Any review, use, distribution or
disclosure by others is strictly prohibited. If you are not the intended
recipient (or authorized to receive for the recipient), please contact
the sender by reply e-mail and delete all copies of this message.
Cisco Systems Limited (Company Number: 02558939), is registered in
England and Wales with its registered office at 1 Callaghan Square,
Cardiff, South Glamorgan CF10 5BT.

_______________________________________________
Gecode users mailing list
users at gecode.org
https://www.gecode.org/mailman/listinfo/gecode-users



From kisshen at cisco.com  Mon Sep 26 17:42:38 2011
From: kisshen at cisco.com (Kish Shen)
Date: Mon, 26 Sep 2011 16:42:38 +0100
Subject: [gecode-users] documentation for member propagator
In-Reply-To: <009b01cc7c3a$17957540$46c05fc0$@se>
References: <4E7B63AE.7050304@cisco.com>	<001f01cc7950$a6d58f20$f480ad60$@kth.se>
	<4E7CA2BB.3040303@cisco.com> <009b01cc7c3a$17957540$46c05fc0$@se>
Message-ID: <4E809D6E.6070006@cisco.com>

On 26/09/2011 11:50, Christian Schulte wrote:
> Right, all constraint post functions for integer constraints have the
> optional IntConLevel argument as last argument even though only one
> consistency level might be supported.
>

I am suggesting it might be a good idea to always describe the IntConLev 
argument in the reference documentation. At the moment there is the 
"dummy" argument for member, and it would be nice to add IntConLev icl = 
ICL_DEF as there are in other constraints, and to say what value is 
supported for icl, even if it is only one. In some cases, such as for 
some of the element constraints, and for precede, there is a IntCOnLev = 
ICL_DEF, but no description of the values available. I have in general 
assumed that this means that the constraint does not achieve any of the 
defined propagation level, as I think you told me for the scheduling 
constraints, but I am not so sure this is the always the case: for 
element, some of the variants do specify the IntConLev, and ICL_BND and 
ICL_DOM are available, so does these levels also apply to the element 
where IntConLev is not described?

For precede, the Global Constraint Catalog specify a domain consistent 
filtering for the constraints (int_value_precede and 
int_value_precede_chain), and I suspect this is what the Gecode version 
of the constraint achieves, is this the case?

Cheers,

-- 
This e-mail may contain confidential and privileged material for the
sole use of the intended recipient. Any review, use, distribution or
disclosure by others is strictly prohibited. If you are not the intended
recipient (or authorized to receive for the recipient), please contact
the sender by reply e-mail and delete all copies of this message.
Cisco Systems Limited (Company Number: 02558939), is registered in
England and Wales with its registered office at 1 Callaghan Square,
Cardiff, South Glamorgan CF10 5BT.


From kisshen at cisco.com  Mon Sep 26 18:09:05 2011
From: kisshen at cisco.com (Kish Shen)
Date: Mon, 26 Sep 2011 17:09:05 +0100
Subject: [gecode-users] Some more documentation comments
Message-ID: <4E80A3A1.204@cisco.com>

Hi,

In the MPG description for the count constraints, counts is listed as 
one of the GCCAT equivalent for the first variant described (along with 
count, exactly, atleast, atmost). However, as far as I can tell, counts 
accepts a collection of values, rather than a single value (as in count, 
exactly etc.), so it should be listed with the second variant of count 
described -- i.e. the one where y is an integer set. Is this correct?

A secondary point is the the listing of the constraint is the same in 
both variants, even though some of the arguments are of different type:

count(home, x, y, IRT_EQ, z)

This seems to be quite common in the MPG, and I often have difficulty 
figuring out what the arguments are -- I need to look quite carefully at 
the text.

Do you think it is a good idea to use an informal convention to 
distinguish different types of arguments? The simplest one I can think 
of is to add an 's' if the argument is not a simple element that has a 
single value, i.e. if it is an array or a set, so  for the first count 
variant, something like

count(home, xs, y, IRT_EQ, z)

and the second variant

count(home, xs, ys, IRT_EQ, z)

This can also be extended further so that names starting with certain 
letters are of certain types, e.g. x, y, z for IntVar, and c for int (c 
for constant), or something like i,j,k if there are more than one 
integer argument (and I guess some other letters for sets).

Cheers,

Kish

-- 
This e-mail may contain confidential and privileged material for the
sole use of the intended recipient. Any review, use, distribution or
disclosure by others is strictly prohibited. If you are not the intended
recipient (or authorized to receive for the recipient), please contact
the sender by reply e-mail and delete all copies of this message.
Cisco Systems Limited (Company Number: 02558939), is registered in
England and Wales with its registered office at 1 Callaghan Square,
Cardiff, South Glamorgan CF10 5BT.


From cschulte at kth.se  Mon Sep 26 20:13:42 2011
From: cschulte at kth.se (Christian Schulte)
Date: Mon, 26 Sep 2011 20:13:42 +0200
Subject: [gecode-users] documentation for member propagator
In-Reply-To: <4E809D6E.6070006@cisco.com>
References: <4E7B63AE.7050304@cisco.com>	<001f01cc7950$a6d58f20$f480ad60$@kth.se>	<4E7CA2BB.3040303@cisco.com>
	<009b01cc7c3a$17957540$46c05fc0$@se> <4E809D6E.6070006@cisco.com>
Message-ID: <006501cc7c78$06429b90$12c7d2b0$@kth.se>

As I said before, the argument is there. Always. But doxygen sometimes does
not take the declaration (where the optional argument is and must be there)
but the definition (where the optional argument cannot be there) for
generating the docs.

Precede for integer is domain consistent in Gecode and for the chain variant
it is not (as it decomposes into the integer variant).

Cheers
Christian

--
Christian Schulte, KTH, web.it.kth.se/~cschulte/


-----Original Message-----
From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf
Of Kish Shen
Sent: Monday, September 26, 2011 5:43 PM
To: users at gecode.org
Subject: Re: [gecode-users] documentation for member propagator

On 26/09/2011 11:50, Christian Schulte wrote:
> Right, all constraint post functions for integer constraints have the 
> optional IntConLevel argument as last argument even though only one 
> consistency level might be supported.
>

I am suggesting it might be a good idea to always describe the IntConLev
argument in the reference documentation. At the moment there is the "dummy"
argument for member, and it would be nice to add IntConLev icl = ICL_DEF as
there are in other constraints, and to say what value is supported for icl,
even if it is only one. In some cases, such as for some of the element
constraints, and for precede, there is a IntCOnLev = ICL_DEF, but no
description of the values available. I have in general assumed that this
means that the constraint does not achieve any of the defined propagation
level, as I think you told me for the scheduling constraints, but I am not
so sure this is the always the case: for element, some of the variants do
specify the IntConLev, and ICL_BND and ICL_DOM are available, so does these
levels also apply to the element where IntConLev is not described?

For precede, the Global Constraint Catalog specify a domain consistent
filtering for the constraints (int_value_precede and
int_value_precede_chain), and I suspect this is what the Gecode version of
the constraint achieves, is this the case?

Cheers,

--
This e-mail may contain confidential and privileged material for the sole
use of the intended recipient. Any review, use, distribution or disclosure
by others is strictly prohibited. If you are not the intended recipient (or
authorized to receive for the recipient), please contact the sender by reply
e-mail and delete all copies of this message.
Cisco Systems Limited (Company Number: 02558939), is registered in England
and Wales with its registered office at 1 Callaghan Square, Cardiff, South
Glamorgan CF10 5BT.

_______________________________________________
Gecode users mailing list
users at gecode.org
https://www.gecode.org/mailman/listinfo/gecode-users



From cschulte at kth.se  Mon Sep 26 20:25:55 2011
From: cschulte at kth.se (Christian Schulte)
Date: Mon, 26 Sep 2011 20:25:55 +0200
Subject: [gecode-users] Some more documentation comments
In-Reply-To: <4E80A3A1.204@cisco.com>
References: <4E80A3A1.204@cisco.com>
Message-ID: <006901cc7c79$bb5ad140$321073c0$@kth.se>

Hi,

Good point about counts, the GCCAT has overlapping entries (here the
difference between counts and among is essentially that for one a set is
represented as a list and otherwise as a set...) where it is not entirely
clear to me which is which and why they actually deserve different names ;-)

I am not so sure about name mangling in the documentation, I rather like the
names short. Also, not all type variants are in fact given as a code
snippet. If I need to see the argument types I go to the reference doc which
has the full type info.

Cheers
Christian

--
Christian Schulte, KTH, web.it.kth.se/~cschulte/


-----Original Message-----
From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf
Of Kish Shen
Sent: Monday, September 26, 2011 6:09 PM
To: users at gecode.org
Subject: [gecode-users] Some more documentation comments

Hi,

In the MPG description for the count constraints, counts is listed as one of
the GCCAT equivalent for the first variant described (along with count,
exactly, atleast, atmost). However, as far as I can tell, counts accepts a
collection of values, rather than a single value (as in count, exactly
etc.), so it should be listed with the second variant of count described --
i.e. the one where y is an integer set. Is this correct?

A secondary point is the the listing of the constraint is the same in both
variants, even though some of the arguments are of different type:

count(home, x, y, IRT_EQ, z)

This seems to be quite common in the MPG, and I often have difficulty
figuring out what the arguments are -- I need to look quite carefully at the
text.

Do you think it is a good idea to use an informal convention to distinguish
different types of arguments? The simplest one I can think of is to add an
's' if the argument is not a simple element that has a single value, i.e. if
it is an array or a set, so  for the first count variant, something like

count(home, xs, y, IRT_EQ, z)

and the second variant

count(home, xs, ys, IRT_EQ, z)

This can also be extended further so that names starting with certain
letters are of certain types, e.g. x, y, z for IntVar, and c for int (c for
constant), or something like i,j,k if there are more than one integer
argument (and I guess some other letters for sets).

Cheers,

Kish

--
This e-mail may contain confidential and privileged material for the sole
use of the intended recipient. Any review, use, distribution or disclosure
by others is strictly prohibited. If you are not the intended recipient (or
authorized to receive for the recipient), please contact the sender by reply
e-mail and delete all copies of this message.
Cisco Systems Limited (Company Number: 02558939), is registered in England
and Wales with its registered office at 1 Callaghan Square, Cardiff, South
Glamorgan CF10 5BT.

_______________________________________________
Gecode users mailing list
users at gecode.org
https://www.gecode.org/mailman/listinfo/gecode-users



From kisshen at cisco.com  Mon Sep 26 20:37:39 2011
From: kisshen at cisco.com (Kish Shen)
Date: Mon, 26 Sep 2011 19:37:39 +0100
Subject: [gecode-users] documentation for member propagator
In-Reply-To: <006501cc7c78$06429b90$12c7d2b0$@kth.se>
References: <4E7B63AE.7050304@cisco.com>	<001f01cc7950$a6d58f20$f480ad60$@kth.se>	<4E7CA2BB.3040303@cisco.com>
	<009b01cc7c3a$17957540$46c05fc0$@se> <4E809D6E.6070006@cisco.com>
	<006501cc7c78$06429b90$12c7d2b0$@kth.se>
Message-ID: <4E80C673.1030307@cisco.com>

Hi Christian,

On 26/09/2011 19:13, Christian Schulte wrote:
> As I said before, the argument is there. Always. But doxygen sometimes does
> not take the declaration (where the optional argument is and must be there)
> but the definition (where the optional argument cannot be there) for
> generating the docs.

I understand that doxygen may sometimes miss arguments. I assume this 
should be considered a bug, and if possible (and if you know how the bug 
behaves), avoid the bug by avoiding the situation that will cause the 
argument to be missed.

For the case of element (and also precede), are you saying that doxygen 
has a problem that prevents it from picking up the description of some 
of the variables? Here is one example of element in the reference manual 
that does not describe icl (even though it is listed in the 
specification of the procedure):

void Gecode::element	(	Home 	home,
IntSharedArray 	n,
IntVar 	x0,
BoolVar 	x1,
IntConLevel 	icl = ICL_DEF	
)			
Post propagator for .

Throws an exception of type Int::OutOfLimits, if the integers in n 
exceed the limits in Int::Limits.

===================
and here is an description that does give information on icl:

void Gecode::element	(	Home 	home,
const IntVarArgs & 	x,
IntVar 	y0,
IntVar 	y1,
IntConLevel 	icl = ICL_DEF	
)			
Post propagator for .

Supports both bounds (icl = ICL_BND) and domain consistency (icl = 
ICL_DOM, default).

==============

I don't know doxygen at all, but is the text "Supports both bounds...." 
in the source for both of these, and a bug in doxygen is preventing the 
description from being generated in the first case? (I am assuming that 
both versions supports ICL_BND and ICL_DOM)

Cheers,

Kish

-- 
This e-mail may contain confidential and privileged material for the
sole use of the intended recipient. Any review, use, distribution or
disclosure by others is strictly prohibited. If you are not the intended
recipient (or authorized to receive for the recipient), please contact
the sender by reply e-mail and delete all copies of this message.
Cisco Systems Limited (Company Number: 02558939), is registered in
England and Wales with its registered office at 1 Callaghan Square,
Cardiff, South Glamorgan CF10 5BT.


From texitoi+news at texitoi.eu  Mon Sep 26 20:32:09 2011
From: texitoi+news at texitoi.eu (TeXitoi)
Date: 26 Sep 2011 20:32:09 +0200
Subject: [gecode-users] Problems with some REG and some suggestions
Message-ID: <87sjnj2lzq.fsf@epiano.texitoi.eu>

Hi,

First, Thanks for you're very good CP library: I enjoy using it.

I have see 1 "bug" and have identified some missing features.

First, I have poblems when I try to generate REG of the form
  REG r = *a + a(1000,1000);
It takes a lot of RAM.  Here is a main function that show the problem:

#include <gecode/int.hh>
#include <gecode/search.hh>
#include <gecode/minimodel.hh>

using namespace Gecode;
using namespace std;

int main(void)
{
        REG any_l = REG(0) | REG(1);
        cout << "Generating '.{1000}'..." << flush;
        REG bigReg_l = any_l(1000,1000);
        cout << " done." << endl;
        cout << "Generating DFA(.{1000})..." << flush;
        DFA dfa_l(bigReg_l);//OK
        cout << " done." << endl;
        cout << "Generating '.{1000}.{1000}'..." << flush;
        REG veryBigReg_l = bigReg_l + bigReg_l;
        cout << " done." << endl;
        cout << "Generating DFA(.{1000}.{1000})..." << flush;
        dfa_l = DFA(veryBigReg_l);//OK
        cout << " done." << endl;
        cout << "Generating '.{1000}.*'..." << flush;
        veryBigReg_l = bigReg_l + *any_l;
        cout << " done." << endl;
        cout << "Generating DFA(.{1000}.*)..." << flush;
        dfa_l = DFA(veryBigReg_l);//OK
        cout << " done." << endl;
        cout << "Generating '.*.{1000}'..." << flush;
        veryBigReg_l = *any_l + bigReg_l;
        cout << " done." << endl;
        cout << "Generating DFA(.*.{1000})..." << flush;
        dfa_l = DFA(veryBigReg_l);//takes lots of RAM...
        cout << " done." << endl;
}

Then, it could be great to have different IntConLevel for the sequence
constraint.  In my model, the filtering does not help and takes time, so
I post a count constraint for each interval.  It can be useful to have
that with IntConLevel = ICL_VAL. And with IntConLevel = ICL_DOM, the
extensional version (which is exponential).

Finally, DFA operations can be very useful : union, intersection,
concatenation, star and opposite.  I already coded intersection and
opposite for my needs (I can show them if you want, but the
implementation is quite naive).

Again, thanks a lot for Gecode!

-- 
Guillaume Pinot                               http://www.texitoi.eu

? Il semble que la perfection soit atteinte non quand il n'y a plus
rien ? ajouter, mais quand il n'y a plus rien ? retrancher. ?
                      -- Antoine de Saint-Exup?ry, Terre des hommes

()  ASCII ribbon campaign      -- Against HTML e-mail
/\  http://www.asciiribbon.org -- Against proprietary attachments



From cschulte at kth.se  Mon Sep 26 20:46:34 2011
From: cschulte at kth.se (Christian Schulte)
Date: Mon, 26 Sep 2011 20:46:34 +0200
Subject: [gecode-users] documentation for member propagator
In-Reply-To: <4E80C673.1030307@cisco.com>
References: <4E7B63AE.7050304@cisco.com>	<001f01cc7950$a6d58f20$f480ad60$@kth.se>	<4E7CA2BB.3040303@cisco.com>	<009b01cc7c3a$17957540$46c05fc0$@se>
	<4E809D6E.6070006@cisco.com>	<006501cc7c78$06429b90$12c7d2b0$@kth.se>
	<4E80C673.1030307@cisco.com>
Message-ID: <007001cc7c7c$9dac5e90$d9051bb0$@kth.se>

Ah, it looks that I did not understand your original email. I think MPG says
somewhere that if there is nothing said about propagation strength it is
domain consistent. It might even be true ;-)

But I think you are right that we should say it in the reference docs what
the propagators achieve and in many places we do. I'll go through the ref
docs and fix it for the next release.

Cheers
Christian

--
Christian Schulte, KTH, web.it.kth.se/~cschulte/


-----Original Message-----
From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf
Of Kish Shen
Sent: Monday, September 26, 2011 8:38 PM
To: users at gecode.org
Subject: Re: [gecode-users] documentation for member propagator

Hi Christian,

On 26/09/2011 19:13, Christian Schulte wrote:
> As I said before, the argument is there. Always. But doxygen sometimes 
> does not take the declaration (where the optional argument is and must 
> be there) but the definition (where the optional argument cannot be 
> there) for generating the docs.

I understand that doxygen may sometimes miss arguments. I assume this should
be considered a bug, and if possible (and if you know how the bug behaves),
avoid the bug by avoiding the situation that will cause the argument to be
missed.

For the case of element (and also precede), are you saying that doxygen has
a problem that prevents it from picking up the description of some of the
variables? Here is one example of element in the reference manual that does
not describe icl (even though it is listed in the specification of the
procedure):

void Gecode::element	(	Home 	home,
IntSharedArray 	n,
IntVar 	x0,
BoolVar 	x1,
IntConLevel 	icl = ICL_DEF	
)			
Post propagator for .

Throws an exception of type Int::OutOfLimits, if the integers in n exceed
the limits in Int::Limits.

===================
and here is an description that does give information on icl:

void Gecode::element	(	Home 	home,
const IntVarArgs & 	x,
IntVar 	y0,
IntVar 	y1,
IntConLevel 	icl = ICL_DEF	
)			
Post propagator for .

Supports both bounds (icl = ICL_BND) and domain consistency (icl = ICL_DOM,
default).

==============

I don't know doxygen at all, but is the text "Supports both bounds...." 
in the source for both of these, and a bug in doxygen is preventing the
description from being generated in the first case? (I am assuming that both
versions supports ICL_BND and ICL_DOM)

Cheers,

Kish

--
This e-mail may contain confidential and privileged material for the sole
use of the intended recipient. Any review, use, distribution or disclosure
by others is strictly prohibited. If you are not the intended recipient (or
authorized to receive for the recipient), please contact the sender by reply
e-mail and delete all copies of this message.
Cisco Systems Limited (Company Number: 02558939), is registered in England
and Wales with its registered office at 1 Callaghan Square, Cardiff, South
Glamorgan CF10 5BT.

_______________________________________________
Gecode users mailing list
users at gecode.org
https://www.gecode.org/mailman/listinfo/gecode-users



From kisshen at cisco.com  Mon Sep 26 21:10:38 2011
From: kisshen at cisco.com (Kish Shen)
Date: Mon, 26 Sep 2011 20:10:38 +0100
Subject: [gecode-users] Some more documentation comments
In-Reply-To: <006901cc7c79$bb5ad140$321073c0$@kth.se>
References: <4E80A3A1.204@cisco.com> <006901cc7c79$bb5ad140$321073c0$@kth.se>
Message-ID: <4E80CE2E.2020104@cisco.com>

Hi Christian,

On 26/09/2011 19:25, Christian Schulte wrote:
> Hi,
>
> Good point about counts, the GCCAT has overlapping entries (here the
> difference between counts and among is essentially that for one a set is
> represented as a list and otherwise as a set...) where it is not entirely
> clear to me which is which and why they actually deserve different names ;-)
>

I am not sure I understand. From what I can see, among_var allow
Values to be a collection of domain variables (rather than just a 
collection of integers), and NVAR (the count) to also be a domain 
variable, and both among and among_var is defined for the = relation 
only, plus minor differences such as the order of the arguments. counts 
seem to me to correspond exactly to the Gecode count that takes an 
IntSet. [Admittedly I am not very good at reading such specifications, 
so maybe I missed some important point]

> I am not so sure about name mangling in the documentation, I rather like the
> names short. Also, not all type variants are in fact given as a code
> snippet. If I need to see the argument types I go to the reference doc which
> has the full type info.

I understand that you might prefer short names, but I would say: a) 
adding an 's' does not really make the name much longer, and b) in the 
tutorial, the purpose of the text is probably not just to give a short 
specification, but to help the user understand the specific version of 
the constraint, and I personally feel longer names is appropriate here.

To me at least, it is difficult to pick out the specific variant with 
the right type, as I am not familiar with the gecode source for these 
constraints, and many of these constraints have the same name and number 
of arguments, differing only in the type of some of them, and to me at 
least, adding s for names of arrays (and possibly sets) would be a great 
help.

Cheers,

Kish



-- 
This e-mail may contain confidential and privileged material for the
sole use of the intended recipient. Any review, use, distribution or
disclosure by others is strictly prohibited. If you are not the intended
recipient (or authorized to receive for the recipient), please contact
the sender by reply e-mail and delete all copies of this message.
Cisco Systems Limited (Company Number: 02558939), is registered in
England and Wales with its registered office at 1 Callaghan Square,
Cardiff, South Glamorgan CF10 5BT.


From cschulte at kth.se  Mon Sep 26 21:42:41 2011
From: cschulte at kth.se (Christian Schulte)
Date: Mon, 26 Sep 2011 21:42:41 +0200
Subject: [gecode-users] Problems with some REG and some suggestions
In-Reply-To: <87sjnj2lzq.fsf@epiano.texitoi.eu>
References: <87sjnj2lzq.fsf@epiano.texitoi.eu>
Message-ID: <008601cc7c84$749e4b00$5ddae100$@kth.se>

Hi,

Great that you like Gecode.

Unfortunately there is very little that we can do about 1: the algorithm we
use for turning a regexp into a DFA actually uses that much memory (and it
is not even na?ve). Remember: you are creating a DFA with 1000 states
_after_ minimization. The intermediate DFA that is created has millions of
states (any conversion of a regexp directly to a DFA or  via a NFA can show
this behavior as the DFA that is constructed might be exponentially larger
than the regexp/NFA). And you artfully picked a pretty bad example ;-)

Maybe there are better algorithms that combine DFA construction with
minimization to deal with the DFAs but for most cases it works fine for
Gecode...

Is your regexp related to a real example or did you want to torture Gecode
;-)

I never thought about operations on DFAs as I thought one would use regexps
anyway. The only hard part is in fact intersection, the rest is very simple.
What do you need them for?

Best
Christian

--
Christian Schulte, KTH, web.it.kth.se/~cschulte/


-----Original Message-----
From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf
Of TeXitoi
Sent: Monday, September 26, 2011 8:32 PM
To: users at gecode.org
Subject: [gecode-users] Problems with some REG and some suggestions

Hi,

First, Thanks for you're very good CP library: I enjoy using it.

I have see 1 "bug" and have identified some missing features.

First, I have poblems when I try to generate REG of the form
  REG r = *a + a(1000,1000);
It takes a lot of RAM.  Here is a main function that show the problem:

#include <gecode/int.hh>
#include <gecode/search.hh>
#include <gecode/minimodel.hh>

using namespace Gecode;
using namespace std;

int main(void)
{
        REG any_l = REG(0) | REG(1);
        cout << "Generating '.{1000}'..." << flush;
        REG bigReg_l = any_l(1000,1000);
        cout << " done." << endl;
        cout << "Generating DFA(.{1000})..." << flush;
        DFA dfa_l(bigReg_l);//OK
        cout << " done." << endl;
        cout << "Generating '.{1000}.{1000}'..." << flush;
        REG veryBigReg_l = bigReg_l + bigReg_l;
        cout << " done." << endl;
        cout << "Generating DFA(.{1000}.{1000})..." << flush;
        dfa_l = DFA(veryBigReg_l);//OK
        cout << " done." << endl;
        cout << "Generating '.{1000}.*'..." << flush;
        veryBigReg_l = bigReg_l + *any_l;
        cout << " done." << endl;
        cout << "Generating DFA(.{1000}.*)..." << flush;
        dfa_l = DFA(veryBigReg_l);//OK
        cout << " done." << endl;
        cout << "Generating '.*.{1000}'..." << flush;
        veryBigReg_l = *any_l + bigReg_l;
        cout << " done." << endl;
        cout << "Generating DFA(.*.{1000})..." << flush;
        dfa_l = DFA(veryBigReg_l);//takes lots of RAM...
        cout << " done." << endl;
}

Then, it could be great to have different IntConLevel for the sequence
constraint.  In my model, the filtering does not help and takes time, so I
post a count constraint for each interval.  It can be useful to have that
with IntConLevel = ICL_VAL. And with IntConLevel = ICL_DOM, the extensional
version (which is exponential).

Finally, DFA operations can be very useful : union, intersection,
concatenation, star and opposite.  I already coded intersection and opposite
for my needs (I can show them if you want, but the implementation is quite
naive).

Again, thanks a lot for Gecode!

-- 
Guillaume Pinot                               http://www.texitoi.eu

? Il semble que la perfection soit atteinte non quand il n'y a plus rien ?
ajouter, mais quand il n'y a plus rien ? retrancher. ?
                      -- Antoine de Saint-Exup?ry, Terre des hommes

()  ASCII ribbon campaign      -- Against HTML e-mail
/\  http://www.asciiribbon.org -- Against proprietary attachments


_______________________________________________
Gecode users mailing list
users at gecode.org
https://www.gecode.org/mailman/listinfo/gecode-users



From texitoi+news at texitoi.eu  Tue Sep 27 11:43:58 2011
From: texitoi+news at texitoi.eu (TeXitoi)
Date: 27 Sep 2011 11:43:58 +0200
Subject: [gecode-users] Problems with some REG and some suggestions
References: <87sjnj2lzq.fsf@epiano.texitoi.eu>
	<008601cc7c84$749e4b00$5ddae100$@kth.se>
Message-ID: <87ehz22uch.fsf@epiano.texitoi.eu>

"Christian Schulte" <cschulte at kth.se> writes:

> Maybe there are better algorithms that combine DFA construction with
> minimization to deal with the DFAs but for most cases it works fine for
> Gecode...

OK

> Is your regexp related to a real example or did you want to torture Gecode
> ;-)

I work on about 400 integer variables (about 15 months), and I have
regex that are applied on different intervals (year, semester, month,
week...).  To improve the performances, I would like to combine some
of the constraints on a unique DFA. So, the idea I had was generating
a regex that affect only a period but that have the length of my
problem:
  - first month : myReg + any(nbDaysIn14Month,nbDaysIn14Month)
  - second month : any(nbDaysIn1Month,nbDaysIn1Month) + myReg +
        any(nbDaysIn13Month,nbDaysIn13Month)
  - ...
  - first semester : ...
  - ...
and then I compute the intersection of the DFA.

> I never thought about operations on DFAs as I thought one would use regexps
> anyway. The only hard part is in fact intersection, the rest is very simple.
> What do you need them for?

Naive intersection is quite simple because we can easily generate a
DFA, and then, Gecode minimizes it.  But an effective implementation
may be difficult.

I use inverse (giving the alphabet) a lot because sometime it is
easier to write the regex of the forbidden pattern than the allowed
one.  As a simple example, I have this kind of forbidden pattern:
 0110 (on a subsequence of 4 variables) which is very simple to write
using the inverse:
  inverse(DFA(REG(0)+REG(1)+REG(1)+REG(0)), alphabet)
but much more difficult to write directly.

I have pattern rules of the type "this pattern or that pattern". Here,
the union is useful, especially when one pattern is easier to write
with an inverse (else I can do REG r = firstPattern | secondPattern).

I can do what I have explain earlier using concatenation and
intersection of DFA (here, "+" is the concatenation of DFA):
  - first month: intersection(DFA(myReg), DFA(any(nbDaysIn1Month,
       nbDaysIn1Month))) + DFA(*any)
  - second month: DFA(any(nbDaysIn1Month,nbDaysIn1Month)) + 
        intersection(DFA(myReg,DFA(any(nbDaysIn1Month,nbDaysIn1Month)))) +
        DFA(*any)
  - ...

But maybe you have a better solution for the special problem I have
now: I have at least n_i "1" on each month_i, exactly m_j "1" on each
semester_j, and minimum one "1" on a slidding horizon of 7, and a
minimum of two "1" on a slidding horizon of 11.  The problem I have is
when there is a lot of possibilities for the first semester, but none
for the second (because of the 4 constraints, not because directly of
one of them), but the propagation do not detect the infeasibility of
the second semester. Of course, I cannot solve each semester
separatedly because there is pattern constraint that overlap.  For the
moment, I have a variable that "count" the "1" on each month, I use
rel to constraint these variables according to my data for the month
and the semester constraints, and I use sequence (in reality a count
for each interval of length 11, and an extensional for 1 on 7, which
is much faster than sequence) for the slidding constraints.  I also
have extensional version of these constraints.  The idea was to
combine the DFA to detect directly the infeasability.

I hope I am understandable.  Thanks for your attention.

-- 
Guillaume Pinot                               http://www.texitoi.eu

? Il semble que la perfection soit atteinte non quand il n'y a plus
rien ? ajouter, mais quand il n'y a plus rien ? retrancher. ?
                      -- Antoine de Saint-Exup?ry, Terre des hommes

()  ASCII ribbon campaign      -- Against HTML e-mail
/\  http://www.asciiribbon.org -- Against proprietary attachments



From kisshen at cisco.com  Tue Sep 27 18:30:19 2011
From: kisshen at cisco.com (Kish Shen)
Date: Tue, 27 Sep 2011 17:30:19 +0100
Subject: [gecode-users] path constraint with a single node
Message-ID: <4E81FA1B.7060407@cisco.com>

Hi,

I am doing some tests with the new constraints I have just added to the 
ECLiPSe gecode interface, and the path constraint fails when there is 
only one node -- should this succeed, with the start and end nodes both 
set to 0, and the successor node for node 0 (the only node) set to 1?

(with the circuit constraint with 1 node, the constrain succeeds with 
the successor of node 0 set to 0)

Cheers,

Kish

-- 
This e-mail may contain confidential and privileged material for the
sole use of the intended recipient. Any review, use, distribution or
disclosure by others is strictly prohibited. If you are not the intended
recipient (or authorized to receive for the recipient), please contact
the sender by reply e-mail and delete all copies of this message.
Cisco Systems Limited (Company Number: 02558939), is registered in
England and Wales with its registered office at 1 Callaghan Square,
Cardiff, South Glamorgan CF10 5BT.


From kisshen at cisco.com  Tue Sep 27 19:14:38 2011
From: kisshen at cisco.com (Kish Shen)
Date: Tue, 27 Sep 2011 18:14:38 +0100
Subject: [gecode-users] path constraint with a single node
In-Reply-To: <4E81FA1B.7060407@cisco.com>
References: <4E81FA1B.7060407@cisco.com>
Message-ID: <4E82047E.8010803@cisco.com>

Hi,

Sorry, I should have checked this more before posting -- the constraint 
is failing because of some checking code I had in ECLiPSe, and thus has 
nothing to do with Gecode. After removing the check, the path constraint 
does succeed with 1 node as I expected it to.

Cheers,

Kish

On 27/09/2011 17:30, Kish Shen wrote:
> Hi,
>
> I am doing some tests with the new constraints I have just added to the
> ECLiPSe gecode interface, and the path constraint fails when there is
> only one node -- should this succeed, with the start and end nodes both
> set to 0, and the successor node for node 0 (the only node) set to 1?
>
> (with the circuit constraint with 1 node, the constrain succeeds with
> the successor of node 0 set to 0)
>
> Cheers,
>
> Kish
>


-- 
This e-mail may contain confidential and privileged material for the
sole use of the intended recipient. Any review, use, distribution or
disclosure by others is strictly prohibited. If you are not the intended
recipient (or authorized to receive for the recipient), please contact
the sender by reply e-mail and delete all copies of this message.
Cisco Systems Limited (Company Number: 02558939), is registered in
England and Wales with its registered office at 1 Callaghan Square,
Cardiff, South Glamorgan CF10 5BT.


From tack at gecode.org  Wed Sep 28 15:36:36 2011
From: tack at gecode.org (Guido Tack)
Date: Wed, 28 Sep 2011 15:36:36 +0200
Subject: [gecode-users] Problems with some REG and some suggestions
In-Reply-To: <87ehz22uch.fsf@epiano.texitoi.eu>
References: <87sjnj2lzq.fsf@epiano.texitoi.eu>
	<008601cc7c84$749e4b00$5ddae100$@kth.se>
	<87ehz22uch.fsf@epiano.texitoi.eu>
Message-ID: <1F0676C3-6057-4229-8ADA-030C496A66D9@gecode.org>

On 27 Sep 2011, at 11:43, TeXitoi wrote:
> I work on about 400 integer variables (about 15 months), and I have
> regex that are applied on different intervals (year, semester, month,
> week...).  To improve the performances, I would like to combine some
> of the constraints on a unique DFA. So, the idea I had was generating
> a regex that affect only a period but that have the length of my
> problem:
>  - first month : myReg + any(nbDaysIn14Month,nbDaysIn14Month)
>  - second month : any(nbDaysIn1Month,nbDaysIn1Month) + myReg +
>        any(nbDaysIn13Month,nbDaysIn13Month)
>  - ...
>  - first semester : ...
>  - ...
> and then I compute the intersection of the DFA.

One thing I noticed (but which may be just because you simplified the problem for presentation) is that you could build expressions for a whole year without any wildcards, e.g.

year = myReg(15,15)

and probably similarly for weeks and semesters.

Cheers,
Guido

-- 
Guido Tack, http://people.cs.kuleuven.be/~guido.tack/







From texitoi+news at texitoi.eu  Wed Sep 28 16:09:16 2011
From: texitoi+news at texitoi.eu (TeXitoi)
Date: 28 Sep 2011 16:09:16 +0200
Subject: [gecode-users] Problems with some REG and some suggestions
References: <87sjnj2lzq.fsf@epiano.texitoi.eu>
	<008601cc7c84$749e4b00$5ddae100$@kth.se>
	<87ehz22uch.fsf@epiano.texitoi.eu>
	<1F0676C3-6057-4229-8ADA-030C496A66D9@gecode.org>
Message-ID: <874nzw3gj7.fsf@epiano.texitoi.eu>

Guido Tack <tack at gecode.org> writes:

> On 27 Sep 2011, at 11:43, TeXitoi wrote:
> > I work on about 400 integer variables (about 15 months), and I have
> > regex that are applied on different intervals (year, semester, month,
> > week...).  To improve the performances, I would like to combine some
> > of the constraints on a unique DFA. So, the idea I had was generating
> > a regex that affect only a period but that have the length of my
> > problem:
> >  - first month : myReg + any(nbDaysIn14Month,nbDaysIn14Month)
> >  - second month : any(nbDaysIn1Month,nbDaysIn1Month) + myReg +
> >        any(nbDaysIn13Month,nbDaysIn13Month)
> >  - ...
> >  - first semester : ...
> >  - ...
> > and then I compute the intersection of the DFA.
> 
> One thing I noticed (but which may be just because you simplified
> the problem for presentation) is that you could build expressions
> for a whole year without any wildcards, e.g.
> 
> year = myReg(15,15)

Interesting idea.  But it does not work just like that: imagine you
have a 2 week problem and that you want 2 consecutive "1" each week.

  REG myReg = *any + one(2,2) + *any;

if we do what you said (myReg(2,2)), the string

  1111000 0000000

will match.  We have 2 consecutive "1" on the first week but 0 on the
second.  To make this work, you need to do the intersection of
DFA(myReg) with DFA(any(7,7)).  I cannot see how to do it without
concatenation of DFA.

Then, this is not so simple, some patterns must use some characters
before and after the period to work correctly, and so the regexen
overlap, and you cannot use this idea.

-- 
Guillaume Pinot                               http://www.texitoi.eu

? Il semble que la perfection soit atteinte non quand il n'y a plus
rien ? ajouter, mais quand il n'y a plus rien ? retrancher. ?
                      -- Antoine de Saint-Exup?ry, Terre des hommes

()  ASCII ribbon campaign      -- Against HTML e-mail
/\  http://www.asciiribbon.org -- Against proprietary attachments



From tack at gecode.org  Wed Sep 28 16:19:26 2011
From: tack at gecode.org (Guido Tack)
Date: Wed, 28 Sep 2011 16:19:26 +0200
Subject: [gecode-users] Problems with some REG and some suggestions
In-Reply-To: <874nzw3gj7.fsf@epiano.texitoi.eu>
References: <87sjnj2lzq.fsf@epiano.texitoi.eu>
	<008601cc7c84$749e4b00$5ddae100$@kth.se>
	<87ehz22uch.fsf@epiano.texitoi.eu>
	<1F0676C3-6057-4229-8ADA-030C496A66D9@gecode.org>
	<874nzw3gj7.fsf@epiano.texitoi.eu>
Message-ID: <70F00DE5-29BA-4020-B2A9-51F16FA8D3BA@gecode.org>

On 28 Sep 2011, at 16:09, TeXitoi wrote:

> Guido Tack <tack at gecode.org> writes:
> 
>> On 27 Sep 2011, at 11:43, TeXitoi wrote:
>>> I work on about 400 integer variables (about 15 months), and I have
>>> regex that are applied on different intervals (year, semester, month,
>>> week...).  To improve the performances, I would like to combine some
>>> of the constraints on a unique DFA. So, the idea I had was generating
>>> a regex that affect only a period but that have the length of my
>>> problem:
>>> - first month : myReg + any(nbDaysIn14Month,nbDaysIn14Month)
>>> - second month : any(nbDaysIn1Month,nbDaysIn1Month) + myReg +
>>>       any(nbDaysIn13Month,nbDaysIn13Month)
>>> - ...
>>> - first semester : ...
>>> - ...
>>> and then I compute the intersection of the DFA.
>> 
>> One thing I noticed (but which may be just because you simplified
>> the problem for presentation) is that you could build expressions
>> for a whole year without any wildcards, e.g.
>> 
>> year = myReg(15,15)
> 
> Interesting idea.  But it does not work just like that: imagine you
> have a 2 week problem and that you want 2 consecutive "1" each week.
> 
>  REG myReg = *any + one(2,2) + *any;
> 
> if we do what you said (myReg(2,2)), the string
> 
>  1111000 0000000
> 
> will match.  We have 2 consecutive "1" on the first week but 0 on the
> second.  To make this work, you need to do the intersection of
> DFA(myReg) with DFA(any(7,7)).  I cannot see how to do it without
> concatenation of DFA.

Right, of course.  I somehow assumed myReg was one month long, but of course you use the any(...) to make it exactly one month long.

> Then, this is not so simple, some patterns must use some characters
> before and after the period to work correctly, and so the regexen
> overlap, and you cannot use this idea.

Yes, I had already expected that overlap could be a problem.

Cheers,
Guido

-- 
Guido Tack, http://people.cs.kuleuven.be/~guido.tack/







From ncasti at fdi.ucm.es  Fri Sep 30 18:12:14 2011
From: ncasti at fdi.ucm.es (Nacho =?utf-8?b?Q2FzdGnDsWVpcmFz?=)
Date: Fri, 30 Sep 2011 16:12:14 +0000 (UTC)
Subject: [gecode-users] Redirect the output of a MinimizeScript
Message-ID: <loom.20110930T174823-778@post.gmane.org>

Hi, 
is it possible to redirect the output of the MinimizeScript "print" function to
an external file? 

I have looked to the examples of the Gecode distribution and the print function
is always implicitly called by the MinimizeScript::run method. 

Thank you very much in advance,
Nacho



From tack at gecode.org  Fri Sep 30 18:55:43 2011
From: tack at gecode.org (Guido Tack)
Date: Fri, 30 Sep 2011 18:55:43 +0200
Subject: [gecode-users] Redirect the output of a MinimizeScript
In-Reply-To: <loom.20110930T174823-778@post.gmane.org>
References: <loom.20110930T174823-778@post.gmane.org>
Message-ID: <F20F2B78-5F71-4B0E-9367-0D15893CF485@gecode.org>

On 30 Sep 2011, at 18:12, Nacho Casti?eiras wrote:

> Hi, 
> is it possible to redirect the output of the MinimizeScript "print" function to
> an external file? 
> 
> I have looked to the examples of the Gecode distribution and the print function
> is always implicitly called by the MinimizeScript::run method. 

It's possible, but you will have to run the search yourself instead of through the MinimizeScript::run method.

See the "send most money" example from Sect. 3.2 of MPG:
http://www.gecode.org/doc-latest/MPG/send-most-money-with-cost.cpp

Then you can call the print function yourself for each solution (or only for the last one if that's what you need), and pass a std::ostream that writes to a file.

Cheers,
Guido

-- 
Guido Tack, http://people.cs.kuleuven.be/~guido.tack/



