From alexis.cothenet at gmail.com  Mon Mar 12 09:48:32 2012
From: alexis.cothenet at gmail.com (Alexis Cothenet)
Date: Mon, 12 Mar 2012 09:48:32 +0100
Subject: [gecode-users] IntVarArray
Message-ID: <CANBFYtau+izVF1Matc=+53Eudw86sK57DdevdF4YRB=1Zw=yFA@mail.gmail.com>

Hi all,

I'm trying to model something with Gecode:

I'm used with ILOG to add constraints like this:

I have 2 variables for example :
IntVar toto1 ([0,1,2])
IntVar toto2 ([0,2]).


I have a relationship with the preceding domain values :
Array [0] = 8
Array [1] = 9
Array [2] = 8

I have an intVarArray:
IntVarArray glob;
glob << Array [toto1] (domain = [8,9])
glob << Array [toto2] (domain = [8])

And add constraint:
distinct (glob);

So that it constrains glob[0] ->[9] and so it constrains toto1->[1]

Could you explain me how i could model it with Gecode ?

Thank you.
Best regards,
Alexis
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.gecode.org/pipermail/users/attachments/20120312/22fc4a4b/attachment.htm>

From cschulte at kth.se  Mon Mar 12 09:52:14 2012
From: cschulte at kth.se (Christian Schulte)
Date: Mon, 12 Mar 2012 09:52:14 +0100
Subject: [gecode-users] IntVarArray
In-Reply-To: <CANBFYtau+izVF1Matc=+53Eudw86sK57DdevdF4YRB=1Zw=yFA@mail.gmail.com>
References: <CANBFYtau+izVF1Matc=+53Eudw86sK57DdevdF4YRB=1Zw=yFA@mail.gmail.com>
Message-ID: <011f01cd002d$6cf4c000$46de4000$@kth.se>

The constraint you are looking for is called "element" in Gecode
(implementing arrays access with variables).

 

For a general idea on how to model with Gecode, please check the
documentation.

 

Christian

 

--

Christian Schulte,  <http://www.ict.kth.se/~cschulte/>
www.ict.kth.se/~cschulte/

 

 

From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf
Of Alexis Cothenet
Sent: Monday, March 12, 2012 9:49 AM
To: users at gecode.org
Subject: [gecode-users] IntVarArray

 

Hi all,

I'm trying to model something with Gecode:

I'm used with ILOG to add constraints like this:

I have 2 variables for example :
IntVar toto1 ([0,1,2])
IntVar toto2 ([0,2]).


I have a relationship with the preceding domain values :
Array [0] = 8
Array [1] = 9
Array [2] = 8

I have an intVarArray:
IntVarArray glob;
glob << Array [toto1] (domain = [8,9])
glob << Array [toto2] (domain = [8])

And add constraint:
distinct (glob);

So that it constrains glob[0] ->[9] and so it constrains toto1->[1]

Could you explain me how i could model it with Gecode ? 

Thank you.
Best regards,
Alexis

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.gecode.org/pipermail/users/attachments/20120312/64e28751/attachment.htm>

From alexis.cothenet at gmail.com  Mon Mar 12 10:16:40 2012
From: alexis.cothenet at gmail.com (Alexis Cothenet)
Date: Mon, 12 Mar 2012 10:16:40 +0100
Subject: [gecode-users] IntVarArray
In-Reply-To: <011f01cd002d$6cf4c000$46de4000$@kth.se>
References: <CANBFYtau+izVF1Matc=+53Eudw86sK57DdevdF4YRB=1Zw=yFA@mail.gmail.com>
	<011f01cd002d$6cf4c000$46de4000$@kth.se>
Message-ID: <CANBFYtb9LsmEL5SXLp=nUsjNfeJiQH4XGPx2TYgGMwH35LueEQ@mail.gmail.com>

Hi,

Thank you for your answer.
I have seen this constraint but i don't understand how it could help me
since, in my example, Array is not a variable array.
If i understand well, what you suggested me if to use something like
element (Array, toto1, glob[0])
element (Array, toto2, glob[1])
distinct (glob);

But in my case Array is a simple relationship (a mapping) between values...
Alexis


2012/3/12 Christian Schulte <cschulte at kth.se>

> The constraint you are looking for is called ?element? in Gecode
> (implementing arrays access with variables).****
>
> ** **
>
> For a general idea on how to model with Gecode, please check the
> documentation.****
>
> ** **
>
> Christian****
>
> ** **
>
> --****
>
> Christian Schulte, www.ict.kth.se/~cschulte/<http://www.ict.kth.se/%7Ecschulte/>
> ****
>
> ** **
>
> ** **
>
> *From:* users-bounces at gecode.org [mailto:users-bounces at gecode.org] *On
> Behalf Of *Alexis Cothenet
> *Sent:* Monday, March 12, 2012 9:49 AM
> *To:* users at gecode.org
> *Subject:* [gecode-users] IntVarArray****
>
> ** **
>
> Hi all,
>
> I'm trying to model something with Gecode:
>
> I'm used with ILOG to add constraints like this:
>
> I have 2 variables for example :
> IntVar toto1 ([0,1,2])
> IntVar toto2 ([0,2]).
>
>
> I have a relationship with the preceding domain values :
> Array [0] = 8
> Array [1] = 9
> Array [2] = 8
>
> I have an intVarArray:
> IntVarArray glob;
> glob << Array [toto1] (domain = [8,9])
> glob << Array [toto2] (domain = [8])
>
> And add constraint:
> distinct (glob);
>
> So that it constrains glob[0] ->[9] and so it constrains toto1->[1]
>
> Could you explain me how i could model it with Gecode ?
>
> Thank you.
> Best regards,
> Alexis****
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.gecode.org/pipermail/users/attachments/20120312/dece1ad1/attachment.htm>

From cschulte at kth.se  Mon Mar 12 10:31:51 2012
From: cschulte at kth.se (Christian Schulte)
Date: Mon, 12 Mar 2012 10:31:51 +0100
Subject: [gecode-users] IntVarArray
In-Reply-To: <CANBFYtb9LsmEL5SXLp=nUsjNfeJiQH4XGPx2TYgGMwH35LueEQ@mail.gmail.com>
References: <CANBFYtau+izVF1Matc=+53Eudw86sK57DdevdF4YRB=1Zw=yFA@mail.gmail.com>	<011f01cd002d$6cf4c000$46de4000$@kth.se>
	<CANBFYtb9LsmEL5SXLp=nUsjNfeJiQH4XGPx2TYgGMwH35LueEQ@mail.gmail.com>
Message-ID: <014701cd0032$f547a350$dfd6e9f0$@kth.se>

Element works with arrays of integers and the index variable are the
variables toto1 and toto2. Please read carefully.

 

Christian

 

--

Christian Schulte, www.ict.kth.se/~cschulte/

 

 

From: Alexis Cothenet [mailto:alexis.cothenet at gmail.com] 
Sent: Monday, March 12, 2012 10:17 AM
To: cschulte at kth.se
Cc: users at gecode.org
Subject: Re: [gecode-users] IntVarArray

 

Hi,

Thank you for your answer.
I have seen this constraint but i don't understand how it could help me
since, in my example, Array is not a variable array.
If i understand well, what you suggested me if to use something like
element (Array, toto1, glob[0])
element (Array, toto2, glob[1])
distinct (glob);

But in my case Array is a simple relationship (a mapping) between values...
Alexis



2012/3/12 Christian Schulte <cschulte at kth.se>

The constraint you are looking for is called "element" in Gecode
(implementing arrays access with variables).

 

For a general idea on how to model with Gecode, please check the
documentation.

 

Christian

 

--

Christian Schulte, www.ict.kth.se/~cschulte/
<http://www.ict.kth.se/%7Ecschulte/> 

 

 

From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf
Of Alexis Cothenet
Sent: Monday, March 12, 2012 9:49 AM
To: users at gecode.org
Subject: [gecode-users] IntVarArray

 

Hi all,

I'm trying to model something with Gecode:

I'm used with ILOG to add constraints like this:

I have 2 variables for example :
IntVar toto1 ([0,1,2])
IntVar toto2 ([0,2]).


I have a relationship with the preceding domain values :
Array [0] = 8
Array [1] = 9
Array [2] = 8

I have an intVarArray:
IntVarArray glob;
glob << Array [toto1] (domain = [8,9])
glob << Array [toto2] (domain = [8])

And add constraint:
distinct (glob);

So that it constrains glob[0] ->[9] and so it constrains toto1->[1]

Could you explain me how i could model it with Gecode ? 

Thank you.
Best regards,
Alexis

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.gecode.org/pipermail/users/attachments/20120312/41ce374e/attachment-0001.htm>

From elinyong at gmail.com  Thu Mar 15 04:44:07 2012
From: elinyong at gmail.com (Yong LIN)
Date: Thu, 15 Mar 2012 11:44:07 +0800
Subject: [gecode-users] -samples and -iterations
Message-ID: <CADfnOYsgOVAQMn1t09ZUvF-9q4B3uXo5QCU+_-+H9nC6Xwvr4w@mail.gmail.com>

Hi All,

I have a question about the two runtime options: -samples and -iterations.

I see that the program will be executed -samples times, but what is the
exact meaning of iterations?

Thanks!

regards,
Lin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.gecode.org/pipermail/users/attachments/20120315/c7af4a24/attachment.htm>

From cschulte at kth.se  Thu Mar 15 09:44:58 2012
From: cschulte at kth.se (Christian Schulte)
Date: Thu, 15 Mar 2012 09:44:58 +0100
Subject: [gecode-users] -samples and -iterations
In-Reply-To: <CADfnOYsgOVAQMn1t09ZUvF-9q4B3uXo5QCU+_-+H9nC6Xwvr4w@mail.gmail.com>
References: <CADfnOYsgOVAQMn1t09ZUvF-9q4B3uXo5QCU+_-+H9nC6Xwvr4w@mail.gmail.com>
Message-ID: <002501cd0287$e7b85430$b728fc90$@kth.se>

Hi,

 

Each sample can consist of running several iterations of the same problem.
This is meant for problems with really low runtime. Whereas for a simple,
coefficient of deviation, etc is computed, all iterations are taken as one
runtime (one sample) divided by the number of iterations.

 

Best

Christian

 

--

Christian Schulte, KTH, web.it.kth.se/~cschulte/

 

From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf
Of Yong LIN
Sent: Thursday, March 15, 2012 4:44 AM
To: users at gecode.org
Subject: [gecode-users] -samples and -iterations

 

Hi All,

I have a question about the two runtime options: -samples and -iterations. 

I see that the program will be executed -samples times, but what is the
exact meaning of iterations? 

Thanks!

regards,
Lin

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.gecode.org/pipermail/users/attachments/20120315/7e334b5e/attachment.htm>

From jean-noel.monette at it.uu.se  Thu Mar 22 13:55:06 2012
From: jean-noel.monette at it.uu.se (=?ISO-8859-1?Q?Jean-No=EBl_Monette?=)
Date: Thu, 22 Mar 2012 13:55:06 +0100
Subject: [gecode-users] Segfault when assigning NaryUnion
In-Reply-To: <CADfnOYsgOVAQMn1t09ZUvF-9q4B3uXo5QCU+_-+H9nC6Xwvr4w@mail.gmail.com>
References: <CADfnOYsgOVAQMn1t09ZUvF-9q4B3uXo5QCU+_-+H9nC6Xwvr4w@mail.gmail.com>
Message-ID: <4F6B212A.10700@it.uu.se>

Hello,

While writing some propagator using range iterators and testing it, I 
fell upon a segfault. Tracking it down, it appears to happen when I use 
the assignment operator on NaryUnion. Here is a (almost) minimal example 
reproducing the problem:

#include "gecode/driver.hh"
#include "gecode/iter.hh"
using namespace Gecode;

class MySpace:public Space {
public:
     virtual Space* copy(bool share){return this;}
};

int main(int argc, char* argv[]){
     MySpace home;
     Iter::Ranges::Empty empty;
     Region region(home);
     Iter::Ranges::NaryUnion var1(region,empty);
     Iter::Ranges::NaryUnion var2;
     std::cout << "pass?" << std::endl;
     var2 = var1;
     std::cout << "passed" << std::endl;
     return 0;
}


The second print statement is never reached. What am I doing wrong?

I'm using Gecode 3.7.1 (I haven't upgraded to 3.7.2 yet but according to 
the changelog, this problem seems unrelated to the changes between the 
two versions), on Linux Ubuntu 11.04, and compiling with GCC 4.5.2.

Thank you for your answers,

Jean-No?l Monette


From cschulte at kth.se  Thu Mar 22 16:38:20 2012
From: cschulte at kth.se (Christian Schulte)
Date: Thu, 22 Mar 2012 16:38:20 +0100
Subject: [gecode-users] Segfault when assigning NaryUnion
In-Reply-To: <4F6B212A.10700@it.uu.se>
References: <CADfnOYsgOVAQMn1t09ZUvF-9q4B3uXo5QCU+_-+H9nC6Xwvr4w@mail.gmail.com>
	<4F6B212A.10700@it.uu.se>
Message-ID: <006601cd0841$cf8f3da0$6eadb8e0$@se>

Hi,

You do nothing wrong, this is very definitely a bug (the problem is that
var2 is not initialized and the assignment operator crashes). I attached a
patch and we will release a new version in a few days (for other reasons,
though).

Christian

--
Christian Schulte, www.ict.kth.se/~cschulte/


-----Original Message-----
From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf
Of Jean-No?l Monette
Sent: Thursday, March 22, 2012 1:55 PM
To: users at gecode.org
Subject: [gecode-users] Segfault when assigning NaryUnion

Hello,

While writing some propagator using range iterators and testing it, I fell
upon a segfault. Tracking it down, it appears to happen when I use the
assignment operator on NaryUnion. Here is a (almost) minimal example
reproducing the problem:

#include "gecode/driver.hh"
#include "gecode/iter.hh"
using namespace Gecode;

class MySpace:public Space {
public:
     virtual Space* copy(bool share){return this;} };

int main(int argc, char* argv[]){
     MySpace home;
     Iter::Ranges::Empty empty;
     Region region(home);
     Iter::Ranges::NaryUnion var1(region,empty);
     Iter::Ranges::NaryUnion var2;
     std::cout << "pass?" << std::endl;
     var2 = var1;
     std::cout << "passed" << std::endl;
     return 0;
}


The second print statement is never reached. What am I doing wrong?

I'm using Gecode 3.7.1 (I haven't upgraded to 3.7.2 yet but according to the
changelog, this problem seems unrelated to the changes between the two
versions), on Linux Ubuntu 11.04, and compiling with GCC 4.5.2.

Thank you for your answers,

Jean-No?l Monette

_______________________________________________
Gecode users mailing list
users at gecode.org
https://www.gecode.org/mailman/listinfo/gecode-users
-------------- next part --------------
A non-text attachment was scrubbed...
Name: patch
Type: application/octet-stream
Size: 777 bytes
Desc: not available
URL: <http://www.gecode.org/pipermail/users/attachments/20120322/75681b0a/attachment.obj>

From jean-noel.monette at it.uu.se  Fri Mar 23 18:04:31 2012
From: jean-noel.monette at it.uu.se (=?ISO-8859-1?Q?Jean-No=EBl_Monette?=)
Date: Fri, 23 Mar 2012 18:04:31 +0100
Subject: [gecode-users] Questions about the range iterators
In-Reply-To: <006601cd0841$cf8f3da0$6eadb8e0$@se>
References: <CADfnOYsgOVAQMn1t09ZUvF-9q4B3uXo5QCU+_-+H9nC6Xwvr4w@mail.gmail.com>
	<4F6B212A.10700@it.uu.se> <006601cd0841$cf8f3da0$6eadb8e0$@se>
Message-ID: <4F6CAD1F.6050508@it.uu.se>

Hello,

I have a few questions about range iterators. Those questions are maybe 
more reflexions that I hope you will confirm or correct if I 
misunderstood something. Thank you in advance.

* Some iterators (those that are not templated), like NaryUnion or 
Minus, maintain their own data structure for the ranges, while the other 
ones (most of them) rely on the information provided by other iterators.

* A very few iterators (based on RangeListIter) have a reset() method 
allowing one to restart the iteration from scratch. The other ones do 
not have this functionality. What is the rational behind this choice? I 
was thinking about the way/cost of adding a reset method to all 
iterators and it looks to me that it might be easy enough. But maybe you 
have no interest in doing this (as it typically requires some more 
pointers (e.g. in classes such as IntVarImpFwd) for only an occasional 
use), or there are some hidden difficulties (I'm certainly not expert in 
the implementation of Gecode).

* From the previous point, most iterators are "one-use" only and are 
unusable once consumed. If one wants to use twice the same iterator for 
some reason, he has to recreate it from scratch. Is it right? Or is 
there some other way to do it (e.g. with a copy constructor)?

Thank you for your help,

Jean-No?l Monette


From cschulte at kth.se  Sun Mar 25 17:15:02 2012
From: cschulte at kth.se (Christian Schulte)
Date: Sun, 25 Mar 2012 17:15:02 +0200
Subject: [gecode-users] Questions about the range iterators
In-Reply-To: <4F6CAD1F.6050508@it.uu.se>
References: <CADfnOYsgOVAQMn1t09ZUvF-9q4B3uXo5QCU+_-+H9nC6Xwvr4w@mail.gmail.com>	<4F6B212A.10700@it.uu.se>
	<006601cd0841$cf8f3da0$6eadb8e0$@se> <4F6CAD1F.6050508@it.uu.se>
Message-ID: <003001cd0a9a$0e782a90$2b687fb0$@kth.se>

Hi,

I think as you rightly observed, iterators are nothing but temporary
objects. If you need them twice, create them twice. The likes of NaryUnion
and NaryInter are special in that constructing them is expensive and hence
they feature a reset method. For the other iterators, there would be not
benefit in having reset methods (as you observed correctly) as reiterating
is the same efficiencywise as reseting them (actually, redoing is cheaper as
one does need to track pointers etc).

Cheers
Christian

--
Christian Schulte, www.ict.kth.se/~cschulte/


> -----Original Message-----
> From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On
> Behalf Of Jean-No?l Monette
> Sent: Friday, March 23, 2012 6:05 PM
> To: users at gecode.org
> Subject: [gecode-users] Questions about the range iterators
> 
> Hello,
> 
> I have a few questions about range iterators. Those questions are maybe
more
> reflexions that I hope you will confirm or correct if I misunderstood
something.
> Thank you in advance.
> 
> * Some iterators (those that are not templated), like NaryUnion or Minus,
> maintain their own data structure for the ranges, while the other ones
(most of
> them) rely on the information provided by other iterators.
> 
> * A very few iterators (based on RangeListIter) have a reset() method
allowing
> one to restart the iteration from scratch. The other ones do not have this
> functionality. What is the rational behind this choice? I was thinking
about the
> way/cost of adding a reset method to all iterators and it looks to me that
it
> might be easy enough. But maybe you have no interest in doing this (as it
> typically requires some more pointers (e.g. in classes such as
IntVarImpFwd) for
> only an occasional use), or there are some hidden difficulties (I'm
certainly not
> expert in the implementation of Gecode).
> 
> * From the previous point, most iterators are "one-use" only and are
unusable
> once consumed. If one wants to use twice the same iterator for some
reason,
> he has to recreate it from scratch. Is it right? Or is there some other
way to do it
> (e.g. with a copy constructor)?
> 
> Thank you for your help,
> 
> Jean-No?l Monette
> 
> _______________________________________________
> Gecode users mailing list
> users at gecode.org
> https://www.gecode.org/mailman/listinfo/gecode-users



From tack at gecode.org  Mon Mar 26 14:30:59 2012
From: tack at gecode.org (Guido Tack)
Date: Mon, 26 Mar 2012 23:30:59 +1100
Subject: [gecode-users] Gecode 3.7.3 released
Message-ID: <B0FBCA71-EDD0-40F8-9775-E5C8C1E97426@gecode.org>

Dear all,

we are releasing a new version of Gecode:

      Gecode 3.7.3
http://www.gecode.org

This release fixes some small bugs in the FlatZinc interpreter and library, and adds scripts for conveniently invoking the MiniZinc-to-FlatZinc translator and the Gecode FlatZinc interpreter together.

On our web site, you find source packages, binary packages for Windows and Mac OS, and the full documentation.

Cheers,
	Guido



From jean-noel.monette at it.uu.se  Mon Mar 26 13:53:12 2012
From: jean-noel.monette at it.uu.se (=?ISO-8859-1?Q?Jean-No=EBl_Monette?=)
Date: Mon, 26 Mar 2012 13:53:12 +0200
Subject: [gecode-users] Memory Leak with NaryUnion/Region(?)
Message-ID: <4F7058A8.8030808@it.uu.se>

Hello,

Sorry for bothering you again with the same class, namely NaryUnion... 
When running the next piece of code, within valgrind (memcheck), I get a 
report for a memory leak...

#include "gecode/driver.hh"
#include "gecode/iter.hh"
using namespace Gecode;
class MySpace:public Space {
     public:
         virtual Space* copy(bool share){return this;}
};
int main(int argc, char* argv[]){
     MySpace home;
     Region region(home);
     for(int j=0;j<8;j++){
         Iter::Ranges::Empty e;
         Iter::Ranges::NaryUnion unio(region,e);
     }
}


The report is as follows:


==9213== HEAP SUMMARY:
==9213==     in use at exit: 40 bytes in 1 blocks
==9213==   total heap usage: 319 allocs, 318 frees, 94,497 bytes allocated
==9213==
==9213== 40 bytes in 1 blocks are definitely lost in loss record 1 of 1
==9213==    at 0x4C28FAC: malloc (vg_replace_malloc.c:236)
==9213==    by 0x6582629: Gecode::Region::heap_alloc(unsigned long) 
(heap.hpp:324)
==9213==    by 0x40474F: main (region.hpp:306)
==9213==
==9213== LEAK SUMMARY:
==9213==    definitely lost: 40 bytes in 1 blocks
==9213==    indirectly lost: 0 bytes in 0 blocks
==9213==      possibly lost: 0 bytes in 0 blocks
==9213==    still reachable: 0 bytes in 0 blocks
==9213==         suppressed: 0 bytes in 0 blocks


The leak does not appear when looping only for 7 iterations instead of 
8. This seems quite normal as the memory is allocated on the heap only 
when the region space is exhausted (according to MPG). I am using Gecode 
3.7.1, gcc 4.5.2, Linux-Ubuntu 11.04 over a 64 bits architecture.  Is it 
some kind of bug, or should I stop using NaryUnion once and for all?

Thank you again for your help,

Jean-No?l monette



From cschulte at kth.se  Mon Mar 26 16:07:40 2012
From: cschulte at kth.se (Christian Schulte)
Date: Mon, 26 Mar 2012 16:07:40 +0200
Subject: [gecode-users] Memory Leak with NaryUnion/Region(?)
In-Reply-To: <4F7058A8.8030808@it.uu.se>
References: <4F7058A8.8030808@it.uu.se>
Message-ID: <004601cd0b59$cea99eb0$6bfcdc10$@se>

Hmm, thanks for the report. I might not fix that soon as the whole
implementation for Region might change.

Thanks a lot!
Christian

--
Christian Schulte, www.ict.kth.se/~cschulte/


-----Original Message-----
From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf
Of Jean-No?l Monette
Sent: Monday, March 26, 2012 1:53 PM
To: users at gecode.org
Subject: [gecode-users] Memory Leak with NaryUnion/Region(?)

Hello,

Sorry for bothering you again with the same class, namely NaryUnion... 
When running the next piece of code, within valgrind (memcheck), I get a
report for a memory leak...

#include "gecode/driver.hh"
#include "gecode/iter.hh"
using namespace Gecode;
class MySpace:public Space {
     public:
         virtual Space* copy(bool share){return this;} }; int main(int argc,
char* argv[]){
     MySpace home;
     Region region(home);
     for(int j=0;j<8;j++){
         Iter::Ranges::Empty e;
         Iter::Ranges::NaryUnion unio(region,e);
     }
}


The report is as follows:


==9213== HEAP SUMMARY:
==9213==     in use at exit: 40 bytes in 1 blocks
==9213==   total heap usage: 319 allocs, 318 frees, 94,497 bytes allocated
==9213==
==9213== 40 bytes in 1 blocks are definitely lost in loss record 1 of 1
==9213==    at 0x4C28FAC: malloc (vg_replace_malloc.c:236)
==9213==    by 0x6582629: Gecode::Region::heap_alloc(unsigned long) 
(heap.hpp:324)
==9213==    by 0x40474F: main (region.hpp:306)
==9213==
==9213== LEAK SUMMARY:
==9213==    definitely lost: 40 bytes in 1 blocks
==9213==    indirectly lost: 0 bytes in 0 blocks
==9213==      possibly lost: 0 bytes in 0 blocks
==9213==    still reachable: 0 bytes in 0 blocks
==9213==         suppressed: 0 bytes in 0 blocks


The leak does not appear when looping only for 7 iterations instead of 8.
This seems quite normal as the memory is allocated on the heap only when the
region space is exhausted (according to MPG). I am using Gecode 3.7.1, gcc
4.5.2, Linux-Ubuntu 11.04 over a 64 bits architecture.  Is it some kind of
bug, or should I stop using NaryUnion once and for all?

Thank you again for your help,

Jean-No?l monette


_______________________________________________
Gecode users mailing list
users at gecode.org
https://www.gecode.org/mailman/listinfo/gecode-users



From chuongdk at gmail.com  Mon Mar 26 16:14:54 2012
From: chuongdk at gmail.com (Chuong)
Date: Mon, 26 Mar 2012 14:14:54 +0000 (UTC)
Subject: [gecode-users] Question: stop during a search
Message-ID: <loom.20120326T161137-744@post.gmane.org>

Hi all,
I have a question about stop during a search.
Is is possible to stop during a search before fixing all variables?
For example:
I have 4 variables a, b, c, d with domain of [0,1].
After fixing a=0, b=0, I can detect that I have solutions of every combinations 
of c and d. 
So it is not effective to branch in c and d (the propagation take more time 
than counting combinations).
Is it possible to stop the search at this point and change to a=0, b=1 
(not a=0, b=0, c=0).

Thank you in advance.
Best regards,
Chuong




From tack at gecode.org  Tue Mar 27 00:34:46 2012
From: tack at gecode.org (Guido Tack)
Date: Tue, 27 Mar 2012 09:34:46 +1100
Subject: [gecode-users] Question: stop during a search
In-Reply-To: <loom.20120326T161137-744@post.gmane.org>
References: <loom.20120326T161137-744@post.gmane.org>
Message-ID: <90B34DD4-3F69-4F92-8251-3C28F4036040@gecode.org>

On 27/03/2012, at 1:14 AM, Chuong wrote:

> Hi all,
> I have a question about stop during a search.
> Is is possible to stop during a search before fixing all variables?
> For example:
> I have 4 variables a, b, c, d with domain of [0,1].
> After fixing a=0, b=0, I can detect that I have solutions of every combinations 
> of c and d. 
> So it is not effective to branch in c and d (the propagation take more time 
> than counting combinations).
> Is it possible to stop the search at this point and change to a=0, b=1 
> (not a=0, b=0, c=0).

You can do this in different ways, it depends on how you can detect the situation.  The easiest solution is by simply adding constraints that remove the extra solutions.  This is basically static symmetry breaking.  E.g., you could add a constraint (a=00 && b==0) >> (c==0 && d==0), which removes all other solutions for c and d.
If you can't add those constraints statically, you have to write your own brancher that can detect this situation and fix the remaining variables accordingly (which is similar to "symmetry breaking during search").
Perhaps you'll get some ideas by looking into the symmetry breaking literature.

Cheers,
Guido

From cschulte at kth.se  Tue Mar 27 09:38:46 2012
From: cschulte at kth.se (Christian Schulte)
Date: Tue, 27 Mar 2012 09:38:46 +0200
Subject: [gecode-users] Question: stop during a search
In-Reply-To: <90B34DD4-3F69-4F92-8251-3C28F4036040@gecode.org>
References: <loom.20120326T161137-744@post.gmane.org>
	<90B34DD4-3F69-4F92-8251-3C28F4036040@gecode.org>
Message-ID: <006901cd0bec$a53b5990$efb20cb0$@se>

Actually there is one other approach: Just branch on a and b but not c and d
(by posting an appropriate brancher). Then when you give this to a search
engine you, say e1, you would get a space, say s1, from e1 where only a and
b are assigned. Then, you could post a new branching in s1 where you branch
on c and d. Then you could use a search engine on s1 to give you a solution
where also c and d are assigned. Then, you could request a solution from e1
again where the next assignment for a and b is produced.

Best
Christian

--
Christian Schulte, www.ict.kth.se/~cschulte/


-----Original Message-----
From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf
Of Guido Tack
Sent: Tuesday, March 27, 2012 12:35 AM
To: Chuong
Cc: users at gecode.org
Subject: Re: [gecode-users] Question: stop during a search

On 27/03/2012, at 1:14 AM, Chuong wrote:

> Hi all,
> I have a question about stop during a search.
> Is is possible to stop during a search before fixing all variables?
> For example:
> I have 4 variables a, b, c, d with domain of [0,1].
> After fixing a=0, b=0, I can detect that I have solutions of every 
> combinations of c and d.
> So it is not effective to branch in c and d (the propagation take more 
> time than counting combinations).
> Is it possible to stop the search at this point and change to a=0, b=1 
> (not a=0, b=0, c=0).

You can do this in different ways, it depends on how you can detect the
situation.  The easiest solution is by simply adding constraints that remove
the extra solutions.  This is basically static symmetry breaking.  E.g., you
could add a constraint (a=00 && b==0) >> (c==0 && d==0), which removes all
other solutions for c and d.
If you can't add those constraints statically, you have to write your own
brancher that can detect this situation and fix the remaining variables
accordingly (which is similar to "symmetry breaking during search").
Perhaps you'll get some ideas by looking into the symmetry breaking
literature.

Cheers,
Guido
_______________________________________________
Gecode users mailing list
users at gecode.org
https://www.gecode.org/mailman/listinfo/gecode-users



From jean-noel.monette at it.uu.se  Tue Mar 27 10:13:59 2012
From: jean-noel.monette at it.uu.se (=?ISO-8859-1?Q?Jean-No=EBl_Monette?=)
Date: Tue, 27 Mar 2012 10:13:59 +0200
Subject: [gecode-users] Memory Leak with NaryUnion/Region(?)
In-Reply-To: <004601cd0b59$cea99eb0$6bfcdc10$@se>
References: <4F7058A8.8030808@it.uu.se> <004601cd0b59$cea99eb0$6bfcdc10$@se>
Message-ID: <4F7176C7.7050402@it.uu.se>

Hi,

Thanks for your answer.

In the mean time, if I want to avoid this leak, is it ok to change the 
constant "region_area_size" in "memory_config.hpp" to some larger value? 
What would be downside of doing this? And if I do so, do I need to 
recompile the whole gecode Library, or is it sufficient to recompile my 
own model?

Thank you,

Jean-No?l Monette

On 03/26/2012 04:07 PM, Christian Schulte wrote:
> Hmm, thanks for the report. I might not fix that soon as the whole
> implementation for Region might change.
>
> Thanks a lot!
> Christian
>
> --
> Christian Schulte, www.ict.kth.se/~cschulte/
>
>
> -----Original Message-----
> From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf
> Of Jean-No?l Monette
> Sent: Monday, March 26, 2012 1:53 PM
> To: users at gecode.org
> Subject: [gecode-users] Memory Leak with NaryUnion/Region(?)
>
> Hello,
>
> Sorry for bothering you again with the same class, namely NaryUnion...
> When running the next piece of code, within valgrind (memcheck), I get a
> report for a memory leak...
>
> #include "gecode/driver.hh"
> #include "gecode/iter.hh"
> using namespace Gecode;
> class MySpace:public Space {
>       public:
>           virtual Space* copy(bool share){return this;} }; int main(int argc,
> char* argv[]){
>       MySpace home;
>       Region region(home);
>       for(int j=0;j<8;j++){
>           Iter::Ranges::Empty e;
>           Iter::Ranges::NaryUnion unio(region,e);
>       }
> }
>
>
> The report is as follows:
>
>
> ==9213== HEAP SUMMARY:
> ==9213==     in use at exit: 40 bytes in 1 blocks
> ==9213==   total heap usage: 319 allocs, 318 frees, 94,497 bytes allocated
> ==9213==
> ==9213== 40 bytes in 1 blocks are definitely lost in loss record 1 of 1
> ==9213==    at 0x4C28FAC: malloc (vg_replace_malloc.c:236)
> ==9213==    by 0x6582629: Gecode::Region::heap_alloc(unsigned long)
> (heap.hpp:324)
> ==9213==    by 0x40474F: main (region.hpp:306)
> ==9213==
> ==9213== LEAK SUMMARY:
> ==9213==    definitely lost: 40 bytes in 1 blocks
> ==9213==    indirectly lost: 0 bytes in 0 blocks
> ==9213==      possibly lost: 0 bytes in 0 blocks
> ==9213==    still reachable: 0 bytes in 0 blocks
> ==9213==         suppressed: 0 bytes in 0 blocks
>
>
> The leak does not appear when looping only for 7 iterations instead of 8.
> This seems quite normal as the memory is allocated on the heap only when the
> region space is exhausted (according to MPG). I am using Gecode 3.7.1, gcc
> 4.5.2, Linux-Ubuntu 11.04 over a 64 bits architecture.  Is it some kind of
> bug, or should I stop using NaryUnion once and for all?
>
> Thank you again for your help,
>
> Jean-No?l monette
>
>
> _______________________________________________
> Gecode users mailing list
> users at gecode.org
> https://www.gecode.org/mailman/listinfo/gecode-users
>
>


From cschulte at kth.se  Tue Mar 27 10:25:40 2012
From: cschulte at kth.se (Christian Schulte)
Date: Tue, 27 Mar 2012 10:25:40 +0200
Subject: [gecode-users] Memory Leak with NaryUnion/Region(?)
In-Reply-To: <4F7176C7.7050402@it.uu.se>
References: <4F7058A8.8030808@it.uu.se> <004601cd0b59$cea99eb0$6bfcdc10$@se>
	<4F7176C7.7050402@it.uu.se>
Message-ID: <00b901cd0bf3$3220a0d0$9661e270$@se>

Yes, that would be one way. And you would have to recompile. The downside
would be that you allocate some more memory.

But there is a simpler fix (at least for your example): always create a
fresh region, it is cheap. So in your example do:
       for(int j=0;j<8;j++){
           Region region(home);
           Iter::Ranges::Empty e;
           Iter::Ranges::NaryUnion unio(region,e);
       }

Can I ask what you are trying to do? I am just curious.

Best
Christian

--
Christian Schulte, www.ict.kth.se/~cschulte/


-----Original Message-----
From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf
Of Jean-No?l Monette
Sent: Tuesday, March 27, 2012 10:14 AM
To: users at gecode.org
Subject: Re: [gecode-users] Memory Leak with NaryUnion/Region(?)

Hi,

Thanks for your answer.

In the mean time, if I want to avoid this leak, is it ok to change the
constant "region_area_size" in "memory_config.hpp" to some larger value? 
What would be downside of doing this? And if I do so, do I need to recompile
the whole gecode Library, or is it sufficient to recompile my own model?

Thank you,

Jean-No?l Monette

On 03/26/2012 04:07 PM, Christian Schulte wrote:
> Hmm, thanks for the report. I might not fix that soon as the whole 
> implementation for Region might change.
>
> Thanks a lot!
> Christian
>
> --
> Christian Schulte, www.ict.kth.se/~cschulte/
>
>
> -----Original Message-----
> From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On 
> Behalf Of Jean-No?l Monette
> Sent: Monday, March 26, 2012 1:53 PM
> To: users at gecode.org
> Subject: [gecode-users] Memory Leak with NaryUnion/Region(?)
>
> Hello,
>
> Sorry for bothering you again with the same class, namely NaryUnion...
> When running the next piece of code, within valgrind (memcheck), I get 
> a report for a memory leak...
>
> #include "gecode/driver.hh"
> #include "gecode/iter.hh"
> using namespace Gecode;
> class MySpace:public Space {
>       public:
>           virtual Space* copy(bool share){return this;} }; int 
> main(int argc,
> char* argv[]){
>       MySpace home;
>       Region region(home);
>       for(int j=0;j<8;j++){
>           Iter::Ranges::Empty e;
>           Iter::Ranges::NaryUnion unio(region,e);
>       }
> }
>
>
> The report is as follows:
>
>
> ==9213== HEAP SUMMARY:
> ==9213==     in use at exit: 40 bytes in 1 blocks
> ==9213==   total heap usage: 319 allocs, 318 frees, 94,497 bytes allocated
> ==9213==
> ==9213== 40 bytes in 1 blocks are definitely lost in loss record 1 of 1
> ==9213==    at 0x4C28FAC: malloc (vg_replace_malloc.c:236)
> ==9213==    by 0x6582629: Gecode::Region::heap_alloc(unsigned long)
> (heap.hpp:324)
> ==9213==    by 0x40474F: main (region.hpp:306)
> ==9213==
> ==9213== LEAK SUMMARY:
> ==9213==    definitely lost: 40 bytes in 1 blocks
> ==9213==    indirectly lost: 0 bytes in 0 blocks
> ==9213==      possibly lost: 0 bytes in 0 blocks
> ==9213==    still reachable: 0 bytes in 0 blocks
> ==9213==         suppressed: 0 bytes in 0 blocks
>
>
> The leak does not appear when looping only for 7 iterations instead of 8.
> This seems quite normal as the memory is allocated on the heap only 
> when the region space is exhausted (according to MPG). I am using 
> Gecode 3.7.1, gcc 4.5.2, Linux-Ubuntu 11.04 over a 64 bits 
> architecture.  Is it some kind of bug, or should I stop using NaryUnion
once and for all?
>
> Thank you again for your help,
>
> Jean-No?l monette
>
>
> _______________________________________________
> Gecode users mailing list
> users at gecode.org
> https://www.gecode.org/mailman/listinfo/gecode-users
>
>

_______________________________________________
Gecode users mailing list
users at gecode.org
https://www.gecode.org/mailman/listinfo/gecode-users



From denys.duchier at univ-orleans.fr  Tue Mar 27 22:20:13 2012
From: denys.duchier at univ-orleans.fr (Denys Duchier)
Date: Tue, 27 Mar 2012 22:20:13 +0200
Subject: [gecode-users]  [ANN] gecode/python v0.27
Message-ID: <87y5qlbxtu.fsf@univ-orleans.fr>

I am pleased to announce release 0.27 of gecode-python, the simplified
gecode bindings for python.

WHAT'S NEW:

- support for extensional constraints
  new gecode.fsa module for constructing finite state automata
- module gecode.domain for easy modeling of symbolic finite domains
- Space.values(X) also works for BoolVars
- support for search statistics
- support for search limits (implicit stop objects)
- support for Gecode 3.7.2
- support for Gecode 3.7.3

INSTALL:

- from pypi using easy_install (provided by setuptools):

        sudo -E easy_install gecode-python
  or    easy_install gecode-python --prefix ~

  if you are upgrading a previous install:

        sudo -E easy_install -U gecode-python
  or    easy_install -U gecode-python --prefix ~

- from pypi using the tarball:

        tar zxf gecode-python-0.17.tar.gz
        cd gecode-python-0.17
        sudo -E python setup.py install
  or    python setup.py install --prefix ~

- using the launchpad branch:

        bzr branch lp:gecode-python
        cd gecode-python
        sudo -E python setup.py install
  or    python setup.py install --prefix ~

if you are installing using "--prefix ~" I recommend that:
1. you create directory ~/.local if it does not already exist
2. you create a symbolic link:
        ~/.local/lib   -> ~/lib
   or   ~/.local/lib64 -> ~/lib64
   depending on whether you have a ~/lib or a ~/lib64 directory in your
   home after install.
this will allow python to find your locally installed packages without
requiring you to fiddle with environment variable PYTHONPATH.

Cheers,

--Denys


From jean-noel.monette at it.uu.se  Thu Mar 29 10:56:00 2012
From: jean-noel.monette at it.uu.se (=?ISO-8859-1?Q?Jean-No=EBl_Monette?=)
Date: Thu, 29 Mar 2012 10:56:00 +0200
Subject: [gecode-users] NaryUnion, infinite loop
Message-ID: <4F7423A0.8010408@it.uu.se>

Hello,

Here is a new problem I came across with NaryUnion. As suggested by 
Christian, I created a fresh region for every new NaryUnion, however I 
ran into an infinite loop. Below is a minimal example. I located the 
infinite loop inside the "two(I& i, J& j)" method of NaryUnion, and the 
reason seems to be that, after the call to "RangeList* t = range(j)" in 
the "else if" block (I unfortunately cannot give you line numbers as I 
messed around with print statements), "i.c" and "t" point to the very 
same RangeList (while they should not). I'm not expert enough to go 
deeper/further...

Notice that this appears only when region2 is created in a block (in 
real code, it would be inside a "for" or a "if"), however there is no 
influence if it is actually used or not.

I guess it is again related to the Region implementation that is going 
to change, but I think it is worth mentioning it anyway.

Jean-No?l


#include "gecode/driver.hh"
#include "gecode/iter.hh"
using namespace Gecode;
class MySpace:public Space {
public:
     virtual Space* copy(bool share){return this;}
};
int main(int argc, char* argv[]){
     MySpace home;
     Iter::Ranges::Singleton dom0(3,3);
     Iter::Ranges::Singleton dom1(1,1);
     Region region1(home);
     Iter::Ranges::NaryUnion u0;
     {
         Region region2(home);
         u0 = Iter::Ranges::NaryUnion(region2,dom0);//or using region1
     }
     Iter::Ranges::NaryUnion u1(region1,u0,dom1); //loops forever
     /*or
      * Region region3(home);
      * Iter::Ranges::NaryUnion u1(region3,u0,dom1);
      */
     return 0;
}




From elinyong at gmail.com  Thu Mar 29 13:58:03 2012
From: elinyong at gmail.com (Yong LIN)
Date: Thu, 29 Mar 2012 19:58:03 +0800
Subject: [gecode-users] copy variables in a stable space
Message-ID: <CADfnOYtYT98dgkktD=DUR9ofeWvskFOvKEENGsqyXo8hAmWT3A@mail.gmail.com>

Hi All,

After the space has reached a stable status after constraint propagation,
if I want to make a copy ( physical independent ) of the variables in the
space, which classes should I consult with to meet my requirement? Thanks
very much!

regards,
Lin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.gecode.org/pipermail/users/attachments/20120329/235e135b/attachment.htm>

From cschulte at kth.se  Thu Mar 29 16:43:23 2012
From: cschulte at kth.se (Christian Schulte)
Date: Thu, 29 Mar 2012 16:43:23 +0200
Subject: [gecode-users] copy variables in a stable space
In-Reply-To: <CADfnOYtYT98dgkktD=DUR9ofeWvskFOvKEENGsqyXo8hAmWT3A@mail.gmail.com>
References: <CADfnOYtYT98dgkktD=DUR9ofeWvskFOvKEENGsqyXo8hAmWT3A@mail.gmail.com>
Message-ID: <005e01cd0dba$4b7c5510$e274ff30$@kth.se>

Sorry, but I do not understand what you are up to.

 

Christian

 

--

Christian Schulte,  <http://www.ict.kth.se/~cschulte/>
www.ict.kth.se/~cschulte/

 

 

From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf
Of Yong LIN
Sent: Thursday, March 29, 2012 1:58 PM
To: users at gecode.org
Subject: [gecode-users] copy variables in a stable space

 

Hi All,

After the space has reached a stable status after constraint propagation, if
I want to make a copy ( physical independent ) of the variables in the
space, which classes should I consult with to meet my requirement? Thanks
very much!

regards,
Lin

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.gecode.org/pipermail/users/attachments/20120329/08c9eca0/attachment.htm>

From tack at gecode.org  Fri Mar 30 00:41:33 2012
From: tack at gecode.org (Guido Tack)
Date: Fri, 30 Mar 2012 09:41:33 +1100
Subject: [gecode-users] NaryUnion, infinite loop
In-Reply-To: <4F7423A0.8010408@it.uu.se>
References: <4F7423A0.8010408@it.uu.se>
Message-ID: <C375F707-B3A6-47BF-B092-FC16D6B48AE9@gecode.org>

On 29/03/2012, at 7:56 PM, Jean-No?l Monette wrote:

> Hello,
> 
> Here is a new problem I came across with NaryUnion. As suggested by Christian, I created a fresh region for every new NaryUnion, however I ran into an infinite loop. Below is a minimal example. I located the infinite loop inside the "two(I& i, J& j)" method of NaryUnion, and the reason seems to be that, after the call to "RangeList* t = range(j)" in the "else if" block (I unfortunately cannot give you line numbers as I messed around with print statements), "i.c" and "t" point to the very same RangeList (while they should not). I'm not expert enough to go deeper/further...
> 
> Notice that this appears only when region2 is created in a block (in real code, it would be inside a "for" or a "if"), however there is no influence if it is actually used or not.
> 
> I guess it is again related to the Region implementation that is going to change, but I think it is worth mentioning it anyway.

Memory allocated from a region only lives as long as the region, and by passing u0 out of its region's scope, you get a dangling pointer.  It's like writing

char* c;
{ string s = "hello"; c = s.c_str(); }
string s = "world";
printf("%s",c);

which will probably print world rather than hello.  So I'd say this is a bug in your code (and we should improve the documentation to make this clear).

Cheers,
Guido



From skymaormaor at hotmail.com  Fri Mar 30 09:33:41 2012
From: skymaormaor at hotmail.com (=?gb2312?B?z8TOrA==?=)
Date: Fri, 30 Mar 2012 15:33:41 +0800
Subject: [gecode-users] alloc memory from heap and the stats of Peak Memory
In-Reply-To: <mailman.5.1333015209.24220.users@gecode.org>
References: <mailman.5.1333015209.24220.users@gecode.org>
Message-ID: <COL118-W231A102E633A64A05E7557AE490@phx.gbl>


Hello,

         I got a problem about alloc memory from heap and the stats of Peak Memory.
         I write a Shared Object and handles, and use heap.alloc<T>(n)  to alloc memory for the shared object's distributes. I changed the value of n, and the peak Memory is always the same.
         It seems that the memory allocated from heap are not added into the Peak Memory's stats, why is that? 

Thank a lot!

XW.  
 		 	   		  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.gecode.org/pipermail/users/attachments/20120330/070697d7/attachment.htm>

From jean-noel.monette at it.uu.se  Fri Mar 30 09:48:44 2012
From: jean-noel.monette at it.uu.se (=?ISO-8859-1?Q?Jean-No=EBl_Monette?=)
Date: Fri, 30 Mar 2012 09:48:44 +0200
Subject: [gecode-users] NaryUnion, infinite loop
In-Reply-To: <C375F707-B3A6-47BF-B092-FC16D6B48AE9@gecode.org>
References: <4F7423A0.8010408@it.uu.se>
	<C375F707-B3A6-47BF-B092-FC16D6B48AE9@gecode.org>
Message-ID: <4F75655C.4030001@it.uu.se>

Hi Guido,

You are totally right and this is indeed a bug in my (real) code, and I 
will change it accordingly. However, in the small example, I get the 
same problem when u0 is created using region1 instead of region2, i.e.

Region region1(home);
Iter::Ranges::NaryUnion u0;
{
     Region region2(home);
     u0 = Iter::Ranges::NaryUnion(region1,dom0); //region1 here
}
Iter::Ranges::NaryUnion u1(region1,u0,dom1);


In this case, as far as I understand, there should be no dangling 
pointer, as u0 is initialized with memory from region1. Or do the two 
regions share their memory, and the destruction of region2 affects the 
memory of region1?

Thank you for you answers, and sorry for the inconvenience.

Jean-No?l

On 03/30/2012 12:41 AM, Guido Tack wrote:
> On 29/03/2012, at 7:56 PM, Jean-No?l Monette wrote:
>
>> Hello,
>>
>> Here is a new problem I came across with NaryUnion. As suggested by Christian, I created a fresh region for every new NaryUnion, however I ran into an infinite loop. Below is a minimal example. I located the infinite loop inside the "two(I&  i, J&  j)" method of NaryUnion, and the reason seems to be that, after the call to "RangeList* t = range(j)" in the "else if" block (I unfortunately cannot give you line numbers as I messed around with print statements), "i.c" and "t" point to the very same RangeList (while they should not). I'm not expert enough to go deeper/further...
>>
>> Notice that this appears only when region2 is created in a block (in real code, it would be inside a "for" or a "if"), however there is no influence if it is actually used or not.
>>
>> I guess it is again related to the Region implementation that is going to change, but I think it is worth mentioning it anyway.
> Memory allocated from a region only lives as long as the region, and by passing u0 out of its region's scope, you get a dangling pointer.  It's like writing
>
> char* c;
> { string s = "hello"; c = s.c_str(); }
> string s = "world";
> printf("%s",c);
>
> which will probably print world rather than hello.  So I'd say this is a bug in your code (and we should improve the documentation to make this clear).
>
> Cheers,
> Guido
>
>


From tack at gecode.org  Fri Mar 30 10:13:07 2012
From: tack at gecode.org (Guido Tack)
Date: Fri, 30 Mar 2012 19:13:07 +1100
Subject: [gecode-users] NaryUnion, infinite loop
In-Reply-To: <4F75655C.4030001@it.uu.se>
References: <4F7423A0.8010408@it.uu.se>
	<C375F707-B3A6-47BF-B092-FC16D6B48AE9@gecode.org>
	<4F75655C.4030001@it.uu.se>
Message-ID: <F69DE0BC-7088-4A5C-9C31-2098F57A5B18@gecode.org>

On 30 Mar 2012, at 18:48, Jean-No?l Monette wrote:

> Hi Guido,
> 
> You are totally right and this is indeed a bug in my (real) code, and I will change it accordingly. However, in the small example, I get the same problem when u0 is created using region1 instead of region2, i.e.
> 
> Region region1(home);
> Iter::Ranges::NaryUnion u0;
> {
>    Region region2(home);
>    u0 = Iter::Ranges::NaryUnion(region1,dom0); //region1 here
> }
> Iter::Ranges::NaryUnion u1(region1,u0,dom1);
> 
> 
> In this case, as far as I understand, there should be no dangling pointer, as u0 is initialized with memory from region1. Or do the two regions share their memory, and the destruction of region2 affects the memory of region1?

Right, that's a bug.  You currently can't use region1 while another "inner" region is active (i.e., in scope).  That's a bug and requires rewriting the region code, so it will have to wait until a future release.  Sorry about that.

Cheers,
Guido

> 
> Thank you for you answers, and sorry for the inconvenience.
> 
> Jean-No?l
> 
> On 03/30/2012 12:41 AM, Guido Tack wrote:
>> On 29/03/2012, at 7:56 PM, Jean-No?l Monette wrote:
>> 
>>> Hello,
>>> 
>>> Here is a new problem I came across with NaryUnion. As suggested by Christian, I created a fresh region for every new NaryUnion, however I ran into an infinite loop. Below is a minimal example. I located the infinite loop inside the "two(I&  i, J&  j)" method of NaryUnion, and the reason seems to be that, after the call to "RangeList* t = range(j)" in the "else if" block (I unfortunately cannot give you line numbers as I messed around with print statements), "i.c" and "t" point to the very same RangeList (while they should not). I'm not expert enough to go deeper/further...
>>> 
>>> Notice that this appears only when region2 is created in a block (in real code, it would be inside a "for" or a "if"), however there is no influence if it is actually used or not.
>>> 
>>> I guess it is again related to the Region implementation that is going to change, but I think it is worth mentioning it anyway.
>> Memory allocated from a region only lives as long as the region, and by passing u0 out of its region's scope, you get a dangling pointer.  It's like writing
>> 
>> char* c;
>> { string s = "hello"; c = s.c_str(); }
>> string s = "world";
>> printf("%s",c);
>> 
>> which will probably print world rather than hello.  So I'd say this is a bug in your code (and we should improve the documentation to make this clear).
>> 
>> Cheers,
>> Guido
>> 
>> 
> 
> _______________________________________________
> Gecode users mailing list
> users at gecode.org
> https://www.gecode.org/mailman/listinfo/gecode-users

-- 
Guido Tack,
http://www.csse.monash.edu/~guidot/



-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.gecode.org/pipermail/users/attachments/20120330/a2e47263/attachment-0001.htm>

From cschulte at kth.se  Fri Mar 30 12:42:43 2012
From: cschulte at kth.se (Christian Schulte)
Date: Fri, 30 Mar 2012 12:42:43 +0200
Subject: [gecode-users] alloc memory from heap and the stats of Peak
	Memory
In-Reply-To: <COL118-W231A102E633A64A05E7557AE490@phx.gbl>
References: <mailman.5.1333015209.24220.users@gecode.org>
	<COL118-W231A102E633A64A05E7557AE490@phx.gbl>
Message-ID: <004501cd0e61$d749d890$85dd89b0$@kth.se>

Of course not all memory is tracked. It is memory allocated by a space. If
you also want to track other allocated memory you have to redefine the
allocated() member function of a space.

 

If you really want to know all allocated memory, you might want to use
information provided by your operating system about how much memory your
pocess allocates.

 

Christian

 

--

Christian Schulte, www.ict.kth.se/~cschulte/

 

From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf
Of ??
Sent: Friday, March 30, 2012 9:34 AM
To: users at gecode.org
Subject: [gecode-users] alloc memory from heap and the stats of Peak Memory

 

Hello,

         I got a problem about alloc memory from heap and the stats of Peak
Memory.
         I write a Shared Object and handles, and use heap.alloc<T>(n)  to
alloc memory for the shared object's distributes. I changed the value of n,
and the peak Memory is always the same.
         It seems that the memory allocated from heap are not added into the
Peak Memory's stats, why is that? 

Thank a lot!

XW.  

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.gecode.org/pipermail/users/attachments/20120330/c41a15a3/attachment.htm>

From cschulte at kth.se  Fri Mar 30 14:34:46 2012
From: cschulte at kth.se (Christian Schulte)
Date: Fri, 30 Mar 2012 14:34:46 +0200
Subject: [gecode-users] NaryUnion, infinite loop
In-Reply-To: <4F75655C.4030001@it.uu.se>
References: <4F7423A0.8010408@it.uu.se>	<C375F707-B3A6-47BF-B092-FC16D6B48AE9@gecode.org>
	<4F75655C.4030001@it.uu.se>
Message-ID: <008901cd0e71$7de40040$79ac00c0$@kth.se>

Hi,

The problem is really that both iterators must allocate from the same
region. You should try to avoid the assignment operator for NaryUnion (I
should have not implemented it in the first place, because I know it is
troublesome). Normally there should be no reason to use an assignment
operator, just initialize when you create or use the copy constructor.

Sorry
Christian

--
Christian Schulte, www.ict.kth.se/~cschulte/


> -----Original Message-----
> From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On
> Behalf Of Jean-No?l Monette
> Sent: Friday, March 30, 2012 9:49 AM
> To: users at gecode.org
> Subject: Re: [gecode-users] NaryUnion, infinite loop
> 
> Hi Guido,
> 
> You are totally right and this is indeed a bug in my (real) code, and I
will change it
> accordingly. However, in the small example, I get the same problem when u0
is
> created using region1 instead of region2, i.e.
> 
> Region region1(home);
> Iter::Ranges::NaryUnion u0;
> {
>      Region region2(home);
>      u0 = Iter::Ranges::NaryUnion(region1,dom0); //region1 here }
> Iter::Ranges::NaryUnion u1(region1,u0,dom1);
> 
> 
> In this case, as far as I understand, there should be no dangling pointer,
as u0 is
> initialized with memory from region1. Or do the two regions share their
> memory, and the destruction of region2 affects the memory of region1?
> 
> Thank you for you answers, and sorry for the inconvenience.
> 
> Jean-No?l
> 
> On 03/30/2012 12:41 AM, Guido Tack wrote:
> > On 29/03/2012, at 7:56 PM, Jean-No?l Monette wrote:
> >
> >> Hello,
> >>
> >> Here is a new problem I came across with NaryUnion. As suggested by
> Christian, I created a fresh region for every new NaryUnion, however I ran
into
> an infinite loop. Below is a minimal example. I located the infinite loop
inside the
> "two(I&  i, J&  j)" method of NaryUnion, and the reason seems to be that,
after
> the call to "RangeList* t = range(j)" in the "else if" block (I
unfortunately cannot
> give you line numbers as I messed around with print statements), "i.c" and
"t"
> point to the very same RangeList (while they should not). I'm not expert
enough
> to go deeper/further...
> >>
> >> Notice that this appears only when region2 is created in a block (in
real code,
> it would be inside a "for" or a "if"), however there is no influence if it
is actually
> used or not.
> >>
> >> I guess it is again related to the Region implementation that is going
to
> change, but I think it is worth mentioning it anyway.
> > Memory allocated from a region only lives as long as the region, and
> > by passing u0 out of its region's scope, you get a dangling pointer.
> > It's like writing
> >
> > char* c;
> > { string s = "hello"; c = s.c_str(); } string s = "world";
> > printf("%s",c);
> >
> > which will probably print world rather than hello.  So I'd say this is a
bug in your
> code (and we should improve the documentation to make this clear).
> >
> > Cheers,
> > Guido
> >
> >
> 
> _______________________________________________
> Gecode users mailing list
> users at gecode.org
> https://www.gecode.org/mailman/listinfo/gecode-users



From bogus@does.not.exist.com  Tue Mar  6 05:10:12 2012
From: bogus@does.not.exist.com ()
Date: Tue, 06 Mar 2012 04:10:12 -0000
Subject: No subject
Message-ID: <mailman.0.1334916719.32286.users@gecode.org>

the first engine to the second, configure the snd engine to not take a clone
of s and then delete s? Is that the case? That could explain the bug: both
the snd engine as well as your code delete s, hence the kaboom!

If that is not the case, maybe just sketch in  more detail what you are
doing.

Cheers
Christian

--
Christian Schulte, www.ict.kth.se/~cschulte/


> -----Original Message-----
> From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On
> Behalf Of Milton Friedman
> Sent: Friday, April 20, 2012 6:37 AM
> To: users at gecode.org
> Subject: [gecode-users] Multiple separate searches
> 
> I'm working on a problem with many cases, encoded into an IntArray A, of
which
> some branchings are valid according to a set of constraints, and for each
of
> those valid cases, another IntArray B describes a more detailed analysis,
subject
> to other constraints.
> 
> I only need one solution of B for each case.
> 
> So what I think I should do in Gecode, is create a loop down in main that
runs
> DFS on Space/model IntArray A, and for each sequential solution A that
returns,
> call a different instance of DFS on Space/model IntArray B DFS to get just
one
> solution.
> Does that sound like a reasonable approach?
> 
> When I tried to do this, I ran into a problem.
> The MwG document explains how to loop on DFS, using s<-e.next to find the
> next space, etc, and I've done that for another application.
> But when I tried to feed DFS the new s, I got an error in Gecode's DFS
destructor
> on the line where it's trying to delete e (called by the end bracket of my
loop).
> So is it legal to have multiple separate DFS engines?
> Do you need to delete them when you're creating the next one?
> (delete e didn't work in my code any better than in the destructor).
> I don't see any examples of this on the Gecode examples page...
> they all look like single calls to the search engine.
> 
> Any thoughts?  Am I going about this w/the right approach?
> Thanks,
> -Milt
> 
> 
> _______________________________________________
> Gecode users mailing list
> users at gecode.org
> https://www.gecode.org/mailman/listinfo/gecode-users



