From victor.zverovich at gmail.com  Fri Feb  1 23:56:46 2013
From: victor.zverovich at gmail.com (victor.zverovich at gmail.com)
Date: Fri, 1 Feb 2013 14:56:46 -0800
Subject: [gecode-users] CMake build script for Gecode
Message-ID: <CANawtxZPuHWcbL6nQazz8M5E-QXYdXGrtZucc16=raLrAW6CFw@mail.gmail.com>

Hi All,

I've implemented a CMake <http://www.cmake.org/> build script for Gecode
which is available at
https://github.com/vitaut/gecode/blob/master/CMakeLists.txt . It's just a
single file that needs to be put in the top-level Gecode directory.

I've ported most of the autoconf platform checks to CMake. Out-of-tree
builds and tests are supported. I've tested the script on Linux and MacOS X
with gcc and on Windows with Visual C++ (both nmake and Visual Studio
builds work).

Hope it might be useful to someone.

Best regards,
Victor
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.gecode.org/pipermail/users/attachments/20130201/c8fbc7a1/attachment.html>

From cschulte at kth.se  Sat Feb  2 21:08:10 2013
From: cschulte at kth.se (Christian Schulte)
Date: Sat, 2 Feb 2013 21:08:10 +0100
Subject: [gecode-users] CMake build script for Gecode
In-Reply-To: <CANawtxZPuHWcbL6nQazz8M5E-QXYdXGrtZucc16=raLrAW6CFw@mail.gmail.com>
References: <CANawtxZPuHWcbL6nQazz8M5E-QXYdXGrtZucc16=raLrAW6CFw@mail.gmail.com>
Message-ID: <01f301ce0181$06b7a270$1426e750$@kth.se>

Hi Victor,

 

Thanks. The problem with this is that it'll be difficult for us to keep this
up-to-date. If you had something that generates most of the script that
would be much more realistic to maintain (like automatically extracting the
files, etc).

 

Any chance?

 

Best and thanks a lot for the effort!

Christian

 

--

Christian Schulte, www.ict.kth.se/~cschulte

 

From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf
Of victor.zverovich at gmail.com
Sent: Friday, February 1, 2013 11:57 PM
To: users at gecode.org
Subject: [gecode-users] CMake build script for Gecode

 

Hi All,

 

I've implemented a  <http://www.cmake.org/> CMake build script for Gecode
which is available at
https://github.com/vitaut/gecode/blob/master/CMakeLists.txt . It's just a
single file that needs to be put in the top-level Gecode directory.

 

I've ported most of the autoconf platform checks to CMake. Out-of-tree
builds and tests are supported. I've tested the script on Linux and MacOS X
with gcc and on Windows with Visual C++ (both nmake and Visual Studio builds
work).

 

Hope it might be useful to someone.

 

Best regards,

Victor

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.gecode.org/pipermail/users/attachments/20130202/ce79a700/attachment.html>

From victor.zverovich at gmail.com  Thu Feb  7 23:49:30 2013
From: victor.zverovich at gmail.com (victor.zverovich at gmail.com)
Date: Thu, 7 Feb 2013 14:49:30 -0800
Subject: [gecode-users] CMake build script for Gecode
In-Reply-To: <01f301ce0181$06b7a270$1426e750$@kth.se>
References: <CANawtxZPuHWcbL6nQazz8M5E-QXYdXGrtZucc16=raLrAW6CFw@mail.gmail.com>
	<01f301ce0181$06b7a270$1426e750$@kth.se>
Message-ID: <CANawtxaLGykWSv7th29q8kZ5vYdPrTKHpAsWqKGAZ_R19terTw@mail.gmail.com>

Hi Christian,

You made a good point about maintenance. I've updated the CMake build
script which is available at
https://github.com/vitaut/gecode/blob/master/CMakeLists.txt as before. The
new version extracts all the source file names from Makefile.in and a
substantial portion of the config header from config/support/config.h.in.

Best regards,
Victor

On Sat, Feb 2, 2013 at 12:08 PM, Christian Schulte <cschulte at kth.se> wrote:

> Hi Victor,****
>
> ** **
>
> Thanks. The problem with this is that it?ll be difficult for us to keep
> this up-to-date. If you had something that generates most of the script
> that would be much more realistic to maintain (like automatically
> extracting the files, etc).****
>
> ** **
>
> Any chance?****
>
> ** **
>
> Best and thanks a lot for the effort!****
>
> Christian****
>
> ** **
>
> --****
>
> Christian Schulte, www.ict.kth.se/~cschulte****
>
> ** **
>
> *From:* users-bounces at gecode.org [mailto:users-bounces at gecode.org] *On
> Behalf Of *victor.zverovich at gmail.com
> *Sent:* Friday, February 1, 2013 11:57 PM
> *To:* users at gecode.org
> *Subject:* [gecode-users] CMake build script for Gecode****
>
> ** **
>
> Hi All,****
>
> ** **
>
> I've implemented a CMake <http://www.cmake.org/> build script for Gecode
> which is available at
> https://github.com/vitaut/gecode/blob/master/CMakeLists.txt . It's just a
> single file that needs to be put in the top-level Gecode directory.****
>
> ** **
>
> I've ported most of the autoconf platform checks to CMake. Out-of-tree
> builds and tests are supported. I've tested the script on Linux and MacOS X
> with gcc and on Windows with Visual C++ (both nmake and Visual Studio
> builds work).****
>
> ** **
>
> Hope it might be useful to someone.****
>
> ** **
>
> Best regards,****
>
> Victor****
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.gecode.org/pipermail/users/attachments/20130207/1cf62b29/attachment.html>

From cschulte at kth.se  Fri Feb  8 10:41:07 2013
From: cschulte at kth.se (Christian Schulte)
Date: Fri, 8 Feb 2013 10:41:07 +0100
Subject: [gecode-users] CMake build script for Gecode
In-Reply-To: <CANawtxaLGykWSv7th29q8kZ5vYdPrTKHpAsWqKGAZ_R19terTw@mail.gmail.com>
References: <CANawtxZPuHWcbL6nQazz8M5E-QXYdXGrtZucc16=raLrAW6CFw@mail.gmail.com>
	<01f301ce0181$06b7a270$1426e750$@kth.se>
	<CANawtxaLGykWSv7th29q8kZ5vYdPrTKHpAsWqKGAZ_R19terTw@mail.gmail.com>
Message-ID: <002801ce05e0$6c5bc5d0$45135170$@se>

Hi Victor,

 

Cool! But of course it is my pleasure to be a pain in the neck: would you
dare trying this on the upcoming Gecode 4 release? That might be a nice
sanity check and then we would commit your script to the trunk provided you
are okay with putting it under Gecode license (which MIT, as liberal as it
gets). Gecode 4 comes with more dependencies and new variable types,
different files, can be built against Qt4 and Qt5, and what not... The trunk
is already pretty stable...

 

It is described on the download pages how to checkout the trunk

 

I know, I know... Pain!

Christian

 

--

Christian Schulte, www.ict.kth.se/~cschulte/

 

From: victor.zverovich at gmail.com [mailto:victor.zverovich at gmail.com] 
Sent: Thursday, February 07, 2013 11:50 PM
To: cschulte at kth.se
Cc: users at gecode.org
Subject: Re: [gecode-users] CMake build script for Gecode

 

Hi Christian,

 

You made a good point about maintenance. I've updated the CMake build script
which is available at
https://github.com/vitaut/gecode/blob/master/CMakeLists.txt as before. The
new version extracts all the source file names from Makefile.in and a
substantial portion of the config header from config/support/config.h.in.

 

Best regards,

Victor

On Sat, Feb 2, 2013 at 12:08 PM, Christian Schulte <cschulte at kth.se> wrote:

Hi Victor,

 

Thanks. The problem with this is that it'll be difficult for us to keep this
up-to-date. If you had something that generates most of the script that
would be much more realistic to maintain (like automatically extracting the
files, etc).

 

Any chance?

 

Best and thanks a lot for the effort!

Christian

 

--

Christian Schulte, www.ict.kth.se/~cschulte

 

From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf
Of victor.zverovich at gmail.com
Sent: Friday, February 1, 2013 11:57 PM
To: users at gecode.org
Subject: [gecode-users] CMake build script for Gecode

 

Hi All,

 

I've implemented a  <http://www.cmake.org/> CMake build script for Gecode
which is available at
https://github.com/vitaut/gecode/blob/master/CMakeLists.txt . It's just a
single file that needs to be put in the top-level Gecode directory.

 

I've ported most of the autoconf platform checks to CMake. Out-of-tree
builds and tests are supported. I've tested the script on Linux and MacOS X
with gcc and on Windows with Visual C++ (both nmake and Visual Studio builds
work).

 

Hope it might be useful to someone.

 

Best regards,

Victor

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.gecode.org/pipermail/users/attachments/20130208/b545dd53/attachment.html>

From Conrad.Drescher at cs.ox.ac.uk  Tue Feb 12 10:24:52 2013
From: Conrad.Drescher at cs.ox.ac.uk (Conrad.Drescher at cs.ox.ac.uk)
Date: Tue, 12 Feb 2013 09:24:52 -0000 (UTC)
Subject: [gecode-users] Executing code between branchers - the right way to
	go?
Message-ID: <54191.77.0.108.129.1360661092.squirrel@dave.cs.ox.ac.uk>

Hello there,

I'd greatly appreciate feedback on what the Gecode-way of attacking the
following two issues is:

1) My model features set variables. I have a custom brancher that uses a
heuristics to include certain elements in pairs of set variables sets[i]
and sets[i+1]. Before moving on to the next pair of variables I'd like to
fix sets[i] and sets[i+1] to the elements in the glb, e.g. by posting an
additional constraint that the cardinality of sets[i] is
sets[i].cardMin().

>From MPG 7.1.7 "Executing code between branchers" I cannot figure out how
to pass the index i to the more()-function, so some help on that would be
great. Or should I go for an assignment-brancher for set variables? Yet
something else?

2) Once I have assigned sets[i] and sets[i+1] I'd like to store the pair
as a no-good combination not to be tried again for any consecutive pair of
set variables. Actually it's a bit more complicated, as for the nogood I
also need to consider certain values not in sets[i] and sets[i+1]. I only
want to check for no-goods once I have assigned another pair of set
variables. Would you recommend going for a hash of no-goods? And could
this be maintained in a way similar to what is sketched in MPG 7.1.7? 
Alternatively, I could post a constraint that excludes the no-good and use
a custom propagator to ensure this is only checked once the respective
variables are assigned.

Thanks for reading; any input is much appreciated!

Cheers,
Conrad



From David.Rijsman at quintiq.com  Tue Feb 12 16:21:54 2013
From: David.Rijsman at quintiq.com (David Rijsman)
Date: Tue, 12 Feb 2013 16:21:54 +0100
Subject: [gecode-users] Branching decision updates an existing propagator
Message-ID: <511A6C220200008500026A1D@mail.quintiq.nl>

Hi All,

I am wondering if there is pattern to be used if I have a propagator which can be fed with new information by a branching decision.  Specifically I have a temporal propagator maintaining a temporal network and if a branch decision is to introduce a new precedence relation (ordering between two views present in the network) I would like to forward this information to the temporal propagator. 

I was thinking of maintaining a unary relation to my temporal propagator in my extended space, this relation might become null when the propagator is subsumed. I also need to introduce a post precedence constraint API on my extended space which notifies to temporal propagator of the new precedence constraint. This API on the space can then be invoked by the brancher.

Would this be the best way of doing something like this? 



David J. Rijsman
Algorithm Lead
Quintiq
 
T +31 (0)73 691 07 39
F +31 (0)73 691 07 54
M +31 (0)62 127 68 29
E david.rijsman at quintiq.com
I www.quintiq.com




From cschulte at kth.se  Tue Feb 12 17:22:17 2013
From: cschulte at kth.se (Christian Schulte)
Date: Tue, 12 Feb 2013 17:22:17 +0100
Subject: [gecode-users] Branching decision updates an existing propagator
In-Reply-To: <511A6C220200008500026A1D@mail.quintiq.nl>
References: <511A6C220200008500026A1D@mail.quintiq.nl>
Message-ID: <004a01ce093d$20cf88d0$626e9a70$@se>

Hi David,

Funny, we added support for this some time ago (also for temporal networks
;-)) but we never made it round to implement the networks (still on our todo
list).

The best way to do it is to create a local object with a local handle that
can be shared among several propagators/and or branchers. This is described
in Section 27.4 in MPG. Then the propagator can add the information to this
shared object and the brancher can read from there.

Hope that helps.

Best
Christian


--
Christian Schulte, www.ict.kth.se/~cschulte/


-----Original Message-----
From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf
Of David Rijsman
Sent: Tuesday, February 12, 2013 4:22 PM
To: users at gecode.org
Subject: [gecode-users] Branching decision updates an existing propagator

Hi All,

I am wondering if there is pattern to be used if I have a propagator which
can be fed with new information by a branching decision.  Specifically I
have a temporal propagator maintaining a temporal network and if a branch
decision is to introduce a new precedence relation (ordering between two
views present in the network) I would like to forward this information to
the temporal propagator. 

I was thinking of maintaining a unary relation to my temporal propagator in
my extended space, this relation might become null when the propagator is
subsumed. I also need to introduce a post precedence constraint API on my
extended space which notifies to temporal propagator of the new precedence
constraint. This API on the space can then be invoked by the brancher.

Would this be the best way of doing something like this? 



David J. Rijsman
Algorithm Lead
Quintiq
 
T +31 (0)73 691 07 39
F +31 (0)73 691 07 54
M +31 (0)62 127 68 29
E david.rijsman at quintiq.com
I www.quintiq.com



_______________________________________________
Gecode users mailing list
users at gecode.org
https://www.gecode.org/mailman/listinfo/gecode-users



From victor.zverovich at gmail.com  Tue Feb 12 20:10:27 2013
From: victor.zverovich at gmail.com (victor.zverovich at gmail.com)
Date: Tue, 12 Feb 2013 11:10:27 -0800
Subject: [gecode-users] CMake build script for Gecode
In-Reply-To: <002801ce05e0$6c5bc5d0$45135170$@se>
References: <CANawtxZPuHWcbL6nQazz8M5E-QXYdXGrtZucc16=raLrAW6CFw@mail.gmail.com>
	<01f301ce0181$06b7a270$1426e750$@kth.se>
	<CANawtxaLGykWSv7th29q8kZ5vYdPrTKHpAsWqKGAZ_R19terTw@mail.gmail.com>
	<002801ce05e0$6c5bc5d0$45135170$@se>
Message-ID: <CANawtxZXZWkxus+w=VVRgPDm5mnCeofLQa2PiWRHxUKa-2AskQ@mail.gmail.com>

Hi Christian,

No pain at all. I've added gecodedriver, gecodeflatzinc and gecodegist
libraries to the build and changed the CMake script (
https://github.com/vitaut/gecode/blob/master/CMakeLists.txt) a bit to make
it work both with version 3.7.3 (and possibly older) and trunk: the
gecodefloat library is conditionally compiled depending on whether FLOATSRC
is defined in Makefile.in or not.

MIT license is fine.

Best regards,
Victor

On Fri, Feb 8, 2013 at 1:41 AM, Christian Schulte <cschulte at kth.se> wrote:

> Hi Victor,****
>
> ** **
>
> Cool! But of course it is my pleasure to be a pain in the neck: would you
> dare trying this on the upcoming Gecode 4 release? That might be a nice
> sanity check and then we would commit your script to the trunk provided you
> are okay with putting it under Gecode license (which MIT, as liberal as it
> gets). Gecode 4 comes with more dependencies and new variable types,
> different files, can be built against Qt4 and Qt5, and what not... The
> trunk is already pretty stable...****
>
> ** **
>
> It is described on the download pages how to checkout the trunk****
>
> ** **
>
> I know, I know... Pain!****
>
> Christian****
>
> ** **
>
> --****
>
> Christian Schulte, www.ict.kth.se/~cschulte/****
>
> ** **
>
> *From:* victor.zverovich at gmail.com [mailto:victor.zverovich at gmail.com]
> *Sent:* Thursday, February 07, 2013 11:50 PM
> *To:* cschulte at kth.se
> *Cc:* users at gecode.org
> *Subject:* Re: [gecode-users] CMake build script for Gecode****
>
> ** **
>
> Hi Christian,****
>
> ** **
>
> You made a good point about maintenance. I've updated the CMake build
> script which is available at
> https://github.com/vitaut/gecode/blob/master/CMakeLists.txt as
> before. The new version extracts all the source file names from Makefile.in
> and a substantial portion of the config header from config/support/
> config.h.in.****
>
> ** **
>
> Best regards,****
>
> Victor****
>
> On Sat, Feb 2, 2013 at 12:08 PM, Christian Schulte <cschulte at kth.se>
> wrote:****
>
> Hi Victor,****
>
>  ****
>
> Thanks. The problem with this is that it?ll be difficult for us to keep
> this up-to-date. If you had something that generates most of the script
> that would be much more realistic to maintain (like automatically
> extracting the files, etc).****
>
>  ****
>
> Any chance?****
>
>  ****
>
> Best and thanks a lot for the effort!****
>
> Christian****
>
>  ****
>
> --****
>
> Christian Schulte, www.ict.kth.se/~cschulte****
>
>  ****
>
> *From:* users-bounces at gecode.org [mailto:users-bounces at gecode.org] *On
> Behalf Of *victor.zverovich at gmail.com
> *Sent:* Friday, February 1, 2013 11:57 PM
> *To:* users at gecode.org
> *Subject:* [gecode-users] CMake build script for Gecode****
>
>  ****
>
> Hi All,****
>
>  ****
>
> I've implemented a CMake <http://www.cmake.org/> build script for Gecode
> which is available at
> https://github.com/vitaut/gecode/blob/master/CMakeLists.txt . It's just a
> single file that needs to be put in the top-level Gecode directory.****
>
>  ****
>
> I've ported most of the autoconf platform checks to CMake. Out-of-tree
> builds and tests are supported. I've tested the script on Linux and MacOS X
> with gcc and on Windows with Visual C++ (both nmake and Visual Studio
> builds work).****
>
>  ****
>
> Hope it might be useful to someone.****
>
>  ****
>
> Best regards,****
>
> Victor****
>
> ** **
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.gecode.org/pipermail/users/attachments/20130212/5de78d7f/attachment.html>

From David.Rijsman at quintiq.com  Wed Feb 13 10:36:41 2013
From: David.Rijsman at quintiq.com (David Rijsman)
Date: Wed, 13 Feb 2013 10:36:41 +0100
Subject: [gecode-users] Branching decision updates an existing propagator
In-Reply-To: <004a01ce093d$20cf88d0$626e9a70$@se>
References: <511A6C220200008500026A1D@mail.quintiq.nl>
	<004a01ce093d$20cf88d0$626e9a70$@se>
Message-ID: <511B6CB90200008500026A57@mail.quintiq.nl>

Hi Christian,

thanks and indeed for the same use case. If I read correct the idea is to have a distance graph or something as a local object embedded in a local handle. Have at least the extended space have a handle to this object and have each precedence propagator between two views also have a handle to this local object. We do not want to loose the nodes in the distance graph when we subsume a precedence propagator and therefor we need the handle in the space. 

In MPG section 27.4 examples you have not defined the copy constructors of the LI class. I assume we always need to have one so we can have multiple handles to the same object, is that correct?


David J. Rijsman
Algorithm Lead
Quintiq
 
T +31 (0)73 691 07 39
F +31 (0)73 691 07 54
M +31 (0)62 127 68 29
E david.rijsman at quintiq.com
I www.quintiq.com


>>> 
From: 	"Christian Schulte" <cschulte at kth.se>
To:	"'David Rijsman'" <David.Rijsman at quintiq.com>, <users at gecode.org>
Date: 	12-2-2013 17:22
Subject: 	RE: [gecode-users] Branching decision updates an existing propagator

Hi David,

Funny, we added support for this some time ago (also for temporal networks
;-)) but we never made it round to implement the networks (still on our todo
list).

The best way to do it is to create a local object with a local handle that
can be shared among several propagators/and or branchers. This is described
in Section 27.4 in MPG. Then the propagator can add the information to this
shared object and the brancher can read from there.

Hope that helps.

Best
Christian


--
Christian Schulte, www.ict.kth.se/~cschulte/ 


-----Original Message-----
From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf
Of David Rijsman
Sent: Tuesday, February 12, 2013 4:22 PM
To: users at gecode.org 
Subject: [gecode-users] Branching decision updates an existing propagator

Hi All,

I am wondering if there is pattern to be used if I have a propagator which
can be fed with new information by a branching decision.  Specifically I
have a temporal propagator maintaining a temporal network and if a branch
decision is to introduce a new precedence relation (ordering between two
views present in the network) I would like to forward this information to
the temporal propagator. 

I was thinking of maintaining a unary relation to my temporal propagator in
my extended space, this relation might become null when the propagator is
subsumed. I also need to introduce a post precedence constraint API on my
extended space which notifies to temporal propagator of the new precedence
constraint. This API on the space can then be invoked by the brancher.

Would this be the best way of doing something like this? 



David J. Rijsman
Algorithm Lead
Quintiq
 
T +31 (0)73 691 07 39
F +31 (0)73 691 07 54
M +31 (0)62 127 68 29
E david.rijsman at quintiq.com 
I www.quintiq.com 



_______________________________________________
Gecode users mailing list
users at gecode.org 
https://www.gecode.org/mailman/listinfo/gecode-users 





From David.Rijsman at quintiq.com  Wed Feb 13 11:36:12 2013
From: David.Rijsman at quintiq.com (David Rijsman)
Date: Wed, 13 Feb 2013 11:36:12 +0100
Subject: [gecode-users] Identifying a view
Message-ID: <511B7AAC0200008500026A80@mail.quintiq.nl>

Another question on how we can do this best. Imagine I have a precedence constraint:

void Gecode::precedence(Home home, IntVar x, IntVar y, int lb, int ub, IntConLevel=ICL_DEF )

Post temporal propagator that maintains lb <= x - y <= ub 

This will invoke 

Precedence::post( Home home, View x, View y, int lb, int ub )

and this will update the shared handle to some shared distance graph. In the distance graph we maintain a graph which has vertices for each view. 

What is the best way of mapping a view to a vertex in this graph, that is how can identify a view to see if it already has been mapped into a vertex in for example a graph? 

Posting a new precedence constraint has to extend the graph with vertices for the views if they do not exist yet and add or update the edges between these vertices. 

any ideas?



David J. Rijsman
Algorithm Lead
Quintiq
 
T +31 (0)73 691 07 39
F +31 (0)73 691 07 54
M +31 (0)62 127 68 29
E david.rijsman at quintiq.com
I www.quintiq.com




From cschulte at kth.se  Wed Feb 13 17:03:56 2013
From: cschulte at kth.se (Christian Schulte)
Date: Wed, 13 Feb 2013 17:03:56 +0100
Subject: [gecode-users] Executing code between branchers - the right way
	to	go?
In-Reply-To: <54191.77.0.108.129.1360661092.squirrel@dave.cs.ox.ac.uk>
References: <54191.77.0.108.129.1360661092.squirrel@dave.cs.ox.ac.uk>
Message-ID: <023001ce0a03$bab11470$30133d50$@kth.se>

Hi Conrad,

I am not so sure what you are really up to here but I think what you are
trying to do seems to be too advanced for the pre-defined branchers as
described in Chapter 7. 

Did you have a look at Part B in MPG? There you have considerably more
freedom, in particular if you want the  brancher to remember certain
aspects.

Sorry, I know this is not all too helpful.

Best
Christian

--
Christian Schulte, www.ict.kth.se/~cschulte/



-----Original Message-----
From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf
Of Conrad.Drescher at cs.ox.ac.uk
Sent: Tuesday, February 12, 2013 10:25 AM
To: users at gecode.org
Subject: [gecode-users] Executing code between branchers - the right way to
go?

Hello there,

I'd greatly appreciate feedback on what the Gecode-way of attacking the
following two issues is:

1) My model features set variables. I have a custom brancher that uses a
heuristics to include certain elements in pairs of set variables sets[i] and
sets[i+1]. Before moving on to the next pair of variables I'd like to fix
sets[i] and sets[i+1] to the elements in the glb, e.g. by posting an
additional constraint that the cardinality of sets[i] is sets[i].cardMin().

>From MPG 7.1.7 "Executing code between branchers" I cannot figure out how to
pass the index i to the more()-function, so some help on that would be
great. Or should I go for an assignment-brancher for set variables? Yet
something else?

2) Once I have assigned sets[i] and sets[i+1] I'd like to store the pair as
a no-good combination not to be tried again for any consecutive pair of set
variables. Actually it's a bit more complicated, as for the nogood I also
need to consider certain values not in sets[i] and sets[i+1]. I only want to
check for no-goods once I have assigned another pair of set variables. Would
you recommend going for a hash of no-goods? And could this be maintained in
a way similar to what is sketched in MPG 7.1.7? 
Alternatively, I could post a constraint that excludes the no-good and use a
custom propagator to ensure this is only checked once the respective
variables are assigned.

Thanks for reading; any input is much appreciated!

Cheers,
Conrad


_______________________________________________
Gecode users mailing list
users at gecode.org
https://www.gecode.org/mailman/listinfo/gecode-users



From cschulte at kth.se  Wed Feb 13 17:10:03 2013
From: cschulte at kth.se (Christian Schulte)
Date: Wed, 13 Feb 2013 17:10:03 +0100
Subject: [gecode-users] Branching decision updates an existing propagator
In-Reply-To: <511B6CB90200008500026A57@mail.quintiq.nl>
References: <511A6C220200008500026A1D@mail.quintiq.nl>	<004a01ce093d$20cf88d0$626e9a70$@se>
	<511B6CB90200008500026A57@mail.quintiq.nl>
Message-ID: <023201ce0a04$951a2a70$bf4e7f50$@kth.se>

Hi David,

I can't really see why you would want to save the handle also in the space.
You can do it, of course but I do not see why propagator subsumption forces
you to do that: when creating a propagator, the propagator could add its
preference which then would stay on even if the propagator gets subsumed.
Another idea would be to build a propagator that propagates all dependencies
stored in the graph, that might save the creation of many propagators (due
to transitivity of precedence).

Damn it, you are right about MPG, you should have a copy constructor. Thanks
for pointing out, I'll fix that for Gecode 4 (which is now nearing its
completion - of sorts...).

Best
Christian

--
Christian Schulte, www.ict.kth.se/~cschulte/



-----Original Message-----
From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf
Of David Rijsman
Sent: Wednesday, February 13, 2013 10:37 AM
To: users at gecode.org; cschulte at kth.se
Subject: Re: [gecode-users] Branching decision updates an existing
propagator

Hi Christian,

thanks and indeed for the same use case. If I read correct the idea is to
have a distance graph or something as a local object embedded in a local
handle. Have at least the extended space have a handle to this object and
have each precedence propagator between two views also have a handle to this
local object. We do not want to loose the nodes in the distance graph when
we subsume a precedence propagator and therefor we need the handle in the
space. 

In MPG section 27.4 examples you have not defined the copy constructors of
the LI class. I assume we always need to have one so we can have multiple
handles to the same object, is that correct?


David J. Rijsman
Algorithm Lead
Quintiq
 
T +31 (0)73 691 07 39
F +31 (0)73 691 07 54
M +31 (0)62 127 68 29
E david.rijsman at quintiq.com
I www.quintiq.com


>>> 
From: 	"Christian Schulte" <cschulte at kth.se>
To:	"'David Rijsman'" <David.Rijsman at quintiq.com>, <users at gecode.org>
Date: 	12-2-2013 17:22
Subject: 	RE: [gecode-users] Branching decision updates an existing
propagator

Hi David,

Funny, we added support for this some time ago (also for temporal networks
;-)) but we never made it round to implement the networks (still on our todo
list).

The best way to do it is to create a local object with a local handle that
can be shared among several propagators/and or branchers. This is described
in Section 27.4 in MPG. Then the propagator can add the information to this
shared object and the brancher can read from there.

Hope that helps.

Best
Christian


--
Christian Schulte, www.ict.kth.se/~cschulte/ 


-----Original Message-----
From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf
Of David Rijsman
Sent: Tuesday, February 12, 2013 4:22 PM
To: users at gecode.org
Subject: [gecode-users] Branching decision updates an existing propagator

Hi All,

I am wondering if there is pattern to be used if I have a propagator which
can be fed with new information by a branching decision.  Specifically I
have a temporal propagator maintaining a temporal network and if a branch
decision is to introduce a new precedence relation (ordering between two
views present in the network) I would like to forward this information to
the temporal propagator. 

I was thinking of maintaining a unary relation to my temporal propagator in
my extended space, this relation might become null when the propagator is
subsumed. I also need to introduce a post precedence constraint API on my
extended space which notifies to temporal propagator of the new precedence
constraint. This API on the space can then be invoked by the brancher.

Would this be the best way of doing something like this? 



David J. Rijsman
Algorithm Lead
Quintiq
 
T +31 (0)73 691 07 39
F +31 (0)73 691 07 54
M +31 (0)62 127 68 29
E david.rijsman at quintiq.com
I www.quintiq.com 



_______________________________________________
Gecode users mailing list
users at gecode.org 
https://www.gecode.org/mailman/listinfo/gecode-users 




_______________________________________________
Gecode users mailing list
users at gecode.org
https://www.gecode.org/mailman/listinfo/gecode-users



From cschulte at kth.se  Wed Feb 13 17:13:37 2013
From: cschulte at kth.se (Christian Schulte)
Date: Wed, 13 Feb 2013 17:13:37 +0100
Subject: [gecode-users] Identifying a view
In-Reply-To: <511B7AAC0200008500026A80@mail.quintiq.nl>
References: <511B7AAC0200008500026A80@mail.quintiq.nl>
Message-ID: <023401ce0a05$148c8230$3da58690$@kth.se>

I think I would turn it upside down: I would use integers as nodes in the
graph and maintain a mapping of these integers to their corresponding views.
Is that possible?

Otherwise, things get hairy: you could hash on the variable implementation
address to which the view is pointing to (if x is a view, then x.varimp()
gives you that). But each time you clone, you would have to rehash as the
varimp() changes.

Christian

--
Christian Schulte, www.ict.kth.se/~cschulte/



-----Original Message-----
From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf
Of David Rijsman
Sent: Wednesday, February 13, 2013 11:36 AM
To: users at gecode.org
Subject: [gecode-users] Identifying a view

Another question on how we can do this best. Imagine I have a precedence
constraint:

void Gecode::precedence(Home home, IntVar x, IntVar y, int lb, int ub,
IntConLevel=ICL_DEF )

Post temporal propagator that maintains lb <= x - y <= ub 

This will invoke 

Precedence::post( Home home, View x, View y, int lb, int ub )

and this will update the shared handle to some shared distance graph. In the
distance graph we maintain a graph which has vertices for each view. 

What is the best way of mapping a view to a vertex in this graph, that is
how can identify a view to see if it already has been mapped into a vertex
in for example a graph? 

Posting a new precedence constraint has to extend the graph with vertices
for the views if they do not exist yet and add or update the edges between
these vertices. 

any ideas?



David J. Rijsman
Algorithm Lead
Quintiq
 
T +31 (0)73 691 07 39
F +31 (0)73 691 07 54
M +31 (0)62 127 68 29
E david.rijsman at quintiq.com
I www.quintiq.com



_______________________________________________
Gecode users mailing list
users at gecode.org
https://www.gecode.org/mailman/listinfo/gecode-users



From David.Rijsman at quintiq.com  Wed Feb 13 18:10:13 2013
From: David.Rijsman at quintiq.com (David Rijsman)
Date: Wed, 13 Feb 2013 18:10:13 +0100
Subject: [gecode-users] Identifying a view
In-Reply-To: <023401ce0a05$148c8230$3da58690$@kth.se>
References: <511B7AAC0200008500026A80@mail.quintiq.nl>
	<023401ce0a05$148c8230$3da58690$@kth.se>
Message-ID: <511BD7050200008500026AF9@mail.quintiq.nl>

Hi Christian,

the use case I am looking at is if at some point in the branching you decide to order two (temporal) variables you would want to find these two variables in your graph to add the edges. I do not think a node to view mapping will help with this.  

I think I know how to do this in my world as I have already a layer on top of the IntVar of Gecode. It would off course be nicer if my propagator does not have to know about my world. Like you suggest I was thinking of using the varimp addresses and indeed rehash etc. What we really need is some constant hash function on the varimp (an int or such) and can be used for this purpose. There must not be too many propagators that need this kind of information or aggregate multiple constraints in one datastructure. Let me think some more how it can be done...





David J. Rijsman
Algorithm Lead
Quintiq
 
T +31 (0)73 691 07 39
F +31 (0)73 691 07 54
M +31 (0)62 127 68 29
E david.rijsman at quintiq.com
I www.quintiq.com


>>> 
From: 	"Christian Schulte" <cschulte at kth.se>
To:	"'David Rijsman'" <David.Rijsman at quintiq.com>, <users at gecode.org>
Date: 	13-2-2013 17:13
Subject: 	RE: [gecode-users] Identifying a view

I think I would turn it upside down: I would use integers as nodes in the
graph and maintain a mapping of these integers to their corresponding views.
Is that possible?

Otherwise, things get hairy: you could hash on the variable implementation
address to which the view is pointing to (if x is a view, then x.varimp()
gives you that). But each time you clone, you would have to rehash as the
varimp() changes.

Christian

--
Christian Schulte, www.ict.kth.se/~cschulte/ 



-----Original Message-----
From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf
Of David Rijsman
Sent: Wednesday, February 13, 2013 11:36 AM
To: users at gecode.org 
Subject: [gecode-users] Identifying a view

Another question on how we can do this best. Imagine I have a precedence
constraint:

void Gecode::precedence(Home home, IntVar x, IntVar y, int lb, int ub,
IntConLevel=ICL_DEF )

Post temporal propagator that maintains lb <= x - y <= ub 

This will invoke 

Precedence::post( Home home, View x, View y, int lb, int ub )

and this will update the shared handle to some shared distance graph. In the
distance graph we maintain a graph which has vertices for each view. 

What is the best way of mapping a view to a vertex in this graph, that is
how can identify a view to see if it already has been mapped into a vertex
in for example a graph? 

Posting a new precedence constraint has to extend the graph with vertices
for the views if they do not exist yet and add or update the edges between
these vertices. 

any ideas?



David J. Rijsman
Algorithm Lead
Quintiq
 
T +31 (0)73 691 07 39
F +31 (0)73 691 07 54
M +31 (0)62 127 68 29
E david.rijsman at quintiq.com 
I www.quintiq.com 



_______________________________________________
Gecode users mailing list
users at gecode.org 
https://www.gecode.org/mailman/listinfo/gecode-users 





From cschulte at kth.se  Thu Feb 14 16:11:24 2013
From: cschulte at kth.se (Christian Schulte)
Date: Thu, 14 Feb 2013 16:11:24 +0100
Subject: [gecode-users] Identifying a view
In-Reply-To: <511BD7050200008500026AF9@mail.quintiq.nl>
References: <511B7AAC0200008500026A80@mail.quintiq.nl>
	<023401ce0a05$148c8230$3da58690$@kth.se>
	<511BD7050200008500026AF9@mail.quintiq.nl>
Message-ID: <004701ce0ac5$8edac4a0$ac904de0$@se>

Well, ... If both brancher and propagator know the same mapping (maintained
by the local object), then mapping int to views rather than the other way
round would work.

That was what we had in mind originally.

Cheers
Christian

--
Christian Schulte, www.ict.kth.se/~cschulte/


-----Original Message-----
From: David Rijsman [mailto:David.Rijsman at quintiq.com] 
Sent: Wednesday, February 13, 2013 6:10 PM
To: users at gecode.org; cschulte at kth.se
Subject: RE: [gecode-users] Identifying a view

Hi Christian,

the use case I am looking at is if at some point in the branching you decide
to order two (temporal) variables you would want to find these two variables
in your graph to add the edges. I do not think a node to view mapping will
help with this.  

I think I know how to do this in my world as I have already a layer on top
of the IntVar of Gecode. It would off course be nicer if my propagator does
not have to know about my world. Like you suggest I was thinking of using
the varimp addresses and indeed rehash etc. What we really need is some
constant hash function on the varimp (an int or such) and can be used for
this purpose. There must not be too many propagators that need this kind of
information or aggregate multiple constraints in one datastructure. Let me
think some more how it can be done...





David J. Rijsman
Algorithm Lead
Quintiq
 
T +31 (0)73 691 07 39
F +31 (0)73 691 07 54
M +31 (0)62 127 68 29
E david.rijsman at quintiq.com
I www.quintiq.com


>>> 
From: 	"Christian Schulte" <cschulte at kth.se>
To:	"'David Rijsman'" <David.Rijsman at quintiq.com>, <users at gecode.org>
Date: 	13-2-2013 17:13
Subject: 	RE: [gecode-users] Identifying a view

I think I would turn it upside down: I would use integers as nodes in the
graph and maintain a mapping of these integers to their corresponding views.
Is that possible?

Otherwise, things get hairy: you could hash on the variable implementation
address to which the view is pointing to (if x is a view, then x.varimp()
gives you that). But each time you clone, you would have to rehash as the
varimp() changes.

Christian

--
Christian Schulte, www.ict.kth.se/~cschulte/ 



-----Original Message-----
From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf
Of David Rijsman
Sent: Wednesday, February 13, 2013 11:36 AM
To: users at gecode.org
Subject: [gecode-users] Identifying a view

Another question on how we can do this best. Imagine I have a precedence
constraint:

void Gecode::precedence(Home home, IntVar x, IntVar y, int lb, int ub,
IntConLevel=ICL_DEF )

Post temporal propagator that maintains lb <= x - y <= ub 

This will invoke 

Precedence::post( Home home, View x, View y, int lb, int ub )

and this will update the shared handle to some shared distance graph. In the
distance graph we maintain a graph which has vertices for each view. 

What is the best way of mapping a view to a vertex in this graph, that is
how can identify a view to see if it already has been mapped into a vertex
in for example a graph? 

Posting a new precedence constraint has to extend the graph with vertices
for the views if they do not exist yet and add or update the edges between
these vertices. 

any ideas?



David J. Rijsman
Algorithm Lead
Quintiq
 
T +31 (0)73 691 07 39
F +31 (0)73 691 07 54
M +31 (0)62 127 68 29
E david.rijsman at quintiq.com
I www.quintiq.com 



_______________________________________________
Gecode users mailing list
users at gecode.org 
https://www.gecode.org/mailman/listinfo/gecode-users 






From cschulte at kth.se  Thu Feb 14 16:55:25 2013
From: cschulte at kth.se (Christian Schulte)
Date: Thu, 14 Feb 2013 16:55:25 +0100
Subject: [gecode-users] Branching decision updates an existing propagator
In-Reply-To: <511B6CB90200008500026A57@mail.quintiq.nl>
References: <511A6C220200008500026A1D@mail.quintiq.nl>	<004a01ce093d$20cf88d0$626e9a70$@se>
	<511B6CB90200008500026A57@mail.quintiq.nl>
Message-ID: <006401ce0acb$b4439590$1ccac0b0$@se>

David, I realized that also the assignment operator is missing! I fixed it
in the trunk.

Best
Christian

--
Christian Schulte, www.ict.kth.se/~cschulte/


-----Original Message-----
From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf
Of David Rijsman
Sent: Wednesday, February 13, 2013 10:37 AM
To: users at gecode.org; cschulte at kth.se
Subject: Re: [gecode-users] Branching decision updates an existing
propagator

Hi Christian,

thanks and indeed for the same use case. If I read correct the idea is to
have a distance graph or something as a local object embedded in a local
handle. Have at least the extended space have a handle to this object and
have each precedence propagator between two views also have a handle to this
local object. We do not want to loose the nodes in the distance graph when
we subsume a precedence propagator and therefor we need the handle in the
space. 

In MPG section 27.4 examples you have not defined the copy constructors of
the LI class. I assume we always need to have one so we can have multiple
handles to the same object, is that correct?


David J. Rijsman
Algorithm Lead
Quintiq
 
T +31 (0)73 691 07 39
F +31 (0)73 691 07 54
M +31 (0)62 127 68 29
E david.rijsman at quintiq.com
I www.quintiq.com


>>> 
From: 	"Christian Schulte" <cschulte at kth.se>
To:	"'David Rijsman'" <David.Rijsman at quintiq.com>, <users at gecode.org>
Date: 	12-2-2013 17:22
Subject: 	RE: [gecode-users] Branching decision updates an existing
propagator

Hi David,

Funny, we added support for this some time ago (also for temporal networks
;-)) but we never made it round to implement the networks (still on our todo
list).

The best way to do it is to create a local object with a local handle that
can be shared among several propagators/and or branchers. This is described
in Section 27.4 in MPG. Then the propagator can add the information to this
shared object and the brancher can read from there.

Hope that helps.

Best
Christian


--
Christian Schulte, www.ict.kth.se/~cschulte/ 


-----Original Message-----
From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf
Of David Rijsman
Sent: Tuesday, February 12, 2013 4:22 PM
To: users at gecode.org
Subject: [gecode-users] Branching decision updates an existing propagator

Hi All,

I am wondering if there is pattern to be used if I have a propagator which
can be fed with new information by a branching decision.  Specifically I
have a temporal propagator maintaining a temporal network and if a branch
decision is to introduce a new precedence relation (ordering between two
views present in the network) I would like to forward this information to
the temporal propagator. 

I was thinking of maintaining a unary relation to my temporal propagator in
my extended space, this relation might become null when the propagator is
subsumed. I also need to introduce a post precedence constraint API on my
extended space which notifies to temporal propagator of the new precedence
constraint. This API on the space can then be invoked by the brancher.

Would this be the best way of doing something like this? 



David J. Rijsman
Algorithm Lead
Quintiq
 
T +31 (0)73 691 07 39
F +31 (0)73 691 07 54
M +31 (0)62 127 68 29
E david.rijsman at quintiq.com
I www.quintiq.com 



_______________________________________________
Gecode users mailing list
users at gecode.org 
https://www.gecode.org/mailman/listinfo/gecode-users 




_______________________________________________
Gecode users mailing list
users at gecode.org
https://www.gecode.org/mailman/listinfo/gecode-users



From David.Rijsman at quintiq.com  Fri Feb 15 11:04:01 2013
From: David.Rijsman at quintiq.com (David Rijsman)
Date: Fri, 15 Feb 2013 11:04:01 +0100
Subject: [gecode-users] Custom propagator with custom advisors
Message-ID: <511E16210200008500026B9C@mail.quintiq.nl>

Hi,

attached I have small example implementing a propagator on two views (does nothing) with its own advisors. I get an error at its end of its life and I can not figure out what I am doing wrong. Any pointers what I am missing?

The error happens in line 64: MCouncil.dispose(home);

thanks,





David J. Rijsman
Algorithm Lead
Quintiq
 
T +31 (0)73 691 07 39
F +31 (0)73 691 07 54
M +31 (0)62 127 68 29
E david.rijsman at quintiq.com
I www.quintiq.com


-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: test.cpp
URL: <http://www.gecode.org/pipermail/users/attachments/20130215/44e389b8/attachment.ksh>

From David.Rijsman at quintiq.com  Fri Feb 15 11:09:06 2013
From: David.Rijsman at quintiq.com (David Rijsman)
Date: Fri, 15 Feb 2013 11:09:06 +0100
Subject: [gecode-users] Custom propagator with custom advisors
In-Reply-To: <511E16210200008500026B9C@mail.quintiq.nl>
References: <511E16210200008500026B9C@mail.quintiq.nl>
Message-ID: <511E17520200008500026BA0@mail.quintiq.nl>

I forgot to mention that this is happening on version 3.7.3 on windows 32 bits and 64 bits,


David J. Rijsman
Algorithm Lead
Quintiq
 
T +31 (0)73 691 07 39
F +31 (0)73 691 07 54
M +31 (0)62 127 68 29
E david.rijsman at quintiq.com
I www.quintiq.com


>>> 
From: 	"David Rijsman" <David.Rijsman at quintiq.com>
To:	<users at gecode.org>
Date: 	15-2-2013 11:07
Subject: 	[gecode-users] Custom propagator with custom advisors

Hi,

attached I have small example implementing a propagator on two views (does nothing) with its own advisors. I get an error at its end of its life and I can not figure out what I am doing wrong. Any pointers what I am missing?

The error happens in line 64: MCouncil.dispose(home);

thanks,





David J. Rijsman
Algorithm Lead
Quintiq
 
T +31 (0)73 691 07 39
F +31 (0)73 691 07 54
M +31 (0)62 127 68 29
E david.rijsman at quintiq.com 
I www.quintiq.com 





From cschulte at kth.se  Fri Feb 15 11:13:09 2013
From: cschulte at kth.se (Christian Schulte)
Date: Fri, 15 Feb 2013 11:13:09 +0100
Subject: [gecode-users] Custom propagator with custom advisors
In-Reply-To: <511E16210200008500026B9C@mail.quintiq.nl>
References: <511E16210200008500026B9C@mail.quintiq.nl>
Message-ID: <004701ce0b65$0ecd96c0$2c68c440$@kth.se>

Hi,

The TestPropagator constructor for cloning is broken! You update MCouncil
with itself!

Cheers
Christian

--
Christian Schulte, www.ict.kth.se/~cschulte/


> -----Original Message-----
> From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On
> Behalf Of David Rijsman
> Sent: Friday, February 15, 2013 11:04 AM
> To: users at gecode.org
> Subject: [gecode-users] Custom propagator with custom advisors
> 
> Hi,
> 
> attached I have small example implementing a propagator on two views (does
> nothing) with its own advisors. I get an error at its end of its life and
I can not
> figure out what I am doing wrong. Any pointers what I am missing?
> 
> The error happens in line 64: MCouncil.dispose(home);
> 
> thanks,
> 
> 
> 
> 
> 
> David J. Rijsman
> Algorithm Lead
> Quintiq
> 
> T +31 (0)73 691 07 39
> F +31 (0)73 691 07 54
> M +31 (0)62 127 68 29
> E david.rijsman at quintiq.com
> I www.quintiq.com
> 




From David.Rijsman at quintiq.com  Fri Feb 15 11:18:15 2013
From: David.Rijsman at quintiq.com (David Rijsman)
Date: Fri, 15 Feb 2013 11:18:15 +0100
Subject: [gecode-users] Custom propagator with custom advisors
In-Reply-To: <004701ce0b65$0ecd96c0$2c68c440$@kth.se>
References: <511E16210200008500026B9C@mail.quintiq.nl>
	<004701ce0b65$0ecd96c0$2c68c440$@kth.se>
Message-ID: <511E19770200008500026BA6@mail.quintiq.nl>

Hi Christian,

wonderful, that is indeed a mistake but that constructor is not invoked and does not resolve the problem,




David J. Rijsman
Algorithm Lead
Quintiq
 
T +31 (0)73 691 07 39
F +31 (0)73 691 07 54
M +31 (0)62 127 68 29
E david.rijsman at quintiq.com
I www.quintiq.com


>>> 
From: 	"Christian Schulte" <cschulte at kth.se>
To:	"'David Rijsman'" <David.Rijsman at quintiq.com>, <users at gecode.org>
Date: 	15-2-2013 11:13
Subject: 	RE: [gecode-users] Custom propagator with custom advisors

Hi,

The TestPropagator constructor for cloning is broken! You update MCouncil
with itself!

Cheers
Christian

--
Christian Schulte, www.ict.kth.se/~cschulte/ 


> -----Original Message-----
> From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On
> Behalf Of David Rijsman
> Sent: Friday, February 15, 2013 11:04 AM
> To: users at gecode.org 
> Subject: [gecode-users] Custom propagator with custom advisors
> 
> Hi,
> 
> attached I have small example implementing a propagator on two views (does
> nothing) with its own advisors. I get an error at its end of its life and
I can not
> figure out what I am doing wrong. Any pointers what I am missing?
> 
> The error happens in line 64: MCouncil.dispose(home);
> 
> thanks,
> 
> 
> 
> 
> 
> David J. Rijsman
> Algorithm Lead
> Quintiq
> 
> T +31 (0)73 691 07 39
> F +31 (0)73 691 07 54
> M +31 (0)62 127 68 29
> E david.rijsman at quintiq.com 
> I www.quintiq.com 
> 






From cschulte at kth.se  Fri Feb 15 11:27:08 2013
From: cschulte at kth.se (Christian Schulte)
Date: Fri, 15 Feb 2013 11:27:08 +0100
Subject: [gecode-users] Custom propagator with custom advisors
In-Reply-To: <511E19770200008500026BA6@mail.quintiq.nl>
References: <511E16210200008500026B9C@mail.quintiq.nl>
	<004701ce0b65$0ecd96c0$2c68c440$@kth.se>
	<511E19770200008500026BA6@mail.quintiq.nl>
Message-ID: <004c01ce0b67$027f3070$077d9150$@kth.se>

In the constructor of the advisor, you actually do not subscribe the advisor
but the advisor's propagator! And in dispose you cancel the advisor. Boom!

Cheers
Christian

--
Christian Schulte, www.ict.kth.se/~cschulte/


> -----Original Message-----
> From: David Rijsman [mailto:David.Rijsman at quintiq.com]
> Sent: Friday, February 15, 2013 11:18 AM
> To: users at gecode.org; cschulte at kth.se
> Subject: RE: [gecode-users] Custom propagator with custom advisors
> 
> Hi Christian,
> 
> wonderful, that is indeed a mistake but that constructor is not invoked
and does
> not resolve the problem,
> 
> 
> 
> 
> David J. Rijsman
> Algorithm Lead
> Quintiq
> 
> T +31 (0)73 691 07 39
> F +31 (0)73 691 07 54
> M +31 (0)62 127 68 29
> E david.rijsman at quintiq.com
> I www.quintiq.com
> 
> 
> >>>
> From: 	"Christian Schulte" <cschulte at kth.se>
> To:	"'David Rijsman'" <David.Rijsman at quintiq.com>, <users at gecode.org>
> Date: 	15-2-2013 11:13
> Subject: 	RE: [gecode-users] Custom propagator with custom advisors
> 
> Hi,
> 
> The TestPropagator constructor for cloning is broken! You update MCouncil
> with itself!
> 
> Cheers
> Christian
> 
> --
> Christian Schulte, www.ict.kth.se/~cschulte/
> 
> 
> > -----Original Message-----
> > From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On
> > Behalf Of David Rijsman
> > Sent: Friday, February 15, 2013 11:04 AM
> > To: users at gecode.org
> > Subject: [gecode-users] Custom propagator with custom advisors
> >
> > Hi,
> >
> > attached I have small example implementing a propagator on two views
> > (does
> > nothing) with its own advisors. I get an error at its end of its life
> > and
> I can not
> > figure out what I am doing wrong. Any pointers what I am missing?
> >
> > The error happens in line 64: MCouncil.dispose(home);
> >
> > thanks,
> >
> >
> >
> >
> >
> > David J. Rijsman
> > Algorithm Lead
> > Quintiq
> >
> > T +31 (0)73 691 07 39
> > F +31 (0)73 691 07 54
> > M +31 (0)62 127 68 29
> > E david.rijsman at quintiq.com
> > I www.quintiq.com
> >
> 
> 
> 




From David.Rijsman at quintiq.com  Fri Feb 15 11:40:35 2013
From: David.Rijsman at quintiq.com (David Rijsman)
Date: Fri, 15 Feb 2013 11:40:35 +0100
Subject: [gecode-users] Custom propagator with custom advisors
In-Reply-To: <004c01ce0b67$027f3070$077d9150$@kth.se>
References: <511E16210200008500026B9C@mail.quintiq.nl>
	<004701ce0b65$0ecd96c0$2c68c440$@kth.se>
	<511E19770200008500026BA6@mail.quintiq.nl>
	<004c01ce0b67$027f3070$077d9150$@kth.se>
Message-ID: <511E1EB30200008500026BB9@mail.quintiq.nl>

Dear Christian,

that is indeed the problem and needed the extra pair of eyes to see this mistake, thanks for reviewing this! I can also see now how this happened when I copy pasted my subscription from the propagator to the advisor when I decided to use an advisor....




David J. Rijsman
Algorithm Lead
Quintiq
 
T +31 (0)73 691 07 39
F +31 (0)73 691 07 54
M +31 (0)62 127 68 29
E david.rijsman at quintiq.com
I www.quintiq.com


>>> 
From: 	"Christian Schulte" <cschulte at kth.se>
To:	"'David Rijsman'" <David.Rijsman at quintiq.com>, <users at gecode.org>
Date: 	15-2-2013 11:27
Subject: 	RE: [gecode-users] Custom propagator with custom advisors

In the constructor of the advisor, you actually do not subscribe the advisor
but the advisor's propagator! And in dispose you cancel the advisor. Boom!

Cheers
Christian

--
Christian Schulte, www.ict.kth.se/~cschulte/ 


> -----Original Message-----
> From: David Rijsman [mailto:David.Rijsman at quintiq.com] 
> Sent: Friday, February 15, 2013 11:18 AM
> To: users at gecode.org; cschulte at kth.se 
> Subject: RE: [gecode-users] Custom propagator with custom advisors
> 
> Hi Christian,
> 
> wonderful, that is indeed a mistake but that constructor is not invoked
and does
> not resolve the problem,
> 
> 
> 
> 
> David J. Rijsman
> Algorithm Lead
> Quintiq
> 
> T +31 (0)73 691 07 39
> F +31 (0)73 691 07 54
> M +31 (0)62 127 68 29
> E david.rijsman at quintiq.com 
> I www.quintiq.com 
> 
> 
> >>>
> From: 	"Christian Schulte" <cschulte at kth.se>
> To:	"'David Rijsman'" <David.Rijsman at quintiq.com>, <users at gecode.org>
> Date: 	15-2-2013 11:13
> Subject: 	RE: [gecode-users] Custom propagator with custom advisors
> 
> Hi,
> 
> The TestPropagator constructor for cloning is broken! You update MCouncil
> with itself!
> 
> Cheers
> Christian
> 
> --
> Christian Schulte, www.ict.kth.se/~cschulte/ 
> 
> 
> > -----Original Message-----
> > From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On
> > Behalf Of David Rijsman
> > Sent: Friday, February 15, 2013 11:04 AM
> > To: users at gecode.org 
> > Subject: [gecode-users] Custom propagator with custom advisors
> >
> > Hi,
> >
> > attached I have small example implementing a propagator on two views
> > (does
> > nothing) with its own advisors. I get an error at its end of its life
> > and
> I can not
> > figure out what I am doing wrong. Any pointers what I am missing?
> >
> > The error happens in line 64: MCouncil.dispose(home);
> >
> > thanks,
> >
> >
> >
> >
> >
> > David J. Rijsman
> > Algorithm Lead
> > Quintiq
> >
> > T +31 (0)73 691 07 39
> > F +31 (0)73 691 07 54
> > M +31 (0)62 127 68 29
> > E david.rijsman at quintiq.com 
> > I www.quintiq.com 
> >
> 
> 
> 






From kyo.alone at gmail.com  Fri Feb 22 10:04:27 2013
From: kyo.alone at gmail.com (Mohamed Rezgui)
Date: Fri, 22 Feb 2013 10:04:27 +0100
Subject: [gecode-users] Problem with FlatzincSpace deep copy
Message-ID: <CAFWj1gAdxcfQiv+CMdbD8ObwT8rWtq2e6g_r4s-e_R9GneBORg@mail.gmail.com>

Hi everybody,

I have a bug to copy (deep copy) a FlatzincSpace without branhing (no
Branchers)
when I would like to start a branch and bound in only two decision
variables.

<code>
Printer p;
FlatZincSpace* fs = FlatZincSpace::parse(......);

FlatZincSpace* s_copy = fs->copy(false);
s_copy->shrinkArrays(p);


SearchOptions opt = o;
opt.threads = 1.0; //MonoThread
opt.expand();

Gecode::IntVarArgs vars(2);
vars[0] = s_copy->iv[0];
vars[1] = s_copy->iv[1];


Gecode::branch(*s_copy, vars, Gecode::INT_VAR_NONE(),
Gecode::INT_VAL_MIN());
 Gecode::Search::Engine* bab = Gecode::Search::bab(s_copy, 1.0, opt);

FlatZincSpace* solution = NULL;
solution = static_cast<FlatZincSpace*>(bab->next())
;//<----------------------- Bug here
</code>

the bug is declared in this instruction line 85
file search/sequential/bab.hh
<code>
forceinline
  BAB::BAB(Space* s, size_t sz, const Options& o)
    : Worker(sz), opt(o), d(0), mark(0), best(NULL) {
    current(s); //<----------------------- Bug here
</code>

Precisely when there is an allocation of an actorlink in s->allocated()
file search/worker.hh  line 162
<code>
forceinline void
  Worker::current(const Space* s) {
    if (s == NULL) {
      mem_total -= mem_cur;
      mem_cur = 0;
    } else {
      mem_cur = mem_space + s->allocated(); //<----------------------- Bug
here
      mem_total += mem_cur;
      if (mem_total > memory)
        memory = mem_total;
    }
  }

With Gecode rev13367

Can you help me please ?

Best Regards,
Mohammed REZGUI
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.gecode.org/pipermail/users/attachments/20130222/e88f85c0/attachment.html>

From tack at gecode.org  Fri Feb 22 10:11:11 2013
From: tack at gecode.org (Guido Tack)
Date: Fri, 22 Feb 2013 20:11:11 +1100
Subject: [gecode-users] Problem with FlatzincSpace deep copy
In-Reply-To: <CAFWj1gAdxcfQiv+CMdbD8ObwT8rWtq2e6g_r4s-e_R9GneBORg@mail.gmail.com>
References: <CAFWj1gAdxcfQiv+CMdbD8ObwT8rWtq2e6g_r4s-e_R9GneBORg@mail.gmail.com>
Message-ID: <2789700C-6693-46E4-9A07-EAE78B4B3994@gecode.org>

Hi,

you're using several classes not in the way they were designed.

First of all, you have to call clone on fs instead of copy.

Secondly, you're not supposed to create the Engine* like that.  Try the following code:

BAB<FlatZincSpace> bab(s_copy, opt);
FlatZincSpace* solution = bab.next();

Please have a look at the tutorial documentation, these things are explained there.

Cheers,
Guido

On 22/02/2013, at 20:04 , Mohamed Rezgui <kyo.alone at gmail.com> wrote:

> Hi everybody, 
> 
> I have a bug to copy (deep copy) a FlatzincSpace without branhing (no Branchers) 
> when I would like to start a branch and bound in only two decision variables.
> 
> <code>
> Printer p;
> FlatZincSpace* fs = FlatZincSpace::parse(......); 
> 
> FlatZincSpace* s_copy = fs->copy(false);
> s_copy->shrinkArrays(p);
> 
> 
> SearchOptions opt = o;
> opt.threads = 1.0; //MonoThread
> opt.expand();
> 
> Gecode::IntVarArgs vars(2);
> vars[0] = s_copy->iv[0];
> vars[1] = s_copy->iv[1];
> 
>         	
> Gecode::branch(*s_copy, vars, Gecode::INT_VAR_NONE(), Gecode::INT_VAL_MIN());
> 		
> Gecode::Search::Engine* bab = Gecode::Search::bab(s_copy, 1.0, opt); 
>         
> FlatZincSpace* solution = NULL;
> solution = static_cast<FlatZincSpace*>(bab->next()) ;//<----------------------- Bug here
> </code>
> 
> the bug is declared in this instruction line 85 
> file search/sequential/bab.hh
> <code>
> forceinline 
>   BAB::BAB(Space* s, size_t sz, const Options& o)
>     : Worker(sz), opt(o), d(0), mark(0), best(NULL) {
>     current(s); //<----------------------- Bug here
> </code>
> 
> Precisely when there is an allocation of an actorlink in s->allocated() 
> file search/worker.hh  line 162
> <code>
> forceinline void
>   Worker::current(const Space* s) {
>     if (s == NULL) {
>       mem_total -= mem_cur;
>       mem_cur = 0;
>     } else {
>       mem_cur = mem_space + s->allocated(); //<----------------------- Bug here
>       mem_total += mem_cur;
>       if (mem_total > memory)
>         memory = mem_total;
>     }
>   }
> 
> With Gecode rev13367
> 
> Can you help me please ?
> 
> Best Regards,
> Mohammed REZGUI
> _______________________________________________
> Gecode users mailing list
> users at gecode.org
> https://www.gecode.org/mailman/listinfo/gecode-users

-- 
Guido Tack,
http://www.csse.monash.edu/~guidot/



-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.gecode.org/pipermail/users/attachments/20130222/8b7e3f64/attachment.html>

From kyo.alone at gmail.com  Fri Feb 22 10:20:57 2013
From: kyo.alone at gmail.com (Mohamed Rezgui)
Date: Fri, 22 Feb 2013 10:20:57 +0100
Subject: [gecode-users] Problem with FlatzincSpace deep copy
In-Reply-To: <2789700C-6693-46E4-9A07-EAE78B4B3994@gecode.org>
References: <CAFWj1gAdxcfQiv+CMdbD8ObwT8rWtq2e6g_r4s-e_R9GneBORg@mail.gmail.com>
	<2789700C-6693-46E4-9A07-EAE78B4B3994@gecode.org>
Message-ID: <CAFWj1gCQfUYKSg8Yo-QJz2eJqbRJV92xVaonBmik+B3W154XXQ@mail.gmail.com>

OK thank you I change it but the bug is still here :S

Best Regards
Moahmed REZGUI

2013/2/22 Guido Tack <tack at gecode.org>

> Hi,
>
> you're using several classes not in the way they were designed.
>
> First of all, you have to call clone on fs instead of copy.
>
> Secondly, you're not supposed to create the Engine* like that.  Try the
> following code:
>
> BAB<FlatZincSpace> bab(s_copy, opt);
> FlatZincSpace* solution = bab.next();
>
> Please have a look at the tutorial documentation, these things are
> explained there.
>
> Cheers,
> Guido
>
> On 22/02/2013, at 20:04 , Mohamed Rezgui <kyo.alone at gmail.com> wrote:
>
> Hi everybody,
>
> I have a bug to copy (deep copy) a FlatzincSpace without branhing (no
> Branchers)
> when I would like to start a branch and bound in only two decision
> variables.
>
> <code>
> Printer p;
> FlatZincSpace* fs = FlatZincSpace::parse(......);
>
> FlatZincSpace* s_copy = fs->copy(false);
> s_copy->shrinkArrays(p);
>
>
> SearchOptions opt = o;
> opt.threads = 1.0; //MonoThread
> opt.expand();
>
> Gecode::IntVarArgs vars(2);
> vars[0] = s_copy->iv[0];
> vars[1] = s_copy->iv[1];
>
>
> Gecode::branch(*s_copy, vars, Gecode::INT_VAR_NONE(),
> Gecode::INT_VAL_MIN());
>  Gecode::Search::Engine* bab = Gecode::Search::bab(s_copy, 1.0, opt);
>
> FlatZincSpace* solution = NULL;
> solution = static_cast<FlatZincSpace*>(bab->next())
> ;//<----------------------- Bug here
> </code>
>
> the bug is declared in this instruction line 85
> file search/sequential/bab.hh
> <code>
> forceinline
>   BAB::BAB(Space* s, size_t sz, const Options& o)
>     : Worker(sz), opt(o), d(0), mark(0), best(NULL) {
>     current(s); //<----------------------- Bug here
> </code>
>
> Precisely when there is an allocation of an actorlink in s->allocated()
> file search/worker.hh  line 162
> <code>
> forceinline void
>   Worker::current(const Space* s) {
>     if (s == NULL) {
>       mem_total -= mem_cur;
>       mem_cur = 0;
>     } else {
>       mem_cur = mem_space + s->allocated(); //<----------------------- Bug
> here
>       mem_total += mem_cur;
>       if (mem_total > memory)
>         memory = mem_total;
>     }
>   }
>
> With Gecode rev13367
>
> Can you help me please ?
>
> Best Regards,
> Mohammed REZGUI
> _______________________________________________
> Gecode users mailing list
> users at gecode.org
> https://www.gecode.org/mailman/listinfo/gecode-users
>
>
> --
> Guido Tack,
> http://www.csse.monash.edu/~guidot/
>
>
>
>


-- 
Cordialement,
Mohamed REZGUI
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.gecode.org/pipermail/users/attachments/20130222/e0826b93/attachment-0001.html>

From kyo.alone at gmail.com  Fri Feb 22 10:26:17 2013
From: kyo.alone at gmail.com (Mohamed Rezgui)
Date: Fri, 22 Feb 2013 10:26:17 +0100
Subject: [gecode-users] Problem with FlatzincSpace deep copy
In-Reply-To: <CAFWj1gCQfUYKSg8Yo-QJz2eJqbRJV92xVaonBmik+B3W154XXQ@mail.gmail.com>
References: <CAFWj1gAdxcfQiv+CMdbD8ObwT8rWtq2e6g_r4s-e_R9GneBORg@mail.gmail.com>
	<2789700C-6693-46E4-9A07-EAE78B4B3994@gecode.org>
	<CAFWj1gCQfUYKSg8Yo-QJz2eJqbRJV92xVaonBmik+B3W154XXQ@mail.gmail.com>
Message-ID: <CAFWj1gCUHaTMS+h+2+_kRstxPY-BCmN2ytCiwODiqivtfSkrjg@mail.gmail.com>

and the clone() method throw en exeption Gecode::SpaceNotStable because
there are no branchers
and this is why I used copy()

Best regards,
Mohamed REZGUI

2013/2/22 Mohamed Rezgui <kyo.alone at gmail.com>

> OK thank you I change it but the bug is still here :S
>
> Best Regards
> Moahmed REZGUI
>
>
> 2013/2/22 Guido Tack <tack at gecode.org>
>
>> Hi,
>>
>> you're using several classes not in the way they were designed.
>>
>> First of all, you have to call clone on fs instead of copy.
>>
>> Secondly, you're not supposed to create the Engine* like that.  Try the
>> following code:
>>
>> BAB<FlatZincSpace> bab(s_copy, opt);
>> FlatZincSpace* solution = bab.next();
>>
>> Please have a look at the tutorial documentation, these things are
>> explained there.
>>
>> Cheers,
>> Guido
>>
>> On 22/02/2013, at 20:04 , Mohamed Rezgui <kyo.alone at gmail.com> wrote:
>>
>> Hi everybody,
>>
>> I have a bug to copy (deep copy) a FlatzincSpace without branhing (no
>> Branchers)
>> when I would like to start a branch and bound in only two decision
>> variables.
>>
>> <code>
>> Printer p;
>> FlatZincSpace* fs = FlatZincSpace::parse(......);
>>
>> FlatZincSpace* s_copy = fs->copy(false);
>> s_copy->shrinkArrays(p);
>>
>>
>> SearchOptions opt = o;
>> opt.threads = 1.0; //MonoThread
>> opt.expand();
>>
>> Gecode::IntVarArgs vars(2);
>> vars[0] = s_copy->iv[0];
>> vars[1] = s_copy->iv[1];
>>
>>
>> Gecode::branch(*s_copy, vars, Gecode::INT_VAR_NONE(),
>> Gecode::INT_VAL_MIN());
>>  Gecode::Search::Engine* bab = Gecode::Search::bab(s_copy, 1.0, opt);
>>
>> FlatZincSpace* solution = NULL;
>> solution = static_cast<FlatZincSpace*>(bab->next())
>> ;//<----------------------- Bug here
>> </code>
>>
>> the bug is declared in this instruction line 85
>> file search/sequential/bab.hh
>> <code>
>> forceinline
>>   BAB::BAB(Space* s, size_t sz, const Options& o)
>>     : Worker(sz), opt(o), d(0), mark(0), best(NULL) {
>>     current(s); //<----------------------- Bug here
>> </code>
>>
>> Precisely when there is an allocation of an actorlink in s->allocated()
>> file search/worker.hh  line 162
>> <code>
>> forceinline void
>>   Worker::current(const Space* s) {
>>     if (s == NULL) {
>>       mem_total -= mem_cur;
>>       mem_cur = 0;
>>     } else {
>>       mem_cur = mem_space + s->allocated(); //<-----------------------
>> Bug here
>>       mem_total += mem_cur;
>>       if (mem_total > memory)
>>         memory = mem_total;
>>     }
>>   }
>>
>> With Gecode rev13367
>>
>> Can you help me please ?
>>
>> Best Regards,
>> Mohammed REZGUI
>> _______________________________________________
>> Gecode users mailing list
>> users at gecode.org
>> https://www.gecode.org/mailman/listinfo/gecode-users
>>
>>
>>     --
>> Guido Tack,
>> http://www.csse.monash.edu/~guidot/
>>
>>
>>
>>
>
>
> --
> Cordialement,
> Mohamed REZGUI
>



-- 
Cordialement,
Mohamed REZGUI
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.gecode.org/pipermail/users/attachments/20130222/5ee2a7de/attachment.html>

From tack at gecode.org  Fri Feb 22 10:29:09 2013
From: tack at gecode.org (Guido Tack)
Date: Fri, 22 Feb 2013 20:29:09 +1100
Subject: [gecode-users] Problem with FlatzincSpace deep copy
In-Reply-To: <CAFWj1gCUHaTMS+h+2+_kRstxPY-BCmN2ytCiwODiqivtfSkrjg@mail.gmail.com>
References: <CAFWj1gAdxcfQiv+CMdbD8ObwT8rWtq2e6g_r4s-e_R9GneBORg@mail.gmail.com>
	<2789700C-6693-46E4-9A07-EAE78B4B3994@gecode.org>
	<CAFWj1gCQfUYKSg8Yo-QJz2eJqbRJV92xVaonBmik+B3W154XXQ@mail.gmail.com>
	<CAFWj1gCUHaTMS+h+2+_kRstxPY-BCmN2ytCiwODiqivtfSkrjg@mail.gmail.com>
Message-ID: <1EEDE370-96F3-4F31-839A-938D98C97B1B@gecode.org>

As I said, using copy won't work, in fact it's likely that this causes the problem.  Simply call status() on the space before calling clone(), that will get rid of the exception (SpaceNotStable has nothing to do with whether there are any branchers).

Cheers,
Guido

On 22/02/2013, at 20:26 , Mohamed Rezgui <kyo.alone at gmail.com> wrote:

> and the clone() method throw en exeption Gecode::SpaceNotStable because there are no branchers
> and this is why I used copy()
> 
> Best regards,
> Mohamed REZGUI
> 
> 2013/2/22 Mohamed Rezgui <kyo.alone at gmail.com>
> OK thank you I change it but the bug is still here :S
> 
> Best Regards
> Moahmed REZGUI
> 
> 
> 2013/2/22 Guido Tack <tack at gecode.org>
> Hi,
> 
> you're using several classes not in the way they were designed.
> 
> First of all, you have to call clone on fs instead of copy.
> 
> Secondly, you're not supposed to create the Engine* like that.  Try the following code:
> 
> BAB<FlatZincSpace> bab(s_copy, opt);
> FlatZincSpace* solution = bab.next();
> 
> Please have a look at the tutorial documentation, these things are explained there.
> 
> Cheers,
> Guido
> 
> On 22/02/2013, at 20:04 , Mohamed Rezgui <kyo.alone at gmail.com> wrote:
> 
>> Hi everybody, 
>> 
>> I have a bug to copy (deep copy) a FlatzincSpace without branhing (no Branchers) 
>> when I would like to start a branch and bound in only two decision variables.
>> 
>> <code>
>> Printer p;
>> FlatZincSpace* fs = FlatZincSpace::parse(......); 
>> 
>> FlatZincSpace* s_copy = fs->copy(false);
>> s_copy->shrinkArrays(p);
>> 
>> 
>> SearchOptions opt = o;
>> opt.threads = 1.0; //MonoThread
>> opt.expand();
>> 
>> Gecode::IntVarArgs vars(2);
>> vars[0] = s_copy->iv[0];
>> vars[1] = s_copy->iv[1];
>> 
>>         	
>> Gecode::branch(*s_copy, vars, Gecode::INT_VAR_NONE(), Gecode::INT_VAL_MIN());
>> 		
>> Gecode::Search::Engine* bab = Gecode::Search::bab(s_copy, 1.0, opt); 
>>         
>> FlatZincSpace* solution = NULL;
>> solution = static_cast<FlatZincSpace*>(bab->next()) ;//<----------------------- Bug here
>> </code>
>> 
>> the bug is declared in this instruction line 85 
>> file search/sequential/bab.hh
>> <code>
>> forceinline 
>>   BAB::BAB(Space* s, size_t sz, const Options& o)
>>     : Worker(sz), opt(o), d(0), mark(0), best(NULL) {
>>     current(s); //<----------------------- Bug here
>> </code>
>> 
>> Precisely when there is an allocation of an actorlink in s->allocated() 
>> file search/worker.hh  line 162
>> <code>
>> forceinline void
>>   Worker::current(const Space* s) {
>>     if (s == NULL) {
>>       mem_total -= mem_cur;
>>       mem_cur = 0;
>>     } else {
>>       mem_cur = mem_space + s->allocated(); //<----------------------- Bug here
>>       mem_total += mem_cur;
>>       if (mem_total > memory)
>>         memory = mem_total;
>>     }
>>   }
>> 
>> With Gecode rev13367
>> 
>> Can you help me please ?
>> 
>> Best Regards,
>> Mohammed REZGUI
>> _______________________________________________
>> Gecode users mailing list
>> users at gecode.org
>> https://www.gecode.org/mailman/listinfo/gecode-users
> 
> -- 
> Guido Tack,
> http://www.csse.monash.edu/~guidot/
> 
> 
> 
> 
> 
> 
> -- 
> Cordialement,
> Mohamed REZGUI
> 
> 
> 
> -- 
> Cordialement,
> Mohamed REZGUI
> _______________________________________________
> Gecode users mailing list
> users at gecode.org
> https://www.gecode.org/mailman/listinfo/gecode-users

-- 
Guido Tack,
http://www.csse.monash.edu/~guidot/



-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.gecode.org/pipermail/users/attachments/20130222/c8872d20/attachment-0001.html>

From cschulte at kth.se  Fri Feb 22 10:52:16 2013
From: cschulte at kth.se (Christian Schulte)
Date: Fri, 22 Feb 2013 10:52:16 +0100
Subject: [gecode-users] Problem with FlatzincSpace deep copy
In-Reply-To: <1EEDE370-96F3-4F31-839A-938D98C97B1B@gecode.org>
References: <CAFWj1gAdxcfQiv+CMdbD8ObwT8rWtq2e6g_r4s-e_R9GneBORg@mail.gmail.com>	<2789700C-6693-46E4-9A07-EAE78B4B3994@gecode.org>	<CAFWj1gCQfUYKSg8Yo-QJz2eJqbRJV92xVaonBmik+B3W154XXQ@mail.gmail.com>	<CAFWj1gCUHaTMS+h+2+_kRstxPY-BCmN2ytCiwODiqivtfSkrjg@mail.gmail.com>
	<1EEDE370-96F3-4F31-839A-938D98C97B1B@gecode.org>
Message-ID: <001e01ce10e2$4cc89470$e659bd50$@se>

But, first and foremost, read the documentation! 

 

Then you would have known many things in advance: that you should not
contact me but the users list, that it is clone not copy, that status
matters.

 

Honestly, why do you think there is some 450 pages plus docs if it does not
serve any purpose?

 

Christian

 

--

Christian Schulte, www.ict.kth.se/~cschulte/

 

From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf
Of Guido Tack
Sent: Friday, February 22, 2013 10:29 AM
To: Mohamed Rezgui
Cc: users at gecode.org
Subject: Re: [gecode-users] Problem with FlatzincSpace deep copy

 

As I said, using copy won't work, in fact it's likely that this causes the
problem.  Simply call status() on the space before calling clone(), that
will get rid of the exception (SpaceNotStable has nothing to do with whether
there are any branchers).

 

Cheers,

Guido

 

On 22/02/2013, at 20:26 , Mohamed Rezgui <kyo.alone at gmail.com> wrote:





and the clone() method throw en exeption Gecode::SpaceNotStable because
there are no branchers

and this is why I used copy()

 

Best regards,

Mohamed REZGUI

2013/2/22 Mohamed Rezgui <kyo.alone at gmail.com>

OK thank you I change it but the bug is still here :S

 

Best Regards

Moahmed REZGUI

 

2013/2/22 Guido Tack <tack at gecode.org>

Hi,

 

you're using several classes not in the way they were designed.

 

First of all, you have to call clone on fs instead of copy.

 

Secondly, you're not supposed to create the Engine* like that.  Try the
following code:

 

BAB<FlatZincSpace> bab(s_copy, opt);

FlatZincSpace* solution = bab.next();

 

Please have a look at the tutorial documentation, these things are explained
there.

 

Cheers,

Guido

 

On 22/02/2013, at 20:04 , Mohamed Rezgui <kyo.alone at gmail.com> wrote:

 

Hi everybody, 

 

I have a bug to copy (deep copy) a FlatzincSpace without branhing (no
Branchers) 

when I would like to start a branch and bound in only two decision
variables.

 

<code>

Printer p;

FlatZincSpace* fs = FlatZincSpace::parse(......); 

 

FlatZincSpace* s_copy = fs->copy(false);

s_copy->shrinkArrays(p);

 

 

SearchOptions opt = o;

opt.threads = 1.0; //MonoThread

opt.expand();

 

Gecode::IntVarArgs vars(2);

vars[0] = s_copy->iv[0];

vars[1] = s_copy->iv[1];

 

         

Gecode::branch(*s_copy, vars, Gecode::INT_VAR_NONE(),
Gecode::INT_VAL_MIN());

Gecode::Search::Engine* bab = Gecode::Search::bab(s_copy, 1.0, opt); 

        

FlatZincSpace* solution = NULL;

solution = static_cast<FlatZincSpace*>(bab->next())
;//<----------------------- Bug here

</code>

 

the bug is declared in this instruction line 85 

file search/sequential/bab.hh

<code>

forceinline 

  BAB::BAB(Space* s, size_t sz, const Options& o)

    : Worker(sz), opt(o), d(0), mark(0), best(NULL) {

    current(s); //<----------------------- Bug here

</code>

 

Precisely when there is an allocation of an actorlink in s->allocated() 

file search/worker.hh  line 162

<code>

forceinline void

  Worker::current(const Space* s) {

    if (s == NULL) {

      mem_total -= mem_cur;

      mem_cur = 0;

    } else {

      mem_cur = mem_space + s->allocated(); //<----------------------- Bug
here

      mem_total += mem_cur;

      if (mem_total > memory)

        memory = mem_total;

    }

  }

 

With Gecode rev13367

 

Can you help me please ?

 

Best Regards,

Mohammed REZGUI

_______________________________________________
Gecode users mailing list
users at gecode.org
https://www.gecode.org/mailman/listinfo/gecode-users

 

-- 

Guido Tack,

http://www.csse.monash.edu/~guidot/

 

 

 





 

-- 
Cordialement,

Mohamed REZGUI





 

-- 
Cordialement,

Mohamed REZGUI

_______________________________________________
Gecode users mailing list
users at gecode.org
https://www.gecode.org/mailman/listinfo/gecode-users

 

-- 

Guido Tack,

http://www.csse.monash.edu/~guidot/

 

 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.gecode.org/pipermail/users/attachments/20130222/3d4ae4bb/attachment.html>

From kyo.alone at gmail.com  Tue Feb 26 15:31:21 2013
From: kyo.alone at gmail.com (Mohamed Rezgui)
Date: Tue, 26 Feb 2013 15:31:21 +0100
Subject: [gecode-users] Problem with rev13418 performances
Message-ID: <CAFWj1gBJtbPya9MLqG7gukApcBAb2HdKGYgYV398WAoqeXs8dQ@mail.gmail.com>

Hi,

I made benchmark with the attached instance
(2DLevelPacking_Class5_20_6.fzn) from the minizinc challenges with the
latest version of gecode revision 13418 in release mode.

When I compare performances between this version and the 3.7.3 version of
gecode, I am so surprised !!!.
Gecode 3.7.3 is faster than the latest revision !!!

I just use the parameter -s for stats :
---> gecode/bin/fz -s 2DLevelPacking_Class5_20_6.fzn

Use of E7-4870 Intel processor

Benchmarks with gecode rev13418 :

%%  runtime:       2594.74 (2594737 ms)
%%  solvetime:     2594.72 (2594718 ms)
%%  workers:     1
%%  type search:     bab
%%  solutions:     1
%%  objective:     9
%%  variables:     801
%%  propagators:   70
%%  propagations:  22306041
%%  nodes:         1564742
%%  failures:      702986
%%  restarts:      0
%%  peak depth:    51
%%  peak memory:   838 KB

Benchmarks with gecode 3.7.3 :
%%  runtime:       32.394 (32394.264 ms)
%%  solvetime:     32.384 (32384.895 ms)
%%  workers:     1
%%  type search:     bab
%%  solutions:     1
%%  variables:     801
%%  objective:     9
%%  propagators:   70
%%  propagations:  23159635
%%  nodes:         3114256
%%  failures:      1557118
%%  peak depth:    53
%%  peak memory:   2831 KB

Can you help me about that ???
Is it better that I work with 3.7.3 version ???
Thank you for your attention.

-- 
Best Regards,
Mohamed REZGUI
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.gecode.org/pipermail/users/attachments/20130226/69d61f17/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: 2DLevelPacking_Class5_20_6.fzn
Type: application/octet-stream
Size: 47770 bytes
Desc: not available
URL: <http://www.gecode.org/pipermail/users/attachments/20130226/69d61f17/attachment-0001.obj>

From cschulte at kth.se  Tue Feb 26 15:58:21 2013
From: cschulte at kth.se (Christian Schulte)
Date: Tue, 26 Feb 2013 15:58:21 +0100
Subject: [gecode-users] Problem with rev13418 performances
In-Reply-To: <CAFWj1gBJtbPya9MLqG7gukApcBAb2HdKGYgYV398WAoqeXs8dQ@mail.gmail.com>
References: <CAFWj1gBJtbPya9MLqG7gukApcBAb2HdKGYgYV398WAoqeXs8dQ@mail.gmail.com>
Message-ID: <004b01ce1431$b85c68e0$29153aa0$@se>

That's what happens when you use the trunk, you should never, because, yes,
it is the trunk and not a release ;-)

 

The difference is easy to explain though. The instance you have chosen does
not have a search annotation in it, so Gecode picks some default search
(which for this type of problems is a desaster anyway). And we just changed
the default search behavior for the upcoming Gecode 4.

 

But then there is another observation: Did you compile both versions with
exactly the same flags? I doubt. Please check this.

 

Christian

 

--

Christian Schulte, Professor of Computer Science, KTH,
www.ict.kth.se/~cschulte/

 

From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf
Of Mohamed Rezgui
Sent: Tuesday, February 26, 2013 3:31 PM
To: users at gecode.org
Subject: [gecode-users] Problem with rev13418 performances

 

Hi, 

 

I made benchmark with the attached instance (2DLevelPacking_Class5_20_6.fzn)
from the minizinc challenges with the latest version of gecode revision
13418 in release mode.

 

When I compare performances between this version and the 3.7.3 version of
gecode, I am so surprised !!!.

Gecode 3.7.3 is faster than the latest revision !!!

 

I just use the parameter -s for stats :

---> gecode/bin/fz -s 2DLevelPacking_Class5_20_6.fzn

 

Use of E7-4870 Intel processor

 

Benchmarks with gecode rev13418 :

 

%%  runtime:       2594.74 (2594737 ms)

%%  solvetime:     2594.72 (2594718 ms)

%%  workers:     1

%%  type search:     bab

%%  solutions:     1

%%  objective:     9

%%  variables:     801

%%  propagators:   70

%%  propagations:  22306041

%%  nodes:         1564742

%%  failures:      702986

%%  restarts:      0

%%  peak depth:    51

%%  peak memory:   838 KB

 

Benchmarks with gecode 3.7.3 :

%%  runtime:       32.394 (32394.264 ms)

%%  solvetime:     32.384 (32384.895 ms)

%%  workers:     1

%%  type search:     bab

%%  solutions:     1

%%  variables:     801

%%  objective:     9

%%  propagators:   70

%%  propagations:  23159635

%%  nodes:         3114256

%%  failures:      1557118

%%  peak depth:    53

%%  peak memory:   2831 KB

 

Can you help me about that ???

Is it better that I work with 3.7.3 version ??? 

Thank you for your attention.

 

-- 
Best Regards,

Mohamed REZGUI

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.gecode.org/pipermail/users/attachments/20130226/9b1429da/attachment.html>

From kyo.alone at gmail.com  Tue Feb 26 16:22:35 2013
From: kyo.alone at gmail.com (Mohamed Rezgui)
Date: Tue, 26 Feb 2013 16:22:35 +0100
Subject: [gecode-users] Problem with rev13418 performances
In-Reply-To: <004b01ce1431$b85c68e0$29153aa0$@se>
References: <CAFWj1gBJtbPya9MLqG7gukApcBAb2HdKGYgYV398WAoqeXs8dQ@mail.gmail.com>
	<004b01ce1431$b85c68e0$29153aa0$@se>
Message-ID: <CAFWj1gDsa0LbgDAhcqUEyR0Fn4=ZVnr1bVii9+OLtX8nLx-t1Q@mail.gmail.com>

OK so I will work with gecode 3.7.3.

I just compile the revision with cmake and I use gecode 3.7.3 from download
section of the official website.
I will see the flags used in compilation.

Thank you for all ^^
Best Regards,
Mohamed REZGUI

2013/2/26 Christian Schulte <cschulte at kth.se>

> That's what happens when you use the trunk, you should never, because,
> yes, it is the trunk and not a release ;-)****
>
> ** **
>
> The difference is easy to explain though. The instance you have chosen
> does not have a search annotation in it, so Gecode picks some default
> search (which for this type of problems is a desaster anyway). And we just
> changed the default search behavior for the upcoming Gecode 4.****
>
> ** **
>
> But then there is another observation: Did you compile both versions with
> exactly the same flags? I doubt. Please check this.****
>
> ** **
>
> Christian****
>
> ** **
>
> --****
>
> Christian Schulte, Professor of Computer Science, KTH,
> www.ict.kth.se/~cschulte/****
>
> ** **
>
> *From:* users-bounces at gecode.org [mailto:users-bounces at gecode.org] *On
> Behalf Of *Mohamed Rezgui
> *Sent:* Tuesday, February 26, 2013 3:31 PM
> *To:* users at gecode.org
> *Subject:* [gecode-users] Problem with rev13418 performances****
>
> ** **
>
> Hi, ****
>
> ** **
>
> I made benchmark with the attached instance
> (2DLevelPacking_Class5_20_6.fzn) from the minizinc challenges with the
> latest version of gecode revision 13418 in release mode.****
>
> ** **
>
> When I compare performances between this version and the 3.7.3 version of
> gecode, I am so surprised !!!.****
>
> Gecode 3.7.3 is faster than the latest revision !!!****
>
> ** **
>
> I just use the parameter -s for stats :****
>
> ---> gecode/bin/fz -s 2DLevelPacking_Class5_20_6.fzn****
>
> ** **
>
> Use of E7-4870 Intel processor****
>
> ** **
>
> Benchmarks with gecode rev13418 :****
>
> ** **
>
> %%  runtime:       2594.74 (2594737 ms)****
>
> %%  solvetime:     2594.72 (2594718 ms)****
>
> %%  workers:     1****
>
> %%  type search:     bab****
>
> %%  solutions:     1****
>
> %%  objective:     9****
>
> %%  variables:     801****
>
> %%  propagators:   70****
>
> %%  propagations:  22306041****
>
> %%  nodes:         1564742****
>
> %%  failures:      702986****
>
> %%  restarts:      0****
>
> %%  peak depth:    51****
>
> %%  peak memory:   838 KB****
>
> ** **
>
> Benchmarks with gecode 3.7.3 :****
>
> %%  runtime:       32.394 (32394.264 ms)****
>
> %%  solvetime:     32.384 (32384.895 ms)****
>
> %%  workers:     1****
>
> %%  type search:     bab****
>
> %%  solutions:     1****
>
> %%  variables:     801****
>
> %%  objective:     9****
>
> %%  propagators:   70****
>
> %%  propagations:  23159635****
>
> %%  nodes:         3114256****
>
> %%  failures:      1557118****
>
> %%  peak depth:    53****
>
> %%  peak memory:   2831 KB****
>
> ** **
>
> Can you help me about that ???****
>
> Is it better that I work with 3.7.3 version ??? ****
>
> Thank you for your attention.****
>
> ** **
>
> --
> Best Regards,****
>
> Mohamed REZGUI
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.gecode.org/pipermail/users/attachments/20130226/1a9144fa/attachment.html>

From victor.zverovich at gmail.com  Tue Feb 26 18:11:49 2013
From: victor.zverovich at gmail.com (victor.zverovich at gmail.com)
Date: Tue, 26 Feb 2013 09:11:49 -0800
Subject: [gecode-users] Problem with rev13418 performances
In-Reply-To: <CAFWj1gDsa0LbgDAhcqUEyR0Fn4=ZVnr1bVii9+OLtX8nLx-t1Q@mail.gmail.com>
References: <CAFWj1gBJtbPya9MLqG7gukApcBAb2HdKGYgYV398WAoqeXs8dQ@mail.gmail.com>
	<004b01ce1431$b85c68e0$29153aa0$@se>
	<CAFWj1gDsa0LbgDAhcqUEyR0Fn4=ZVnr1bVii9+OLtX8nLx-t1Q@mail.gmail.com>
Message-ID: <CANawtxYj36txFYy-iip8TrtmP_MKQc5TWQDpLm0e5mmw_dohbg@mail.gmail.com>

CMake supports different build types, make sure that you use the Release
one to enable optimizations and disable asserts and debug info. You can do
it at configuration time with the following command:

  cmake -DCMAKE_BUILD_TYPE=Release

HTH,
Victor

On Tue, Feb 26, 2013 at 7:22 AM, Mohamed Rezgui <kyo.alone at gmail.com> wrote:

> OK so I will work with gecode 3.7.3.
>
> I just compile the revision with cmake and I use gecode 3.7.3 from
> download section of the official website.
> I will see the flags used in compilation.
>
> Thank you for all ^^
> Best Regards,
> Mohamed REZGUI
>
> 2013/2/26 Christian Schulte <cschulte at kth.se>
>
>> That's what happens when you use the trunk, you should never, because,
>> yes, it is the trunk and not a release ;-)****
>>
>> ** **
>>
>> The difference is easy to explain though. The instance you have chosen
>> does not have a search annotation in it, so Gecode picks some default
>> search (which for this type of problems is a desaster anyway). And we just
>> changed the default search behavior for the upcoming Gecode 4.****
>>
>> ** **
>>
>> But then there is another observation: Did you compile both versions with
>> exactly the same flags? I doubt. Please check this.****
>>
>> ** **
>>
>> Christian****
>>
>> ** **
>>
>> --****
>>
>> Christian Schulte, Professor of Computer Science, KTH,
>> www.ict.kth.se/~cschulte/****
>>
>> ** **
>>
>> *From:* users-bounces at gecode.org [mailto:users-bounces at gecode.org] *On
>> Behalf Of *Mohamed Rezgui
>> *Sent:* Tuesday, February 26, 2013 3:31 PM
>> *To:* users at gecode.org
>> *Subject:* [gecode-users] Problem with rev13418 performances****
>>
>> ** **
>>
>> Hi, ****
>>
>> ** **
>>
>> I made benchmark with the attached instance
>> (2DLevelPacking_Class5_20_6.fzn) from the minizinc challenges with the
>> latest version of gecode revision 13418 in release mode.****
>>
>> ** **
>>
>> When I compare performances between this version and the 3.7.3 version of
>> gecode, I am so surprised !!!.****
>>
>> Gecode 3.7.3 is faster than the latest revision !!!****
>>
>> ** **
>>
>> I just use the parameter -s for stats :****
>>
>> ---> gecode/bin/fz -s 2DLevelPacking_Class5_20_6.fzn****
>>
>> ** **
>>
>> Use of E7-4870 Intel processor****
>>
>> ** **
>>
>> Benchmarks with gecode rev13418 :****
>>
>> ** **
>>
>> %%  runtime:       2594.74 (2594737 ms)****
>>
>> %%  solvetime:     2594.72 (2594718 ms)****
>>
>> %%  workers:     1****
>>
>> %%  type search:     bab****
>>
>> %%  solutions:     1****
>>
>> %%  objective:     9****
>>
>> %%  variables:     801****
>>
>> %%  propagators:   70****
>>
>> %%  propagations:  22306041****
>>
>> %%  nodes:         1564742****
>>
>> %%  failures:      702986****
>>
>> %%  restarts:      0****
>>
>> %%  peak depth:    51****
>>
>> %%  peak memory:   838 KB****
>>
>> ** **
>>
>> Benchmarks with gecode 3.7.3 :****
>>
>> %%  runtime:       32.394 (32394.264 ms)****
>>
>> %%  solvetime:     32.384 (32384.895 ms)****
>>
>> %%  workers:     1****
>>
>> %%  type search:     bab****
>>
>> %%  solutions:     1****
>>
>> %%  variables:     801****
>>
>> %%  objective:     9****
>>
>> %%  propagators:   70****
>>
>> %%  propagations:  23159635****
>>
>> %%  nodes:         3114256****
>>
>> %%  failures:      1557118****
>>
>> %%  peak depth:    53****
>>
>> %%  peak memory:   2831 KB****
>>
>> ** **
>>
>> Can you help me about that ???****
>>
>> Is it better that I work with 3.7.3 version ??? ****
>>
>> Thank you for your attention.****
>>
>> ** **
>>
>> --
>> Best Regards,****
>>
>> Mohamed REZGUI
>>
>
> _______________________________________________
> Gecode users mailing list
> users at gecode.org
> https://www.gecode.org/mailman/listinfo/gecode-users
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.gecode.org/pipermail/users/attachments/20130226/b9587ccc/attachment-0001.html>

From kyo.alone at gmail.com  Tue Feb 26 19:49:13 2013
From: kyo.alone at gmail.com (Mohamed Rezgui)
Date: Tue, 26 Feb 2013 19:49:13 +0100
Subject: [gecode-users] Problem with rev13418 performances
In-Reply-To: <CANawtxYj36txFYy-iip8TrtmP_MKQc5TWQDpLm0e5mmw_dohbg@mail.gmail.com>
References: <CAFWj1gBJtbPya9MLqG7gukApcBAb2HdKGYgYV398WAoqeXs8dQ@mail.gmail.com>
	<004b01ce1431$b85c68e0$29153aa0$@se>
	<CAFWj1gDsa0LbgDAhcqUEyR0Fn4=ZVnr1bVii9+OLtX8nLx-t1Q@mail.gmail.com>
	<CANawtxYj36txFYy-iip8TrtmP_MKQc5TWQDpLm0e5mmw_dohbg@mail.gmail.com>
Message-ID: <CAFWj1gCaEWCswcg+ad4JOr1pQo_5+4UJiZeAgu9TGQQv8xZyXg@mail.gmail.com>

Hi Victor,

thank you, I dit it but no speed up come. As Christian Schulte says : it
rather the default strategy is bad.
I hope the new version (4.0) comes soon ^^.

Thank you for your attention ^^
Best regards,
Mohamed REZGUI

2013/2/26 victor.zverovich at gmail.com <victor.zverovich at gmail.com>

> CMake supports different build types, make sure that you use the Release
> one to enable optimizations and disable asserts and debug info. You can do
> it at configuration time with the following command:
>
>   cmake -DCMAKE_BUILD_TYPE=Release
>
> HTH,
> Victor
>
> On Tue, Feb 26, 2013 at 7:22 AM, Mohamed Rezgui <kyo.alone at gmail.com>wrote:
>
>> OK so I will work with gecode 3.7.3.
>>
>> I just compile the revision with cmake and I use gecode 3.7.3 from
>> download section of the official website.
>> I will see the flags used in compilation.
>>
>> Thank you for all ^^
>> Best Regards,
>> Mohamed REZGUI
>>
>> 2013/2/26 Christian Schulte <cschulte at kth.se>
>>
>>> That's what happens when you use the trunk, you should never, because,
>>> yes, it is the trunk and not a release ;-)****
>>>
>>> ** **
>>>
>>> The difference is easy to explain though. The instance you have chosen
>>> does not have a search annotation in it, so Gecode picks some default
>>> search (which for this type of problems is a desaster anyway). And we just
>>> changed the default search behavior for the upcoming Gecode 4.****
>>>
>>> ** **
>>>
>>> But then there is another observation: Did you compile both versions
>>> with exactly the same flags? I doubt. Please check this.****
>>>
>>> ** **
>>>
>>> Christian****
>>>
>>> ** **
>>>
>>> --****
>>>
>>> Christian Schulte, Professor of Computer Science, KTH,
>>> www.ict.kth.se/~cschulte/****
>>>
>>> ** **
>>>
>>> *From:* users-bounces at gecode.org [mailto:users-bounces at gecode.org] *On
>>> Behalf Of *Mohamed Rezgui
>>> *Sent:* Tuesday, February 26, 2013 3:31 PM
>>> *To:* users at gecode.org
>>> *Subject:* [gecode-users] Problem with rev13418 performances****
>>>
>>> ** **
>>>
>>> Hi, ****
>>>
>>> ** **
>>>
>>> I made benchmark with the attached instance
>>> (2DLevelPacking_Class5_20_6.fzn) from the minizinc challenges with the
>>> latest version of gecode revision 13418 in release mode.****
>>>
>>> ** **
>>>
>>> When I compare performances between this version and the 3.7.3 version
>>> of gecode, I am so surprised !!!.****
>>>
>>> Gecode 3.7.3 is faster than the latest revision !!!****
>>>
>>> ** **
>>>
>>> I just use the parameter -s for stats :****
>>>
>>> ---> gecode/bin/fz -s 2DLevelPacking_Class5_20_6.fzn****
>>>
>>> ** **
>>>
>>> Use of E7-4870 Intel processor****
>>>
>>> ** **
>>>
>>> Benchmarks with gecode rev13418 :****
>>>
>>> ** **
>>>
>>> %%  runtime:       2594.74 (2594737 ms)****
>>>
>>> %%  solvetime:     2594.72 (2594718 ms)****
>>>
>>> %%  workers:     1****
>>>
>>> %%  type search:     bab****
>>>
>>> %%  solutions:     1****
>>>
>>> %%  objective:     9****
>>>
>>> %%  variables:     801****
>>>
>>> %%  propagators:   70****
>>>
>>> %%  propagations:  22306041****
>>>
>>> %%  nodes:         1564742****
>>>
>>> %%  failures:      702986****
>>>
>>> %%  restarts:      0****
>>>
>>> %%  peak depth:    51****
>>>
>>> %%  peak memory:   838 KB****
>>>
>>> ** **
>>>
>>> Benchmarks with gecode 3.7.3 :****
>>>
>>> %%  runtime:       32.394 (32394.264 ms)****
>>>
>>> %%  solvetime:     32.384 (32384.895 ms)****
>>>
>>> %%  workers:     1****
>>>
>>> %%  type search:     bab****
>>>
>>> %%  solutions:     1****
>>>
>>> %%  variables:     801****
>>>
>>> %%  objective:     9****
>>>
>>> %%  propagators:   70****
>>>
>>> %%  propagations:  23159635****
>>>
>>> %%  nodes:         3114256****
>>>
>>> %%  failures:      1557118****
>>>
>>> %%  peak depth:    53****
>>>
>>> %%  peak memory:   2831 KB****
>>>
>>> ** **
>>>
>>> Can you help me about that ???****
>>>
>>> Is it better that I work with 3.7.3 version ??? ****
>>>
>>> Thank you for your attention.****
>>>
>>> ** **
>>>
>>> --
>>> Best Regards,****
>>>
>>> Mohamed REZGUI
>>>
>>
>> _______________________________________________
>> Gecode users mailing list
>> users at gecode.org
>> https://www.gecode.org/mailman/listinfo/gecode-users
>>
>>
>


-- 
Cordialement,
Mohamed REZGUI
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.gecode.org/pipermail/users/attachments/20130226/a0cbf957/attachment.html>

From cschulte at kth.se  Tue Feb 26 21:12:44 2013
From: cschulte at kth.se (Christian Schulte)
Date: Tue, 26 Feb 2013 21:12:44 +0100
Subject: [gecode-users] Problem with rev13418 performances
In-Reply-To: <CAFWj1gCaEWCswcg+ad4JOr1pQo_5+4UJiZeAgu9TGQQv8xZyXg@mail.gmail.com>
References: <CAFWj1gBJtbPya9MLqG7gukApcBAb2HdKGYgYV398WAoqeXs8dQ@mail.gmail.com>	<004b01ce1431$b85c68e0$29153aa0$@se>	<CAFWj1gDsa0LbgDAhcqUEyR0Fn4=ZVnr1bVii9+OLtX8nLx-t1Q@mail.gmail.com>	<CANawtxYj36txFYy-iip8TrtmP_MKQc5TWQDpLm0e5mmw_dohbg@mail.gmail.com>
	<CAFWj1gCaEWCswcg+ad4JOr1pQo_5+4UJiZeAgu9TGQQv8xZyXg@mail.gmail.com>
Message-ID: <002d01ce145d$a422ef30$ec68cd90$@kth.se>

Hi,

 

I just tried myself and there is indeed a big bug somewhere. It appears to
be in the flatzinc stuff and not only due to the branching, one can see that
by the difference in number of nodes explored per second (it looks it also
has a memory leak of epic proportions and prints random messages on the
screen). I checked the base Gecode stuff and there everything is fine, the
trunk is in most cases slightly faster.

 

But as said, it's the trunk ;-)

 

Cheers

Christian

 

--

Christian Schulte, www.ict.kth.se/~cschulte/

 

From: Mohamed Rezgui [mailto:kyo.alone at gmail.com] 
Sent: Tuesday, February 26, 2013 7:49 PM
To: victor.zverovich at gmail.com
Cc: cschulte at kth.se; users at gecode.org
Subject: Re: [gecode-users] Problem with rev13418 performances

 

Hi Victor,

 

thank you, I dit it but no speed up come. As Christian Schulte says : it
rather the default strategy is bad.

I hope the new version (4.0) comes soon ^^.

 

Thank you for your attention ^^

Best regards,

Mohamed REZGUI

 

2013/2/26 victor.zverovich at gmail.com <victor.zverovich at gmail.com>

CMake supports different build types, make sure that you use the Release one
to enable optimizations and disable asserts and debug info. You can do it at
configuration time with the following command:

 

  cmake -DCMAKE_BUILD_TYPE=Release

 

HTH,

Victor

 

On Tue, Feb 26, 2013 at 7:22 AM, Mohamed Rezgui <kyo.alone at gmail.com> wrote:

OK so I will work with gecode 3.7.3. 

 

I just compile the revision with cmake and I use gecode 3.7.3 from download
section of the official website.  

I will see the flags used in compilation. 

 

Thank you for all ^^

Best Regards,

Mohamed REZGUI

 

2013/2/26 Christian Schulte <cschulte at kth.se>

That's what happens when you use the trunk, you should never, because, yes,
it is the trunk and not a release ;-)

 

The difference is easy to explain though. The instance you have chosen does
not have a search annotation in it, so Gecode picks some default search
(which for this type of problems is a desaster anyway). And we just changed
the default search behavior for the upcoming Gecode 4.

 

But then there is another observation: Did you compile both versions with
exactly the same flags? I doubt. Please check this.

 

Christian

 

--

Christian Schulte, Professor of Computer Science, KTH,
www.ict.kth.se/~cschulte/

 

From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf
Of Mohamed Rezgui
Sent: Tuesday, February 26, 2013 3:31 PM
To: users at gecode.org
Subject: [gecode-users] Problem with rev13418 performances

 

Hi, 

 

I made benchmark with the attached instance (2DLevelPacking_Class5_20_6.fzn)
from the minizinc challenges with the latest version of gecode revision
13418 in release mode.

 

When I compare performances between this version and the 3.7.3 version of
gecode, I am so surprised !!!.

Gecode 3.7.3 is faster than the latest revision !!!

 

I just use the parameter -s for stats :

---> gecode/bin/fz -s 2DLevelPacking_Class5_20_6.fzn

 

Use of E7-4870 Intel processor

 

Benchmarks with gecode rev13418 :

 

%%  runtime:       2594.74 (2594737 ms)

%%  solvetime:     2594.72 (2594718 ms)

%%  workers:     1

%%  type search:     bab

%%  solutions:     1

%%  objective:     9

%%  variables:     801

%%  propagators:   70

%%  propagations:  22306041

%%  nodes:         1564742

%%  failures:      702986

%%  restarts:      0

%%  peak depth:    51

%%  peak memory:   838 KB

 

Benchmarks with gecode 3.7.3 :

%%  runtime:       32.394 (32394.264 ms)

%%  solvetime:     32.384 (32384.895 ms)

%%  workers:     1

%%  type search:     bab

%%  solutions:     1

%%  variables:     801

%%  objective:     9

%%  propagators:   70

%%  propagations:  23159635

%%  nodes:         3114256

%%  failures:      1557118

%%  peak depth:    53

%%  peak memory:   2831 KB

 

Can you help me about that ???

Is it better that I work with 3.7.3 version ??? 

Thank you for your attention.

 

-- 
Best Regards,

Mohamed REZGUI

 

_______________________________________________
Gecode users mailing list
users at gecode.org
https://www.gecode.org/mailman/listinfo/gecode-users

 





 

-- 
Cordialement,

Mohamed REZGUI

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.gecode.org/pipermail/users/attachments/20130226/a7ad8b50/attachment-0001.html>

From kyo.alone at gmail.com  Tue Feb 26 21:37:22 2013
From: kyo.alone at gmail.com (Mohamed Rezgui)
Date: Tue, 26 Feb 2013 21:37:22 +0100
Subject: [gecode-users] Problem with rev13418 performances
In-Reply-To: <002d01ce145d$a422ef30$ec68cd90$@kth.se>
References: <CAFWj1gBJtbPya9MLqG7gukApcBAb2HdKGYgYV398WAoqeXs8dQ@mail.gmail.com>
	<004b01ce1431$b85c68e0$29153aa0$@se>
	<CAFWj1gDsa0LbgDAhcqUEyR0Fn4=ZVnr1bVii9+OLtX8nLx-t1Q@mail.gmail.com>
	<CANawtxYj36txFYy-iip8TrtmP_MKQc5TWQDpLm0e5mmw_dohbg@mail.gmail.com>
	<CAFWj1gCaEWCswcg+ad4JOr1pQo_5+4UJiZeAgu9TGQQv8xZyXg@mail.gmail.com>
	<002d01ce145d$a422ef30$ec68cd90$@kth.se>
Message-ID: <CAFWj1gB2nyZAmd-gE1E-J==8Bf5W5GuEtG5TxTCrmGgiRvCsiA@mail.gmail.com>

Hi,

I tried also with cmake in 3.7.3 compilation and I have the same thing.
So, in your opinion, is it better to remove some instances in my benchmarks
or to use 3.7.3 version ?

Best Regards,
Mohamed REZGUI

2013/2/26 Christian Schulte <cschulte at kth.se>

> Hi,****
>
> ** **
>
> I just tried myself and there is indeed a big bug somewhere. It appears to
> be in the flatzinc stuff and not only due to the branching, one can see
> that by the difference in number of nodes explored per second (it looks it
> also has a memory leak of epic proportions and prints random messages on
> the screen). I checked the base Gecode stuff and there everything is fine,
> the trunk is in most cases slightly faster.****
>
> ** **
>
> But as said, it?s the trunk ;-)****
>
> ** **
>
> Cheers****
>
> Christian****
>
> ** **
>
> --****
>
> Christian Schulte, www.ict.kth.se/~cschulte/****
>
> ** **
>
> *From:* Mohamed Rezgui [mailto:kyo.alone at gmail.com]
> *Sent:* Tuesday, February 26, 2013 7:49 PM
> *To:* victor.zverovich at gmail.com
> *Cc:* cschulte at kth.se; users at gecode.org
> *Subject:* Re: [gecode-users] Problem with rev13418 performances****
>
> ** **
>
> Hi Victor,****
>
> ** **
>
> thank you, I dit it but no speed up come. As Christian Schulte says : it
> rather the default strategy is bad.****
>
> I hope the new version (4.0) comes soon ^^.****
>
> ** **
>
> Thank you for your attention ^^****
>
> Best regards,****
>
> Mohamed REZGUI****
>
> ** **
>
> 2013/2/26 victor.zverovich at gmail.com <victor.zverovich at gmail.com>****
>
> CMake supports different build types, make sure that you use the Release
> one to enable optimizations and disable asserts and debug info. You can do
> it at configuration time with the following command:****
>
> ** **
>
>   cmake -DCMAKE_BUILD_TYPE=Release****
>
> ** **
>
> HTH,****
>
> Victor****
>
> ** **
>
> On Tue, Feb 26, 2013 at 7:22 AM, Mohamed Rezgui <kyo.alone at gmail.com>
> wrote:****
>
> OK so I will work with gecode 3.7.3. ****
>
> ** **
>
> I just compile the revision with cmake and I use gecode 3.7.3 from
> download section of the official website.  ****
>
> I will see the flags used in compilation. ****
>
> ** **
>
> Thank you for all ^^****
>
> Best Regards,****
>
> Mohamed REZGUI****
>
> ** **
>
> 2013/2/26 Christian Schulte <cschulte at kth.se>****
>
> That's what happens when you use the trunk, you should never, because,
> yes, it is the trunk and not a release ;-)****
>
>  ****
>
> The difference is easy to explain though. The instance you have chosen
> does not have a search annotation in it, so Gecode picks some default
> search (which for this type of problems is a desaster anyway). And we just
> changed the default search behavior for the upcoming Gecode 4.****
>
>  ****
>
> But then there is another observation: Did you compile both versions with
> exactly the same flags? I doubt. Please check this.****
>
>  ****
>
> Christian****
>
>  ****
>
> --****
>
> Christian Schulte, Professor of Computer Science, KTH,
> www.ict.kth.se/~cschulte/****
>
>  ****
>
> *From:* users-bounces at gecode.org [mailto:users-bounces at gecode.org] *On
> Behalf Of *Mohamed Rezgui
> *Sent:* Tuesday, February 26, 2013 3:31 PM
> *To:* users at gecode.org
> *Subject:* [gecode-users] Problem with rev13418 performances****
>
>  ****
>
> Hi, ****
>
>  ****
>
> I made benchmark with the attached instance
> (2DLevelPacking_Class5_20_6.fzn) from the minizinc challenges with the
> latest version of gecode revision 13418 in release mode.****
>
>  ****
>
> When I compare performances between this version and the 3.7.3 version of
> gecode, I am so surprised !!!.****
>
> Gecode 3.7.3 is faster than the latest revision !!!****
>
>  ****
>
> I just use the parameter -s for stats :****
>
> ---> gecode/bin/fz -s 2DLevelPacking_Class5_20_6.fzn****
>
>  ****
>
> Use of E7-4870 Intel processor****
>
>  ****
>
> Benchmarks with gecode rev13418 :****
>
>  ****
>
> %%  runtime:       2594.74 (2594737 ms)****
>
> %%  solvetime:     2594.72 (2594718 ms)****
>
> %%  workers:     1****
>
> %%  type search:     bab****
>
> %%  solutions:     1****
>
> %%  objective:     9****
>
> %%  variables:     801****
>
> %%  propagators:   70****
>
> %%  propagations:  22306041****
>
> %%  nodes:         1564742****
>
> %%  failures:      702986****
>
> %%  restarts:      0****
>
> %%  peak depth:    51****
>
> %%  peak memory:   838 KB****
>
>  ****
>
> Benchmarks with gecode 3.7.3 :****
>
> %%  runtime:       32.394 (32394.264 ms)****
>
> %%  solvetime:     32.384 (32384.895 ms)****
>
> %%  workers:     1****
>
> %%  type search:     bab****
>
> %%  solutions:     1****
>
> %%  variables:     801****
>
> %%  objective:     9****
>
> %%  propagators:   70****
>
> %%  propagations:  23159635****
>
> %%  nodes:         3114256****
>
> %%  failures:      1557118****
>
> %%  peak depth:    53****
>
> %%  peak memory:   2831 KB****
>
>  ****
>
> Can you help me about that ???****
>
> Is it better that I work with 3.7.3 version ??? ****
>
> Thank you for your attention.****
>
>  ****
>
> --
> Best Regards,****
>
> Mohamed REZGUI****
>
> ** **
>
> _______________________________________________
> Gecode users mailing list
> users at gecode.org
> https://www.gecode.org/mailman/listinfo/gecode-users****
>
> ** **
>
>
>
> ****
>
> ** **
>
> --
> Cordialement,****
>
> Mohamed REZGUI****
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.gecode.org/pipermail/users/attachments/20130226/bb8bc825/attachment.html>

From tack at gecode.org  Tue Feb 26 23:41:32 2013
From: tack at gecode.org (Guido Tack)
Date: Wed, 27 Feb 2013 09:41:32 +1100
Subject: [gecode-users] Problem with rev13418 performances
In-Reply-To: <CAFWj1gB2nyZAmd-gE1E-J==8Bf5W5GuEtG5TxTCrmGgiRvCsiA@mail.gmail.com>
References: <CAFWj1gBJtbPya9MLqG7gukApcBAb2HdKGYgYV398WAoqeXs8dQ@mail.gmail.com>
	<004b01ce1431$b85c68e0$29153aa0$@se>
	<CAFWj1gDsa0LbgDAhcqUEyR0Fn4=ZVnr1bVii9+OLtX8nLx-t1Q@mail.gmail.com>
	<CANawtxYj36txFYy-iip8TrtmP_MKQc5TWQDpLm0e5mmw_dohbg@mail.gmail.com>
	<CAFWj1gCaEWCswcg+ad4JOr1pQo_5+4UJiZeAgu9TGQQv8xZyXg@mail.gmail.com>
	<002d01ce145d$a422ef30$ec68cd90$@kth.se>
	<CAFWj1gB2nyZAmd-gE1E-J==8Bf5W5GuEtG5TxTCrmGgiRvCsiA@mail.gmail.com>
Message-ID: <16B058C8-03D7-4EC4-98FE-65E821F850F5@gecode.org>

There was a memory leak in flatzinc.  It's now fixed in the trunk, I tried your example and it seems to work fine.

As Christian said, FlatZinc in the trunk uses a different search heuristic if you don't specify the search in the model, so the behaviour may still be slightly different.

Cheers,
Guido

On 27/02/2013, at 7:37 AM, Mohamed Rezgui <kyo.alone at gmail.com> wrote:

> Hi,
> 
> I tried also with cmake in 3.7.3 compilation and I have the same thing.
> So, in your opinion, is it better to remove some instances in my benchmarks or to use 3.7.3 version ?
> 
> Best Regards,
> Mohamed REZGUI
> 
> 2013/2/26 Christian Schulte <cschulte at kth.se>
> Hi,
> 
>  
> 
> I just tried myself and there is indeed a big bug somewhere. It appears to be in the flatzinc stuff and not only due to the branching, one can see that by the difference in number of nodes explored per second (it looks it also has a memory leak of epic proportions and prints random messages on the screen). I checked the base Gecode stuff and there everything is fine, the trunk is in most cases slightly faster.
> 
>  
> 
> But as said, it?s the trunk ;-)
> 
>  
> 
> Cheers
> 
> Christian
> 
>  
> 
> --
> 
> Christian Schulte, www.ict.kth.se/~cschulte/
> 
>  
> 
> From: Mohamed Rezgui [mailto:kyo.alone at gmail.com] 
> Sent: Tuesday, February 26, 2013 7:49 PM
> To: victor.zverovich at gmail.com
> Cc: cschulte at kth.se; users at gecode.org
> Subject: Re: [gecode-users] Problem with rev13418 performances
> 
>  
> 
> Hi Victor,
> 
>  
> 
> thank you, I dit it but no speed up come. As Christian Schulte says : it rather the default strategy is bad.
> 
> I hope the new version (4.0) comes soon ^^.
> 
>  
> 
> Thank you for your attention ^^
> 
> Best regards,
> 
> Mohamed REZGUI
> 
>  
> 
> 2013/2/26 victor.zverovich at gmail.com <victor.zverovich at gmail.com>
> 
> CMake supports different build types, make sure that you use the Release one to enable optimizations and disable asserts and debug info. You can do it at configuration time with the following command:
> 
>  
> 
>   cmake -DCMAKE_BUILD_TYPE=Release
> 
>  
> 
> HTH,
> 
> Victor
> 
>  
> 
> On Tue, Feb 26, 2013 at 7:22 AM, Mohamed Rezgui <kyo.alone at gmail.com> wrote:
> 
> OK so I will work with gecode 3.7.3. 
> 
>  
> 
> I just compile the revision with cmake and I use gecode 3.7.3 from download section of the official website.  
> 
> I will see the flags used in compilation. 
> 
>  
> 
> Thank you for all ^^
> 
> Best Regards,
> 
> Mohamed REZGUI
> 
>  
> 
> 2013/2/26 Christian Schulte <cschulte at kth.se>
> 
> That's what happens when you use the trunk, you should never, because, yes, it is the trunk and not a release ;-)
> 
>  
> 
> The difference is easy to explain though. The instance you have chosen does not have a search annotation in it, so Gecode picks some default search (which for this type of problems is a desaster anyway). And we just changed the default search behavior for the upcoming Gecode 4.
> 
>  
> 
> But then there is another observation: Did you compile both versions with exactly the same flags? I doubt. Please check this.
> 
>  
> 
> Christian
> 
>  
> 
> --
> 
> Christian Schulte, Professor of Computer Science, KTH, www.ict.kth.se/~cschulte/
> 
>  
> 
> From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf Of Mohamed Rezgui
> Sent: Tuesday, February 26, 2013 3:31 PM
> To: users at gecode.org
> Subject: [gecode-users] Problem with rev13418 performances
> 
>  
> 
> Hi, 
> 
>  
> 
> I made benchmark with the attached instance (2DLevelPacking_Class5_20_6.fzn) from the minizinc challenges with the latest version of gecode revision 13418 in release mode.
> 
>  
> 
> When I compare performances between this version and the 3.7.3 version of gecode, I am so surprised !!!.
> 
> Gecode 3.7.3 is faster than the latest revision !!!
> 
>  
> 
> I just use the parameter -s for stats :
> 
> ---> gecode/bin/fz -s 2DLevelPacking_Class5_20_6.fzn
> 
>  
> 
> Use of E7-4870 Intel processor
> 
>  
> 
> Benchmarks with gecode rev13418 :
> 
>  
> 
> %%  runtime:       2594.74 (2594737 ms)
> 
> %%  solvetime:     2594.72 (2594718 ms)
> 
> %%  workers:     1
> 
> %%  type search:     bab
> 
> %%  solutions:     1
> 
> %%  objective:     9
> 
> %%  variables:     801
> 
> %%  propagators:   70
> 
> %%  propagations:  22306041
> 
> %%  nodes:         1564742
> 
> %%  failures:      702986
> 
> %%  restarts:      0
> 
> %%  peak depth:    51
> 
> %%  peak memory:   838 KB
> 
>  
> 
> Benchmarks with gecode 3.7.3 :
> 
> %%  runtime:       32.394 (32394.264 ms)
> 
> %%  solvetime:     32.384 (32384.895 ms)
> 
> %%  workers:     1
> 
> %%  type search:     bab
> 
> %%  solutions:     1
> 
> %%  variables:     801
> 
> %%  objective:     9
> 
> %%  propagators:   70
> 
> %%  propagations:  23159635
> 
> %%  nodes:         3114256
> 
> %%  failures:      1557118
> 
> %%  peak depth:    53
> 
> %%  peak memory:   2831 KB
> 
>  
> 
> Can you help me about that ???
> 
> Is it better that I work with 3.7.3 version ??? 
> 
> Thank you for your attention.
> 
>  
> 
> -- 
> Best Regards,
> 
> Mohamed REZGUI
> 
>  
> 
> _______________________________________________
> Gecode users mailing list
> users at gecode.org
> https://www.gecode.org/mailman/listinfo/gecode-users
> 
>  
> 
> 
> 
> 
>  
> 
> -- 
> Cordialement,
> 
> Mohamed REZGUI
> 
> 
> _______________________________________________
> Gecode users mailing list
> users at gecode.org
> https://www.gecode.org/mailman/listinfo/gecode-users

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.gecode.org/pipermail/users/attachments/20130227/c4be361e/attachment-0001.html>

From kyo.alone at gmail.com  Wed Feb 27 07:23:56 2013
From: kyo.alone at gmail.com (Mohamed Rezgui)
Date: Wed, 27 Feb 2013 07:23:56 +0100
Subject: [gecode-users] Problem with rev13418 performances
In-Reply-To: <16B058C8-03D7-4EC4-98FE-65E821F850F5@gecode.org>
References: <CAFWj1gBJtbPya9MLqG7gukApcBAb2HdKGYgYV398WAoqeXs8dQ@mail.gmail.com>
	<004b01ce1431$b85c68e0$29153aa0$@se>
	<CAFWj1gDsa0LbgDAhcqUEyR0Fn4=ZVnr1bVii9+OLtX8nLx-t1Q@mail.gmail.com>
	<CANawtxYj36txFYy-iip8TrtmP_MKQc5TWQDpLm0e5mmw_dohbg@mail.gmail.com>
	<CAFWj1gCaEWCswcg+ad4JOr1pQo_5+4UJiZeAgu9TGQQv8xZyXg@mail.gmail.com>
	<002d01ce145d$a422ef30$ec68cd90$@kth.se>
	<CAFWj1gB2nyZAmd-gE1E-J==8Bf5W5GuEtG5TxTCrmGgiRvCsiA@mail.gmail.com>
	<16B058C8-03D7-4EC4-98FE-65E821F850F5@gecode.org>
Message-ID: <CAFWj1gCRR1jm_3cNKhV_2mBS0q=sH_R0mJzGWgqmWKSpBugWjQ@mail.gmail.com>

OK thank you very much.
I found another bug in linking the libgecodeflatzinc.
error reference with Flatzinc::parse ...
so I must include the files parser.tab.cpp and lexer.yy.cpp in MakeFile.in
--> FLATZINCSRC0 = flatzinc.cpp registry.cpp parser.tab.cpp lexer.yy.cpp
to link successfully.

Can you fix this bug please ?
Thank you very much for your work ^^ You are the best ^^

Best Regards,
Mohamed REZGUI

2013/2/26 Guido Tack <tack at gecode.org>

> There was a memory leak in flatzinc.  It's now fixed in the trunk, I tried
> your example and it seems to work fine.
>
> As Christian said, FlatZinc in the trunk uses a different search heuristic
> if you don't specify the search in the model, so the behaviour may still be
> slightly different.
>
> Cheers,
> Guido
>
> On 27/02/2013, at 7:37 AM, Mohamed Rezgui <kyo.alone at gmail.com> wrote:
>
> Hi,
>
> I tried also with cmake in 3.7.3 compilation and I have the same thing.
> So, in your opinion, is it better to remove some instances in my
> benchmarks or to use 3.7.3 version ?
>
> Best Regards,
> Mohamed REZGUI
>
> 2013/2/26 Christian Schulte <cschulte at kth.se>
>
>> Hi,****
>>
>> ** **
>>
>> I just tried myself and there is indeed a big bug somewhere. It appears
>> to be in the flatzinc stuff and not only due to the branching, one can see
>> that by the difference in number of nodes explored per second (it looks it
>> also has a memory leak of epic proportions and prints random messages on
>> the screen). I checked the base Gecode stuff and there everything is fine,
>> the trunk is in most cases slightly faster.****
>>
>> ** **
>>
>> But as said, it?s the trunk ;-)****
>>
>> ** **
>>
>> Cheers****
>>
>> Christian****
>>
>> ** **
>>
>> --****
>>
>> Christian Schulte, www.ict.kth.se/~cschulte/****
>>
>> ** **
>>
>> *From:* Mohamed Rezgui [mailto:kyo.alone at gmail.com]
>> *Sent:* Tuesday, February 26, 2013 7:49 PM
>> *To:* victor.zverovich at gmail.com
>> *Cc:* cschulte at kth.se; users at gecode.org
>> *Subject:* Re: [gecode-users] Problem with rev13418 performances****
>>
>> ** **
>>
>> Hi Victor,****
>>
>> ** **
>>
>> thank you, I dit it but no speed up come. As Christian Schulte says : it
>> rather the default strategy is bad.****
>>
>> I hope the new version (4.0) comes soon ^^.****
>>
>> ** **
>>
>> Thank you for your attention ^^****
>>
>> Best regards,****
>>
>> Mohamed REZGUI****
>>
>> ** **
>>
>> 2013/2/26 victor.zverovich at gmail.com <victor.zverovich at gmail.com>****
>>
>> CMake supports different build types, make sure that you use the Release
>> one to enable optimizations and disable asserts and debug info. You can do
>> it at configuration time with the following command:****
>>
>> ** **
>>
>>   cmake -DCMAKE_BUILD_TYPE=Release****
>>
>> ** **
>>
>> HTH,****
>>
>> Victor****
>>
>> ** **
>>
>> On Tue, Feb 26, 2013 at 7:22 AM, Mohamed Rezgui <kyo.alone at gmail.com>
>> wrote:****
>>
>> OK so I will work with gecode 3.7.3. ****
>>
>> ** **
>>
>> I just compile the revision with cmake and I use gecode 3.7.3 from
>> download section of the official website.  ****
>>
>> I will see the flags used in compilation. ****
>>
>> ** **
>>
>> Thank you for all ^^****
>>
>> Best Regards,****
>>
>> Mohamed REZGUI****
>>
>> ** **
>>
>> 2013/2/26 Christian Schulte <cschulte at kth.se>****
>>
>> That's what happens when you use the trunk, you should never, because,
>> yes, it is the trunk and not a release ;-)****
>>
>>  ****
>>
>> The difference is easy to explain though. The instance you have chosen
>> does not have a search annotation in it, so Gecode picks some default
>> search (which for this type of problems is a desaster anyway). And we just
>> changed the default search behavior for the upcoming Gecode 4.****
>>
>>  ****
>>
>> But then there is another observation: Did you compile both versions with
>> exactly the same flags? I doubt. Please check this.****
>>
>>  ****
>>
>> Christian****
>>
>>  ****
>>
>> --****
>>
>> Christian Schulte, Professor of Computer Science, KTH,
>> www.ict.kth.se/~cschulte/****
>>
>>  ****
>>
>> *From:* users-bounces at gecode.org [mailto:users-bounces at gecode.org] *On
>> Behalf Of *Mohamed Rezgui
>> *Sent:* Tuesday, February 26, 2013 3:31 PM
>> *To:* users at gecode.org
>> *Subject:* [gecode-users] Problem with rev13418 performances****
>>
>>  ****
>>
>> Hi, ****
>>
>>  ****
>>
>> I made benchmark with the attached instance
>> (2DLevelPacking_Class5_20_6.fzn) from the minizinc challenges with the
>> latest version of gecode revision 13418 in release mode.****
>>
>>  ****
>>
>> When I compare performances between this version and the 3.7.3 version of
>> gecode, I am so surprised !!!.****
>>
>> Gecode 3.7.3 is faster than the latest revision !!!****
>>
>>  ****
>>
>> I just use the parameter -s for stats :****
>>
>> ---> gecode/bin/fz -s 2DLevelPacking_Class5_20_6.fzn****
>>
>>  ****
>>
>> Use of E7-4870 Intel processor****
>>
>>  ****
>>
>> Benchmarks with gecode rev13418 :****
>>
>>  ****
>>
>> %%  runtime:       2594.74 (2594737 ms)****
>>
>> %%  solvetime:     2594.72 (2594718 ms)****
>>
>> %%  workers:     1****
>>
>> %%  type search:     bab****
>>
>> %%  solutions:     1****
>>
>> %%  objective:     9****
>>
>> %%  variables:     801****
>>
>> %%  propagators:   70****
>>
>> %%  propagations:  22306041****
>>
>> %%  nodes:         1564742****
>>
>> %%  failures:      702986****
>>
>> %%  restarts:      0****
>>
>> %%  peak depth:    51****
>>
>> %%  peak memory:   838 KB****
>>
>>  ****
>>
>> Benchmarks with gecode 3.7.3 :****
>>
>> %%  runtime:       32.394 (32394.264 ms)****
>>
>> %%  solvetime:     32.384 (32384.895 ms)****
>>
>> %%  workers:     1****
>>
>> %%  type search:     bab****
>>
>> %%  solutions:     1****
>>
>> %%  variables:     801****
>>
>> %%  objective:     9****
>>
>> %%  propagators:   70****
>>
>> %%  propagations:  23159635****
>>
>> %%  nodes:         3114256****
>>
>> %%  failures:      1557118****
>>
>> %%  peak depth:    53****
>>
>> %%  peak memory:   2831 KB****
>>
>>  ****
>>
>> Can you help me about that ???****
>>
>> Is it better that I work with 3.7.3 version ??? ****
>>
>> Thank you for your attention.****
>>
>>  ****
>>
>> --
>> Best Regards,****
>>
>> Mohamed REZGUI****
>>
>> ** **
>>
>> _______________________________________________
>> Gecode users mailing list
>> users at gecode.org
>> https://www.gecode.org/mailman/listinfo/gecode-users****
>>
>> ** **
>>
>>
>>
>> ****
>>
>> ** **
>>
>> --
>> Cordialement,****
>>
>> Mohamed REZGUI****
>>
>
>  _______________________________________________
> Gecode users mailing list
> users at gecode.org
> https://www.gecode.org/mailman/listinfo/gecode-users
>
>
>


-- 
Cordialement,
Mohamed REZGUI
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.gecode.org/pipermail/users/attachments/20130227/859d1cdc/attachment.html>

From kyo.alone at gmail.com  Wed Feb 27 07:36:36 2013
From: kyo.alone at gmail.com (Mohamed Rezgui)
Date: Wed, 27 Feb 2013 07:36:36 +0100
Subject: [gecode-users] Problem with rev13418 performances
In-Reply-To: <CAFWj1gCRR1jm_3cNKhV_2mBS0q=sH_R0mJzGWgqmWKSpBugWjQ@mail.gmail.com>
References: <CAFWj1gBJtbPya9MLqG7gukApcBAb2HdKGYgYV398WAoqeXs8dQ@mail.gmail.com>
	<004b01ce1431$b85c68e0$29153aa0$@se>
	<CAFWj1gDsa0LbgDAhcqUEyR0Fn4=ZVnr1bVii9+OLtX8nLx-t1Q@mail.gmail.com>
	<CANawtxYj36txFYy-iip8TrtmP_MKQc5TWQDpLm0e5mmw_dohbg@mail.gmail.com>
	<CAFWj1gCaEWCswcg+ad4JOr1pQo_5+4UJiZeAgu9TGQQv8xZyXg@mail.gmail.com>
	<002d01ce145d$a422ef30$ec68cd90$@kth.se>
	<CAFWj1gB2nyZAmd-gE1E-J==8Bf5W5GuEtG5TxTCrmGgiRvCsiA@mail.gmail.com>
	<16B058C8-03D7-4EC4-98FE-65E821F850F5@gecode.org>
	<CAFWj1gCRR1jm_3cNKhV_2mBS0q=sH_R0mJzGWgqmWKSpBugWjQ@mail.gmail.com>
Message-ID: <CAFWj1gCRekbuX=Eq099s0x+RrN=3894juuE0OAr+=HegdaszHw@mail.gmail.com>

sorry, I do not finish with the bug. Can you undefine HAVE_MMAP in windows
compilation of the flatzinc library too please (in CMakeList.txt) ? ^^


Best Regards,
Mohamed REZGUI

2013/2/27 Mohamed Rezgui <kyo.alone at gmail.com>

> OK thank you very much.
> I found another bug in linking the libgecodeflatzinc.
> error reference with Flatzinc::parse ...
> so I must include the files parser.tab.cpp and lexer.yy.cpp in MakeFile.in
> --> FLATZINCSRC0 = flatzinc.cpp registry.cpp parser.tab.cpp lexer.yy.cpp
> to link successfully.
>
> Can you fix this bug please ?
> Thank you very much for your work ^^ You are the best ^^
>
> Best Regards,
> Mohamed REZGUI
>
> 2013/2/26 Guido Tack <tack at gecode.org>
>
>> There was a memory leak in flatzinc.  It's now fixed in the trunk, I
>> tried your example and it seems to work fine.
>>
>> As Christian said, FlatZinc in the trunk uses a different search
>> heuristic if you don't specify the search in the model, so the behaviour
>> may still be slightly different.
>>
>> Cheers,
>> Guido
>>
>> On 27/02/2013, at 7:37 AM, Mohamed Rezgui <kyo.alone at gmail.com> wrote:
>>
>> Hi,
>>
>> I tried also with cmake in 3.7.3 compilation and I have the same thing.
>> So, in your opinion, is it better to remove some instances in my
>> benchmarks or to use 3.7.3 version ?
>>
>>  Best Regards,
>> Mohamed REZGUI
>>
>> 2013/2/26 Christian Schulte <cschulte at kth.se>
>>
>>> Hi,****
>>>
>>> ** **
>>>
>>> I just tried myself and there is indeed a big bug somewhere. It appears
>>> to be in the flatzinc stuff and not only due to the branching, one can see
>>> that by the difference in number of nodes explored per second (it looks it
>>> also has a memory leak of epic proportions and prints random messages on
>>> the screen). I checked the base Gecode stuff and there everything is fine,
>>> the trunk is in most cases slightly faster.****
>>>
>>> ** **
>>>
>>> But as said, it?s the trunk ;-)****
>>>
>>> ** **
>>>
>>> Cheers****
>>>
>>> Christian****
>>>
>>> ** **
>>>
>>> --****
>>>
>>> Christian Schulte, www.ict.kth.se/~cschulte/****
>>>
>>> ** **
>>>
>>> *From:* Mohamed Rezgui [mailto:kyo.alone at gmail.com]
>>> *Sent:* Tuesday, February 26, 2013 7:49 PM
>>> *To:* victor.zverovich at gmail.com
>>> *Cc:* cschulte at kth.se; users at gecode.org
>>> *Subject:* Re: [gecode-users] Problem with rev13418 performances****
>>>
>>> ** **
>>>
>>> Hi Victor,****
>>>
>>> ** **
>>>
>>> thank you, I dit it but no speed up come. As Christian Schulte says :
>>> it rather the default strategy is bad.****
>>>
>>> I hope the new version (4.0) comes soon ^^.****
>>>
>>> ** **
>>>
>>> Thank you for your attention ^^****
>>>
>>> Best regards,****
>>>
>>> Mohamed REZGUI****
>>>
>>> ** **
>>>
>>> 2013/2/26 victor.zverovich at gmail.com <victor.zverovich at gmail.com>****
>>>
>>> CMake supports different build types, make sure that you use the Release
>>> one to enable optimizations and disable asserts and debug info. You can do
>>> it at configuration time with the following command:****
>>>
>>> ** **
>>>
>>>   cmake -DCMAKE_BUILD_TYPE=Release****
>>>
>>> ** **
>>>
>>> HTH,****
>>>
>>> Victor****
>>>
>>> ** **
>>>
>>> On Tue, Feb 26, 2013 at 7:22 AM, Mohamed Rezgui <kyo.alone at gmail.com>
>>> wrote:****
>>>
>>> OK so I will work with gecode 3.7.3. ****
>>>
>>> ** **
>>>
>>> I just compile the revision with cmake and I use gecode 3.7.3 from
>>> download section of the official website.  ****
>>>
>>> I will see the flags used in compilation. ****
>>>
>>> ** **
>>>
>>> Thank you for all ^^****
>>>
>>> Best Regards,****
>>>
>>> Mohamed REZGUI****
>>>
>>> ** **
>>>
>>> 2013/2/26 Christian Schulte <cschulte at kth.se>****
>>>
>>> That's what happens when you use the trunk, you should never, because,
>>> yes, it is the trunk and not a release ;-)****
>>>
>>>  ****
>>>
>>> The difference is easy to explain though. The instance you have chosen
>>> does not have a search annotation in it, so Gecode picks some default
>>> search (which for this type of problems is a desaster anyway). And we just
>>> changed the default search behavior for the upcoming Gecode 4.****
>>>
>>>  ****
>>>
>>> But then there is another observation: Did you compile both versions
>>> with exactly the same flags? I doubt. Please check this.****
>>>
>>>  ****
>>>
>>> Christian****
>>>
>>>  ****
>>>
>>> --****
>>>
>>> Christian Schulte, Professor of Computer Science, KTH,
>>> www.ict.kth.se/~cschulte/****
>>>
>>>  ****
>>>
>>> *From:* users-bounces at gecode.org [mailto:users-bounces at gecode.org] *On
>>> Behalf Of *Mohamed Rezgui
>>> *Sent:* Tuesday, February 26, 2013 3:31 PM
>>> *To:* users at gecode.org
>>> *Subject:* [gecode-users] Problem with rev13418 performances****
>>>
>>>  ****
>>>
>>> Hi, ****
>>>
>>>  ****
>>>
>>> I made benchmark with the attached instance
>>> (2DLevelPacking_Class5_20_6.fzn) from the minizinc challenges with the
>>> latest version of gecode revision 13418 in release mode.****
>>>
>>>  ****
>>>
>>> When I compare performances between this version and the 3.7.3 version
>>> of gecode, I am so surprised !!!.****
>>>
>>> Gecode 3.7.3 is faster than the latest revision !!!****
>>>
>>>  ****
>>>
>>> I just use the parameter -s for stats :****
>>>
>>> ---> gecode/bin/fz -s 2DLevelPacking_Class5_20_6.fzn****
>>>
>>>  ****
>>>
>>> Use of E7-4870 Intel processor****
>>>
>>>  ****
>>>
>>> Benchmarks with gecode rev13418 :****
>>>
>>>  ****
>>>
>>> %%  runtime:       2594.74 (2594737 ms)****
>>>
>>> %%  solvetime:     2594.72 (2594718 ms)****
>>>
>>> %%  workers:     1****
>>>
>>> %%  type search:     bab****
>>>
>>> %%  solutions:     1****
>>>
>>> %%  objective:     9****
>>>
>>> %%  variables:     801****
>>>
>>> %%  propagators:   70****
>>>
>>> %%  propagations:  22306041****
>>>
>>> %%  nodes:         1564742****
>>>
>>> %%  failures:      702986****
>>>
>>> %%  restarts:      0****
>>>
>>> %%  peak depth:    51****
>>>
>>> %%  peak memory:   838 KB****
>>>
>>>  ****
>>>
>>> Benchmarks with gecode 3.7.3 :****
>>>
>>> %%  runtime:       32.394 (32394.264 ms)****
>>>
>>> %%  solvetime:     32.384 (32384.895 ms)****
>>>
>>> %%  workers:     1****
>>>
>>> %%  type search:     bab****
>>>
>>> %%  solutions:     1****
>>>
>>> %%  variables:     801****
>>>
>>> %%  objective:     9****
>>>
>>> %%  propagators:   70****
>>>
>>> %%  propagations:  23159635****
>>>
>>> %%  nodes:         3114256****
>>>
>>> %%  failures:      1557118****
>>>
>>> %%  peak depth:    53****
>>>
>>> %%  peak memory:   2831 KB****
>>>
>>>  ****
>>>
>>> Can you help me about that ???****
>>>
>>> Is it better that I work with 3.7.3 version ??? ****
>>>
>>> Thank you for your attention.****
>>>
>>>  ****
>>>
>>> --
>>> Best Regards,****
>>>
>>> Mohamed REZGUI****
>>>
>>> ** **
>>>
>>> _______________________________________________
>>> Gecode users mailing list
>>> users at gecode.org
>>> https://www.gecode.org/mailman/listinfo/gecode-users****
>>>
>>> ** **
>>>
>>>
>>>
>>> ****
>>>
>>> ** **
>>>
>>> --
>>> Cordialement,****
>>>
>>> Mohamed REZGUI****
>>>
>>
>>  _______________________________________________
>> Gecode users mailing list
>> users at gecode.org
>> https://www.gecode.org/mailman/listinfo/gecode-users
>>
>>
>>
>
>
> --
> Cordialement,
> Mohamed REZGUI
>



-- 
Cordialement,
Mohamed REZGUI
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.gecode.org/pipermail/users/attachments/20130227/6998f768/attachment-0001.html>

From cschulte at kth.se  Wed Feb 27 10:45:38 2013
From: cschulte at kth.se (Christian Schulte)
Date: Wed, 27 Feb 2013 10:45:38 +0100
Subject: [gecode-users] Problem with rev13418 performances
In-Reply-To: <CAFWj1gCRR1jm_3cNKhV_2mBS0q=sH_R0mJzGWgqmWKSpBugWjQ@mail.gmail.com>
References: <CAFWj1gBJtbPya9MLqG7gukApcBAb2HdKGYgYV398WAoqeXs8dQ@mail.gmail.com>	<004b01ce1431$b85c68e0$29153aa0$@se>	<CAFWj1gDsa0LbgDAhcqUEyR0Fn4=ZVnr1bVii9+OLtX8nLx-t1Q@mail.gmail.com>	<CANawtxYj36txFYy-iip8TrtmP_MKQc5TWQDpLm0e5mmw_dohbg@mail.gmail.com>	<CAFWj1gCaEWCswcg+ad4JOr1pQo_5+4UJiZeAgu9TGQQv8xZyXg@mail.gmail.com>	<002d01ce145d$a422ef30$ec68cd90$@kth.se>	<CAFWj1gB2nyZAmd-gE1E-J==8Bf5W5GuEtG5TxTCrmGgiRvCsiA@mail.gmail.com>	<16B058C8-03D7-4EC4-98FE-65E821F850F5@gecode.org>
	<CAFWj1gCRR1jm_3cNKhV_2mBS0q=sH_R0mJzGWgqmWKSpBugWjQ@mail.gmail.com>
Message-ID: <009201ce14cf$3389d5a0$9a9d80e0$@se>

There is no possibility to demand fixes on the trunk.

 

For the last time: this is the trunk (this means development version) and
not a released version, use the released version. To quote the download
page:

                Please note, however, that this version reflects work in
progress, so there may be bugs. It even may not compile at all. So, for the
curious and venturous, the URL is

 

Christian

 

--

Christian Schulte, Professor of Computer Science, KTH,
www.ict.kth.se/~cschulte/

 

From: Mohamed Rezgui [mailto:kyo.alone at gmail.com] 
Sent: Wednesday, February 27, 2013 7:24 AM
To: Guido Tack
Cc: cschulte at kth.se; users at gecode.org
Subject: Re: [gecode-users] Problem with rev13418 performances

 

OK thank you very much. 

I found another bug in linking the libgecodeflatzinc.

error reference with Flatzinc::parse ...

so I must include the files parser.tab.cpp and lexer.yy.cpp in MakeFile.in

--> FLATZINCSRC0 = flatzinc.cpp registry.cpp parser.tab.cpp lexer.yy.cpp

to link successfully.

 

Can you fix this bug please ?

Thank you very much for your work ^^ You are the best ^^

 

Best Regards,

Mohamed REZGUI

 

2013/2/26 Guido Tack <tack at gecode.org>

There was a memory leak in flatzinc.  It's now fixed in the trunk, I tried
your example and it seems to work fine.

 

As Christian said, FlatZinc in the trunk uses a different search heuristic
if you don't specify the search in the model, so the behaviour may still be
slightly different.

 

Cheers,

Guido

 

On 27/02/2013, at 7:37 AM, Mohamed Rezgui <kyo.alone at gmail.com> wrote:





Hi,

 

I tried also with cmake in 3.7.3 compilation and I have the same thing.

So, in your opinion, is it better to remove some instances in my benchmarks
or to use 3.7.3 version ?

 

Best Regards,

Mohamed REZGUI

 

2013/2/26 Christian Schulte <cschulte at kth.se>

Hi,

 

I just tried myself and there is indeed a big bug somewhere. It appears to
be in the flatzinc stuff and not only due to the branching, one can see that
by the difference in number of nodes explored per second (it looks it also
has a memory leak of epic proportions and prints random messages on the
screen). I checked the base Gecode stuff and there everything is fine, the
trunk is in most cases slightly faster.

 

But as said, it's the trunk ;-)

 

Cheers

Christian

 

--

Christian Schulte, www.ict.kth.se/~cschulte/

 

From: Mohamed Rezgui [mailto:kyo.alone at gmail.com] 
Sent: Tuesday, February 26, 2013 7:49 PM
To: victor.zverovich at gmail.com
Cc: cschulte at kth.se; users at gecode.org
Subject: Re: [gecode-users] Problem with rev13418 performances

 

Hi Victor,

 

thank you, I dit it but no speed up come. As Christian Schulte says : it
rather the default strategy is bad.

I hope the new version (4.0) comes soon ^^.

 

Thank you for your attention ^^

Best regards,

Mohamed REZGUI

 

2013/2/26 victor.zverovich at gmail.com <victor.zverovich at gmail.com>

CMake supports different build types, make sure that you use the Release one
to enable optimizations and disable asserts and debug info. You can do it at
configuration time with the following command:

 

  cmake -DCMAKE_BUILD_TYPE=Release

 

HTH,

Victor

 

On Tue, Feb 26, 2013 at 7:22 AM, Mohamed Rezgui <kyo.alone at gmail.com> wrote:

OK so I will work with gecode 3.7.3. 

 

I just compile the revision with cmake and I use gecode 3.7.3 from download
section of the official website.  

I will see the flags used in compilation. 

 

Thank you for all ^^

Best Regards,

Mohamed REZGUI

 

2013/2/26 Christian Schulte <cschulte at kth.se>

That's what happens when you use the trunk, you should never, because, yes,
it is the trunk and not a release ;-)

 

The difference is easy to explain though. The instance you have chosen does
not have a search annotation in it, so Gecode picks some default search
(which for this type of problems is a desaster anyway). And we just changed
the default search behavior for the upcoming Gecode 4.

 

But then there is another observation: Did you compile both versions with
exactly the same flags? I doubt. Please check this.

 

Christian

 

--

Christian Schulte, Professor of Computer Science, KTH,
www.ict.kth.se/~cschulte/

 

From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf
Of Mohamed Rezgui
Sent: Tuesday, February 26, 2013 3:31 PM
To: users at gecode.org
Subject: [gecode-users] Problem with rev13418 performances

 

Hi, 

 

I made benchmark with the attached instance (2DLevelPacking_Class5_20_6.fzn)
from the minizinc challenges with the latest version of gecode revision
13418 in release mode.

 

When I compare performances between this version and the 3.7.3 version of
gecode, I am so surprised !!!.

Gecode 3.7.3 is faster than the latest revision !!!

 

I just use the parameter -s for stats :

---> gecode/bin/fz -s 2DLevelPacking_Class5_20_6.fzn

 

Use of E7-4870 Intel processor

 

Benchmarks with gecode rev13418 :

 

%%  runtime:       2594.74 (2594737 ms)

%%  solvetime:     2594.72 (2594718 ms)

%%  workers:     1

%%  type search:     bab

%%  solutions:     1

%%  objective:     9

%%  variables:     801

%%  propagators:   70

%%  propagations:  22306041

%%  nodes:         1564742

%%  failures:      702986

%%  restarts:      0

%%  peak depth:    51

%%  peak memory:   838 KB

 

Benchmarks with gecode 3.7.3 :

%%  runtime:       32.394 (32394.264 ms)

%%  solvetime:     32.384 (32384.895 ms)

%%  workers:     1

%%  type search:     bab

%%  solutions:     1

%%  variables:     801

%%  objective:     9

%%  propagators:   70

%%  propagations:  23159635

%%  nodes:         3114256

%%  failures:      1557118

%%  peak depth:    53

%%  peak memory:   2831 KB

 

Can you help me about that ???

Is it better that I work with 3.7.3 version ??? 

Thank you for your attention.

 

-- 
Best Regards,

Mohamed REZGUI

 

_______________________________________________
Gecode users mailing list
users at gecode.org
https://www.gecode.org/mailman/listinfo/gecode-users

 





 

-- 
Cordialement,

Mohamed REZGUI

 

_______________________________________________
Gecode users mailing list
users at gecode.org
https://www.gecode.org/mailman/listinfo/gecode-users

 





 

-- 
Cordialement,

Mohamed REZGUI

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.gecode.org/pipermail/users/attachments/20130227/09fb8924/attachment-0001.html>

