From l.digaspero at uniud.it  Sat Mar  1 09:22:42 2014
From: l.digaspero at uniud.it (Luca Di Gaspero)
Date: Sat, 1 Mar 2014 09:22:42 +0100
Subject: [gecode-users] Backjumping (aka Intelligent Backtracking)
Message-ID: <E68D7CD3-BC25-47C2-A19D-3071BD3C7FA7@uniud.it>

Hi all,

I am wondering wether it is currently* possible to implement some backjumping strategy on top of the gecode dfs/bab mechanism (possibly involving Restart Based engine). Any hint?

Thanks in advance for your answers.

Luca

* I read an ancient negative answer to this question in the ML, but now the gecode tools are more powerful

From filip.konvicka at logis.cz  Wed Mar  5 14:44:21 2014
From: filip.konvicka at logis.cz (=?UTF-8?B?RmlsaXAgS29udmnEjWth?=)
Date: Wed, 05 Mar 2014 14:44:21 +0100
Subject: [gecode-users] Upgrading from Gecode 2.2.0 to 4.2.1
Message-ID: <lf79mv$8gi$1@ger.gmane.org>

Hi,

I just want to share with you my experience with upgrading from Gecode 
2.2.0 to 4.2.1.

I did most of the upgrade to version 4 in the Summer 2013.  I had my own 
implementation of Float Variables, a set of related propagators and 
branchings, a related script/solver, a number of scheduling-related 
custom propagators and several other mainly combinatorial int/bool 
solvers using the standard Gecode stuff.

I must say that the transition was very smooth and the documentation 
just rocks.  I was able to abandon my Float Variables implementation and 
use the built-in version instead.  Also, as a benefit, the new version 
seems to be more robust (I've seen rare crashes with the old version 
that I attribute to the library.)

I look forward to exploring and using the new propagators (I've already 
played with Hamiltonian path for example), and the new features like 
restart-based search, symmetry breaking etc.

Thanks and keep up the good work!
Filip



From cschulte at kth.se  Wed Mar  5 15:16:02 2014
From: cschulte at kth.se (Christian Schulte)
Date: Wed, 5 Mar 2014 15:16:02 +0100
Subject: [gecode-users] Upgrading from Gecode 2.2.0 to 4.2.1
In-Reply-To: <lf79mv$8gi$1@ger.gmane.org>
References: <lf79mv$8gi$1@ger.gmane.org>
Message-ID: <002201cf387d$718f06e0$54ad14a0$@se>

Hi Filip,

Great to hear that the ride was smooth and the documentation helps.

Thanks for the kind words

Cheers
Christian

--
Christian Schulte, Professor of Computer Science, KTH,
www.ict.kth.se/~cschulte/

-----Original Message-----
From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf
Of Filip Konvicka
Sent: Wednesday, March 05, 2014 2:44 PM
To: users at gecode.org
Subject: [gecode-users] Upgrading from Gecode 2.2.0 to 4.2.1

Hi,

I just want to share with you my experience with upgrading from Gecode
2.2.0 to 4.2.1.

I did most of the upgrade to version 4 in the Summer 2013.  I had my own
implementation of Float Variables, a set of related propagators and
branchings, a related script/solver, a number of scheduling-related custom
propagators and several other mainly combinatorial int/bool solvers using
the standard Gecode stuff.

I must say that the transition was very smooth and the documentation just
rocks.  I was able to abandon my Float Variables implementation and use the
built-in version instead.  Also, as a benefit, the new version seems to be
more robust (I've seen rare crashes with the old version that I attribute to
the library.)

I look forward to exploring and using the new propagators (I've already
played with Hamiltonian path for example), and the new features like
restart-based search, symmetry breaking etc.

Thanks and keep up the good work!
Filip


_______________________________________________
Gecode users mailing list
users at gecode.org
https://www.gecode.org/mailman/listinfo/gecode-users



From chuongdk at gmail.com  Wed Mar  5 17:05:39 2014
From: chuongdk at gmail.com (Duong Khanh Chuong)
Date: Wed, 5 Mar 2014 17:05:39 +0100
Subject: [gecode-users] question about the advisors in GeCode
Message-ID: <CA+bPztouxJ8-vv+chezUHi5tFSherg2CNvO7Zo7E_3nqHBOxhg@mail.gmail.com>

Hi all,
I have a naive question regarding to the advisor in  Gecode:

In the example of SameDom (26.2 in MPG.pdf), how can I know exactly the
variable x[i] that is changed?

for example, how can I get the value i of variable x[i] which corresponds
to advisor a appeared in the function advise()?

virtual ExecStatus advise(Space&, Advisor& a, const Delta&) {
}

Thanks very much for your advices.
Best regards,
K.Chuong
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.gecode.org/pipermail/users/attachments/20140305/7867b0c9/attachment.html>

From cschulte at kth.se  Wed Mar  5 17:14:50 2014
From: cschulte at kth.se (Christian Schulte)
Date: Wed, 5 Mar 2014 17:14:50 +0100
Subject: [gecode-users] question about the advisors in GeCode
In-Reply-To: <CA+bPztouxJ8-vv+chezUHi5tFSherg2CNvO7Zo7E_3nqHBOxhg@mail.gmail.com>
References: <CA+bPztouxJ8-vv+chezUHi5tFSherg2CNvO7Zo7E_3nqHBOxhg@mail.gmail.com>
Message-ID: <005301cf388e$08f6d7a0$1ae486e0$@se>

The advisor must store additional information: so, when you create an
advisor you can also store additional information, for example, the view
x[i] or just the index i. For that, you have to create a subclass of Advisor
that stores this information.

 

This is in fact explained in MPG, please check again. In 26.2 in MPG it is
the class ViewAdvisor that stores the additional information.

 

Best

Christian

 

--

Christian Schulte, Professor of Computer Science, KTH,
www.ict.kth.se/~cschulte/

 

From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf
Of Duong Khanh Chuong
Sent: Wednesday, March 05, 2014 5:06 PM
To: users at gecode.org
Subject: [gecode-users] question about the advisors in GeCode

 

Hi all,

I have a naive question regarding to the advisor in  Gecode:

 

In the example of SameDom (26.2 in MPG.pdf), how can I know exactly the
variable x[i] that is changed?

 

for example, how can I get the value i of variable x[i] which corresponds to
advisor a appeared in the function advise()?

 

virtual ExecStatus advise(Space&, Advisor& a, const Delta&) {      

}

 

Thanks very much for your advices.

Best regards,

K.Chuong

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.gecode.org/pipermail/users/attachments/20140305/7c282ef7/attachment.html>

From cschulte at kth.se  Wed Mar  5 17:32:44 2014
From: cschulte at kth.se (Christian Schulte)
Date: Wed, 5 Mar 2014 17:32:44 +0100
Subject: [gecode-users] Backjumping (aka Intelligent Backtracking)
In-Reply-To: <E68D7CD3-BC25-47C2-A19D-3071BD3C7FA7@uniud.it>
References: <E68D7CD3-BC25-47C2-A19D-3071BD3C7FA7@uniud.it>
Message-ID: <006b01cf3890$894859e0$9bd90da0$@se>

Hi Luca,

No, really anything useful to say here. It should be possible and due to the
documentation it should be easier to do than before but it would mean that
you really program your own search engine. 

What might help you, though, is the support we added in 4.2.1 for nogood
literals.

Sorry for not being more helpful.

Cheers
Christian

--
Christian Schulte, Professor of Computer Science, KTH,
www.ict.kth.se/~cschulte/


-----Original Message-----
From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf
Of Luca Di Gaspero
Sent: Saturday, March 01, 2014 9:23 AM
To: <users at gecode.org>
Subject: [gecode-users] Backjumping (aka Intelligent Backtracking)

Hi all,

I am wondering wether it is currently* possible to implement some
backjumping strategy on top of the gecode dfs/bab mechanism (possibly
involving Restart Based engine). Any hint?

Thanks in advance for your answers.

Luca

* I read an ancient negative answer to this question in the ML, but now the
gecode tools are more powerful
_______________________________________________
Gecode users mailing list
users at gecode.org
https://www.gecode.org/mailman/listinfo/gecode-users



From l.digaspero at uniud.it  Wed Mar  5 17:47:05 2014
From: l.digaspero at uniud.it (Luca Di Gaspero)
Date: Wed, 5 Mar 2014 17:47:05 +0100
Subject: [gecode-users] Backjumping (aka Intelligent Backtracking)
In-Reply-To: <006b01cf3890$894859e0$9bd90da0$@se>
References: <E68D7CD3-BC25-47C2-A19D-3071BD3C7FA7@uniud.it>
	<006b01cf3890$894859e0$9bd90da0$@se>
Message-ID: <BAC8EF31-5E32-48CB-9A8C-335C723F12EC@uniud.it>

Hi Christian,

> No, really anything useful to say here. It should be possible and due to the
> documentation it should be easier to do than before but it would mean that
> you really program your own search engine. 

Given the elegant design of Search Engines is not a problem ;-)

> What might help you, though, is the support we added in 4.2.1 for nogood
> literals.

Right, maybe I can take inspiration from the RBS. By the way, what?s the current situation with *direct* option passing to search engines? (do you remember the talks you had with Tommaso Urli at CP?)

Thanks and all the best,

Luca

From cschulte at kth.se  Wed Mar  5 21:09:31 2014
From: cschulte at kth.se (Christian Schulte)
Date: Wed, 5 Mar 2014 21:09:31 +0100
Subject: [gecode-users] Backjumping (aka Intelligent Backtracking)
In-Reply-To: <BAC8EF31-5E32-48CB-9A8C-335C723F12EC@uniud.it>
References: <E68D7CD3-BC25-47C2-A19D-3071BD3C7FA7@uniud.it>	<006b01cf3890$894859e0$9bd90da0$@se>
	<BAC8EF31-5E32-48CB-9A8C-335C723F12EC@uniud.it>
Message-ID: <006e01cf38ae$d2779130$7766b390$@kth.se>

About options: yes we had a chat and if my memory serves me right we had an
idea what to do but I think (I might be wrong, though) that Tomaso was meant
to get back to me...

Cheers
Christian

--
Christian Schulte, www.ict.kth.se/~cschulte/


> -----Original Message-----
> From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On
> Behalf Of Luca Di Gaspero
> Sent: Wednesday, March 05, 2014 5:47 PM
> To: <users at gecode.org>
> Subject: Re: [gecode-users] Backjumping (aka Intelligent Backtracking)
> 
> Hi Christian,
> 
> > No, really anything useful to say here. It should be possible and due
> > to the documentation it should be easier to do than before but it
> > would mean that you really program your own search engine.
> 
> Given the elegant design of Search Engines is not a problem ;-)
> 
> > What might help you, though, is the support we added in 4.2.1 for
> > nogood literals.
> 
> Right, maybe I can take inspiration from the RBS. By the way, what's the
current
> situation with *direct* option passing to search engines? (do you remember
the
> talks you had with Tommaso Urli at CP?)
> 
> Thanks and all the best,
> 
> Luca
> _______________________________________________
> Gecode users mailing list
> users at gecode.org
> https://www.gecode.org/mailman/listinfo/gecode-users



From christopher at thielen.co  Fri Mar  7 00:43:01 2014
From: christopher at thielen.co (Christopher Thielen)
Date: Thu, 06 Mar 2014 15:43:01 -0800
Subject: [gecode-users] Modelling strategies for reconciling availabilities
 with scheduled shifts
Message-ID: <53190805.5060109@thielen.co>

Hi everyone,

I'm writing a program to help schedule student employees at our 
university based on pre-defined shifts (time blocks) and student 
availabilities (also time blocks).

This strikes me as similar to the Air Crew problem, except for modelling 
the constraint that an employee is not simply generally available: it 
depends on their schedule.

What modelling strategies can a more seasoned constraint programmer 
recommend for solving this problem?

I appreciate any guidance,
Christopher Thielen


From cschulte at kth.se  Fri Mar  7 09:57:07 2014
From: cschulte at kth.se (Christian Schulte)
Date: Fri, 7 Mar 2014 09:57:07 +0100
Subject: [gecode-users] Modelling strategies for reconciling
	availabilities with scheduled shifts
In-Reply-To: <53190805.5060109@thielen.co>
References: <53190805.5060109@thielen.co>
Message-ID: <00c101cf39e3$38b26ad0$aa174070$@se>

Hi,

This is not really a Gecode specific question, so out of scope here.

You might want to check the Constraints journal or editions of the CP and
CP-AI-OR conference proceedings published at Springer. There is quite some
material out there on rostering and time tabling.

Best
Christian

--
Christian Schulte, Professor of Computer Science, KTH,
www.ict.kth.se/~cschulte/


-----Original Message-----
From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf
Of Christopher Thielen
Sent: Friday, March 07, 2014 12:43 AM
To: users at gecode.org
Subject: [gecode-users] Modelling strategies for reconciling availabilities
with scheduled shifts

Hi everyone,

I'm writing a program to help schedule student employees at our university
based on pre-defined shifts (time blocks) and student availabilities (also
time blocks).

This strikes me as similar to the Air Crew problem, except for modelling the
constraint that an employee is not simply generally available: it depends on
their schedule.

What modelling strategies can a more seasoned constraint programmer
recommend for solving this problem?

I appreciate any guidance,
Christopher Thielen

_______________________________________________
Gecode users mailing list
users at gecode.org
https://www.gecode.org/mailman/listinfo/gecode-users



From kyo.alone at gmail.com  Sat Mar  8 23:43:37 2014
From: kyo.alone at gmail.com (Mohamed Rezgui)
Date: Sat, 8 Mar 2014 23:43:37 +0100
Subject: [gecode-users] Multi-objective Model with Searchcombinators in
	Gecode
Message-ID: <CAFWj1gD0e4O1FMxiVW2Dn_ZgNDdbS_Qgbib6mrxKG-LOzStm=A@mail.gmail.com>

Dear Sir,

I would like to know how can I use searchcombinators in my
multi-objective model in FlatZinc.
I have 2 objectives. I minimize the first and I reuse the solution for
the minimization of the second objective.
Can you give me the good syntax in FlatZinc with searchcombinators to
do that please ?

Best Regards,
Mohammed REZGUI
PhD Student


From tack at gecode.org  Sun Mar  9 10:54:42 2014
From: tack at gecode.org (Guido Tack)
Date: Sun, 9 Mar 2014 20:54:42 +1100
Subject: [gecode-users] Multi-objective Model with Searchcombinators
	in	Gecode
In-Reply-To: <CAFWj1gD0e4O1FMxiVW2Dn_ZgNDdbS_Qgbib6mrxKG-LOzStm=A@mail.gmail.com>
References: <CAFWj1gD0e4O1FMxiVW2Dn_ZgNDdbS_Qgbib6mrxKG-LOzStm=A@mail.gmail.com>
Message-ID: <DFB3F607-B5E5-4136-B7D8-D00C21DE0722@gecode.org>

Hi,

could you clarify in what way you want to reuse the solution?

Here's a combinator that first minimizes obj1, then maximizes obj2 keeping obj1 at the optimal value:

annotation two_stage_bnb(var int: obj1, var int: obj2, ann: s) =
let { svar int: best1 = 1000000,
      svar int: best2 = 0 }
in (
  portfolio([and(post(obj1 < lv("best1"), and(s,assign(best1,obj1))),
                 prune),
             post(obj1=lv("best1"),
               post(obj2 > lv("best2"), and(s,assign(best2,obj2)))
             )]));

Cheers,
Guido

On 9 Mar 2014, at 9:43 am, Mohamed Rezgui <kyo.alone at gmail.com> wrote:

> Dear Sir,
> 
> I would like to know how can I use searchcombinators in my
> multi-objective model in FlatZinc.
> I have 2 objectives. I minimize the first and I reuse the solution for
> the minimization of the second objective.
> Can you give me the good syntax in FlatZinc with searchcombinators to
> do that please ?
> 
> Best Regards,
> Mohammed REZGUI
> PhD Student
> 
> _______________________________________________
> Gecode users mailing list
> users at gecode.org
> https://www.gecode.org/mailman/listinfo/gecode-users



From kyo.alone at gmail.com  Sun Mar  9 14:02:32 2014
From: kyo.alone at gmail.com (Mohamed Rezgui)
Date: Sun, 9 Mar 2014 14:02:32 +0100
Subject: [gecode-users] Multi-objective Model with Searchcombinators in
	Gecode
In-Reply-To: <DFB3F607-B5E5-4136-B7D8-D00C21DE0722@gecode.org>
References: <CAFWj1gD0e4O1FMxiVW2Dn_ZgNDdbS_Qgbib6mrxKG-LOzStm=A@mail.gmail.com>
	<DFB3F607-B5E5-4136-B7D8-D00C21DE0722@gecode.org>
Message-ID: <CAFWj1gCEGFHRodTcoJFbVWff76+Yv+EQDWirv=Bs7a4Gw6QL9w@mail.gmail.com>

Thank you very much for your answer. My problem is a pseudo bin
packing problem.
I would like to minimize a number of components of a certain sizes and
minimize the number of bins.
So I would like to do a lexicographic order on my multi-objective solutions.

Best Regards,
Mohammed REZGUI

2014-03-09 10:54 GMT+01:00 Guido Tack <tack at gecode.org>:
> Hi,
>
> could you clarify in what way you want to reuse the solution?
>
> Here's a combinator that first minimizes obj1, then maximizes obj2 keeping obj1 at the optimal value:
>
> annotation two_stage_bnb(var int: obj1, var int: obj2, ann: s) =
> let { svar int: best1 = 1000000,
>       svar int: best2 = 0 }
> in (
>   portfolio([and(post(obj1 < lv("best1"), and(s,assign(best1,obj1))),
>                  prune),
>              post(obj1=lv("best1"),
>                post(obj2 > lv("best2"), and(s,assign(best2,obj2)))
>              )]));
>
> Cheers,
> Guido
>
> On 9 Mar 2014, at 9:43 am, Mohamed Rezgui <kyo.alone at gmail.com> wrote:
>
>> Dear Sir,
>>
>> I would like to know how can I use searchcombinators in my
>> multi-objective model in FlatZinc.
>> I have 2 objectives. I minimize the first and I reuse the solution for
>> the minimization of the second objective.
>> Can you give me the good syntax in FlatZinc with searchcombinators to
>> do that please ?
>>
>> Best Regards,
>> Mohammed REZGUI
>> PhD Student
>>
>> _______________________________________________
>> Gecode users mailing list
>> users at gecode.org
>> https://www.gecode.org/mailman/listinfo/gecode-users
>



-- 
Cordialement,
Mohamed REZGUI


From kyo.alone at gmail.com  Mon Mar 10 11:42:12 2014
From: kyo.alone at gmail.com (Mohamed Rezgui)
Date: Mon, 10 Mar 2014 11:42:12 +0100
Subject: [gecode-users] Fwd: Multi-objective Model with Searchcombinators in
	Gecode
In-Reply-To: <CAFWj1gD+312_HRPr_QQQxXaTebH4A8ZHnZ65mQqOig=ruUwdnA@mail.gmail.com>
References: <CAFWj1gD0e4O1FMxiVW2Dn_ZgNDdbS_Qgbib6mrxKG-LOzStm=A@mail.gmail.com>
	<DFB3F607-B5E5-4136-B7D8-D00C21DE0722@gecode.org>
	<CAFWj1gCEGFHRodTcoJFbVWff76+Yv+EQDWirv=Bs7a4Gw6QL9w@mail.gmail.com>
	<CAFWj1gD+312_HRPr_QQQxXaTebH4A8ZHnZ65mQqOig=ruUwdnA@mail.gmail.com>
Message-ID: <CAFWj1gC3FgmGumz4yv0XvwcruhDyL4Kxg5tOgkRgqLu9kuWG6g@mail.gmail.com>

Dear Guido,

I would like to know when I have more objectives like 3 objectives to
minimize (all of them), is the following syntax correct ?

annotation three_stage_bnb(var int: obj1, var int: obj2, var int:
obj3, ann: s) =
let { svar int: best1 = 1000000,
      svar int: best2 = 0,
      svar int: best3 = 0 }
in (
  portfolio([and(post(obj1 < lv("best1"), and(s,assign(best1,obj1))),
                 prune),
             post(obj1=lv("best1"),
               post(obj2 < lv("best2"), and(s,assign(best2,obj2)))
             post(obj2=lv("best2"),
               post(obj3 < lv("best3"), and(s,assign(best3,obj3)))
             )]));

and how can I call this annotation in the minizinc instance ?

Best Regards,
Mohammed REZGUI

2014-03-09 14:02 GMT+01:00 Mohamed Rezgui <kyo.alone at gmail.com>:
> Thank you very much for your answer. My problem is a pseudo bin
> packing problem.
> I would like to minimize a number of components of a certain sizes and
> minimize the number of bins.
> So I would like to do a lexicographic order on my multi-objective solutions.
>
> Best Regards,
> Mohammed REZGUI
>
> 2014-03-09 10:54 GMT+01:00 Guido Tack <tack at gecode.org>:
>> Hi,
>>
>> could you clarify in what way you want to reuse the solution?
>>
>> Here's a combinator that first minimizes obj1, then maximizes obj2 keeping obj1 at the optimal value:
>>
>> annotation two_stage_bnb(var int: obj1, var int: obj2, ann: s) =
>> let { svar int: best1 = 1000000,
>>       svar int: best2 = 0 }
>> in (
>>   portfolio([and(post(obj1 < lv("best1"), and(s,assign(best1,obj1))),
>>                  prune),
>>              post(obj1=lv("best1"),
>>                post(obj2 > lv("best2"), and(s,assign(best2,obj2)))
>>              )]));
>>
>> Cheers,
>> Guido
>>
>> On 9 Mar 2014, at 9:43 am, Mohamed Rezgui <kyo.alone at gmail.com> wrote:
>>
>>> Dear Sir,
>>>
>>> I would like to know how can I use searchcombinators in my
>>> multi-objective model in FlatZinc.
>>> I have 2 objectives. I minimize the first and I reuse the solution for
>>> the minimization of the second objective.
>>> Can you give me the good syntax in FlatZinc with searchcombinators to
>>> do that please ?
>>>
>>> Best Regards,
>>> Mohammed REZGUI
>>> PhD Student
>>>
>>> _______________________________________________
>>> Gecode users mailing list
>>> users at gecode.org
>>> https://www.gecode.org/mailman/listinfo/gecode-users
>>
>
>
>
> --
> Cordialement,
> Mohamed REZGUI



--
Cordialement,
Mohamed REZGUI


-- 
Cordialement,
Mohamed REZGUI


From kyo.alone at gmail.com  Wed Mar 12 20:22:20 2014
From: kyo.alone at gmail.com (Mohamed Rezgui)
Date: Wed, 12 Mar 2014 20:22:20 +0100
Subject: [gecode-users] Fwd: Multi-objective Model with Searchcombinators in
	Gecode
In-Reply-To: <CAFWj1gBwoahb98wNThfKMmiVnLOD1Ks9LQQ498M_ii_D=_nG3w@mail.gmail.com>
References: <CAFWj1gD0e4O1FMxiVW2Dn_ZgNDdbS_Qgbib6mrxKG-LOzStm=A@mail.gmail.com>
	<DFB3F607-B5E5-4136-B7D8-D00C21DE0722@gecode.org>
	<CAFWj1gCEGFHRodTcoJFbVWff76+Yv+EQDWirv=Bs7a4Gw6QL9w@mail.gmail.com>
	<CAFWj1gD+312_HRPr_QQQxXaTebH4A8ZHnZ65mQqOig=ruUwdnA@mail.gmail.com>
	<CAFWj1gC3FgmGumz4yv0XvwcruhDyL4Kxg5tOgkRgqLu9kuWG6g@mail.gmail.com>
	<CAFWj1gBwoahb98wNThfKMmiVnLOD1Ks9LQQ498M_ii_D=_nG3w@mail.gmail.com>
Message-ID: <CAFWj1gD6TY2WVmbnQ1vT+2asHxEC3OsT8c3cMeap3mmUOa1Bgg@mail.gmail.com>

---------- Forwarded message ----------
From: Mohamed Rezgui <kyo.alone at gmail.com>
Date: 2014-03-12 20:21 GMT+01:00
Subject: Fwd: [gecode-users] Multi-objective Model with
Searchcombinators in Gecode
To: Guido Tack <tack at gecode.org>


Dear Guido,

I compile successfully searchcombinators with gecode 4.2.1 (I change
with the appropriate API).
I would like to know how can I set 3 ou several objectives (on
lexicographic multi-objective) please ?
I test with different approaches and it does not work.

Other question how can I print pretty like output with trace_solution
I found a bug with concatenation "*" ++ "\n" (it does not work).

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
include "globals.mzn";
include "searchcombinators.mzn";

annotation lexicoMinimize3obj(var int: obj1, var int: obj2, var int:
obj3, ann: s) =
let {
%% minimise => svar int: best1 = ub(obj1)
%% maximize => svar int: best1 = lb(obj1)
svar int: best1 = ub(obj1),

%% minimise => svar int: best2 = ub(obj3)
%% maximize => svar int: best2 = lb(obj3)
svar int: best2 = ub(obj2),

%% minimise => svar int: best2 = ub(obj3)
%% maximize => svar int: best2 = lb(obj3)
svar int: best3 = ub(obj3)
}
in (


  portfolio([

%% minimise => obj1 < lv("best1")
%% maximize => obj1 > lv("best1")
and(
post(obj1 < lv("best1"), and(s,assign(best1,obj1))),
prune
),

%% minimise => obj2 < lv("best2")
%% maximize => obj2 > lv("best2")
post(obj1=lv("best1"),
post(obj2 < lv("best2"), and(s,assign(best2,obj2)))),


%% minimise => obj3 < lv("best3")
%% maximize => obj3 > lv("best3")
post(obj2=lv("best2"),
post(obj3 < lv("best3"), and(s,assign(best3,obj3))))

  ])

);

% Variables
var 0..10: obj1;
var 1..10: obj2;
var 2..10: obj3;

%% call
solve
   :: print([obj1, obj2, obj3], lexicoMinimize3obj(obj1, obj2, obj3,
int_search([obj1, obj3, obj2], input_order, assign_ub)
   ))
 satisfy;
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


Best Regards,
Mohammed REZGUI


-- 
Cordialement,
Mohamed REZGUI


From tack at gecode.org  Wed Mar 12 20:35:28 2014
From: tack at gecode.org (Guido Tack)
Date: Thu, 13 Mar 2014 06:35:28 +1100
Subject: [gecode-users] Multi-objective Model with Searchcombinators in
	Gecode
In-Reply-To: <CAFWj1gBwoahb98wNThfKMmiVnLOD1Ks9LQQ498M_ii_D=_nG3w@mail.gmail.com>
References: <CAFWj1gD0e4O1FMxiVW2Dn_ZgNDdbS_Qgbib6mrxKG-LOzStm=A@mail.gmail.com>
	<DFB3F607-B5E5-4136-B7D8-D00C21DE0722@gecode.org>
	<CAFWj1gCEGFHRodTcoJFbVWff76+Yv+EQDWirv=Bs7a4Gw6QL9w@mail.gmail.com>
	<CAFWj1gD+312_HRPr_QQQxXaTebH4A8ZHnZ65mQqOig=ruUwdnA@mail.gmail.com>
	<CAFWj1gC3FgmGumz4yv0XvwcruhDyL4Kxg5tOgkRgqLu9kuWG6g@mail.gmail.com>
	<CAFWj1gBwoahb98wNThfKMmiVnLOD1Ks9LQQ498M_ii_D=_nG3w@mail.gmail.com>
Message-ID: <8285688A-A58A-42D7-AA6E-61AF3A6B5C65@gecode.org>

Hi,

you'd have to be a bit more specific than "does not work".  Did the two objective version work?  In your code the second stage does not do a "prune" when it's done like the first stage, so it will actually never switch to the third stage.

Output is rather limited at the moment, the code you're using was written as a prototype for a paper, not a production quality system.

Cheers,
Guido

On 13 Mar 2014, at 6:21 am, Mohamed Rezgui <kyo.alone at gmail.com> wrote:

> Dear Guido,
> 
> I compile successfully searchcombinators with gecode 4.2.1 (I change
> with the appropriate API).
> I would like to know how can I set 3 ou several objectives (on
> lexicographic multi-objective) please ?
> I test with different approaches and it does not work.
> 
> Other question how can I print pretty like output with trace_solution
> I found a bug with concatenation "*" ++ "\n" (it does not work).
> 
> %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
> include "globals.mzn";
> include "searchcombinators.mzn";
> 
> annotation lexicoMinimize3obj(var int: obj1, var int: obj2, var int:
> obj3, ann: s) =
> let {
> %% minimise => svar int: best1 = ub(obj1)
> %% maximize => svar int: best1 = lb(obj1)
> svar int: best1 = ub(obj1),
> 
> %% minimise => svar int: best2 = ub(obj3)
> %% maximize => svar int: best2 = lb(obj3)
> svar int: best2 = ub(obj2),
> 
> %% minimise => svar int: best2 = ub(obj3)
> %% maximize => svar int: best2 = lb(obj3)
> svar int: best3 = ub(obj3)
> }
> in (
> 
> 
>  portfolio([
> 
> %% minimise => obj1 < lv("best1")
> %% maximize => obj1 > lv("best1")
> and(
> post(obj1 < lv("best1"), and(s,assign(best1,obj1))),
> prune
> ),
> 
> %% minimise => obj2 < lv("best2")
> %% maximize => obj2 > lv("best2")
> post(obj1=lv("best1"),
> post(obj2 < lv("best2"), and(s,assign(best2,obj2)))),
> 
> 
> %% minimise => obj3 < lv("best3")
> %% maximize => obj3 > lv("best3")
> post(obj2=lv("best2"),
> post(obj3 < lv("best3"), and(s,assign(best3,obj3))))
> 
>  ])
> 
> );
> 
> % Variables
> var 0..10: obj1;
> var 1..10: obj2;
> var 2..10: obj3;
> 
> %% call
> solve
>   :: print([obj1, obj2, obj3], lexicoMinimize3obj(obj1, obj2, obj3,
> int_search([obj1, obj3, obj2], input_order, assign_ub)
>   ))
> satisfy;
> %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
> 
> 
> Best Regards,
> Mohammed REZGUI



From kyo.alone at gmail.com  Wed Mar 12 20:53:12 2014
From: kyo.alone at gmail.com (Mohamed Rezgui)
Date: Wed, 12 Mar 2014 20:53:12 +0100
Subject: [gecode-users] Fwd: Multi-objective Model with Searchcombinators in
	Gecode
In-Reply-To: <CAFWj1gBRH0jkGiRQ3i02P-DbJe1xm8P5W1Wf=k4nf89tuYczVw@mail.gmail.com>
References: <CAFWj1gD0e4O1FMxiVW2Dn_ZgNDdbS_Qgbib6mrxKG-LOzStm=A@mail.gmail.com>
	<DFB3F607-B5E5-4136-B7D8-D00C21DE0722@gecode.org>
	<CAFWj1gCEGFHRodTcoJFbVWff76+Yv+EQDWirv=Bs7a4Gw6QL9w@mail.gmail.com>
	<CAFWj1gD+312_HRPr_QQQxXaTebH4A8ZHnZ65mQqOig=ruUwdnA@mail.gmail.com>
	<CAFWj1gC3FgmGumz4yv0XvwcruhDyL4Kxg5tOgkRgqLu9kuWG6g@mail.gmail.com>
	<CAFWj1gBwoahb98wNThfKMmiVnLOD1Ks9LQQ498M_ii_D=_nG3w@mail.gmail.com>
	<8285688A-A58A-42D7-AA6E-61AF3A6B5C65@gecode.org>
	<CAFWj1gBRH0jkGiRQ3i02P-DbJe1xm8P5W1Wf=k4nf89tuYczVw@mail.gmail.com>
Message-ID: <CAFWj1gDBERurANG-bHgzVn6qJBY4TUjy3+YBs14pvP6fqSUbGg@mail.gmail.com>

---------- Forwarded message ----------
From: Mohamed Rezgui <kyo.alone at gmail.com>
Date: 2014-03-12 20:53 GMT+01:00
Subject: Re: [gecode-users] Multi-objective Model with
Searchcombinators in Gecode
To: Guido Tack <tack at gecode.org>


Hi,

yes the two objective version works very well.

But when I did not found the good syntax for 3 and several objectives :S
Can you send me the right syntax please ?

% Variables
var 0..10: obj1;
var 1..10: obj2;
var 2..10: obj3;

This following code give me these solutions :
{10, 1, 9}
{10, 1, 8}
{10, 1, 7}
{10, 1, 6}
{10, 1, 5}
{10, 1, 4}
{10, 1, 3}
{10, 1, 2}

the first objective is not minimized :S

%%%%%%%%%%%%%%%%%%%%%%%%%%
portfolio([

and(
      and(
       %% minimise => obj2 < lv("best2")
        %% maximize => obj2 > lv("best2")
        post(obj1=lv("best1"),
       post(obj2 < lv("best2"), and(s,assign(best2,obj2)))),
       prune
      ),

      %% minimise => obj1 < lv("best1")
       %% maximize => obj1 > lv("best1")
      and(
        post(obj1 < lv("best1"), and(s,assign(best1,obj1))),
        prune
      )
),


%% minimise => obj3 < lv("best3")
%% maximize => obj3 > lv("best3")
post(obj2=lv("best2"),
post(obj3 < lv("best3"), and(s,assign(best3,obj3))))

  ])

with trace_sol, I have this bug (gecode 4.2.1, flatzinc 1.6,
searchcombinators 0.9.3 modified API for gecode 4.2.1):
trace_sol("*" ++ "\n", ...) //does not work
Error: Unknown character in line no. 4
Error: Unknown character in line no. 4
Error: syntax error, unexpected FZ_ID, expecting ')' or ',' in line no. 5

Best Regards,
Mohammed REZGUI

2014-03-12 20:35 GMT+01:00 Guido Tack <tack at gecode.org>:
> Hi,
>
> you'd have to be a bit more specific than "does not work".  Did the two objective version work?  In your code the second stage does not do a "prune" when it's done like the first stage, so it will actually never switch to the third stage.
>
> Output is rather limited at the moment, the code you're using was written as a prototype for a paper, not a production quality system.
>
> Cheers,
> Guido
>
> On 13 Mar 2014, at 6:21 am, Mohamed Rezgui <kyo.alone at gmail.com> wrote:
>
>> Dear Guido,
>>
>> I compile successfully searchcombinators with gecode 4.2.1 (I change
>> with the appropriate API).
>> I would like to know how can I set 3 ou several objectives (on
>> lexicographic multi-objective) please ?
>> I test with different approaches and it does not work.
>>
>> Other question how can I print pretty like output with trace_solution
>> I found a bug with concatenation "*" ++ "\n" (it does not work).
>>
>> %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
>> include "globals.mzn";
>> include "searchcombinators.mzn";
>>
>> annotation lexicoMinimize3obj(var int: obj1, var int: obj2, var int:
>> obj3, ann: s) =
>> let {
>> %% minimise => svar int: best1 = ub(obj1)
>> %% maximize => svar int: best1 = lb(obj1)
>> svar int: best1 = ub(obj1),
>>
>> %% minimise => svar int: best2 = ub(obj3)
>> %% maximize => svar int: best2 = lb(obj3)
>> svar int: best2 = ub(obj2),
>>
>> %% minimise => svar int: best2 = ub(obj3)
>> %% maximize => svar int: best2 = lb(obj3)
>> svar int: best3 = ub(obj3)
>> }
>> in (
>>
>>
>>  portfolio([
>>
>> %% minimise => obj1 < lv("best1")
>> %% maximize => obj1 > lv("best1")
>> and(
>> post(obj1 < lv("best1"), and(s,assign(best1,obj1))),
>> prune
>> ),
>>
>> %% minimise => obj2 < lv("best2")
>> %% maximize => obj2 > lv("best2")
>> post(obj1=lv("best1"),
>> post(obj2 < lv("best2"), and(s,assign(best2,obj2)))),
>>
>>
>> %% minimise => obj3 < lv("best3")
>> %% maximize => obj3 > lv("best3")
>> post(obj2=lv("best2"),
>> post(obj3 < lv("best3"), and(s,assign(best3,obj3))))
>>
>>  ])
>>
>> );
>>
>> % Variables
>> var 0..10: obj1;
>> var 1..10: obj2;
>> var 2..10: obj3;
>>
>> %% call
>> solve
>>   :: print([obj1, obj2, obj3], lexicoMinimize3obj(obj1, obj2, obj3,
>> int_search([obj1, obj3, obj2], input_order, assign_ub)
>>   ))
>> satisfy;
>> %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
>>
>>
>> Best Regards,
>> Mohammed REZGUI
>



--
Cordialement,
Mohamed REZGUI


-- 
Cordialement,
Mohamed REZGUI


From tack at gecode.org  Fri Mar 14 22:03:18 2014
From: tack at gecode.org (Guido Tack)
Date: Sat, 15 Mar 2014 08:03:18 +1100
Subject: [gecode-users] Fwd: Multi-objective Model with
	Searchcombinators in Gecode
In-Reply-To: <CAFWj1gDBERurANG-bHgzVn6qJBY4TUjy3+YBs14pvP6fqSUbGg@mail.gmail.com>
References: <CAFWj1gD0e4O1FMxiVW2Dn_ZgNDdbS_Qgbib6mrxKG-LOzStm=A@mail.gmail.com>
	<DFB3F607-B5E5-4136-B7D8-D00C21DE0722@gecode.org>
	<CAFWj1gCEGFHRodTcoJFbVWff76+Yv+EQDWirv=Bs7a4Gw6QL9w@mail.gmail.com>
	<CAFWj1gD+312_HRPr_QQQxXaTebH4A8ZHnZ65mQqOig=ruUwdnA@mail.gmail.com>
	<CAFWj1gC3FgmGumz4yv0XvwcruhDyL4Kxg5tOgkRgqLu9kuWG6g@mail.gmail.com>
	<CAFWj1gBwoahb98wNThfKMmiVnLOD1Ks9LQQ498M_ii_D=_nG3w@mail.gmail.com>
	<8285688A-A58A-42D7-AA6E-61AF3A6B5C65@gecode.org>
	<CAFWj1gBRH0jkGiRQ3i02P-DbJe1xm8P5W1Wf=k4nf89tuYczVw@mail.gmail.com>
	<CAFWj1gDBERurANG-bHgzVn6qJBY4TUjy3+YBs14pvP6fqSUbGg@mail.gmail.com>
Message-ID: <1925D762-DE78-44AE-A253-DDC02F41992B@gecode.org>

I can't test it right now, but it should be like this:

portfolio([

%% minimise => obj1 < lv("best1")
%% maximize => obj1 > lv("best1")
and(
  post(obj1 < lv("best1"),
    and(s,assign(best1,obj1))
  ),
  prune
),

%% minimise => obj2 < lv("best2")
%% maximize => obj2 > lv("best2")
and(
  post(obj1=lv("best1"),
    post(obj2 < lv("best2"),
      and(s,assign(best2,obj2))
    )
  ),
  prune
),

%% minimise => obj3 < lv("best3")
%% maximize => obj3 > lv("best3")
post(obj1=lv("best1"),
  post(obj2=lv("best2"),
    post(obj3 < lv("best3"),
      and(s,assign(best3,obj3))
    )
  )
)
])

Cheers,
Guido

On 13 Mar 2014, at 6:53 am, Mohamed Rezgui <kyo.alone at gmail.com> wrote:

> ---------- Forwarded message ----------
> From: Mohamed Rezgui <kyo.alone at gmail.com>
> Date: 2014-03-12 20:53 GMT+01:00
> Subject: Re: [gecode-users] Multi-objective Model with
> Searchcombinators in Gecode
> To: Guido Tack <tack at gecode.org>
> 
> 
> Hi,
> 
> yes the two objective version works very well.
> 
> But when I did not found the good syntax for 3 and several objectives :S
> Can you send me the right syntax please ?
> 
> % Variables
> var 0..10: obj1;
> var 1..10: obj2;
> var 2..10: obj3;
> 
> This following code give me these solutions :
> {10, 1, 9}
> {10, 1, 8}
> {10, 1, 7}
> {10, 1, 6}
> {10, 1, 5}
> {10, 1, 4}
> {10, 1, 3}
> {10, 1, 2}
> 
> the first objective is not minimized :S
> 
> %%%%%%%%%%%%%%%%%%%%%%%%%%
> portfolio([
> 
> and(
>      and(
>       %% minimise => obj2 < lv("best2")
>        %% maximize => obj2 > lv("best2")
>        post(obj1=lv("best1"),
>       post(obj2 < lv("best2"), and(s,assign(best2,obj2)))),
>       prune
>      ),
> 
>      %% minimise => obj1 < lv("best1")
>       %% maximize => obj1 > lv("best1")
>      and(
>        post(obj1 < lv("best1"), and(s,assign(best1,obj1))),
>        prune
>      )
> ),
> 
> 
> %% minimise => obj3 < lv("best3")
> %% maximize => obj3 > lv("best3")
> post(obj2=lv("best2"),
> post(obj3 < lv("best3"), and(s,assign(best3,obj3))))
> 
>  ])
> 
> with trace_sol, I have this bug (gecode 4.2.1, flatzinc 1.6,
> searchcombinators 0.9.3 modified API for gecode 4.2.1):
> trace_sol("*" ++ "\n", ...) //does not work
> Error: Unknown character in line no. 4
> Error: Unknown character in line no. 4
> Error: syntax error, unexpected FZ_ID, expecting ')' or ',' in line no. 5
> 
> Best Regards,
> Mohammed REZGUI
> 
> 2014-03-12 20:35 GMT+01:00 Guido Tack <tack at gecode.org>:
>> Hi,
>> 
>> you'd have to be a bit more specific than "does not work".  Did the two objective version work?  In your code the second stage does not do a "prune" when it's done like the first stage, so it will actually never switch to the third stage.
>> 
>> Output is rather limited at the moment, the code you're using was written as a prototype for a paper, not a production quality system.
>> 
>> Cheers,
>> Guido
>> 
>> On 13 Mar 2014, at 6:21 am, Mohamed Rezgui <kyo.alone at gmail.com> wrote:
>> 
>>> Dear Guido,
>>> 
>>> I compile successfully searchcombinators with gecode 4.2.1 (I change
>>> with the appropriate API).
>>> I would like to know how can I set 3 ou several objectives (on
>>> lexicographic multi-objective) please ?
>>> I test with different approaches and it does not work.
>>> 
>>> Other question how can I print pretty like output with trace_solution
>>> I found a bug with concatenation "*" ++ "\n" (it does not work).
>>> 
>>> %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
>>> include "globals.mzn";
>>> include "searchcombinators.mzn";
>>> 
>>> annotation lexicoMinimize3obj(var int: obj1, var int: obj2, var int:
>>> obj3, ann: s) =
>>> let {
>>> %% minimise => svar int: best1 = ub(obj1)
>>> %% maximize => svar int: best1 = lb(obj1)
>>> svar int: best1 = ub(obj1),
>>> 
>>> %% minimise => svar int: best2 = ub(obj3)
>>> %% maximize => svar int: best2 = lb(obj3)
>>> svar int: best2 = ub(obj2),
>>> 
>>> %% minimise => svar int: best2 = ub(obj3)
>>> %% maximize => svar int: best2 = lb(obj3)
>>> svar int: best3 = ub(obj3)
>>> }
>>> in (
>>> 
>>> 
>>> portfolio([
>>> 
>>> %% minimise => obj1 < lv("best1")
>>> %% maximize => obj1 > lv("best1")
>>> and(
>>> post(obj1 < lv("best1"), and(s,assign(best1,obj1))),
>>> prune
>>> ),
>>> 
>>> %% minimise => obj2 < lv("best2")
>>> %% maximize => obj2 > lv("best2")
>>> post(obj1=lv("best1"),
>>> post(obj2 < lv("best2"), and(s,assign(best2,obj2)))),
>>> 
>>> 
>>> %% minimise => obj3 < lv("best3")
>>> %% maximize => obj3 > lv("best3")
>>> post(obj2=lv("best2"),
>>> post(obj3 < lv("best3"), and(s,assign(best3,obj3))))
>>> 
>>> ])
>>> 
>>> );
>>> 
>>> % Variables
>>> var 0..10: obj1;
>>> var 1..10: obj2;
>>> var 2..10: obj3;
>>> 
>>> %% call
>>> solve
>>>  :: print([obj1, obj2, obj3], lexicoMinimize3obj(obj1, obj2, obj3,
>>> int_search([obj1, obj3, obj2], input_order, assign_ub)
>>>  ))
>>> satisfy;
>>> %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
>>> 
>>> 
>>> Best Regards,
>>> Mohammed REZGUI
>> 
> 
> 
> 
> --
> Cordialement,
> Mohamed REZGUI
> 
> 
> -- 
> Cordialement,
> Mohamed REZGUI
> 
> _______________________________________________
> Gecode users mailing list
> users at gecode.org
> https://www.gecode.org/mailman/listinfo/gecode-users



From kyo.alone at gmail.com  Fri Mar 14 22:09:30 2014
From: kyo.alone at gmail.com (Mohamed Rezgui)
Date: Fri, 14 Mar 2014 22:09:30 +0100
Subject: [gecode-users] Fwd: Multi-objective Model with
 Searchcombinators in Gecode
In-Reply-To: <1925D762-DE78-44AE-A253-DDC02F41992B@gecode.org>
References: <CAFWj1gD0e4O1FMxiVW2Dn_ZgNDdbS_Qgbib6mrxKG-LOzStm=A@mail.gmail.com>
	<DFB3F607-B5E5-4136-B7D8-D00C21DE0722@gecode.org>
	<CAFWj1gCEGFHRodTcoJFbVWff76+Yv+EQDWirv=Bs7a4Gw6QL9w@mail.gmail.com>
	<CAFWj1gD+312_HRPr_QQQxXaTebH4A8ZHnZ65mQqOig=ruUwdnA@mail.gmail.com>
	<CAFWj1gC3FgmGumz4yv0XvwcruhDyL4Kxg5tOgkRgqLu9kuWG6g@mail.gmail.com>
	<CAFWj1gBwoahb98wNThfKMmiVnLOD1Ks9LQQ498M_ii_D=_nG3w@mail.gmail.com>
	<8285688A-A58A-42D7-AA6E-61AF3A6B5C65@gecode.org>
	<CAFWj1gBRH0jkGiRQ3i02P-DbJe1xm8P5W1Wf=k4nf89tuYczVw@mail.gmail.com>
	<CAFWj1gDBERurANG-bHgzVn6qJBY4TUjy3+YBs14pvP6fqSUbGg@mail.gmail.com>
	<1925D762-DE78-44AE-A253-DDC02F41992B@gecode.org>
Message-ID: <CAFWj1gDAX1o7BMo49pnbA-t6i4PPZjqo=5DOY4+jDipAsei39Q@mail.gmail.com>

It is OK, it works very well :)

I prefered use and({ ... ]) instead of portfolio([ ... ]). It is more
closed what I want.

Thank you very much Guido :)

PS : It is a pity that the search combinators have not updated for
activity based search for example or default search :S

Best Regards,
Mohammed REZGUI

2014-03-14 22:03 GMT+01:00 Guido Tack <tack at gecode.org>:
> I can't test it right now, but it should be like this:
>
> portfolio([
>
> %% minimise => obj1 < lv("best1")
> %% maximize => obj1 > lv("best1")
> and(
>   post(obj1 < lv("best1"),
>     and(s,assign(best1,obj1))
>   ),
>   prune
> ),
>
> %% minimise => obj2 < lv("best2")
> %% maximize => obj2 > lv("best2")
> and(
>   post(obj1=lv("best1"),
>     post(obj2 < lv("best2"),
>       and(s,assign(best2,obj2))
>     )
>   ),
>   prune
> ),
>
> %% minimise => obj3 < lv("best3")
> %% maximize => obj3 > lv("best3")
> post(obj1=lv("best1"),
>   post(obj2=lv("best2"),
>     post(obj3 < lv("best3"),
>       and(s,assign(best3,obj3))
>     )
>   )
> )
> ])
>
> Cheers,
> Guido
>
> On 13 Mar 2014, at 6:53 am, Mohamed Rezgui <kyo.alone at gmail.com> wrote:
>
>> ---------- Forwarded message ----------
>> From: Mohamed Rezgui <kyo.alone at gmail.com>
>> Date: 2014-03-12 20:53 GMT+01:00
>> Subject: Re: [gecode-users] Multi-objective Model with
>> Searchcombinators in Gecode
>> To: Guido Tack <tack at gecode.org>
>>
>>
>> Hi,
>>
>> yes the two objective version works very well.
>>
>> But when I did not found the good syntax for 3 and several objectives :S
>> Can you send me the right syntax please ?
>>
>> % Variables
>> var 0..10: obj1;
>> var 1..10: obj2;
>> var 2..10: obj3;
>>
>> This following code give me these solutions :
>> {10, 1, 9}
>> {10, 1, 8}
>> {10, 1, 7}
>> {10, 1, 6}
>> {10, 1, 5}
>> {10, 1, 4}
>> {10, 1, 3}
>> {10, 1, 2}
>>
>> the first objective is not minimized :S
>>
>> %%%%%%%%%%%%%%%%%%%%%%%%%%
>> portfolio([
>>
>> and(
>>      and(
>>       %% minimise => obj2 < lv("best2")
>>        %% maximize => obj2 > lv("best2")
>>        post(obj1=lv("best1"),
>>       post(obj2 < lv("best2"), and(s,assign(best2,obj2)))),
>>       prune
>>      ),
>>
>>      %% minimise => obj1 < lv("best1")
>>       %% maximize => obj1 > lv("best1")
>>      and(
>>        post(obj1 < lv("best1"), and(s,assign(best1,obj1))),
>>        prune
>>      )
>> ),
>>
>>
>> %% minimise => obj3 < lv("best3")
>> %% maximize => obj3 > lv("best3")
>> post(obj2=lv("best2"),
>> post(obj3 < lv("best3"), and(s,assign(best3,obj3))))
>>
>>  ])
>>
>> with trace_sol, I have this bug (gecode 4.2.1, flatzinc 1.6,
>> searchcombinators 0.9.3 modified API for gecode 4.2.1):
>> trace_sol("*" ++ "\n", ...) //does not work
>> Error: Unknown character in line no. 4
>> Error: Unknown character in line no. 4
>> Error: syntax error, unexpected FZ_ID, expecting ')' or ',' in line no. 5
>>
>> Best Regards,
>> Mohammed REZGUI
>>
>> 2014-03-12 20:35 GMT+01:00 Guido Tack <tack at gecode.org>:
>>> Hi,
>>>
>>> you'd have to be a bit more specific than "does not work".  Did the two objective version work?  In your code the second stage does not do a "prune" when it's done like the first stage, so it will actually never switch to the third stage.
>>>
>>> Output is rather limited at the moment, the code you're using was written as a prototype for a paper, not a production quality system.
>>>
>>> Cheers,
>>> Guido
>>>
>>> On 13 Mar 2014, at 6:21 am, Mohamed Rezgui <kyo.alone at gmail.com> wrote:
>>>
>>>> Dear Guido,
>>>>
>>>> I compile successfully searchcombinators with gecode 4.2.1 (I change
>>>> with the appropriate API).
>>>> I would like to know how can I set 3 ou several objectives (on
>>>> lexicographic multi-objective) please ?
>>>> I test with different approaches and it does not work.
>>>>
>>>> Other question how can I print pretty like output with trace_solution
>>>> I found a bug with concatenation "*" ++ "\n" (it does not work).
>>>>
>>>> %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
>>>> include "globals.mzn";
>>>> include "searchcombinators.mzn";
>>>>
>>>> annotation lexicoMinimize3obj(var int: obj1, var int: obj2, var int:
>>>> obj3, ann: s) =
>>>> let {
>>>> %% minimise => svar int: best1 = ub(obj1)
>>>> %% maximize => svar int: best1 = lb(obj1)
>>>> svar int: best1 = ub(obj1),
>>>>
>>>> %% minimise => svar int: best2 = ub(obj3)
>>>> %% maximize => svar int: best2 = lb(obj3)
>>>> svar int: best2 = ub(obj2),
>>>>
>>>> %% minimise => svar int: best2 = ub(obj3)
>>>> %% maximize => svar int: best2 = lb(obj3)
>>>> svar int: best3 = ub(obj3)
>>>> }
>>>> in (
>>>>
>>>>
>>>> portfolio([
>>>>
>>>> %% minimise => obj1 < lv("best1")
>>>> %% maximize => obj1 > lv("best1")
>>>> and(
>>>> post(obj1 < lv("best1"), and(s,assign(best1,obj1))),
>>>> prune
>>>> ),
>>>>
>>>> %% minimise => obj2 < lv("best2")
>>>> %% maximize => obj2 > lv("best2")
>>>> post(obj1=lv("best1"),
>>>> post(obj2 < lv("best2"), and(s,assign(best2,obj2)))),
>>>>
>>>>
>>>> %% minimise => obj3 < lv("best3")
>>>> %% maximize => obj3 > lv("best3")
>>>> post(obj2=lv("best2"),
>>>> post(obj3 < lv("best3"), and(s,assign(best3,obj3))))
>>>>
>>>> ])
>>>>
>>>> );
>>>>
>>>> % Variables
>>>> var 0..10: obj1;
>>>> var 1..10: obj2;
>>>> var 2..10: obj3;
>>>>
>>>> %% call
>>>> solve
>>>>  :: print([obj1, obj2, obj3], lexicoMinimize3obj(obj1, obj2, obj3,
>>>> int_search([obj1, obj3, obj2], input_order, assign_ub)
>>>>  ))
>>>> satisfy;
>>>> %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
>>>>
>>>>
>>>> Best Regards,
>>>> Mohammed REZGUI
>>>
>>
>>
>>
>> --
>> Cordialement,
>> Mohamed REZGUI
>>
>>
>> --
>> Cordialement,
>> Mohamed REZGUI
>>
>> _______________________________________________
>> Gecode users mailing list
>> users at gecode.org
>> https://www.gecode.org/mailman/listinfo/gecode-users
>



-- 
Cordialement,
Mohamed REZGUI


From navid at navid.ca  Wed Mar 19 20:45:06 2014
From: navid at navid.ca (Navid Mohaghegh)
Date: Wed, 19 Mar 2014 15:45:06 -0400
Subject: [gecode-users] Possible Bug - Increase IntVars
	Range	and	Gecode	Stalls
In-Reply-To: <00b801cf2bf1$ac982ac0$05c88040$@se>
References: <7D873EF2-12CD-46C2-AF3B-5E3110085815@navid.ca>	<001401cf1144$50964f30$f1c2ed90$@se>	<78523901-E0EC-403C-A230-CEA44F993D47@navid.ca>	<002801cf1147$8ca35ba0$a5ea12e0$@se>	<D8A1F5E2-5885-4A49-851F-B32A3AFA9631@navid.ca>	<007f01cf12d0$4e008c30$ea01a490$@se>
	<176CC873-A601-4BA6-8758-B68D855F9CE8@navid.ca>
	<009501cf161e$60647520$212d5f60$@kth.se>
	<8D2131C0-64D5-4F62-9797-BA0DC4C68449@navid.ca>
	<00a101cf2bf0$9ec6ae40$dc540ac0$@se>
	<461A2D03-AB67-427D-8896-FDDAB1DADF4C@navid.ca>
	<00b801cf2bf1$ac982ac0$05c88040$@se>
Message-ID: <1079F27F-1885-44DC-A930-28BC48065C16@navid.ca>

Hi Christian,

I am still struggling. I am not doing anything much different from perfect square example and Gist shows still searching.

I post bunch fully solvable constraints. I even try to hint gecode about the answer via COST variable (e.g. imagine that x0 should be solved to 100 and I post cost == (x0 - 100) * (x0-100) ...). However on large values, gist shows still searching while the answers are just given in the cost function!!

Could you kindly shed some light that why gecode is still searching while the answers are just given to it via cost (only for large values this happens).

Thank you,
Navid


On Feb 17, 2014, at 10:05 AM, Christian Schulte <cschulte at kth.se> wrote:

> Note that they are doing two different things: nooverlap guarantees that the rectangles do not overlap. What you have copied beloew enforces as a redundant constraint that the square is perfect, that is all the rectangles cover the outer rectangle.
>  
> Best
> Christian
>  
> --
> Christian Schulte, Professor of Computer Science, KTH, www.ict.kth.se/~cschulte/
>  
> From: Navid Mohaghegh [mailto:navid at navid.ca] 
> Sent: Monday, February 17, 2014 4:03 PM
> To: cschulte at kth.se
> Cc: users at gecode.org
> Subject: Re: [gecode-users] Possible Bug - Increase IntVars Range and Gecode Stalls
>  
> Hi Christian,
>  
> Thank you for your reply.
>  
> Yes, I did look at the Gecode example. Here is where I am referring in gecode perfect squares example:
>  switch (opt.propagation()) {
>     case PROP_REIFIED:
>       {
>         for (int cx=0; cx<w; cx++) {
>           BoolVarArgs bx(*this,n,0,1);
>           for (int i=0; i<n; i++)
>             dom(*this, x[i], cx-s[i]+1, cx, bx[i]);
>           linear(*this, sa, bx, IRT_EQ, w);
>         }
>         for (int cy=0; cy<w; cy++) {
>           BoolVarArgs by(*this,n,0,1);
>           for (int i=0; i<n; i++)
>             dom(*this, y[i], cy-s[i]+1, cy, by[i]);
>           linear(*this, sa, by, IRT_EQ, w);
>         }
>       }
>       break;
>  
>  
> Please note that I am using nooverlap as well. And the only thing I don't have is "switch (opt.propagation())" ...
>  
> Thank you,
> Navid
>  
>  
> On Feb 17, 2014, at 9:57 AM, Christian Schulte <cschulte at kth.se> wrote:
> 
> 
> Hi,
>  
> The Gecode example does not use a special propagator, have you been looking at the example that is _included_ in Gecode?
>  
> Best
> Christian
>  
> --
> Christian Schulte, Professor of Computer Science, KTH, www.ict.kth.se/~cschulte/
>  
> From: Navid Mohaghegh [mailto:navid at navid.ca] 
> Sent: Friday, February 14, 2014 3:25 PM
> To: cschulte at kth.se
> Cc: users at gecode.org
> Subject: Re: [gecode-users] Possible Bug - Increase IntVars Range and Gecode Stalls
>  
> Hi Christian,
>  
> Thank you for your reply.
>  
> I didn't use the word Stall properly. Sorry ... What I mean is that Gecode will get keep searching forever! I am wondering if there is anything can be improved in search strategy. Please note that for values less than 1200 we get instant solution and as soon as we increase the range by 1, then suddenly Gecode will keep searching forever (I left the computer on for 5 days!). 
>  
> I studied the example for perfect square. The only difference between my code and perfect square code is that I am not using custom made propagator. Should I start doing that? And could you kindly point me for more reading on propagator topic (I am still reading MPG chapter 22)?
>  
> Thank you,
> Navid
>  
>  
> On Jan 20, 2014, at 3:29 PM, Christian Schulte <cschulte at kth.se> wrote:
> 
> 
> 
> What does stall mean, again? Is it still searching (you can observe that in Gist), that is making progress? Or is it dead.
>  
> To improve your model, check the perfect square example that comes with Gecode and/or search for square packing on Helmut Simonis? webpage: http://4c.ucc.ie/~hsimonis/
>  
> Christian
>  
>  
> --
> Christian Schulte, www.ict.kth.se/~cschulte
>  
> From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf Of Navid Mohaghegh
> Sent: Thursday, January 16, 2014 09:23 PM
> To: cschulte at kth.se; users at gecode.org
> Subject: Re: [gecode-users] Possible Bug - Increase IntVars Range and Gecode Stalls
>  
> Hi Christian,
>  
> Thank you for your reply. 
>  
> I originally didn't use that as I didn't want to add another set of variables for finishing corner of rectangles (Gecode nooverlap API has a simple version that use fixed int width and int height).
>  
> Per your suggestion, I added two array variables for finishing corner that I can employ the nooverlap API:
> -defined integer array variables for starting point of rectangles (e.g. top left corner): I called it vxs and vys (e.g. X0 and Y0 in Gecode MPG manual)
> -defined integer array variables for width and height of rectangles: I called it vw and vh (e.g. W and H in Gecode MPG manual)
> -defined integer array variables for finishing point of rectangles (e.g. lower right corner): I called it vxf and vyf (e.g. X1 and Y1 in Gecode MPG manual)
> -I removed all manual non-overllaping contraint that I manually added myself and add the following:
>  
>             //starting point  width and hight will give us the finishing point
>             for (i =0 ; i < this->n_vars; i++)
>             {
>                         rel(*this, ( (vxs[i] + vw[i] == vxf[i]) && (vys[i] + vh[i] == vyf[i]) )  );
>             }
>             //add nooverlap for all rectangles     
>             nooverlap(*this, vxs,vw,vxf,   vys,vh,vyf);
>  
>  
> My code gets solved for lower ranges of X vars (e.g. vxs < 1000 and vxf<1200) and the moment I change the x range to values greater than 1500 gecode stalls.
>  
> I appreciate your feedback.
>  
> Thank you,
> Navid
>  
>  
> On Jan 16, 2014, at 10:33 AM, Christian Schulte <cschulte at kth.se> wrote:
> 
> 
> 
> 
> Hi,
>  
> Just very quick: did you look at the nooverlap constraint in Gecode?
>  
> Cheers
> Christian
>  
> --
> Christian Schulte, Professor of Computer Science, KTH, www.ict.kth.se/~cschulte/
>  
> From: Navid Mohaghegh [mailto:navid at navid.ca] 
> Sent: Thursday, January 16, 2014 3:32 PM
> To: users at gecode.org
> Cc: cschulte at kth.se
> Subject: Re: [gecode-users] Possible Bug - Increase IntVars Range and Gecode Stalls
>  
> Hi everyone,
>  
> I tried Gist as Christian mentioned. Gist will not terminate for higher ranges (attached screenshot shows that I had to stop Gist manually for range 1535).
>  
> Could you please point me in the right direction about what I have to more efficient for this problem:
> -Like bin-packing problem, we have bunch of rectangles that shouldn't overlap with each other. 
> -Unlike bin-packing, the width and hight of the rectangles can be variable (e.g. if we have more space in our sheet, we don't mind a rectangle gets bigger). 
> -We have bunch of constraint for the size and location of rectangles.
> -In below, 15 rectangles, 4 array of variables (2 arrays for X,Y location and 2 variables for Width,Height which is for size)     
>  
>  
> Could you please let me know?
>  
> Thank you,
> Navid
> <image001.png>
>  
> On Jan 14, 2014, at 11:42 AM, Christian Schulte <cschulte at kth.se> wrote:
> 
> 
> 
> 
> 
> The bug you refer to has been fixed. But try Gist, there you can see what happens.
>  
> Cheers
> Christian
>  
> --
> Christian Schulte, Professor of Computer Science, KTH, www.ict.kth.se/~cschulte/
>  
> From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf Of Navid Mohaghegh
> Sent: Tuesday, January 14, 2014 5:39 PM
> To: cschulte at kth.se
> Cc: users at gecode.org
> Subject: Re: [gecode-users] Possible Bug - Increase IntVars Range and Gecode Stalls
>  
> Hi Christian,
>  
> Thank your for your reply. I didn't try Gist yet, I will go and look at sample code to learn Gist and I will give it a shot.
>  
> Could you kindly have a look at this comment in mailing list: "There seems to be a trivial bug in INT_VALUES_MAX: SEL_VALUES_MIN is used instead of SEL_VALUES_MAX. The attached patch fixes it."
> I am asking this as mu space get solved by Gecode almost instantly (less than 1ms on a 128 GB ram, quad CPU, 64 cores workstation) for values like 1199. And the moment it goes to 1200 it will stalls. After all it should get slow (I agree with you), but not stall/freeze for 5 days. That is the main reason I suspect a tiny bug somewhere.  
>  
> I will also look at Gist as well as you instructed.
>  
> Thank you,
> Navid
>  
>  
> On Jan 14, 2014, at 11:18 AM, Christian Schulte <cschulte at kth.se> wrote:
> 
> 
> 
> 
> 
> 
> Did you try it in Gist to see how large the search trees get or whether Gecode just hangs?
>  
> After all, you exponentially increase the search space!
>  
> Christian
>  
> --
> Christian Schulte, Professor of Computer Science, KTH, www.ict.kth.se/~cschulte/
>  
> From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf Of Navid Mohaghegh
> Sent: Tuesday, January 14, 2014 5:04 PM
> To: users at gecode.org
> Subject: [gecode-users] Possible Bug - Increase IntVars Range and Gecode Stalls
> Importance: High
>  
> Hi Everyone,
>  
> My question:
> I am wondering what is happening in below and why Gecode stalls stall whenI increase the range of my IntegerVars (while its CPU utilization goes very high) despite the fact that our constraints are not changed?
>  
> Background (http://navid.ca/gecode/test.cpp):
> We are trying to solve a space. We can easily solve the space when our variable ranges are small (e.g. 0 to 800). As soon as the range goes higher (e.g. 0-1535) Gecode will stall and can not produce a solution for the space with exactly the same constraints as before.
>  
> We have 4 groups of integer_array variables. They are called vars_a, vars_b, vars_c and vars_d. And inside each of them, we have 15 integer variables.
> NavidTest(int n, int vars_a_max_, int vars_b_max_, int vars_c_max_, int vars_d_max_, int vcost_max_); 
> NavidTest* m = new NavidTest(15,  800, 500, 410, 60, 2000000000); means:
> n = 15
> vars_a[0] ... vars_a[15] can have values from zero to vars_a_max_ = 800
> vars_b[0] ... vars_b[15] can have values from zero to vars_b_max_ = 500
> vars_c[0] ... vars_c[15] can have values from zero to vars_c_max_ = 410
> vars_d[0] ... vars_d[15] can have values from zero to vars_d_max_ = 60
> our cost variable can be have values from zero to vcost_max_ = 2,000,000,000
> As we have quadratic cost functions and values can easily grow.
> lift() method is where we add our constraints. 
> For demonstration purpose, we have a method that once used, Gecode can produce solution: it is called "void the_one_works()"
> And we have another one (called: void the_one_doesnot_work) that can not be solved using Gecode (it is perfectly solvable and we test our solution in verify_answer() method)
> The only difference between the_one_works() and the_one_doesnot_work() is an increase in vars_a max range from 800 to 1535. 
>  
>  
>  
> I have found a mailing list entry stating a possible bug:
> ==========
> From: victor.zverovich at ... <victor.zverovich at ...>
> Subject: bug in INT_VALUES_MAX
> Newsgroups: gmane.comp.lib.gecode.user
> Date: 2013-06-21 22:20:18 GMT (29 weeks, 3 days, 17 hours and 17 minutes ago)
> There seems to be a trivial bug in INT_VALUES_MAX: SEL_VALUES_MIN is used instead of SEL_VALUES_MAX. The attached patch fixes it.
> Victor
> ==========
>  
> Can someone have a look and let me know?
> We are using Gecode 4.2.1 on Linux
> GCC 4.7.2 and also latest 4.9
> Debian 64bit and CentOS 64bit  
> My code and how I compile and run is here: http://navid.ca/gecode/test.cpp
>  
> Thank you,
> Navid

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.gecode.org/pipermail/users/attachments/20140319/035378cc/attachment-0001.html>

From cschulte at kth.se  Thu Mar 20 10:31:25 2014
From: cschulte at kth.se (Christian Schulte)
Date: Thu, 20 Mar 2014 10:31:25 +0100
Subject: [gecode-users] Possible Bug - Increase
	IntVars	Range	and	Gecode	Stalls
In-Reply-To: <1079F27F-1885-44DC-A930-28BC48065C16@navid.ca>
References: <7D873EF2-12CD-46C2-AF3B-5E3110085815@navid.ca>	<001401cf1144$50964f30$f1c2ed90$@se>	<78523901-E0EC-403C-A230-CEA44F993D47@navid.ca>	<002801cf1147$8ca35ba0$a5ea12e0$@se>	<D8A1F5E2-5885-4A49-851F-B32A3AFA9631@navid.ca>	<007f01cf12d0$4e008c30$ea01a490$@se>	<176CC873-A601-4BA6-8758-B68D855F9CE8@navid.ca>	<009501cf161e$60647520$212d5f60$@kth.se>	<8D2131C0-64D5-4F62-9797-BA0DC4C68449@navid.ca>	<00a101cf2bf0$9ec6ae40$dc540ac0$@se>	<461A2D03-AB67-427D-8896-FDDAB1DADF4C@navid.ca>	<00b801cf2bf1$ac982ac0$05c88040$@se>
	<1079F27F-1885-44DC-A930-28BC48065C16@navid.ca>
Message-ID: <02d901cf441f$2a6857f0$7f3907d0$@kth.se>

Hi,

 

I can't really help you here. This is nothing that has to do with Gecode but
how your problem is modeled.

 

This mailing list is really specific to Gecode and not general modeling with
constraint programming.

 

I am sorry

Christian

 

--

Christian Schulte, Professor of Computer Science, KTH,
www.ict.kth.se/~cschulte/

 

 

From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf
Of Navid Mohaghegh
Sent: Wednesday, March 19, 2014 8:45 PM
To: cschulte at kth.se
Cc: users at gecode.org
Subject: Re: [gecode-users] Possible Bug - Increase IntVars Range and Gecode
Stalls

 

Hi Christian,

 

I am still struggling. I am not doing anything much different from perfect
square example and Gist shows still searching.

 

I post bunch fully solvable constraints. I even try to hint gecode about the
answer via COST variable (e.g. imagine that x0 should be solved to 100 and I
post cost == (x0 - 100) * (x0-100) ...). However on large values, gist shows
still searching while the answers are just given in the cost function!!

 

Could you kindly shed some light that why gecode is still searching while
the answers are just given to it via cost (only for large values this
happens).

 

Thank you,

Navid

 

 

On Feb 17, 2014, at 10:05 AM, Christian Schulte <cschulte at kth.se> wrote:





Note that they are doing two different things: nooverlap guarantees that the
rectangles do not overlap. What you have copied beloew enforces as a
redundant constraint that the square is perfect, that is all the rectangles
cover the outer rectangle.

 

Best

Christian

 

--

Christian Schulte, Professor of Computer Science, KTH,
<http://www.ict.kth.se/~cschulte/> www.ict.kth.se/~cschulte/

 

From: Navid Mohaghegh [mailto:navid at navid.ca] 
Sent: Monday, February 17, 2014 4:03 PM
To: cschulte at kth.se
Cc: users at gecode.org
Subject: Re: [gecode-users] Possible Bug - Increase IntVars Range and Gecode
Stalls

 

Hi Christian,

 

Thank you for your reply.

 

Yes, I did look at the Gecode example. Here is where I am referring in
gecode perfect squares example:

 switch (opt.propagation()) {

    case PROP_REIFIED:

      {

        for (int cx=0; cx<w; cx++) {

          BoolVarArgs bx(*this,n,0,1);

          for (int i=0; i<n; i++)

            dom(*this, x[i], cx-s[i]+1, cx, bx[i]);

          linear(*this, sa, bx, IRT_EQ, w);

        }

        for (int cy=0; cy<w; cy++) {

          BoolVarArgs by(*this,n,0,1);

          for (int i=0; i<n; i++)

            dom(*this, y[i], cy-s[i]+1, cy, by[i]);

          linear(*this, sa, by, IRT_EQ, w);

        }

      }

      break;

 

 

Please note that I am using nooverlap as well. And the only thing I don't
have is "switch (opt.propagation())" ...

 

Thank you,

Navid

 

 

On Feb 17, 2014, at 9:57 AM, Christian Schulte < <mailto:cschulte at kth.se>
cschulte at kth.se> wrote:






Hi,

 

The Gecode example does not use a special propagator, have you been looking
at the example that is _included_ in Gecode?

 

Best

Christian

 

--

Christian Schulte, Professor of Computer Science, KTH,
<http://www.ict.kth.se/~cschulte/> www.ict.kth.se/~cschulte/

 

From: Navid Mohaghegh [ <mailto:navid at navid.ca> mailto:navid at navid.ca] 
Sent: Friday, February 14, 2014 3:25 PM
To:  <mailto:cschulte at kth.se> cschulte at kth.se
Cc:  <mailto:users at gecode.org> users at gecode.org
Subject: Re: [gecode-users] Possible Bug - Increase IntVars Range and Gecode
Stalls

 

Hi Christian,

 

Thank you for your reply.

 

I didn't use the word Stall properly. Sorry ... What I mean is that Gecode
will get keep searching forever! I am wondering if there is anything can be
improved in search strategy. Please note that for values less than 1200 we
get instant solution and as soon as we increase the range by 1, then
suddenly Gecode will keep searching forever (I left the computer on for 5
days!). 

 

I studied the example for perfect square. The only difference between my
code and perfect square code is that I am not using custom made propagator.
Should I start doing that? And could you kindly point me for more reading on
propagator topic (I am still reading MPG chapter 22)?

 

Thank you,

Navid

 

 

On Jan 20, 2014, at 3:29 PM, Christian Schulte < <mailto:cschulte at kth.se>
cschulte at kth.se> wrote:







What does stall mean, again? Is it still searching (you can observe that in
Gist), that is making progress? Or is it dead.

 

To improve your model, check the perfect square example that comes with
Gecode and/or search for square packing on Helmut Simonis' webpage:
<http://4c.ucc.ie/~hsimonis/> http://4c.ucc.ie/~hsimonis/

 

Christian

 

 

--

Christian Schulte,  <http://www.ict.kth.se/~cschulte>
www.ict.kth.se/~cschulte

 

From:  <mailto:users-bounces at gecode.org> users-bounces at gecode.org [
<mailto:users-bounces at gecode.org> mailto:users-bounces at gecode.org] On Behalf
Of Navid Mohaghegh
Sent: Thursday, January 16, 2014 09:23 PM
To:  <mailto:cschulte at kth.se> cschulte at kth.se;  <mailto:users at gecode.org>
users at gecode.org
Subject: Re: [gecode-users] Possible Bug - Increase IntVars Range and Gecode
Stalls

 

Hi Christian,

 

Thank you for your reply. 

 

I originally didn't use that as I didn't want to add another set of
variables for finishing corner of rectangles (Gecode nooverlap API has a
simple version that use fixed int width and int height).

 

Per your suggestion, I added two array variables for finishing corner that I
can employ the nooverlap API:

-defined integer array variables for starting point of rectangles (e.g. top
left corner): I called it vxs and vys (e.g. X0 and Y0 in Gecode MPG manual)

-defined integer array variables for width and height of rectangles: I
called it vw and vh (e.g. W and H in Gecode MPG manual)

-defined integer array variables for finishing point of rectangles (e.g.
lower right corner): I called it vxf and vyf (e.g. X1 and Y1 in Gecode MPG
manual)

-I removed all manual non-overllaping contraint that I manually added myself
and add the following:

 

            //starting point  width and hight will give us the finishing
point

            for (i =0 ; i < this->n_vars; i++)

            {

                        rel(*this, ( (vxs[i] + vw[i] == vxf[i]) && (vys[i] +
vh[i] == vyf[i]) )  );

            }

            //add nooverlap for all rectangles     

            nooverlap(*this, vxs,vw,vxf,   vys,vh,vyf);

 

 

My code gets solved for lower ranges of X vars (e.g. vxs < 1000 and
vxf<1200) and the moment I change the x range to values greater than 1500
gecode stalls.

 

I appreciate your feedback.

 

Thank you,

Navid

 

 

On Jan 16, 2014, at 10:33 AM, Christian Schulte < <mailto:cschulte at kth.se>
cschulte at kth.se> wrote:








Hi,

 

Just very quick: did you look at the nooverlap constraint in Gecode?

 

Cheers

Christian

 

--

Christian Schulte, Professor of Computer Science, KTH,
<http://www.ict.kth.se/~cschulte/> www.ict.kth.se/~cschulte/

 

From: Navid Mohaghegh [ <mailto:navid at navid.ca> mailto:navid at navid.ca] 
Sent: Thursday, January 16, 2014 3:32 PM
To:  <mailto:users at gecode.org> users at gecode.org
Cc:  <mailto:cschulte at kth.se> cschulte at kth.se
Subject: Re: [gecode-users] Possible Bug - Increase IntVars Range and Gecode
Stalls

 

Hi everyone,

 

I tried Gist as Christian mentioned. Gist will not terminate for higher
ranges (attached screenshot shows that I had to stop Gist manually for range
1535).

 

Could you please point me in the right direction about what I have to more
efficient for this problem:

-Like bin-packing problem, we have bunch of rectangles that shouldn't
overlap with each other. 

-Unlike bin-packing, the width and hight of the rectangles can be variable
(e.g. if we have more space in our sheet, we don't mind a rectangle gets
bigger). 

-We have bunch of constraint for the size and location of rectangles.

-In below, 15 rectangles, 4 array of variables (2 arrays for X,Y location
and 2 variables for Width,Height which is for size)     

 

 

Could you please let me know?

 

Thank you,

Navid

<image001.png>

 

On Jan 14, 2014, at 11:42 AM, Christian Schulte < <mailto:cschulte at kth.se>
cschulte at kth.se> wrote:









The bug you refer to has been fixed. But try Gist, there you can see what
happens.

 

Cheers

Christian

 

--

Christian Schulte, Professor of Computer Science, KTH,
<http://www.ict.kth.se/~cschulte/> www.ict.kth.se/~cschulte/

 

From:  <mailto:users-bounces at gecode.org> users-bounces at gecode.org [
<mailto:users-bounces at gecode.org> mailto:users-bounces at gecode.org] On Behalf
Of Navid Mohaghegh
Sent: Tuesday, January 14, 2014 5:39 PM
To:  <mailto:cschulte at kth.se> cschulte at kth.se
Cc:  <mailto:users at gecode.org> users at gecode.org
Subject: Re: [gecode-users] Possible Bug - Increase IntVars Range and Gecode
Stalls

 

Hi Christian,

 

Thank your for your reply. I didn't try Gist yet, I will go and look at
sample code to learn Gist and I will give it a shot.

 

Could you kindly have a look at this comment in mailing list: "There seems
to be a trivial bug in INT_VALUES_MAX: SEL_VALUES_MIN is used instead of
SEL_VALUES_MAX. The attached patch fixes it."

I am asking this as mu space get solved by Gecode almost instantly (less
than 1ms on a 128 GB ram, quad CPU, 64 cores workstation) for values like
1199. And the moment it goes to 1200 it will stalls. After all it should get
slow (I agree with you), but not stall/freeze for 5 days. That is the main
reason I suspect a tiny bug somewhere.  

 

I will also look at Gist as well as you instructed.

 

Thank you,

Navid

 

 

On Jan 14, 2014, at 11:18 AM, Christian Schulte < <mailto:cschulte at kth.se>
cschulte at kth.se> wrote:










Did you try it in Gist to see how large the search trees get or whether
Gecode just hangs?

 

After all, you exponentially increase the search space!

 

Christian

 

--

Christian Schulte, Professor of Computer Science, KTH,
<http://www.ict.kth.se/~cschulte/> www.ict.kth.se/~cschulte/

 

From:  <mailto:users-bounces at gecode.org> users-bounces at gecode.org [
<mailto:users-bounces at gecode.org> mailto:users-bounces at gecode.org] On Behalf
Of Navid Mohaghegh
Sent: Tuesday, January 14, 2014 5:04 PM
To:  <mailto:users at gecode.org> users at gecode.org
Subject: [gecode-users] Possible Bug - Increase IntVars Range and Gecode
Stalls
Importance: High

 

Hi Everyone,

 

My question:

I am wondering what is happening in below and why Gecode stalls stall whenI
increase the range of my IntegerVars (while its CPU utilization goes very
high) despite the fact that our constraints are not changed?

 

Background ( <http://navid.ca/gecode/test.cpp>
http://navid.ca/gecode/test.cpp):

We are trying to solve a space. We can easily solve the space when our
variable ranges are small (e.g. 0 to 800). As soon as the range goes higher
(e.g. 0-1535) Gecode will stall and can not produce a solution for the space
with exactly the same constraints as before.

 

*	We have 4 groups of integer_array variables. They are called vars_a,
vars_b, vars_c and vars_d. And inside each of them, we have 15 integer
variables.

*	NavidTest(int n, int vars_a_max_, int vars_b_max_, int vars_c_max_,
int vars_d_max_, int vcost_max_); 
*	NavidTest* m = new NavidTest(15,  800, 500, 410, 60, 2000000000);
means:

*	n = 15
*	vars_a[0] ... vars_a[15] can have values from zero to vars_a_max_ =
800
*	vars_b[0] ... vars_b[15] can have values from zero to vars_b_max_ =
500
*	vars_c[0] ... vars_c[15] can have values from zero to vars_c_max_ =
410
*	vars_d[0] ... vars_d[15] can have values from zero to vars_d_max_ =
60
*	our cost variable can be have values from zero to vcost_max_ =
2,000,000,000

*	As we have quadratic cost functions and values can easily grow.

*	lift() method is where we add our constraints. 
*	For demonstration purpose, we have a method that once used, Gecode
can produce solution: it is called "void the_one_works()"

*	And we have another one (called: void the_one_doesnot_work) that can
not be solved using Gecode (it is perfectly solvable and we test our
solution in verify_answer() method)
*	The only difference between the_one_works() and
the_one_doesnot_work() is an increase in vars_a max range from 800 to 1535. 

 

 

 

I have found a mailing list entry stating a possible bug:

==========

From:
<http://gmane.org/get-address.php?address=victor.zverovich%2dRe5JQEeQqe8Avxt
iuMwx3w%40public.gmane.org> victor.zverovich at ... <
<http://gmane.org/get-address.php?address=victor.zverovich%2dRe5JQEeQqe8Avxt
iuMwx3w%40public.gmane.org> victor.zverovich at ...>
Subject:
<http://news.gmane.org/find-root.php?message_id=CANawtxb3jmzB754b7zWaZMuG76T
7KJBwAj1PP%2bMmHgJL%3d0EKVQ%40mail.gmail.com> bug in INT_VALUES_MAX
Newsgroups:  <http://news.gmane.org/gmane.comp.lib.gecode.user>
gmane.comp.lib.gecode.user
Date: 2013-06-21 22:20:18 GMT (29 weeks, 3 days, 17 hours and 17 minutes
ago)

There seems to be a trivial bug in INT_VALUES_MAX: SEL_VALUES_MIN is used
instead of SEL_VALUES_MAX. The attached patch fixes it.

Victor

==========

 

Can someone have a look and let me know?

*	We are using Gecode 4.2.1 on Linux
*	GCC 4.7.2 and also latest 4.9
*	Debian 64bit and CentOS 64bit  
*	My code and how I compile and run is here:
<http://navid.ca/gecode/test.cpp> http://navid.ca/gecode/test.cpp

 

Thank you,

Navid

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.gecode.org/pipermail/users/attachments/20140320/de650f8a/attachment-0001.html>

From navid at navid.ca  Thu Mar 20 13:42:32 2014
From: navid at navid.ca (Navid Mohaghegh)
Date: Thu, 20 Mar 2014 08:42:32 -0400
Subject: [gecode-users] Possible Bug - Increase
	IntVars	Range	and	Gecode	Stalls
In-Reply-To: <02d901cf441f$2a6857f0$7f3907d0$@kth.se>
References: <7D873EF2-12CD-46C2-AF3B-5E3110085815@navid.ca>	<001401cf1144$50964f30$f1c2ed90$@se>	<78523901-E0EC-403C-A230-CEA44F993D47@navid.ca>	<002801cf1147$8ca35ba0$a5ea12e0$@se>	<D8A1F5E2-5885-4A49-851F-B32A3AFA9631@navid.ca>	<007f01cf12d0$4e008c30$ea01a490$@se>	<176CC873-A601-4BA6-8758-B68D855F9CE8@navid.ca>	<009501cf161e$60647520$212d5f60$@kth.se>	<8D2131C0-64D5-4F62-9797-BA0DC4C68449@navid.ca>	<00a101cf2bf0$9ec6ae40$dc540ac0$@se>	<461A2D03-AB67-427D-8896-FDDAB1DADF4C@navid.ca>	<00b801cf2bf1$ac982ac0$05c88040$@se>
	<1079F27F-1885-44DC-A930-28BC48065C16@navid.ca>
	<02d901cf441f$2a6857f0$7f3907d0$@kth.se>
Message-ID: <7ED40EF4-32CB-4A80-A744-B9C6D0F0D8FF@navid.ca>

Hi All,

Thank you Christian for trying and all your effort.

Everyone else, I disagree with Christian and thin1k this is directly Gecode related. Gecode will keep searching when the answer to the solution is just given and provided in its COST variable. There is something wrong with Gecode there. Could you have a look?

Thank you,
Navid

On Mar 20, 2014, at 5:31 AM, Christian Schulte <cschulte at kth.se> wrote:

> Hi,
>  
> I can?t really help you here. This is nothing that has to do with Gecode but how your problem is modeled.
>  
> This mailing list is really specific to Gecode and not general modeling with constraint programming.
>  
> I am sorry
> Christian
>  
> --
> Christian Schulte, Professor of Computer Science, KTH,  www.ict.kth.se/~cschulte/
>  
>  
> From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf Of Navid Mohaghegh
> Sent: Wednesday, March 19, 2014 8:45 PM
> To: cschulte at kth.se
> Cc: users at gecode.org
> Subject: Re: [gecode-users] Possible Bug - Increase IntVars Range and Gecode Stalls
>  
> Hi Christian,
>  
> I am still struggling. I am not doing anything much different from perfect square example and Gist shows still searching.
>  
> I post bunch fully solvable constraints. I even try to hint gecode about the answer via COST variable (e.g. imagine that x0 should be solved to 100 and I post cost == (x0 - 100) * (x0-100) ...). However on large values, gist shows still searching while the answers are just given in the cost function!!
>  
> Could you kindly shed some light that why gecode is still searching while the answers are just given to it via cost (only for large values this happens).
>  
> Thank you,
> Navid
>  
>  
> On Feb 17, 2014, at 10:05 AM, Christian Schulte <cschulte at kth.se> wrote:
> 
> 
> Note that they are doing two different things: nooverlap guarantees that the rectangles do not overlap. What you have copied beloew enforces as a redundant constraint that the square is perfect, that is all the rectangles cover the outer rectangle.
>  
> Best
> Christian
>  
> --
> Christian Schulte, Professor of Computer Science, KTH, www.ict.kth.se/~cschulte/
>  
> From: Navid Mohaghegh [mailto:navid at navid.ca] 
> Sent: Monday, February 17, 2014 4:03 PM
> To: cschulte at kth.se
> Cc: users at gecode.org
> Subject: Re: [gecode-users] Possible Bug - Increase IntVars Range and Gecode Stalls
>  
> Hi Christian,
>  
> Thank you for your reply.
>  
> Yes, I did look at the Gecode example. Here is where I am referring in gecode perfect squares example:
>  switch (opt.propagation()) {
>     case PROP_REIFIED:
>       {
>         for (int cx=0; cx<w; cx++) {
>           BoolVarArgs bx(*this,n,0,1);
>           for (int i=0; i<n; i++)
>             dom(*this, x[i], cx-s[i]+1, cx, bx[i]);
>           linear(*this, sa, bx, IRT_EQ, w);
>         }
>         for (int cy=0; cy<w; cy++) {
>           BoolVarArgs by(*this,n,0,1);
>           for (int i=0; i<n; i++)
>             dom(*this, y[i], cy-s[i]+1, cy, by[i]);
>           linear(*this, sa, by, IRT_EQ, w);
>         }
>       }
>       break;
>  
>  
> Please note that I am using nooverlap as well. And the only thing I don't have is "switch (opt.propagation())" ...
>  
> Thank you,
> Navid
>  
>  
> On Feb 17, 2014, at 9:57 AM, Christian Schulte <cschulte at kth.se> wrote:
> 
> 
> 
> Hi,
>  
> The Gecode example does not use a special propagator, have you been looking at the example that is _included_ in Gecode?
>  
> Best
> Christian
>  
> --
> Christian Schulte, Professor of Computer Science, KTH, www.ict.kth.se/~cschulte/
>  
> From: Navid Mohaghegh [mailto:navid at navid.ca] 
> Sent: Friday, February 14, 2014 3:25 PM
> To: cschulte at kth.se
> Cc: users at gecode.org
> Subject: Re: [gecode-users] Possible Bug - Increase IntVars Range and Gecode Stalls
>  
> Hi Christian,
>  
> Thank you for your reply.
>  
> I didn't use the word Stall properly. Sorry ... What I mean is that Gecode will get keep searching forever! I am wondering if there is anything can be improved in search strategy. Please note that for values less than 1200 we get instant solution and as soon as we increase the range by 1, then suddenly Gecode will keep searching forever (I left the computer on for 5 days!). 
>  
> I studied the example for perfect square. The only difference between my code and perfect square code is that I am not using custom made propagator. Should I start doing that? And could you kindly point me for more reading on propagator topic (I am still reading MPG chapter 22)?
>  
> Thank you,
> Navid
>  
>  
> On Jan 20, 2014, at 3:29 PM, Christian Schulte <cschulte at kth.se> wrote:
> 
> 
> 
> 
> What does stall mean, again? Is it still searching (you can observe that in Gist), that is making progress? Or is it dead.
>  
> To improve your model, check the perfect square example that comes with Gecode and/or search for square packing on Helmut Simonis? webpage: http://4c.ucc.ie/~hsimonis/
>  
> Christian
>  
>  
> --
> Christian Schulte, www.ict.kth.se/~cschulte
>  
> From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf Of Navid Mohaghegh
> Sent: Thursday, January 16, 2014 09:23 PM
> To: cschulte at kth.se; users at gecode.org
> Subject: Re: [gecode-users] Possible Bug - Increase IntVars Range and Gecode Stalls
>  
> Hi Christian,
>  
> Thank you for your reply. 
>  
> I originally didn't use that as I didn't want to add another set of variables for finishing corner of rectangles (Gecode nooverlap API has a simple version that use fixed int width and int height).
>  
> Per your suggestion, I added two array variables for finishing corner that I can employ the nooverlap API:
> -defined integer array variables for starting point of rectangles (e.g. top left corner): I called it vxs and vys (e.g. X0 and Y0 in Gecode MPG manual)
> -defined integer array variables for width and height of rectangles: I called it vw and vh (e.g. W and H in Gecode MPG manual)
> -defined integer array variables for finishing point of rectangles (e.g. lower right corner): I called it vxf and vyf (e.g. X1 and Y1 in Gecode MPG manual)
> -I removed all manual non-overllaping contraint that I manually added myself and add the following:
>  
>             //starting point  width and hight will give us the finishing point
>             for (i =0 ; i < this->n_vars; i++)
>             {
>                         rel(*this, ( (vxs[i] + vw[i] == vxf[i]) && (vys[i] + vh[i] == vyf[i]) )  );
>             }
>             //add nooverlap for all rectangles     
>             nooverlap(*this, vxs,vw,vxf,   vys,vh,vyf);
>  
>  
> My code gets solved for lower ranges of X vars (e.g. vxs < 1000 and vxf<1200) and the moment I change the x range to values greater than 1500 gecode stalls.
>  
> I appreciate your feedback.
>  
> Thank you,
> Navid
>  
>  
> On Jan 16, 2014, at 10:33 AM, Christian Schulte <cschulte at kth.se> wrote:
> 
> 
> 
> 
> 
> Hi,
>  
> Just very quick: did you look at the nooverlap constraint in Gecode?
>  
> Cheers
> Christian
>  
> --
> Christian Schulte, Professor of Computer Science, KTH, www.ict.kth.se/~cschulte/
>  
> From: Navid Mohaghegh [mailto:navid at navid.ca] 
> Sent: Thursday, January 16, 2014 3:32 PM
> To: users at gecode.org
> Cc: cschulte at kth.se
> Subject: Re: [gecode-users] Possible Bug - Increase IntVars Range and Gecode Stalls
>  
> Hi everyone,
>  
> I tried Gist as Christian mentioned. Gist will not terminate for higher ranges (attached screenshot shows that I had to stop Gist manually for range 1535).
>  
> Could you please point me in the right direction about what I have to more efficient for this problem:
> -Like bin-packing problem, we have bunch of rectangles that shouldn't overlap with each other. 
> -Unlike bin-packing, the width and hight of the rectangles can be variable (e.g. if we have more space in our sheet, we don't mind a rectangle gets bigger). 
> -We have bunch of constraint for the size and location of rectangles.
> -In below, 15 rectangles, 4 array of variables (2 arrays for X,Y location and 2 variables for Width,Height which is for size)     
>  
>  
> Could you please let me know?
>  
> Thank you,
> Navid
> <image001.png>
>  
> On Jan 14, 2014, at 11:42 AM, Christian Schulte <cschulte at kth.se> wrote:
> 
> 
> 
> 
> 
> 
> The bug you refer to has been fixed. But try Gist, there you can see what happens.
>  
> Cheers
> Christian
>  
> --
> Christian Schulte, Professor of Computer Science, KTH, www.ict.kth.se/~cschulte/
>  
> From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf Of Navid Mohaghegh
> Sent: Tuesday, January 14, 2014 5:39 PM
> To: cschulte at kth.se
> Cc: users at gecode.org
> Subject: Re: [gecode-users] Possible Bug - Increase IntVars Range and Gecode Stalls
>  
> Hi Christian,
>  
> Thank your for your reply. I didn't try Gist yet, I will go and look at sample code to learn Gist and I will give it a shot.
>  
> Could you kindly have a look at this comment in mailing list: "There seems to be a trivial bug in INT_VALUES_MAX: SEL_VALUES_MIN is used instead of SEL_VALUES_MAX. The attached patch fixes it."
> I am asking this as mu space get solved by Gecode almost instantly (less than 1ms on a 128 GB ram, quad CPU, 64 cores workstation) for values like 1199. And the moment it goes to 1200 it will stalls. After all it should get slow (I agree with you), but not stall/freeze for 5 days. That is the main reason I suspect a tiny bug somewhere.  
>  
> I will also look at Gist as well as you instructed.
>  
> Thank you,
> Navid
>  
>  
> On Jan 14, 2014, at 11:18 AM, Christian Schulte <cschulte at kth.se> wrote:
> 
> 
> 
> 
> 
> 
> 
> Did you try it in Gist to see how large the search trees get or whether Gecode just hangs?
>  
> After all, you exponentially increase the search space!
>  
> Christian
>  
> --
> Christian Schulte, Professor of Computer Science, KTH, www.ict.kth.se/~cschulte/
>  
> From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf Of Navid Mohaghegh
> Sent: Tuesday, January 14, 2014 5:04 PM
> To: users at gecode.org
> Subject: [gecode-users] Possible Bug - Increase IntVars Range and Gecode Stalls
> Importance: High
>  
> Hi Everyone,
>  
> My question:
> I am wondering what is happening in below and why Gecode stalls stall whenI increase the range of my IntegerVars (while its CPU utilization goes very high) despite the fact that our constraints are not changed?
>  
> Background (http://navid.ca/gecode/test.cpp):
> We are trying to solve a space. We can easily solve the space when our variable ranges are small (e.g. 0 to 800). As soon as the range goes higher (e.g. 0-1535) Gecode will stall and can not produce a solution for the space with exactly the same constraints as before.
>  
> We have 4 groups of integer_array variables. They are called vars_a, vars_b, vars_c and vars_d. And inside each of them, we have 15 integer variables.
> NavidTest(int n, int vars_a_max_, int vars_b_max_, int vars_c_max_, int vars_d_max_, int vcost_max_); 
> NavidTest* m = new NavidTest(15,  800, 500, 410, 60, 2000000000); means:
> n = 15
> vars_a[0] ... vars_a[15] can have values from zero to vars_a_max_ = 800
> vars_b[0] ... vars_b[15] can have values from zero to vars_b_max_ = 500
> vars_c[0] ... vars_c[15] can have values from zero to vars_c_max_ = 410
> vars_d[0] ... vars_d[15] can have values from zero to vars_d_max_ = 60
> our cost variable can be have values from zero to vcost_max_ = 2,000,000,000
> As we have quadratic cost functions and values can easily grow.
> lift() method is where we add our constraints. 
> For demonstration purpose, we have a method that once used, Gecode can produce solution: it is called "void the_one_works()"
> And we have another one (called: void the_one_doesnot_work) that can not be solved using Gecode (it is perfectly solvable and we test our solution in verify_answer() method)
> The only difference between the_one_works() and the_one_doesnot_work() is an increase in vars_a max range from 800 to 1535. 
>  
>  
>  
> I have found a mailing list entry stating a possible bug:
> ==========
> From: victor.zverovich at ... <victor.zverovich at ...>
> Subject: bug in INT_VALUES_MAX
> Newsgroups: gmane.comp.lib.gecode.user
> Date: 2013-06-21 22:20:18 GMT (29 weeks, 3 days, 17 hours and 17 minutes ago)
> There seems to be a trivial bug in INT_VALUES_MAX: SEL_VALUES_MIN is used instead of SEL_VALUES_MAX. The attached patch fixes it.
> Victor
> ==========
>  
> Can someone have a look and let me know?
> We are using Gecode 4.2.1 on Linux
> GCC 4.7.2 and also latest 4.9
> Debian 64bit and CentOS 64bit  
> My code and how I compile and run is here: http://navid.ca/gecode/test.cpp
>  
> Thank you,
> Navid

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.gecode.org/pipermail/users/attachments/20140320/6c69f218/attachment-0001.html>

From cschulte at kth.se  Thu Mar 20 13:46:24 2014
From: cschulte at kth.se (Christian Schulte)
Date: Thu, 20 Mar 2014 13:46:24 +0100
Subject: [gecode-users] Possible Bug -
	Increase	IntVars	Range	and	Gecode	Stalls
In-Reply-To: <7ED40EF4-32CB-4A80-A744-B9C6D0F0D8FF@navid.ca>
References: <7D873EF2-12CD-46C2-AF3B-5E3110085815@navid.ca>	<001401cf1144$50964f30$f1c2ed90$@se>	<78523901-E0EC-403C-A230-CEA44F993D47@navid.ca>	<002801cf1147$8ca35ba0$a5ea12e0$@se>	<D8A1F5E2-5885-4A49-851F-B32A3AFA9631@navid.ca>	<007f01cf12d0$4e008c30$ea01a490$@se>	<176CC873-A601-4BA6-8758-B68D855F9CE8@navid.ca>	<009501cf161e$60647520$212d5f60$@kth.se>	<8D2131C0-64D5-4F62-9797-BA0DC4C68449@navid.ca>	<00a101cf2bf0$9ec6ae40$dc540ac0$@se>	<461A2D03-AB67-427D-8896-FDDAB1DADF4C@navid.ca>	<00b801cf2bf1$ac982ac0$05c88040$@se>	<1079F27F-1885-44DC-A930-28BC48065C16@navid.ca>	<02d901cf441f$2a6857f0$7f3907d0$@kth.se>
	<7ED40EF4-32CB-4A80-A744-B9C6D0F0D8FF@navid.ca>
Message-ID: <031e01cf443a$670ed150$352c73f0$@kth.se>

There is nothing wrong with Gecode here. That's a fact.

 

Please do learn what hard combinatorial problems are.

 

Christian

 

--

Christian Schulte, Professor of Computer Science, KTH,
www.ict.kth.se/~cschulte/

 

 

From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf
Of Navid Mohaghegh
Sent: Thursday, March 20, 2014 1:43 PM
To: users at gecode.org
Cc: cschulte at kth.se
Subject: Re: [gecode-users] Possible Bug - Increase IntVars Range and Gecode
Stalls

 

Hi All,

 

Thank you Christian for trying and all your effort.

 

Everyone else, I disagree with Christian and thin1k this is directly Gecode
related. Gecode will keep searching when the answer to the solution is just
given and provided in its COST variable. There is something wrong with
Gecode there. Could you have a look?

 

Thank you,

Navid

 

On Mar 20, 2014, at 5:31 AM, Christian Schulte <cschulte at kth.se> wrote:





Hi,

 

I can't really help you here. This is nothing that has to do with Gecode but
how your problem is modeled.

 

This mailing list is really specific to Gecode and not general modeling with
constraint programming.

 

I am sorry

Christian

 

--

Christian Schulte, Professor of Computer Science, KTH,
<http://www.ict.kth.se/~cschulte/> www.ict.kth.se/~cschulte/

 

 

From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf
Of Navid Mohaghegh
Sent: Wednesday, March 19, 2014 8:45 PM
To: cschulte at kth.se
Cc: users at gecode.org
Subject: Re: [gecode-users] Possible Bug - Increase IntVars Range and Gecode
Stalls

 

Hi Christian,

 

I am still struggling. I am not doing anything much different from perfect
square example and Gist shows still searching.

 

I post bunch fully solvable constraints. I even try to hint gecode about the
answer via COST variable (e.g. imagine that x0 should be solved to 100 and I
post cost == (x0 - 100) * (x0-100) ...). However on large values, gist shows
still searching while the answers are just given in the cost function!!

 

Could you kindly shed some light that why gecode is still searching while
the answers are just given to it via cost (only for large values this
happens).

 

Thank you,

Navid

 

 

On Feb 17, 2014, at 10:05 AM, Christian Schulte < <mailto:cschulte at kth.se>
cschulte at kth.se> wrote:






Note that they are doing two different things: nooverlap guarantees that the
rectangles do not overlap. What you have copied beloew enforces as a
redundant constraint that the square is perfect, that is all the rectangles
cover the outer rectangle.

 

Best

Christian

 

--

Christian Schulte, Professor of Computer Science, KTH,
<http://www.ict.kth.se/~cschulte/> www.ict.kth.se/~cschulte/

 

From: Navid Mohaghegh [ <mailto:navid at navid.ca> mailto:navid at navid.ca] 
Sent: Monday, February 17, 2014 4:03 PM
To:  <mailto:cschulte at kth.se> cschulte at kth.se
Cc:  <mailto:users at gecode.org> users at gecode.org
Subject: Re: [gecode-users] Possible Bug - Increase IntVars Range and Gecode
Stalls

 

Hi Christian,

 

Thank you for your reply.

 

Yes, I did look at the Gecode example. Here is where I am referring in
gecode perfect squares example:

 switch (opt.propagation()) {

    case PROP_REIFIED:

      {

        for (int cx=0; cx<w; cx++) {

          BoolVarArgs bx(*this,n,0,1);

          for (int i=0; i<n; i++)

            dom(*this, x[i], cx-s[i]+1, cx, bx[i]);

          linear(*this, sa, bx, IRT_EQ, w);

        }

        for (int cy=0; cy<w; cy++) {

          BoolVarArgs by(*this,n,0,1);

          for (int i=0; i<n; i++)

            dom(*this, y[i], cy-s[i]+1, cy, by[i]);

          linear(*this, sa, by, IRT_EQ, w);

        }

      }

      break;

 

 

Please note that I am using nooverlap as well. And the only thing I don't
have is "switch (opt.propagation())" ...

 

Thank you,

Navid

 

 

On Feb 17, 2014, at 9:57 AM, Christian Schulte < <mailto:cschulte at kth.se>
cschulte at kth.se> wrote:







Hi,

 

The Gecode example does not use a special propagator, have you been looking
at the example that is _included_ in Gecode?

 

Best

Christian

 

--

Christian Schulte, Professor of Computer Science, KTH,
<http://www.ict.kth.se/~cschulte/> www.ict.kth.se/~cschulte/

 

From: Navid Mohaghegh [ <mailto:navid at navid.ca> mailto:navid at navid.ca] 
Sent: Friday, February 14, 2014 3:25 PM
To:  <mailto:cschulte at kth.se> cschulte at kth.se
Cc:  <mailto:users at gecode.org> users at gecode.org
Subject: Re: [gecode-users] Possible Bug - Increase IntVars Range and Gecode
Stalls

 

Hi Christian,

 

Thank you for your reply.

 

I didn't use the word Stall properly. Sorry ... What I mean is that Gecode
will get keep searching forever! I am wondering if there is anything can be
improved in search strategy. Please note that for values less than 1200 we
get instant solution and as soon as we increase the range by 1, then
suddenly Gecode will keep searching forever (I left the computer on for 5
days!). 

 

I studied the example for perfect square. The only difference between my
code and perfect square code is that I am not using custom made propagator.
Should I start doing that? And could you kindly point me for more reading on
propagator topic (I am still reading MPG chapter 22)?

 

Thank you,

Navid

 

 

On Jan 20, 2014, at 3:29 PM, Christian Schulte < <mailto:cschulte at kth.se>
cschulte at kth.se> wrote:








What does stall mean, again? Is it still searching (you can observe that in
Gist), that is making progress? Or is it dead.

 

To improve your model, check the perfect square example that comes with
Gecode and/or search for square packing on Helmut Simonis' webpage:
<http://4c.ucc.ie/~hsimonis/> http://4c.ucc.ie/~hsimonis/

 

Christian

 

 

--

Christian Schulte,  <http://www.ict.kth.se/~cschulte>
www.ict.kth.se/~cschulte

 

From:  <mailto:users-bounces at gecode.org> users-bounces at gecode.org [
<mailto:users-bounces at gecode.org> mailto:users-bounces at gecode.org] On Behalf
Of Navid Mohaghegh
Sent: Thursday, January 16, 2014 09:23 PM
To:  <mailto:cschulte at kth.se> cschulte at kth.se;  <mailto:users at gecode.org>
users at gecode.org
Subject: Re: [gecode-users] Possible Bug - Increase IntVars Range and Gecode
Stalls

 

Hi Christian,

 

Thank you for your reply. 

 

I originally didn't use that as I didn't want to add another set of
variables for finishing corner of rectangles (Gecode nooverlap API has a
simple version that use fixed int width and int height).

 

Per your suggestion, I added two array variables for finishing corner that I
can employ the nooverlap API:

-defined integer array variables for starting point of rectangles (e.g. top
left corner): I called it vxs and vys (e.g. X0 and Y0 in Gecode MPG manual)

-defined integer array variables for width and height of rectangles: I
called it vw and vh (e.g. W and H in Gecode MPG manual)

-defined integer array variables for finishing point of rectangles (e.g.
lower right corner): I called it vxf and vyf (e.g. X1 and Y1 in Gecode MPG
manual)

-I removed all manual non-overllaping contraint that I manually added myself
and add the following:

 

            //starting point  width and hight will give us the finishing
point

            for (i =0 ; i < this->n_vars; i++)

            {

                        rel(*this, ( (vxs[i] + vw[i] == vxf[i]) && (vys[i] +
vh[i] == vyf[i]) )  );

            }

            //add nooverlap for all rectangles     

            nooverlap(*this, vxs,vw,vxf,   vys,vh,vyf);

 

 

My code gets solved for lower ranges of X vars (e.g. vxs < 1000 and
vxf<1200) and the moment I change the x range to values greater than 1500
gecode stalls.

 

I appreciate your feedback.

 

Thank you,

Navid

 

 

On Jan 16, 2014, at 10:33 AM, Christian Schulte < <mailto:cschulte at kth.se>
cschulte at kth.se> wrote:









Hi,

 

Just very quick: did you look at the nooverlap constraint in Gecode?

 

Cheers

Christian

 

--

Christian Schulte, Professor of Computer Science, KTH,
<http://www.ict.kth.se/~cschulte/> www.ict.kth.se/~cschulte/

 

From: Navid Mohaghegh [ <mailto:navid at navid.ca> mailto:navid at navid.ca] 
Sent: Thursday, January 16, 2014 3:32 PM
To:  <mailto:users at gecode.org> users at gecode.org
Cc:  <mailto:cschulte at kth.se> cschulte at kth.se
Subject: Re: [gecode-users] Possible Bug - Increase IntVars Range and Gecode
Stalls

 

Hi everyone,

 

I tried Gist as Christian mentioned. Gist will not terminate for higher
ranges (attached screenshot shows that I had to stop Gist manually for range
1535).

 

Could you please point me in the right direction about what I have to more
efficient for this problem:

-Like bin-packing problem, we have bunch of rectangles that shouldn't
overlap with each other. 

-Unlike bin-packing, the width and hight of the rectangles can be variable
(e.g. if we have more space in our sheet, we don't mind a rectangle gets
bigger). 

-We have bunch of constraint for the size and location of rectangles.

-In below, 15 rectangles, 4 array of variables (2 arrays for X,Y location
and 2 variables for Width,Height which is for size)     

 

 

Could you please let me know?

 

Thank you,

Navid

<image001.png>

 

On Jan 14, 2014, at 11:42 AM, Christian Schulte < <mailto:cschulte at kth.se>
cschulte at kth.se> wrote:










The bug you refer to has been fixed. But try Gist, there you can see what
happens.

 

Cheers

Christian

 

--

Christian Schulte, Professor of Computer Science, KTH,
<http://www.ict.kth.se/~cschulte/> www.ict.kth.se/~cschulte/

 

From:  <mailto:users-bounces at gecode.org> users-bounces at gecode.org [
<mailto:users-bounces at gecode.org> mailto:users-bounces at gecode.org] On Behalf
Of Navid Mohaghegh
Sent: Tuesday, January 14, 2014 5:39 PM
To:  <mailto:cschulte at kth.se> cschulte at kth.se
Cc:  <mailto:users at gecode.org> users at gecode.org
Subject: Re: [gecode-users] Possible Bug - Increase IntVars Range and Gecode
Stalls

 

Hi Christian,

 

Thank your for your reply. I didn't try Gist yet, I will go and look at
sample code to learn Gist and I will give it a shot.

 

Could you kindly have a look at this comment in mailing list: "There seems
to be a trivial bug in INT_VALUES_MAX: SEL_VALUES_MIN is used instead of
SEL_VALUES_MAX. The attached patch fixes it."

I am asking this as mu space get solved by Gecode almost instantly (less
than 1ms on a 128 GB ram, quad CPU, 64 cores workstation) for values like
1199. And the moment it goes to 1200 it will stalls. After all it should get
slow (I agree with you), but not stall/freeze for 5 days. That is the main
reason I suspect a tiny bug somewhere.  

 

I will also look at Gist as well as you instructed.

 

Thank you,

Navid

 

 

On Jan 14, 2014, at 11:18 AM, Christian Schulte < <mailto:cschulte at kth.se>
cschulte at kth.se> wrote:











Did you try it in Gist to see how large the search trees get or whether
Gecode just hangs?

 

After all, you exponentially increase the search space!

 

Christian

 

--

Christian Schulte, Professor of Computer Science, KTH,
<http://www.ict.kth.se/~cschulte/> www.ict.kth.se/~cschulte/

 

From:  <mailto:users-bounces at gecode.org> users-bounces at gecode.org [
<mailto:users-bounces at gecode.org> mailto:users-bounces at gecode.org] On Behalf
Of Navid Mohaghegh
Sent: Tuesday, January 14, 2014 5:04 PM
To:  <mailto:users at gecode.org> users at gecode.org
Subject: [gecode-users] Possible Bug - Increase IntVars Range and Gecode
Stalls
Importance: High

 

Hi Everyone,

 

My question:

I am wondering what is happening in below and why Gecode stalls stall whenI
increase the range of my IntegerVars (while its CPU utilization goes very
high) despite the fact that our constraints are not changed?

 

Background ( <http://navid.ca/gecode/test.cpp>
http://navid.ca/gecode/test.cpp):

We are trying to solve a space. We can easily solve the space when our
variable ranges are small (e.g. 0 to 800). As soon as the range goes higher
(e.g. 0-1535) Gecode will stall and can not produce a solution for the space
with exactly the same constraints as before.

 

*	We have 4 groups of integer_array variables. They are called vars_a,
vars_b, vars_c and vars_d. And inside each of them, we have 15 integer
variables.

*	NavidTest(int n, int vars_a_max_, int vars_b_max_, int vars_c_max_,
int vars_d_max_, int vcost_max_); 
*	NavidTest* m = new NavidTest(15,  800, 500, 410, 60, 2000000000);
means:

*	n = 15
*	vars_a[0] ... vars_a[15] can have values from zero to vars_a_max_ =
800
*	vars_b[0] ... vars_b[15] can have values from zero to vars_b_max_ =
500
*	vars_c[0] ... vars_c[15] can have values from zero to vars_c_max_ =
410
*	vars_d[0] ... vars_d[15] can have values from zero to vars_d_max_ =
60
*	our cost variable can be have values from zero to vcost_max_ =
2,000,000,000

*	As we have quadratic cost functions and values can easily grow.

*	lift() method is where we add our constraints. 
*	For demonstration purpose, we have a method that once used, Gecode
can produce solution: it is called "void the_one_works()"

*	And we have another one (called: void the_one_doesnot_work) that can
not be solved using Gecode (it is perfectly solvable and we test our
solution in verify_answer() method)
*	The only difference between the_one_works() and
the_one_doesnot_work() is an increase in vars_a max range from 800 to 1535. 

 

 

 

I have found a mailing list entry stating a possible bug:

==========

From:
<http://gmane.org/get-address.php?address=victor.zverovich%2dRe5JQEeQqe8Avxt
iuMwx3w%40public.gmane.org> victor.zverovich at ... <
<http://gmane.org/get-address.php?address=victor.zverovich%2dRe5JQEeQqe8Avxt
iuMwx3w%40public.gmane.org> victor.zverovich at ...>
Subject:
<http://news.gmane.org/find-root.php?message_id=CANawtxb3jmzB754b7zWaZMuG76T
7KJBwAj1PP%2bMmHgJL%3d0EKVQ%40mail.gmail.com> bug in INT_VALUES_MAX
Newsgroups:  <http://news.gmane.org/gmane.comp.lib.gecode.user>
gmane.comp.lib.gecode.user
Date: 2013-06-21 22:20:18 GMT (29 weeks, 3 days, 17 hours and 17 minutes
ago)

There seems to be a trivial bug in INT_VALUES_MAX: SEL_VALUES_MIN is used
instead of SEL_VALUES_MAX. The attached patch fixes it.

Victor

==========

 

Can someone have a look and let me know?

*	We are using Gecode 4.2.1 on Linux
*	GCC 4.7.2 and also latest 4.9
*	Debian 64bit and CentOS 64bit  
*	My code and how I compile and run is here:
<http://navid.ca/gecode/test.cpp> http://navid.ca/gecode/test.cpp

 

Thank you,

Navid

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.gecode.org/pipermail/users/attachments/20140320/51653ea4/attachment-0001.html>

From l.digaspero at uniud.it  Thu Mar 20 15:00:38 2014
From: l.digaspero at uniud.it (Luca Di Gaspero)
Date: Thu, 20 Mar 2014 15:00:38 +0100
Subject: [gecode-users] Possible Bug - Increase IntVars
	Range	and	Gecode	Stalls
In-Reply-To: <1079F27F-1885-44DC-A930-28BC48065C16@navid.ca>
References: <7D873EF2-12CD-46C2-AF3B-5E3110085815@navid.ca>	<001401cf1144$50964f30$f1c2ed90$@se>	<78523901-E0EC-403C-A230-CEA44F993D47@navid.ca>	<002801cf1147$8ca35ba0$a5ea12e0$@se>	<D8A1F5E2-5885-4A49-851F-B32A3AFA9631@navid.ca>	<007f01cf12d0$4e008c30$ea01a490$@se>
	<176CC873-A601-4BA6-8758-B68D855F9CE8@navid.ca>
	<009501cf161e$60647520$212d5f60$@kth.se>
	<8D2131C0-64D5-4F62-9797-BA0DC4C68449@navid.ca>
	<00a101cf2bf0$9ec6ae40$dc540ac0$@se>
	<461A2D03-AB67-427D-8896-FDDAB1DADF4C@navid.ca>
	<00b801cf2bf1$ac982ac0$05c88040$@se>
	<1079F27F-1885-44DC-A930-28BC48065C16@navid.ca>
Message-ID: <C9D4ECAE-6EA4-4C4C-9C68-509500C11BC5@uniud.it>

Hi all,

I enter the discussion to support Christian point of view.

it is obvious that if there are DECISION VARIABLES that need to be set, regardless of the fixing of the cost function, the CP system MUST SEARCH an assignment to all these variables that satisfy ALL CONSTRAINTS. It is useless to have a COST FUNCTION VALUE without a proper assignment!

If you need a different behavior you can implement yourself a brancher in order to stop the search as soon as the cost has fixed, which is pretty straightforward to be done in Gecode.

All the best,

Luca

Il giorno 19/mar/2014, alle ore 20:45, Navid Mohaghegh <navid at navid.ca> ha scritto:

> Hi Christian,
> 
> I am still struggling. I am not doing anything much different from perfect square example and Gist shows still searching.
> 
> I post bunch fully solvable constraints. I even try to hint gecode about the answer via COST variable (e.g. imagine that x0 should be solved to 100 and I post cost == (x0 - 100) * (x0-100) ...). However on large values, gist shows still searching while the answers are just given in the cost function!!
> 
> Could you kindly shed some light that why gecode is still searching while the answers are just given to it via cost (only for large values this happens).
> 
> Thank you,
> Navid
> 
> 
> On Feb 17, 2014, at 10:05 AM, Christian Schulte <cschulte at kth.se> wrote:
> 
>> Note that they are doing two different things: nooverlap guarantees that the rectangles do not overlap. What you have copied beloew enforces as a redundant constraint that the square is perfect, that is all the rectangles cover the outer rectangle.
>>  
>> Best
>> Christian
>>  
>> --
>> Christian Schulte, Professor of Computer Science, KTH, www.ict.kth.se/~cschulte/
>>  
>> From: Navid Mohaghegh [mailto:navid at navid.ca] 
>> Sent: Monday, February 17, 2014 4:03 PM
>> To: cschulte at kth.se
>> Cc: users at gecode.org
>> Subject: Re: [gecode-users] Possible Bug - Increase IntVars Range and Gecode Stalls
>>  
>> Hi Christian,
>>  
>> Thank you for your reply.
>>  
>> Yes, I did look at the Gecode example. Here is where I am referring in gecode perfect squares example:
>>  switch (opt.propagation()) {
>>     case PROP_REIFIED:
>>       {
>>         for (int cx=0; cx<w; cx++) {
>>           BoolVarArgs bx(*this,n,0,1);
>>           for (int i=0; i<n; i++)
>>             dom(*this, x[i], cx-s[i]+1, cx, bx[i]);
>>           linear(*this, sa, bx, IRT_EQ, w);
>>         }
>>         for (int cy=0; cy<w; cy++) {
>>           BoolVarArgs by(*this,n,0,1);
>>           for (int i=0; i<n; i++)
>>             dom(*this, y[i], cy-s[i]+1, cy, by[i]);
>>           linear(*this, sa, by, IRT_EQ, w);
>>         }
>>       }
>>       break;
>>  
>>  
>> Please note that I am using nooverlap as well. And the only thing I don't have is "switch (opt.propagation())" ...
>>  
>> Thank you,
>> Navid
>>  
>>  
>> On Feb 17, 2014, at 9:57 AM, Christian Schulte <cschulte at kth.se> wrote:
>> 
>> 
>> Hi,
>>  
>> The Gecode example does not use a special propagator, have you been looking at the example that is _included_ in Gecode?
>>  
>> Best
>> Christian
>>  
>> --
>> Christian Schulte, Professor of Computer Science, KTH, www.ict.kth.se/~cschulte/
>>  
>> From: Navid Mohaghegh [mailto:navid at navid.ca] 
>> Sent: Friday, February 14, 2014 3:25 PM
>> To: cschulte at kth.se
>> Cc: users at gecode.org
>> Subject: Re: [gecode-users] Possible Bug - Increase IntVars Range and Gecode Stalls
>>  
>> Hi Christian,
>>  
>> Thank you for your reply.
>>  
>> I didn't use the word Stall properly. Sorry ... What I mean is that Gecode will get keep searching forever! I am wondering if there is anything can be improved in search strategy. Please note that for values less than 1200 we get instant solution and as soon as we increase the range by 1, then suddenly Gecode will keep searching forever (I left the computer on for 5 days!). 
>>  
>> I studied the example for perfect square. The only difference between my code and perfect square code is that I am not using custom made propagator. Should I start doing that? And could you kindly point me for more reading on propagator topic (I am still reading MPG chapter 22)?
>>  
>> Thank you,
>> Navid
>>  
>>  
>> On Jan 20, 2014, at 3:29 PM, Christian Schulte <cschulte at kth.se> wrote:
>> 
>> 
>> 
>> What does stall mean, again? Is it still searching (you can observe that in Gist), that is making progress? Or is it dead.
>>  
>> To improve your model, check the perfect square example that comes with Gecode and/or search for square packing on Helmut Simonis? webpage: http://4c.ucc.ie/~hsimonis/
>>  
>> Christian
>>  
>>  
>> --
>> Christian Schulte, www.ict.kth.se/~cschulte
>>  
>> From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf Of Navid Mohaghegh
>> Sent: Thursday, January 16, 2014 09:23 PM
>> To: cschulte at kth.se; users at gecode.org
>> Subject: Re: [gecode-users] Possible Bug - Increase IntVars Range and Gecode Stalls
>>  
>> Hi Christian,
>>  
>> Thank you for your reply. 
>>  
>> I originally didn't use that as I didn't want to add another set of variables for finishing corner of rectangles (Gecode nooverlap API has a simple version that use fixed int width and int height).
>>  
>> Per your suggestion, I added two array variables for finishing corner that I can employ the nooverlap API:
>> -defined integer array variables for starting point of rectangles (e.g. top left corner): I called it vxs and vys (e.g. X0 and Y0 in Gecode MPG manual)
>> -defined integer array variables for width and height of rectangles: I called it vw and vh (e.g. W and H in Gecode MPG manual)
>> -defined integer array variables for finishing point of rectangles (e.g. lower right corner): I called it vxf and vyf (e.g. X1 and Y1 in Gecode MPG manual)
>> -I removed all manual non-overllaping contraint that I manually added myself and add the following:
>>  
>>             //starting point  width and hight will give us the finishing point
>>             for (i =0 ; i < this->n_vars; i++)
>>             {
>>                         rel(*this, ( (vxs[i] + vw[i] == vxf[i]) && (vys[i] + vh[i] == vyf[i]) )  );
>>             }
>>             //add nooverlap for all rectangles     
>>             nooverlap(*this, vxs,vw,vxf,   vys,vh,vyf);
>>  
>>  
>> My code gets solved for lower ranges of X vars (e.g. vxs < 1000 and vxf<1200) and the moment I change the x range to values greater than 1500 gecode stalls.
>>  
>> I appreciate your feedback.
>>  
>> Thank you,
>> Navid
>>  
>>  
>> On Jan 16, 2014, at 10:33 AM, Christian Schulte <cschulte at kth.se> wrote:
>> 
>> 
>> 
>> 
>> Hi,
>>  
>> Just very quick: did you look at the nooverlap constraint in Gecode?
>>  
>> Cheers
>> Christian
>>  
>> --
>> Christian Schulte, Professor of Computer Science, KTH, www.ict.kth.se/~cschulte/
>>  
>> From: Navid Mohaghegh [mailto:navid at navid.ca] 
>> Sent: Thursday, January 16, 2014 3:32 PM
>> To: users at gecode.org
>> Cc: cschulte at kth.se
>> Subject: Re: [gecode-users] Possible Bug - Increase IntVars Range and Gecode Stalls
>>  
>> Hi everyone,
>>  
>> I tried Gist as Christian mentioned. Gist will not terminate for higher ranges (attached screenshot shows that I had to stop Gist manually for range 1535).
>>  
>> Could you please point me in the right direction about what I have to more efficient for this problem:
>> -Like bin-packing problem, we have bunch of rectangles that shouldn't overlap with each other. 
>> -Unlike bin-packing, the width and hight of the rectangles can be variable (e.g. if we have more space in our sheet, we don't mind a rectangle gets bigger). 
>> -We have bunch of constraint for the size and location of rectangles.
>> -In below, 15 rectangles, 4 array of variables (2 arrays for X,Y location and 2 variables for Width,Height which is for size)     
>>  
>>  
>> Could you please let me know?
>>  
>> Thank you,
>> Navid
>> <image001.png>
>>  
>> On Jan 14, 2014, at 11:42 AM, Christian Schulte <cschulte at kth.se> wrote:
>> 
>> 
>> 
>> 
>> 
>> The bug you refer to has been fixed. But try Gist, there you can see what happens.
>>  
>> Cheers
>> Christian
>>  
>> --
>> Christian Schulte, Professor of Computer Science, KTH, www.ict.kth.se/~cschulte/
>>  
>> From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf Of Navid Mohaghegh
>> Sent: Tuesday, January 14, 2014 5:39 PM
>> To: cschulte at kth.se
>> Cc: users at gecode.org
>> Subject: Re: [gecode-users] Possible Bug - Increase IntVars Range and Gecode Stalls
>>  
>> Hi Christian,
>>  
>> Thank your for your reply. I didn't try Gist yet, I will go and look at sample code to learn Gist and I will give it a shot.
>>  
>> Could you kindly have a look at this comment in mailing list: "There seems to be a trivial bug in INT_VALUES_MAX: SEL_VALUES_MIN is used instead of SEL_VALUES_MAX. The attached patch fixes it."
>> I am asking this as mu space get solved by Gecode almost instantly (less than 1ms on a 128 GB ram, quad CPU, 64 cores workstation) for values like 1199. And the moment it goes to 1200 it will stalls. After all it should get slow (I agree with you), but not stall/freeze for 5 days. That is the main reason I suspect a tiny bug somewhere.  
>>  
>> I will also look at Gist as well as you instructed.
>>  
>> Thank you,
>> Navid
>>  
>>  
>> On Jan 14, 2014, at 11:18 AM, Christian Schulte <cschulte at kth.se> wrote:
>> 
>> 
>> 
>> 
>> 
>> 
>> Did you try it in Gist to see how large the search trees get or whether Gecode just hangs?
>>  
>> After all, you exponentially increase the search space!
>>  
>> Christian
>>  
>> --
>> Christian Schulte, Professor of Computer Science, KTH, www.ict.kth.se/~cschulte/
>>  
>> From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf Of Navid Mohaghegh
>> Sent: Tuesday, January 14, 2014 5:04 PM
>> To: users at gecode.org
>> Subject: [gecode-users] Possible Bug - Increase IntVars Range and Gecode Stalls
>> Importance: High
>>  
>> Hi Everyone,
>>  
>> My question:
>> I am wondering what is happening in below and why Gecode stalls stall whenI increase the range of my IntegerVars (while its CPU utilization goes very high) despite the fact that our constraints are not changed?
>>  
>> Background (http://navid.ca/gecode/test.cpp):
>> We are trying to solve a space. We can easily solve the space when our variable ranges are small (e.g. 0 to 800). As soon as the range goes higher (e.g. 0-1535) Gecode will stall and can not produce a solution for the space with exactly the same constraints as before.
>>  
>> We have 4 groups of integer_array variables. They are called vars_a, vars_b, vars_c and vars_d. And inside each of them, we have 15 integer variables.
>> NavidTest(int n, int vars_a_max_, int vars_b_max_, int vars_c_max_, int vars_d_max_, int vcost_max_); 
>> NavidTest* m = new NavidTest(15,  800, 500, 410, 60, 2000000000); means:
>> n = 15
>> vars_a[0] ... vars_a[15] can have values from zero to vars_a_max_ = 800
>> vars_b[0] ... vars_b[15] can have values from zero to vars_b_max_ = 500
>> vars_c[0] ... vars_c[15] can have values from zero to vars_c_max_ = 410
>> vars_d[0] ... vars_d[15] can have values from zero to vars_d_max_ = 60
>> our cost variable can be have values from zero to vcost_max_ = 2,000,000,000
>> As we have quadratic cost functions and values can easily grow.
>> lift() method is where we add our constraints. 
>> For demonstration purpose, we have a method that once used, Gecode can produce solution: it is called "void the_one_works()"
>> And we have another one (called: void the_one_doesnot_work) that can not be solved using Gecode (it is perfectly solvable and we test our solution in verify_answer() method)
>> The only difference between the_one_works() and the_one_doesnot_work() is an increase in vars_a max range from 800 to 1535. 
>>  
>>  
>>  
>> I have found a mailing list entry stating a possible bug:
>> ==========
>> From: victor.zverovich at ... <victor.zverovich at ...>
>> Subject: bug in INT_VALUES_MAX
>> Newsgroups: gmane.comp.lib.gecode.user
>> Date: 2013-06-21 22:20:18 GMT (29 weeks, 3 days, 17 hours and 17 minutes ago)
>> There seems to be a trivial bug in INT_VALUES_MAX: SEL_VALUES_MIN is used instead of SEL_VALUES_MAX. The attached patch fixes it.
>> Victor
>> ==========
>>  
>> Can someone have a look and let me know?
>> We are using Gecode 4.2.1 on Linux
>> GCC 4.7.2 and also latest 4.9
>> Debian 64bit and CentOS 64bit  
>> My code and how I compile and run is here: http://navid.ca/gecode/test.cpp
>>  
>> Thank you,
>> Navid
> 
> _______________________________________________
> Gecode users mailing list
> users at gecode.org
> https://www.gecode.org/mailman/listinfo/gecode-users

-- 
Luca Di Gaspero, PhD http://www.diegm.uniud.it/digaspero/
DIEGM, Universita' di Udine 	email: l.digaspero at uniud.it
via delle Scienze, 208 		tel: +39-0432-558242
33100 Udine, ITALY 			fax: +39-0432-558251
-
PGP Key ID 99EDD0CD registered at http://pgpkeys.mit.edu

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.gecode.org/pipermail/users/attachments/20140320/78540d6f/attachment-0001.html>

From David.Rijsman at quintiq.com  Wed Mar 26 14:41:32 2014
From: David.Rijsman at quintiq.com (David Rijsman)
Date: Wed, 26 Mar 2014 14:41:32 +0100
Subject: [gecode-users] Boost and ABI
Message-ID: <5332E71C0200008500032928@mail.quintiq.nl>

Dear All,

I am upgrading to Gecode version 4.2.1 (from verion 3.7.2) compiling on Visual 2010 and get an error that the compiler can not include:

gecode-4.2.1\include\gecode\third-party\boost\config\abi\msvc_prefix.hpp

I can get rid of the error by defining the preprocessor definition BOOST_DISABLE_ABI_HEADERS which is only safe if Gecode does not expose any of the boost data types (I am linking Gecode into a project that already is linked/using boost). 

Does Gecode indeed want me to define BOOST_DISABLE_ABI_HEADERS or am I missing something (other than the header file)?

thanks,




David J. Rijsman
R&D Optimization Lead
Quintiq
T +31 73 691 0739
M +31 6 2127 6829
Skype: quintiq.david
www.quintiq.com




From cschulte at kth.se  Wed Mar 26 15:13:03 2014
From: cschulte at kth.se (Christian Schulte)
Date: Wed, 26 Mar 2014 15:13:03 +0100
Subject: [gecode-users] Boost and ABI
In-Reply-To: <5332E71C0200008500032928@mail.quintiq.nl>
References: <5332E71C0200008500032928@mail.quintiq.nl>
Message-ID: <008901cf48fd$814237c0$83c6a740$@se>

Hi David,

That's a strange error indeed, never seen it myself when compiling with MSVC
2010. This appears to come when combining the Gecode Float module and also
including boost once again.

Gecode does expose some boost data types (the floating point intervals used
in the Float model are based on the boost interval type).

Now, I have three answers for you ;-)
 1. as I hand-extracted (the boost scripts actually did not work for me) the
relevant parts from boost some files could have been skipped...
 2. if I understand the macro correctly it should work to define
BOOST_DISABLE_ABI_HEADERS provided you build Gecode yourself. 
 3. you can disable the Float module by passing -disable-float-vars to
configure, then Gecode does not use boost.

Could you do me a favor and try 1.? I have attached a patch that adds the
ABI files. If it works I'll commit them to the trunk.

Thanks and cheers
Christian
 
--
Christian Schulte, Professor of Computer Science, KTH,
www.ict.kth.se/~cschulte/


-----Original Message-----
From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf
Of David Rijsman
Sent: Wednesday, March 26, 2014 2:42 PM
To: users at gecode.org
Subject: [gecode-users] Boost and ABI

Dear All,

I am upgrading to Gecode version 4.2.1 (from verion 3.7.2) compiling on
Visual 2010 and get an error that the compiler can not include:

gecode-4.2.1\include\gecode\third-party\boost\config\abi\msvc_prefix.hpp

I can get rid of the error by defining the preprocessor definition
BOOST_DISABLE_ABI_HEADERS which is only safe if Gecode does not expose any
of the boost data types (I am linking Gecode into a project that already is
linked/using boost). 

Does Gecode indeed want me to define BOOST_DISABLE_ABI_HEADERS or am I
missing something (other than the header file)?

thanks,




David J. Rijsman
R&D Optimization Lead
Quintiq
T +31 73 691 0739
M +31 6 2127 6829
Skype: quintiq.david
www.quintiq.com



_______________________________________________
Gecode users mailing list
users at gecode.org
https://www.gecode.org/mailman/listinfo/gecode-users
-------------- next part --------------
A non-text attachment was scrubbed...
Name: abi.patch
Type: application/octet-stream
Size: 5644 bytes
Desc: not available
URL: <http://www.gecode.org/pipermail/users/attachments/20140326/88385fac/attachment.obj>

From David.Rijsman at quintiq.com  Wed Mar 26 15:16:34 2014
From: David.Rijsman at quintiq.com (David Rijsman)
Date: Wed, 26 Mar 2014 15:16:34 +0100
Subject: [gecode-users] Boost and ABI
In-Reply-To: <008901cf48fd$814237c0$83c6a740$@se>
References: <5332E71C0200008500032928@mail.quintiq.nl>
	<008901cf48fd$814237c0$83c6a740$@se>
Message-ID: <5332EF52020000850003292C@mail.quintiq.nl>

Hi Christian,

thanks, yes I will try 1 (and 3) and see if it works and let you know,







David J. Rijsman
R&D Optimization Lead
Quintiq
T +31 73 691 0739
M +31 6 2127 6829
Skype: quintiq.david
www.quintiq.com


>>> 
From: 	"Christian Schulte" <cschulte at kth.se>
To:	"'David Rijsman'" <David.Rijsman at quintiq.com>, <users at gecode.org>
Date: 	26-3-2014 15:13
Subject: 	RE: [gecode-users] Boost and ABI

Hi David,

That's a strange error indeed, never seen it myself when compiling with MSVC
2010. This appears to come when combining the Gecode Float module and also
including boost once again.

Gecode does expose some boost data types (the floating point intervals used
in the Float model are based on the boost interval type).

Now, I have three answers for you ;-)
 1. as I hand-extracted (the boost scripts actually did not work for me) the
relevant parts from boost some files could have been skipped...
 2. if I understand the macro correctly it should work to define
BOOST_DISABLE_ABI_HEADERS provided you build Gecode yourself. 
 3. you can disable the Float module by passing -disable-float-vars to
configure, then Gecode does not use boost.

Could you do me a favor and try 1.? I have attached a patch that adds the
ABI files. If it works I'll commit them to the trunk.

Thanks and cheers
Christian
 
--
Christian Schulte, Professor of Computer Science, KTH,
www.ict.kth.se/~cschulte/ 


-----Original Message-----
From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf
Of David Rijsman
Sent: Wednesday, March 26, 2014 2:42 PM
To: users at gecode.org 
Subject: [gecode-users] Boost and ABI

Dear All,

I am upgrading to Gecode version 4.2.1 (from verion 3.7.2) compiling on
Visual 2010 and get an error that the compiler can not include:

gecode-4.2.1\include\gecode\third-party\boost\config\abi\msvc_prefix.hpp

I can get rid of the error by defining the preprocessor definition
BOOST_DISABLE_ABI_HEADERS which is only safe if Gecode does not expose any
of the boost data types (I am linking Gecode into a project that already is
linked/using boost). 

Does Gecode indeed want me to define BOOST_DISABLE_ABI_HEADERS or am I
missing something (other than the header file)?

thanks,




David J. Rijsman
R&D Optimization Lead
Quintiq
T +31 73 691 0739
M +31 6 2127 6829
Skype: quintiq.david
www.quintiq.com 



_______________________________________________
Gecode users mailing list
users at gecode.org 
https://www.gecode.org/mailman/listinfo/gecode-users



From kellen at cretin.net  Sun Mar 30 19:19:20 2014
From: kellen at cretin.net (kellen at cretin.net)
Date: Sun, 30 Mar 2014 18:19:20 +0100
Subject: [gecode-users] commit on already-assigned variable
Message-ID: <20140330171920.GA29584@cretin.net>

Hej!

I'm working on implementing bit-vector variables in gecode, following the
example given in MPG.

A part of this is providing relevant View selection for the brancher. I have
done so with a NONE implementation which also follows the model given in MPG,
which returns parameterized a ViewSelNone:

    return new (home) ViewSelNone<BitView>(home, bvb);

Where BitView is the type of views on the variable implementations (typedef'd
as unsigned int), and bvb is a "BitVarBranch". So far, so good.

Later, I have defined a ValCommit class, including a commit function:

    ModEvent commit(Space& home, unsigned int a, BitView x, int i, BitType n);

Since I am branching based on the values of certain bits of the BitView x,
there are only two alternatives (a == 0, a != 0). The parameter n provides a
mask with only a single set bit which determines the bit on which branching
occurs. 

My issues is that the search engine appears to be calling commit() on
already-assigned variables which violates a check I have implemented there to
validate the input as well as violates my expectation of how the engine should
function with a NONE-typed variable/view selection.

Specifically, I have an array of 64 4-bit bitvector variables and at some
point during search, commit() is called on variable 56, which is already
assigned. I have verified in GDB that the variable is, in fact, assigned. I
can see in GDB that this variable is branched on a number of times before
failure. The relevant backtrace when failure occurs:

#0  BV::Bit::ValCommitBitSplit::commit (this=0x9972500, home=..., a=0, x=..., i=56, n=1) at src/bitvec/branch.cpp:144
#1  0x08068331 in Gecode::ValSelCommit<BV::Bit::ValSelRndBit, BV::Bit::ValCommitBitSplit>::commit (this=0x99724f8, home=..., a=0,
    x=..., i=56, n=1) at gecode/gecode/kernel/brancher-val-sel-commit.hpp:175
#2  0x080774b8 in Gecode::ViewValBrancher<BV::Bit::BitView, 1, unsigned int, 2u>::commit (this=0x9972610, home=..., c=..., b=0)
    at gecode/gecode/kernel/brancher-view-val.hpp:286
#3  0x4003911c in Gecode::Space::_commit (this=0x80b13a0, c=..., a=0) at gecode/kernel/core.cpp:417
#4  0x40046dad in commit (a=<optimized out>, c=..., this=0x80b13a0) at ./gecode/kernel/core.hpp:2786
#5  commit (i=137, s=0x80b13a0, this=0x80cfb88) at ./gecode/search/sequential/path.hh:259
#6  recompute (stat=..., a_d=<optimized out>, d=@0x80cfba8: 3, this=0x80cfb88) at ./gecode/search/sequential/path.hh:325
#7  next (this=0x80cfb44) at ./gecode/search/sequential/dfs.hh:148
#8  Gecode::Search::WorkerToEngine<Gecode::Search::Sequential::DFS>::next (this=0x80cfb40) at ./gecode/search/support.hh:84
#9  0x0804dcda in next (this=<optimized out>) at gecode/gecode/search/dfs.hpp:53
#10 main (argc=4, argv=0xbffff2f4) at src/main.cpp:75

I'm not quite sure how to proceed since the search process is rather difficult
to step through in the debugger and since I'm using the built-in ViewSelNone.

Any suggestions? I can provide code for any relevant methods, but it's not
clear to me which would be actually useful for you guys to see.

System info:
OS: debian linux, kernel 2.6.32.33-kvm-i386-20111128-dirty, 
    running in a VM (KVM or UML, I'm not quite sure)
Gecode version: 4.2.1, built from source
g++ (Debian 4.7.2-5) 4.7.2

Cheers,
Kellen


From cschulte at kth.se  Mon Mar 31 12:20:57 2014
From: cschulte at kth.se (Christian Schulte)
Date: Mon, 31 Mar 2014 12:20:57 +0200
Subject: [gecode-users] commit on already-assigned variable
In-Reply-To: <20140330171920.GA29584@cretin.net>
References: <20140330171920.GA29584@cretin.net>
Message-ID: <006401cf4cca$e8a361c0$b9ea2540$@se>

Hi,

This is most likely okay and can happen due to recomputation during search:
it might be the case that the variable has already been assigned by
propagation during recomputation before the commit operation is executed.

If you want to test whether this behavior is due to recomputation you can in
fact disable recomputation by passing 1 as a vlue for the commit
recomputation distance (-c-d 1 on the command line).

Cheers
Christian

--
Christian Schulte, Professor of Computer Science, KTH,
www.ict.kth.se/~cschulte/


-----Original Message-----
From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf
Of kellen at cretin.net
Sent: Sunday, March 30, 2014 7:19 PM
To: users at gecode.org
Subject: [gecode-users] commit on already-assigned variable

Hej!

I'm working on implementing bit-vector variables in gecode, following the
example given in MPG.

A part of this is providing relevant View selection for the brancher. I have
done so with a NONE implementation which also follows the model given in
MPG, which returns parameterized a ViewSelNone:

    return new (home) ViewSelNone<BitView>(home, bvb);

Where BitView is the type of views on the variable implementations
(typedef'd as unsigned int), and bvb is a "BitVarBranch". So far, so good.

Later, I have defined a ValCommit class, including a commit function:

    ModEvent commit(Space& home, unsigned int a, BitView x, int i, BitType
n);

Since I am branching based on the values of certain bits of the BitView x,
there are only two alternatives (a == 0, a != 0). The parameter n provides a
mask with only a single set bit which determines the bit on which branching
occurs. 

My issues is that the search engine appears to be calling commit() on
already-assigned variables which violates a check I have implemented there
to validate the input as well as violates my expectation of how the engine
should function with a NONE-typed variable/view selection.

Specifically, I have an array of 64 4-bit bitvector variables and at some
point during search, commit() is called on variable 56, which is already
assigned. I have verified in GDB that the variable is, in fact, assigned. I
can see in GDB that this variable is branched on a number of times before
failure. The relevant backtrace when failure occurs:

#0  BV::Bit::ValCommitBitSplit::commit (this=0x9972500, home=..., a=0,
x=..., i=56, n=1) at src/bitvec/branch.cpp:144
#1  0x08068331 in Gecode::ValSelCommit<BV::Bit::ValSelRndBit,
BV::Bit::ValCommitBitSplit>::commit (this=0x99724f8, home=..., a=0,
    x=..., i=56, n=1) at
gecode/gecode/kernel/brancher-val-sel-commit.hpp:175
#2  0x080774b8 in Gecode::ViewValBrancher<BV::Bit::BitView, 1, unsigned int,
2u>::commit (this=0x9972610, home=..., c=..., b=0)
    at gecode/gecode/kernel/brancher-view-val.hpp:286
#3  0x4003911c in Gecode::Space::_commit (this=0x80b13a0, c=..., a=0) at
gecode/kernel/core.cpp:417
#4  0x40046dad in commit (a=<optimized out>, c=..., this=0x80b13a0) at
./gecode/kernel/core.hpp:2786
#5  commit (i=137, s=0x80b13a0, this=0x80cfb88) at
./gecode/search/sequential/path.hh:259
#6  recompute (stat=..., a_d=<optimized out>, d=@0x80cfba8: 3,
this=0x80cfb88) at ./gecode/search/sequential/path.hh:325
#7  next (this=0x80cfb44) at ./gecode/search/sequential/dfs.hh:148
#8  Gecode::Search::WorkerToEngine<Gecode::Search::Sequential::DFS>::next
(this=0x80cfb40) at ./gecode/search/support.hh:84
#9  0x0804dcda in next (this=<optimized out>) at
gecode/gecode/search/dfs.hpp:53
#10 main (argc=4, argv=0xbffff2f4) at src/main.cpp:75

I'm not quite sure how to proceed since the search process is rather
difficult to step through in the debugger and since I'm using the built-in
ViewSelNone.

Any suggestions? I can provide code for any relevant methods, but it's not
clear to me which would be actually useful for you guys to see.

System info:
OS: debian linux, kernel 2.6.32.33-kvm-i386-20111128-dirty, 
    running in a VM (KVM or UML, I'm not quite sure) Gecode version: 4.2.1,
built from source
g++ (Debian 4.7.2-5) 4.7.2

Cheers,
Kellen

_______________________________________________
Gecode users mailing list
users at gecode.org
https://www.gecode.org/mailman/listinfo/gecode-users



From kellen at cretin.net  Mon Mar 31 12:59:41 2014
From: kellen at cretin.net (kellen at cretin.net)
Date: Mon, 31 Mar 2014 11:59:41 +0100
Subject: [gecode-users] commit on already-assigned variable
In-Reply-To: <006401cf4cca$e8a361c0$b9ea2540$@se>
References: <20140330171920.GA29584@cretin.net>
	<006401cf4cca$e8a361c0$b9ea2540$@se>
Message-ID: <20140331105941.GC29584@cretin.net>

> This is most likely okay and can happen due to recomputation during search:                                                                                                                                                                                                                                                                                              
> it might be the case that the variable has already been assigned by                                                                                                                                                                                                                                                                                                      
> propagation during recomputation before the commit operation is executed.                                                                                                                                                                                                                                                                                                
                                                                                                                                                                                                                                                                                                                                                                           
Is the correct behavior in this case to fail if commit() attempts to commit                                                                                                                                                                                                                                                                                                
a value which is already outside the possible range?                                                                                                                                                                                                                                                                                                                       
                                                                                                                                                                                                                                                                                                                                                                           
It seems like with IntVars this would be the case. e.g.                                                                                                                                                                                                                                                                                                                    
variable x assigned to 13, i.e. the range [13,13]                                                                                                                                                                                                                                                                                                                          
commit with n = 10                                                                                                                                                                                                                                                                                                                                                         
choice 0: x <= 10 --> empty domain, FAILED                                                                                                                                                                                                                                                                                                                                 
choice 1: x > 10  --> no change                                                                                                                                                                                                                                                                                                                                            
                                                                                                                                                                                                                                                                                                                                                                           
My case is similar:                                                                                                                                                                                                                                                                                                                                                        
variable x assigned to 1010, i.e. the domain [1010,1010]                                                                                                                                                                                                                                                                                                                   
commit with n = 0001 (i.e. choose this bit to branch upon)                                                                                                                                                                                                                                                                                                                 
choice 0: set bit specified by n to 0 --> no change                                                                                                                                                                                                                                                                                                                        
choice 0: set bit specified by n to 1 --> fail?                                                                                                                                                                                                                                                                                                                            
                                                                                                                                                                                                                                                                                                                                                                           
Cheers,                                                                                                                                                                                                                                                                                                                                                                    
Kellen  


From cschulte at kth.se  Mon Mar 31 13:34:37 2014
From: cschulte at kth.se (Christian Schulte)
Date: Mon, 31 Mar 2014 13:34:37 +0200
Subject: [gecode-users] commit on already-assigned variable
In-Reply-To: <20140331105941.GC29584@cretin.net>
References: <20140330171920.GA29584@cretin.net>	<006401cf4cca$e8a361c0$b9ea2540$@se>
	<20140331105941.GC29584@cretin.net>
Message-ID: <00a901cf4cd5$32dcf440$9896dcc0$@se>

Yes, you need to fail as well.

Did you try switching recomputation off?

Cheers
Christian

--
Christian Schulte, Professor of Computer Science, KTH,
www.ict.kth.se/~cschulte/


-----Original Message-----
From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf
Of kellen at cretin.net
Sent: Monday, March 31, 2014 1:00 PM
To: users at gecode.org
Subject: Re: [gecode-users] commit on already-assigned variable

> This is most likely okay and can happen due to recomputation during
search:

> it might be the case that the variable has already been assigned by

> propagation during recomputation before the commit operation is executed.

 

Is the correct behavior in this case to fail if commit() attempts to commit

a value which is already outside the possible range?

 

It seems like with IntVars this would be the case. e.g.

variable x assigned to 13, i.e. the range [13,13]

commit with n = 10

choice 0: x <= 10 --> empty domain, FAILED

choice 1: x > 10  --> no change

 

My case is similar:

variable x assigned to 1010, i.e. the domain [1010,1010]

commit with n = 0001 (i.e. choose this bit to branch upon)

choice 0: set bit specified by n to 0 --> no change

choice 0: set bit specified by n to 1 --> fail?

 

Cheers,

Kellen  

_______________________________________________
Gecode users mailing list
users at gecode.org
https://www.gecode.org/mailman/listinfo/gecode-users



