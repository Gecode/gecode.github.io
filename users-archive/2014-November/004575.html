<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [gecode-users] Best practice to use a shared_ptr in a gecode	solver
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:users%40gecode.org?Subject=Re%3A%20%5Bgecode-users%5D%20Best%20practice%20to%20use%20a%20shared_ptr%20in%20a%20gecode%0A%09solver&In-Reply-To=%3CBE55855D-748A-4165-A0B8-5808351F7B1E%40gecode.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004574.html">
   <LINK REL="Next"  HREF="004578.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[gecode-users] Best practice to use a shared_ptr in a gecode	solver</H1>
    <B>Guido Tack</B> 
    <A HREF="mailto:users%40gecode.org?Subject=Re%3A%20%5Bgecode-users%5D%20Best%20practice%20to%20use%20a%20shared_ptr%20in%20a%20gecode%0A%09solver&In-Reply-To=%3CBE55855D-748A-4165-A0B8-5808351F7B1E%40gecode.org%3E"
       TITLE="[gecode-users] Best practice to use a shared_ptr in a gecode	solver">tack at gecode.org
       </A><BR>
    <I>Tue Nov  4 04:09:19 CET 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="004574.html">[gecode-users] Best practice to use a shared_ptr in a gecode solver
</A></li>
        <LI>Next message: <A HREF="004578.html">[gecode-users] Best practice to use a shared_ptr in a gecode	solver
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4575">[ date ]</a>
              <a href="thread.html#4575">[ thread ]</a>
              <a href="subject.html#4575">[ subject ]</a>
              <a href="author.html#4575">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Gustavo,

did you register the brancher for disposal?  It's described in sect. 19.4 in MPG, have a look at the way home.notice() is called for the brancher in the example.

Cheers,
Guido

&gt;<i> On 4 Nov 2014, at 1:58 pm, Gustavo Gutierrez &lt;<A HREF="http://www.gecode.org/cgi-bin/mailman/listinfo/users">gustavo.ggutierrez at gmail.com</A>&gt; wrote:
</I>&gt;<i> 
</I>&gt;<i> Dear Gecode users,
</I>&gt;<i> 
</I>&gt;<i> This is probably a naive question and very related to C++. However, it is quite related to gecode as well. In my use case I have a shared pointer to an object that contains all the information of a problem instance. As usual, the constructor is where the CSP is defined and that object is passed as an argument to it.
</I>&gt;<i> 
</I>&gt;<i> In addition, I implemented a brancher that also require some of the information pointed by the shared pointer.  Note that this infromation is not actually needed to construct the brancher but when computing a choice. I have tried several ways to make both the brancher and the shared_pointer happy with their respective requirements. However I have found myself in the following situation.
</I>&gt;<i> 
</I>&gt;<i> When I add the shared_pointer as an attribute to the brancher I get the shared pointer reference counter messed up. The reason is that the brancher does not actually have a destructor and hence the shared_pointer counter is never decremented and the owned pointer is never destructed at the end of the solver execution. I tried to explicitly call the destructor of the shared pointer in the dispose method of the brancher. However, it seems that the brancher gets copied more times than the dispose method is called.
</I>&gt;<i> 
</I>&gt;<i> Is there a way to integrate both approaches smoothly?. Probably I am overlooking something.
</I>&gt;<i> 
</I>&gt;<i> Regards,
</I>&gt;<i> Gustavo
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Gecode users mailing list
</I>&gt;<i> <A HREF="http://www.gecode.org/cgi-bin/mailman/listinfo/users">users at gecode.org</A>
</I>&gt;<i> <A HREF="https://www.gecode.org/mailman/listinfo/gecode-users">https://www.gecode.org/mailman/listinfo/gecode-users</A>
</I>

</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004574.html">[gecode-users] Best practice to use a shared_ptr in a gecode solver
</A></li>
	<LI>Next message: <A HREF="004578.html">[gecode-users] Best practice to use a shared_ptr in a gecode	solver
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4575">[ date ]</a>
              <a href="thread.html#4575">[ thread ]</a>
              <a href="subject.html#4575">[ subject ]</a>
              <a href="author.html#4575">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.gecode.org/cgi-bin/mailman/listinfo/users">More information about the users
mailing list</a><br>
</body></html>
