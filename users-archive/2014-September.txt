From victor.zverovich at gmail.com  Tue Sep  2 20:56:31 2014
From: victor.zverovich at gmail.com (victor.zverovich at gmail.com)
Date: Tue, 2 Sep 2014 11:56:31 -0700
Subject: [gecode-users] CMake config improvements
Message-ID: <CANawtxYS40e+5P0EoRAtnUxuNyH_M-CaBt5VToPKhq2PBfqqEQ@mail.gmail.com>

Hello,

Please find attached a patch which implements the following changes to the
CMake build configuration:

* Set the output directory for runtime target files (executables and DLLs)
to bin/ subdirectory of the project's binary directory to avoid collisions
when Gecode is used as a subproject.

* Improve suppression of warnings.

* Add GECODE_USE_QT variable which specifies whether to use Qt. Qt is used
if GECODE_USE_QT is TRUE or unset.

* Prevent linker warnings on MSVC.

* Use per-target instead of global include directories. This simplifies use
of Gecode as a subproject because add_target_libraries(<target>
<gecode-lib>) now sets the necessary include directories for <target> in
addition to link dependencies.

* Fix by Tony Kelman to fully link internal dependencies needed for
creating DLLs: https://github.com/ampl/gecode/pull/2

Best regards,
Victor
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.gecode.org/pipermail/users/attachments/20140902/a3687ebf/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: cmake-update.patch
Type: text/x-patch
Size: 3956 bytes
Desc: not available
URL: <http://www.gecode.org/pipermail/users/attachments/20140902/a3687ebf/attachment.bin>

From tack at gecode.org  Wed Sep  3 02:41:54 2014
From: tack at gecode.org (Guido Tack)
Date: Wed, 3 Sep 2014 10:41:54 +1000
Subject: [gecode-users] Gecode 4.3.0 released
Message-ID: <749303C6-EB7C-4AB5-89E4-50D9D34CADF6@gecode.org>

Dear all,

we are releasing the next version of Gecode:

                       Gecode 4.3.0
              http://www.gecode.org

This release fixes a large number of both minor and major bugs, has some improvements for FlatZinc, and adds multi-dimensional bin-packing.

On our web site, you find source packages, binary packages for Windows and Mac OS, and the full documentation.

Cheers,
Guido



From cschulte at kth.se  Wed Sep  3 10:44:13 2014
From: cschulte at kth.se (Christian Schulte)
Date: Wed, 3 Sep 2014 10:44:13 +0200
Subject: [gecode-users] CMake config improvements
In-Reply-To: <CANawtxYS40e+5P0EoRAtnUxuNyH_M-CaBt5VToPKhq2PBfqqEQ@mail.gmail.com>
References: <CANawtxYS40e+5P0EoRAtnUxuNyH_M-CaBt5VToPKhq2PBfqqEQ@mail.gmail.com>
Message-ID: <010201cfc753$3dfd57e0$b9f807a0$@se>

Hi Victor,

 

Thanks. I will smuggle this into 4.3.0 as I have to rebuild the sourcepackages anyway (there are syntax errors in the changelog). It should be up in two hours or so.

 

Cheers

Christian

 

--

Christian Schulte, Professor of Computer Science, KTH, www.gecode.org/~schulte/

 

From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf Of victor.zverovich at gmail.com
Sent: Tuesday, September 02, 2014 8:57 PM
To: users at gecode.org
Subject: [gecode-users] CMake config improvements

 

Hello,

 

Please find attached a patch which implements the following changes to the CMake build configuration:

 

* Set the output directory for runtime target files (executables and DLLs) to bin/ subdirectory of the project's binary directory to avoid collisions when Gecode is used as a subproject.

 

* Improve suppression of warnings.

 

* Add GECODE_USE_QT variable which specifies whether to use Qt. Qt is used if GECODE_USE_QT is TRUE or unset.

 

* Prevent linker warnings on MSVC.

 

* Use per-target instead of global include directories. This simplifies use of Gecode as a subproject because add_target_libraries(<target> <gecode-lib>) now sets the necessary include directories for <target> in addition to link dependencies.

 

* Fix by Tony Kelman to fully link internal dependencies needed for creating DLLs: https://github.com/ampl/gecode/pull/2

 

Best regards,

Victor

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.gecode.org/pipermail/users/attachments/20140903/f7982ad8/attachment.html>

From victor.zverovich at gmail.com  Wed Sep  3 17:47:55 2014
From: victor.zverovich at gmail.com (victor.zverovich at gmail.com)
Date: Wed, 3 Sep 2014 08:47:55 -0700
Subject: [gecode-users] CMake config improvements
In-Reply-To: <010201cfc753$3dfd57e0$b9f807a0$@se>
References: <CANawtxYS40e+5P0EoRAtnUxuNyH_M-CaBt5VToPKhq2PBfqqEQ@mail.gmail.com>
	<010201cfc753$3dfd57e0$b9f807a0$@se>
Message-ID: <CANawtxY2TTA0QR_fStOMEFt6TBEAj+M-t2iy2Oiq=wt2Wz-Aog@mail.gmail.com>

Thanks, Christian. Good timing =)

Cheers,
Victor


On Wed, Sep 3, 2014 at 1:44 AM, Christian Schulte <cschulte at kth.se> wrote:

> Hi Victor,
>
>
>
> Thanks. I will smuggle this into 4.3.0 as I have to rebuild the
> sourcepackages anyway (there are syntax errors in the changelog). It should
> be up in two hours or so.
>
>
>
> Cheers
>
> Christian
>
>
>
> --
>
> Christian Schulte, Professor of Computer Science, KTH,
> www.gecode.org/~schulte/
>
>
>
> *From:* users-bounces at gecode.org [mailto:users-bounces at gecode.org] *On
> Behalf Of *victor.zverovich at gmail.com
> *Sent:* Tuesday, September 02, 2014 8:57 PM
> *To:* users at gecode.org
> *Subject:* [gecode-users] CMake config improvements
>
>
>
> Hello,
>
>
>
> Please find attached a patch which implements the following changes to the
> CMake build configuration:
>
>
>
> * Set the output directory for runtime target files (executables and DLLs)
> to bin/ subdirectory of the project's binary directory to avoid collisions
> when Gecode is used as a subproject.
>
>
>
> * Improve suppression of warnings.
>
>
>
> * Add GECODE_USE_QT variable which specifies whether to use Qt. Qt is used
> if GECODE_USE_QT is TRUE or unset.
>
>
>
> * Prevent linker warnings on MSVC.
>
>
>
> * Use per-target instead of global include directories. This simplifies
> use of Gecode as a subproject because add_target_libraries(<target>
> <gecode-lib>) now sets the necessary include directories for <target> in
> addition to link dependencies.
>
>
>
> * Fix by Tony Kelman to fully link internal dependencies needed for
> creating DLLs: https://github.com/ampl/gecode/pull/2
>
>
>
> Best regards,
>
> Victor
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.gecode.org/pipermail/users/attachments/20140903/08c8e679/attachment.html>

From max.61 at aim.com  Mon Sep  8 10:05:15 2014
From: max.61 at aim.com (Max Myer)
Date: Mon, 8 Sep 2014 04:05:15 -0400
Subject: [gecode-users] Passing option -time to fzn-gecode
Message-ID: <8D19952C1F6D342-2ED8-295EF@webmail-d264.sysops.aol.com>

I'm trying to run a few minizinc examples by calling 


$ mzn-gecode --all-solutions problem.mzn


I'd like to terminate the solve process after a specified amount of time. I found the argument "-time" in fzn-gecode (--help), but am unsure how to pass it to fzn-gecode.


Adding "-time" to the mzn-gecode call results in the general fzn-gecode help output. Perhaps this is due to this part in fzn-gecode.cpp:


...
int main(int argc, char** argv) {
  Support::Timer t_total;
  t_total.start();
  FlatZinc::FlatZincOptions opt("Gecode/FlatZinc");
  opt.parse(argc, argv);
  
  if (argc!=2) {
    cerr << "Usage: " << argv[0] << " [options] <file>" << endl;
    cerr << "       " << argv[0] << " -help for more information" << endl;
    exit(EXIT_FAILURE); 
  } 
  ...


Anyway, I'd appreciate some help on this.


Cheers,
Max
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.gecode.org/pipermail/users/attachments/20140908/70191205/attachment.html>

From ngh423 at hotmail.com  Tue Sep  9 20:44:51 2014
From: ngh423 at hotmail.com (Nathan Horvath)
Date: Tue, 9 Sep 2014 14:44:51 -0400
Subject: [gecode-users] Creating a function to solve CP sub-problem instances
Message-ID: <BLU172-W500DCA10E20D5767AD19AC9BCE0@phx.gbl>

Hi,I'm trying to implement a tabu search algorithm that involves solving small constraint programming sub-problems. Firstly, I used the examples found in the Modelling and Programming Guide to develop a script to solve an instance of a sub-problem. Now, I'm looking to expand upon this by creating a function that consumes data to solve a sub-problem, solve it using Gecode, and then return an optimal solution to the sub-problem in a some data structure.I'm having problems trying to turn my script into a callable function. Given from what I've seen in the guide, it seems like it is not possible, or it's taken as something trivial and is not glossed over, as I haven't found any similar examples after searching on-line. What I started to do was play around with the print function (same layout as in the SEND MOST MONEY examples in the guide) and try replacing it with a function that interprets the solution, but I've had no luck.One could classify my experience with Gecode and C++ as very beginner (I picked up C++ so I could use Gecode's capabilities), so I apologize if this question comes off as ignorant or out of scope. Any help would be greatly appreciated.Cheers,Nathan 		 	   		  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.gecode.org/pipermail/users/attachments/20140909/bdd50568/attachment.html>

From richard.portell at gmail.com  Thu Sep 11 15:40:23 2014
From: richard.portell at gmail.com (Chd Orti)
Date: Thu, 11 Sep 2014 15:40:23 +0200
Subject: [gecode-users] interval domains at run time
Message-ID: <CAPigQke9P7NctYX1tDWAEnedFT3bHK==5Qg=T4c07wTdDuwYTA@mail.gmail.com>

Dear all,
I have the following problem:
Array of 100 numbers with sum = 500;
At run time, the user can decide in how many intervals he cuts the 100
numbers. Lets say 4 for the example.
For all the parts, he can give a domain for example :
>From 0 to 24 ->  the integers can only take values 0 or 1
>From 25 to 49 ->  the integers can only take values 5, 6 or 1,
etc ...
I can't find a good way to restrict the domain by intervals, I guess I am
missing something here ...
Thanks for your help,
Best regards,
Richard
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.gecode.org/pipermail/users/attachments/20140911/26716016/attachment.html>

From cschulte at kth.se  Mon Sep 15 11:41:24 2014
From: cschulte at kth.se (Christian Schulte)
Date: Mon, 15 Sep 2014 11:41:24 +0200
Subject: [gecode-users] interval domains at run time
In-Reply-To: <CAPigQke9P7NctYX1tDWAEnedFT3bHK==5Qg=T4c07wTdDuwYTA@mail.gmail.com>
References: <CAPigQke9P7NctYX1tDWAEnedFT3bHK==5Qg=T4c07wTdDuwYTA@mail.gmail.com>
Message-ID: <001701cfd0c9$3748de40$a5da9ac0$@se>

Hi,

 

Please look up the dom constraint (Section 4.4.1 in MPG).

 

Cheers

Christian

 

--

Christian Schulte, Professor of Computer Science, KTH, www.gecode.org/~schulte/

 

From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf Of Chd Orti
Sent: Thursday, September 11, 2014 3:40 PM
To: users at gecode.org
Subject: [gecode-users] interval domains at run time

 

Dear all,

I have the following problem:

Array of 100 numbers with sum = 500;

At run time, the user can decide in how many intervals he cuts the 100 numbers. Lets say 4 for the example.

For all the parts, he can give a domain for example :

>From 0 to 24 ->  the integers can only take values 0 or 1

>From 25 to 49 ->  the integers can only take values 5, 6 or 1,

etc ...

I can't find a good way to restrict the domain by intervals, I guess I am missing something here ...

Thanks for your help,

Best regards,

Richard

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.gecode.org/pipermail/users/attachments/20140915/52f15fdb/attachment.html>

From cschulte at kth.se  Mon Sep 15 11:49:07 2014
From: cschulte at kth.se (Christian Schulte)
Date: Mon, 15 Sep 2014 11:49:07 +0200
Subject: [gecode-users] Creating a function to solve CP sub-problem
	instances
In-Reply-To: <BLU172-W500DCA10E20D5767AD19AC9BCE0@phx.gbl>
References: <BLU172-W500DCA10E20D5767AD19AC9BCE0@phx.gbl>
Message-ID: <003101cfd0ca$4afc1780$e0f44680$@se>

Hi,

 

The setup is that a script must be a sub-class of Gecode::Space. However,
you can pass these objects around, so I do not really see where the problem
is, sorry. 

 

Cheers

Christian

 

--

Christian Schulte, Professor of Computer Science, KTH,
www.gecode.org/~schulte/

 

From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf
Of Nathan Horvath
Sent: Tuesday, September 09, 2014 8:45 PM
To: users at gecode.org
Subject: [gecode-users] Creating a function to solve CP sub-problem
instances

 

Hi,

 

I'm trying to implement a tabu search algorithm that involves solving small
constraint programming sub-problems. Firstly, I used the examples found in
the Modelling and Programming Guide to develop a script to solve an instance
of a sub-problem. Now, I'm looking to expand upon this by creating a
function that consumes data to solve a sub-problem, solve it using Gecode,
and then return an optimal solution to the sub-problem in a some data
structure.

 

I'm having problems trying to turn my script into a callable function. Given
from what I've seen in the guide, it seems like it is not possible, or it's
taken as something trivial and is not glossed over, as I haven't found any
similar examples after searching on-line. What I started to do was play
around with the print function (same layout as in the SEND MOST MONEY
examples in the guide) and try replacing it with a function that interprets
the solution, but I've had no luck.

 

One could classify my experience with Gecode and C++ as very beginner (I
picked up C++ so I could use Gecode's capabilities), so I apologize if this
question comes off as ignorant or out of scope. Any help would be greatly
appreciated.

 

Cheers,

Nathan

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.gecode.org/pipermail/users/attachments/20140915/7316cabc/attachment.html>

From cschulte at kth.se  Mon Sep 15 11:51:18 2014
From: cschulte at kth.se (Christian Schulte)
Date: Mon, 15 Sep 2014 11:51:18 +0200
Subject: [gecode-users] Passing option -time to fzn-gecode
In-Reply-To: <8D19952C1F6D342-2ED8-295EF@webmail-d264.sysops.aol.com>
References: <8D19952C1F6D342-2ED8-295EF@webmail-d264.sysops.aol.com>
Message-ID: <004501cfd0ca$995799e0$cc06cda0$@se>

Hi,

 

That should work out of the box, just do something like:

                fzn-gecode -time 1000 <filename>

which then uses a timeout of 1000 milliseconds.

 

Cheers

Christian

--

Christian Schulte, Professor of Computer Science, KTH,
www.gecode.org/~schulte/

 

From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf
Of Max Myer
Sent: Monday, September 08, 2014 10:05 AM
To: users at gecode.org
Subject: [gecode-users] Passing option -time to fzn-gecode

 

I'm trying to run a few minizinc examples by calling  

 

$ mzn-gecode --all-solutions problem.mzn

 

I'd like to terminate the solve process after a specified amount of time. I
found the argument "-time" in fzn-gecode (--help), but am unsure how to pass
it to fzn-gecode.

 

Adding "-time" to the mzn-gecode call results in the general fzn-gecode help
output. Perhaps this is due to this part in fzn-gecode.cpp:

 

...

int main(int argc, char** argv) {

  Support::Timer t_total;

  t_total.start();

  FlatZinc::FlatZincOptions opt("Gecode/FlatZinc");

  opt.parse(argc, argv);

  

  if (argc!=2) {

    cerr << "Usage: " << argv[0] << " [options] <file>" << endl;

    cerr << "       " << argv[0] << " -help for more information" << endl;

    exit(EXIT_FAILURE); 

  } 

  ...

 

Anyway, I'd appreciate some help on this.

 

Cheers,

Max

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.gecode.org/pipermail/users/attachments/20140915/d02432b7/attachment-0001.html>

From tack at gecode.org  Mon Sep 15 12:47:41 2014
From: tack at gecode.org (Guido Tack)
Date: Mon, 15 Sep 2014 20:47:41 +1000
Subject: [gecode-users] Passing option -time to fzn-gecode
In-Reply-To: <8D19952C1F6D342-2ED8-295EF@webmail-d264.sysops.aol.com>
References: <8D19952C1F6D342-2ED8-295EF@webmail-d264.sysops.aol.com>
Message-ID: <379F3BF7-72F4-4C4A-9C27-72A12C714852@gecode.org>

Hi,

if you are calling mzn-gecode, you have to pass the time option on to the fzn-gecode executable, like this:

mzn-gecode --fzn-flags "-time 2000" --all-solutions problem.mzn

Cheers,
Guido

-- 
Guido Tack
http://www.csse.monash.edu/~guidot/



On 8 Sep 2014, at 6:05 pm, Max Myer <max.61 at aim.com> wrote:

> I'm trying to run a few minizinc examples by calling 
> 
> $ mzn-gecode --all-solutions problem.mzn
> 
> I'd like to terminate the solve process after a specified amount of time. I found the argument "-time" in fzn-gecode (--help), but am unsure how to pass it to fzn-gecode.
> 
> Adding "-time" to the mzn-gecode call results in the general fzn-gecode help output. Perhaps this is due to this part in fzn-gecode.cpp:
> 
> ...
> int main(int argc, char** argv) {
>   Support::Timer t_total;
>   t_total.start();
>   FlatZinc::FlatZincOptions opt("Gecode/FlatZinc");
>   opt.parse(argc, argv);
>   
>   if (argc!=2) {
>     cerr << "Usage: " << argv[0] << " [options] <file>" << endl;
>     cerr << "       " << argv[0] << " -help for more information" << endl;
>     exit(EXIT_FAILURE); 
>   } 
>   ...
> 
> Anyway, I'd appreciate some help on this.
> 
> Cheers,
> Max
> _______________________________________________
> Gecode users mailing list
> users at gecode.org
> https://www.gecode.org/mailman/listinfo/gecode-users

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.gecode.org/pipermail/users/attachments/20140915/c47e39e0/attachment.html>

From tommy.persson at liu.se  Tue Sep 16 23:49:53 2014
From: tommy.persson at liu.se (Tommy Persson)
Date: Tue, 16 Sep 2014 23:49:53 +0200
Subject: [gecode-users] fzn-gecode and float_lin_eq
Message-ID: <5418B081.4020609@liu.se>

Is float_lin_eq supposed to work with fzn-gecode?

I have tried a lot of varaints to get it to parse but have not found 
anything that works. My problem is:

/opt/gecode-4.3.0/bin/fzn-gecode camera.fzn
Error: Type error: float literal expected

And the camera.fzn is:




float: hfov = 0.7;
float: vfov = 0.52;
float: hfov2 = 0.35;
float: vfov2 = 0.26;
float: period = 0.1;

var float: speed :: output_var;
var float: alt :: output_var;
var float: hfov_tan;
var float: vfov_tan;
var float: max_speed;
var float: h;
array [1..1] of var float: a;
array [1..1] of var float: b;

constraint float_eq(alt, 5.0);
constraint float_eq(vfov_tan, 0.7);

%constraint float_eq(a[1], vfov_tan);
%constraint float_eq(b[1], alt);
constraint float_eq(a[1], 0.5);
constraint float_eq(b[1], 6.0);
constraint float_le(alt, 30.0);
constraint float_le(5.0, alt);
constraint float_le(speed, 15.0);
constraint float_le(3.0, speed);
constraint float_tan(hfov2, hfov_tan);
constraint float_tan(vfov2, vfov_tan);
constraint float_lin_eq(a, b, h);

solve satisfy;

--------


What I want to do is multiply two floats.

/Tommy Persson
Link?ping University


From tack at gecode.org  Wed Sep 17 01:48:15 2014
From: tack at gecode.org (Guido Tack)
Date: Wed, 17 Sep 2014 09:48:15 +1000
Subject: [gecode-users] fzn-gecode and float_lin_eq
In-Reply-To: <5418B081.4020609@liu.se>
References: <5418B081.4020609@liu.se>
Message-ID: <10922A84-93E8-4B2F-9C1E-05CEF00F3EAE@gecode.org>

The constraint float_lin_eq is a linear constraint, i.e. you can't use it to multiply to float variables.  You have to use float_times instead, which has the following signature:

predicate float_times(var float: x, var float: y, var float: z)

and which posts the constraint z = x*y.

Cheers,
Guido

On 17 Sep 2014, at 7:49 am, Tommy Persson <tommy.persson at liu.se> wrote:

> Is float_lin_eq supposed to work with fzn-gecode?
> 
> I have tried a lot of varaints to get it to parse but have not found anything that works. My problem is:
> 
> /opt/gecode-4.3.0/bin/fzn-gecode camera.fzn
> Error: Type error: float literal expected
> 
> And the camera.fzn is:
> 
> 
> 
> 
> float: hfov = 0.7;
> float: vfov = 0.52;
> float: hfov2 = 0.35;
> float: vfov2 = 0.26;
> float: period = 0.1;
> 
> var float: speed :: output_var;
> var float: alt :: output_var;
> var float: hfov_tan;
> var float: vfov_tan;
> var float: max_speed;
> var float: h;
> array [1..1] of var float: a;
> array [1..1] of var float: b;
> 
> constraint float_eq(alt, 5.0);
> constraint float_eq(vfov_tan, 0.7);
> 
> %constraint float_eq(a[1], vfov_tan);
> %constraint float_eq(b[1], alt);
> constraint float_eq(a[1], 0.5);
> constraint float_eq(b[1], 6.0);
> constraint float_le(alt, 30.0);
> constraint float_le(5.0, alt);
> constraint float_le(speed, 15.0);
> constraint float_le(3.0, speed);
> constraint float_tan(hfov2, hfov_tan);
> constraint float_tan(vfov2, vfov_tan);
> constraint float_lin_eq(a, b, h);
> 
> solve satisfy;
> 
> --------
> 
> 
> What I want to do is multiply two floats.
> 
> /Tommy Persson
> Link?ping University
> 
> _______________________________________________
> Gecode users mailing list
> users at gecode.org
> https://www.gecode.org/mailman/listinfo/gecode-users



From tommy.persson at liu.se  Wed Sep 17 10:16:32 2014
From: tommy.persson at liu.se (Tommy Persson)
Date: Wed, 17 Sep 2014 10:16:32 +0200
Subject: [gecode-users] fzn-gecode and float_lin_eq
In-Reply-To: <10922A84-93E8-4B2F-9C1E-05CEF00F3EAE@gecode.org>
References: <5418B081.4020609@liu.se>
	<10922A84-93E8-4B2F-9C1E-05CEF00F3EAE@gecode.org>
Message-ID: <54194360.9020202@liu.se>

On 2014-09-17 01:48, Guido Tack wrote:
> The constraint float_lin_eq is a linear constraint, i.e. you can't
> use it to multiply to float variables.  You have to use float_times
> instead, which has the following signature:
>
> predicate float_times(var float: x, var float: y, var float: z)
>
> and which posts the constraint z = x*y.
>

Thanks for that information.

I really tried to read flatzinc documentation, read gecode documentation
and google to find what was supported in fzn-gecode but could not find
float_times.

E.g:

https://www.minizinc.org/downloads/doc-1.3/flatzinc-spec.pdf

does not mention it.

So where should I look to find a complete list of supported predicates?

/Tommy Persson


From ngh423 at hotmail.com  Thu Sep 18 18:13:01 2014
From: ngh423 at hotmail.com (Nathan Horvath)
Date: Thu, 18 Sep 2014 12:13:01 -0400
Subject: [gecode-users] Creating a function to solve CP sub-problem
 instances
In-Reply-To: <003101cfd0ca$4afc1780$e0f44680$@se>
References: <BLU172-W500DCA10E20D5767AD19AC9BCE0@phx.gbl>,
	<003101cfd0ca$4afc1780$e0f44680$@se>
Message-ID: <BLU172-W447794F207363ACEF9FB7B9BB70@phx.gbl>

Hi Christian,
I should clarify, when I mention script in my original email, I mean an individual file that solves an instance of my sub-problem given particular data. I want to integrate this with other code of mine so that when the optimal solution is found, it is not just printed to the screen, but ideally stored in a structure of my own creation. What I want to know is where I should be looking to implement this: is this done in my file where I defined my constraint problem?, or do I need to make changes elsewhere in the source code? From the examples I've seen, every single one has simply printed an optimal solution without doing anything more, while I want to store it for later purposes and solve another CP of the same structure with different data.
Thanks,Nathan

From: cschulte at kth.se
To: ngh423 at hotmail.com; users at gecode.org
Subject: RE: [gecode-users] Creating a function to solve CP sub-problem instances
Date: Mon, 15 Sep 2014 11:49:07 +0200

Hi, The setup is that a script must be a sub-class of Gecode::Space. However, you can pass these objects around, so I do not really see where the problem is, sorry.  CheersChristian --Christian Schulte, Professor of Computer Science, KTH, www.gecode.org/~schulte/ From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf Of Nathan Horvath
Sent: Tuesday, September 09, 2014 8:45 PM
To: users at gecode.org
Subject: [gecode-users] Creating a function to solve CP sub-problem instances Hi, I'm trying to implement a tabu search algorithm that involves solving small constraint programming sub-problems. Firstly, I used the examples found in the Modelling and Programming Guide to develop a script to solve an instance of a sub-problem. Now, I'm looking to expand upon this by creating a function that consumes data to solve a sub-problem, solve it using Gecode, and then return an optimal solution to the sub-problem in a some data structure. I'm having problems trying to turn my script into a callable function. Given from what I've seen in the guide, it seems like it is not possible, or it's taken as something trivial and is not glossed over, as I haven't found any similar examples after searching on-line. What I started to do was play around with the print function (same layout as in the SEND MOST MONEY examples in the guide) and try replacing it with a function that interprets the solution, but I've had no luck. One could classify my experience with Gecode and C++ as very beginner (I picked up C++ so I could use Gecode's capabilities), so I apologize if this question comes off as ignorant or out of scope. Any help would be greatly appreciated. Cheers,Nathan 		 	   		  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.gecode.org/pipermail/users/attachments/20140918/a633c30e/attachment.html>

From cschulte at kth.se  Mon Sep 22 14:42:14 2014
From: cschulte at kth.se (Christian Schulte)
Date: Mon, 22 Sep 2014 14:42:14 +0200
Subject: [gecode-users] Creating a function to solve CP sub-problem
	instances
In-Reply-To: <BLU172-W447794F207363ACEF9FB7B9BB70@phx.gbl>
References: <BLU172-W500DCA10E20D5767AD19AC9BCE0@phx.gbl>,
	<003101cfd0ca$4afc1780$e0f44680$@se>
	<BLU172-W447794F207363ACEF9FB7B9BB70@phx.gbl>
Message-ID: <00fe01cfd662$a37a15e0$ea6e41a0$@se>

Hi Nathan,

 

I think the easiest way is to use a search engine directly as explained in
Sections  2.2, 2.5, and 9.3: they return an object that represents the
solution. Then you can do with that solution whatever you want!

 

You see I am still not really on board here, I do not see where the problem
is as you can define in fact that your script has whatever methods you
want...

 

Cheers

Christian

 

--

Christian Schulte, Professor of Computer Science, KTH,
www.gecode.org/~schulte/

 

From: Nathan Horvath [mailto:ngh423 at hotmail.com] 
Sent: Thursday, September 18, 2014 6:13 PM
To: cschulte at kth.se; users at gecode.org
Subject: RE: [gecode-users] Creating a function to solve CP sub-problem
instances

 

Hi Christian,

 

I should clarify, when I mention script in my original email, I mean an
individual file that solves an instance of my sub-problem given particular
data. I want to integrate this with other code of mine so that when the
optimal solution is found, it is not just printed to the screen, but ideally
stored in a structure of my own creation. What I want to know is where I
should be looking to implement this: is this done in my file where I defined
my constraint problem?, or do I need to make changes elsewhere in the source
code? From the examples I've seen, every single one has simply printed an
optimal solution without doing anything more, while I want to store it for
later purposes and solve another CP of the same structure with different
data.

 

Thanks,

Nathan

  _____  

From: cschulte at kth.se
To: ngh423 at hotmail.com; users at gecode.org
Subject: RE: [gecode-users] Creating a function to solve CP sub-problem
instances
Date: Mon, 15 Sep 2014 11:49:07 +0200

Hi,

 

The setup is that a script must be a sub-class of Gecode::Space. However,
you can pass these objects around, so I do not really see where the problem
is, sorry. 

 

Cheers

Christian

 

--

Christian Schulte, Professor of Computer Science, KTH,
www.gecode.org/~schulte/

 

From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf
Of Nathan Horvath
Sent: Tuesday, September 09, 2014 8:45 PM
To: users at gecode.org
Subject: [gecode-users] Creating a function to solve CP sub-problem
instances

 

Hi,

 

I'm trying to implement a tabu search algorithm that involves solving small
constraint programming sub-problems. Firstly, I used the examples found in
the Modelling and Programming Guide to develop a script to solve an instance
of a sub-problem. Now, I'm looking to expand upon this by creating a
function that consumes data to solve a sub-problem, solve it using Gecode,
and then return an optimal solution to the sub-problem in a some data
structure.

 

I'm having problems trying to turn my script into a callable function. Given
from what I've seen in the guide, it seems like it is not possible, or it's
taken as something trivial and is not glossed over, as I haven't found any
similar examples after searching on-line. What I started to do was play
around with the print function (same layout as in the SEND MOST MONEY
examples in the guide) and try replacing it with a function that interprets
the solution, but I've had no luck.

 

One could classify my experience with Gecode and C++ as very beginner (I
picked up C++ so I could use Gecode's capabilities), so I apologize if this
question comes off as ignorant or out of scope. Any help would be greatly
appreciated.

 

Cheers,

Nathan

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.gecode.org/pipermail/users/attachments/20140922/93b90a03/attachment.html>

From Pierre.Flener at it.uu.se  Tue Sep 23 08:54:42 2014
From: Pierre.Flener at it.uu.se (Pierre Flener)
Date: Tue, 23 Sep 2014 08:54:42 +0200
Subject: [gecode-users] a propagator for the Context-Free-Grammar constraint
Message-ID: <BF975F30-C697-4EE5-98BB-7C6536729BC4@it.uu.se>

Hi all,

As a useful complement to the built-in REGULAR constraint of Gecode, constraining a fixed-length sequence of variables to form a word that belongs to the regular language defined by a regular expression (RE) or (non-)deterministic finite automaton (NFA/DFA), there exists the CFG constraint, which constrains a fixed-length sequence of variables to form a word that belongs to the context-free language defined by a context-free grammar (CFG).  Languages of words of fixed length are finite, and hence regular, so a CFG constraint over fixed-length sequences is theoretically not needed.  However, there are languages where a context-free grammar is much more compact than an RE/DFA/NFA, to the point that the cubic-time propagation of the CFG constraint pays off versus the much lower time complexity of a REGULAR propagator.  So far, Gecode unfortunately lacks a CFG constraint.

The state-of-the-art propagator for the CFG constraint described in

	J. He, P. Flener, J. Pearson, and W. M. Zhang.
	Solving string constraints: The case for constraint programming.
	In: Ch. Schulte (editor), CP 2013, pages 381-397. Lecture Notes in Computer Science, volume 8124.
	Springer, 2013.
	http://dx.doi.org/10.1007/978-3-642-40627-0_31
	http://www.it.uu.se/research/group/astra/publications/CP13cfg.pdf
	http://cp2013.a4cp.org/slides/44.pdf

was implemented in Gecode by Jun He (Cc:ed) and is made available at http://www.it.uu.se/research/group/astra/software#cfg : note that the implementation is provided as is, and does not fully comply yet with Gecode style, but we hope it will already be useful to some.

Cheers,
Pierre



From cschulte at kth.se  Tue Sep 23 09:24:15 2014
From: cschulte at kth.se (Christian Schulte)
Date: Tue, 23 Sep 2014 09:24:15 +0200
Subject: [gecode-users] a propagator for the Context-Free-Grammar
	constraint
In-Reply-To: <BF975F30-C697-4EE5-98BB-7C6536729BC4@it.uu.se>
References: <BF975F30-C697-4EE5-98BB-7C6536729BC4@it.uu.se>
Message-ID: <01d401cfd6ff$62e17120$28a45360$@kth.se>

Hi Pierre,

Thanks for the announcement. If there is anybody who is interested, maybe
that person could also be interested to clean the implementation up, design
a nice interface to the propagator for CFGs (in the style of regular
expressions or DFAs in Gecode).

If you are interested, please get in touch with me!

Cheers
Christian

--
Christian Schulte, www.ict.kth.se/~cschulte/

> -----Original Message-----
> From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On
> Behalf Of Pierre Flener
> Sent: Tuesday, September 23, 2014 8:55 AM
> To: users at gecode.org
> Cc: Jun He
> Subject: [gecode-users] a propagator for the Context-Free-Grammar
constraint
> 
> Hi all,
> 
> As a useful complement to the built-in REGULAR constraint of Gecode,
> constraining a fixed-length sequence of variables to form a word that
belongs to
> the regular language defined by a regular expression (RE) or
(non-)deterministic
> finite automaton (NFA/DFA), there exists the CFG constraint, which
constrains a
> fixed-length sequence of variables to form a word that belongs to the
context-
> free language defined by a context-free grammar (CFG).  Languages of words
of
> fixed length are finite, and hence regular, so a CFG constraint over
fixed-length
> sequences is theoretically not needed.  However, there are languages where
a
> context-free grammar is much more compact than an RE/DFA/NFA, to the point
> that the cubic-time propagation of the CFG constraint pays off versus the
much
> lower time complexity of a REGULAR propagator.  So far, Gecode
unfortunately
> lacks a CFG constraint.
> 
> The state-of-the-art propagator for the CFG constraint described in
> 
> 	J. He, P. Flener, J. Pearson, and W. M. Zhang.
> 	Solving string constraints: The case for constraint programming.
> 	In: Ch. Schulte (editor), CP 2013, pages 381-397. Lecture Notes in
> Computer Science, volume 8124.
> 	Springer, 2013.
> 	http://dx.doi.org/10.1007/978-3-642-40627-0_31
> 	http://www.it.uu.se/research/group/astra/publications/CP13cfg.pdf
> 	http://cp2013.a4cp.org/slides/44.pdf
> 
> was implemented in Gecode by Jun He (Cc:ed) and is made available at
> http://www.it.uu.se/research/group/astra/software#cfg : note that the
> implementation is provided as is, and does not fully comply yet with
Gecode
> style, but we hope it will already be useful to some.
> 
> Cheers,
> Pierre
> 
> 
> _______________________________________________
> Gecode users mailing list
> users at gecode.org
> https://www.gecode.org/mailman/listinfo/gecode-users



From andrea.peano at unife.it  Tue Sep 23 13:22:49 2014
From: andrea.peano at unife.it (Andrea Peano)
Date: Tue, 23 Sep 2014 13:22:49 +0200
Subject: [gecode-users] Strange branching behaviour when using
	FunctionBrancher
Message-ID: <CAGTgUnO0a23_sopvvgjxXgVPoHjLhNXjw0Tu=X=xQDUpbEJJpA@mail.gmail.com>

Hello,

I've implemented a search strategy by splitting the search into three
levels. I think the code may explain better this strategy.


void MyModel::post(Space& home)
{

static_cast<MyModel&>(home).second_level();

}

void MyModel::second_level()
{

status();

//do something with the partial solution
//print "second level"

branch(*this, BoolBranchDirection, INT_VAL_MIN());

branch(*this, post2);

}

void MyModel::post2(Space& home)
{

static_cast<MyModel&>(home).third_level();

}

void MyModel::third_level()
{

if(BoolBranchDirection.val()==0)
{
//print third level left
//left branch behaviour (install further branches)
}
else
{
//print third level right
//right branch behaviour (install further branches)
}

}

Imagine now we are fixing the partial solution before the "post" calling,
so the solver goes only once into the "post" function (and it's confirmed
by GIST).

The strange fact is that "second_level" is called more than once! Instead I
expect one call for "second_level" and two calls for "third_level", which
executes two different paths of the code.

These are the prints I read:
second level
third level left
second level
third level right
second level
third level right

But I expected:
second level
third level left
third level right

Can you clarify this behaviour please?

Furthermore, I experienced that I need to call "status()" within the second
level, to ground some variables I expected to be already ground. Is this
normal?

I'm using Gecode 4.2.1

Thanks,
Andrea


-- 

Andrea Peano - PhD student
Department of Engineering - University of Ferrara
Tel: +39 0532 97 4827
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.gecode.org/pipermail/users/attachments/20140923/35f7c7f6/attachment.html>

From cschulte at kth.se  Tue Sep 23 13:59:31 2014
From: cschulte at kth.se (Christian Schulte)
Date: Tue, 23 Sep 2014 13:59:31 +0200
Subject: [gecode-users] Strange branching behaviour when
	using	FunctionBrancher
In-Reply-To: <CAGTgUnO0a23_sopvvgjxXgVPoHjLhNXjw0Tu=X=xQDUpbEJJpA@mail.gmail.com>
References: <CAGTgUnO0a23_sopvvgjxXgVPoHjLhNXjw0Tu=X=xQDUpbEJJpA@mail.gmail.com>
Message-ID: <000601cfd725$d67000e0$835002a0$@se>

Hi Andrea,

 

This is due to recomputation. Please check Tip 8.4 whether this explains the behaviour.

 

Cheers

Christian

 

--

Christian Schulte, Professor of Computer Science, KTH, www.gecode.org/~schulte/

 

From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf Of Andrea Peano
Sent: Tuesday, September 23, 2014 1:23 PM
To: users at gecode.org
Subject: [gecode-users] Strange branching behaviour when using FunctionBrancher

 

Hello,

 

I've implemented a search strategy by splitting the search into three levels. I think the code may explain better this strategy.

 

 

void MyModel::post(Space& home)

{

static_cast<MyModel&>(home).second_level();

}

 

void MyModel::second_level()

{

status();

 

//do something with the partial solution
//print "second level"

branch(*this, BoolBranchDirection, INT_VAL_MIN());

branch(*this, post2);

}

 

void MyModel::post2(Space& home)

{

static_cast<MyModel&>(home).third_level();

}

 

void MyModel::third_level()

{

if(BoolBranchDirection.val()==0)
{
//print third level left
//left branch behaviour (install further branches)
}
else
{
//print third level right
//right branch behaviour (install further branches)
}

}

 

Imagine now we are fixing the partial solution before the "post" calling, so the solver goes only once into the "post" function (and it's confirmed by GIST).

 

The strange fact is that "second_level" is called more than once! Instead I expect one call for "second_level" and two calls for "third_level", which executes two different paths of the code.

 

These are the prints I read:

second level

third level left

second level

third level right

second level

third level right

 

But I expected:

second level

third level left

third level right

 

Can you clarify this behaviour please?

 

Furthermore, I experienced that I need to call "status()" within the second level, to ground some variables I expected to be already ground. Is this normal?

 

I'm using Gecode 4.2.1

 

Thanks,

Andrea

 

 

-- 

 

Andrea Peano - PhD student

Department of Engineering - University of Ferrara

Tel: +39 0532 97 4827

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.gecode.org/pipermail/users/attachments/20140923/e6b57718/attachment.html>

From andrea.peano at unife.it  Tue Sep 23 13:59:57 2014
From: andrea.peano at unife.it (Andrea Peano)
Date: Tue, 23 Sep 2014 13:59:57 +0200
Subject: [gecode-users] Strange branching behaviour when using
	FunctionBrancher
In-Reply-To: <CAGTgUnO0a23_sopvvgjxXgVPoHjLhNXjw0Tu=X=xQDUpbEJJpA@mail.gmail.com>
References: <CAGTgUnO0a23_sopvvgjxXgVPoHjLhNXjw0Tu=X=xQDUpbEJJpA@mail.gmail.com>
Message-ID: <CAGTgUnOgjJHucA0tXaz3Vb_8o5WUB763EO2mVhfpi3YO_SaqLg@mail.gmail.com>

I was just reading on the Gecode guide that this behaviour is due to the
"recomputation".
So I have two more questions: can I completely prevent this behaviour by
disabling recomputation?
Has recomputation a direct effect on parallel search?

Thanks,
Andrea

On Tue, Sep 23, 2014 at 1:22 PM, Andrea Peano <andrea.peano at unife.it> wrote:

> Hello,
>
> I've implemented a search strategy by splitting the search into three
> levels. I think the code may explain better this strategy.
>
>
> void MyModel::post(Space& home)
> {
>
> static_cast<MyModel&>(home).second_level();
>
> }
>
> void MyModel::second_level()
> {
>
> status();
>
> //do something with the partial solution
> //print "second level"
>
> branch(*this, BoolBranchDirection, INT_VAL_MIN());
>
> branch(*this, post2);
>
> }
>
> void MyModel::post2(Space& home)
> {
>
> static_cast<MyModel&>(home).third_level();
>
> }
>
> void MyModel::third_level()
> {
>
> if(BoolBranchDirection.val()==0)
> {
> //print third level left
> //left branch behaviour (install further branches)
> }
> else
> {
> //print third level right
> //right branch behaviour (install further branches)
> }
>
> }
>
> Imagine now we are fixing the partial solution before the "post" calling,
> so the solver goes only once into the "post" function (and it's confirmed
> by GIST).
>
> The strange fact is that "second_level" is called more than once! Instead
> I expect one call for "second_level" and two calls for "third_level", which
> executes two different paths of the code.
>
> These are the prints I read:
> second level
> third level left
> second level
> third level right
> second level
> third level right
>
> But I expected:
> second level
> third level left
> third level right
>
> Can you clarify this behaviour please?
>
> Furthermore, I experienced that I need to call "status()" within the
> second level, to ground some variables I expected to be already ground. Is
> this normal?
>
> I'm using Gecode 4.2.1
>
> Thanks,
> Andrea
>
>
> --
>
> Andrea Peano - PhD student
> Department of Engineering - University of Ferrara
> Tel: +39 0532 97 4827
>



-- 

Andrea Peano - PhD student
Department of Engineering - University of Ferrara
Tel: +39 0532 97 4827
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.gecode.org/pipermail/users/attachments/20140923/59a2f9a1/attachment-0001.html>

From cschulte at kth.se  Tue Sep 23 14:09:08 2014
From: cschulte at kth.se (Christian Schulte)
Date: Tue, 23 Sep 2014 14:09:08 +0200
Subject: [gecode-users] Strange branching behaviour when
	using	FunctionBrancher
In-Reply-To: <CAGTgUnOgjJHucA0tXaz3Vb_8o5WUB763EO2mVhfpi3YO_SaqLg@mail.gmail.com>
References: <CAGTgUnO0a23_sopvvgjxXgVPoHjLhNXjw0Tu=X=xQDUpbEJJpA@mail.gmail.com>
	<CAGTgUnOgjJHucA0tXaz3Vb_8o5WUB763EO2mVhfpi3YO_SaqLg@mail.gmail.com>
Message-ID: <001a01cfd727$2de85150$89b8f3f0$@se>

You can disable recomputation but this is not a good idea as it degrades performance seriously and increases memory consumption considerably.

 

What you could do (also not good) is call status() yourself.

 

The real (but tough) thing to do is to implement your own brancher.

 

And just checking: do you know that multiple branchers are executed in the order they are created? But maybe that is not enough for you.

 

Cheers

Christian

 

--

Christian Schulte, Professor of Computer Science, KTH, www.gecode.org/~schulte/

 

From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf Of Andrea Peano
Sent: Tuesday, September 23, 2014 2:00 PM
To: users at gecode.org
Subject: Re: [gecode-users] Strange branching behaviour when using FunctionBrancher

 

I was just reading on the Gecode guide that this behaviour is due to the "recomputation".

So I have two more questions: can I completely prevent this behaviour by disabling recomputation?

Has recomputation a direct effect on parallel search?

 

Thanks,

Andrea

 

On Tue, Sep 23, 2014 at 1:22 PM, Andrea Peano <andrea.peano at unife.it> wrote:

Hello,

 

I've implemented a search strategy by splitting the search into three levels. I think the code may explain better this strategy.

 

 

void MyModel::post(Space& home)

{

static_cast<MyModel&>(home).second_level();

}

 

void MyModel::second_level()

{

status();

 

//do something with the partial solution
//print "second level"

branch(*this, BoolBranchDirection, INT_VAL_MIN());

branch(*this, post2);

}

 

void MyModel::post2(Space& home)

{

static_cast<MyModel&>(home).third_level();

}

 

void MyModel::third_level()

{

if(BoolBranchDirection.val()==0)
{
//print third level left
//left branch behaviour (install further branches)
}
else
{
//print third level right
//right branch behaviour (install further branches)
}

}

 

Imagine now we are fixing the partial solution before the "post" calling, so the solver goes only once into the "post" function (and it's confirmed by GIST).

 

The strange fact is that "second_level" is called more than once! Instead I expect one call for "second_level" and two calls for "third_level", which executes two different paths of the code.

 

These are the prints I read:

second level

third level left

second level

third level right

second level

third level right

 

But I expected:

second level

third level left

third level right

 

Can you clarify this behaviour please?

 

Furthermore, I experienced that I need to call "status()" within the second level, to ground some variables I expected to be already ground. Is this normal?

 

I'm using Gecode 4.2.1

 

Thanks,

Andrea

 

 

-- 

 

Andrea Peano - PhD student

Department of Engineering - University of Ferrara

Tel: +39 0532 97 4827





 

-- 

 

Andrea Peano - PhD student

Department of Engineering - University of Ferrara

Tel: +39 0532 97 4827

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.gecode.org/pipermail/users/attachments/20140923/da4fbead/attachment.html>

From andrea.peano at unife.it  Tue Sep 23 14:24:41 2014
From: andrea.peano at unife.it (Andrea Peano)
Date: Tue, 23 Sep 2014 14:24:41 +0200
Subject: [gecode-users] Strange branching behaviour when using
	FunctionBrancher
In-Reply-To: <001a01cfd727$2de85150$89b8f3f0$@se>
References: <CAGTgUnO0a23_sopvvgjxXgVPoHjLhNXjw0Tu=X=xQDUpbEJJpA@mail.gmail.com>
	<CAGTgUnOgjJHucA0tXaz3Vb_8o5WUB763EO2mVhfpi3YO_SaqLg@mail.gmail.com>
	<001a01cfd727$2de85150$89b8f3f0$@se>
Message-ID: <CAGTgUnNZ7c=z01yH-qDr74-48yim1=uGF28WSTwAip3HaPiCNA@mail.gmail.com>

On Tue, Sep 23, 2014 at 2:09 PM, Christian Schulte <cschulte at kth.se> wrote:

> You can disable recomputation but this is not a good idea as it degrades
> performance seriously and increases memory consumption considerably.
>
Yes, I see.


>
>
> What you could do (also not good) is call status() yourself.
>
I'm already doing it, but this does not seem enough to prevent
recomputation on those nodes. I call it within second_level and third_level
but it's not enough. Do you mean somewhere else?


>
>
> The real (but tough) thing to do is to implement your own brancher.
>

>
> And just checking: do you know that multiple branchers are executed in the
> order they are created? But maybe that is not enough for you.
>
Yes, I know, I tried to make the search as simple as possible, but there
are some aspects of the problem a bit difficult to manage.
Anyway, I'll find a way.

Thanks for giving me a halping hand.

Andrea


>
>
> Cheers
>
> Christian
>
>
>
> --
>
> Christian Schulte, Professor of Computer Science, KTH,
> www.gecode.org/~schulte/
>
>
>
> *From:* users-bounces at gecode.org [mailto:users-bounces at gecode.org] *On
> Behalf Of *Andrea Peano
> *Sent:* Tuesday, September 23, 2014 2:00 PM
> *To:* users at gecode.org
> *Subject:* Re: [gecode-users] Strange branching behaviour when using
> FunctionBrancher
>
>
>
> I was just reading on the Gecode guide that this behaviour is due to the
> "recomputation".
>
> So I have two more questions: can I completely prevent this behaviour by
> disabling recomputation?
>
> Has recomputation a direct effect on parallel search?
>
>
>
> Thanks,
>
> Andrea
>
>
>
> On Tue, Sep 23, 2014 at 1:22 PM, Andrea Peano <andrea.peano at unife.it>
> wrote:
>
> Hello,
>
>
>
> I've implemented a search strategy by splitting the search into three
> levels. I think the code may explain better this strategy.
>
>
>
>
>
> void MyModel::post(Space& home)
>
> {
>
> static_cast<MyModel&>(home).second_level();
>
> }
>
>
>
> void MyModel::second_level()
>
> {
>
> status();
>
>
>
> //do something with the partial solution
> //print "second level"
>
> branch(*this, BoolBranchDirection, INT_VAL_MIN());
>
> branch(*this, post2);
>
> }
>
>
>
> void MyModel::post2(Space& home)
>
> {
>
> static_cast<MyModel&>(home).third_level();
>
> }
>
>
>
> void MyModel::third_level()
>
> {
>
> if(BoolBranchDirection.val()==0)
> {
> //print third level left
> //left branch behaviour (install further branches)
> }
> else
> {
> //print third level right
> //right branch behaviour (install further branches)
> }
>
> }
>
>
>
> Imagine now we are fixing the partial solution before the "post" calling,
> so the solver goes only once into the "post" function (and it's confirmed
> by GIST).
>
>
>
> The strange fact is that "second_level" is called more than once! Instead
> I expect one call for "second_level" and two calls for "third_level", which
> executes two different paths of the code.
>
>
>
> These are the prints I read:
>
> second level
>
> third level left
>
> second level
>
> third level right
>
> second level
>
> third level right
>
>
>
> But I expected:
>
> second level
>
> third level left
>
> third level right
>
>
>
> Can you clarify this behaviour please?
>
>
>
> Furthermore, I experienced that I need to call "status()" within the
> second level, to ground some variables I expected to be already ground. Is
> this normal?
>
>
>
> I'm using Gecode 4.2.1
>
>
>
> Thanks,
>
> Andrea
>
>
>
>
>
> --
>
>
>
> Andrea Peano - PhD student
>
> Department of Engineering - University of Ferrara
>
> Tel: +39 0532 97 4827
>
>
>
>
>
> --
>
>
>
> Andrea Peano - PhD student
>
> Department of Engineering - University of Ferrara
>
> Tel: +39 0532 97 4827
>



-- 

Andrea Peano - PhD student
Department of Engineering - University of Ferrara
Tel: +39 0532 97 4827
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.gecode.org/pipermail/users/attachments/20140923/ba05d551/attachment-0001.html>

From cschulte at kth.se  Tue Sep 23 14:28:41 2014
From: cschulte at kth.se (Christian Schulte)
Date: Tue, 23 Sep 2014 14:28:41 +0200
Subject: [gecode-users] Strange branching behaviour when using
	FunctionBrancher
In-Reply-To: <CAGTgUnNZ7c=z01yH-qDr74-48yim1=uGF28WSTwAip3HaPiCNA@mail.gmail.com>
References: <CAGTgUnO0a23_sopvvgjxXgVPoHjLhNXjw0Tu=X=xQDUpbEJJpA@mail.gmail.com>	<CAGTgUnOgjJHucA0tXaz3Vb_8o5WUB763EO2mVhfpi3YO_SaqLg@mail.gmail.com>	<001a01cfd727$2de85150$89b8f3f0$@se>
	<CAGTgUnNZ7c=z01yH-qDr74-48yim1=uGF28WSTwAip3HaPiCNA@mail.gmail.com>
Message-ID: <003e01cfd729$e8cb9200$ba62b600$@se>

Forget about status(), that will not help you here... Sorry!

 

Cheers

Christian

 

--

Christian Schulte, Professor of Computer Science, KTH, www.gecode.org/~schulte/

 

From: Andrea Peano [mailto:andrea.peano at unife.it] 
Sent: Tuesday, September 23, 2014 2:25 PM
To: Christian Schulte
Cc: users at gecode.org
Subject: Re: [gecode-users] Strange branching behaviour when using FunctionBrancher

 

On Tue, Sep 23, 2014 at 2:09 PM, Christian Schulte <cschulte at kth.se> wrote:

You can disable recomputation but this is not a good idea as it degrades performance seriously and increases memory consumption considerably.

Yes, I see.

 

 

What you could do (also not good) is call status() yourself.

I'm already doing it, but this does not seem enough to prevent recomputation on those nodes. I call it within second_level and third_level but it's not enough. Do you mean somewhere else?

 

 

The real (but tough) thing to do is to implement your own brancher. 

 

And just checking: do you know that multiple branchers are executed in the order they are created? But maybe that is not enough for you.

Yes, I know, I tried to make the search as simple as possible, but there are some aspects of the problem a bit difficult to manage.

Anyway, I'll find a way.

 

Thanks for giving me a halping hand.

 

Andrea

 

 

Cheers

Christian

 

--

Christian Schulte, Professor of Computer Science, KTH, www.gecode.org/~schulte/

 

From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf Of Andrea Peano
Sent: Tuesday, September 23, 2014 2:00 PM
To: users at gecode.org
Subject: Re: [gecode-users] Strange branching behaviour when using FunctionBrancher

 

I was just reading on the Gecode guide that this behaviour is due to the "recomputation".

So I have two more questions: can I completely prevent this behaviour by disabling recomputation?

Has recomputation a direct effect on parallel search?

 

Thanks,

Andrea

 

On Tue, Sep 23, 2014 at 1:22 PM, Andrea Peano <andrea.peano at unife.it> wrote:

Hello,

 

I've implemented a search strategy by splitting the search into three levels. I think the code may explain better this strategy.

 

 

void MyModel::post(Space& home)

{

static_cast<MyModel&>(home).second_level();

}

 

void MyModel::second_level()

{

status();

 

//do something with the partial solution
//print "second level"

branch(*this, BoolBranchDirection, INT_VAL_MIN());

branch(*this, post2);

}

 

void MyModel::post2(Space& home)

{

static_cast<MyModel&>(home).third_level();

}

 

void MyModel::third_level()

{

if(BoolBranchDirection.val()==0)
{
//print third level left
//left branch behaviour (install further branches)
}
else
{
//print third level right
//right branch behaviour (install further branches)
}

}

 

Imagine now we are fixing the partial solution before the "post" calling, so the solver goes only once into the "post" function (and it's confirmed by GIST).

 

The strange fact is that "second_level" is called more than once! Instead I expect one call for "second_level" and two calls for "third_level", which executes two different paths of the code.

 

These are the prints I read:

second level

third level left

second level

third level right

second level

third level right

 

But I expected:

second level

third level left

third level right

 

Can you clarify this behaviour please?

 

Furthermore, I experienced that I need to call "status()" within the second level, to ground some variables I expected to be already ground. Is this normal?

 

I'm using Gecode 4.2.1

 

Thanks,

Andrea

 

 

-- 

 

Andrea Peano - PhD student

Department of Engineering - University of Ferrara

Tel: +39 0532 97 4827





 

-- 

 

Andrea Peano - PhD student

Department of Engineering - University of Ferrara

Tel: +39 0532 97 4827





 

-- 

 

Andrea Peano - PhD student

Department of Engineering - University of Ferrara

Tel: +39 0532 97 4827

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.gecode.org/pipermail/users/attachments/20140923/fc8aa625/attachment.html>

From andrea.peano at unife.it  Tue Sep 23 14:31:21 2014
From: andrea.peano at unife.it (Andrea Peano)
Date: Tue, 23 Sep 2014 14:31:21 +0200
Subject: [gecode-users] Strange branching behaviour when using
	FunctionBrancher
In-Reply-To: <CAGTgUnNZ7c=z01yH-qDr74-48yim1=uGF28WSTwAip3HaPiCNA@mail.gmail.com>
References: <CAGTgUnO0a23_sopvvgjxXgVPoHjLhNXjw0Tu=X=xQDUpbEJJpA@mail.gmail.com>
	<CAGTgUnOgjJHucA0tXaz3Vb_8o5WUB763EO2mVhfpi3YO_SaqLg@mail.gmail.com>
	<001a01cfd727$2de85150$89b8f3f0$@se>
	<CAGTgUnNZ7c=z01yH-qDr74-48yim1=uGF28WSTwAip3HaPiCNA@mail.gmail.com>
Message-ID: <CAGTgUnMJOLYX8E8tQwwgGYX2YN=owKba520H81LQoyNUgiXOdQ@mail.gmail.com>

I'm sorry for multiple replies, but I want to ask this in a more general
fashion.

Consider I planned to perform a quite burdensome heuristic in a particular
point of the search (that's why I'm splitting the search).
Obviously this heuristics helps to prune the search space.
How can I be sure that this heuristic is not recomputed more and more?

Thanks,
Andrea Peano

On Tue, Sep 23, 2014 at 2:24 PM, Andrea Peano <andrea.peano at unife.it> wrote:

> On Tue, Sep 23, 2014 at 2:09 PM, Christian Schulte <cschulte at kth.se>
> wrote:
>
>> You can disable recomputation but this is not a good idea as it degrades
>> performance seriously and increases memory consumption considerably.
>>
> Yes, I see.
>
>
>>
>>
>> What you could do (also not good) is call status() yourself.
>>
> I'm already doing it, but this does not seem enough to prevent
> recomputation on those nodes. I call it within second_level and third_level
> but it's not enough. Do you mean somewhere else?
>
>
>>
>>
>> The real (but tough) thing to do is to implement your own brancher.
>>
>
>>
>> And just checking: do you know that multiple branchers are executed in
>> the order they are created? But maybe that is not enough for you.
>>
> Yes, I know, I tried to make the search as simple as possible, but there
> are some aspects of the problem a bit difficult to manage.
> Anyway, I'll find a way.
>
> Thanks for giving me a halping hand.
>
> Andrea
>
>
>>
>>
>> Cheers
>>
>> Christian
>>
>>
>>
>> --
>>
>> Christian Schulte, Professor of Computer Science, KTH,
>> www.gecode.org/~schulte/
>>
>>
>>
>> *From:* users-bounces at gecode.org [mailto:users-bounces at gecode.org] *On
>> Behalf Of *Andrea Peano
>> *Sent:* Tuesday, September 23, 2014 2:00 PM
>> *To:* users at gecode.org
>> *Subject:* Re: [gecode-users] Strange branching behaviour when using
>> FunctionBrancher
>>
>>
>>
>> I was just reading on the Gecode guide that this behaviour is due to the
>> "recomputation".
>>
>> So I have two more questions: can I completely prevent this behaviour by
>> disabling recomputation?
>>
>> Has recomputation a direct effect on parallel search?
>>
>>
>>
>> Thanks,
>>
>> Andrea
>>
>>
>>
>> On Tue, Sep 23, 2014 at 1:22 PM, Andrea Peano <andrea.peano at unife.it>
>> wrote:
>>
>> Hello,
>>
>>
>>
>> I've implemented a search strategy by splitting the search into three
>> levels. I think the code may explain better this strategy.
>>
>>
>>
>>
>>
>> void MyModel::post(Space& home)
>>
>> {
>>
>> static_cast<MyModel&>(home).second_level();
>>
>> }
>>
>>
>>
>> void MyModel::second_level()
>>
>> {
>>
>> status();
>>
>>
>>
>> //do something with the partial solution
>> //print "second level"
>>
>> branch(*this, BoolBranchDirection, INT_VAL_MIN());
>>
>> branch(*this, post2);
>>
>> }
>>
>>
>>
>> void MyModel::post2(Space& home)
>>
>> {
>>
>> static_cast<MyModel&>(home).third_level();
>>
>> }
>>
>>
>>
>> void MyModel::third_level()
>>
>> {
>>
>> if(BoolBranchDirection.val()==0)
>> {
>> //print third level left
>> //left branch behaviour (install further branches)
>> }
>> else
>> {
>> //print third level right
>> //right branch behaviour (install further branches)
>> }
>>
>> }
>>
>>
>>
>> Imagine now we are fixing the partial solution before the "post" calling,
>> so the solver goes only once into the "post" function (and it's confirmed
>> by GIST).
>>
>>
>>
>> The strange fact is that "second_level" is called more than once! Instead
>> I expect one call for "second_level" and two calls for "third_level", which
>> executes two different paths of the code.
>>
>>
>>
>> These are the prints I read:
>>
>> second level
>>
>> third level left
>>
>> second level
>>
>> third level right
>>
>> second level
>>
>> third level right
>>
>>
>>
>> But I expected:
>>
>> second level
>>
>> third level left
>>
>> third level right
>>
>>
>>
>> Can you clarify this behaviour please?
>>
>>
>>
>> Furthermore, I experienced that I need to call "status()" within the
>> second level, to ground some variables I expected to be already ground. Is
>> this normal?
>>
>>
>>
>> I'm using Gecode 4.2.1
>>
>>
>>
>> Thanks,
>>
>> Andrea
>>
>>
>>
>>
>>
>> --
>>
>>
>>
>> Andrea Peano - PhD student
>>
>> Department of Engineering - University of Ferrara
>>
>> Tel: +39 0532 97 4827
>>
>>
>>
>>
>>
>> --
>>
>>
>>
>> Andrea Peano - PhD student
>>
>> Department of Engineering - University of Ferrara
>>
>> Tel: +39 0532 97 4827
>>
>
>
>
> --
>
> Andrea Peano - PhD student
> Department of Engineering - University of Ferrara
> Tel: +39 0532 97 4827
>



-- 

Andrea Peano - PhD student
Department of Engineering - University of Ferrara
Tel: +39 0532 97 4827
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.gecode.org/pipermail/users/attachments/20140923/c7fddfb3/attachment-0001.html>

From genius_linda1987 at yahoo.fr  Tue Sep 23 15:46:17 2014
From: genius_linda1987 at yahoo.fr (Bouchene Sabrina)
Date: Tue, 23 Sep 2014 14:46:17 +0100
Subject: [gecode-users] Breaking symmetries with LDSB in Matrix model.
Message-ID: <1411479977.93389.YahooMailNeo@web171401.mail.ir2.yahoo.com>

Hi,

I would break symmetries from a probleme with the LDSB layer, i model a probleme with a Matrix, so i have found in the manual of Gecode these Symmetry declarations to break symmetries for matrix Model:

       rows-interchange : to specify that a rows of the matrix are interchangeable, and
       column-interchange : to specify that a columns of the matrix are interchangeable, 

But in my problem i need functions for breaking only specified rows or specified columns that are interchangeable, for example : rows 4 and 7 of the matrix are interchangeable, or for example: column 2 and 5 only are interchangeable and not all rows are interchangeable and not all columns are interchangeable.

it means that i would have a function like this : VariableSymmetry ( const IntVarArgs &x, const IntArgs &inc ...) : specified variables in x are interchangeable,
but which can be applied to a Matrix and not variables or vectors.. 

an other case that i need is: where we have the following permutations of rows of a matrix ( rotation of rows):

                        row 1  row 2
                        row 2  row 3
                                     .
                                     .
                        row i   row (i+1) 
                                     .
                                     .
                       row n  row 1

These are the two forms of symmetries that i would handle with LDSB but i didn't find the symmetry declarations for this two cases.


Thank you.

Best regards. 

Sabrina.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.gecode.org/pipermail/users/attachments/20140923/fcdfb13f/attachment.html>

From cschulte at kth.se  Tue Sep 23 16:50:15 2014
From: cschulte at kth.se (Christian Schulte)
Date: Tue, 23 Sep 2014 16:50:15 +0200
Subject: [gecode-users] Strange branching behaviour when using
	FunctionBrancher
In-Reply-To: <CAGTgUnMJOLYX8E8tQwwgGYX2YN=owKba520H81LQoyNUgiXOdQ@mail.gmail.com>
References: <CAGTgUnO0a23_sopvvgjxXgVPoHjLhNXjw0Tu=X=xQDUpbEJJpA@mail.gmail.com>	<CAGTgUnOgjJHucA0tXaz3Vb_8o5WUB763EO2mVhfpi3YO_SaqLg@mail.gmail.com>	<001a01cfd727$2de85150$89b8f3f0$@se>	<CAGTgUnNZ7c=z01yH-qDr74-48yim1=uGF28WSTwAip3HaPiCNA@mail.gmail.com>
	<CAGTgUnMJOLYX8E8tQwwgGYX2YN=owKba520H81LQoyNUgiXOdQ@mail.gmail.com>
Message-ID: <007b01cfd73d$afcabcb0$0f603610$@se>

Hi Andrea,

 

What you have to do is two things, basically:

1. (as mentioned) implement a brancher yourself.

2. Information that is expensive (oe even impossible)  to re-compute you should store in  a subclass of Choice that you yourself can define. I think Chapter 19 (Section 19.4) is a nice example: there the brancher also does symmetry-breaking during search and it stores all symmetry information explicitly.

 

Cheers

Christian

 

--

Christian Schulte, Professor of Computer Science, KTH, www.gecode.org/~schulte/

 

From: Andrea Peano [mailto:andrea.peano at unife.it] 
Sent: Tuesday, September 23, 2014 2:31 PM
To: Christian Schulte
Cc: users at gecode.org
Subject: Re: [gecode-users] Strange branching behaviour when using FunctionBrancher

 

I'm sorry for multiple replies, but I want to ask this in a more general fashion.

 

Consider I planned to perform a quite burdensome heuristic in a particular point of the search (that's why I'm splitting the search).

Obviously this heuristics helps to prune the search space.

How can I be sure that this heuristic is not recomputed more and more?

 

Thanks,

Andrea Peano

 

On Tue, Sep 23, 2014 at 2:24 PM, Andrea Peano <andrea.peano at unife.it> wrote:

On Tue, Sep 23, 2014 at 2:09 PM, Christian Schulte <cschulte at kth.se> wrote:

You can disable recomputation but this is not a good idea as it degrades performance seriously and increases memory consumption considerably.

Yes, I see.

 

 

What you could do (also not good) is call status() yourself.

I'm already doing it, but this does not seem enough to prevent recomputation on those nodes. I call it within second_level and third_level but it's not enough. Do you mean somewhere else?

 

 

The real (but tough) thing to do is to implement your own brancher. 

 

And just checking: do you know that multiple branchers are executed in the order they are created? But maybe that is not enough for you.

Yes, I know, I tried to make the search as simple as possible, but there are some aspects of the problem a bit difficult to manage.

Anyway, I'll find a way.

 

Thanks for giving me a halping hand.

 

Andrea

 

 

Cheers

Christian

 

--

Christian Schulte, Professor of Computer Science, KTH, www.gecode.org/~schulte/

 

From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf Of Andrea Peano
Sent: Tuesday, September 23, 2014 2:00 PM
To: users at gecode.org
Subject: Re: [gecode-users] Strange branching behaviour when using FunctionBrancher

 

I was just reading on the Gecode guide that this behaviour is due to the "recomputation".

So I have two more questions: can I completely prevent this behaviour by disabling recomputation?

Has recomputation a direct effect on parallel search?

 

Thanks,

Andrea

 

On Tue, Sep 23, 2014 at 1:22 PM, Andrea Peano <andrea.peano at unife.it> wrote:

Hello,

 

I've implemented a search strategy by splitting the search into three levels. I think the code may explain better this strategy.

 

 

void MyModel::post(Space& home)

{

static_cast<MyModel&>(home).second_level();

}

 

void MyModel::second_level()

{

status();

 

//do something with the partial solution
//print "second level"

branch(*this, BoolBranchDirection, INT_VAL_MIN());

branch(*this, post2);

}

 

void MyModel::post2(Space& home)

{

static_cast<MyModel&>(home).third_level();

}

 

void MyModel::third_level()

{

if(BoolBranchDirection.val()==0)
{
//print third level left
//left branch behaviour (install further branches)
}
else
{
//print third level right
//right branch behaviour (install further branches)
}

}

 

Imagine now we are fixing the partial solution before the "post" calling, so the solver goes only once into the "post" function (and it's confirmed by GIST).

 

The strange fact is that "second_level" is called more than once! Instead I expect one call for "second_level" and two calls for "third_level", which executes two different paths of the code.

 

These are the prints I read:

second level

third level left

second level

third level right

second level

third level right

 

But I expected:

second level

third level left

third level right

 

Can you clarify this behaviour please?

 

Furthermore, I experienced that I need to call "status()" within the second level, to ground some variables I expected to be already ground. Is this normal?

 

I'm using Gecode 4.2.1

 

Thanks,

Andrea

 

 

-- 

 

Andrea Peano - PhD student

Department of Engineering - University of Ferrara

Tel: +39 0532 97 4827





 

-- 

 

Andrea Peano - PhD student

Department of Engineering - University of Ferrara

Tel: +39 0532 97 4827





 

-- 

 

Andrea Peano - PhD student

Department of Engineering - University of Ferrara

Tel: +39 0532 97 4827





 

-- 

 

Andrea Peano - PhD student

Department of Engineering - University of Ferrara

Tel: +39 0532 97 4827

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.gecode.org/pipermail/users/attachments/20140923/c38f9c59/attachment-0001.html>

From andrea.peano at unife.it  Tue Sep 23 16:55:26 2014
From: andrea.peano at unife.it (Andrea Peano)
Date: Tue, 23 Sep 2014 16:55:26 +0200
Subject: [gecode-users] Strange branching behaviour when using
	FunctionBrancher
In-Reply-To: <007b01cfd73d$afcabcb0$0f603610$@se>
References: <CAGTgUnO0a23_sopvvgjxXgVPoHjLhNXjw0Tu=X=xQDUpbEJJpA@mail.gmail.com>
	<CAGTgUnOgjJHucA0tXaz3Vb_8o5WUB763EO2mVhfpi3YO_SaqLg@mail.gmail.com>
	<001a01cfd727$2de85150$89b8f3f0$@se>
	<CAGTgUnNZ7c=z01yH-qDr74-48yim1=uGF28WSTwAip3HaPiCNA@mail.gmail.com>
	<CAGTgUnMJOLYX8E8tQwwgGYX2YN=owKba520H81LQoyNUgiXOdQ@mail.gmail.com>
	<007b01cfd73d$afcabcb0$0f603610$@se>
Message-ID: <CAGTgUnN2q9ou=jJf0XsMKhU+-x-_fC_v3qZd0VEZfRGEfz1_Jw@mail.gmail.com>

Thank you, this should be the perfect way!

Cheers,
Andrea

On Tue, Sep 23, 2014 at 4:50 PM, Christian Schulte <cschulte at kth.se> wrote:

> Hi Andrea,
>
>
>
> What you have to do is two things, basically:
>
> 1. (as mentioned) implement a brancher yourself.
>
> 2. Information that is expensive (oe even impossible)  to re-compute you
> should store in  a subclass of Choice that you yourself can define. I think
> Chapter 19 (Section 19.4) is a nice example: there the brancher also does
> symmetry-breaking during search and it stores all symmetry information
> explicitly.
>
>
>
> Cheers
>
> Christian
>
>
>
> --
>
> Christian Schulte, Professor of Computer Science, KTH,
> www.gecode.org/~schulte/
>
>
>
> *From:* Andrea Peano [mailto:andrea.peano at unife.it]
> *Sent:* Tuesday, September 23, 2014 2:31 PM
> *To:* Christian Schulte
> *Cc:* users at gecode.org
>
> *Subject:* Re: [gecode-users] Strange branching behaviour when using
> FunctionBrancher
>
>
>
> I'm sorry for multiple replies, but I want to ask this in a more general
> fashion.
>
>
>
> Consider I planned to perform a quite burdensome heuristic in a particular
> point of the search (that's why I'm splitting the search).
>
> Obviously this heuristics helps to prune the search space.
>
> How can I be sure that this heuristic is not recomputed more and more?
>
>
>
> Thanks,
>
> Andrea Peano
>
>
>
> On Tue, Sep 23, 2014 at 2:24 PM, Andrea Peano <andrea.peano at unife.it>
> wrote:
>
> On Tue, Sep 23, 2014 at 2:09 PM, Christian Schulte <cschulte at kth.se>
> wrote:
>
> You can disable recomputation but this is not a good idea as it degrades
> performance seriously and increases memory consumption considerably.
>
> Yes, I see.
>
>
>
>
>
> What you could do (also not good) is call status() yourself.
>
> I'm already doing it, but this does not seem enough to prevent
> recomputation on those nodes. I call it within second_level and third_level
> but it's not enough. Do you mean somewhere else?
>
>
>
>
>
> The real (but tough) thing to do is to implement your own brancher.
>
>
>
> And just checking: do you know that multiple branchers are executed in the
> order they are created? But maybe that is not enough for you.
>
> Yes, I know, I tried to make the search as simple as possible, but there
> are some aspects of the problem a bit difficult to manage.
>
> Anyway, I'll find a way.
>
>
>
> Thanks for giving me a halping hand.
>
>
>
> Andrea
>
>
>
>
>
> Cheers
>
> Christian
>
>
>
> --
>
> Christian Schulte, Professor of Computer Science, KTH,
> www.gecode.org/~schulte/
>
>
>
> *From:* users-bounces at gecode.org [mailto:users-bounces at gecode.org] *On
> Behalf Of *Andrea Peano
> *Sent:* Tuesday, September 23, 2014 2:00 PM
> *To:* users at gecode.org
> *Subject:* Re: [gecode-users] Strange branching behaviour when using
> FunctionBrancher
>
>
>
> I was just reading on the Gecode guide that this behaviour is due to the
> "recomputation".
>
> So I have two more questions: can I completely prevent this behaviour by
> disabling recomputation?
>
> Has recomputation a direct effect on parallel search?
>
>
>
> Thanks,
>
> Andrea
>
>
>
> On Tue, Sep 23, 2014 at 1:22 PM, Andrea Peano <andrea.peano at unife.it>
> wrote:
>
> Hello,
>
>
>
> I've implemented a search strategy by splitting the search into three
> levels. I think the code may explain better this strategy.
>
>
>
>
>
> void MyModel::post(Space& home)
>
> {
>
> static_cast<MyModel&>(home).second_level();
>
> }
>
>
>
> void MyModel::second_level()
>
> {
>
> status();
>
>
>
> //do something with the partial solution
> //print "second level"
>
> branch(*this, BoolBranchDirection, INT_VAL_MIN());
>
> branch(*this, post2);
>
> }
>
>
>
> void MyModel::post2(Space& home)
>
> {
>
> static_cast<MyModel&>(home).third_level();
>
> }
>
>
>
> void MyModel::third_level()
>
> {
>
> if(BoolBranchDirection.val()==0)
> {
> //print third level left
> //left branch behaviour (install further branches)
> }
> else
> {
> //print third level right
> //right branch behaviour (install further branches)
> }
>
> }
>
>
>
> Imagine now we are fixing the partial solution before the "post" calling,
> so the solver goes only once into the "post" function (and it's confirmed
> by GIST).
>
>
>
> The strange fact is that "second_level" is called more than once! Instead
> I expect one call for "second_level" and two calls for "third_level", which
> executes two different paths of the code.
>
>
>
> These are the prints I read:
>
> second level
>
> third level left
>
> second level
>
> third level right
>
> second level
>
> third level right
>
>
>
> But I expected:
>
> second level
>
> third level left
>
> third level right
>
>
>
> Can you clarify this behaviour please?
>
>
>
> Furthermore, I experienced that I need to call "status()" within the
> second level, to ground some variables I expected to be already ground. Is
> this normal?
>
>
>
> I'm using Gecode 4.2.1
>
>
>
> Thanks,
>
> Andrea
>
>
>
>
>
> --
>
>
>
> Andrea Peano - PhD student
>
> Department of Engineering - University of Ferrara
>
> Tel: +39 0532 97 4827
>
>
>
>
>
> --
>
>
>
> Andrea Peano - PhD student
>
> Department of Engineering - University of Ferrara
>
> Tel: +39 0532 97 4827
>
>
>
>
>
> --
>
>
>
> Andrea Peano - PhD student
>
> Department of Engineering - University of Ferrara
>
> Tel: +39 0532 97 4827
>
>
>
>
>
> --
>
>
>
> Andrea Peano - PhD student
>
> Department of Engineering - University of Ferrara
>
> Tel: +39 0532 97 4827
>



-- 

Andrea Peano - PhD student
Department of Engineering - University of Ferrara
Tel: +39 0532 97 4827
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.gecode.org/pipermail/users/attachments/20140923/24d84bae/attachment.html>

From genius_linda1987 at yahoo.fr  Tue Sep 23 17:12:17 2014
From: genius_linda1987 at yahoo.fr (Bouchene Sabrina)
Date: Tue, 23 Sep 2014 16:12:17 +0100
Subject: [gecode-users] Breaking symmetries with LDSB in Matrix Model.
Message-ID: <1411485137.98041.YahooMailNeo@web171404.mail.ir2.yahoo.com>

Hi,

I would break symmetries from a probleme with the LDSB layer, i model a probleme with a Matrix, so i have found in the manual of Gecode these Symmetry declarations to break symmetries for matrix Model:

       rows-interchange : to specify that a rows of the matrix are interchangeable, and
       column-interchange : to specify that a columns of the matrix are interchangeable, 

But in my problem i need functions for breaking only specified rows or specified columns that are interchangeable, for example : rows 4 and 7 of the matrix are interchangeable, or for example: column 2 and 5 only are interchangeable and not all rows are interchangeable and not all columns are interchangeable.

it means that i would have a function like this : VariableSymmetry ( const IntVarArgs &x, const IntArgs &inc ...) : specified variables in x are interchangeable,
but which can be applied to a Matrix and not variables or vectors.. 

an other case that i need is: where we have the following permutations of rows of a matrix ( rotation of rows):

                        row 1   takes the content of   row 2
                        row 2   takes the content of   row 3
                                                      .
                                                      .
                        row i     takes the content of   row (i+1) 
                                                      .
                                                      .
                       row n     takes the content of   row 1

These are the two forms of symmetries that i would handle with LDSB but i didn't find the symmetry declarations for this two cases.


Thank you.

Best regards. 

Sabrina.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.gecode.org/pipermail/users/attachments/20140923/315d1416/attachment-0001.html>

From chris.mears at monash.edu  Wed Sep 24 03:15:15 2014
From: chris.mears at monash.edu (Chris Mears)
Date: Wed, 24 Sep 2014 11:15:15 +1000
Subject: [gecode-users] Breaking symmetries with LDSB in Matrix Model.
In-Reply-To: <1411485137.98041.YahooMailNeo@web171404.mail.ir2.yahoo.com>
References: <1411485137.98041.YahooMailNeo@web171404.mail.ir2.yahoo.com>
Message-ID: <20140924111515.3f3aaa0f@boxer>

> But in my problem i need functions for breaking only specified rows
> or specified columns that are interchangeable, for example : rows 4
> and 7 of the matrix are interchangeable, or for example: column 2 and
> 5 only are interchangeable and not all rows are interchangeable and
> not all columns are interchangeable.

Here is how you might interchange only two rows of a matrix.  I took
the BIBD example and kept only the row-sum and column-sum constraints:

  BIBD(const BIBDOptions& o)
    : opt(o), _p(*this,opt.rows*opt.cols,0,1) {
    Matrix<BoolVarArray> p(_p,opt.cols,opt.rows);

    // r ones per row
    for (int i=0; i<opt.rows; i++)
      linear(*this, p.row(i), IRT_EQ, opt.r);

    // k ones per column
    for (int j=0; j<opt.cols; j++)
      linear(*this, p.col(j), IRT_EQ, opt.k);

For a 3x3 matrix with 1 one per row and column, this has 6 solutions:

		1 0 0 
		0 1 0 
		0 0 1 

		1 0 0 
		0 0 1 
		0 1 0 

		0 1 0 
		1 0 0 
		0 0 1 

		0 1 0 
		0 0 1 
		1 0 0 

		0 0 1 
		1 0 0 
		0 1 0 

		0 0 1 
		0 1 0 
		1 0 0 


Then I put the first row and second row in a BoolVarArgs object and
give it as a variable sequence symmetry:

    Symmetries s;
    BoolVarArgs a2;
    a2 << p.row(0);
    a2 << p.row(1);
    s << VariableSequenceSymmetry(a2, opt.cols);

Now there are only three solutions:

		1 0 0 
		0 1 0 
		0 0 1 

		1 0 0 
		0 0 1 
		0 1 0 

		0 1 0 
		0 0 1 
		1 0 0 

> an other case that i need is: where we have the following
> permutations of rows of a matrix ( rotation of rows):
> 
>                         row 1   takes the content of   row 2
>                         row 2   takes the content of   row 3
>                                                       .
>                                                       .
>                         row i     takes the content of   row (i+1) 
>                                                       .
>                                                       .
>                        row n     takes the content of   row 1

For this case you can do something similar:

    BoolVarArgs a;
    for (int i = 0 ; i < opt.rows ; i++) {
      a << p.row(i);
    }
    for (int i = 0 ; i < opt.rows ; i++) {
      a << p.row((i+1)%opt.rows);
    }
    s << VariableSequenceSymmetry(a, opt.rows*opt.cols);

Now there are only two solutions:

		1 0 0 
		0 1 0 
		0 0 1 

		1 0 0 
		0 0 1 
		0 1 0 

The two symmetries could be combined too.

Note that the number of solutions found can depend on the search order;
if you do the same exercise with INT_VAL_MIN instead of MAX, you'll get
different results.


From medistif at hotmail.fr  Mon Sep 29 10:08:31 2014
From: medistif at hotmail.fr (mehdi m)
Date: Mon, 29 Sep 2014 08:08:31 +0000
Subject: [gecode-users] Classify the solutions
Message-ID: <DUB119-W13BE6CCEBBB62694BDC085B7BA0@phx.gbl>

Hello, i'm building a model , and the solutions are vectors like this "3 5 9 4 7", i have an constraint that express the sum of the vectors must to be > than an threshold M. My question is can i add an constraint or any parameter to tell to gecode : the solutions returned must be ordered according to a criterion, for example from the smallest to the largest sum. Thank you for your help 		 	   		  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.gecode.org/pipermail/users/attachments/20140929/41723c66/attachment.html>

From cschulte at kth.se  Mon Sep 29 10:43:12 2014
From: cschulte at kth.se (Christian Schulte)
Date: Mon, 29 Sep 2014 10:43:12 +0200
Subject: [gecode-users] Classify the solutions
In-Reply-To: <DUB119-W13BE6CCEBBB62694BDC085B7BA0@phx.gbl>
References: <DUB119-W13BE6CCEBBB62694BDC085B7BA0@phx.gbl>
Message-ID: <00f201cfdbc1$67ab14b0$37013e10$@se>

Hi,

 

What you could do is adding a "sum" variable and branch over the variable so
that values are tried in increasing order. Then the solutions will be found
in that order.

 

Best

Christian

 

--

Christian Schulte, Professor of Computer Science, KTH,
www.gecode.org/~schulte/

 

From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf
Of mehdi m
Sent: Monday, September 29, 2014 10:09 AM
To: users at gecode.org
Subject: [gecode-users] Classify the solutions

 

Hello, 

i'm building a model , and the solutions are vectors like this "3 5 9 4 7",
i have an constraint that express the sum of the vectors must to be > than
an threshold M. 

My question is can i add an constraint or any parameter to tell to gecode :
the solutions returned must be ordered according to a criterion, for example
from the smallest to the largest sum.

 

Thank you for your help

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.gecode.org/pipermail/users/attachments/20140929/81aedadf/attachment.html>

From medistif at hotmail.fr  Mon Sep 29 11:04:59 2014
From: medistif at hotmail.fr (mehdi m)
Date: Mon, 29 Sep 2014 09:04:59 +0000
Subject: [gecode-users] Classify the solutions
In-Reply-To: <00f201cfdbc1$67ab14b0$37013e10$@se>
References: <DUB119-W13BE6CCEBBB62694BDC085B7BA0@phx.gbl>,
	<00f201cfdbc1$67ab14b0$37013e10$@se>
Message-ID: <DUB119-W82F616C8BBE0F67BF082EB7BA0@phx.gbl>

Hi,
How can i branch the "sum" variable over the variable that represent the vector of solutions ?
Thanks.

From: cschulte at kth.se
To: medistif at hotmail.fr; users at gecode.org
Subject: RE: [gecode-users] Classify the solutions
Date: Mon, 29 Sep 2014 10:43:12 +0200

Hi, What you could do is adding a "sum" variable and branch over the variable so that values are tried in increasing order. Then the solutions will be found in that order. BestChristian --Christian Schulte, Professor of Computer Science, KTH, www.gecode.org/~schulte/ From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf Of mehdi m
Sent: Monday, September 29, 2014 10:09 AM
To: users at gecode.org
Subject: [gecode-users] Classify the solutions Hello, i'm building a model , and the solutions are vectors like this "3 5 9 4 7", i have an constraint that express the sum of the vectors must to be > than an threshold M. My question is can i add an constraint or any parameter to tell to gecode : the solutions returned must be ordered according to a criterion, for example from the smallest to the largest sum. Thank you for your help 		 	   		  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.gecode.org/pipermail/users/attachments/20140929/64c5faa0/attachment.html>

From cschulte at kth.se  Mon Sep 29 11:06:12 2014
From: cschulte at kth.se (Christian Schulte)
Date: Mon, 29 Sep 2014 11:06:12 +0200
Subject: [gecode-users] Classify the solutions
In-Reply-To: <DUB119-W82F616C8BBE0F67BF082EB7BA0@phx.gbl>
References: <DUB119-W13BE6CCEBBB62694BDC085B7BA0@phx.gbl>,
	<00f201cfdbc1$67ab14b0$37013e10$@se>
	<DUB119-W82F616C8BBE0F67BF082EB7BA0@phx.gbl>
Message-ID: <011301cfdbc4$9e147ed0$da3d7c70$@se>

Please read about branchers in MPG: they are used in the order in which they
are posted.

 

Christian

 

--

Christian Schulte, Professor of Computer Science, KTH,
www.gecode.org/~schulte/

 

From: mehdi m [mailto:medistif at hotmail.fr] 
Sent: Monday, September 29, 2014 11:05 AM
To: users at gecode.org; cschulte at kth.se
Subject: RE: [gecode-users] Classify the solutions

 

Hi,

 

How can i branch the "sum" variable over the variable that represent the
vector of solutions ?

 

Thanks.

  _____  

From: cschulte at kth.se
To: medistif at hotmail.fr; users at gecode.org
Subject: RE: [gecode-users] Classify the solutions
Date: Mon, 29 Sep 2014 10:43:12 +0200

Hi,

 

What you could do is adding a "sum" variable and branch over the variable so
that values are tried in increasing order. Then the solutions will be found
in that order.

 

Best

Christian

 

--

Christian Schulte, Professor of Computer Science, KTH,
www.gecode.org/~schulte/

 

From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf
Of mehdi m
Sent: Monday, September 29, 2014 10:09 AM
To: users at gecode.org
Subject: [gecode-users] Classify the solutions

 

Hello, 

i'm building a model , and the solutions are vectors like this "3 5 9 4 7",
i have an constraint that express the sum of the vectors must to be > than
an threshold M. 

My question is can i add an constraint or any parameter to tell to gecode :
the solutions returned must be ordered according to a criterion, for example
from the smallest to the largest sum.

 

Thank you for your help

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.gecode.org/pipermail/users/attachments/20140929/e96173f1/attachment-0001.html>

From genius_linda1987 at yahoo.fr  Mon Sep 29 11:29:33 2014
From: genius_linda1987 at yahoo.fr (Bouchene Sabrina)
Date: Mon, 29 Sep 2014 10:29:33 +0100
Subject: [gecode-users] Breaking symmetries with LDSB in Matrix model.
Message-ID: <1411982973.56769.YahooMailNeo@web171402.mail.ir2.yahoo.com>

Thank you sir, 

I have an other question in the same context :

A/ So, if i have understand, i can do the same thing with reflection of columns in Matrix model as follow:

Symmetries s;

BoolVarArgs a; for (int i = 0 ; i < (opt.cols/2-1); i++) { a << p.col(i); } for (int i = (opt.col-1) ; i >= opt.col/2 ; i--) { a << p.col(i); } s << VariableSequenceSymmetry(a, opt.cols*opt.rows); 
if this part of code is correct so his effect is aquivalent to this function of Gecode: columns_reflect(): to specify that a matrix's columns can be reflected.
B/ an other question please about combination of symmetries:
suppose th probleme have the symmetric groupe Gn = Dn*Z2 /
- Dn: Consist on n rotation of rows of the Matrix ( the second form of      symmetry described in my first question (first email)) and n  permutations of specified rows or specified columns of the Matrix (the first form of symmetry described in my first email).
- Z2 = {id, rev}= {+1, -1}. id = +1, rev = -1./ rev represent the possibility of reflection of columns of the Matrix. ( it is the form of symmetry described in this email in A.
So my question is: How to do this combinaition ? how to post the combinaition of this 3 forms of symmetries in the branch function, i must post eatch one independently or in the same time. it means in general, hox post this forms of combinaition: example:
Combination 1 = Sym a + Sym b.
Combination 2 = Sym a * Sym b.
I hope that my question was clear.
Thank you.

Best regards.
Sabrina. 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.gecode.org/pipermail/users/attachments/20140929/628a01aa/attachment.html>

