<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [gecode-users] unsigned 32bit representation, additions
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:users%40gecode.org?Subject=Re%3A%20%5Bgecode-users%5D%20unsigned%2032bit%20representation%2C%20additions&In-Reply-To=%3CCADdNPDYhLQNW_Qeg7rL%2BTgsuopUiTWyX4TB1p2Sx3_PV5KaXDQ%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004645.html">
   <LINK REL="Next"  HREF="004647.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[gecode-users] unsigned 32bit representation, additions</H1>
    <B>Serg Buslovsky</B> 
    <A HREF="mailto:users%40gecode.org?Subject=Re%3A%20%5Bgecode-users%5D%20unsigned%2032bit%20representation%2C%20additions&In-Reply-To=%3CCADdNPDYhLQNW_Qeg7rL%2BTgsuopUiTWyX4TB1p2Sx3_PV5KaXDQ%40mail.gmail.com%3E"
       TITLE="[gecode-users] unsigned 32bit representation, additions">serg.buslovsky at gmail.com
       </A><BR>
    <I>Wed Mar 11 19:23:13 CET 2015</I>
    <P><UL>
        <LI>Previous message: <A HREF="004645.html">[gecode-users] unsigned 32bit representation, additions
</A></li>
        <LI>Next message: <A HREF="004647.html">[gecode-users] unsigned 32bit representation, additions
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4646">[ date ]</a>
              <a href="thread.html#4646">[ thread ]</a>
              <a href="subject.html#4646">[ subject ]</a>
              <a href="author.html#4646">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Group,

This is helpful, thank you.
I'll take a look at Kellen Dye's work and L. D. Michel and P. Van
Hentenryck paper.


Thanks,
Serg

On Wed, Mar 11, 2015 at 8:13 AM Jean-No&#235;l Monette &lt;
<A HREF="http://www.gecode.org/cgi-bin/mailman/listinfo/users">jean-noel.monette at it.uu.se</A>&gt; wrote:

&gt;<i>  Hi Serg,
</I>&gt;<i>
</I>&gt;<i> Kellen Dye implemented a Bit-Vector domain implementation for Gecode for
</I>&gt;<i> his master thesis. You can find his thesis at
</I>&gt;<i>
</I>&gt;<i> <A HREF="http://uu.diva-portal.org/smash/record.jsf?pid=diva2%3A761927&amp;dswid=8488">http://uu.diva-portal.org/smash/record.jsf?pid=diva2%3A761927&amp;dswid=8488</A>
</I>&gt;<i>
</I>&gt;<i> and the source-code at
</I>&gt;<i>
</I>&gt;<i> <A HREF="https://github.com/kellen/bitvector-masters">https://github.com/kellen/bitvector-masters</A>
</I>&gt;<i>
</I>&gt;<i> He did not implement the addition constraint but the paper on which he
</I>&gt;<i> based his implementation gives an algorithm for the addition:
</I>&gt;<i>
</I>&gt;<i> L. D. Michel and P. Van Hentenryck. *Constraint* *Satisfaction* *over*
</I>&gt;<i> *Bit-Vectors*.
</I>&gt;<i> <A HREF="http://link.springer.com/chapter/10.1007/978-3-642-33558-7_39">http://link.springer.com/chapter/10.1007/978-3-642-33558-7_39</A>
</I>&gt;<i>
</I>&gt;<i> Best,
</I>&gt;<i>
</I>&gt;<i> Jean-No&#235;l
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> On 2015-03-11 10:17, Christian Schulte wrote:
</I>&gt;<i>
</I>&gt;<i>  Hi Serg,
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> For the time being there is not much that you can do about this. And
</I>&gt;<i> Gecode cannot be easily recompiled using unsigned ints (or 64 bit integers
</I>&gt;<i> for that matter). I think some people have been experimenting with
</I>&gt;<i> arbitrary precision integers as well as bit vectors but I do not know how
</I>&gt;<i> far that got. Anybody?
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Best
</I>&gt;<i>
</I>&gt;<i> Christian
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i>
</I>&gt;<i> Christian Schulte, www.gecode.org/~schulte
</I>&gt;<i>
</I>&gt;<i> Professor of Computer Science, KTH, <A HREF="http://www.gecode.org/cgi-bin/mailman/listinfo/users">cschulte at kth.se</A>
</I>&gt;<i>
</I>&gt;<i> Expert Researcher, SICS, <A HREF="http://www.gecode.org/cgi-bin/mailman/listinfo/users">cschulte at sics.se</A>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> *From:* <A HREF="http://www.gecode.org/cgi-bin/mailman/listinfo/users">users-bounces at gecode.org</A> [mailto:<A HREF="http://www.gecode.org/cgi-bin/mailman/listinfo/users">users-bounces at gecode.org</A>
</I>&gt;<i> &lt;<A HREF="http://www.gecode.org/cgi-bin/mailman/listinfo/users">users-bounces at gecode.org</A>&gt;] *On Behalf Of *Serg Buslovsky
</I>&gt;<i> *Sent:* Wednesday, March 11, 2015 6:54 AM
</I>&gt;<i> *To:* <A HREF="http://www.gecode.org/cgi-bin/mailman/listinfo/users">users at gecode.org</A>
</I>&gt;<i> *Subject:* [gecode-users] unsigned 32bit representation, additions
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Hi Group,
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> I'm thinking about the ways of implementing 32bit unsigned integer
</I>&gt;<i> representations in gecode model.
</I>&gt;<i>
</I>&gt;<i> So I have 32 BoolVar's per uint32 representation, which are used to store
</I>&gt;<i> corresponding bits, then I can easily define bitwise operations on
</I>&gt;<i> &quot;integers&quot; by posting relation constraints on the bits.
</I>&gt;<i>
</I>&gt;<i> The problem is with the addition.
</I>&gt;<i>
</I>&gt;<i> My first approach was to add an IntVar, post linear constraints with
</I>&gt;<i> powers of 2 as coefficients to reconstruct integer from bits, however
</I>&gt;<i> gecode limits IntVar into signed int bounds and it doesn't fit.
</I>&gt;<i>
</I>&gt;<i> The second approach was to just implement binary addition:
</I>&gt;<i>
</I>&gt;<i>             bool lsb = true;
</I>&gt;<i>
</I>&gt;<i>             for (int i=(INT_BITS-1); i&gt;=0; i--) {
</I>&gt;<i>
</I>&gt;<i>                         BoolVarArgs bits;
</I>&gt;<i>
</I>&gt;<i>                         bits &lt;&lt; bools[i] &lt;&lt; x-&gt;bools[i];
</I>&gt;<i>
</I>&gt;<i>                         if (!lsb) {
</I>&gt;<i>
</I>&gt;<i>                                     bits &lt;&lt; result-&gt;bools[INT_BITS+i+1];
</I>&gt;<i>
</I>&gt;<i>                         }
</I>&gt;<i>
</I>&gt;<i>                         rel(*model, BOT_XOR, bits, result-&gt;bools[i]);
</I>&gt;<i>
</I>&gt;<i>                         if (lsb) {
</I>&gt;<i>
</I>&gt;<i>                                     rel(*model, BOT_AND, bits,
</I>&gt;<i> result-&gt;bools[INT_BITS+i]);
</I>&gt;<i>
</I>&gt;<i>                                     lsb = false;
</I>&gt;<i>
</I>&gt;<i>                         } else {
</I>&gt;<i>
</I>&gt;<i>                                     linear(*model, bits, IRT_GQ, 2,
</I>&gt;<i> result-&gt;bools[INT_BITS+i]);
</I>&gt;<i>
</I>&gt;<i>                         }
</I>&gt;<i>
</I>&gt;<i>             }
</I>&gt;<i>
</I>&gt;<i> (bools[i] - bits of the first &quot;integer&quot;, x-&gt;bools[i] - bits of the second
</I>&gt;<i> &quot;integer&quot;, result-&gt;bools[i] - bits of the resulting &quot;integer&quot;,
</I>&gt;<i> result-&gt;bools[INT_BITS+i] - carry bits)
</I>&gt;<i>
</I>&gt;<i> That works but it turned out to be very inefficient in practice,
</I>&gt;<i> complexity of the model is growing exponentially with this approach.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Any thoughts? Maybe there's a way to recompile gecode to use unsigned int
</I>&gt;<i> internally? Maybe there are ideas on better implementation of addition?
</I>&gt;<i> Maybe just some suggestion on another tool which uses unsigned ints
</I>&gt;<i> internally?
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Thanks,
</I>&gt;<i>
</I>&gt;<i> Serg
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Gecode users mailing <A HREF="http://www.gecode.org/cgi-bin/mailman/listinfo/users">listusers at gecode.orghttps</A>://www.gecode.org/mailman/listinfo/gecode-users
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>  _______________________________________________
</I>&gt;<i> Gecode users mailing list
</I>&gt;<i> <A HREF="http://www.gecode.org/cgi-bin/mailman/listinfo/users">users at gecode.org</A>
</I>&gt;<i> <A HREF="https://www.gecode.org/mailman/listinfo/gecode-users">https://www.gecode.org/mailman/listinfo/gecode-users</A>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://www.gecode.org/pipermail/users/attachments/20150311/c8540b9f/attachment-0001.html">http://www.gecode.org/pipermail/users/attachments/20150311/c8540b9f/attachment-0001.html</A>&gt;
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004645.html">[gecode-users] unsigned 32bit representation, additions
</A></li>
	<LI>Next message: <A HREF="004647.html">[gecode-users] unsigned 32bit representation, additions
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4646">[ date ]</a>
              <a href="thread.html#4646">[ thread ]</a>
              <a href="subject.html#4646">[ subject ]</a>
              <a href="author.html#4646">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.gecode.org/cgi-bin/mailman/listinfo/users">More information about the users
mailing list</a><br>
</body></html>
