From cschulte at kth.se  Mon Aug  8 15:54:02 2016
From: cschulte at kth.se (Christian Schulte)
Date: Mon, 8 Aug 2016 15:54:02 +0200
Subject: [gecode-users] scheduling problem, tow branchers,
	order of branching
In-Reply-To: <CAKWAxkZ0YCYWWU+b_VpbQJ4g6_3=M8MQrhxQnQN7nMDv7VrqCA@mail.gmail.com>
References: <CAKWAxkZ0YCYWWU+b_VpbQJ4g6_3=M8MQrhxQnQN7nMDv7VrqCA@mail.gmail.com>
Message-ID: <00c701d1f17c$52304970$f690dc50$@kth.se>

Hi,

 

Sorry for the delay ? summer holidays?

 

I think you will have to implement a brancher yourself, as described in Part B of MPG.

 

However, if you already know the order in which you want to branch (your example suggests that)( you can do the following which is not super-efficient but should work:

 

for (int i=0; i? maxtasks; i++) {

  branch(*this, QuantityTask[i], INT_VAL_MIN());

  assign(*this, WorkTimeTask[i], SET_ASSIGN_MIN_INC());

}

 

This creates a whole bunch of branchers run in order of creation, please read Section 8.1.

 

Cheers

Christian

 

--

Christian Schulte, www.gecode.org/~schulte

Professor of Computer Science, KTH,  <mailto:cschulte at kth.se> cschulte at kth.se

Expert Researcher, SICS,  <mailto:cschulte at sics.se> cschulte at sics.se

 

From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf Of Wu Shaowei
Sent: Friday, July 29, 2016 12:18
To: users at gecode.org
Subject: [gecode-users] scheduling problem, tow branchers, order of branching

 

Hi to everyone on the ML,
I am working on a scheduling problem,I have two variable array:
IntVarArray QuantityTask;
SetVarArray WorkTimeTask;
 
ant two branchers:
branch(*this,QuantityTask,INT_VAR_NONE(),INT_VAL_MIN());
assign(*this,WorkTimeTask,SET_ASSIGN_MIN_INC());
 
Asume I have 2 tasks, Gecode's default enumration order is:
(branch)QuantityTask[0]-->(branch)QuantityTask[1]-->(assign)WorkTimeTak[0]-->(assign)WorkTimeTask[1],
how can I achieve this:
(branch)QuantityTask[0]-->(assign)WorkTimeTak[0]-->(branch)QuantityTask[1]-->(assign)WorkTimeTask[1]
 
I have read MPG 8.14 Executing code between branchers,
and http://www.gecode.org/pipermail/users/2015-April/004669.html,
but has not a clue.
 
Thank you!
Best,
Wu Shaowei
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.gecode.org/pipermail/users/attachments/20160808/749a08aa/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 4623 bytes
Desc: not available
URL: <http://www.gecode.org/pipermail/users/attachments/20160808/749a08aa/attachment.bin>

From yunusacikoz at gmail.com  Mon Aug  8 16:23:17 2016
From: yunusacikoz at gmail.com (Yunus Acikoz)
Date: Mon, 8 Aug 2016 17:23:17 +0300
Subject: [gecode-users] Strange Error Concerning Memory
Message-ID: <CAGSNhThOg-CBFbJjrwc7DnBF2ARPQNAwj=SZ-VG-zdmaLbiQ5w@mail.gmail.com>

Hello,

I've implemented a model that is derived from Gecode::IntMinimizeSpace. The
model contains a propagator which is derived from Gecode::Propagator. My
propagator holds four integer ViewArrays, each having around 15000 views.
And each view in three of these arrays is assigned an advisor which is
derived from Gecode::Advisor (making approximately 45000 advisors in
total). This propagator also holds two integer vectors of size 15000 which
I am using as labels in propagation. These two vectors are allocated from
Gecode space. This little information might give an idea about the problem
size.

At some point while solving the model with the BAB search engine, an
exception is thrown and stack trace only points to the Gecode dll and
nothing more. I used Microsoft's Application Verifier tool, it gives the
following output:


                <avrf:logEntry Time="2016-08-05 : 10:44:39"
LayerName="Exceptions" StopCode="0x650" Severity="Error">
<avrf:message>Attempt to execute code in non-executable memory (first
chance).</avrf:message>
<avrf:parameter1>24c4ab54e88 - Address being accessed.</avrf:parameter1>
<avrf:parameter2>24c4ab54e88 - Code performing invalid
access.</avrf:parameter2>
<avrf:parameter3>fde92fe1f0 - Exception record. Use .exr to display
it.</avrf:parameter3>
<avrf:parameter4>fde92fdd00 - Context record. Use .cxr to display
it.</avrf:parameter4>
<avrf:stackTrace>
<avrf:trace>vfbasics!+7ffab0f981b2 ( @ 0)</avrf:trace>
<avrf:trace>vfbasics!+7ffab0f9787e ( @ 0)</avrf:trace>
<avrf:trace>ntdll!MD5Update+a43 ( @ 0)</avrf:trace>
<avrf:trace>ntdll!RtlImageNtHeaderEx+17b ( @ 0)</avrf:trace>
<avrf:trace>ntdll!KiUserExceptionDispatcher+3a ( @ 0)</avrf:trace>
<avrf:trace>????????+0000024C4AB54E88</avrf:trace>
</avrf:stackTrace>
</avrf:logEntry>



I don't expect any detailed answer with this much information, but maybe
you can tell me where to look or what kind of mistake I should look for in
my code. Because I don't have any idea about what may be causing this.

Thanks,
Yunus Acikoz
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.gecode.org/pipermail/users/attachments/20160808/1b610e5c/attachment-0001.html>

From cschulte at kth.se  Mon Aug  8 16:28:47 2016
From: cschulte at kth.se (Christian Schulte)
Date: Mon, 8 Aug 2016 16:28:47 +0200
Subject: [gecode-users] Strange Error Concerning Memory
In-Reply-To: <CAGSNhThOg-CBFbJjrwc7DnBF2ARPQNAwj=SZ-VG-zdmaLbiQ5w@mail.gmail.com>
References: <CAGSNhThOg-CBFbJjrwc7DnBF2ARPQNAwj=SZ-VG-zdmaLbiQ5w@mail.gmail.com>
Message-ID: <010b01d1f181$2d0bfa90$8723efb0$@kth.se>

Hi Yunus,

 

Really no idea. But what you could do: compile your application in Debugmode (that?s why the Gecode packages also contain debug variants of its dlls) and let it run under the Microsoft debugger. Please make sure that the debugger picks up the pdb symbol files (it should by default).

 

At least you should see more with that!

 

Cheers

Christian

 

--

Christian Schulte, www.gecode.org/~schulte

Professor of Computer Science, KTH, cschulte at kth.se

Expert Researcher, SICS, cschulte at sics.se

 

From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf Of Yunus Acikoz
Sent: Monday, August 8, 2016 16:23
To: users at gecode.org
Subject: [gecode-users] Strange Error Concerning Memory

 

Hello,

 

I've implemented a model that is derived from Gecode::IntMinimizeSpace. The model contains a propagator which is derived from Gecode::Propagator. My propagator holds four integer ViewArrays, each having around 15000 views. And each view in three of these arrays is assigned an advisor which is derived from Gecode::Advisor (making approximately 45000 advisors in total). This propagator also holds two integer vectors of size 15000 which I am using as labels in propagation. These two vectors are allocated from Gecode space. This little information might give an idea about the problem size.

 

At some point while solving the model with the BAB search engine, an exception is thrown and stack trace only points to the Gecode dll and nothing more. I used Microsoft's Application Verifier tool, it gives the following output:

 

 

                <avrf:logEntry Time="2016-08-05 : 10:44:39" LayerName="Exceptions" StopCode="0x650" Severity="Error">

<avrf:message>Attempt to execute code in non-executable memory (first chance).</avrf:message>

<avrf:parameter1>24c4ab54e88 - Address being accessed.</avrf:parameter1>

<avrf:parameter2>24c4ab54e88 - Code performing invalid access.</avrf:parameter2>

<avrf:parameter3>fde92fe1f0 - Exception record. Use .exr to display it.</avrf:parameter3>

<avrf:parameter4>fde92fdd00 - Context record. Use .cxr to display it.</avrf:parameter4>

<avrf:stackTrace>

<avrf:trace>vfbasics!+7ffab0f981b2 ( @ 0)</avrf:trace>

<avrf:trace>vfbasics!+7ffab0f9787e ( @ 0)</avrf:trace>

<avrf:trace>ntdll!MD5Update+a43 ( @ 0)</avrf:trace>

<avrf:trace>ntdll!RtlImageNtHeaderEx+17b ( @ 0)</avrf:trace>

<avrf:trace>ntdll!KiUserExceptionDispatcher+3a ( @ 0)</avrf:trace>

<avrf:trace>????????+0000024C4AB54E88</avrf:trace>

</avrf:stackTrace>

</avrf:logEntry>

 

 

 

I don't expect any detailed answer with this much information, but maybe you can tell me where to look or what kind of mistake I should look for in my code. Because I don't have any idea about what may be causing this.

 

Thanks,

Yunus Acikoz

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.gecode.org/pipermail/users/attachments/20160808/ea25bbfb/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 4623 bytes
Desc: not available
URL: <http://www.gecode.org/pipermail/users/attachments/20160808/ea25bbfb/attachment.bin>

From yunusacikoz at gmail.com  Tue Aug  9 10:01:02 2016
From: yunusacikoz at gmail.com (Yunus Acikoz)
Date: Tue, 9 Aug 2016 11:01:02 +0300
Subject: [gecode-users] Strange Error Concerning Memory
In-Reply-To: <010b01d1f181$2d0bfa90$8723efb0$@kth.se>
References: <CAGSNhThOg-CBFbJjrwc7DnBF2ARPQNAwj=SZ-VG-zdmaLbiQ5w@mail.gmail.com>
	<010b01d1f181$2d0bfa90$8723efb0$@kth.se>
Message-ID: <CAGSNhTiGk2E611rZKwNuNnFekJRcdo04DBbg9u2fb5X=8527HA@mail.gmail.com>

Hi Christian,

I can't compile in debug mode because of some other library (OR-tools) I'm
using. Instead I compile in RelWithDebInfo. Thanks anyway. I'll see if I
can provide more information later.

Thanks,
Yunus Acikoz

On Mon, Aug 8, 2016 at 5:28 PM, Christian Schulte <cschulte at kth.se> wrote:

> Hi Yunus,
>
>
>
> Really no idea. But what you could do: compile your application in
> Debugmode (that?s why the Gecode packages also contain debug variants of
> its dlls) and let it run under the Microsoft debugger. Please make sure
> that the debugger picks up the pdb symbol files (it should by default).
>
>
>
> At least you should see more with that!
>
>
>
> Cheers
>
> Christian
>
>
>
> --
>
> Christian Schulte, www.gecode.org/~schulte
>
> Professor of Computer Science, KTH, cschulte at kth.se
>
> Expert Researcher, SICS, cschulte at sics.se
>
>
>
> *From:* users-bounces at gecode.org [mailto:users-bounces at gecode.org] *On
> Behalf Of *Yunus Acikoz
> *Sent:* Monday, August 8, 2016 16:23
> *To:* users at gecode.org
> *Subject:* [gecode-users] Strange Error Concerning Memory
>
>
>
> Hello,
>
>
>
> I've implemented a model that is derived from Gecode::IntMinimizeSpace.
> The model contains a propagator which is derived from Gecode::Propagator.
> My propagator holds four integer ViewArrays, each having around 15000
> views. And each view in three of these arrays is assigned an advisor which
> is derived from Gecode::Advisor (making approximately 45000 advisors in
> total). This propagator also holds two integer vectors of size 15000 which
> I am using as labels in propagation. These two vectors are allocated from
> Gecode space. This little information might give an idea about the problem
> size.
>
>
>
> At some point while solving the model with the BAB search engine, an
> exception is thrown and stack trace only points to the Gecode dll and
> nothing more. I used Microsoft's Application Verifier tool, it gives the
> following output:
>
>
>
>
>
>                 <avrf:logEntry Time="2016-08-05 : 10:44:39"
> LayerName="Exceptions" StopCode="0x650" Severity="Error">
>
> <avrf:message>Attempt to execute code in non-executable memory (first
> chance).</avrf:message>
>
> <avrf:parameter1>24c4ab54e88 - Address being accessed.</avrf:parameter1>
>
> <avrf:parameter2>24c4ab54e88 - Code performing invalid
> access.</avrf:parameter2>
>
> <avrf:parameter3>fde92fe1f0 - Exception record. Use .exr to display
> it.</avrf:parameter3>
>
> <avrf:parameter4>fde92fdd00 - Context record. Use .cxr to display
> it.</avrf:parameter4>
>
> <avrf:stackTrace>
>
> <avrf:trace>vfbasics!+7ffab0f981b2 ( @ 0)</avrf:trace>
>
> <avrf:trace>vfbasics!+7ffab0f9787e ( @ 0)</avrf:trace>
>
> <avrf:trace>ntdll!MD5Update+a43 ( @ 0)</avrf:trace>
>
> <avrf:trace>ntdll!RtlImageNtHeaderEx+17b ( @ 0)</avrf:trace>
>
> <avrf:trace>ntdll!KiUserExceptionDispatcher+3a ( @ 0)</avrf:trace>
>
> <avrf:trace>????????+0000024C4AB54E88</avrf:trace>
>
> </avrf:stackTrace>
>
> </avrf:logEntry>
>
>
>
>
>
>
>
> I don't expect any detailed answer with this much information, but maybe
> you can tell me where to look or what kind of mistake I should look for in
> my code. Because I don't have any idea about what may be causing this.
>
>
>
> Thanks,
>
> Yunus Acikoz
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.gecode.org/pipermail/users/attachments/20160809/a465092e/attachment-0001.html>

From jarausch at skynet.be  Wed Aug 10 11:28:11 2016
From: jarausch at skynet.be (Helmut Jarausch)
Date: Wed, 10 Aug 2016 11:28:11 +0200
Subject: [gecode-users] MemoryStop - is there any replacement
Message-ID: <nPPxTn7TKFuyobPRaBC13E@+4jnM+x5EcAa6UKGQqx28>

Hi,

I'd like to use gecode-python for interfacing Gecode to Python - or is  
there some more up-to-date binding?

gecode-python uses in its interface file gecode-common.icc the  
following code

Search::MemoryStop * memory_stop;

but gecode-4.4.0 doesn't have any declaration of that type anymore.
Is there a replacement for that - or how can I upgrade gecode-python ?

Many thanks for some hints,
Helmut


From cschulte at kth.se  Wed Aug 10 14:57:09 2016
From: cschulte at kth.se (Christian Schulte)
Date: Wed, 10 Aug 2016 14:57:09 +0200
Subject: [gecode-users] MemoryStop - is there any replacement
In-Reply-To: <nPPxTn7TKFuyobPRaBC13E@+4jnM+x5EcAa6UKGQqx28>
References: <nPPxTn7TKFuyobPRaBC13E@+4jnM+x5EcAa6UKGQqx28>
Message-ID: <00d701d1f306$b4d4bfd0$1e7e3f70$@kth.se>

Hi,

No, there is not replacement for that. I am not familiar with gecode-python
but deleting it should be safe.

Cheers
Christian

--
Christian Schulte, www.gecode.org/~schulte
Professor of Computer Science, KTH, cschulte at kth.se
Expert Researcher, SICS, cschulte at sics.se


-----Original Message-----
From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf
Of Helmut Jarausch
Sent: Wednesday, August 10, 2016 11:28
To: users at gecode.org
Subject: [gecode-users] MemoryStop - is there any replacement

Hi,

I'd like to use gecode-python for interfacing Gecode to Python - or is there
some more up-to-date binding?

gecode-python uses in its interface file gecode-common.icc the following
code

Search::MemoryStop * memory_stop;

but gecode-4.4.0 doesn't have any declaration of that type anymore.
Is there a replacement for that - or how can I upgrade gecode-python ?

Many thanks for some hints,
Helmut

_______________________________________________
Gecode users mailing list
users at gecode.org
https://www.gecode.org/mailman/listinfo/gecode-users
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 4623 bytes
Desc: not available
URL: <http://www.gecode.org/pipermail/users/attachments/20160810/39195a7f/attachment.bin>

From guido.tack at monash.edu  Thu Aug 11 08:38:58 2016
From: guido.tack at monash.edu (Guido Tack)
Date: Thu, 11 Aug 2016 16:38:58 +1000
Subject: [gecode-users] fzn-gecode -mode gist and variable names
In-Reply-To: <CAPYSQkQU+yUS5-_v6TMzTXNokqBVKzN16YZ-3Gi5Cr8Uw6yVig@mail.gmail.com>
References: <CAPYSQkQU+yUS5-_v6TMzTXNokqBVKzN16YZ-3Gi5Cr8Uw6yVig@mail.gmail.com>
Message-ID: <97952C81-8FB9-4059-8959-975148ECFF34@monash.edu>

Hi Mats,

this is a limitation in the current fzn-gecode interpreter, we can only get variable names for variables that are mentioned in a search annotation.  So currently the only workaround is to include all variables in some search annotation (but of course I understand that that?s not necessarily what you want to do).  I had a look at fixing this at some point, but it turned out to be more than just a few lines of code so I had to leave it for the time being.

Cheers,
Guido

-- 
GUIDO TACK                  
Senior Lecturer

Information Technology
Monash University
Level 6, Room 6.40, Building H, Caulfield Campus
900 Dandenong Road
Caulfield East VIC 3145
Australia

T: +61 3 9903 1214                      
E: guido.tack at monash.edu <mailto:guido.tack at monash.edu>
http://www.csse.monash.edu/~guidot/ <http://www.csse.monash.edu/~guidot/>


> On 19 Jul 2016, at 6:39 PM, Mats Carlsson <matsc at sics.se> wrote:
> 
> Hi, I have a problem with fzn-gecode -mode gist, Gecode trunk 14847, MiniZinc 2.0.13.
> Namely, anonymous variable names like var[123] get displayed instead of the variable names of the .fzn file.  Admittedly, the latter names are a bit awkward, but at least they enable me to relate back to the names of the MiniZinc model.  But I have no idea how to map the var[...] names to the names of the .fzn file. I have tried to edit the .fzn file in various ways to make Gist use its names, but it has not helped.  Is there some work-around?
> 
> See the attachment for an example.
> 
> -- 
> Mats Carlsson, SICS
> www.sics.se/~matsc <http://www.sics.se/~matsc><tree.pdf>_______________________________________________
> Gecode users mailing list
> users at gecode.org
> https://www.gecode.org/mailman/listinfo/gecode-users

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.gecode.org/pipermail/users/attachments/20160811/d5cd1d7c/attachment.html>

From matsc at sics.se  Thu Aug 11 09:06:49 2016
From: matsc at sics.se (Mats Carlsson)
Date: Thu, 11 Aug 2016 09:06:49 +0200
Subject: [gecode-users] fzn-gecode -mode gist and variable names
In-Reply-To: <97952C81-8FB9-4059-8959-975148ECFF34@monash.edu>
References: <CAPYSQkQU+yUS5-_v6TMzTXNokqBVKzN16YZ-3Gi5Cr8Uw6yVig@mail.gmail.com>
	<97952C81-8FB9-4059-8959-975148ECFF34@monash.edu>
Message-ID: <CAPYSQkRM4BPM6v-ACHYzwMY2xZ9BfxZXxTMPRLm6Bq9sr6p5sg@mail.gmail.com>

Thanks Guido. I need this in a context with free search, and by the way
another unfortunate thing about fzn-gecode is that any search annotation
seems to disable the -f flag.
So free search seems incompatible with Gist showing variable names... What
a pity. I hope that you will return to these points eventually.

Keep up the good work,

On Thu, Aug 11, 2016 at 8:38 AM, Guido Tack <guido.tack at monash.edu> wrote:

> Hi Mats,
>
> this is a limitation in the current fzn-gecode interpreter, we can only
> get variable names for variables that are mentioned in a search
> annotation.  So currently the only workaround is to include all variables
> in some search annotation (but of course I understand that that?s not
> necessarily what you want to do).  I had a look at fixing this at some
> point, but it turned out to be more than just a few lines of code so I had
> to leave it for the time being.
>
> Cheers,
> Guido
>
> --
> *GUIDO TACK*
> Senior Lecturer
>
> *Information Technology*
> Monash University
> Level 6, Room 6.40, Building H, Caulfield Campus
> 900 Dandenong Road
> Caulfield East VIC 3145
> Australia
>
> T: +61 3 9903 1214
> E: guido.tack at monash.edu
> http://www.csse.monash.edu/~guidot/
>
>
> On 19 Jul 2016, at 6:39 PM, Mats Carlsson <matsc at sics.se> wrote:
>
> Hi, I have a problem with fzn-gecode -mode gist, Gecode trunk 14847,
> MiniZinc 2.0.13.
> Namely, anonymous variable names like var[123] get displayed instead of
> the variable names of the .fzn file.  Admittedly, the latter names are a
> bit awkward, but at least they enable me to relate back to the names of the
> MiniZinc model.  But I have no idea how to map the var[...] names to the
> names of the .fzn file. I have tried to edit the .fzn file in various ways
> to make Gist use its names, but it has not helped.  Is there some
> work-around?
>
> See the attachment for an example.
>
> --
> Mats Carlsson, SICS
> www.sics.se/~matsc
> <tree.pdf>_______________________________________________
> Gecode users mailing list
> users at gecode.org
> https://www.gecode.org/mailman/listinfo/gecode-users
>
>
>


-- 
Mats Carlsson, SICS
www.sics.se/~matsc
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.gecode.org/pipermail/users/attachments/20160811/9d655fe2/attachment.html>

From guido.tack at monash.edu  Thu Aug 11 09:10:36 2016
From: guido.tack at monash.edu (Guido Tack)
Date: Thu, 11 Aug 2016 17:10:36 +1000
Subject: [gecode-users] fzn-gecode -mode gist and variable names
In-Reply-To: <CAPYSQkRM4BPM6v-ACHYzwMY2xZ9BfxZXxTMPRLm6Bq9sr6p5sg@mail.gmail.com>
References: <CAPYSQkQU+yUS5-_v6TMzTXNokqBVKzN16YZ-3Gi5Cr8Uw6yVig@mail.gmail.com>
	<97952C81-8FB9-4059-8959-975148ECFF34@monash.edu>
	<CAPYSQkRM4BPM6v-ACHYzwMY2xZ9BfxZXxTMPRLm6Bq9sr6p5sg@mail.gmail.com>
Message-ID: <217912EA-7056-436C-8201-9DE4B25D1D0C@monash.edu>

The -f command line option is actually a no-op, it?s just there to maintain compatibility with the MiniZinc challenge (the specification is that you /may/ ignore the search annotation, not that you /must/?).

Cheers,
Guido

-- 
GUIDO TACK                  
Senior Lecturer

Information Technology
Monash University
Level 6, Room 6.40, Building H, Caulfield Campus
900 Dandenong Road
Caulfield East VIC 3145
Australia

T: +61 3 9903 1214                      
E: guido.tack at monash.edu <mailto:guido.tack at monash.edu>
http://www.csse.monash.edu/~guidot/ <http://www.csse.monash.edu/~guidot/>


> On 11 Aug 2016, at 5:06 PM, Mats Carlsson <matsc at sics.se> wrote:
> 
> Thanks Guido. I need this in a context with free search, and by the way another unfortunate thing about fzn-gecode is that any search annotation seems to disable the -f flag.
> So free search seems incompatible with Gist showing variable names... What a pity. I hope that you will return to these points eventually.
> 
> Keep up the good work,
> 
> On Thu, Aug 11, 2016 at 8:38 AM, Guido Tack <guido.tack at monash.edu <mailto:guido.tack at monash.edu>> wrote:
> Hi Mats,
> 
> this is a limitation in the current fzn-gecode interpreter, we can only get variable names for variables that are mentioned in a search annotation.  So currently the only workaround is to include all variables in some search annotation (but of course I understand that that?s not necessarily what you want to do).  I had a look at fixing this at some point, but it turned out to be more than just a few lines of code so I had to leave it for the time being.
> 
> Cheers,
> Guido
> 
> -- 
> GUIDO TACK                  
> Senior Lecturer
> 
> Information Technology
> Monash University
> Level 6, Room 6.40, Building H, Caulfield Campus
> 900 Dandenong Road
> Caulfield East VIC 3145
> Australia
> 
> T: +61 3 9903 1214 <tel:%2B61%203%209903%201214>                      
> E: guido.tack at monash.edu <mailto:guido.tack at monash.edu>
> http://www.csse.monash.edu/~guidot/ <http://www.csse.monash.edu/~guidot/>
> 
> 
>> On 19 Jul 2016, at 6:39 PM, Mats Carlsson <matsc at sics.se <mailto:matsc at sics.se>> wrote:
>> 
>> Hi, I have a problem with fzn-gecode -mode gist, Gecode trunk 14847, MiniZinc 2.0.13.
>> Namely, anonymous variable names like var[123] get displayed instead of the variable names of the .fzn file.  Admittedly, the latter names are a bit awkward, but at least they enable me to relate back to the names of the MiniZinc model.  But I have no idea how to map the var[...] names to the names of the .fzn file. I have tried to edit the .fzn file in various ways to make Gist use its names, but it has not helped.  Is there some work-around?
>> 
>> See the attachment for an example.
>> 
>> -- 
>> Mats Carlsson, SICS
>> www.sics.se/~matsc <http://www.sics.se/~matsc><tree.pdf>_______________________________________________
>> Gecode users mailing list
>> users at gecode.org <mailto:users at gecode.org>
>> https://www.gecode.org/mailman/listinfo/gecode-users <https://www.gecode.org/mailman/listinfo/gecode-users>
> 
> 
> 
> 
> -- 
> Mats Carlsson, SICS
> www.sics.se/~matsc <http://www.sics.se/~matsc>_______________________________________________
> Gecode users mailing list
> users at gecode.org
> https://www.gecode.org/mailman/listinfo/gecode-users

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.gecode.org/pipermail/users/attachments/20160811/be7ea061/attachment-0001.html>

From matsc at sics.se  Thu Aug 11 09:28:26 2016
From: matsc at sics.se (Mats Carlsson)
Date: Thu, 11 Aug 2016 09:28:26 +0200
Subject: [gecode-users] fzn-gecode -mode gist and variable names
In-Reply-To: <217912EA-7056-436C-8201-9DE4B25D1D0C@monash.edu>
References: <CAPYSQkQU+yUS5-_v6TMzTXNokqBVKzN16YZ-3Gi5Cr8Uw6yVig@mail.gmail.com>
	<97952C81-8FB9-4059-8959-975148ECFF34@monash.edu>
	<CAPYSQkRM4BPM6v-ACHYzwMY2xZ9BfxZXxTMPRLm6Bq9sr6p5sg@mail.gmail.com>
	<217912EA-7056-436C-8201-9DE4B25D1D0C@monash.edu>
Message-ID: <CAPYSQkRgr3CVEEaP2yBQV==Mv-MYHL6=B8LZvYuynA_--PpNwg@mail.gmail.com>

Is there a way to _tell_ fzn-gecode to use free search and to ignore any
search annotation?

On Thu, Aug 11, 2016 at 9:10 AM, Guido Tack <guido.tack at monash.edu> wrote:

> The -f command line option is actually a no-op, it?s just there to
> maintain compatibility with the MiniZinc challenge (the specification is
> that you /may/ ignore the search annotation, not that you /must/?).
>
> Cheers,
> Guido
>
> --
> *GUIDO TACK*
> Senior Lecturer
>
> *Information Technology*
> Monash University
> Level 6, Room 6.40, Building H, Caulfield Campus
> 900 Dandenong Road
> Caulfield East VIC 3145
> Australia
>
> T: +61 3 9903 1214
> E: guido.tack at monash.edu
> http://www.csse.monash.edu/~guidot/
>
>
> On 11 Aug 2016, at 5:06 PM, Mats Carlsson <matsc at sics.se> wrote:
>
> Thanks Guido. I need this in a context with free search, and by the way
> another unfortunate thing about fzn-gecode is that any search annotation
> seems to disable the -f flag.
> So free search seems incompatible with Gist showing variable names... What
> a pity. I hope that you will return to these points eventually.
>
> Keep up the good work,
>
> On Thu, Aug 11, 2016 at 8:38 AM, Guido Tack <guido.tack at monash.edu> wrote:
>
>> Hi Mats,
>>
>> this is a limitation in the current fzn-gecode interpreter, we can only
>> get variable names for variables that are mentioned in a search
>> annotation.  So currently the only workaround is to include all variables
>> in some search annotation (but of course I understand that that?s not
>> necessarily what you want to do).  I had a look at fixing this at some
>> point, but it turned out to be more than just a few lines of code so I had
>> to leave it for the time being.
>>
>> Cheers,
>> Guido
>>
>> --
>> *GUIDO TACK*
>> Senior Lecturer
>>
>> *Information Technology*
>> Monash University
>> Level 6, Room 6.40, Building H, Caulfield Campus
>> 900 Dandenong Road
>> Caulfield East VIC 3145
>> Australia
>>
>> T: +61 3 9903 1214
>> E: guido.tack at monash.edu
>> http://www.csse.monash.edu/~guidot/
>>
>>
>> On 19 Jul 2016, at 6:39 PM, Mats Carlsson <matsc at sics.se> wrote:
>>
>> Hi, I have a problem with fzn-gecode -mode gist, Gecode trunk 14847,
>> MiniZinc 2.0.13.
>> Namely, anonymous variable names like var[123] get displayed instead of
>> the variable names of the .fzn file.  Admittedly, the latter names are a
>> bit awkward, but at least they enable me to relate back to the names of the
>> MiniZinc model.  But I have no idea how to map the var[...] names to the
>> names of the .fzn file. I have tried to edit the .fzn file in various ways
>> to make Gist use its names, but it has not helped.  Is there some
>> work-around?
>>
>> See the attachment for an example.
>>
>> --
>> Mats Carlsson, SICS
>> www.sics.se/~matsc
>> <tree.pdf>_______________________________________________
>> Gecode users mailing list
>> users at gecode.org
>> https://www.gecode.org/mailman/listinfo/gecode-users
>>
>>
>>
>
>
> --
> Mats Carlsson, SICS
> www.sics.se/~matsc
> _______________________________________________
> Gecode users mailing list
> users at gecode.org
> https://www.gecode.org/mailman/listinfo/gecode-users
>
>
>


-- 
Mats Carlsson, SICS
www.sics.se/~matsc
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.gecode.org/pipermail/users/attachments/20160811/705c17a7/attachment.html>

From cschulte at kth.se  Thu Aug 11 12:22:06 2016
From: cschulte at kth.se (Christian Schulte)
Date: Thu, 11 Aug 2016 12:22:06 +0200
Subject: [gecode-users] fzn-gecode -mode gist and variable names
In-Reply-To: <CAPYSQkRgr3CVEEaP2yBQV==Mv-MYHL6=B8LZvYuynA_--PpNwg@mail.gmail.com>
References: <CAPYSQkQU+yUS5-_v6TMzTXNokqBVKzN16YZ-3Gi5Cr8Uw6yVig@mail.gmail.com>	<97952C81-8FB9-4059-8959-975148ECFF34@monash.edu>	<CAPYSQkRM4BPM6v-ACHYzwMY2xZ9BfxZXxTMPRLm6Bq9sr6p5sg@mail.gmail.com>	<217912EA-7056-436C-8201-9DE4B25D1D0C@monash.edu>
	<CAPYSQkRgr3CVEEaP2yBQV==Mv-MYHL6=B8LZvYuynA_--PpNwg@mail.gmail.com>
Message-ID: <01b401d1f3ba$366a7c70$a33f7550$@kth.se>

Guido, how about adding a search annotation ?free?? Would that work? Cheers Christian

 

--

Christian Schulte, www.gecode.org/~schulte

Professor of Computer Science, KTH,  <mailto:cschulte at kth.se> cschulte at kth.se

Expert Researcher, SICS,  <mailto:cschulte at sics.se> cschulte at sics.se

 

From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf Of Mats Carlsson
Sent: Thursday, August 11, 2016 09:28
To: Guido Tack
Cc: users at gecode.org
Subject: Re: [gecode-users] fzn-gecode -mode gist and variable names

 

Is there a way to _tell_ fzn-gecode to use free search and to ignore any search annotation?

 

On Thu, Aug 11, 2016 at 9:10 AM, Guido Tack <guido.tack at monash.edu> wrote:

The -f command line option is actually a no-op, it?s just there to maintain compatibility with the MiniZinc challenge (the specification is that you /may/ ignore the search annotation, not that you /must/?).

 

Cheers,

Guido

 

-- 
GUIDO TACK                  
Senior Lecturer

Information Technology
Monash University
Level 6, Room 6.40, Building H, Caulfield Campus
900 Dandenong Road
Caulfield East VIC 3145
Australia

T: +61 3 9903 1214 <tel:%2B61%203%209903%201214>                       
E: guido.tack at monash.edu
http://www.csse.monash.edu/~guidot/

 

On 11 Aug 2016, at 5:06 PM, Mats Carlsson <matsc at sics.se> wrote:

 

Thanks Guido. I need this in a context with free search, and by the way another unfortunate thing about fzn-gecode is that any search annotation seems to disable the -f flag.

So free search seems incompatible with Gist showing variable names... What a pity. I hope that you will return to these points eventually.

Keep up the good work,

 

On Thu, Aug 11, 2016 at 8:38 AM, Guido Tack <guido.tack at monash.edu> wrote:

Hi Mats,

 

this is a limitation in the current fzn-gecode interpreter, we can only get variable names for variables that are mentioned in a search annotation.  So currently the only workaround is to include all variables in some search annotation (but of course I understand that that?s not necessarily what you want to do).  I had a look at fixing this at some point, but it turned out to be more than just a few lines of code so I had to leave it for the time being.

 

Cheers,

Guido

 

-- 
GUIDO TACK                  
Senior Lecturer

Information Technology
Monash University
Level 6, Room 6.40, Building H, Caulfield Campus
900 Dandenong Road
Caulfield East VIC 3145
Australia

T: +61 3 9903 1214 <tel:%2B61%203%209903%201214>                       
E: guido.tack at monash.edu
http://www.csse.monash.edu/~guidot/

 

On 19 Jul 2016, at 6:39 PM, Mats Carlsson <matsc at sics.se> wrote:

 

Hi, I have a problem with fzn-gecode -mode gist, Gecode trunk 14847, MiniZinc 2.0.13.

Namely, anonymous variable names like var[123] get displayed instead of the variable names of the .fzn file.  Admittedly, the latter names are a bit awkward, but at least they enable me to relate back to the names of the MiniZinc model.  But I have no idea how to map the var[...] names to the names of the .fzn file. I have tried to edit the .fzn file in various ways to make Gist use its names, but it has not helped.  Is there some work-around?

See the attachment for an example.



-- 

Mats Carlsson, SICS
www.sics.se/~matsc

<tree.pdf>_______________________________________________
Gecode users mailing list
users at gecode.org
https://www.gecode.org/mailman/listinfo/gecode-users

 




-- 

Mats Carlsson, SICS
www.sics.se/~matsc

_______________________________________________
Gecode users mailing list
users at gecode.org
https://www.gecode.org/mailman/listinfo/gecode-users

 




-- 

Mats Carlsson, SICS
www.sics.se/~matsc

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.gecode.org/pipermail/users/attachments/20160811/74f49e7b/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 4623 bytes
Desc: not available
URL: <http://www.gecode.org/pipermail/users/attachments/20160811/74f49e7b/attachment.bin>

From cschulte at kth.se  Thu Aug 11 16:05:25 2016
From: cschulte at kth.se (Christian Schulte)
Date: Thu, 11 Aug 2016 16:05:25 +0200
Subject: [gecode-users] Freeze with MSVC 2015 optimized build
In-Reply-To: <F3693ACFBB4CBE40894F6560386A67BF5A84BF52@EX1.logis.local>
References: <ms91ji$t2s$1@ger.gmane.org>	<000b01d0e627$0e3c24c0$2ab46e40$@kth.se>
	<ms939m$p0e$1@ger.gmane.org>	<mteeso$vg0$1@ger.gmane.org>
	<00a001d0f14c$b10d1ee0$13275ca0$@kth.se>	<mtefpa$f98$1@ger.gmane.org>
	<00be01d0f156$472d0a80$d5871f80$@kth.se>	<mteklg$60h$1@ger.gmane.org>
	<00f201d0f15a$68174310$3845c930$@kth.se>	<mtem3n$ur8$1@ger.gmane.org>
	<mten1j$f52$1@ger.gmane.org>	<004201d0f1fb$dddb3380$99919a80$@kth.se>
	<mtgsg1$uaj$1@ger.gmane.org>	<mulddl$hr5$1@ger.gmane.org>
	<046601d0ff63$ebf91840$c3eb48c0$@kth.se>	<ndlq7v$408$1@ger.gmane.org>
	<008901d18cda$246e1b90$6d4a52b0$@kth.se>	<ndoo75$h9n$1@ger.gmane.org>
	<ndrtf9$nmi$1@ger.gmane.org>	<ndt49c$g4f$1@ger.gmane.org>
	<004f01d190fb$95665e00$c0331a00$@kth.se>
	<8e678c3d-4811-6a5d-870e-73e7b1316ad9@logis.cz>
	<04d201d1b0db$ba0fd060$2e2f7120$@kth.se>
	<F3693ACFBB4CBE40894F6560386A67BF5A84BF52@EX1.logis.local>
Message-ID: <00c401d1f3d9$68e5d2c0$3ab17840$@kth.se>

Hi Filip and all,

I finally added a fix to the trunk. I now check for MSVC whether SSE is used
and then fall back.

I also tried to find out whether there is macro for GCC that tells you this,
but I did not find anything. 

My question now is: should I rather enable the optimized rounding for
platforms where we are sure it works (that would be just MSVC x86 no SSE, so
quite boring)?

Cheers
Christian

--
Christian Schulte, www.gecode.org/~schulte
Professor of Computer Science, KTH, cschulte at kth.se
Expert Researcher, SICS, cschulte at sics.se


-----Original Message-----
From: Konvicka Filip [mailto:Filip.Konvicka at logis.cz] 
Sent: Wednesday, May 18, 2016 11:04
To: cschulte at kth.se; users at gecode.org
Subject: RE: [gecode-users] Freeze with MSVC 2015 optimized build

Hi Christian,

Fortunately this wasn't much work in the end...  I'm happy that we can
switch to MSVC 2015 now :)  I'll also run the tests in our RHEL and Debian
environments to see whether we're good on those platforms as well.

On the Gecode download page you're mentioning some issues with floats on the
Mac OS X; I wonder whether those could have the same root cause.  So it may
be worth checking whether the problems still persist.

Cheers,
Filip

-----Original Message-----
From: Christian Schulte [mailto:cschulte at kth.se]
Sent: Wednesday, May 18, 2016 10:03 AM
To: Konvicka Filip; users at gecode.org
Subject: RE: [gecode-users] Freeze with MSVC 2015 optimized build

Hi Filip,

Thanks a lot for your hard work. That sounds very encouraging, indeed! The
#ifdef is a piece of cake, of course.

No blame from me on you ;-)

Cheers
Christian

--
Christian Schulte, www.gecode.org/~schulte Professor of Computer Science,
KTH, cschulte at kth.se Expert Researcher, SICS, cschulte at sics.se


-----Original Message-----
From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf
Of Filip Konvicka
Sent: Wednesday, May 18, 2016 09:57
To: users at gecode.org
Subject: Re: [gecode-users] Freeze with MSVC 2015 optimized build

Hi,

So, I've spent some time investigating.  Until now I haven't looked into the
"new" FloatVar code contributed by Vincent and you guys, and it looks like
it inherits some ideas, maybe even files from our initial implementation for
Gecode 2.  So, I feel some blame for using Boost's Interval Arithmetic
library without investigating enough first: if you look at the documentation
homepage, you'll see a big red warning :)

http://www.boost.org/doc/libs/1_61_0/libs/numeric/interval/doc/interval.htm

which says that the library probably won't work with SSE2 (or at least not
out of the box).  But SSE2 is the only option for x64.

On the other hand, I'm not aware of any good alternative to this Boost
library.  I think the library is actually quite good (even though it would
use some work on supporting SSE2 better).

So I thought I'd play with the library's policies to see if I could make it
work with x64.  I looked into float.hh which defines what exact interval
datatype is used.  It looks like changing from 'rounded_arith_opp' to
'rounded_arith_std' fixes the issues that we're observing.  If you're
interested the description of those types is available here:

http://www.boost.org/doc/libs/1_61_0/libs/numeric/interval/doc/rounding.htm

I've run the Float tests with this change and they all seem to pass. 
Compared to the _opp version the total runtime running the Float testsuite
increased by 50%. This is still fine for me; I haven't compared this with
the x86/x87 version.  Maybe Gecode could use some #ifdef to choose between
_opp and _std based on whether the compiler/architecture setup is known to
be safe for _opp or not.

Cheers,
Filip

> Hi Filip,
>
> Thanks for all the info and checking. I'll have a look a little later.
>
> Best
> Christian
>
> --
> Christian Schulte, www.gecode.org/~schulte Professor of Computer 
> Science, KTH, cschulte at kth.se Expert Researcher, SICS, 
> cschulte at sics.se
>
> -----Original Message-----
> From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On 
> Behalf Of Filip Konvicka
> Sent: Monday, April 4, 2016 09:15
> To: users at gecode.org
> Subject: Re: [gecode-users] Freeze with MSVC 2015 optimized build
>
> Hi,
>
> You said that you have uploaded packages recently; I assume that it 
> was Gecode-4.4.0-x64-2015.msi.  I compiled and linked using this with 
> MSVC
> 2015 Update 2 and it also freezes on the testcase.  Replacing this 
> with the MSVC 2013 package (Gecode-4.4.0-x64-2013.msi) works fine, 
> even using the same toolset.
>
> Cheers,
> Filip
>
>> Hi,
>>
>> I have updated to MSVC 2015 update 2, compiled the current Gecode 
>> trunk for x64, and my testcase from the beginning of this thread 
>> still freezes (the one from Sep 3rd 2015 - I have attached it to this 
>> mail for convenience).
>>
>> I also tried running Float::Arithmetic::Div::Sol::A and that test 
>> still fails.  For some reason 'make check' only runs a small subset 
>> of tests, so I ran this manually like this:
>>
>> $ test/test -test Float::Arithmetic::Div::Sol::A 
>> Float::Arithmetic::Div::Sol::A -
>> Options: -seed 1 -test Float::Arithmetic::Div::Sol::A
>>
>> Another try failed with a different seed number:
>> $ test/test -test Float::Arithmetic::Div Float::Arithmetic::Div::A
>> +++++ Float::Arithmetic::Div::B +++++ Float::Arithmetic::Div::C +++++
>> Float::Arithmetic::Div::Sol::A -
>> Options: -seed 1975575111 -test Float::Arithmetic::Div::Sol::A
>>
>> Thanks,
>> Filip
>>
>>> Christian,
>>>
>>> Thanks.  I was referring to this September & October thread - there 
>>> were issues with Gecode freezing on some FloatVar problems (my 
>>> testcase and your "Float::Arithmetic::Div::C") with MSVC 2015, and 
>>> you said then that it might be resolved by not using SSE2 (but that 
>>> Guido would investigate more).  We also identified a number of float 
>>> tests that were failing on GCC 5 (not with GCC 4.9).
>>>
>>> I can try re-running our tests here with the current trunk to see if 
>>> something changed - I just thought that I would ask directly whether 
>>> you did something specific to address these issues.  The failures 
>>> seemed a bit non-deterministic...
>>>
>>> Thanks,
>>> Filip
>>>
>>>> MSVC2015 works for Gecode.4.4.0 since its initial release, I in 
>>>> fact uploaded packages to the Gecode website last week. Since last 
>>>> week (Mar 30) the update 2 to MSVC 2015 finally also compiles the 
>>>> trunk and the upcoming Gecode 5.0.0.
>>>>
>>>> Don't know about GCC, though.
>>>>
>>>> Cheers
>>>> Christian
>>>>
>>>>
>>>>
>>>> --
>>>> Christian Schulte, www.gecode.org/~schulte Professor of Computer 
>>>> Science, KTH, cschulte at kth.se Expert Researcher, SICS, 
>>>> cschulte at sics.se
>>>>
>>>> -----Original Message-----
>>>> From: users-bounces at gecode.org
>>>> [mailto:users-bounces at gecode.org] On Behalf Of Filip Konvicka
>>>> Sent: Friday, April 1, 2016 14:41
>>>> To: users at gecode.org
>>>> Subject: Re: [gecode-users] Freeze with MSVC 2015 optimized build
>>>>
>>>> Hi Christian,
>>>>
>>>> Have you had any chance to look into supporting gcc 5 and MSVC 2015?
>>>>
>>>> Thanks,
>>>> Filip
>>>>
>>>>> Hi Filip,
>>>>>
>>>>> Thanks for the information. This really looks like a gcc problem.
>>>>> Guido, can you reproduce this behavior?
>>>>>
>>>>> Cheers
>>>>> Christian
>>>>>
>>>>> --
>>>>> Christian Schulte, www.gecode.org/~schulte Professor of Computer 
>>>>> Science, KTH, cschulte at kth.se Expert Researcher, SICS, 
>>>>> cschulte at sics.se
>>>>>
>>>>> -----Original Message-----
>>>>> From: users-bounces at gecode.org
>>>>> [mailto:users-bounces at gecode.org] On Behalf Of Filip Konvicka
>>>>> Sent: Friday, October 2, 2015 09:58 AM
>>>>> To: users at gecode.org
>>>>> Subject: Re: [gecode-users] Freeze with MSVC 2015 optimized build
>>>>>
>>>>> Hi,
>>>>>
>>>>> We were looking a bit more into 4.4.0 on Linux where we've also 
>>>>> hit some issues.
>>>>>
>>>>> All tests worked fine with gcc 4.9.3.  However, with gcc 5.2.0 
>>>>> many tests failed - see the attachements for details:
>>>>>      gecode-4.4.0-gcc-5.2.0-failed_tests.list
>>>>>      ... list of failed tests (except two memory fails below)
>>>>>      gecode-4.4.0-gcc-5.2.0-failed_tests.log
>>>>>      ... log from 'test' for failed tests
>>>>>
>>>>> Two tests ran out of memory (allocated several GBs of memory 
>>>>> before getting killed by system):
>>>>>      Set::Branch::Sparse::3
>>>>>      Set::Channel::Sorted
>>>>>
>>>>> gcc details:
>>>>> target=x86_64-linux-gnu
>>>>> GCC_VER=5.2.0
>>>>> GMP_VER=6.0.0
>>>>> MPFR_VER=3.1.3
>>>>> MPC_VER=1.0.3
>>>>> BINUTILS_VER=2.25
>>>>>
>>>>> It could also be a gcc bug of course, hard to tell.
>>>>>
>>>>> Thanks,
>>>>> Filip
>>>>>
>>>>
>>>>
>>>>
>>>> _______________________________________________
>>>> Gecode users mailing list
>>>> users at gecode.org
>>>> https://www.gecode.org/mailman/listinfo/gecode-users
>>>>
>
>
>
> _______________________________________________
> Gecode users mailing list
> users at gecode.org
> https://www.gecode.org/mailman/listinfo/gecode-users
>



_______________________________________________
Gecode users mailing list
users at gecode.org
https://www.gecode.org/mailman/listinfo/gecode-users
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 4623 bytes
Desc: not available
URL: <http://www.gecode.org/pipermail/users/attachments/20160811/6305d194/attachment-0001.bin>

From guido.tack at monash.edu  Fri Aug 12 03:06:08 2016
From: guido.tack at monash.edu (Guido Tack)
Date: Fri, 12 Aug 2016 11:06:08 +1000
Subject: [gecode-users] fzn-gecode -mode gist and variable names
In-Reply-To: <01b401d1f3ba$366a7c70$a33f7550$@kth.se>
References: <CAPYSQkQU+yUS5-_v6TMzTXNokqBVKzN16YZ-3Gi5Cr8Uw6yVig@mail.gmail.com>
	<97952C81-8FB9-4059-8959-975148ECFF34@monash.edu>
	<CAPYSQkRM4BPM6v-ACHYzwMY2xZ9BfxZXxTMPRLm6Bq9sr6p5sg@mail.gmail.com>
	<217912EA-7056-436C-8201-9DE4B25D1D0C@monash.edu>
	<CAPYSQkRgr3CVEEaP2yBQV==Mv-MYHL6=B8LZvYuynA_--PpNwg@mail.gmail.com>
	<01b401d1f3ba$366a7c70$a33f7550$@kth.se>
Message-ID: <5EC74F6C-0574-48C7-9D75-0D1918756576@monash.edu>

No, that wouldn?t work.  I just pushed a change that should fix it properly.

Cheers,
Guido

--
GUIDO TACK
Senior Lecturer

Information Technology
Monash University
Level 6, Room 6.40, Building H, Caulfield Campus
900 Dandenong Road
Caulfield East VIC 3145
Australia

T: +61 3 9903 1214
E: guido.tack at monash.edu <mailto:guido.tack at monash.edu>
http://www.csse.monash.edu/~guidot/ <http://www.csse.monash.edu/~guidot/>


> On 11 Aug 2016, at 8:22 PM, Christian Schulte <cschulte at kth.se> wrote:
> 
> Guido, how about adding a search annotation ?free?? Would that work? Cheers Christian
> 
> --
> Christian Schulte, www.gecode.org/~schulte <http://www.gecode.org/~schulte>
> Professor of Computer Science, KTH, cschulte at kth.se <mailto:cschulte at kth.se>
> Expert Researcher, SICS, cschulte at sics.se <mailto:cschulte at sics.se>
> 
> From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf Of Mats Carlsson
> Sent: Thursday, August 11, 2016 09:28
> To: Guido Tack
> Cc: users at gecode.org
> Subject: Re: [gecode-users] fzn-gecode -mode gist and variable names
> 
> Is there a way to _tell_ fzn-gecode to use free search and to ignore any search annotation?
> 
> On Thu, Aug 11, 2016 at 9:10 AM, Guido Tack <guido.tack at monash.edu <mailto:guido.tack at monash.edu>> wrote:
> The -f command line option is actually a no-op, it?s just there to maintain compatibility with the MiniZinc challenge (the specification is that you /may/ ignore the search annotation, not that you /must/?).
> 
> Cheers,
> Guido
> 
> --
> GUIDO TACK
> Senior Lecturer
> 
> Information Technology
> Monash University
> Level 6, Room 6.40, Building H, Caulfield Campus
> 900 Dandenong Road
> Caulfield East VIC 3145
> Australia
> 
> T: +61 3 9903 1214 <tel:%2B61%203%209903%201214>
> E: guido.tack at monash.edu <mailto:guido.tack at monash.edu>
> http://www.csse.monash.edu/~guidot/ <http://www.csse.monash.edu/~guidot/>
> 
>> On 11 Aug 2016, at 5:06 PM, Mats Carlsson <matsc at sics.se <mailto:matsc at sics.se>> wrote:
>> 
>> Thanks Guido. I need this in a context with free search, and by the way another unfortunate thing about fzn-gecode is that any search annotation seems to disable the -f flag.
>> So free search seems incompatible with Gist showing variable names... What a pity. I hope that you will return to these points eventually.
>> 
>> Keep up the good work,
>> 
>> On Thu, Aug 11, 2016 at 8:38 AM, Guido Tack <guido.tack at monash.edu <mailto:guido.tack at monash.edu>> wrote:
>> Hi Mats,
>> 
>> this is a limitation in the current fzn-gecode interpreter, we can only get variable names for variables that are mentioned in a search annotation.  So currently the only workaround is to include all variables in some search annotation (but of course I understand that that?s not necessarily what you want to do).  I had a look at fixing this at some point, but it turned out to be more than just a few lines of code so I had to leave it for the time being.
>> 
>> Cheers,
>> Guido
>> 
>> --
>> GUIDO TACK
>> Senior Lecturer
>> 
>> Information Technology
>> Monash University
>> Level 6, Room 6.40, Building H, Caulfield Campus
>> 900 Dandenong Road
>> Caulfield East VIC 3145
>> Australia
>> 
>> T: +61 3 9903 1214 <tel:%2B61%203%209903%201214>
>> E: guido.tack at monash.edu <mailto:guido.tack at monash.edu>
>> http://www.csse.monash.edu/~guidot/ <http://www.csse.monash.edu/~guidot/>
>> 
>>> On 19 Jul 2016, at 6:39 PM, Mats Carlsson <matsc at sics.se <mailto:matsc at sics.se>> wrote:
>>> 
>>> Hi, I have a problem with fzn-gecode -mode gist, Gecode trunk 14847, MiniZinc 2.0.13.
>>> Namely, anonymous variable names like var[123] get displayed instead of the variable names of the .fzn file.  Admittedly, the latter names are a bit awkward, but at least they enable me to relate back to the names of the MiniZinc model.  But I have no idea how to map the var[...] names to the names of the .fzn file. I have tried to edit the .fzn file in various ways to make Gist use its names, but it has not helped.  Is there some work-around?
>>> 
>>> See the attachment for an example.
>>> 
>>> --
>>> Mats Carlsson, SICS
>>> www.sics.se/~matsc <http://www.sics.se/~matsc>
>>> <tree.pdf>_______________________________________________
>>> Gecode users mailing list
>>> users at gecode.org <mailto:users at gecode.org>
>>> https://www.gecode.org/mailman/listinfo/gecode-users <https://www.gecode.org/mailman/listinfo/gecode-users>
>> 
>> 
>> 
>> 
>> --
>> Mats Carlsson, SICS
>> www.sics.se/~matsc <http://www.sics.se/~matsc>
>> _______________________________________________
>> Gecode users mailing list
>> users at gecode.org <mailto:users at gecode.org>
>> https://www.gecode.org/mailman/listinfo/gecode-users <https://www.gecode.org/mailman/listinfo/gecode-users>
> 
> 
> 
> 
> --
> Mats Carlsson, SICS
> www.sics.se/~matsc <http://www.sics.se/~matsc>_______________________________________________
> Gecode users mailing list
> users at gecode.org <mailto:users at gecode.org>
> https://www.gecode.org/mailman/listinfo/gecode-users <https://www.gecode.org/mailman/listinfo/gecode-users>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.gecode.org/pipermail/users/attachments/20160812/bc0f6188/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 842 bytes
Desc: Message signed with OpenPGP using GPGMail
URL: <http://www.gecode.org/pipermail/users/attachments/20160812/bc0f6188/attachment-0001.sig>

From Filip.Konvicka at logis.cz  Mon Aug 15 11:21:27 2016
From: Filip.Konvicka at logis.cz (Konvicka Filip)
Date: Mon, 15 Aug 2016 09:21:27 +0000
Subject: [gecode-users] Freeze with MSVC 2015 optimized build
In-Reply-To: <00c401d1f3d9$68e5d2c0$3ab17840$@kth.se>
References: <ms91ji$t2s$1@ger.gmane.org>
	<000b01d0e627$0e3c24c0$2ab46e40$@kth.se> <ms939m$p0e$1@ger.gmane.org>
	<mteeso$vg0$1@ger.gmane.org> <00a001d0f14c$b10d1ee0$13275ca0$@kth.se>
	<mtefpa$f98$1@ger.gmane.org> <00be01d0f156$472d0a80$d5871f80$@kth.se>
	<mteklg$60h$1@ger.gmane.org> <00f201d0f15a$68174310$3845c930$@kth.se>
	<mtem3n$ur8$1@ger.gmane.org> <mten1j$f52$1@ger.gmane.org>
	<004201d0f1fb$dddb3380$99919a80$@kth.se> <mtgsg1$uaj$1@ger.gmane.org>
	<mulddl$hr5$1@ger.gmane.org> <046601d0ff63$ebf91840$c3eb48c0$@kth.se>
	<ndlq7v$408$1@ger.gmane.org> <008901d18cda$246e1b90$6d4a52b0$@kth.se>
	<ndoo75$h9n$1@ger.gmane.org> <ndrtf9$nmi$1@ger.gmane.org>
	<ndt49c$g4f$1@ger.gmane.org> <004f01d190fb$95665e00$c0331a00$@kth.se>
	<8e678c3d-4811-6a5d-870e-73e7b1316ad9@logis.cz>
	<04d201d1b0db$ba0fd060$2e2f7120$@kth.se>
	<F3693ACFBB4CBE40894F6560386A67BF5A84BF52@EX1.logis.local>
	<00c401d1f3d9$68e5d2c0$3ab17840$@kth.se>
Message-ID: <F3693ACFBB4CBE40894F6560386A67BF60B60667@EX1.logis.local>

Hi Christian,

Thanks for the info.  I still feel that this "fix" regarding rounding is more a hack than a proper way of handling the issue.  From that perspective I think what you did is OK, correctness should be the top priority.  And yes I think you can enable the fast rounding mode for MSVC x86 no SSE.  I'm not sure regarding GCC, I think it just behaved differently than MSVC, same as Clang.

What I would like to do ultimately is to investigate more regarding where exactly are the rounding modes switched.  Guido already did some investigation some time ago, quote:

> Yes, this really looks nasty.  I've been able to track it down to the point where the result of these two expressions is different:
> r.mult_down(x0.val().min(), x1.val().min())
> versus
> r.mult_down(x0.min(), x1.min())
> (where r is a Rounding object)
> My guess is that the compiler needs to allocate a FloatVal object in the case we cal val(), and that causes some intermediate rounding,
> whereas it inlines everything in the case we call min() directly, which probably uses higher precision internally.  I'll try and dig a bit deeper,
> perhaps we can force the compiler to always do the rounding.

The aim is to only do the rounding where necessary, to achieve predictable results with minimal overhead.  I'm not sure what will be possible as we need many different constructs to yield consistent results (e.g. constructing a float constraint per partes versus using the linexpr sugar).  Just because of this we might be forced to do early rounding (which means less efficiency).  But maybe we could provide special API (perhaps the linexpr?) that could achieve better efficiency.

Cheers,
Filip

-----Original Message-----
From: Christian Schulte [mailto:cschulte at kth.se] 
Sent: Thursday, August 11, 2016 4:05 PM
To: Konvicka Filip; users at gecode.org
Subject: RE: [gecode-users] Freeze with MSVC 2015 optimized build

Hi Filip and all,

I finally added a fix to the trunk. I now check for MSVC whether SSE is used
and then fall back.

I also tried to find out whether there is macro for GCC that tells you this,
but I did not find anything. 

My question now is: should I rather enable the optimized rounding for
platforms where we are sure it works (that would be just MSVC x86 no SSE, so
quite boring)?

Cheers
Christian

--
Christian Schulte, www.gecode.org/~schulte
Professor of Computer Science, KTH, cschulte at kth.se
Expert Researcher, SICS, cschulte at sics.se


-----Original Message-----
From: Konvicka Filip [mailto:Filip.Konvicka at logis.cz] 
Sent: Wednesday, May 18, 2016 11:04
To: cschulte at kth.se; users at gecode.org
Subject: RE: [gecode-users] Freeze with MSVC 2015 optimized build

Hi Christian,

Fortunately this wasn't much work in the end...  I'm happy that we can
switch to MSVC 2015 now :)  I'll also run the tests in our RHEL and Debian
environments to see whether we're good on those platforms as well.

On the Gecode download page you're mentioning some issues with floats on the
Mac OS X; I wonder whether those could have the same root cause.  So it may
be worth checking whether the problems still persist.

Cheers,
Filip

-----Original Message-----
From: Christian Schulte [mailto:cschulte at kth.se]
Sent: Wednesday, May 18, 2016 10:03 AM
To: Konvicka Filip; users at gecode.org
Subject: RE: [gecode-users] Freeze with MSVC 2015 optimized build

Hi Filip,

Thanks a lot for your hard work. That sounds very encouraging, indeed! The
#ifdef is a piece of cake, of course.

No blame from me on you ;-)

Cheers
Christian

--
Christian Schulte, www.gecode.org/~schulte Professor of Computer Science,
KTH, cschulte at kth.se Expert Researcher, SICS, cschulte at sics.se


-----Original Message-----
From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On Behalf
Of Filip Konvicka
Sent: Wednesday, May 18, 2016 09:57
To: users at gecode.org
Subject: Re: [gecode-users] Freeze with MSVC 2015 optimized build

Hi,

So, I've spent some time investigating.  Until now I haven't looked into the
"new" FloatVar code contributed by Vincent and you guys, and it looks like
it inherits some ideas, maybe even files from our initial implementation for
Gecode 2.  So, I feel some blame for using Boost's Interval Arithmetic
library without investigating enough first: if you look at the documentation
homepage, you'll see a big red warning :)

http://www.boost.org/doc/libs/1_61_0/libs/numeric/interval/doc/interval.htm

which says that the library probably won't work with SSE2 (or at least not
out of the box).  But SSE2 is the only option for x64.

On the other hand, I'm not aware of any good alternative to this Boost
library.  I think the library is actually quite good (even though it would
use some work on supporting SSE2 better).

So I thought I'd play with the library's policies to see if I could make it
work with x64.  I looked into float.hh which defines what exact interval
datatype is used.  It looks like changing from 'rounded_arith_opp' to
'rounded_arith_std' fixes the issues that we're observing.  If you're
interested the description of those types is available here:

http://www.boost.org/doc/libs/1_61_0/libs/numeric/interval/doc/rounding.htm

I've run the Float tests with this change and they all seem to pass. 
Compared to the _opp version the total runtime running the Float testsuite
increased by 50%. This is still fine for me; I haven't compared this with
the x86/x87 version.  Maybe Gecode could use some #ifdef to choose between
_opp and _std based on whether the compiler/architecture setup is known to
be safe for _opp or not.

Cheers,
Filip

> Hi Filip,
>
> Thanks for all the info and checking. I'll have a look a little later.
>
> Best
> Christian
>
> --
> Christian Schulte, www.gecode.org/~schulte Professor of Computer 
> Science, KTH, cschulte at kth.se Expert Researcher, SICS, 
> cschulte at sics.se
>
> -----Original Message-----
> From: users-bounces at gecode.org [mailto:users-bounces at gecode.org] On 
> Behalf Of Filip Konvicka
> Sent: Monday, April 4, 2016 09:15
> To: users at gecode.org
> Subject: Re: [gecode-users] Freeze with MSVC 2015 optimized build
>
> Hi,
>
> You said that you have uploaded packages recently; I assume that it 
> was Gecode-4.4.0-x64-2015.msi.  I compiled and linked using this with 
> MSVC
> 2015 Update 2 and it also freezes on the testcase.  Replacing this 
> with the MSVC 2013 package (Gecode-4.4.0-x64-2013.msi) works fine, 
> even using the same toolset.
>
> Cheers,
> Filip
>
>> Hi,
>>
>> I have updated to MSVC 2015 update 2, compiled the current Gecode 
>> trunk for x64, and my testcase from the beginning of this thread 
>> still freezes (the one from Sep 3rd 2015 - I have attached it to this 
>> mail for convenience).
>>
>> I also tried running Float::Arithmetic::Div::Sol::A and that test 
>> still fails.  For some reason 'make check' only runs a small subset 
>> of tests, so I ran this manually like this:
>>
>> $ test/test -test Float::Arithmetic::Div::Sol::A 
>> Float::Arithmetic::Div::Sol::A -
>> Options: -seed 1 -test Float::Arithmetic::Div::Sol::A
>>
>> Another try failed with a different seed number:
>> $ test/test -test Float::Arithmetic::Div Float::Arithmetic::Div::A
>> +++++ Float::Arithmetic::Div::B +++++ Float::Arithmetic::Div::C +++++
>> Float::Arithmetic::Div::Sol::A -
>> Options: -seed 1975575111 -test Float::Arithmetic::Div::Sol::A
>>
>> Thanks,
>> Filip
>>
>>> Christian,
>>>
>>> Thanks.  I was referring to this September & October thread - there 
>>> were issues with Gecode freezing on some FloatVar problems (my 
>>> testcase and your "Float::Arithmetic::Div::C") with MSVC 2015, and 
>>> you said then that it might be resolved by not using SSE2 (but that 
>>> Guido would investigate more).  We also identified a number of float 
>>> tests that were failing on GCC 5 (not with GCC 4.9).
>>>
>>> I can try re-running our tests here with the current trunk to see if 
>>> something changed - I just thought that I would ask directly whether 
>>> you did something specific to address these issues.  The failures 
>>> seemed a bit non-deterministic...
>>>
>>> Thanks,
>>> Filip
>>>
>>>> MSVC2015 works for Gecode.4.4.0 since its initial release, I in 
>>>> fact uploaded packages to the Gecode website last week. Since last 
>>>> week (Mar 30) the update 2 to MSVC 2015 finally also compiles the 
>>>> trunk and the upcoming Gecode 5.0.0.
>>>>
>>>> Don't know about GCC, though.
>>>>
>>>> Cheers
>>>> Christian
>>>>
>>>>
>>>>
>>>> --
>>>> Christian Schulte, www.gecode.org/~schulte Professor of Computer 
>>>> Science, KTH, cschulte at kth.se Expert Researcher, SICS, 
>>>> cschulte at sics.se
>>>>
>>>> -----Original Message-----
>>>> From: users-bounces at gecode.org
>>>> [mailto:users-bounces at gecode.org] On Behalf Of Filip Konvicka
>>>> Sent: Friday, April 1, 2016 14:41
>>>> To: users at gecode.org
>>>> Subject: Re: [gecode-users] Freeze with MSVC 2015 optimized build
>>>>
>>>> Hi Christian,
>>>>
>>>> Have you had any chance to look into supporting gcc 5 and MSVC 2015?
>>>>
>>>> Thanks,
>>>> Filip
>>>>
>>>>> Hi Filip,
>>>>>
>>>>> Thanks for the information. This really looks like a gcc problem.
>>>>> Guido, can you reproduce this behavior?
>>>>>
>>>>> Cheers
>>>>> Christian
>>>>>
>>>>> --
>>>>> Christian Schulte, www.gecode.org/~schulte Professor of Computer 
>>>>> Science, KTH, cschulte at kth.se Expert Researcher, SICS, 
>>>>> cschulte at sics.se
>>>>>
>>>>> -----Original Message-----
>>>>> From: users-bounces at gecode.org
>>>>> [mailto:users-bounces at gecode.org] On Behalf Of Filip Konvicka
>>>>> Sent: Friday, October 2, 2015 09:58 AM
>>>>> To: users at gecode.org
>>>>> Subject: Re: [gecode-users] Freeze with MSVC 2015 optimized build
>>>>>
>>>>> Hi,
>>>>>
>>>>> We were looking a bit more into 4.4.0 on Linux where we've also 
>>>>> hit some issues.
>>>>>
>>>>> All tests worked fine with gcc 4.9.3.  However, with gcc 5.2.0 
>>>>> many tests failed - see the attachements for details:
>>>>>      gecode-4.4.0-gcc-5.2.0-failed_tests.list
>>>>>      ... list of failed tests (except two memory fails below)
>>>>>      gecode-4.4.0-gcc-5.2.0-failed_tests.log
>>>>>      ... log from 'test' for failed tests
>>>>>
>>>>> Two tests ran out of memory (allocated several GBs of memory 
>>>>> before getting killed by system):
>>>>>      Set::Branch::Sparse::3
>>>>>      Set::Channel::Sorted
>>>>>
>>>>> gcc details:
>>>>> target=x86_64-linux-gnu
>>>>> GCC_VER=5.2.0
>>>>> GMP_VER=6.0.0
>>>>> MPFR_VER=3.1.3
>>>>> MPC_VER=1.0.3
>>>>> BINUTILS_VER=2.25
>>>>>
>>>>> It could also be a gcc bug of course, hard to tell.
>>>>>
>>>>> Thanks,
>>>>> Filip
>>>>>
>>>>
>>>>
>>>>
>>>> _______________________________________________
>>>> Gecode users mailing list
>>>> users at gecode.org
>>>> https://www.gecode.org/mailman/listinfo/gecode-users
>>>>
>
>
>
> _______________________________________________
> Gecode users mailing list
> users at gecode.org
> https://www.gecode.org/mailman/listinfo/gecode-users
>



_______________________________________________
Gecode users mailing list
users at gecode.org
https://www.gecode.org/mailman/listinfo/gecode-users


