<tt>
&lt;br&gt;Hi&nbsp;All,&lt;br&gt;&nbsp;&lt;br&gt;&nbsp;I&nbsp;think&nbsp;the&nbsp;problem&amp;nbsp;&nbsp;I&nbsp;am&nbsp;facing&amp;nbsp;&nbsp;with&nbsp;multiplication&nbsp;isn't&nbsp;in&nbsp;the&nbsp;propagator,&nbsp;it&nbsp;is&nbsp;related&nbsp;with&nbsp;gcc&nbsp;optimization&nbsp;flags&nbsp;and&nbsp;function&nbsp;inlining.&nbsp;I&nbsp;have&amp;nbsp;&nbsp;tried&nbsp;the&nbsp;code&nbsp;in&amp;nbsp;&nbsp;Pentium&nbsp;4&nbsp;and&nbsp;Xeon&nbsp;pcs&nbsp;(with&amp;nbsp;&nbsp;ubuntu&nbsp;6.0.3:&amp;nbsp;&nbsp;g++&nbsp;4.0.3,&nbsp;gecode-1.2.2),&amp;nbsp;&nbsp;and&nbsp;the&nbsp;program&nbsp;fails.&nbsp;I&nbsp;also&nbsp;tried&nbsp;it&nbsp;in&nbsp;a&nbsp;power&nbsp;pc&nbsp;(g++&nbsp;4.0.3,&nbsp;gecode-1.2.2&nbsp;and&nbsp;ubuntu&nbsp;6.0.3)&amp;nbsp;&nbsp;and&nbsp;it&nbsp;worked.&nbsp;I&nbsp;realized&nbsp;that&nbsp;some&nbsp;compiler&nbsp;flags&nbsp;have&nbsp;a&nbsp;strong&nbsp;inpact:&amp;nbsp;&nbsp;-ffast-math&nbsp;and&nbsp;-O3.&nbsp;When&nbsp;building&nbsp;gecode&nbsp;with&nbsp;-ffast-math&nbsp;and&nbsp;without&nbsp;-O3&nbsp;or&nbsp;with&nbsp;-O3&nbsp;and&nbsp;without&nbsp;-ffast-math&nbsp;the&nbsp;program&nbsp;works&nbsp;very&nbsp;well.&nbsp;Both&nbsp;compiler&nbsp;flags&nbsp;seems&nbsp;to&nbsp;be&nbsp;not&nbsp;compatible&nbsp;in&nbsp;this&nbsp;case&nbsp;(processor&nbsp;+&nbsp;gcc&nbsp;version).&nbsp;Even&nbsp;further,&nbsp;when&nbsp;debug&nbsp;option&nbsp;is&nbsp;turned&nbsp;on&nbsp;from&nbsp;configure&nbsp;all&nbsp;works&nbsp;(i&nbsp;think&nbsp;debug&nbsp;option&nbsp;disables&nbsp;compiler&nbsp;optimization&nbsp;and&nbsp;function&nbsp;inlining).&lt;br&gt;&nbsp;&lt;br&gt;&nbsp;In&nbsp;my&nbsp;particular&nbsp;case&nbsp;the&nbsp;problem&nbsp;is&nbsp;with&nbsp;c_d&nbsp;function&nbsp;at&nbsp;line&nbsp;45&nbsp;of&nbsp;gecode/int/arithmetic/mult.icc,&nbsp;because&nbsp;the&nbsp;function&nbsp;has<br>
&nbsp;forceinline,&nbsp;I&nbsp;think&nbsp;that&nbsp;the&nbsp;compiler&nbsp;produces&nbsp;some&nbsp;wrong&nbsp;optimized&nbsp;code.&nbsp;Telling&nbsp;gcc&nbsp;to&nbsp;not&nbsp;inline&nbsp;this&nbsp;function&nbsp;also&nbsp;solves&nbsp;the&nbsp;problem&nbsp;in&nbsp;both&nbsp;pcs.&lt;br&gt;&nbsp;&lt;br&gt;&nbsp;&lt;br&gt;&lt;br&gt;&nbsp;Cheers&lt;br&gt;&nbsp;Alejandro&lt;br&gt;&nbsp;&lt;br&gt;&nbsp;&lt;br&gt;&nbsp;&lt;br&gt;&lt;br&gt;&lt;b&gt;&lt;i&gt;Christian&nbsp;Schulte&nbsp;&amp;lt;schulte@imit.kth.se&amp;gt;&lt;/i&gt;&lt;/b&gt;&nbsp;wrote:&lt;blockquote&nbsp;class=&quot;replbq&quot;&nbsp;style=&quot;border-left:&nbsp;2px&nbsp;solid&nbsp;rgb(16,&nbsp;16,&nbsp;255);&nbsp;margin-left:&nbsp;5px;&nbsp;padding-left:&nbsp;5px;&quot;&gt;&nbsp;Please,&nbsp;let&nbsp;me&nbsp;reiterate&nbsp;the&nbsp;issues&nbsp;raised&nbsp;in&nbsp;the&nbsp;two&nbsp;previous&nbsp;replies:&lt;br&gt;&lt;br&gt;&nbsp;Never,&nbsp;never&nbsp;ever,&nbsp;report&nbsp;a&nbsp;problem&nbsp;without&nbsp;telling&lt;br&gt;&nbsp;&nbsp;-&nbsp;Gecode&nbsp;version&nbsp;number&lt;br&gt;&nbsp;&nbsp;-&nbsp;platform&nbsp;used&nbsp;(operating&nbsp;system&nbsp;plus&nbsp;C++&nbsp;compiler)&lt;br&gt;&lt;br&gt;In&nbsp;this&nbsp;case,&nbsp;early&nbsp;versions&nbsp;of&nbsp;Gecode&nbsp;had&nbsp;actually&nbsp;a&nbsp;bug&nbsp;in&nbsp;multiplication&lt;br&gt;(but&nbsp;actually&nbsp;not&nbsp;incorrectness&nbsp;just&nbsp;a&nbsp;&nbsp;quirk).&nbsp;So&nbsp;did&nbsp;you&nbsp;double&nbsp;check&nbsp;that&lt;br&gt;the&nbsp;program&nbsp;you&nbsp;wrote&nbsp;is&nbsp;the&nbsp;program&nbsp;you&nbsp;executed?&lt;br&gt;&lt;br&gt;Cheers&lt;br&gt;Christian&lt;br&gt;&lt;br&gt;--&lt;br&gt;Christian&nbsp;Schulte,&nbsp;http://www.imit.kth.se/~schulte/&nbsp;&lt;br&gt;&lt;br&gt;-----Original&nbsp;Message-----&lt;br&gt;From:<br>
&nbsp;users-bounces@gecode.org&nbsp;[mailto:users-bounces@gecode.org]&nbsp;On&nbsp;Behalf&lt;br&gt;Of&nbsp;Mikael&nbsp;Zayenz&nbsp;Lagerkvist&lt;br&gt;Sent:&nbsp;Wednesday,&nbsp;September&nbsp;13,&nbsp;2006&nbsp;8:22&nbsp;AM&lt;br&gt;To:&nbsp;Alejandro&nbsp;Arbelaez&lt;br&gt;Cc:&nbsp;users@gecode.org&lt;br&gt;Subject:&nbsp;Re:&nbsp;[gecode-users]&nbsp;question&nbsp;about&nbsp;mult&nbsp;propagator&lt;br&gt;&lt;br&gt;&lt;br&gt;Hello&nbsp;Alejandro,&lt;br&gt;&lt;br&gt;When&nbsp;I&nbsp;tried&nbsp;your&nbsp;program&nbsp;with&nbsp;Gecode&nbsp;1.2.2&nbsp;it&nbsp;worked&nbsp;as&nbsp;it&nbsp;should,&nbsp;i.e.,&nbsp;it&lt;br&gt;printed&nbsp;OK&lt;br&gt;A:&nbsp;316&nbsp;B:&nbsp;120&nbsp;tmp:&nbsp;37920&lt;br&gt;&lt;br&gt;What&nbsp;version&nbsp;of&nbsp;Gecode&nbsp;are&nbsp;you&nbsp;using?&nbsp;What&nbsp;platform&nbsp;are&nbsp;you&nbsp;using&nbsp;it&nbsp;on?&lt;br&gt;&lt;br&gt;Cheers,&lt;br&gt;Mikael&lt;br&gt;&lt;br&gt;On&nbsp;9/13/06,&nbsp;Alejandro&nbsp;Arbelaez&nbsp;&lt;a_le_jo55@yahoo.com&gt;&nbsp;wrote:&lt;br&gt;&amp;gt;&nbsp;Hi&nbsp;all,&lt;br&gt;&amp;gt;&lt;br&gt;&amp;gt;&nbsp;I&nbsp;don't&nbsp;understand&nbsp;why&nbsp;the&nbsp;following&nbsp;program&nbsp;fails,&lt;br&gt;&amp;gt;&lt;br&gt;&amp;gt;&nbsp;I&nbsp;only&nbsp;want&nbsp;to&nbsp;create&nbsp;a&nbsp;propagator&nbsp;for&lt;br&gt;&amp;gt;&nbsp;a*b=:tmp,&nbsp;where&nbsp;a=:316&nbsp;and&nbsp;b=:120&lt;br&gt;&amp;gt;&nbsp;so&nbsp;after&nbsp;the&nbsp;propagation&nbsp;(status)&nbsp;tmp&nbsp;is&nbsp;going&nbsp;to&nbsp;be&nbsp;equal&nbsp;to&nbsp;37920,&nbsp;&lt;br&gt;&amp;gt;&nbsp;and&nbsp;that&nbsp;is&nbsp;the&nbsp;value&nbsp;that&nbsp;tmp&nbsp;shows&nbsp;in&nbsp;the&nbsp;last&nbsp;line&nbsp;of&nbsp;the&nbsp;program,&nbsp;&lt;br&gt;&amp;gt;&nbsp;but&nbsp;the&nbsp;status&nbsp;of&nbsp;&nbsp;A&nbsp;is&nbsp;failed&nbsp;????&lt;br&gt;&amp;gt;&lt;br&gt;&amp;gt;<br>
&nbsp;#include&nbsp;&quot;gecode/int.hh&quot;&lt;br&gt;&amp;gt;&nbsp;#include&nbsp;&quot;gecode/kernel.hh&quot;&lt;br&gt;&amp;gt;&nbsp;#include&nbsp;&lt;iostream&gt;&lt;br&gt;&amp;gt;&lt;br&gt;&amp;gt;&nbsp;using&nbsp;namespace&nbsp;Gecode;&lt;br&gt;&amp;gt;&lt;br&gt;&amp;gt;&nbsp;class&nbsp;Alejo&nbsp;:&nbsp;public&nbsp;Space&nbsp;{&lt;br&gt;&amp;gt;&nbsp;public:&lt;br&gt;&amp;gt;&nbsp;&nbsp;&nbsp;Alejo(void)&nbsp;{}&lt;br&gt;&amp;gt;&nbsp;&nbsp;&nbsp;virtual&nbsp;Space*&nbsp;copy(bool&nbsp;share)&nbsp;{&lt;br&gt;&amp;gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;new&nbsp;Alejo(*this);&lt;br&gt;&amp;gt;&nbsp;&nbsp;&nbsp;}&lt;br&gt;&amp;gt;&nbsp;};&lt;br&gt;&amp;gt;&lt;br&gt;&amp;gt;&nbsp;int&nbsp;main()&nbsp;{&lt;br&gt;&amp;gt;&nbsp;&nbsp;&nbsp;Alejo&nbsp;A;&lt;br&gt;&amp;gt;&nbsp;&nbsp;&nbsp;IntVar&nbsp;a(&amp;amp;A,0,100000);&lt;br&gt;&amp;gt;&nbsp;&nbsp;&nbsp;IntVar&nbsp;b(&amp;amp;A,0,100000);&lt;br&gt;&amp;gt;&nbsp;&nbsp;&nbsp;IntVar&nbsp;tmp(&amp;amp;A,Gecode::Limits::Int::int_min,&lt;br&gt;&amp;gt;&nbsp;Gecode::Limits::Int::int_max);&lt;br&gt;&amp;gt;&nbsp;&nbsp;&nbsp;mult(&amp;amp;A,a,b,tmp);&lt;br&gt;&amp;gt;&nbsp;&nbsp;&nbsp;eq(&amp;amp;A,a,316);&lt;br&gt;&amp;gt;&nbsp;&nbsp;&nbsp;eq(&amp;amp;A,b,120);&lt;br&gt;&amp;gt;&lt;br&gt;&amp;gt;&nbsp;&nbsp;&nbsp;unsigned&nbsp;long&nbsp;pp;&lt;br&gt;&amp;gt;&nbsp;&nbsp;&nbsp;SpaceStatus&nbsp;estado&nbsp;=&nbsp;A.status(pp);&lt;br&gt;&amp;gt;&lt;br&gt;&amp;gt;&nbsp;&nbsp;&nbsp;if(estado==SS_FAILED)&nbsp;std::cout&amp;lt;&amp;lt;&quot;FAILED&quot;&amp;lt;&lt;std::endl;&gt;&lt;br&gt;&amp;gt;&nbsp;&nbsp;&nbsp;if(estado==SS_SOLVED)&nbsp;std::cout&amp;lt;&amp;lt;&quot;OK&quot;&amp;lt;&lt;std::endl;&gt;&lt;br&gt;&amp;gt;&nbsp;&nbsp;&nbsp;std::cout&amp;lt;&amp;lt;&quot;A:&nbsp;&quot;&amp;lt;&lt;a&gt;&amp;lt;&amp;lt;&quot;&nbsp;B:&nbsp;&quot;&amp;lt;&lt;b&gt;&amp;lt;&amp;lt;&quot;&nbsp;tmp:&nbsp;&quot;&amp;lt;&lt;tmp&gt;&amp;lt;&lt;std::endl;&gt;&lt;br&gt;&amp;gt;&nbsp;&nbsp;&nbsp;return<br>
&nbsp;0;&lt;br&gt;&amp;gt;&nbsp;}&lt;br&gt;&amp;gt;&lt;br&gt;&amp;gt;&lt;br&gt;&amp;gt;&nbsp;Cheers&lt;br&gt;&amp;gt;&nbsp;Alejandro&lt;br&gt;&amp;gt;&nbsp;_______________________________________________&lt;br&gt;&amp;gt;&nbsp;Gecode&nbsp;users&nbsp;mailing&nbsp;list&lt;br&gt;&amp;gt;&nbsp;users@gecode.org&nbsp;https://www.gecode.org/mailman/listinfo/gecode-users&lt;br&gt;&amp;gt;&lt;br&gt;&amp;gt;&lt;br&gt;&amp;gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;--&nbsp;&lt;br&gt;Mikael&nbsp;Zayenz&nbsp;Lagerkvist,&nbsp;http://www.ict.kth.se/~zayenz/&lt;br&gt;&lt;br&gt;_______________________________________________&lt;br&gt;Gecode&nbsp;users&nbsp;mailing&nbsp;list&lt;br&gt;users@gecode.org&lt;br&gt;https://www.gecode.org/mailman/listinfo/gecode-users&lt;br&gt;&lt;br&gt;&lt;/std::endl;&gt;&lt;/tmp&gt;&lt;/b&gt;&lt;/a&gt;&lt;/std::endl;&gt;&lt;/std::endl;&gt;&lt;/iostream&gt;&lt;/a_le_jo55@yahoo.com&gt;&lt;/blockquote&gt;&lt;a&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/a&gt;&lt;p&gt;&amp;#32;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;hr&nbsp;size=1&gt;Talk&nbsp;is&nbsp;cheap.&nbsp;Use&nbsp;Yahoo!&nbsp;Messenger&nbsp;to&nbsp;make&nbsp;PC-to-Phone&nbsp;calls.&nbsp;&lt;a&nbsp;href=&quot;http://us.rd.yahoo.com/mail_us/taglines/postman7/*http://us.rd.yahoo.com/evt=39666/*http://messenger.yahoo.com&quot;&gt;&nbsp;Great&nbsp;rates&nbsp;starting&nbsp;at&nbsp;1&amp;cent;/min.
</tt>
