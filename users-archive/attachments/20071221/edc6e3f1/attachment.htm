<tt>
&lt;html&gt;&lt;body&nbsp;style=&quot;word-wrap:&nbsp;break-word;&nbsp;-webkit-nbsp-mode:&nbsp;space;&nbsp;-webkit-line-break:&nbsp;after-white-space;&nbsp;&quot;&gt;&lt;div&gt;&lt;div&gt;Gustavo&nbsp;Gutierrez&nbsp;wrote:&lt;/div&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;div&nbsp;style=&quot;word-wrap:&nbsp;break-word;&nbsp;-webkit-nbsp-mode:&nbsp;space;&nbsp;-webkit-line-break:&nbsp;after-white-space;&nbsp;&quot;&gt;&lt;div&gt;lems&nbsp;with&nbsp;VarMaps.&nbsp;As&nbsp;you&nbsp;said&nbsp;there&nbsp;are&nbsp;two&nbsp;ways&nbsp;to&nbsp;fill&nbsp;a&nbsp;VarMap:&nbsp;by&nbsp;using&nbsp;put&nbsp;and&nbsp;putArray&nbsp;methods&nbsp;and&nbsp;by&nbsp;iterating&nbsp;on&nbsp;actor&nbsp;specifications.&nbsp;I&nbsp;tried&nbsp;the&nbsp;second&nbsp;but&nbsp;because&nbsp;of&nbsp;a&nbsp;design&nbsp;decision&nbsp;in&nbsp;the&nbsp;past&nbsp;we&nbsp;cannot&nbsp;use&nbsp;it.&nbsp;&amp;nbsp;In&nbsp;our&nbsp;design&nbsp;we&nbsp;have&nbsp;a&nbsp;class&nbsp;GenericSpace&nbsp;which&nbsp;inherits&nbsp;from&nbsp;Gecode::Space.&nbsp;This&nbsp;class&nbsp;has&nbsp;an&nbsp;attribute&nbsp;that&nbsp;contains&nbsp;a&nbsp;DynamicArray&nbsp;with&nbsp;all&nbsp;variables&nbsp;declared&nbsp;in&nbsp;a&nbsp;computation&nbsp;space.&nbsp;This&nbsp;array&nbsp;contains&nbsp;VarBase&nbsp;pointers&nbsp;(VarImpBase&nbsp;in&nbsp;the&nbsp;trunk&nbsp;version).&nbsp;To&nbsp;fill&nbsp;the&nbsp;VarMap&nbsp;i&nbsp;am&amp;nbsp;using&amp;nbsp;the&nbsp;following&nbsp;code:&lt;/div&gt;&lt;div&gt;&lt;br&nbsp;class=&quot;webkit-block-placeholder&quot;&gt;&lt;/div&gt;&lt;div&gt;&lt;div&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0px;&nbsp;font:&nbsp;normal&nbsp;normal&nbsp;normal&nbsp;10px/normal&nbsp;Monaco;&nbsp;&quot;&gt;&lt;span&nbsp;style=&quot;color:&nbsp;#aa0d91&quot;&gt;void&lt;/span&gt;&nbsp;GenericSpace::merge(GenericSpace&nbsp;*src)&nbsp;{&lt;/div&gt;&lt;div&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0px;&nbsp;font:&nbsp;normal&nbsp;normal&nbsp;normal&nbsp;10px/normal&nbsp;Monaco;&nbsp;&quot;&gt;&amp;nbsp;&nbsp;Reflection::VarMap&nbsp;vm;&lt;/div&gt;&lt;div&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0px;&nbsp;font:&nbsp;normal&nbsp;normal&nbsp;normal&nbsp;10px/normal&nbsp;Monaco;&nbsp;&quot;&gt;&amp;nbsp;&nbsp;&lt;span&nbsp;style=&quot;color:&nbsp;#aa0d91&quot;&gt;for&lt;/span&gt;&nbsp;(&lt;span&nbsp;style=&quot;color:&nbsp;#aa0d91&quot;&gt;int&lt;/span&gt;&nbsp;i&nbsp;=&nbsp;&lt;span&nbsp;style=&quot;color:&nbsp;#1c00cf&quot;&gt;0&lt;/span&gt;;&nbsp;i&nbsp;&amp;lt;&nbsp;src-&amp;gt;vars.getSize();&nbsp;i++)&nbsp;{&lt;/div&gt;&lt;div&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0px;&nbsp;font:&nbsp;normal&nbsp;normal&nbsp;normal&nbsp;10px/normal&nbsp;Monaco;&nbsp;&quot;&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/span&gt;std::stringstream&nbsp;s;&lt;/div&gt;&lt;div&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0px;&nbsp;font:&nbsp;normal&nbsp;normal&nbsp;normal&nbsp;10px/normal&nbsp;Monaco;&nbsp;&quot;&gt;&amp;nbsp;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/span&gt;s&nbsp;&amp;lt;&amp;lt;&nbsp;&lt;span&nbsp;style=&quot;color:&nbsp;#c41a16&quot;&gt;&quot;src-&quot;&lt;/span&gt;&nbsp;&amp;lt;&amp;lt;&nbsp;i;&lt;/div&gt;&lt;div&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0px;&nbsp;font:&nbsp;normal&nbsp;normal&nbsp;normal&nbsp;10px/normal&nbsp;Monaco;&nbsp;&quot;&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/span&gt;vm.put(src,src-&amp;gt;vars.getVar(i),s.str().c_str());&lt;/div&gt;&lt;div&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0px;&nbsp;font:&nbsp;normal&nbsp;normal&nbsp;normal&nbsp;10px/normal&nbsp;Monaco;&nbsp;&quot;&gt;&amp;nbsp;&nbsp;}&lt;/div&gt;&lt;div&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0px;&nbsp;font:&nbsp;normal&nbsp;normal&nbsp;normal&nbsp;10px/normal&nbsp;Monaco;&nbsp;&quot;&gt;&amp;nbsp;&nbsp;printf(&lt;span&nbsp;style=&quot;color:&nbsp;#c41a16&quot;&gt;&quot;End&nbsp;merge&nbsp;operation\n&quot;&lt;/span&gt;);fflush(stdout);&lt;/div&gt;&lt;div&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0px;&nbsp;font:&nbsp;normal&nbsp;normal&nbsp;normal&nbsp;10px/normal&nbsp;Monaco;&nbsp;&quot;&gt;}&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&nbsp;class=&quot;webkit-block-placeholder&quot;&gt;&lt;/div&gt;getVar(i)&nbsp;returns&nbsp;a&nbsp;reference&nbsp;to&nbsp;the&nbsp;VarImpBase&nbsp;stored&nbsp;at&nbsp;position&nbsp;i&nbsp;in&nbsp;the&nbsp;array.&nbsp;&amp;nbsp;When&nbsp;building&nbsp;the&nbsp;following&nbsp;error&nbsp;appears:&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&nbsp;class=&quot;webkit-block-placeholder&quot;&gt;&lt;/div&gt;&lt;div&gt;You&nbsp;cannot&nbsp;use&nbsp;put&nbsp;with&nbsp;a&nbsp;VarImBase*,&nbsp;you&nbsp;always&nbsp;have&nbsp;to&nbsp;go&nbsp;through&nbsp;the&nbsp;actual&nbsp;variable.&nbsp;&amp;nbsp;This&nbsp;is&nbsp;like&nbsp;update:&nbsp;You&nbsp;cannot&nbsp;call&nbsp;update&nbsp;on&nbsp;a&nbsp;VarImpBase*,&nbsp;only&nbsp;on&nbsp;a&nbsp;Var&nbsp;(or&nbsp;View).&nbsp;&amp;nbsp;The&nbsp;reason&nbsp;is&nbsp;that&nbsp;we&nbsp;do&nbsp;not&nbsp;want&nbsp;variables&nbsp;to&nbsp;have&nbsp;any&nbsp;virtual&nbsp;functions.&nbsp;&amp;nbsp;I&nbsp;guess&nbsp;you&nbsp;have&nbsp;some&nbsp;flag&nbsp;indicating&nbsp;which&nbsp;VarImpBase*&nbsp;has&nbsp;which&nbsp;actual&nbsp;variable&nbsp;type,&nbsp;so&nbsp;that&nbsp;you&nbsp;can&nbsp;copy&nbsp;(update)&nbsp;variables.&nbsp;&amp;nbsp;You&nbsp;should&nbsp;use&nbsp;the&nbsp;same&nbsp;information&nbsp;for&nbsp;merge.&nbsp;&amp;nbsp;Cast&nbsp;the&nbsp;VarImpBase*&nbsp;to&nbsp;the&nbsp;corresponding&nbsp;IntVarImp*&nbsp;(or&nbsp;SetVarImp*&nbsp;or&nbsp;whatever&nbsp;you&nbsp;have),&nbsp;then&nbsp;use&nbsp;that&nbsp;to&nbsp;get&nbsp;an&nbsp;IntVar&nbsp;(or&nbsp;SetVar...),&nbsp;and&nbsp;then&nbsp;call&nbsp;vm.put&nbsp;with&nbsp;that&nbsp;variable.&lt;/div&gt;&lt;/div&gt;&lt;br&gt;&lt;div&gt;Cheers,&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/span&gt;Guido&lt;br&nbsp;class=&quot;webkit-block-placeholder&quot;&gt;&lt;/div&gt;&lt;div&gt;&lt;br&nbsp;class=&quot;webkit-block-placeholder&quot;&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;
</tt>
