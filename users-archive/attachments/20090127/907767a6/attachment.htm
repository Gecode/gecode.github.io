<tt>
&lt;html&gt;&lt;body&nbsp;style=&quot;word-wrap:&nbsp;break-word;&nbsp;-webkit-nbsp-mode:&nbsp;space;&nbsp;-webkit-line-break:&nbsp;after-white-space;&nbsp;&quot;&gt;&lt;div&gt;&lt;div&gt;Jérémie&nbsp;Vautard&nbsp;wrote:&lt;/div&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;div&nbsp;style=&quot;word-wrap:&nbsp;break-word;&nbsp;-webkit-nbsp-mode:&nbsp;space;&nbsp;-webkit-line-break:&nbsp;after-white-space;&nbsp;&quot;&gt;&lt;div&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0px;&nbsp;&quot;&gt;&lt;font&nbsp;face=&quot;Helvetica&quot;&nbsp;size=&quot;3&quot;&nbsp;style=&quot;font:&nbsp;12.0px&nbsp;Helvetica&quot;&gt;I&nbsp;am&nbsp;coding&nbsp;a&nbsp;little&nbsp;stuff&nbsp;that&nbsp;needs&nbsp;to&nbsp;extract&nbsp;some&nbsp;potential&nbsp;partial&nbsp;solutions&nbsp;from&nbsp;a&nbsp;constraint&nbsp;problem.&nbsp;To&nbsp;do&nbsp;this,&nbsp;I&nbsp;have&nbsp;a&nbsp;(pointer&nbsp;to&nbsp;a)Gecode::Space&nbsp;S&nbsp;with&nbsp;an&nbsp;array&nbsp;of&nbsp;IntVar,&nbsp;and&nbsp;I&nbsp;do&nbsp;the&nbsp;following&nbsp;:&amp;nbsp;&lt;/font&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0px;&nbsp;&quot;&gt;&lt;font&nbsp;face=&quot;Helvetica&quot;&nbsp;size=&quot;3&quot;&nbsp;style=&quot;font:&nbsp;12.0px&nbsp;Helvetica&quot;&gt;-&nbsp;I&nbsp;have&nbsp;initially&nbsp;propared&nbsp;a&nbsp;set&nbsp;of&nbsp;IntVarArgs,&nbsp;each&nbsp;containing&nbsp;a&nbsp;given&nbsp;subset&nbsp;of&nbsp;the&nbsp;variables&nbsp;of&nbsp;S.&amp;nbsp;&lt;/font&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0px;&nbsp;&quot;&gt;&lt;font&nbsp;face=&quot;Helvetica&quot;&nbsp;size=&quot;3&quot;&nbsp;style=&quot;font:&nbsp;12.0px&nbsp;Helvetica&quot;&gt;-&nbsp;I&nbsp;create&nbsp;S2&nbsp;to&nbsp;be&nbsp;a&nbsp;clone&nbsp;of&nbsp;S&nbsp;(&nbsp;via&nbsp;S2&nbsp;=&nbsp;S-&gt;clone();&nbsp;)&lt;/font&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0px;&nbsp;&quot;&gt;&lt;font&nbsp;face=&quot;Helvetica&quot;&nbsp;size=&quot;3&quot;&nbsp;style=&quot;font:&nbsp;12.0px&nbsp;Helvetica&quot;&gt;-&nbsp;I&nbsp;choose&nbsp;one&nbsp;of&nbsp;the&nbsp;IntVarArgs&nbsp;I&nbsp;initially&nbsp;created,&nbsp;let's&nbsp;call&nbsp;it&nbsp;V,&nbsp;and&nbsp;I&nbsp;create&nbsp;a&nbsp;new&nbsp;IntVarArgs&nbsp;V2(V);&lt;/font&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0px;&nbsp;&quot;&gt;&lt;font&nbsp;face=&quot;Helvetica&quot;&nbsp;size=&quot;3&quot;&nbsp;style=&quot;font:&nbsp;12.0px&nbsp;Helvetica&quot;&gt;-&nbsp;I&nbsp;update&nbsp;all&nbsp;the&nbsp;variables&nbsp;of&nbsp;V2&nbsp;so&nbsp;that&nbsp;they&nbsp;&quot;become&quot;&nbsp;variables&nbsp;of&nbsp;S2&nbsp;:&nbsp;for&nbsp;(int&nbsp;i=0;i&amp;lt;V2.size();i++)&nbsp;&amp;nbsp;&nbsp;V2[i].update(S2,true,V[i]);&lt;/font&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0px;&nbsp;&quot;&gt;&lt;font&nbsp;face=&quot;Helvetica&quot;&nbsp;size=&quot;3&quot;&nbsp;style=&quot;font:&nbsp;12.0px&nbsp;Helvetica&quot;&gt;-&nbsp;I&nbsp;post&nbsp;a&nbsp;branching&nbsp;in&nbsp;S2&nbsp;with&nbsp;the&nbsp;variables&nbsp;of&nbsp;V2.&nbsp;e.g.&nbsp;:&nbsp;&amp;nbsp;Gecode::branch(S2,V2,INT_VAR_SIZE_MIN,INT_VAL_MIN);&lt;/font&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0px;&nbsp;font:&nbsp;normal&nbsp;normal&nbsp;normal&nbsp;12px/normal&nbsp;Helvetica;&nbsp;min-height:&nbsp;14px;&nbsp;&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0px;&nbsp;&quot;&gt;&lt;font&nbsp;face=&quot;Helvetica&quot;&nbsp;size=&quot;3&quot;&nbsp;style=&quot;font:&nbsp;12.0px&nbsp;Helvetica&quot;&gt;However,&nbsp;when&nbsp;I&nbsp;search&nbsp;on&nbsp;S2&nbsp;(with&nbsp;the&nbsp;DFS&nbsp;engine),&nbsp;the&nbsp;returned&nbsp;solution&nbsp;do&nbsp;not&nbsp;have&nbsp;the&nbsp;corresponding&nbsp;variables&nbsp;domain&nbsp;reduces&nbsp;to&nbsp;a&nbsp;singleton.&nbsp;(I&nbsp;check&nbsp;this&nbsp;via&nbsp;an&nbsp;IntVar&nbsp;public&nbsp;member&nbsp;of&nbsp;my&nbsp;Gecode::Space&nbsp;descendant&nbsp;class&nbsp;that&nbsp;I&nbsp;did&nbsp;not&nbsp;forget&nbsp;to&nbsp;update&nbsp;in&nbsp;the&nbsp;copy&nbsp;constructor&nbsp;:-)&nbsp;)&lt;/font&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0px;&nbsp;&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0px;&nbsp;&quot;&gt;I&nbsp;join&nbsp;an&nbsp;small&nbsp;example&nbsp;that&nbsp;illustrates&nbsp;my&nbsp;issue&nbsp;:&nbsp;for&nbsp;this&nbsp;problem&nbsp;with&nbsp;one&nbsp;variable&nbsp;and&nbsp;no&nbsp;constraints,&nbsp;I&nbsp;obtain&nbsp;2&nbsp;solutions&nbsp;(this&nbsp;number&nbsp;is&nbsp;correct),&nbsp;but,&nbsp;for&nbsp;both&nbsp;of&nbsp;them,&nbsp;the&nbsp;'v'&nbsp;member&nbsp;is&nbsp;still&nbsp;[0..1]...&lt;/div&gt;&lt;div&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0px;&nbsp;&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0px;&nbsp;&quot;&gt;I&nbsp;most&nbsp;likely&nbsp;have&nbsp;missed&nbsp;something,&nbsp;but&nbsp;I&nbsp;don't&nbsp;understand&nbsp;what....&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;The&nbsp;problem&nbsp;is&nbsp;that&nbsp;you&nbsp;cannot&nbsp;use&nbsp;update&nbsp;outside&nbsp;the&nbsp;Space's&nbsp;copy&nbsp;constructor&nbsp;(or&nbsp;any&nbsp;method&nbsp;it&nbsp;calls&nbsp;in&nbsp;turn).&nbsp;&amp;nbsp;Copying&nbsp;uses&nbsp;forwarding&nbsp;pointers&nbsp;and&nbsp;other&nbsp;&quot;magic&quot;&nbsp;behind&nbsp;the&nbsp;scenes,&nbsp;so&nbsp;when&nbsp;you&nbsp;clone&nbsp;a&nbsp;space,&nbsp;some&nbsp;clean-up&nbsp;is&nbsp;done&nbsp;after&nbsp;all&nbsp;the&nbsp;updates.&lt;/div&gt;&lt;div&gt;I&nbsp;think&nbsp;for&nbsp;the&nbsp;problem&nbsp;you're&nbsp;describing,&nbsp;you&nbsp;might&nbsp;want&nbsp;to&nbsp;use&nbsp;arrays&nbsp;of&nbsp;indices&nbsp;for&nbsp;describing&nbsp;the&nbsp;subsets&nbsp;instead&nbsp;of&nbsp;using&nbsp;IntVarArgs&nbsp;directly.&nbsp;&amp;nbsp;Then&nbsp;you&nbsp;don't&nbsp;have&nbsp;to&nbsp;mess&nbsp;with&nbsp;update,&nbsp;but&nbsp;you&nbsp;can&nbsp;just&nbsp;create&nbsp;an&nbsp;IntVarArgs&nbsp;and&nbsp;initialize&nbsp;it&nbsp;directly&nbsp;from&nbsp;the&nbsp;IntVarArray&nbsp;in&nbsp;the&nbsp;space,&nbsp;using&nbsp;the&nbsp;indices.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Cheers,&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/span&gt;Guido&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;
</tt>
