<tt>
&lt;html&gt;&lt;head&gt;&lt;/head&gt;&lt;body&nbsp;style=&quot;word-wrap:&nbsp;break-word;&nbsp;-webkit-nbsp-mode:&nbsp;space;&nbsp;-webkit-line-break:&nbsp;after-white-space;&nbsp;&quot;&gt;Hi,&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;you&nbsp;are&nbsp;running&nbsp;into&nbsp;these&nbsp;problems&nbsp;because&nbsp;I&nbsp;didn't&nbsp;really&nbsp;take&nbsp;care&nbsp;that&nbsp;the&nbsp;registry&nbsp;can&nbsp;be&nbsp;extended&nbsp;by&nbsp;users&nbsp;-&nbsp;sorry&nbsp;about&nbsp;that.&nbsp;&nbsp;I'll&nbsp;put&nbsp;the&nbsp;helper&nbsp;functions&nbsp;in&nbsp;a&nbsp;header&nbsp;so&nbsp;you&nbsp;can&nbsp;include&nbsp;them.&nbsp;&nbsp;The&nbsp;linker&nbsp;problems&nbsp;are&nbsp;due&nbsp;to&nbsp;missing&nbsp;export&nbsp;declarations.&nbsp;&nbsp;You&nbsp;can&nbsp;probably&nbsp;work&nbsp;around&nbsp;that&nbsp;problem&nbsp;by&nbsp;compiling&nbsp;Gecode&nbsp;with&nbsp;the&nbsp;--disable-gcc-visibility&nbsp;configure&nbsp;switch.&nbsp;&nbsp;I'll&nbsp;also&nbsp;fix&nbsp;that.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Cheers,&lt;/div&gt;&lt;div&gt;Guido&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;div&gt;&lt;div&gt;On&nbsp;7&nbsp;May&nbsp;2012,&nbsp;at&nbsp;21:58,&nbsp;Jean-Noël&nbsp;Monette&nbsp;wrote:&lt;/div&gt;&lt;br&nbsp;class=&quot;Apple-interchange-newline&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;div&gt;Hello,&lt;br&gt;&lt;br&gt;I&nbsp;would&nbsp;like&nbsp;to&nbsp;extend&nbsp;the&nbsp;Gecode/Flatzinc&nbsp;interface&nbsp;to&nbsp;handle&nbsp;&quot;natively&quot;&nbsp;more&nbsp;constraints&nbsp;(that&nbsp;I&nbsp;implemented&nbsp;in&nbsp;Gecode).&nbsp;The&nbsp;way&nbsp;I&nbsp;do&nbsp;it&nbsp;is&nbsp;to&nbsp;add&nbsp;new&nbsp;constraints&nbsp;to&nbsp;the&nbsp;Registry&nbsp;global&nbsp;object.&nbsp;So&nbsp;my&nbsp;code&nbsp;looks&nbsp;like:&lt;br&gt;&lt;br&gt;#include&nbsp;&lt;gecode/flatzinc.hh&gt;&lt;br&gt;#include&nbsp;&lt;gecode/flatzinc/registry.hh&gt;&lt;br&gt;#include&nbsp;&quot;my_cstr_prop.hh&quot;&lt;br&gt;&lt;br&gt;namespace&nbsp;Gecode&nbsp;{&nbsp;namespace&nbsp;FlatZinc&nbsp;{&lt;br&gt;&lt;br&gt;void&nbsp;p_my_cstr(FlatZincSpace&amp;&nbsp;s,&nbsp;const&nbsp;ConExpr&amp;&nbsp;ce,&nbsp;AST::Node*&nbsp;ann)&nbsp;{&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IntVar&nbsp;x&nbsp;=&nbsp;getIntVar(s,&nbsp;ce[0]);&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IntVar&nbsp;y&nbsp;=&nbsp;getIntVar(s,&nbsp;ce[1]);&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;My_CSTR(s,x,y,ann2icl(ann));&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;}&lt;br&gt;&lt;br&gt;class&nbsp;MyPoster&nbsp;{&lt;br&gt;&nbsp;&nbsp;&nbsp;public:&lt;br&gt;&nbsp;&nbsp;&nbsp;MyPoster(void)&nbsp;{&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;registry().add(&quot;my_cstr&quot;,&nbsp;&amp;p_my_cstr);&lt;br&gt;&nbsp;&nbsp;&nbsp;}&lt;br&gt;};&lt;br&gt;MyPoster&nbsp;__my_poster;&lt;br&gt;}}&lt;br&gt;&lt;br&gt;This&nbsp;is&nbsp;done&nbsp;by&nbsp;&quot;monkey-see-monkey-do&quot;&nbsp;from&nbsp;the&nbsp;file&nbsp;registry.cpp.&nbsp;However,&nbsp;I&nbsp;ran&nbsp;into&nbsp;several&nbsp;problems.&nbsp;First,&nbsp;I&nbsp;had&nbsp;to&nbsp;add&nbsp;the&nbsp;definition&nbsp;of&nbsp;&quot;getIntVar&quot;&nbsp;and&nbsp;&quot;ann2icl&quot;,&nbsp;that&nbsp;I&nbsp;just&nbsp;copy-pasted&nbsp;from&nbsp;registry.cpp&nbsp;(as&nbsp;they&nbsp;are&nbsp;not&nbsp;declared&nbsp;in&nbsp;a&nbsp;header&nbsp;file,&nbsp;and&nbsp;furthermore&nbsp;are&nbsp;in&nbsp;an&nbsp;anonymous&nbsp;namespace).&nbsp;So,&nbsp;my&nbsp;question&nbsp;is&nbsp;to&nbsp;know&nbsp;if&nbsp;this&nbsp;is&nbsp;the&nbsp;way&nbsp;I'm&nbsp;suppose&nbsp;to&nbsp;do&nbsp;it,&nbsp;or&nbsp;if&nbsp;there&nbsp;is&nbsp;a&nbsp;more&nbsp;straightforward&nbsp;way&nbsp;to&nbsp;extend&nbsp;the&nbsp;Gecode/Flatzinc&nbsp;interface&nbsp;with&nbsp;new&nbsp;constraints.&lt;br&gt;&lt;br&gt;&lt;br&gt;Second&nbsp;(this&nbsp;might&nbsp;be&nbsp;more&nbsp;related&nbsp;to&nbsp;c++&nbsp;rather&nbsp;than&nbsp;Gecode,&nbsp;apologizes&nbsp;if&nbsp;this&nbsp;is&nbsp;indeed&nbsp;the&nbsp;case),&nbsp;I've&nbsp;been&nbsp;unable&nbsp;to&nbsp;link&nbsp;the&nbsp;resulting&nbsp;object&nbsp;file&nbsp;against&nbsp;libgecodeflatzinc.so&nbsp;with&nbsp;the&nbsp;following&nbsp;command&nbsp;(fz.o&nbsp;is&nbsp;the&nbsp;object&nbsp;file&nbsp;from&nbsp;fz.cpp&nbsp;in&nbsp;the&nbsp;gecode&nbsp;distrib):&lt;br&gt;&lt;br&gt;g++&nbsp;&nbsp;&nbsp;./src_c/fz.o&nbsp;./src_c/my_cstr.o&nbsp;&nbsp;&nbsp;-lgecodeflatzinc&nbsp;-lgecodedriver&nbsp;-lgecodesearch&nbsp;-lgecodeminimodel&nbsp;-lgecodeset&nbsp;-lgecodeint&nbsp;-lgecodekernel&nbsp;-lgecodesupport&lt;br&gt;&lt;br&gt;It&nbsp;yields&nbsp;the&nbsp;following&nbsp;error:&lt;br&gt;&lt;br&gt;./src_c/my_cstr.o:&nbsp;In&nbsp;function&nbsp;`global&nbsp;constructors&nbsp;keyed&nbsp;to&nbsp;_Z3NEQN6Gecode4HomeENS_6IntVarES1_NS_11IntConLevelE':&lt;br&gt;my_cstr.cpp:(.text+0x2667):&nbsp;undefined&nbsp;reference&nbsp;to&nbsp;`Gecode::FlatZinc::registry()'&lt;br&gt;my_cstr.cpp:(.text+0x2679):&nbsp;undefined&nbsp;reference&nbsp;to&nbsp;`Gecode::FlatZinc::Registry::add(std::basic_string&lt;char,&nbsp;std::char_traits&lt;char&gt;,&nbsp;std::allocator&lt;char&gt;&nbsp;&gt;&nbsp;const&amp;,&nbsp;void&nbsp;(*)(Gecode::FlatZinc::FlatZincSpace&amp;,&nbsp;Gecode::FlatZinc::ConExpr&nbsp;const&amp;,&nbsp;Gecode::FlatZinc::AST::Node*))'&lt;br&gt;&lt;br&gt;However,&nbsp;I'm&nbsp;able&nbsp;to&nbsp;link&nbsp;the&nbsp;same&nbsp;object&nbsp;file&nbsp;against&nbsp;the&nbsp;object&nbsp;files&nbsp;that&nbsp;are&nbsp;compiled&nbsp;into&nbsp;libgecodeflatzinc:&lt;br&gt;&lt;br&gt;g++&nbsp;&nbsp;./src_c/fz.o&nbsp;./src_c/my_cstr.o&nbsp;&nbsp;gecode-3.7.3/gecode/flatzinc/*.o&nbsp;-lgecodedriver&nbsp;-lgecodesearch&nbsp;-lgecodeminimodel&nbsp;-lgecodeset&nbsp;-lgecodeint&nbsp;-lgecodekernel&nbsp;-lgecodesupport&lt;br&gt;&lt;br&gt;So,&nbsp;I'm&nbsp;wondering&nbsp;why&nbsp;and&nbsp;how&nbsp;this&nbsp;is&nbsp;happening,&nbsp;and&nbsp;I&nbsp;have&nbsp;no&nbsp;clue...&nbsp;(I'm&nbsp;using&nbsp;Gecode&nbsp;3.7.1,&nbsp;compiler&nbsp;is&nbsp;gcc&nbsp;4.5.2,&nbsp;on&nbsp;Ubuntu&nbsp;11.04)&lt;br&gt;&lt;br&gt;Thank&nbsp;you&nbsp;very&nbsp;much&nbsp;for&nbsp;your&nbsp;help,&lt;br&gt;&lt;br&gt;Jean-Noël&nbsp;Monette&lt;br&gt;&lt;br&gt;&lt;br&gt;_______________________________________________&lt;br&gt;Gecode&nbsp;users&nbsp;mailing&nbsp;list&lt;br&gt;&lt;a&nbsp;href=&quot;mailto:users@gecode.org&quot;&gt;users@gecode.org&lt;/a&gt;&lt;br&gt;https://www.gecode.org/mailman/listinfo/gecode-users&lt;br&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;div&nbsp;apple-content-edited=&quot;true&quot;&gt;<br>
&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;border-collapse:&nbsp;separate;&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;font-family:&nbsp;Helvetica;&nbsp;font-style:&nbsp;normal;&nbsp;font-variant:&nbsp;normal;&nbsp;font-weight:&nbsp;normal;&nbsp;letter-spacing:&nbsp;normal;&nbsp;line-height:&nbsp;normal;&nbsp;orphans:&nbsp;2;&nbsp;text-align:&nbsp;-webkit-auto;&nbsp;text-indent:&nbsp;0px;&nbsp;text-transform:&nbsp;none;&nbsp;white-space:&nbsp;normal;&nbsp;widows:&nbsp;2;&nbsp;word-spacing:&nbsp;0px;&nbsp;-webkit-border-horizontal-spacing:&nbsp;0px;&nbsp;-webkit-border-vertical-spacing:&nbsp;0px;&nbsp;-webkit-text-decorations-in-effect:&nbsp;none;&nbsp;-webkit-text-size-adjust:&nbsp;auto;&nbsp;-webkit-text-stroke-width:&nbsp;0px;&nbsp;font-size:&nbsp;medium;&nbsp;&quot;&gt;&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;border-collapse:&nbsp;separate;&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;font-family:&nbsp;Helvetica;&nbsp;font-size:&nbsp;medium;&nbsp;font-style:&nbsp;normal;&nbsp;font-variant:&nbsp;normal;&nbsp;font-weight:&nbsp;normal;&nbsp;letter-spacing:&nbsp;normal;&nbsp;line-height:&nbsp;normal;&nbsp;orphans:&nbsp;2;&nbsp;text-indent:&nbsp;0px;&nbsp;text-transform:&nbsp;none;&nbsp;white-space:&nbsp;normal;&nbsp;widows:&nbsp;2;&nbsp;word-spacing:&nbsp;0px;&nbsp;-webkit-border-horizontal-spacing:&nbsp;0px;&nbsp;-webkit-border-vertical-spacing:&nbsp;0px;&nbsp;-webkit-text-decorations-in-effect:&nbsp;none;&nbsp;-webkit-text-size-adjust:&nbsp;auto;&nbsp;-webkit-text-stroke-width:&nbsp;0px;&nbsp;&quot;&gt;&lt;div&nbsp;style=&quot;word-wrap:&nbsp;break-word;&nbsp;-webkit-nbsp-mode:&nbsp;space;&nbsp;-webkit-line-break:&nbsp;after-white-space;&nbsp;&quot;&gt;&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;border-collapse:&nbsp;separate;&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;font-family:&nbsp;Helvetica;&nbsp;font-size:&nbsp;medium;&nbsp;font-style:&nbsp;normal;&nbsp;font-variant:&nbsp;normal;&nbsp;font-weight:&nbsp;normal;&nbsp;letter-spacing:&nbsp;normal;&nbsp;line-height:&nbsp;normal;&nbsp;orphans:&nbsp;2;&nbsp;text-indent:&nbsp;0px;&nbsp;text-transform:&nbsp;none;&nbsp;white-space:&nbsp;normal;&nbsp;widows:&nbsp;2;&nbsp;word-spacing:&nbsp;0px;&nbsp;-webkit-border-horizontal-spacing:&nbsp;0px;&nbsp;-webkit-border-vertical-spacing:&nbsp;0px;&nbsp;-webkit-text-decorations-in-effect:&nbsp;none;&nbsp;-webkit-text-size-adjust:&nbsp;auto;&nbsp;-webkit-text-stroke-width:&nbsp;0px;&nbsp;&quot;&gt;&lt;div&nbsp;style=&quot;word-wrap:&nbsp;break-word;&nbsp;-webkit-nbsp-mode:&nbsp;space;&nbsp;-webkit-line-break:&nbsp;after-white-space;&nbsp;&quot;&gt;&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;border-collapse:&nbsp;separate;&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;font-family:&nbsp;Helvetica;&nbsp;font-size:&nbsp;medium;&nbsp;font-style:&nbsp;normal;&nbsp;font-variant:&nbsp;normal;&nbsp;font-weight:&nbsp;normal;&nbsp;letter-spacing:&nbsp;normal;&nbsp;line-height:&nbsp;normal;&nbsp;orphans:&nbsp;2;&nbsp;text-indent:&nbsp;0px;&nbsp;text-transform:&nbsp;none;&nbsp;white-space:&nbsp;normal;&nbsp;widows:&nbsp;2;&nbsp;word-spacing:&nbsp;0px;&nbsp;-webkit-border-horizontal-spacing:&nbsp;0px;&nbsp;-webkit-border-vertical-spacing:&nbsp;0px;&nbsp;-webkit-text-decorations-in-effect:&nbsp;none;&nbsp;-webkit-text-size-adjust:&nbsp;auto;&nbsp;-webkit-text-stroke-width:&nbsp;0px;&nbsp;&quot;&gt;&lt;div&nbsp;style=&quot;word-wrap:&nbsp;break-word;&nbsp;-webkit-nbsp-mode:&nbsp;space;&nbsp;-webkit-line-break:&nbsp;after-white-space;&nbsp;&quot;&gt;&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;border-collapse:&nbsp;separate;&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;font-family:&nbsp;Helvetica;&nbsp;font-size:&nbsp;medium;&nbsp;font-style:&nbsp;normal;&nbsp;font-variant:&nbsp;normal;&nbsp;font-weight:&nbsp;normal;&nbsp;letter-spacing:&nbsp;normal;&nbsp;line-height:&nbsp;normal;&nbsp;orphans:&nbsp;2;&nbsp;text-indent:&nbsp;0px;&nbsp;text-transform:&nbsp;none;&nbsp;white-space:&nbsp;normal;&nbsp;widows:&nbsp;2;&nbsp;word-spacing:&nbsp;0px;&nbsp;-webkit-border-horizontal-spacing:&nbsp;0px;&nbsp;-webkit-border-vertical-spacing:&nbsp;0px;&nbsp;-webkit-text-decorations-in-effect:&nbsp;none;&nbsp;-webkit-text-size-adjust:&nbsp;auto;&nbsp;-webkit-text-stroke-width:&nbsp;0px;&nbsp;&quot;&gt;&lt;div&nbsp;style=&quot;word-wrap:&nbsp;break-word;&nbsp;-webkit-nbsp-mode:&nbsp;space;&nbsp;-webkit-line-break:&nbsp;after-white-space;&nbsp;&quot;&gt;&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;border-collapse:&nbsp;separate;&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;font-family:&nbsp;Helvetica;&nbsp;font-size:&nbsp;medium;&nbsp;font-style:&nbsp;normal;&nbsp;font-variant:&nbsp;normal;&nbsp;font-weight:&nbsp;normal;&nbsp;letter-spacing:&nbsp;normal;&nbsp;line-height:&nbsp;normal;&nbsp;orphans:&nbsp;2;&nbsp;text-indent:&nbsp;0px;&nbsp;text-transform:&nbsp;none;&nbsp;white-space:&nbsp;normal;&nbsp;widows:&nbsp;2;&nbsp;word-spacing:&nbsp;0px;&nbsp;-webkit-border-horizontal-spacing:&nbsp;0px;&nbsp;-webkit-border-vertical-spacing:&nbsp;0px;&nbsp;-webkit-text-decorations-in-effect:&nbsp;none;&nbsp;-webkit-text-size-adjust:&nbsp;auto;&nbsp;-webkit-text-stroke-width:&nbsp;0px;&nbsp;&quot;&gt;&lt;div&nbsp;style=&quot;word-wrap:&nbsp;break-word;&nbsp;-webkit-nbsp-mode:&nbsp;space;&nbsp;-webkit-line-break:&nbsp;after-white-space;&nbsp;&quot;&gt;&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;border-collapse:&nbsp;separate;&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;font-family:&nbsp;Helvetica;&nbsp;font-size:&nbsp;medium;&nbsp;font-style:&nbsp;normal;&nbsp;font-variant:&nbsp;normal;&nbsp;font-weight:&nbsp;normal;&nbsp;letter-spacing:&nbsp;normal;&nbsp;line-height:&nbsp;normal;&nbsp;orphans:&nbsp;2;&nbsp;text-indent:&nbsp;0px;&nbsp;text-transform:&nbsp;none;&nbsp;white-space:&nbsp;normal;&nbsp;widows:&nbsp;2;&nbsp;word-spacing:&nbsp;0px;&nbsp;-webkit-border-horizontal-spacing:&nbsp;0px;&nbsp;-webkit-border-vertical-spacing:&nbsp;0px;&nbsp;-webkit-text-decorations-in-effect:&nbsp;none;&nbsp;-webkit-text-size-adjust:&nbsp;auto;&nbsp;-webkit-text-stroke-width:&nbsp;0px;&nbsp;&quot;&gt;&lt;div&nbsp;style=&quot;word-wrap:&nbsp;break-word;&nbsp;-webkit-nbsp-mode:&nbsp;space;&nbsp;-webkit-line-break:&nbsp;after-white-space;&nbsp;&quot;&gt;&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;border-collapse:&nbsp;separate;&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;font-family:&nbsp;Helvetica;&nbsp;font-size:&nbsp;medium;&nbsp;font-style:&nbsp;normal;&nbsp;font-variant:&nbsp;normal;&nbsp;font-weight:&nbsp;normal;&nbsp;letter-spacing:&nbsp;normal;&nbsp;line-height:&nbsp;normal;&nbsp;orphans:&nbsp;2;&nbsp;text-indent:&nbsp;0px;&nbsp;text-transform:&nbsp;none;&nbsp;white-space:&nbsp;normal;&nbsp;widows:&nbsp;2;&nbsp;word-spacing:&nbsp;0px;&nbsp;-webkit-border-horizontal-spacing:&nbsp;0px;&nbsp;-webkit-border-vertical-spacing:&nbsp;0px;&nbsp;-webkit-text-decorations-in-effect:&nbsp;none;&nbsp;-webkit-text-size-adjust:&nbsp;auto;&nbsp;-webkit-text-stroke-width:&nbsp;0px;&nbsp;&quot;&gt;&lt;div&nbsp;style=&quot;word-wrap:&nbsp;break-word;&nbsp;-webkit-nbsp-mode:&nbsp;space;&nbsp;-webkit-line-break:&nbsp;after-white-space;&nbsp;&quot;&gt;&lt;div&gt;--&nbsp;&lt;/div&gt;&lt;div&gt;Guido&nbsp;Tack,&lt;/div&gt;&lt;div&gt;&lt;a&nbsp;href=&quot;http://www.csse.monash.edu/~guidot/&quot;&gt;http://www.csse.monash.edu/~guidot/&lt;/a&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/span&gt;&lt;/div&gt;&lt;/span&gt;&lt;/div&gt;&lt;/span&gt;&lt;/div&gt;&lt;/span&gt;&lt;/div&gt;&lt;/span&gt;&lt;/div&gt;&lt;/span&gt;&lt;/div&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&nbsp;class=&quot;Apple-interchange-newline&quot;&gt;<br>
&lt;/div&gt;<br>
<br>
&lt;br&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;
</tt>
