<tt>
Hi,&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&#39;m&nbsp;trying&nbsp;to&nbsp;add&nbsp;a&nbsp;custom&nbsp;constraint&nbsp;in&nbsp;Flatizinc/Gecode.&nbsp;A&nbsp;simple&nbsp;version&nbsp;is&nbsp;already&nbsp;working.&nbsp;(Yes,&nbsp;I&nbsp;figured&nbsp;out&nbsp;how&nbsp;to&nbsp;modify&nbsp;registry.cpp&nbsp;etc...&nbsp;and&nbsp;yes,&nbsp;I&nbsp;know&nbsp;this&nbsp;is&nbsp;more&nbsp;hacking&nbsp;than&nbsp;extending&nbsp;cause&nbsp;there&#39;s&nbsp;no&nbsp;an&nbsp;official&nbsp;way&nbsp;to&nbsp;do&nbsp;that)&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;have&nbsp;the&nbsp;problem&nbsp;of&nbsp;sharing&nbsp;data&nbsp;(parameters)&nbsp;between&nbsp;constraints.&lt;/div&gt;&lt;div&gt;This&nbsp;is&nbsp;the&nbsp;constraint&nbsp;signature:&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;predicate&nbsp;my_con(var&nbsp;int:&nbsp;x,&nbsp;var&nbsp;int:&nbsp;y,&nbsp;array[int]&nbsp;of&nbsp;int:&nbsp;params1,&nbsp;array[int]&nbsp;of&nbsp;int:&nbsp;params2);&lt;/div&gt;<br>
&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;my_con&nbsp;is&nbsp;a&nbsp;constraint between&nbsp;X&nbsp;and&nbsp;Y,&nbsp;parametrized&nbsp;by&nbsp;params1&nbsp;and&nbsp;params2.&lt;/div&gt;&lt;div&gt;params1&nbsp;and&nbsp;params2&nbsp;are&nbsp;(possibly)&nbsp;large&nbsp;arrays,&nbsp;so&nbsp;I&nbsp;want&nbsp;to&nbsp;share&nbsp;them&nbsp;between&nbsp;different&nbsp;my_con&nbsp;instances:&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;There&#39;s&nbsp;a&nbsp;clean&nbsp;way&nbsp;to&nbsp;do&nbsp;that&nbsp;??&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;The&nbsp;simplest&nbsp;solution&nbsp;I&nbsp;found&nbsp;was&nbsp;using&nbsp;flatzinc&nbsp;parameters,&nbsp;but&nbsp;I&nbsp;have&nbsp;some&nbsp;problems.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;%&nbsp;flatzinc&nbsp;file&lt;/div&gt;<br>
&lt;div&gt;array&nbsp;[1..many&nbsp;many]&nbsp;of&nbsp;int:&nbsp;p1;&lt;/div&gt;&lt;div&gt;&lt;div&gt;array&nbsp;[1..many&nbsp;many]&nbsp;of&nbsp;int:&nbsp;p2;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;...&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;my_con(x,&nbsp;y,&nbsp;p1,&nbsp;p2)&lt;/div&gt;&lt;div&gt;...&lt;/div&gt;&lt;div&gt;&lt;div&gt;my_con(z,&nbsp;w,&nbsp;p1,&nbsp;p2)&lt;/div&gt;<br>
&lt;/div&gt;&lt;div&gt;%&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;The&nbsp;flatzinc&nbsp;file&nbsp;above&nbsp;should&nbsp;resolve&nbsp;the&nbsp;problem&nbsp;alone,&nbsp;because&nbsp;the&nbsp;parameter&nbsp;arrays&nbsp;should&nbsp;be&nbsp;shared.&lt;/div&gt;&lt;div&gt;This&nbsp;is&nbsp;a&nbsp;snippet&nbsp;of&nbsp;the&nbsp;function&nbsp;in&nbsp;registry.cpp&nbsp;that&nbsp;receives&nbsp;the&nbsp;constraint&nbsp;declaration.&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;void&nbsp;p_my_con(FlatZincSpace&amp;&nbsp;s,&nbsp;const&nbsp;ConExpr&amp;&nbsp;ce,&nbsp;AST::Node*&nbsp;ann)&nbsp;{&lt;/div&gt;&lt;div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp;...&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp;AST::Array*&nbsp;s_array&nbsp;=&nbsp;ce[2]-&gt;getArray();&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp;AST::Array*&nbsp;e_array&nbsp;=&nbsp;ce[3]-&gt;getArray();&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp;std::cout&nbsp;&lt;&lt;&nbsp;&quot;SA&nbsp;&quot;&nbsp;&lt;&lt;&nbsp;s_array&nbsp;&lt;&lt;&nbsp;std::endl;&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp;std::cout&nbsp;&lt;&lt;&nbsp;&quot;SE&nbsp;&quot;&nbsp;&lt;&lt;&nbsp;e_array&nbsp;&lt;&lt;&nbsp;std::endl;&lt;/div&gt;&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp;...&lt;/div&gt;&lt;div&gt;<br>
}&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Now&nbsp;the&nbsp;output&nbsp;shows&nbsp;me&nbsp;that&nbsp;s_array&nbsp;pointer&nbsp;is&nbsp;the&nbsp;same&nbsp;between&nbsp;invocation,&nbsp;but&nbsp;e_array&nbsp;is&nbsp;not,&nbsp;so&nbsp;it&#39;s&nbsp;like&nbsp;the&nbsp;second&nbsp;parameter&nbsp;array&nbsp;is&nbsp;copied&nbsp;every&nbsp;time.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;don&#39;t&nbsp;know&nbsp;if&nbsp;this&nbsp;is&nbsp;a&nbsp;bug&nbsp;or&nbsp;not.&lt;/div&gt;<br>
&lt;div&gt;However&nbsp;the&nbsp;main&nbsp;question&nbsp;is&nbsp;how&nbsp;to&nbsp;share&nbsp;data&nbsp;between&nbsp;multiple&nbsp;constraints.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Any&nbsp;help&nbsp;is&nbsp;appreciated.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Cheers.&lt;/div&gt;&lt;div&gt; &lt;/div&gt;<br>

</tt>
