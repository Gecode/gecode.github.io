<tt>
&lt;div&gt;Dear&nbsp;everybody,&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;&lt;div&gt; &lt;/div&gt;&lt;div&gt;I&nbsp;have&nbsp;a&nbsp;problem&nbsp;with&nbsp;Gecode&nbsp;4.0.0&nbsp;(see&nbsp;the&nbsp;code&nbsp;below)&lt;/div&gt;&lt;div&gt;I&nbsp;can&nbsp;exhibit&nbsp;the&nbsp;issue&nbsp;on&nbsp;the&nbsp;following&nbsp;example&lt;/div&gt;&lt;div&gt; &lt;/div&gt;&lt;div&gt;I&nbsp;solve&nbsp;an&nbsp;optimization&nbsp;problem&nbsp;in&nbsp;the&nbsp;format&nbsp;flatzinc&nbsp;&quot;sugiyama2_g5_7_7_7_7_2.fzn&quot;&nbsp;(it&nbsp;is&nbsp;attached).&nbsp;It&nbsp;takes&nbsp;370s.&lt;/div&gt;<br>
<br>
&lt;div&gt;Then&nbsp;I&nbsp;cut&nbsp;the&nbsp;problem&nbsp;in&nbsp;two&nbsp;disjoint&nbsp;sub-problems&nbsp;P1&nbsp;and&nbsp;P2&nbsp;(Two&nbsp;Spaces) &lt;/div&gt;&lt;div&gt;P1&nbsp;is&nbsp;P&nbsp;with&nbsp;(x3=1,&nbsp;x5=2,&nbsp;x30=30,&nbsp;x31=29)&nbsp;and&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  &lt;/div&gt;&lt;div&gt;P2&nbsp;is&nbsp;P&nbsp;with&nbsp;(x3=1,&nbsp;x5=2,&nbsp;x30=29,&nbsp;x31=30)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;<br>
<br>
&lt;div&gt; &lt;/div&gt;&lt;div&gt;First,&nbsp;I&nbsp;solve&nbsp;P1.&nbsp;This&nbsp;found&nbsp;a&nbsp;solution&nbsp;with&nbsp;a&nbsp;cost&nbsp;C1.&nbsp;Then&nbsp;I&nbsp;solve&nbsp;P2&nbsp;and&nbsp;add&nbsp;the&nbsp;cost&nbsp;constraint&nbsp;cost&nbsp;&lt;C1&nbsp;(ie&nbsp;constraint(c1)&nbsp;in&nbsp;gecode))&lt;/div&gt;&lt;div&gt; &lt;/div&gt;&lt;div&gt;The&nbsp;issue&nbsp;is&nbsp;that&nbsp;P1&nbsp;is&nbsp;solved&nbsp;in&nbsp;355&nbsp;seconds&nbsp;and&nbsp;P2&nbsp;in&nbsp;329&nbsp;seconds&nbsp;!&nbsp;The&nbsp;sum&nbsp;is&nbsp;685s&nbsp;where&nbsp;the&nbsp;initial&nbsp;resolution&nbsp;takes&nbsp;370s&lt;/div&gt;<br>
<br>
&lt;div&gt;I&nbsp;expected&nbsp;to&nbsp;have&nbsp;something&nbsp;close&nbsp;to&nbsp;370s&lt;/div&gt;&lt;div&gt; &lt;/div&gt;&lt;div&gt;It&nbsp;seems&nbsp;that&nbsp;I&nbsp;have&nbsp;no&nbsp;problem&nbsp;if&nbsp;I&nbsp;add&nbsp;constraint&nbsp;on&nbsp;the&nbsp;first&nbsp;variables&nbsp;(x0,&nbsp;x1,…)&nbsp;and&nbsp;that&nbsp;it&nbsp;does&nbsp;not&nbsp;work&nbsp;if&nbsp;I&nbsp;use&nbsp;any&nbsp;variables&nbsp;(like&nbsp;here&nbsp;x3,x5,x30…)&lt;/div&gt;<br>
<br>
&lt;div&gt; &lt;/div&gt;&lt;div&gt;Thanks&nbsp;in&nbsp;advance&nbsp;for&nbsp;any&nbsp;remark&lt;/div&gt;&lt;div&gt; &lt;/div&gt;&lt;div&gt;Best&nbsp;Regards,&lt;/div&gt;&lt;div&gt;Mohammed&nbsp;REZGUI&lt;/div&gt;&lt;div&gt; &lt;/div&gt;&lt;div&gt;Here&nbsp;is&nbsp;my&nbsp;code:&lt;/div&gt;&lt;div&gt;&lt;code&gt;&lt;/div&gt;&lt;div&gt;//Init&nbsp;fg&nbsp;with&nbsp;sugiyama2_g5_7_7_7_7_2.fzn&nbsp;instance&lt;/div&gt;<br>
<br>
&lt;div&gt;FlatZincSpace*&nbsp;fg&nbsp;=&nbsp;FlatZinc::parse(...)&lt;/div&gt;&lt;div&gt;fg-&gt;createBranchers(...)&lt;/div&gt;&lt;div&gt;fg-&gt;shrinkArray(...)&lt;/div&gt;&lt;div&gt; &lt;/div&gt;&lt;div&gt;//vars_index[3,&nbsp;5,&nbsp;30,&nbsp;31,&nbsp;]&nbsp;=&gt;&nbsp;variables&nbsp;have&nbsp;the&nbsp;minimum&nbsp;doman&nbsp;size&nbsp;in&nbsp;this&nbsp;problem&lt;/div&gt;<br>
<br>
&lt;div&gt;//&nbsp;it&nbsp;is&nbsp;fine&nbsp;If&nbsp;I&nbsp;use&nbsp;4&nbsp;first&nbsp;variables&nbsp;but&nbsp;it&nbsp;is&nbsp;not&nbsp;interesting&nbsp;for&nbsp;me&lt;/div&gt;&lt;div&gt;//&nbsp; &nbsp; &nbsp;  &lt;/div&gt;&lt;div&gt; &lt;/div&gt;&lt;div&gt; &lt;/div&gt;&lt;div&gt;//best&nbsp;solution&nbsp;used&nbsp;for&nbsp;P2&nbsp;after&lt;/div&gt;&lt;div&gt;Space*&nbsp;best&nbsp;=&nbsp;NULL;&lt;/div&gt;&lt;div&gt;{&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;FlatZincSpace*&nbsp;p1&nbsp;=&nbsp;static_cast&lt;MyFlatZincSpace*&gt;(fg-&gt;clone(false));&lt;/div&gt;<br>
<br>
&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;//vars_index[3,&nbsp;5,&nbsp;30,&nbsp;31,&nbsp;]&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;//tuple_val[1,&nbsp;2,&nbsp;29,&nbsp;30,&nbsp;]&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Gecode::rel(*p1,&nbsp;p1-&gt;iv[3],&nbsp;Gecode::IRT_EQ,&nbsp;1);&lt;/div&gt;&lt;div&gt;<br>
<br>
 &nbsp; &nbsp; &nbsp; &nbsp;  Gecode::rel(*p1,&nbsp;p1-&gt;iv[5],&nbsp;Gecode::IRT_EQ,&nbsp;2);&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp;  Gecode::rel(*p1,&nbsp;p1-&gt;iv[30],&nbsp;Gecode::IRT_EQ,&nbsp;29);&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp;  Gecode::rel(*p1,&nbsp;p1-&gt;iv[31],&nbsp;Gecode::IRT_EQ,&nbsp;30);&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  &lt;/div&gt;<br>
<br>
&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Gecode::Search::Options&nbsp;opt;&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;opt.threads&nbsp;=&nbsp;1.0;&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Gecode::Search::Sequential::BAB&nbsp;bab(p1,&nbsp;sizeof(MyFlatZincSpace),&nbsp;opt);&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Gecode::Space*&nbsp;s&nbsp;=&nbsp;bab.next();&lt;/div&gt;<br>
<br>
&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;while(s)&nbsp;{&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;delete&nbsp;best;&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;best&nbsp;=&nbsp;s;&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;engine().solution(this);&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;s&nbsp;=&nbsp;bab.next();&lt;/div&gt;<br>
<br>
&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}&lt;/div&gt;&lt;div&gt; &lt;/div&gt;&lt;div&gt;}&lt;/div&gt;&lt;div&gt; &lt;/div&gt;&lt;div&gt;{&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;FlatZincSpace*&nbsp;p2&nbsp;=&nbsp;static_cast&lt;MyFlatZincSpace*&gt;(fg-&gt;clone(false));&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;//vars_index[3,&nbsp;5,&nbsp;30,&nbsp;31,&nbsp;]&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;<br>
<br>
&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;//tuple_val[1,&nbsp;2,&nbsp;30,&nbsp;29,&nbsp;]&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Gecode::rel(*p2,&nbsp;p2-&gt;iv[3],&nbsp;Gecode::IRT_EQ,&nbsp;1);&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Gecode::rel(*p2,&nbsp;p2-&gt;iv[5],&nbsp;Gecode::IRT_EQ,&nbsp;2);&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Gecode::rel(*p2,&nbsp;p2-&gt;iv[30],&nbsp;Gecode::IRT_EQ,&nbsp;30);&lt;/div&gt;<br>
<br>
&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Gecode::rel(*p2,&nbsp;p2-&gt;iv[31],&nbsp;Gecode::IRT_EQ,&nbsp;29);&lt;/div&gt;&lt;div&gt; &nbsp;  &lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;if&nbsp;(best)&nbsp;{&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;p2-&gt;constrain(*best);&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;&lt;div&gt;<br>
<br>
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Gecode::Search::Options&nbsp;opt;&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;opt.threads&nbsp;=&nbsp;1.0;&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Gecode::Search::Sequential::BAB&nbsp;bab(p2,&nbsp;sizeof(MyFlatZincSpace),&nbsp;opt);&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Gecode::Space*&nbsp;s&nbsp;=&nbsp;bab.next();&lt;/div&gt;<br>
<br>
&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;while(s)&nbsp;{&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;delete&nbsp;best;&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;best&nbsp;=&nbsp;s;&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;engine().solution(this);&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;s&nbsp;=&nbsp;bab.next();&lt;/div&gt;<br>
<br>
&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}&lt;/div&gt;&lt;div&gt; &lt;/div&gt;&lt;div&gt;}&lt;/div&gt;&lt;div&gt;&lt;/code&gt;&lt;/div&gt;&lt;/div&gt;<br>

</tt>
