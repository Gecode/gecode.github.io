<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Dear&nbsp;all,&lt;br&gt;Indeed,&nbsp;in&nbsp;propagators,&nbsp;for&nbsp;example&nbsp;the&nbsp;&quot;Linear&quot;&nbsp;propagator&nbsp;internal&nbsp;calculations&nbsp;are&nbsp;done&nbsp;to&nbsp;update&nbsp;bounds&nbsp;of&nbsp;variables.&nbsp;If&nbsp;the&nbsp;maximum&nbsp;float&nbsp;value&nbsp;is&nbsp;involved&nbsp;in&nbsp;these&nbsp;calculation&nbsp;it&nbsp;may&nbsp;leads&nbsp;to&nbsp;rounding&nbsp;result&nbsp;behaviors&nbsp;defined&nbsp;in&nbsp;the&nbsp;IEEE&nbsp;floating&nbsp;rules.&nbsp;There&nbsp;is&nbsp;no&nbsp;way&nbsp;to&nbsp;avoid&nbsp;it&nbsp;but&nbsp;the&nbsp;computes&nbsp;remain&nbsp;correct.&nbsp;Even&nbsp;if&nbsp;the&nbsp;bounds&nbsp;are&nbsp;not&nbsp;as&nbsp;tight&nbsp;as&nbsp;expected&nbsp;after&nbsp;a&nbsp;call&nbsp;to&nbsp;&quot;propagate&quot;,&nbsp;no&nbsp;solution&nbsp;is&nbsp;lost.&nbsp;After&nbsp;a&nbsp;branching,&nbsp;the&nbsp;interval&nbsp;will&nbsp;be&nbsp;cut&nbsp;and&nbsp;most&nbsp;of&nbsp;the&nbsp;time&nbsp;the&nbsp;bounds&nbsp;propagate&nbsp;as&nbsp;expected.&lt;br&gt;<br>
&lt;div&gt;To&nbsp;illustrate&nbsp;these&nbsp;floating&nbsp;rounding&nbsp;behaviors,&nbsp;please&nbsp;consider&nbsp;the&nbsp;following&nbsp;C++&nbsp;code&nbsp;:&lt;br&gt;&lt;br&gt;#include&nbsp;&lt;iostream&gt;&lt;br&gt;#include&nbsp;&lt;limits&gt;&lt;br&gt;&lt;br&gt;using&nbsp;namespace&nbsp;std;&lt;br&gt;int&nbsp;main()&nbsp;{&lt;br&gt; &nbsp;float&nbsp;mx&nbsp;=&nbsp;std::numeric_limits&lt;float&gt;::max();&lt;br&gt;<br>
 &nbsp;cout&nbsp;&lt;&lt;&nbsp;&quot;Max&nbsp;float&nbsp;value&nbsp;mx=&quot;&nbsp;&lt;&lt;&nbsp;mx&nbsp;&lt;&lt;&nbsp;endl;&lt;br&gt;<br>
 &nbsp;cout&nbsp;&lt;&lt;&nbsp;&quot;Addition&nbsp;with&nbsp;a&nbsp;small&nbsp;constant:&nbsp;mx+2=&quot;&nbsp;&lt;&lt;&nbsp;mx&nbsp;+&nbsp;2&nbsp;&lt;&lt;&nbsp;endl;&lt;br&gt; &nbsp;cout&nbsp;&lt;&lt;&nbsp;&quot;Equality&nbsp;test&nbsp;with&nbsp;addition&nbsp;with&nbsp;a&nbsp;small&nbsp;constant:&nbsp;mx+2==mx&nbsp;?&nbsp;=&nbsp;&quot;&nbsp;&lt;&lt;&nbsp;(((mx&nbsp;+&nbsp;2)==mx)?&quot;TRUE&quot;:&quot;FALSE&quot;)&nbsp;&lt;&lt;&nbsp;endl;&lt;br&gt;<br>
<br>
 &nbsp;cout&nbsp;&lt;&lt;&nbsp;&quot;Addition&nbsp;with&nbsp;a&nbsp;bigger&nbsp;constant:&nbsp;mx+mx/2=&quot;&nbsp;&lt;&lt;&nbsp;mx&nbsp;+&nbsp;mx/2&nbsp;&lt;&lt;&nbsp;endl;&lt;br&gt; &nbsp;cout&nbsp;&lt;&lt;&nbsp;&quot;Equality&nbsp;test&nbsp;with&nbsp;addition&nbsp;with&nbsp;a&nbsp;bigger&nbsp;constant:&nbsp;mx+mx/2==mx&nbsp;?&nbsp;=&nbsp;&quot;&nbsp;&lt;&lt;&nbsp;(((mx&nbsp;+&nbsp;mx/2)==mx)?&quot;TRUE&quot;:&quot;FALSE&quot;)&nbsp;&lt;&lt;&nbsp;endl;&lt;br&gt;<br>
<br>
 &nbsp;cout&nbsp;&lt;&lt;&nbsp;&quot;Order&nbsp;of&nbsp;computes&nbsp;1&nbsp;:&nbsp;mx+2-mx=&nbsp;&quot;&nbsp;&lt;&lt;&nbsp;mx+2-mx&nbsp;&lt;&lt;&nbsp;std::endl;&lt;br&gt; &nbsp;cout&nbsp;&lt;&lt;&nbsp;&quot;Order&nbsp;of&nbsp;computes&nbsp;2&nbsp;:&nbsp;mx-mx+2=&nbsp;&quot;&nbsp;&lt;&lt;&nbsp;mx-mx+2&nbsp;&lt;&lt;&nbsp;std::endl;&lt;br&gt; &nbsp;return&nbsp;0;&lt;br&gt;}&lt;br&gt;<br>
&lt;br&gt;&lt;/div&gt;&lt;div&gt;gives&nbsp;:&lt;br&gt;   &nbsp;Max&nbsp;float&nbsp;value&nbsp;mx=3.40282e+38&lt;br&gt;   &nbsp;Addition&nbsp;with&nbsp;a&nbsp;small&nbsp;constant:&nbsp;mx+2=3.40282e+38&lt;br&gt;   &nbsp;Equality&nbsp;test&nbsp;with&nbsp;addition&nbsp;with&nbsp;a&nbsp;small&nbsp;constant:&nbsp;mx+2==mx&nbsp;?&nbsp;=&nbsp;TRUE&lt;br&gt;   &nbsp;Addition&nbsp;with&nbsp;a&nbsp;bigger&nbsp;constant:&nbsp;mx+mx/2=inf&lt;br&gt;<br>
<br>
   &nbsp;Equality&nbsp;test&nbsp;with&nbsp;addition&nbsp;with&nbsp;a&nbsp;bigger&nbsp;constant:&nbsp;mx+mx/2==mx&nbsp;?&nbsp;=&nbsp;FALSE&lt;br&gt;   &nbsp;Order&nbsp;of&nbsp;computes&nbsp;1&nbsp;:&nbsp;mx+2-mx=&nbsp;0&lt;br&gt;   &nbsp;Order&nbsp;of&nbsp;computes&nbsp;2&nbsp;:&nbsp;mx-mx+2=&nbsp;2&lt;br&gt;&lt;br&gt;&lt;/div&gt;As&nbsp;you&nbsp;see,&nbsp;different&nbsp;results&nbsp;are&nbsp;computed&nbsp;depending&nbsp;of&nbsp;the&nbsp;value&nbsp;of&nbsp;the&nbsp;constants&nbsp;and&nbsp;even&nbsp;of&nbsp;the&nbsp;order&nbsp;of&nbsp;the&nbsp;computes.&nbsp;Keep&nbsp;in&nbsp;mind&nbsp;that&nbsp;no&nbsp;solution&nbsp;will&nbsp;be&nbsp;lost.&nbsp;The&nbsp;best&nbsp;advice&nbsp;I&nbsp;can&nbsp;give&nbsp;is&nbsp;to&nbsp;set&nbsp;initial&nbsp;bounds&nbsp;of&nbsp;variables&nbsp;as&nbsp;tight&nbsp;as&nbsp;possible&nbsp;to&nbsp;make&nbsp;propagation&nbsp;as&nbsp;efficient&nbsp;as&nbsp;it&nbsp;can&nbsp;be.&lt;br&gt;<br>
&lt;br&gt;&lt;div&gt;Regards,&lt;br&gt;Vincent&nbsp;Barichard&lt;br&gt;<br>
&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;2013/11/12&nbsp;Joost&nbsp;van&nbsp;Twist&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:joost.van.twist@quintiq.com&quot;&nbsp;target=&quot;_blank&quot;&gt;joost.van.twist@quintiq.com&lt;/a&gt;&gt;&lt;/span&gt;&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
<br>
<br>
<br>
&lt;div&nbsp;style=&quot;MARGIN:4px&nbsp;4px&nbsp;1px;FONT:10pt&nbsp;Segoe&nbsp;UI&quot;&gt;<br>
&lt;div&gt;Dear&nbsp;all,&lt;/div&gt;<br>
&lt;div&gt; &lt;/div&gt;<br>
&lt;div&gt;When&nbsp;using&nbsp;a&nbsp;relational&nbsp;constraint&nbsp;between&nbsp;two&nbsp;or&nbsp;more&nbsp;floating&nbsp;variables&nbsp;the bounds&nbsp;might&nbsp;not&nbsp;be&nbsp;always&nbsp;updated&nbsp;as&nbsp;you&nbsp;would&nbsp;expect&nbsp;during&nbsp;propagation.&nbsp;This happens&nbsp;only&nbsp;when&nbsp;being&nbsp;close&nbsp;to&nbsp;the&nbsp;maximum&nbsp;limits&nbsp;of&nbsp;floats. Why&nbsp;does&nbsp;this&nbsp;happen?&lt;/div&gt;<br>
<br>
&lt;div&gt; &lt;/div&gt;<br>
&lt;div&gt;I&nbsp;have&nbsp;attached&nbsp;an&nbsp;example&nbsp;program.&nbsp;It&nbsp;has&nbsp;two&nbsp;variables&nbsp;and&nbsp;adds&nbsp;a&nbsp;constraint&nbsp;stating&nbsp;that&nbsp;the&nbsp;second&nbsp;variable&nbsp;should&nbsp;be&nbsp;bigger&nbsp;than&nbsp;the&nbsp;first&nbsp;plus&nbsp;some&nbsp;small&nbsp;constant. &nbsp;The&nbsp;lower&nbsp;bound&nbsp;of&nbsp;the&nbsp;second&nbsp;variable&nbsp;remains&nbsp;zero&nbsp;however&nbsp;under&nbsp;some&nbsp;conditions.&lt;/div&gt;<br>
<br>
&lt;div&gt; &lt;/div&gt;<br>
&lt;div&gt;First&nbsp;I&nbsp;thought&nbsp;is&nbsp;was&nbsp;some&nbsp;kind&nbsp;of&nbsp;bug,&nbsp;but&nbsp;after&nbsp;posting&nbsp;a&nbsp;report,&nbsp;it&nbsp;appeared&nbsp;to&nbsp;be&nbsp;because of&nbsp;some&nbsp;rounding&nbsp;side&nbsp;effects&nbsp;and&nbsp;it&nbsp;is&nbsp;not&nbsp;an&nbsp;issue&nbsp;when&nbsp;the&nbsp;bounds&nbsp;shrink.&nbsp;Christian&nbsp;suggested&nbsp;to&nbsp;repost&nbsp;it&nbsp;as&nbsp;question.&nbsp;I&nbsp;have&nbsp;also&nbsp;attached&nbsp;the&nbsp;initial&nbsp;answer&nbsp;Vincent&nbsp;gave&nbsp;who&nbsp;worked&nbsp;on&nbsp;the&nbsp;floating&nbsp;module.&lt;/div&gt;<br>
<br>
&lt;div&gt; &lt;/div&gt;<br>
&lt;div&gt;Kind&nbsp;regards,&lt;/div&gt;<br>
&lt;div&gt; &lt;/div&gt;<br>
&lt;div&gt; &lt;/div&gt;<br>
&lt;div&gt; &lt;/div&gt;<br>
&lt;div&gt; &lt;/div&gt;<br>
&lt;div&gt; &lt;/div&gt;<br>
&lt;div&gt; &lt;/div&gt;<br>
&lt;div&gt; &lt;/div&gt;<br>
&lt;div&gt; &lt;/div&gt;<br>
&lt;div&gt; &lt;/div&gt;<br>
&lt;div&gt; &lt;/div&gt;<br>
&lt;div&gt; &lt;/div&gt;<br>
&lt;div&gt;<br>
&lt;table&nbsp;style&nbsp;border=&quot;0&quot;&nbsp;cellpadding=&quot;0&quot;&nbsp;cellspacing=&quot;0&quot;&gt;<br>
&lt;tbody&gt;<br>
&lt;tr&gt;<br>
&lt;td&gt;&lt;a&nbsp;href=&quot;http://www.quintiq.com/&quot;&nbsp;target=&quot;_blank&quot;&gt;&lt;img&nbsp;alt=&quot;Quintiq&nbsp;logo&quot;&nbsp;src=&quot;cid:WSJKHCXZECTU.IMAGE_42.gif&quot;&nbsp;border=&quot;0&quot;&gt;&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;<br>
&lt;tr&gt;<br>
&lt;td&gt;&lt;span&nbsp;style=&quot;FONT-FAMILY:Calibri,Verdana,Geneva,sans-serif;FONT-SIZE:14px;FONT-WEIGHT:bold&quot;&gt;Joost&nbsp;van&nbsp;Twist&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;<br>
&lt;tr&gt;<br>
&lt;td&gt;&lt;span&nbsp;style=&quot;FONT-FAMILY:Calibri,Verdana,Geneva,sans-serif;FONT-SIZE:14px&quot;&gt;Software&nbsp;Engineer&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;<br>
&lt;tr&gt;<br>
&lt;td&gt;&lt;span&nbsp;style=&quot;FONT-FAMILY:Calibri,Verdana,Geneva,sans-serif;FONT-SIZE:14px&quot;&gt;R&amp;D Optimization&nbsp;Team&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;<br>
&lt;tr&gt;<br>
&lt;td&nbsp;height=&quot;8&quot;&gt;&lt;/td&gt;&lt;/tr&gt;<br>
&lt;tr&gt;<br>
&lt;td&gt;&lt;span&nbsp;style=&quot;FONT-FAMILY:Calibri,Verdana,Geneva,sans-serif;FONT-SIZE:14px&quot;&gt;&lt;b&gt;Quintiq&lt;/b&gt;&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;<br>
&lt;tr&gt;<br>
&lt;td&gt;&lt;span&nbsp;style=&quot;FONT-FAMILY:Calibri,Verdana,Geneva,sans-serif;FONT-SIZE:14px&quot;&gt;T&nbsp;&lt;a&nbsp;href=&quot;tel:%2B31%2073%20691%200739&quot;&nbsp;value=&quot;+31736910739&quot;&nbsp;target=&quot;_blank&quot;&gt;+31&nbsp;73&nbsp;691&nbsp;0739&lt;/a&gt;&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;<br>
&lt;tr&gt;<br>
&lt;td&gt;&lt;span&nbsp;style=&quot;FONT-FAMILY:Calibri,Verdana,Geneva,sans-serif;FONT-SIZE:14px&quot;&gt;M&nbsp;&lt;a&nbsp;href=&quot;tel:%2B31%2063%20179%201690&quot;&nbsp;value=&quot;+31631791690&quot;&nbsp;target=&quot;_blank&quot;&gt;+31&nbsp;63&nbsp;179&nbsp;1690&lt;/a&gt;&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;<br>
&lt;tr&gt;<br>
&lt;td&gt;&lt;span&nbsp;style=&quot;FONT-FAMILY:Calibri,Verdana,Geneva,sans-serif;FONT-SIZE:14px&quot;&gt;E&nbsp;&lt;a&nbsp;style=&quot;COLOR:#4d80be&quot;&nbsp;href=&quot;mailto:joost.van.twist@quintiq.com&quot;&nbsp;target=&quot;_blank&quot;&gt;joost.van.twist@quintiq.com&lt;/a&gt;&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;<br>
&lt;tr&gt;<br>
&lt;td&nbsp;height=&quot;20&quot;&gt;&lt;span&nbsp;style=&quot;FONT-FAMILY:Calibri,Verdana,Geneva,sans-serif;FONT-SIZE:14px&quot;&gt;&lt;a&nbsp;style=&quot;COLOR:#4d80be&quot;&nbsp;href=&quot;http://www.quintiq.com/&quot;&nbsp;target=&quot;_blank&quot;&gt;www.quintiq.com&lt;/a&gt;&lt;/span&gt;&nbsp;&lt;/td&gt;&lt;/tr&gt;<br>
&lt;tr&gt;<br>
&lt;td&nbsp;height=&quot;35&quot;&gt;&lt;a&nbsp;href=&quot;http://twitter.com/quintiq&quot;&nbsp;target=&quot;_blank&quot;&gt;&lt;img&nbsp;alt=&quot;Twitter&quot;&nbsp;src=&quot;cid:PZLNSJGYMGZM.IMAGE_43.gif&quot;&nbsp;border=&quot;0&quot;&gt;&lt;/a&gt;&nbsp;&lt;a&nbsp;href=&quot;http://www.facebook.com/Quintiq&quot;&nbsp;target=&quot;_blank&quot;&gt;&lt;img&nbsp;style=&quot;MARGIN-LEFT:3px&quot;&nbsp;alt=&quot;Facebook&quot;&nbsp;src=&quot;cid:SENGHZLAVKVB.IMAGE_44.gif&quot;&nbsp;border=&quot;0&quot;&gt;&lt;/a&gt;&nbsp;&lt;a&nbsp;href=&quot;http://www.linkedin.com/company/quintiq&quot;&nbsp;target=&quot;_blank&quot;&gt;&lt;img&nbsp;style=&quot;MARGIN-LEFT:3px&quot;&nbsp;alt=&quot;LinkedIn&quot;&nbsp;src=&quot;cid:FTVZKTMCAUHV.IMAGE_45.gif&quot;&nbsp;border=&quot;0&quot;&gt;&lt;/a&gt;&nbsp;&lt;a&nbsp;href=&quot;http://www.youtube.com/channelquintiq&quot;&nbsp;target=&quot;_blank&quot;&gt;&lt;img&nbsp;style=&quot;MARGIN-LEFT:3px&quot;&nbsp;alt=&quot;YouTube&quot;&nbsp;src=&quot;cid:UUSUKGHQWBYY.IMAGE_46.gif&quot;&nbsp;border=&quot;0&quot;&gt;&lt;/a&gt;&nbsp;&lt;/td&gt;<br>
&lt;/tr&gt;<br>
&lt;tr&gt;<br>
&lt;td&gt;<br>
&lt;table&nbsp;border=&quot;0&quot;&nbsp;cellpadding=&quot;0&quot;&nbsp;cellspacing=&quot;0&quot;&gt;<br>
&lt;tbody&gt;<br>
&lt;tr&gt;<br>
&lt;td&nbsp;valign=&quot;top&quot;&nbsp;width=&quot;20&quot;&gt;&lt;img&nbsp;src=&quot;cid:AWDRGWORKNVE.IMAGE_47.gif&quot;&gt;&lt;/td&gt;<br>
&lt;td&gt;&lt;span&nbsp;style=&quot;FONT-FAMILY:Calibri,Verdana,Geneva,sans-serif;COLOR:#78a300;FONT-SIZE:12px&quot;&gt;Please&nbsp;consider&nbsp;the&nbsp;environment&nbsp;before&nbsp;printing&nbsp;this&nbsp;email.&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/div&gt;&lt;/div&gt;<br>
&lt;br&gt;&lt;br&gt;----------&nbsp;Message&nbsp;transféré&nbsp;----------&lt;br&gt;From: &quot;Vincent&nbsp;Barichard&quot;&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:Vincent.Barichard@univ-angers.fr&quot;&gt;Vincent.Barichard@univ-angers.fr&lt;/a&gt;&gt;&lt;br&gt;To: &lt;a&nbsp;href=&quot;mailto:cschulte@kth.se&quot;&gt;cschulte@kth.se&lt;/a&gt;&lt;br&gt;<br>
Cc: &lt;br&gt;Date: 10&nbsp;Nov&nbsp;2013&nbsp;22:17:11&nbsp;+0100&lt;br&gt;Subject: Re:&nbsp;FW:&nbsp;[Gecode-bugs]&nbsp;New&nbsp;bug:&nbsp;Relational&nbsp;constraint&nbsp;gives&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inconsistent&nbsp;lowerbound&nbsp;for&nbsp;floating&nbsp;variables&lt;br&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;Hi&nbsp;Christian,&lt;br&gt;<br>
&lt;br&gt;&lt;/div&gt;I&nbsp;looked&nbsp;quickly&nbsp;(I&#39;m&nbsp;not&nbsp;at&nbsp;home&nbsp;for&nbsp;now)&nbsp;and&nbsp;I&nbsp;think&nbsp;that&nbsp;the&nbsp;bug&nbsp;is&nbsp;in&nbsp;the&nbsp;compute&lt;br&gt;&lt;/div&gt;of&nbsp;the&nbsp;sl&nbsp;and&nbsp;sly&nbsp;variables&nbsp;(see&nbsp;propagate&nbsp;of&nbsp;Lq&lt;P,N&gt;&nbsp;of&nbsp;linear/nary.hpp).&lt;br&gt;<br>
&lt;/div&gt;Indeed,&nbsp;the&nbsp;upper&nbsp;bound&nbsp;is&nbsp;set&nbsp;to&nbsp;FLOAT_MAX,&nbsp;and&nbsp;as&nbsp;a&nbsp;consequence&nbsp;some&nbsp;compute&nbsp;failed.&lt;br&gt;&lt;/div&gt;When&nbsp;sl&nbsp;is&nbsp;computed&nbsp;(lines&nbsp;353&nbsp;and&nbsp;356)&nbsp;we&nbsp;get&nbsp;:&nbsp;FLOAT_MAX&nbsp;+&nbsp;-2&nbsp;=&nbsp;FLOAT_MAX,&lt;br&gt;&lt;/div&gt;When&nbsp;sly&nbsp;is&nbsp;computed&nbsp;(line&nbsp;374)&nbsp;we&nbsp;get&nbsp;:&nbsp;FLOAT_MAX&nbsp;-&nbsp;sl&nbsp;=&nbsp;6.9533558075717661e-310&nbsp;(almost&nbsp;0)&lt;br&gt;<br>
<br>
&lt;br&gt;&lt;/div&gt;&lt;div&gt;The&nbsp;order&nbsp;of&nbsp;the&nbsp;computes&nbsp;has&nbsp;an&nbsp;effect&nbsp;on&nbsp;the&nbsp;result.&nbsp;I&nbsp;put&nbsp;here&nbsp;after&nbsp;an&nbsp;example&lt;br&gt;&lt;/div&gt;&lt;div&gt;taken&nbsp;from&nbsp;gdb&nbsp;:&lt;br&gt;(gdb)&nbsp;p&nbsp;y[i].max()&nbsp;+&nbsp;2&nbsp;-&nbsp;y[i].max()&lt;br&gt;$30&nbsp;=&nbsp;0&lt;br&gt;(gdb)&nbsp;p&nbsp;y[i].max()&nbsp;-&nbsp;y[i].max()&nbsp;+&nbsp;2&lt;br&gt;<br>
<br>
$31&nbsp;=&nbsp;2&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;In&nbsp;an&nbsp;ideal&nbsp;world&nbsp;we&nbsp;would&nbsp;get&nbsp;sly&nbsp;=&nbsp;FLOAT_MAX&nbsp;-&nbsp;FLOAT_MAX&nbsp;+&nbsp;2&nbsp;=&nbsp;2&lt;br&gt;&lt;/div&gt;&lt;div&gt;It&nbsp;will&nbsp;work&nbsp;after&nbsp;a&nbsp;cut&nbsp;(during&nbsp;search)&nbsp;but&nbsp;a&nbsp;call&nbsp;to&nbsp;status()&nbsp;is&nbsp;not&nbsp;enough&nbsp;to&nbsp;get&lt;br&gt;&lt;/div&gt;&lt;div&gt;some&nbsp;reductions.&lt;br&gt;<br>
<br>
&lt;br&gt;&lt;/div&gt;I&nbsp;don&#39;t&nbsp;know&nbsp;an&nbsp;easy&nbsp;fix.&nbsp;The&nbsp;only&nbsp;way&nbsp;I&nbsp;see&nbsp;is&nbsp;to&nbsp;identify&nbsp;the&nbsp;FLOAT_MAX&nbsp;cases&nbsp;each&nbsp;time&nbsp;it&nbsp;is&nbsp;encountered&nbsp;and&nbsp;to&nbsp;make&nbsp;some&nbsp;special&nbsp;cases.&nbsp;You&nbsp;may&nbsp;have&nbsp;another&nbsp;idea&nbsp;?&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Just&nbsp;a&nbsp;thought.&nbsp;I&nbsp;ever&nbsp;encountered&nbsp;these&nbsp;cases&nbsp;in&nbsp;the&nbsp;past,&nbsp;calculations&nbsp;are&nbsp;not&nbsp;wrong,&nbsp;and&nbsp;most&nbsp;of&nbsp;the&nbsp;time,&nbsp;tighter&nbsp;bounds&nbsp;of&nbsp;the&nbsp;variables&nbsp;when&nbsp;modeling&nbsp;solves&nbsp;the&nbsp;problem.&nbsp;It&nbsp;may&nbsp;occur&nbsp;in&nbsp;many&nbsp;propagators&nbsp;each&nbsp;time&nbsp;a&nbsp;compute&nbsp;involves&nbsp;FLOAT_MAX.&lt;br&gt;<br>
<br>
&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Cheers,&lt;br&gt;&lt;/div&gt;&lt;div&gt;Vincent&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;2013/11/10&nbsp;Christian&nbsp;Schulte&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:cschulte@kth.se&quot;&nbsp;target=&quot;_blank&quot;&gt;cschulte@kth.se&lt;/a&gt;&gt;&lt;/span&gt;&lt;br&gt;<br>
<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;Hi&nbsp;Vincent,&lt;br&gt;<br>
&lt;br&gt;<br>
Any&nbsp;idea?&lt;br&gt;<br>
&lt;br&gt;<br>
Cheers&lt;br&gt;<br>
Christian&lt;br&gt;<br>
&lt;br&gt;<br>
--&lt;br&gt;<br>
Christian&nbsp;Schulte,&nbsp;&lt;a&nbsp;href=&quot;http://www.ict.kth.se/~cschulte/&quot;&nbsp;target=&quot;_blank&quot;&gt;www.ict.kth.se/~cschulte/&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&gt;&nbsp;-----Original&nbsp;Message-----&lt;br&gt;<br>
&gt;&nbsp;From:&nbsp;&lt;a&nbsp;href=&quot;mailto:bugs-bounces@gecode.org&quot;&nbsp;target=&quot;_blank&quot;&gt;bugs-bounces@gecode.org&lt;/a&gt;&nbsp;[mailto:&lt;a&nbsp;href=&quot;mailto:bugs-bounces@gecode.org&quot;&nbsp;target=&quot;_blank&quot;&gt;bugs-bounces@gecode.org&lt;/a&gt;]&nbsp;On&lt;br&gt;<br>
&gt;&nbsp;Behalf&nbsp;Of&nbsp;Gecode&nbsp;Bug&nbsp;Tracker&lt;br&gt;<br>
&gt;&nbsp;Sent:&nbsp;Saturday,&nbsp;November&nbsp;09,&nbsp;2013&nbsp;5:03&nbsp;PM&lt;br&gt;<br>
&gt;&nbsp;To:&nbsp;&lt;a&nbsp;href=&quot;mailto:bugs@gecode.org&quot;&nbsp;target=&quot;_blank&quot;&gt;bugs@gecode.org&lt;/a&gt;;&nbsp;&lt;a&nbsp;href=&quot;mailto:joost.van.twist@quintiq.com&quot;&nbsp;target=&quot;_blank&quot;&gt;joost.van.twist@quintiq.com&lt;/a&gt;&lt;br&gt;<br>
&gt;&nbsp;Subject:&nbsp;[Gecode-bugs]&nbsp;New&nbsp;bug:&nbsp;Relational&nbsp;constraint&nbsp;gives&nbsp;inconsistent&lt;br&gt;<br>
&gt;&nbsp;lowerbound&nbsp;for&nbsp;floating&nbsp;variables&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;New&nbsp;bug&nbsp;report&nbsp;for&nbsp;Gecode&nbsp;from&nbsp;Joost&nbsp;van&nbsp;Twist&lt;br&gt;<br>
(&lt;a&nbsp;href=&quot;mailto:joost.van.twist@quintiq.com&quot;&nbsp;target=&quot;_blank&quot;&gt;joost.van.twist@quintiq.com&lt;/a&gt;).&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;Summary:&nbsp;Relational&nbsp;constraint&nbsp;gives&nbsp;inconsistent&nbsp;lowerbound&nbsp;for&nbsp;floating&lt;br&gt;<br>
&gt;&nbsp;variables&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;Gecode&nbsp;version:&nbsp;4.2.0&lt;br&gt;<br>
&gt;&nbsp;Platform:&nbsp;Windows&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;Details:&lt;br&gt;<br>
&gt;&nbsp;/*&lt;br&gt;<br>
&gt;&nbsp;The&nbsp;following&nbsp;program&nbsp;posts&nbsp;a&nbsp;simple&nbsp;relation&nbsp;between&nbsp;two&nbsp;float&nbsp;variables.&lt;br&gt;<br>
The&lt;br&gt;<br>
&gt;&nbsp;lowerbound&nbsp;of&nbsp;variable&nbsp;b&nbsp;remains&nbsp;zero&nbsp;while&nbsp;it&nbsp;should&nbsp;become&nbsp;2.&nbsp;It&nbsp;does&lt;br&gt;<br>
become&lt;br&gt;<br>
&gt;&nbsp;2&nbsp;when&nbsp;changing&nbsp;the&nbsp;upperbound&nbsp;of&nbsp;b&nbsp;to&nbsp;a&nbsp;smaller&nbsp;value&nbsp;(1000&nbsp;for&nbsp;example).&lt;br&gt;<br>
&gt;&nbsp;Also&nbsp;when&nbsp;using&nbsp;the&nbsp;\&quot;&gt;\&quot;&nbsp;operator&nbsp;the&nbsp;lowerbound&nbsp;of&nbsp;b&nbsp;will&nbsp;be&nbsp;2&nbsp;as&nbsp;well.&lt;br&gt;<br>
&gt;&nbsp;*/&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;#include&nbsp;\&quot;gecode/float.hh\&quot;&lt;br&gt;<br>
&gt;&nbsp;#include&nbsp;\&quot;gecode/minimodel.hh\&quot;&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;using&nbsp;namespace&nbsp;Gecode;&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;class&nbsp;TestModel&nbsp;:&nbsp;public&nbsp;Gecode::Space&lt;br&gt;<br>
&gt;&nbsp;{&lt;br&gt;<br>
&gt;&nbsp;public:&lt;br&gt;<br>
&gt;&nbsp; &nbsp;FloatVar&nbsp;a;&lt;br&gt;<br>
&gt;&nbsp; &nbsp;FloatVar&nbsp;b;&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp; &nbsp;TestModel()&lt;br&gt;<br>
&gt;&nbsp; &nbsp; &nbsp;:&nbsp;a(*this,0,&nbsp;0),&lt;br&gt;<br>
&gt;&nbsp; &nbsp; &nbsp; &nbsp;b(*this,0,&nbsp;Gecode::Float::Limits::max)&nbsp;//using&nbsp;an&nbsp;upper&nbsp;bound&lt;br&gt;<br>
significantly&lt;br&gt;<br>
&gt;&nbsp;smaller&nbsp;is&nbsp;also&nbsp;a&nbsp;workaround&lt;br&gt;<br>
&gt;&nbsp; &nbsp;{&lt;br&gt;<br>
&gt;&nbsp; &nbsp; &nbsp;rel(*this,&nbsp;b&nbsp;&gt;=&nbsp;a&nbsp;+&nbsp;2.0);&nbsp;//lower&nbsp;bound&nbsp;of&nbsp;b&nbsp;will&nbsp;stay&nbsp;0,&nbsp;when&lt;br&gt;<br>
changing&nbsp;to&nbsp;\&quot;&gt;\&quot;&lt;br&gt;<br>
&gt;&nbsp;works&nbsp;fine&lt;br&gt;<br>
&gt;&nbsp; &nbsp; &nbsp;//rel(*this,&nbsp;b&nbsp;==&nbsp;0);&nbsp; &nbsp; &nbsp;//will&nbsp;still&nbsp;make&nbsp;the&nbsp;space&nbsp;correctly&lt;br&gt;<br>
infeasible&lt;br&gt;<br>
&gt;&nbsp; &nbsp;}&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp; &nbsp;TestModel(bool&nbsp;share,&nbsp;TestModel&amp;&nbsp;testmodel)&lt;br&gt;<br>
&gt;&nbsp; &nbsp; &nbsp;:&nbsp;Space(share,&nbsp;testmodel)&lt;br&gt;<br>
&gt;&nbsp; &nbsp;{&lt;br&gt;<br>
&gt;&nbsp; &nbsp; &nbsp; a.update(*this,&nbsp;share,&nbsp;testmodel.a);&lt;br&gt;<br>
&gt;&nbsp; &nbsp; &nbsp; b.update(*this,&nbsp;share,&nbsp;testmodel.b);&lt;br&gt;<br>
&gt;&nbsp; &nbsp;}&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp; &nbsp;virtual&nbsp;Gecode::Space*&nbsp;copy(bool&nbsp;share)&lt;br&gt;<br>
&gt;&nbsp; &nbsp;{&lt;br&gt;<br>
&gt;&nbsp; &nbsp; &nbsp;return&nbsp;new&nbsp;TestModel(share,&nbsp;*this);&lt;br&gt;<br>
&gt;&nbsp; &nbsp;}&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp; &nbsp;virtual&nbsp;void&nbsp;print(std::ostream&amp;&nbsp;os)&nbsp;const&lt;br&gt;<br>
&gt;&nbsp; &nbsp;{&lt;br&gt;<br>
&gt;&nbsp; &nbsp; &nbsp;os&nbsp;&lt;&lt;&nbsp;\&quot;a:&nbsp;\&quot;&nbsp;&lt;&lt;&nbsp;a&nbsp;&lt;&lt;&nbsp;\&quot;&nbsp;b:&nbsp;\&quot;&nbsp;&lt;&lt;&nbsp;b&nbsp;&lt;&lt;&nbsp;std::endl;&lt;br&gt;<br>
&gt;&nbsp; &nbsp;}&lt;br&gt;<br>
&gt;&nbsp;};&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;int&nbsp;main(int&nbsp;argc,&nbsp;char*&nbsp;argv[])&lt;br&gt;<br>
&gt;&nbsp;{&lt;br&gt;<br>
&gt;&nbsp; &nbsp;TestModel&nbsp;model;&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp; &nbsp;if&nbsp;(&nbsp;model.status()&nbsp;==&nbsp;SS_FAILED&nbsp;)&lt;br&gt;<br>
&gt;&nbsp; &nbsp;{&lt;br&gt;<br>
&gt;&nbsp; &nbsp; &nbsp;std::cout&nbsp;&lt;&lt;&nbsp;\&quot;infeasible\&quot;&nbsp;&lt;&lt;&nbsp;std::endl;&lt;br&gt;<br>
&gt;&nbsp; &nbsp;}&nbsp;else&lt;br&gt;<br>
&gt;&nbsp; &nbsp;{&lt;br&gt;<br>
&gt;&nbsp; &nbsp; &nbsp;std::cout&nbsp;&lt;&lt;&nbsp;\&quot;feasible\&quot;&nbsp;&lt;&lt;&nbsp;std::endl;&lt;br&gt;<br>
&gt;&nbsp; &nbsp;}&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp; &nbsp;model.print(std::cout);&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp; &nbsp;return&nbsp;0;&lt;br&gt;<br>
&gt;&nbsp;}&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;_______________________________________________&lt;br&gt;<br>
&gt;&nbsp;bugs&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&gt;&nbsp;&lt;a&nbsp;href=&quot;mailto:bugs@gecode.org&quot;&nbsp;target=&quot;_blank&quot;&gt;bugs@gecode.org&lt;/a&gt;&lt;br&gt;<br>
&gt;&nbsp;&lt;a&nbsp;href=&quot;http://www.gecode.org/cgi-bin/mailman/listinfo/bugs&quot;&nbsp;target=&quot;_blank&quot;&gt;http://www.gecode.org/cgi-bin/mailman/listinfo/bugs&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;br&nbsp;clear=&quot;all&quot;&gt;&lt;br&gt;--&nbsp;&lt;br&gt;Vincent&nbsp;Barichard&nbsp; &nbsp; &nbsp;  &nbsp; Université&nbsp;d&#39;Angers&nbsp;(LERIA)&lt;br&gt;Tel:&nbsp; &lt;a&nbsp;href=&quot;tel:02%2041%2073%2052%2006&quot;&nbsp;value=&quot;+33241735206&quot;&nbsp;target=&quot;_blank&quot;&gt;02&nbsp;41&nbsp;73&nbsp;52&nbsp;06&lt;/a&gt;&nbsp; &nbsp; &nbsp; Département&nbsp;Informatique&lt;br&gt;<br>
Fax:&nbsp;&lt;a&nbsp;href=&quot;tel:02%2041%2073%2050%2073&quot;&nbsp;value=&quot;+33241735073&quot;&nbsp;target=&quot;_blank&quot;&gt;02&nbsp;41&nbsp;73&nbsp;50&nbsp;73&lt;/a&gt;&nbsp; &nbsp; &nbsp; H203<br>
&lt;/div&gt;<br>
&lt;br&gt;_______________________________________________&lt;br&gt;<br>
Gecode&nbsp;users&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:users@gecode.org&quot;&gt;users@gecode.org&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;https://www.gecode.org/mailman/listinfo/gecode-users&quot;&nbsp;target=&quot;_blank&quot;&gt;https://www.gecode.org/mailman/listinfo/gecode-users&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;br&nbsp;clear=&quot;all&quot;&gt;&lt;br&gt;--&nbsp;&lt;br&gt;Vincent&nbsp;Barichard&nbsp; &nbsp; &nbsp;  &nbsp; Université&nbsp;d&#39;Angers&nbsp;(LERIA)&lt;br&gt;Tel:&nbsp; 02&nbsp;41&nbsp;73&nbsp;52&nbsp;06&nbsp; &nbsp; &nbsp; Département&nbsp;Informatique&lt;br&gt;Fax:&nbsp;02&nbsp;41&nbsp;73&nbsp;50&nbsp;73&nbsp; &nbsp; &nbsp; H203<br>
&lt;/div&gt;&lt;/div&gt;<br>

</tt>
