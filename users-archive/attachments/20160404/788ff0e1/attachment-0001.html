<tt>
&lt;html&gt;&lt;head&gt;&lt;meta&nbsp;http-equiv=&quot;Content-Type&quot;&nbsp;content=&quot;text/html&nbsp;charset=utf-8&quot;&gt;&lt;/head&gt;&lt;body&nbsp;style=&quot;word-wrap:&nbsp;break-word;&nbsp;-webkit-nbsp-mode:&nbsp;space;&nbsp;-webkit-line-break:&nbsp;after-white-space;&quot;&nbsp;class=&quot;&quot;&gt;Hi,&lt;div&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;there’s&nbsp;nothing&nbsp;wrong&nbsp;with&nbsp;your&nbsp;model,&nbsp;it’s&nbsp;just&nbsp;that&nbsp;it&nbsp;falls&nbsp;into&nbsp;a&nbsp;subclass&nbsp;of&nbsp;problems&nbsp;(linear&nbsp;assignment&nbsp;problems)&nbsp;that&nbsp;is&nbsp;absolutely&nbsp;perfect&nbsp;for&nbsp;linear&nbsp;solvers&nbsp;and&nbsp;quite&nbsp;bad&nbsp;for&nbsp;CP&nbsp;solvers.&nbsp;&nbsp;Unless&nbsp;you&nbsp;have&nbsp;other&nbsp;side&nbsp;constraints&nbsp;that&nbsp;would&nbsp;make&nbsp;it&nbsp;difficult&nbsp;for&nbsp;a&nbsp;linear&nbsp;or&nbsp;MIP&nbsp;solver&nbsp;to&nbsp;find&nbsp;feasible&nbsp;solutions,&nbsp;a&nbsp;MIP&nbsp;will&nbsp;always&nbsp;be&nbsp;many&nbsp;orders&nbsp;of&nbsp;magnitude&nbsp;faster&nbsp;than&nbsp;a&nbsp;CP&nbsp;solver&nbsp;on&nbsp;this&nbsp;problem&nbsp;class.&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;Cheers,&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;Guido&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;class=&quot;&quot;&gt;<br>
&lt;div&nbsp;style=&quot;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;letter-spacing:&nbsp;normal;&nbsp;orphans:&nbsp;auto;&nbsp;text-align:&nbsp;start;&nbsp;text-indent:&nbsp;0px;&nbsp;text-transform:&nbsp;none;&nbsp;white-space:&nbsp;normal;&nbsp;widows:&nbsp;auto;&nbsp;word-spacing:&nbsp;0px;&nbsp;-webkit-text-stroke-width:&nbsp;0px;&nbsp;word-wrap:&nbsp;break-word;&nbsp;-webkit-nbsp-mode:&nbsp;space;&nbsp;-webkit-line-break:&nbsp;after-white-space;&quot;&nbsp;class=&quot;&quot;&gt;--&nbsp;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;b&nbsp;class=&quot;&quot;&gt;GUIDO&nbsp;TACK&lt;/b&gt;&lt;span&nbsp;class=&quot;Apple-converted-space&quot;&gt;&nbsp;&lt;/span&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&nbsp;class=&quot;&quot;&gt;Senior&nbsp;Lecturer&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;b&nbsp;class=&quot;&quot;&gt;Information&nbsp;Technology&lt;/b&gt;&lt;br&nbsp;class=&quot;&quot;&gt;Monash&nbsp;University&lt;br&nbsp;class=&quot;&quot;&gt;Level&nbsp;6,&nbsp;Room&nbsp;6.40,&nbsp;Building&nbsp;H,&nbsp;Caulfield&nbsp;Campus&lt;br&nbsp;class=&quot;&quot;&gt;900&nbsp;Dandenong&nbsp;Road&lt;br&nbsp;class=&quot;&quot;&gt;Caulfield&nbsp;East&nbsp;VIC&nbsp;3145&lt;br&nbsp;class=&quot;&quot;&gt;Australia&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;T:&nbsp;+61&nbsp;3&nbsp;9903&nbsp;1214&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&nbsp;class=&quot;&quot;&gt;E:&nbsp;&lt;a&nbsp;href=&quot;mailto:guido.tack@monash.edu&quot;&nbsp;class=&quot;&quot;&gt;guido.tack@monash.edu&lt;/a&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;a&nbsp;href=&quot;http://www.csse.monash.edu/~guidot/&quot;&nbsp;class=&quot;&quot;&gt;http://www.csse.monash.edu/~guidot/&lt;/a&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;<br>
&lt;/div&gt;<br>
<br>
&lt;br&nbsp;class=&quot;&quot;&gt;&lt;div&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;class=&quot;&quot;&gt;On&nbsp;4&nbsp;Apr&nbsp;2016,&nbsp;at&nbsp;6:18&nbsp;AM,&nbsp;Florent&nbsp;Teichteil&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:florent.teichteil@gmail.com&quot;&nbsp;class=&quot;&quot;&gt;florent.teichteil@gmail.com&lt;/a&gt;&gt;&nbsp;wrote:&lt;/div&gt;&lt;br&nbsp;class=&quot;Apple-interchange-newline&quot;&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;class=&quot;&quot;&gt;Hi&nbsp;all,&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;I&nbsp;am&nbsp;wondering&nbsp;if&nbsp;I&nbsp;use&nbsp;Gecode&nbsp;the&nbsp;right&nbsp;way&nbsp;since&nbsp;I&nbsp;get&nbsp;poor&nbsp;performances&nbsp;on&nbsp;a&nbsp;simple&nbsp;optimal&nbsp;allocation&nbsp;problem.&nbsp;The&nbsp;B&amp;B&nbsp;search&nbsp;algorithm&nbsp;keeps&nbsp;improving&nbsp;the&nbsp;cost&nbsp;but&nbsp;without&nbsp;ever&nbsp;converging&nbsp;(even&nbsp;after&nbsp;several&nbsp;minutes)&nbsp;while&nbsp;the&nbsp;same&nbsp;problem&nbsp;is&nbsp;solved&nbsp;in&nbsp;less&nbsp;than&nbsp;100ms&nbsp;with&nbsp;the&nbsp;CBC&nbsp;solver&nbsp;from&nbsp;COIN.&nbsp;I&nbsp;must&nbsp;say&nbsp;that&nbsp;I&nbsp;am&nbsp;more&nbsp;comfortable&nbsp;with&nbsp;operation&nbsp;research&nbsp;algorithms&nbsp;than&nbsp;with&nbsp;CP&nbsp;ones,&nbsp;so&nbsp;it&nbsp;is&nbsp;possible&nbsp;that&nbsp;I&nbsp;misuse&nbsp;Gecode.&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;The&nbsp;problem&nbsp;consists&nbsp;in&nbsp;assigning&nbsp;objects&nbsp;in&nbsp;A&nbsp;to&nbsp;objects&nbsp;in&nbsp;B&nbsp;so&nbsp;as&nbsp;to&nbsp;maximize&nbsp;the&nbsp;overall&nbsp;revenue.&lt;br&nbsp;class=&quot;&quot;&gt;Allocations&nbsp;are&nbsp;optional,&nbsp;i.e.&nbsp;a&nbsp;given&nbsp;object&nbsp;in&nbsp;B&nbsp;does&nbsp;not&nbsp;need&nbsp;to&nbsp;have&nbsp;an&nbsp;assigned&nbsp;object&nbsp;from&nbsp;A&nbsp;if&nbsp;it&nbsp;decreases&nbsp;the&nbsp;overall&nbsp;revenue.&lt;br&nbsp;class=&quot;&quot;&gt;By&nbsp;abusing&nbsp;the&nbsp;notation&nbsp;I&nbsp;represent&nbsp;A&nbsp;and&nbsp;B&nbsp;as&nbsp;positive&nbsp;integers&nbsp;and&nbsp;the&nbsp;corresponding&nbsp;object&nbsp;sets&nbsp;as&nbsp;{0,...,A-1}&nbsp;and&nbsp;{0,...,B-1}&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;ILP&nbsp;model:&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;*&nbsp;Decision&nbsp;variables:&nbsp;x(a,b)&nbsp;in&nbsp;{0,1}&nbsp;for&nbsp;each&nbsp;a&nbsp;in&nbsp;{0,...,A-1}&nbsp;and&nbsp;b&nbsp;in&nbsp;{0,...,B-1}&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;*&nbsp;R(a,b)=floor(A*B*cos(2*PI*a*b/A*B))&nbsp;is&nbsp;the&nbsp;revenue&nbsp;of&nbsp;the&nbsp;allocation&nbsp;pair&nbsp;(a,b)&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;*&nbsp;max&nbsp;sum_{a&nbsp;in&nbsp;{0,...,A-1},&nbsp;b&nbsp;in&nbsp;{0,...,B-1}}&nbsp;x(a,b)&nbsp;*&nbsp;R(a,b)&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;*&nbsp;for&nbsp;each&nbsp;a&nbsp;in&nbsp;{0,...,A-1}:&nbsp;sum(b&nbsp;in&nbsp;{0,...,B-1})&nbsp;x(a,b)&nbsp;&lt;=&nbsp;1&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;*&nbsp;for&nbsp;each&nbsp;b&nbsp;in&nbsp;{0,...,B-1}:&nbsp;sum(a&nbsp;in&nbsp;{0,...,A-1})&nbsp;x(a,b)&nbsp;&lt;=&nbsp;1&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;CP&nbsp;model:&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;*&nbsp;Decision&nbsp;variables:&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;x(b)&nbsp;in&nbsp;{0,...,A}&nbsp;for&nbsp;each&nbsp;b&nbsp;in&nbsp;{0,...,B-1};&nbsp;x(b)=A&nbsp;when&nbsp;no&nbsp;object&nbsp;from&nbsp;A&nbsp;is&nbsp;assigned&nbsp;to&nbsp;b&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;y(b)&nbsp;=&nbsp;R(x(b),b)&nbsp;in&nbsp;{0,...}&nbsp;if&nbsp;x(b)&nbsp;!=&nbsp;A&nbsp;else&nbsp;0,&nbsp;for&nbsp;each&nbsp;b&nbsp;in&nbsp;{0,...,B-1}&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;*&nbsp;with&nbsp;R(a,b)=floor(A*B*cos(2*PI*a*b/A*B))&nbsp;is&nbsp;the&nbsp;revenue&nbsp;of&nbsp;the&nbsp;allocation&nbsp;pair&nbsp;(a,b)&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;*&nbsp;max&nbsp;sum_{b&nbsp;in&nbsp;{0,...,B-1}}&nbsp;y(b)&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;*&nbsp;for&nbsp;each&nbsp;b&nbsp;in&nbsp;{0,...,B-1}:&nbsp;y(b)&nbsp;=&nbsp;floor(A*B*cos(2*PI*x(b)*b/A*B))&nbsp;if&nbsp;x(b)&nbsp;!=&nbsp;A&nbsp;else&nbsp;0&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;*&nbsp;alldistinct(x)&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&nbsp;&nbsp;*&nbsp;branching&nbsp;with:&nbsp;branch(*this,&nbsp;x,&nbsp;INT_VAR_SIZE_MIN(),&nbsp;INT_VAL_MIN());&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;In&nbsp;my&nbsp;test&nbsp;I&nbsp;use&nbsp;A=200&nbsp;and&nbsp;B=100.&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;The&nbsp;ILP&nbsp;CBC&nbsp;solver&nbsp;can&nbsp;even&nbsp;solve&nbsp;the&nbsp;problem&nbsp;with&nbsp;A=2000&nbsp;and&nbsp;B=1000&nbsp;like&nbsp;a&nbsp;charm.&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;Note&nbsp;that&nbsp;the&nbsp;number&nbsp;of&nbsp;variables&nbsp;in&nbsp;the&nbsp;ILP&nbsp;model&nbsp;is&nbsp;much&nbsp;larger&nbsp;than&nbsp;in&nbsp;the&nbsp;CP&nbsp;model.&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;I&nbsp;tried&nbsp;also&nbsp;to&nbsp;use&nbsp;Gecode&nbsp;with&nbsp;the&nbsp;ILP&nbsp;model&nbsp;but&nbsp;the&nbsp;performances&nbsp;are&nbsp;poor&nbsp;too.&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;Why&nbsp;can't&nbsp;Gecode&nbsp;solve&nbsp;this&nbsp;simple&nbsp;problem?&nbsp;Did&nbsp;I&nbsp;make&nbsp;something&nbsp;wrong?&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;Are&nbsp;MILP&nbsp;solvers&nbsp;much&nbsp;better&nbsp;than&nbsp;CP&nbsp;ones&nbsp;for&nbsp;such&nbsp;optimization&nbsp;problems?&nbsp;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;The&nbsp;entire&nbsp;code&nbsp;is&nbsp;given&nbsp;below.&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;Many&nbsp;thanks&nbsp;in&nbsp;advance!&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;Florent&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;#include&nbsp;&lt;gecode/driver.hh&gt;&lt;br&nbsp;class=&quot;&quot;&gt;#include&nbsp;&lt;gecode/int.hh&gt;&lt;br&nbsp;class=&quot;&quot;&gt;#include&nbsp;&lt;gecode/minimodel.hh&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;using&nbsp;namespace&nbsp;Gecode;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;class&nbsp;Allocation&nbsp;:&nbsp;public&nbsp;MaximizeScript&nbsp;{&lt;br&nbsp;class=&quot;&quot;&gt;protected:&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;static&nbsp;const&nbsp;int&nbsp;A&nbsp;=&nbsp;200;&nbsp;&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;static&nbsp;const&nbsp;int&nbsp;B&nbsp;=&nbsp;100;&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;IntVarArray&nbsp;x;&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;IntVarArray&nbsp;y;&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;IntVar&nbsp;total_reward;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;public:&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;Allocation(const&nbsp;SizeOptions&amp;&nbsp;opt)&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;MaximizeScript(opt),&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;x(*this,&nbsp;B,&nbsp;0,&nbsp;A),&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;y(*this,&nbsp;B,&nbsp;Int::Limits::min,&nbsp;Int::Limits::max),&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;total_reward(*this,&nbsp;Int::Limits::min,&nbsp;Int::Limits::max)&nbsp;{&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IntArgs&nbsp;rewards((A+1)*B);&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;double&nbsp;PI&nbsp;=&nbsp;std::acos(-1.0);&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;(unsigned&nbsp;int&nbsp;b&nbsp;=&nbsp;0&nbsp;;&nbsp;b&nbsp;&lt;&nbsp;B&nbsp;;&nbsp;b++)&nbsp;{&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;(unsigned&nbsp;int&nbsp;a&nbsp;=&nbsp;0&nbsp;;&nbsp;a&nbsp;&lt;&nbsp;A&nbsp;;&nbsp;a++)&nbsp;{&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rewards[a&nbsp;+&nbsp;b&nbsp;*&nbsp;(A+1)]&nbsp;=&nbsp;static_cast&lt;int&gt;(std::floor(A*B*std::cos(2*PI*((double)&nbsp;a*b)/((double)&nbsp;A*B))));&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(rewards[a&nbsp;+&nbsp;b&nbsp;*&nbsp;(A+1)]&nbsp;&lt;&nbsp;0.0)&nbsp;{&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rel(*this,&nbsp;x[b]&nbsp;!=&nbsp;a);&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rewards[A*(b+1)&nbsp;+&nbsp;b]&nbsp;=&nbsp;0.0;&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IntSharedArray&nbsp;sc(rewards);&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;(unsigned&nbsp;int&nbsp;b&nbsp;=&nbsp;0&nbsp;;&nbsp;b&nbsp;&lt;&nbsp;B&nbsp;;&nbsp;b++)&nbsp;{&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rel(*this,&nbsp;y[b]&nbsp;==&nbsp;element(sc,&nbsp;x[b]&nbsp;+&nbsp;b&nbsp;*&nbsp;(A+1)));&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;distinct(*this,&nbsp;x);&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rel(*this,&nbsp;total_reward&nbsp;==&nbsp;sum(y));&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;branch(*this,&nbsp;x,&nbsp;INT_VAR_SIZE_MIN(),&nbsp;INT_VAL_MIN());&lt;br&nbsp;class=&quot;&quot;&gt;//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;branch(*this,&nbsp;x,&nbsp;INT_VAR_DEGREE_MIN(),&nbsp;INT_VAL_MIN());&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;}&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;virtual&nbsp;void<br>
&nbsp;&nbsp;print(std::ostream&amp;&nbsp;os)&nbsp;const&nbsp;{&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;os&nbsp;&lt;&lt;&nbsp;&quot;total_reward:&nbsp;&quot;&nbsp;&lt;&lt;&nbsp;total_reward&nbsp;&lt;&lt;&nbsp;std::endl;&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for(int&nbsp;b&nbsp;=&nbsp;0;&nbsp;b&nbsp;&lt;&nbsp;B;&nbsp;b++)&nbsp;{&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;os&nbsp;&lt;&lt;&nbsp;x[b]&nbsp;&lt;&lt;&nbsp;&quot;&nbsp;&quot;;&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;os&nbsp;&lt;&lt;&nbsp;std::endl;&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;}&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;virtual&nbsp;IntVar&nbsp;cost(void)&nbsp;const&nbsp;{&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;total_reward;&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;}&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;Allocation(bool&nbsp;share,&nbsp;Allocation&amp;&nbsp;s)&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;MaximizeScript(share,s)&nbsp;{&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;x.update(*this,&nbsp;share,&nbsp;s.x);&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;y.update(*this,&nbsp;share,&nbsp;s.y);&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;total_reward.update(*this,&nbsp;share,&nbsp;s.total_reward);&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;}&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;virtual&nbsp;Space*<br>
&nbsp;&nbsp;copy(bool&nbsp;share)&nbsp;{&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;new&nbsp;Allocation(share,*this);&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;}&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;};&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;int<br>
main(int&nbsp;argc,&nbsp;char*&nbsp;argv[])&nbsp;{&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;SizeOptions&nbsp;opt(&quot;Allocation&quot;);&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;opt.solutions(0);&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;opt.iterations(20000);&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;opt.parse(argc,argv);&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;MaximizeScript::run&lt;Allocation,BAB,SizeOptions&gt;(opt);&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;0;&lt;br&nbsp;class=&quot;&quot;&gt;}&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;/div&gt;<br>
_______________________________________________&lt;br&nbsp;class=&quot;&quot;&gt;Gecode&nbsp;users&nbsp;mailing&nbsp;list&lt;br&nbsp;class=&quot;&quot;&gt;&lt;a&nbsp;href=&quot;mailto:users@gecode.org&quot;&nbsp;class=&quot;&quot;&gt;users@gecode.org&lt;/a&gt;&lt;br&nbsp;class=&quot;&quot;&gt;https://www.gecode.org/mailman/listinfo/gecode-users&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;
</tt>
