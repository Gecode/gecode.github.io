<tt>
&lt;html&gt;&lt;head&gt;&lt;meta&nbsp;http-equiv=&quot;Content-Type&quot;&nbsp;content=&quot;text/html&nbsp;charset=utf-8&quot;&gt;&lt;/head&gt;&lt;body&nbsp;style=&quot;word-wrap:&nbsp;break-word;&nbsp;-webkit-nbsp-mode:&nbsp;space;&nbsp;-webkit-line-break:&nbsp;after-white-space;&quot;&nbsp;class=&quot;&quot;&gt;I&nbsp;think&nbsp;the&nbsp;problem&nbsp;here&nbsp;is&nbsp;that&nbsp;you’re&nbsp;not&nbsp;branching&nbsp;over&nbsp;the&nbsp;cost&nbsp;variable.&nbsp;&nbsp;With&nbsp;float&nbsp;variables,&nbsp;it’s&nbsp;not&nbsp;guaranteed&nbsp;that&nbsp;just&nbsp;because&nbsp;all&nbsp;x[i]&nbsp;are&nbsp;assigned&nbsp;(i.e.,&nbsp;restricted&nbsp;to&nbsp;the&nbsp;smallest&nbsp;possible&nbsp;interval!),&nbsp;the&nbsp;result&nbsp;of&nbsp;c[i]*x[i]&nbsp;will&nbsp;also&nbsp;be&nbsp;assigned.&nbsp;&nbsp;So&nbsp;you&nbsp;need&nbsp;to&nbsp;branch&nbsp;on&nbsp;the&nbsp;result,&nbsp;in&nbsp;this&nbsp;case&nbsp;on&nbsp;t_cost.&lt;div&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;Cheers,&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;Guido&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;class=&quot;&quot;&gt;<br>
&lt;div&nbsp;style=&quot;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;letter-spacing:&nbsp;normal;&nbsp;orphans:&nbsp;auto;&nbsp;text-align:&nbsp;start;&nbsp;text-indent:&nbsp;0px;&nbsp;text-transform:&nbsp;none;&nbsp;white-space:&nbsp;normal;&nbsp;widows:&nbsp;auto;&nbsp;word-spacing:&nbsp;0px;&nbsp;-webkit-text-stroke-width:&nbsp;0px;&nbsp;word-wrap:&nbsp;break-word;&nbsp;-webkit-nbsp-mode:&nbsp;space;&nbsp;-webkit-line-break:&nbsp;after-white-space;&quot;&nbsp;class=&quot;&quot;&gt;--&nbsp;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;b&nbsp;class=&quot;&quot;&gt;GUIDO&nbsp;TACK&lt;/b&gt;&lt;span&nbsp;class=&quot;Apple-converted-space&quot;&gt;&nbsp;&lt;/span&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&nbsp;class=&quot;&quot;&gt;Senior&nbsp;Lecturer&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;b&nbsp;class=&quot;&quot;&gt;Information&nbsp;Technology&lt;/b&gt;&lt;br&nbsp;class=&quot;&quot;&gt;Monash&nbsp;University&lt;br&nbsp;class=&quot;&quot;&gt;Level&nbsp;6,&nbsp;Room&nbsp;6.40,&nbsp;Building&nbsp;H,&nbsp;Caulfield&nbsp;Campus&lt;br&nbsp;class=&quot;&quot;&gt;900&nbsp;Dandenong&nbsp;Road&lt;br&nbsp;class=&quot;&quot;&gt;Caulfield&nbsp;East&nbsp;VIC&nbsp;3145&lt;br&nbsp;class=&quot;&quot;&gt;Australia&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;T:&nbsp;+61&nbsp;3&nbsp;9903&nbsp;1214&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&nbsp;class=&quot;&quot;&gt;E:&nbsp;&lt;a&nbsp;href=&quot;mailto:guido.tack@monash.edu&quot;&nbsp;class=&quot;&quot;&gt;guido.tack@monash.edu&lt;/a&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;a&nbsp;href=&quot;http://www.csse.monash.edu/~guidot/&quot;&nbsp;class=&quot;&quot;&gt;http://www.csse.monash.edu/~guidot/&lt;/a&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;<br>
&lt;/div&gt;<br>
<br>
&lt;br&nbsp;class=&quot;&quot;&gt;&lt;div&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;class=&quot;&quot;&gt;On&nbsp;22&nbsp;Sep.&nbsp;2016,&nbsp;at&nbsp;7:59&nbsp;pm,&nbsp;Sebastien&nbsp;Delmotte&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:delmotte@mad-environnement.com&quot;&nbsp;class=&quot;&quot;&gt;delmotte@mad-environnement.com&lt;/a&gt;&gt;&nbsp;wrote:&lt;/div&gt;&lt;br&nbsp;class=&quot;Apple-interchange-newline&quot;&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;class=&quot;&quot;&gt;Dear&nbsp;All,&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;I'm&nbsp;back&nbsp;with&nbsp;my&nbsp;issue&nbsp;of&nbsp;cost&nbsp;optimization&nbsp;with&nbsp;float&nbsp;variables.&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;I&nbsp;can't&nbsp;solve&nbsp;my&nbsp;problem&nbsp;with&nbsp;integers&nbsp;because&nbsp;:&nbsp;(i)&nbsp;the&nbsp;transformation&nbsp;of&lt;br&nbsp;class=&quot;&quot;&gt;my&nbsp;model&nbsp;from&nbsp;float&nbsp;to&nbsp;integer&nbsp;makes&nbsp;me&nbsp;using&nbsp;coefficients&nbsp;with&nbsp;high&nbsp;value&lt;br&nbsp;class=&quot;&quot;&gt;which&nbsp;cause&nbsp;the&nbsp;overtaking&nbsp;of&nbsp;int&nbsp;size;&nbsp;(ii)&nbsp;even&nbsp;with&nbsp;smaller&nbsp;values,&nbsp;the&lt;br&nbsp;class=&quot;&quot;&gt;time&nbsp;of&nbsp;optimization&nbsp;is&nbsp;around&nbsp;11h20&nbsp;for&nbsp;optimizing&nbsp;only&nbsp;6&nbsp;coefficients&nbsp;(and&lt;br&nbsp;class=&quot;&quot;&gt;I&nbsp;have&nbsp;more&nbsp;to&nbsp;optimize).&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;So,&nbsp;I've&nbsp;tested&nbsp;another&nbsp;example:&nbsp;(i)&nbsp;&nbsp;I've&nbsp;taken&nbsp;the&nbsp;Hakank&nbsp;diet&nbsp;code&lt;br&nbsp;class=&quot;&quot;&gt;(&lt;a&nbsp;href=&quot;http://www.hakank.org/gecode/&quot;&nbsp;class=&quot;&quot;&gt;http://www.hakank.org/gecode/&lt;/a&gt;)&nbsp;written&nbsp;with&nbsp;integer&nbsp;variables;&nbsp;(ii)&nbsp;I've&lt;br&nbsp;class=&quot;&quot;&gt;transformed&nbsp;the&nbsp;code&nbsp;to&nbsp;solve&nbsp;the&nbsp;model&nbsp;with&nbsp;float&nbsp;variables&nbsp;instead&nbsp;of&lt;br&nbsp;class=&quot;&quot;&gt;integer&nbsp;variables.&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;The&nbsp;result&nbsp;is&nbsp;similar&nbsp;than&nbsp;with&nbsp;my&nbsp;model:&nbsp;an&nbsp;exception&nbsp;occurs&nbsp;about&lt;br&nbsp;class=&quot;&quot;&gt;&quot;unassigned&nbsp;variable&quot;&nbsp;which&nbsp;is&nbsp;probably&nbsp;the&nbsp;cost&nbsp;variable.&nbsp;(I&nbsp;put&nbsp;the&nbsp;code&lt;br&nbsp;class=&quot;&quot;&gt;at&nbsp;the&nbsp;end&nbsp;of&nbsp;this&nbsp;message).&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;So&nbsp;it&nbsp;seems&nbsp;that&nbsp;the&nbsp;issue&nbsp;is&nbsp;not&nbsp;a&nbsp;modelling&nbsp;one.&nbsp;Do&nbsp;you&nbsp;have&nbsp;an&nbsp;idea&nbsp;about&lt;br&nbsp;class=&quot;&quot;&gt;the&nbsp;origin&nbsp;of&nbsp;this&nbsp;exception&nbsp;which&nbsp;occurs&nbsp;with&nbsp;the&nbsp;two&nbsp;models&nbsp;I've&nbsp;tested?&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;Do&nbsp;you&nbsp;known&nbsp;some&nbsp;other&nbsp;float&nbsp;optimization&nbsp;examples&nbsp;which&nbsp;are&nbsp;solved&nbsp;with&lt;br&nbsp;class=&quot;&quot;&gt;gecode?&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;Thank&nbsp;you&nbsp;in&nbsp;advance.&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;Best&nbsp;regards,&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;S.&nbsp;D.&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;Adapted&nbsp;Hakank&nbsp;Code:&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;#include&nbsp;&lt;gecode/driver.hh&gt;&lt;br&nbsp;class=&quot;&quot;&gt;#include&nbsp;&lt;gecode/float.hh&gt;&lt;br&nbsp;class=&quot;&quot;&gt;#include&nbsp;&lt;gecode/minimodel.hh&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;using&nbsp;namespace&nbsp;Gecode;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;class&nbsp;Tests&nbsp;:&nbsp;public&nbsp;FloatMinimizeScript&nbsp;&nbsp;{&lt;br&nbsp;class=&quot;&quot;&gt;protected:&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;FloatVarArray&nbsp;x;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;amount&nbsp;of&nbsp;each&nbsp;product&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;FloatVar&nbsp;t_cost;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;total&nbsp;cost&nbsp;to&nbsp;minimize&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;static&nbsp;const&nbsp;int&nbsp;n&nbsp;=&nbsp;4;&nbsp;//&nbsp;number&nbsp;of&nbsp;products&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;public:&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;Tests(const&nbsp;Options&amp;&nbsp;o)&nbsp;:FloatMinimizeScript(o),&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;x(*this,&nbsp;n,&nbsp;0,&nbsp;1000),&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;t_cost(*this,&nbsp;0,&nbsp;1000)&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;{&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;float&nbsp;_price[]&nbsp;&nbsp;=&nbsp;{&nbsp;50.f,&nbsp;20.f,&nbsp;30.f,&nbsp;80.f};&nbsp;//&nbsp;in&nbsp;cents&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;float&nbsp;limits[]&nbsp;&nbsp;=&nbsp;{500.f,&nbsp;&nbsp;6.f,&nbsp;10.f,&nbsp;&nbsp;8.f};&nbsp;//&nbsp;requirements&nbsp;for&lt;br&nbsp;class=&quot;&quot;&gt;each&nbsp;nutrition&nbsp;type&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;nutritions&nbsp;for&nbsp;each&nbsp;product&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;float&nbsp;_calories[]&nbsp;&nbsp;=&nbsp;{400.f,&nbsp;200.f,&nbsp;150.f,&nbsp;500.f};&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;float&nbsp;_chocolate[]&nbsp;=&nbsp;{&nbsp;&nbsp;3.f,&nbsp;&nbsp;&nbsp;2.f,&nbsp;&nbsp;&nbsp;0.f,&nbsp;&nbsp;&nbsp;0.f};&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;float&nbsp;_sugar[]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;{&nbsp;&nbsp;2.f,&nbsp;&nbsp;&nbsp;2.f,&nbsp;&nbsp;&nbsp;4.f,&nbsp;&nbsp;&nbsp;4.f};&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;float&nbsp;_fat[]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;{&nbsp;&nbsp;2.f,&nbsp;&nbsp;&nbsp;4.f,&nbsp;&nbsp;&nbsp;1.f,&nbsp;&nbsp;&nbsp;5.f};&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;FloatVarArgs&nbsp;v_calories;&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;FloatVarArgs&nbsp;v_chocolate;&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;FloatVarArgs&nbsp;v_fat;&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;FloatVarArgs&nbsp;v_sugar;&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;FloatVarArgs&nbsp;v_costs;&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for(int&nbsp;i&nbsp;=&nbsp;0;i&lt;4;++i)&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;v_calories&nbsp;&lt;&lt;&nbsp;expr(*this,x[i]*_calories[i]);&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;v_chocolate&nbsp;&lt;&lt;&nbsp;expr(*this,x[i]*_chocolate[i]);&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;v_fat&nbsp;&lt;&lt;&nbsp;expr(*this,x[i]*_fat[i]);&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;v_sugar&nbsp;&lt;&lt;&nbsp;expr(*this,x[i]*_sugar[i]);&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;v_costs&nbsp;&lt;&lt;&nbsp;expr(*this,x[i]*_price[i]);&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rel(*this,expr(*this,sum(v_calories)),FRT_GQ,limits[0]);&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rel(*this,expr(*this,sum(v_chocolate)),FRT_GQ,limits[1]);&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rel(*this,expr(*this,sum(v_sugar)),FRT_GQ,limits[2]);&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rel(*this,expr(*this,sum(v_fat)),FRT_GQ,limits[3]);&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;t_cost&nbsp;=&nbsp;expr(*this,sum(v_costs));&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;branch(*this,&nbsp;x,&nbsp;FLOAT_VAR_NONE(),&nbsp;FLOAT_VAL_SPLIT_MIN());&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;}&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Prfloat&nbsp;solution&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;virtual&nbsp;void&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;prfloat(std::ostream&amp;&nbsp;os)&nbsp;const&nbsp;{&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;os&nbsp;&lt;&lt;&nbsp;&quot;\t&quot;&nbsp;&lt;&lt;&nbsp;x&nbsp;&lt;&lt;&nbsp;&quot;&nbsp;t_cost:&nbsp;&quot;&nbsp;&lt;&lt;&nbsp;t_cost&nbsp;&lt;&lt;&nbsp;std::endl;&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;}&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;virtual&nbsp;FloatVar&nbsp;cost(void)&nbsp;const{&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;t_cost;&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;}&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;Tests(bool&nbsp;share,&nbsp;Tests&amp;&nbsp;s)&nbsp;:&nbsp;FloatMinimizeScript(share,s)&nbsp;{&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;x.update(*this,&nbsp;share,&nbsp;s.x);&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;t_cost.update(*this,&nbsp;share,&nbsp;s.t_cost);&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;}&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;virtual&nbsp;Space*&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;copy(bool&nbsp;share)&nbsp;{&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;new&nbsp;Tests(share,*this);&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;}&lt;br&nbsp;class=&quot;&quot;&gt;};&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;float&nbsp;main(float&nbsp;argc,&nbsp;char*&nbsp;argv[])&nbsp;{&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;Options&nbsp;opt(&quot;Test&quot;);&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;opt.solutions(1e9);&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;//opt.threads(8);&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;FloatMinimizeScript::run&lt;Tests,BAB,Options&gt;(opt);&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;0;&lt;br&nbsp;class=&quot;&quot;&gt;}&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;-----Message&nbsp;d'origine-----&lt;br&nbsp;class=&quot;&quot;&gt;De&nbsp;:&nbsp;&lt;a&nbsp;href=&quot;mailto:users-bounces@gecode.org&quot;&nbsp;class=&quot;&quot;&gt;users-bounces@gecode.org&lt;/a&gt;&nbsp;[&lt;a&nbsp;href=&quot;mailto:users-bounces@gecode.org&quot;&nbsp;class=&quot;&quot;&gt;mailto:users-bounces@gecode.org&lt;/a&gt;]&nbsp;De&nbsp;la&nbsp;part&lt;br&nbsp;class=&quot;&quot;&gt;de&nbsp;Sebastien&nbsp;Delmotte&lt;br&nbsp;class=&quot;&quot;&gt;Envoyé&nbsp;:&nbsp;mardi&nbsp;20&nbsp;septembre&nbsp;2016&nbsp;10:37&lt;br&nbsp;class=&quot;&quot;&gt;À&nbsp;:&nbsp;&lt;a&nbsp;href=&quot;mailto:cschulte@kth.se&quot;&nbsp;class=&quot;&quot;&gt;cschulte@kth.se&lt;/a&gt;&lt;br&nbsp;class=&quot;&quot;&gt;Cc&nbsp;:&nbsp;&lt;a&nbsp;href=&quot;mailto:users@gecode.org&quot;&nbsp;class=&quot;&quot;&gt;users@gecode.org&lt;/a&gt;&lt;br&nbsp;class=&quot;&quot;&gt;Objet&nbsp;:&nbsp;Re:&nbsp;[gecode-users]&nbsp;Cost&nbsp;optimization&nbsp;problem&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;Dear&nbsp;Christian,&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;I've&nbsp;tried&nbsp;to&nbsp;play&nbsp;with&nbsp;the&nbsp;step&nbsp;value&nbsp;but&nbsp;it&nbsp;doesn't&nbsp;change&nbsp;anything.&nbsp;An&lt;br&nbsp;class=&quot;&quot;&gt;exception&nbsp;related&nbsp;to&nbsp;an&nbsp;unassigned&nbsp;variable&nbsp;(cost)&nbsp;still&nbsp;occurs&nbsp;and&nbsp;it&lt;br&nbsp;class=&quot;&quot;&gt;prevents&nbsp;the&nbsp;search&nbsp;to&nbsp;be&nbsp;processed.&nbsp;I&nbsp;really&nbsp;don't&nbsp;understand&nbsp;why&nbsp;it&nbsp;works&lt;br&nbsp;class=&quot;&quot;&gt;with&nbsp;exactly&nbsp;the&nbsp;same&nbsp;code&nbsp;with&nbsp;floats&nbsp;converted&nbsp;to&nbsp;integers,&nbsp;but&nbsp;I&nbsp;surely&lt;br&nbsp;class=&quot;&quot;&gt;don't&nbsp;use&nbsp;correctly&nbsp;the&nbsp;gecode&nbsp;options.&nbsp;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;I&nbsp;think&nbsp;I&nbsp;will&nbsp;continue&nbsp;with&nbsp;integers&nbsp;for&nbsp;the&nbsp;moment.&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;Thank&nbsp;you&nbsp;very&nbsp;much.&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;S.&nbsp;D.&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;-----Message&nbsp;d'origine-----&lt;br&nbsp;class=&quot;&quot;&gt;De&nbsp;:&nbsp;Christian&nbsp;Schulte&nbsp;[&lt;a&nbsp;href=&quot;mailto:cschulte@kth.se&quot;&nbsp;class=&quot;&quot;&gt;mailto:cschulte@kth.se&lt;/a&gt;]&nbsp;Envoyé&nbsp;:&nbsp;vendredi&nbsp;16&lt;br&nbsp;class=&quot;&quot;&gt;septembre&nbsp;2016&nbsp;13:18&nbsp;À&nbsp;:&nbsp;'Sebastien&nbsp;Delmotte';&nbsp;&lt;a&nbsp;href=&quot;mailto:users@gecode.org&quot;&nbsp;class=&quot;&quot;&gt;users@gecode.org&lt;/a&gt;&nbsp;Objet&nbsp;:&nbsp;RE:&lt;br&nbsp;class=&quot;&quot;&gt;[gecode-users]&nbsp;Cost&nbsp;optimization&nbsp;problem&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;Hi,&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;That's&nbsp;strange...&nbsp;Did&nbsp;you&nbsp;try&nbsp;to&nbsp;play&nbsp;with&nbsp;the&nbsp;step&nbsp;value&nbsp;as&nbsp;explained&nbsp;in&lt;br&nbsp;class=&quot;&quot;&gt;MPG&nbsp;7.3?&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;Cheers&lt;br&nbsp;class=&quot;&quot;&gt;Christian&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;--&lt;br&nbsp;class=&quot;&quot;&gt;Christian&nbsp;Schulte,&nbsp;&lt;a&nbsp;href=&quot;http://www.gecode.org/~schulte&quot;&nbsp;class=&quot;&quot;&gt;www.gecode.org/~schulte&lt;/a&gt;&nbsp;Professor&nbsp;of&nbsp;Computer&nbsp;Science,&lt;br&nbsp;class=&quot;&quot;&gt;KTH,&nbsp;&lt;a&nbsp;href=&quot;mailto:cschulte@kth.se&quot;&nbsp;class=&quot;&quot;&gt;cschulte@kth.se&lt;/a&gt;&nbsp;Expert&nbsp;Researcher,&nbsp;SICS,&nbsp;&lt;a&nbsp;href=&quot;mailto:cschulte@sics.se&quot;&nbsp;class=&quot;&quot;&gt;cschulte@sics.se&lt;/a&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;-----Original&nbsp;Message-----&lt;br&nbsp;class=&quot;&quot;&gt;From:&nbsp;&lt;a&nbsp;href=&quot;mailto:users-bounces@gecode.org&quot;&nbsp;class=&quot;&quot;&gt;users-bounces@gecode.org&lt;/a&gt;&nbsp;[&lt;a&nbsp;href=&quot;mailto:users-bounces@gecode.org&quot;&nbsp;class=&quot;&quot;&gt;mailto:users-bounces@gecode.org&lt;/a&gt;]&nbsp;On&nbsp;Behalf&lt;br&nbsp;class=&quot;&quot;&gt;Of&nbsp;Sebastien&nbsp;Delmotte&lt;br&nbsp;class=&quot;&quot;&gt;Sent:&nbsp;Friday,&nbsp;September&nbsp;16,&nbsp;2016&nbsp;13:08&lt;br&nbsp;class=&quot;&quot;&gt;To:&nbsp;&lt;a&nbsp;href=&quot;mailto:cschulte@kth.se&quot;&nbsp;class=&quot;&quot;&gt;cschulte@kth.se&lt;/a&gt;;&nbsp;&lt;a&nbsp;href=&quot;mailto:users@gecode.org&quot;&nbsp;class=&quot;&quot;&gt;users@gecode.org&lt;/a&gt;&lt;br&nbsp;class=&quot;&quot;&gt;Subject:&nbsp;Re:&nbsp;[gecode-users]&nbsp;Cost&nbsp;optimization&nbsp;problem&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;Dear&nbsp;Christian,&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;Thank&nbsp;you&nbsp;for&nbsp;your&nbsp;answer.&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;When&nbsp;I&nbsp;transform&nbsp;all&nbsp;the&nbsp;code&nbsp;from&nbsp;float&nbsp;variables&nbsp;to&nbsp;integer&nbsp;variables&nbsp;(in&lt;br&nbsp;class=&quot;&quot;&gt;changing&nbsp;the&nbsp;constraints&nbsp;from&nbsp;1&nbsp;to&nbsp;100&nbsp;for&nbsp;example),&nbsp;that&nbsp;works&nbsp;perfectly.&lt;br&nbsp;class=&quot;&quot;&gt;So&nbsp;maybe&nbsp;my&nbsp;implementation&nbsp;for&nbsp;float&nbsp;variables&nbsp;is&nbsp;not&nbsp;good.&nbsp;I&nbsp;will&nbsp;try&nbsp;to&lt;br&nbsp;class=&quot;&quot;&gt;find&nbsp;why.&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;Best&nbsp;regards,&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;SD&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;-----Message&nbsp;d'origine-----&lt;br&nbsp;class=&quot;&quot;&gt;De&nbsp;:&nbsp;Christian&nbsp;Schulte&nbsp;[&lt;a&nbsp;href=&quot;mailto:cschulte@kth.se&quot;&nbsp;class=&quot;&quot;&gt;mailto:cschulte@kth.se&lt;/a&gt;]&nbsp;Envoyé&nbsp;:&nbsp;jeudi&nbsp;15&nbsp;septembre&lt;br&nbsp;class=&quot;&quot;&gt;2016&nbsp;17:03&nbsp;À&nbsp;:&nbsp;'Sebastien&nbsp;Delmotte';&nbsp;&lt;a&nbsp;href=&quot;mailto:users@gecode.org&quot;&nbsp;class=&quot;&quot;&gt;users@gecode.org&lt;/a&gt;&nbsp;Objet&nbsp;:&nbsp;RE:&lt;br&nbsp;class=&quot;&quot;&gt;[gecode-users]&nbsp;Cost&nbsp;optimization&nbsp;problem&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;Hi,&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;Sorry&nbsp;but&nbsp;I&nbsp;think&nbsp;this&nbsp;is&nbsp;really&nbsp;a&nbsp;modelling&nbsp;issue&nbsp;and&nbsp;not&nbsp;a&nbsp;Gecode&nbsp;issue,&lt;br&nbsp;class=&quot;&quot;&gt;as&nbsp;you&nbsp;have&nbsp;already&nbsp;figured&nbsp;out&nbsp;3).&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;Cheers&lt;br&nbsp;class=&quot;&quot;&gt;Christian&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;--&lt;br&nbsp;class=&quot;&quot;&gt;Christian&nbsp;Schulte,&nbsp;&lt;a&nbsp;href=&quot;http://www.gecode.org/~schulte&quot;&nbsp;class=&quot;&quot;&gt;www.gecode.org/~schulte&lt;/a&gt;&nbsp;Professor&nbsp;of&nbsp;Computer&nbsp;Science,&lt;br&nbsp;class=&quot;&quot;&gt;KTH,&nbsp;&lt;a&nbsp;href=&quot;mailto:cschulte@kth.se&quot;&nbsp;class=&quot;&quot;&gt;cschulte@kth.se&lt;/a&gt;&nbsp;Expert&nbsp;Researcher,&nbsp;SICS,&nbsp;&lt;a&nbsp;href=&quot;mailto:cschulte@sics.se&quot;&nbsp;class=&quot;&quot;&gt;cschulte@sics.se&lt;/a&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;-----Original&nbsp;Message-----&lt;br&nbsp;class=&quot;&quot;&gt;From:&nbsp;&lt;a&nbsp;href=&quot;mailto:users-bounces@gecode.org&quot;&nbsp;class=&quot;&quot;&gt;users-bounces@gecode.org&lt;/a&gt;&nbsp;[&lt;a&nbsp;href=&quot;mailto:users-bounces@gecode.org&quot;&nbsp;class=&quot;&quot;&gt;mailto:users-bounces@gecode.org&lt;/a&gt;]&nbsp;On&nbsp;Behalf&lt;br&nbsp;class=&quot;&quot;&gt;Of&nbsp;Sebastien&nbsp;Delmotte&lt;br&nbsp;class=&quot;&quot;&gt;Sent:&nbsp;Tuesday,&nbsp;September&nbsp;13,&nbsp;2016&nbsp;14:55&lt;br&nbsp;class=&quot;&quot;&gt;To:&nbsp;&lt;a&nbsp;href=&quot;mailto:users@gecode.org&quot;&nbsp;class=&quot;&quot;&gt;users@gecode.org&lt;/a&gt;&lt;br&nbsp;class=&quot;&quot;&gt;Subject:&nbsp;[gecode-users]&nbsp;Cost&nbsp;optimization&nbsp;problem&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;Dear&nbsp;All,&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;I&nbsp;have&nbsp;a&nbsp;problem&nbsp;with&nbsp;using&nbsp;Gecode&nbsp;to&nbsp;solve&nbsp;an&nbsp;optimization&nbsp;problem.&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;Problem&nbsp;description:&lt;br&nbsp;class=&quot;&quot;&gt;-&nbsp;I&nbsp;have&nbsp;a&nbsp;recipe&nbsp;with&nbsp;two&nbsp;sub-components.&nbsp;Each&nbsp;component&nbsp;has&nbsp;a&nbsp;coefficient&lt;br&nbsp;class=&quot;&quot;&gt;corresponding&nbsp;to&nbsp;its&nbsp;amount&nbsp;in&nbsp;the&nbsp;recipe.&nbsp;So&nbsp;the&nbsp;sum&nbsp;of&nbsp;the&nbsp;sub-components&lt;br&nbsp;class=&quot;&quot;&gt;coefficients&nbsp;must&nbsp;be&nbsp;equal&nbsp;to&nbsp;1;&lt;br&nbsp;class=&quot;&quot;&gt;-&nbsp;Each&nbsp;of&nbsp;the&nbsp;two&nbsp;sub-components&nbsp;is&nbsp;composed&nbsp;of&nbsp;several&nbsp;raw&nbsp;materials.&nbsp;Each&lt;br&nbsp;class=&quot;&quot;&gt;raw&nbsp;material&nbsp;has&nbsp;a&nbsp;coefficient&nbsp;corresponding&nbsp;to&nbsp;its&nbsp;amount&nbsp;in&nbsp;its&lt;br&nbsp;class=&quot;&quot;&gt;sub-component.&nbsp;So,&nbsp;for&nbsp;each&nbsp;sub-component,&nbsp;the&nbsp;sum&nbsp;of&nbsp;the&nbsp;raw&nbsp;materials&lt;br&nbsp;class=&quot;&quot;&gt;coefficients&nbsp;is&nbsp;equal&nbsp;to&nbsp;1;&lt;br&nbsp;class=&quot;&quot;&gt;-&nbsp;At&nbsp;the&nbsp;recipe&nbsp;level,&nbsp;I&nbsp;have&nbsp;some&nbsp;constraints&nbsp;on&nbsp;the&nbsp;raw&nbsp;materials&nbsp;amount&lt;br&nbsp;class=&quot;&quot;&gt;(e.g.&nbsp;raw&nbsp;material&nbsp;1&nbsp;must&nbsp;be&nbsp;in&nbsp;a&nbsp;given&nbsp;interval).&nbsp;The&nbsp;amount&nbsp;of&nbsp;each&nbsp;raw&lt;br&nbsp;class=&quot;&quot;&gt;material&nbsp;in&nbsp;the&nbsp;recipe&nbsp;is&nbsp;equal&nbsp;to&nbsp;the&nbsp;product&nbsp;of&nbsp;the&nbsp;coefficient&nbsp;of&nbsp;this&lt;br&nbsp;class=&quot;&quot;&gt;raw&nbsp;material&nbsp;by&nbsp;the&nbsp;coefficient&nbsp;of&nbsp;its&nbsp;sub-component&lt;br&nbsp;class=&quot;&quot;&gt;-&nbsp;I&nbsp;have&nbsp;to&nbsp;minimize&nbsp;the&nbsp;cost&nbsp;of&nbsp;the&nbsp;recipe&nbsp;accounting&nbsp;for&nbsp;the&nbsp;cost&nbsp;of&nbsp;each&lt;br&nbsp;class=&quot;&quot;&gt;raw&nbsp;materials.&nbsp;This&nbsp;cost&nbsp;is&nbsp;equal&nbsp;to&nbsp;the&nbsp;sum&nbsp;of&nbsp;the&nbsp;product&nbsp;of&nbsp;each&nbsp;raw&lt;br&nbsp;class=&quot;&quot;&gt;material&nbsp;coefficient&nbsp;by&nbsp;its&nbsp;unit&nbsp;cost.&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;Code&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;#include&nbsp;&lt;gecode/driver.hh&gt;&lt;br&nbsp;class=&quot;&quot;&gt;#include&nbsp;&lt;gecode/int.hh&gt;&lt;br&nbsp;class=&quot;&quot;&gt;#include&nbsp;&lt;gecode/minimodel.hh&gt;&lt;br&nbsp;class=&quot;&quot;&gt;using&nbsp;namespace&nbsp;Gecode;&lt;br&nbsp;class=&quot;&quot;&gt;class&nbsp;Tests&nbsp;:&nbsp;public&nbsp;FloatMinimizeScript&nbsp;&nbsp;{&lt;br&nbsp;class=&quot;&quot;&gt;protected:&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;FloatVarArray&nbsp;_rms_in_sub_c_1;&nbsp;//&nbsp;raw&nbsp;mat&nbsp;in&nbsp;sub-comp1&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;FloatVarArray&nbsp;_rms_in_sub_c_2;&nbsp;//&nbsp;raw&nbsp;mat&nbsp;in&nbsp;sub-comp2&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;FloatVarArray&nbsp;_sub_c;&nbsp;//&nbsp;2&nbsp;sub-comp&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;FloatVar&nbsp;_cost;&nbsp;//&nbsp;cost&lt;br&nbsp;class=&quot;&quot;&gt;public:&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;Tests(const&nbsp;Options&amp;&nbsp;o)&lt;br&nbsp;class=&quot;&quot;&gt;:FloatMinimizeScript(o),_rms_in_sub_c_1(*this,4,0,1),_rms_in_sub_c_2(*this,3&lt;br&nbsp;class=&quot;&quot;&gt;,0,1),_sub_c(*this,2,0,1),_cost(*this,0,1000)&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;{&lt;br&nbsp;class=&quot;&quot;&gt;//sum&nbsp;of&nbsp;raw&nbsp;mat&nbsp;in&nbsp;sub-comp&nbsp;=1&lt;br&nbsp;class=&quot;&quot;&gt;FloatVar&nbsp;all_rms_sub1&nbsp;=&nbsp;expr(*this,sum(_rms_in_sub_c_1));&lt;br&nbsp;class=&quot;&quot;&gt;rel(*this,all_rms_sub1&nbsp;,FRT_EQ,1);&lt;br&nbsp;class=&quot;&quot;&gt;FloatVar&nbsp;all_rms_sub2&nbsp;=&nbsp;expr(*this,sum(_rms_in_sub_c_2));&lt;br&nbsp;class=&quot;&quot;&gt;rel(*this,all_rms_sub2&nbsp;,FRT_EQ,1);&lt;br&nbsp;class=&quot;&quot;&gt;//&nbsp;sum&nbsp;of&nbsp;sub-comp&nbsp;=1&lt;br&nbsp;class=&quot;&quot;&gt;FloatVar&nbsp;sm&nbsp;=&nbsp;expr(*this,sum(_sub_c));&lt;br&nbsp;class=&quot;&quot;&gt;rel(*this,sm&nbsp;,FRT_EQ,1);&lt;br&nbsp;class=&quot;&quot;&gt;//&nbsp;Global&nbsp;constraints&nbsp;on&nbsp;raw&nbsp;mat&nbsp;in&nbsp;recipe&nbsp;FloatVar&nbsp;rm_0_sub_coef1=&lt;br&nbsp;class=&quot;&quot;&gt;expr(*this,_rms_in_sub_c_1[0]*_sub_c[0]);&lt;br&nbsp;class=&quot;&quot;&gt;rel(*this,rm_0_sub_coef1,FRT_GQ,0);&lt;br&nbsp;class=&quot;&quot;&gt;FloatVar&nbsp;rm_1_sub_coef1=&nbsp;expr(*this,_rms_in_sub_c_1[1]*_sub_c[0]);&lt;br&nbsp;class=&quot;&quot;&gt;rel(*this,rm_1_sub_coef1,FRT_GQ,0);&lt;br&nbsp;class=&quot;&quot;&gt;FloatVar&nbsp;rm_2_sub_coef1=&nbsp;expr(*this,_rms_in_sub_c_1[2]*_sub_c[0]);&lt;br&nbsp;class=&quot;&quot;&gt;rel(*this,rm_2_sub_coef1,FRT_GQ,0);&lt;br&nbsp;class=&quot;&quot;&gt;FloatVar&nbsp;rm_3_sub_coef1=&nbsp;expr(*this,_rms_in_sub_c_1[3]*_sub_c[0]);&lt;br&nbsp;class=&quot;&quot;&gt;rel(*this,rm_3_sub_coef1,FRT_GQ,0);&lt;br&nbsp;class=&quot;&quot;&gt;FloatVar&nbsp;rm_0_sub_coef2=&nbsp;expr(*this,_rms_in_sub_c_2[0]*_sub_c[1]);&lt;br&nbsp;class=&quot;&quot;&gt;rel(*this,rm_0_sub_coef2,FRT_GQ,0);&lt;br&nbsp;class=&quot;&quot;&gt;FloatVar&nbsp;rm_1_sub_coef2=&nbsp;expr(*this,_rms_in_sub_c_2[1]*_sub_c[1]);&lt;br&nbsp;class=&quot;&quot;&gt;rel(*this,rm_1_sub_coef2,FRT_GQ,0);&lt;br&nbsp;class=&quot;&quot;&gt;FloatVar&nbsp;rm_2_sub_coef2=&nbsp;expr(*this,_rms_in_sub_c_2[2]*_sub_c[1]);&lt;br&nbsp;class=&quot;&quot;&gt;rel(*this,rm_2_sub_coef2,FRT_GQ,0);&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;//&nbsp;Cost&lt;br&nbsp;class=&quot;&quot;&gt;_cost&nbsp;=&nbsp;expr(*this,_sub_c[0]*(_rms_in_sub_c_1[0]*12&nbsp;+_rms_in_sub_c_1[1]*14&nbsp;+&lt;br&nbsp;class=&quot;&quot;&gt;_rms_in_sub_c_1[2]&nbsp;*&nbsp;22&nbsp;+_rms_in_sub_c_1[3]&nbsp;*&nbsp;17&nbsp;)&lt;br&nbsp;class=&quot;&quot;&gt;+_sub_c[1]*(_rms_in_sub_c_2[0]*9&nbsp;+_rms_in_sub_c_2[1]*2&nbsp;+&nbsp;&lt;br&nbsp;class=&quot;&quot;&gt;+_rms_in_sub_c_2[2]&lt;br&nbsp;class=&quot;&quot;&gt;*&nbsp;18&nbsp;));&lt;br&nbsp;class=&quot;&quot;&gt;FloatVarArgs&nbsp;all;&lt;br&nbsp;class=&quot;&quot;&gt;for(int&nbsp;i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&lt;4;&nbsp;i++)&nbsp;all&nbsp;&lt;&lt;&nbsp;_rms_in_sub_c_1[i];&nbsp;for(int&nbsp;i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&lt;3;&lt;br&nbsp;class=&quot;&quot;&gt;i++)&nbsp;all&nbsp;&lt;&lt;&nbsp;_rms_in_sub_c_2[i];&nbsp;for(int&nbsp;i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&lt;2;&nbsp;i++)&nbsp;all&nbsp;&lt;&lt;&nbsp;&lt;br&nbsp;class=&quot;&quot;&gt;i++_sub_c[i];&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;branch(*this,&nbsp;all,&nbsp;FLOAT_VAR_NONE(),&nbsp;FLOAT_VAL_SPLIT_MIN());&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;}&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;virtual&nbsp;void&lt;br&nbsp;class=&quot;&quot;&gt;print(std::ostream&amp;&nbsp;os)&nbsp;const&nbsp;{&lt;br&nbsp;class=&quot;&quot;&gt;os&nbsp;&lt;&lt;&nbsp;&quot;sub-component&nbsp;:&nbsp;&quot;&nbsp;&lt;&lt;&nbsp;_sub_c&nbsp;&lt;&lt;&nbsp;&quot;\nrms&nbsp;1&nbsp;:&nbsp;&quot;&lt;&lt;&nbsp;_rms_in_sub_c_1&lt;&lt;&lt;br&nbsp;class=&quot;&quot;&gt;&quot;\nrms2&nbsp;:&nbsp;&quot;&lt;&lt;&nbsp;_rms_in_sub_c_2&nbsp;&lt;&lt;&quot;\ncost&nbsp;:&nbsp;&quot;&lt;&lt;&nbsp;_cost&nbsp;&lt;&lt;&nbsp;std::endl;&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;}&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;virtual&nbsp;FloatVar&nbsp;cost(void)&nbsp;const{&lt;br&nbsp;class=&quot;&quot;&gt;return&nbsp;_cost;&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;}&lt;br&nbsp;class=&quot;&quot;&gt;Tests(bool&nbsp;share,&nbsp;Tests&amp;&nbsp;s)&nbsp;:&nbsp;FloatMinimizeScript(share,s)&nbsp;{&nbsp;_sub_c.update&lt;br&nbsp;class=&quot;&quot;&gt;(*this,&nbsp;share,&nbsp;s._sub_c);&nbsp;_rms_in_sub_c_1.update(*this,&nbsp;share,&lt;br&nbsp;class=&quot;&quot;&gt;s._rms_in_sub_c_1);&nbsp;_rms_in_sub_c_2.update(*this,&nbsp;share,&nbsp;s._rms_in_sub_c_2);&lt;br&nbsp;class=&quot;&quot;&gt;_cost.update(*this,&nbsp;share,&nbsp;s._cost);&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;}&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;virtual&nbsp;Space*&lt;br&nbsp;class=&quot;&quot;&gt;copy(bool&nbsp;share)&nbsp;{&lt;br&nbsp;class=&quot;&quot;&gt;return&nbsp;new&nbsp;Tests(share,*this);&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;}&lt;br&nbsp;class=&quot;&quot;&gt;};&lt;br&nbsp;class=&quot;&quot;&gt;int&nbsp;main(int&nbsp;argc,&nbsp;char*&nbsp;argv[])&nbsp;{&lt;br&nbsp;class=&quot;&quot;&gt;Options&nbsp;opt(&quot;Test&quot;);&lt;br&nbsp;class=&quot;&quot;&gt;opt.solutions(0);&lt;br&nbsp;class=&quot;&quot;&gt;FloatMinimizeScript::run&lt;Tests,BAB,Options&gt;(opt);&lt;br&nbsp;class=&quot;&quot;&gt;return&nbsp;0;&lt;br&nbsp;class=&quot;&quot;&gt;}&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;When&nbsp;executing&nbsp;this&nbsp;code,&nbsp;the&nbsp;result&nbsp;is&nbsp;:&lt;br&nbsp;class=&quot;&quot;&gt;sub-component&nbsp;:&nbsp;{0,&nbsp;1}&lt;br&nbsp;class=&quot;&quot;&gt;rms&nbsp;in&nbsp;sub-component&nbsp;1&nbsp;:&nbsp;{0,&nbsp;0,&nbsp;0,&nbsp;1}&lt;br&nbsp;class=&quot;&quot;&gt;rms&nbsp;in&nbsp;sub-component&nbsp;2&nbsp;:&nbsp;{0,&nbsp;0,&nbsp;1}&lt;br&nbsp;class=&quot;&quot;&gt;cost&nbsp;:&nbsp;[18..18]&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;Exception:&nbsp;FloatVar::val:&nbsp;Attempt&nbsp;to&nbsp;access&nbsp;value&nbsp;of&nbsp;unassigned&nbsp;variable.&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;Problems:&lt;br&nbsp;class=&quot;&quot;&gt;1-&nbsp;The&nbsp;resulting&nbsp;solution&nbsp;is&nbsp;trivial&nbsp;but&nbsp;absolutely&nbsp;not&nbsp;optimal&nbsp;for&nbsp;the&lt;br&nbsp;class=&quot;&quot;&gt;cost:&nbsp;only&nbsp;the&nbsp;second&nbsp;sub-component&nbsp;has&nbsp;a&nbsp;positive&nbsp;coefficient&nbsp;(=1)&nbsp;with&lt;br&nbsp;class=&quot;&quot;&gt;only&nbsp;one&nbsp;raw&nbsp;material&nbsp;which&nbsp;is&nbsp;not&nbsp;the&nbsp;cheapest&nbsp;one;&lt;br&nbsp;class=&quot;&quot;&gt;2-&nbsp;In&nbsp;this&nbsp;example,&nbsp;all&nbsp;the&nbsp;constraints&nbsp;for&nbsp;the&nbsp;raw&nbsp;materials&nbsp;are:&nbsp;greater&lt;br&nbsp;class=&quot;&quot;&gt;than&nbsp;0.&nbsp;But&nbsp;if&nbsp;I&nbsp;change&nbsp;the&nbsp;value&nbsp;of&nbsp;the&nbsp;constraints&nbsp;(e.g.&nbsp;greater&nbsp;than&lt;br&nbsp;class=&quot;&quot;&gt;0.1),&nbsp;I&nbsp;don't&nbsp;get&nbsp;any&nbsp;solution;&lt;br&nbsp;class=&quot;&quot;&gt;3-&nbsp;There&nbsp;is&nbsp;an&nbsp;exception&nbsp;error:&nbsp;FloatVar::val:&nbsp;Attempt&nbsp;to&nbsp;access&nbsp;value&nbsp;of&lt;br&nbsp;class=&quot;&quot;&gt;unassigned&nbsp;variable.&nbsp;This&nbsp;error&nbsp;disappears&nbsp;when&nbsp;I&nbsp;add&nbsp;the&nbsp;variable&nbsp;cost&nbsp;in&lt;br&nbsp;class=&quot;&quot;&gt;the&nbsp;branching,&nbsp;but&nbsp;the&nbsp;solution&nbsp;is&nbsp;still&nbsp;non&nbsp;optimal.&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;I&nbsp;think&nbsp;I&nbsp;have&nbsp;a&nbsp;problem&nbsp;with&nbsp;handling&nbsp;gecode&nbsp;because&nbsp;the&nbsp;problem&nbsp;is&nbsp;simple,&lt;br&nbsp;class=&quot;&quot;&gt;but&nbsp;I&nbsp;have&nbsp;no&nbsp;idea&nbsp;about&nbsp;the&nbsp;origin&nbsp;of&nbsp;the&nbsp;problem.&nbsp;&lt;br&nbsp;class=&quot;&quot;&gt;With&nbsp;many&nbsp;thanks&nbsp;in&nbsp;advance.&lt;br&nbsp;class=&quot;&quot;&gt;Best&nbsp;regards,&lt;br&nbsp;class=&quot;&quot;&gt;S.D.&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;_______________________________________________&lt;br&nbsp;class=&quot;&quot;&gt;Gecode&nbsp;users&nbsp;mailing&nbsp;list&lt;br&nbsp;class=&quot;&quot;&gt;&lt;a&nbsp;href=&quot;mailto:users@gecode.org&quot;&nbsp;class=&quot;&quot;&gt;users@gecode.org&lt;/a&gt;&lt;br&nbsp;class=&quot;&quot;&gt;https://www.gecode.org/mailman/listinfo/gecode-users&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;_______________________________________________&lt;br&nbsp;class=&quot;&quot;&gt;Gecode&nbsp;users&nbsp;mailing&nbsp;list&lt;br&nbsp;class=&quot;&quot;&gt;users@gecode.org&lt;br&nbsp;class=&quot;&quot;&gt;https://www.gecode.org/mailman/listinfo/gecode-users&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;_______________________________________________&lt;br&nbsp;class=&quot;&quot;&gt;Gecode&nbsp;users&nbsp;mailing&nbsp;list&lt;br&nbsp;class=&quot;&quot;&gt;users@gecode.org&lt;br&nbsp;class=&quot;&quot;&gt;https://www.gecode.org/mailman/listinfo/gecode-users&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;_______________________________________________&lt;br&nbsp;class=&quot;&quot;&gt;Gecode&nbsp;users&nbsp;mailing&nbsp;list&lt;br&nbsp;class=&quot;&quot;&gt;users@gecode.org&lt;br&nbsp;class=&quot;&quot;&gt;https://www.gecode.org/mailman/listinfo/gecode-users&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;
</tt>
